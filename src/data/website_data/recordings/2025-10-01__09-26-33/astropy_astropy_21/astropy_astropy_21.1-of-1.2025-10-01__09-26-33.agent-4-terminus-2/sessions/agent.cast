{"version": 2, "width": 160, "height": 40, "timestamp": 1762994677, "env": {"SHELL": "/bin/bash", "TERM": "screen"}}
[0.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[0.002, "i", "asciinema rec --stdin /logs/agent.cast\r"]
[0.004, "o", "asciinema rec --stdin /logs/agent.cast\r\n"]
[1.242, "o", "\u001b[?2004l\r\n"]
[2.478, "o", "\u001b[0;31masciinema: /logs/agent.cast already exists, aborting\u001b[0m\r\n"]
[3.714, "o", "\u001b[0;31masciinema: use --overwrite option if you want to overwrite existing recording\u001b[0m\r\n"]
[5.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[5.002, "i", "clear\r"]
[5.004, "o", "clear\r\n"]
[7.478, "o", "\u001b[?2004l\r\n"]
[10.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[10.002, "i", "ls -la\r"]
[10.004, "o", "ls -la\r\n"]
[10.123714, "o", "\u001b[?2004l\r\n"]
[10.241429, "o", "total 884\r\n"]
[10.359143, "o", "drwxr-xr-x 1 root root   4096 Oct  1 11:48 \u001b[0m\u001b[01;34m.\u001b[0m\r\n"]
[10.476857, "o", "drwxr-xr-x 1 root root   4096 Sep 15 17:24 \u001b[01;34m..\u001b[0m\r\n"]
[10.594571, "o", "-rw-r--r-- 1 root root      0 Sep 13 19:37 .astropy-root\r\n"]
[10.712286, "o", "drwxr-xr-x 1 root root   4096 Sep 13 19:38 \u001b[01;34m.circleci\u001b[0m\r\n"]
[10.83, "o", "drwxr-xr-x 1 root root   4096 Sep 13 19:38 \u001b[01;34m.devcontainer\u001b[0m\r\n"]
[10.947714, "o", "-rw-r--r-- 1 root root   1125 Sep 13 19:37 .flake8\r\n"]
[11.065429, "o", "drwxr-xr-x 1 root root   4096 Sep 15 17:25 \u001b[01;34m.git\u001b[0m\r\n"]
[11.183143, "o", "-rw-r--r-- 1 root root   1771 Sep 13 19:37 .git-blame-ignore-revs\r\n"]
[11.300857, "o", "-rw-r--r-- 1 root root     74 Sep 13 19:37 .gitattributes\r\n"]
[11.418571, "o", "drwxr-xr-x 1 root root   4096 Sep 13 19:38 \u001b[01;34m.github\u001b[0m\r\n"]
[11.536286, "o", "-rw-r--r-- 1 root root   1318 Sep 13 19:38 .gitignore\r\n"]
[11.654, "o", "-rw-r--r-- 1 root root  23173 Sep 13 19:38 .mailmap\r\n"]
[11.771714, "o", "-rw-r--r-- 1 root root   4394 Sep 13 19:38 .pre-commit-config.yaml\r\n"]
[11.889429, "o", "-rw-r--r-- 1 root root     76 Sep 13 19:37 .pycodestyle\r\n"]
[12.007143, "o", "drwxr-xr-x 1 root root   4096 Sep 13 19:38 \u001b[01;34m.pyinstaller\u001b[0m\r\n"]
[12.124857, "o", "-rw-r--r-- 1 root root    597 Sep 13 19:37 .readthedocs.yaml\r\n"]
[12.242571, "o", "-rw-r--r-- 1 root root  11870 Sep 13 19:38 .ruff.toml\r\n"]
[12.360286, "o", "-rw-r--r-- 1 root root 611692 Sep 13 19:38 CHANGES.rst\r\n"]
[12.478, "o", "-rw-r--r-- 1 root root     66 Sep 13 19:37 CITATION\r\n"]
[12.595714, "o", "-rw-r--r-- 1 root root  69267 Sep 13 19:37 CITATION.cff\r\n"]
[12.713429, "o", "-rw-r--r-- 1 root root    139 Sep 13 19:37 CODE_OF_CONDUCT.md\r\n"]
[12.831143, "o", "-rw-r--r-- 1 root root   9843 Sep 13 19:38 CONTRIBUTING.md\r\n"]
[12.948857, "o", "-rw-r--r-- 1 root root    129 Sep 13 19:37 GOVERNANCE.md\r\n"]
[13.066571, "o", "-rw-r--r-- 1 root root   1496 Sep 13 19:37 LICENSE.rst\r\n"]
[13.184286, "o", "-rw-r--r-- 1 root root    178 Sep 13 19:37 MANIFEST.in\r\n"]
[13.302, "o", "-rw-r--r-- 1 root root   5324 Sep 13 19:38 README.rst\r\n"]
[13.419714, "o", "-rw-r--r-- 1 root root   1154 Sep 13 19:38 SECURITY.md\r\n"]
[13.537429, "o", "drwxr-xr-x 1 root root   4096 Sep 15 14:29 \u001b[01;34mastropy\u001b[0m\r\n"]
[13.655143, "o", "drwxr-xr-x 5 root root   4096 Sep 13 19:40 \u001b[01;34mastropy-benchmarks\u001b[0m\r\n"]
[13.772857, "o", "drwxr-xr-x 2 root root   4096 Sep 15 14:27 \u001b[01;34mastropy.egg-info\u001b[0m\r\n"]
[13.890571, "o", "-rw-r--r-- 1 root root    382 Sep 13 19:38 asv.ci.conf.json\r\n"]
[14.008286, "o", "drwxr-xr-x 1 root root   4096 Sep 13 19:38 \u001b[01;34mcextern\u001b[0m\r\n"]
[14.126, "o", "-rw-r--r-- 1 root root    244 Sep 13 19:37 codecov.yml\r\n"]
[14.243714, "o", "-rw-r--r-- 1 root root   2671 Sep 13 19:38 conftest.py\r\n"]
[14.361429, "o", "drwxr-xr-x 1 root root   4096 Sep 13 19:38 \u001b[01;34mdocs\u001b[0m\r\n"]
[14.479143, "o", "drwxr-xr-x 4 root root   4096 Sep 13 19:38 \u001b[01;34mexamples\u001b[0m\r\n"]
[14.596857, "o", "drwxr-xr-x 1 root root   4096 Sep 13 19:38 \u001b[01;34mlicenses\u001b[0m\r\n"]
[14.714571, "o", "-rw-r--r-- 1 root root  18581 Sep 13 19:38 pyproject.toml\r\n"]
[14.832286, "o", "-rwxr-xr-x 1 root root   1895 Sep 13 19:38 \u001b[01;32msetup.py\u001b[0m\r\n"]
[15.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[15.002, "i", "ls -la .asv\r"]
[15.004, "o", "ls -la .asv\r\n"]
[17.478, "o", "\u001b[?2004l\r\n"]
[20.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[20.002, "i", "ls -la benchmarks\r"]
[20.004, "o", "ls -la benchmarks\r\n"]
[22.478, "o", "\u001b[?2004l\r\n"]
[25.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[25.002, "i", "ls -la asv.conf.json\r"]
[25.004, "o", "ls -la asv.conf.json\r\n"]
[27.478, "o", "\u001b[?2004l\r\n"]
[30.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[30.002, "i", "cat asv.conf.json\r"]
[30.004, "o", "cat asv.conf.json\r\n"]
[32.478, "o", "\u001b[?2004l\r\n"]
[35.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[35.002, "i", "grep -R \"class units\" -n benchmarks || true\r"]
[35.004, "o", "grep -R \"class units\" -n benchmarks || true\r\n"]
[37.478, "o", "\u001b[?2004l\r\n"]
[40.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[40.002, "i", "grep -R \"TimeQuantity\" -n benchmarks || true\r"]
[40.004, "o", "grep -R \"TimeQuantity\" -n benchmarks || true\r\n"]
[42.478, "o", "\u001b[?2004l\r\n"]
[45.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[45.002, "i", "asv run --python=same --bench=\"units.time_quantity_init_small_list.*|units.time_quantity_creation_nocopy.*\" --quick\r"]
[45.004, "o", "asv run --python=same --bench=\"units.time_quantity_init_small_list.*|units.time_quantity_creation_nocopy.*\" --quick\r\n"]
[46.654, "o", "k\r\n"]
[48.302, "o", "\u001b[?2004l\r\n"]
[50.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[50.002, "i", "asv run --python=same --bench=\"units.time_quantity_times_unit.*|units.TimeQuantityOpLargeArraySameUnit.*\" --quick\r"]
[50.004, "o", "asv run --python=same --bench=\"units.time_quantity_times_unit.*|units.TimeQuantityOpLargeArraySameUnit.*\" --quick\r\n"]
[52.478, "o", "\u001b[?2004l\r\n"]
[55.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[55.002, "i", "asv profile --python=same units.time_quantity_times_unit\r"]
[55.004, "o", "asv profile --python=same units.time_quantity_times_unit\r\n"]
[57.478, "o", "\u001b[?2004l\r\n"]
[60.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[60.002, "i", "grep -R \"def .*quantity\" -n . || true\r"]
[60.004, "o", "grep -R \"def .*quantity\" -n . || true\r\n"]
[60.02817, "o", "\u001b[?2004l\r\n"]
[60.050341, "o", "\u001b[35m\u001b[K./astropy/stats/tests/test_funcs.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K130\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_median_absolute_deviation_quantity\u001b[m\u001b[K():\r\n"]
[60.072511, "o", "\u001b[35m\u001b[K./astropy/constants/constant.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K180\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef __quantity\u001b[m\u001b[K_subclass__(self, unit):\r\n"]
[60.094682, "o", "\u001b[35m\u001b[K./astropy/uncertainty/tests/test_distribution.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K36\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_init(self):\r\n"]
[60.116852, "o", "\u001b[35m\u001b[K./astropy/uncertainty/tests/test_distribution.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K45\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_init_T(self):\r\n"]
[60.139022, "o", "\u001b[35m\u001b[K./astropy/uncertainty/tests/test_distribution.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K50\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_init_with_distribution(self):\r\n"]
[60.161193, "o", "\u001b[35m\u001b[K./astropy/uncertainty/tests/test_distribution.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K205\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_add_quantity\u001b[m\u001b[K(self):\r\n"]
[60.183363, "o", "\u001b[35m\u001b[K./astropy/uncertainty/tests/test_distribution.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K329\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_index_assignment_quantity\u001b[m\u001b[K():\r\n"]
[60.205534, "o", "\u001b[35m\u001b[K./astropy/uncertainty/tests/test_distribution.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K425\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_distr_angle_view_as_quantity\u001b[m\u001b[K():\r\n"]
[60.227704, "o", "\u001b[35m\u001b[K./astropy/uncertainty/tests/test_distribution.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K503\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_scalar_quantity\u001b[m\u001b[K_distribution():\r\n"]
[60.249874, "o", "\u001b[35m\u001b[K./astropy/units/quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K694\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef _result_as_quantity\u001b[m\u001b[K(self, result, unit, out):\r\n"]
[60.272045, "o", "\u001b[35m\u001b[K./astropy/units/quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K746\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef __quantity\u001b[m\u001b[K_subclass__(self, unit):\r\n"]
[60.294215, "o", "\u001b[35m\u001b[K./astropy/units/quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1285\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K        \u001b[01;31m\u001b[Kdef quantity\u001b[m\u001b[K_iter():\r\n"]
[60.316386, "o", "\u001b[35m\u001b[K./astropy/units/quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K2149\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef __quantity\u001b[m\u001b[K_subclass__(self, unit):\r\n"]
[60.338556, "o", "\u001b[35m\u001b[K./astropy/units/function/core.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K95\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef _quantity\u001b[m\u001b[K_class(self):\r\n"]
[60.360726, "o", "\u001b[35m\u001b[K./astropy/units/function/core.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K631\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef __quantity\u001b[m\u001b[K_subclass__(self, unit):\r\n"]
[60.382897, "o", "\u001b[35m\u001b[K./astropy/units/function/logarithmic.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K57\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef _quantity\u001b[m\u001b[K_class(self):\r\n"]
[60.405067, "o", "\u001b[35m\u001b[K./astropy/units/function/logarithmic.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K155\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef _quantity\u001b[m\u001b[K_class(self):\r\n"]
[60.427238, "o", "\u001b[35m\u001b[K./astropy/units/function/logarithmic.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K180\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef _quantity\u001b[m\u001b[K_class(self):\r\n"]
[60.449408, "o", "\u001b[35m\u001b[K./astropy/units/function/logarithmic.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K214\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef _quantity\u001b[m\u001b[K_class(self):\r\n"]
[60.471578, "o", "\u001b[35m\u001b[K./astropy/units/utils.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K351\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef quantity\u001b[m\u001b[K_asanyarray(a: Sequence[int]) -> NDArray[int]: ...\r\n"]
[60.493749, "o", "\u001b[35m\u001b[K./astropy/units/utils.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K353\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef quantity\u001b[m\u001b[K_asanyarray(a: Sequence[int], dtype: DType) -> NDArray[DType]: ...\r\n"]
[60.515919, "o", "\u001b[35m\u001b[K./astropy/units/utils.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K355\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef quantity\u001b[m\u001b[K_asanyarray(a: Sequence[Quantity]) -> Quantity: ...\r\n"]
[60.53809, "o", "\u001b[35m\u001b[K./astropy/units/utils.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K356\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef quantity\u001b[m\u001b[K_asanyarray(\r\n"]
[60.56026, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K245\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_non_quantity\u001b[m\u001b[K_with_unit(self):\r\n"]
[60.58243, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K476\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_as_power(self, exponent_type):\r\n"]
[60.604601, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K722\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_conversion():\r\n"]
[60.626771, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K737\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_ilshift():  # in-place conversion\r\n"]
[60.648942, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K763\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_value_views():\r\n"]
[60.671112, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K784\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_conversion_with_equiv():\r\n"]
[60.693283, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K805\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_conversion_equivalency_passed_on():\r\n"]
[60.715453, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K809\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K        \u001b[01;31m\u001b[Kdef __quantity\u001b[m\u001b[K_view__(self, obj, unit):\r\n"]
[60.737623, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K812\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K        \u001b[01;31m\u001b[Kdef __quantity\u001b[m\u001b[K_instance__(self, *args, **kwargs):\r\n"]
[60.759794, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K868\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_equality(self):\r\n"]
[60.781964, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K881\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_equality_array(self):\r\n"]
[60.804135, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K911\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_comparison(self):\r\n"]
[60.826305, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K947\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_dimensionless_quantity\u001b[m\u001b[K_repr(self):\r\n"]
[60.848475, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K954\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_dimensionless_quantity\u001b[m\u001b[K_str(self):\r\n"]
[60.870646, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K961\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_dimensionless_quantity\u001b[m\u001b[K_format(self):\r\n"]
[60.892816, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K966\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_scalar_quantity\u001b[m\u001b[K_str(self):\r\n"]
[60.914987, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K970\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_scalar_quantity\u001b[m\u001b[K_repr(self):\r\n"]
[60.937157, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K974\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_array_quantity\u001b[m\u001b[K_str(self):\r\n"]
[60.959327, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K977\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_array_quantity\u001b[m\u001b[K_repr(self):\r\n"]
[60.981498, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K980\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_scalar_quantity\u001b[m\u001b[K_format(self):\r\n"]
[61.003668, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1554\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_inverse_quantity\u001b[m\u001b[K():\r\n"]
[61.025839, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1573\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_mutability():\r\n"]
[61.048009, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1583\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity_initialized_with_quantity\u001b[m\u001b[K():\r\n"]
[61.070179, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1599\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_string_unit():\r\n"]
[61.09235, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1608\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_invalid_unit_string():\r\n"]
[61.11452, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1642\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_iterability():\r\n"]
[61.136691, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1704\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_pickelability():\r\n"]
[61.158861, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1718\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_initialisation_from_string():\r\n"]
[61.181031, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1778\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_to_view():\r\n"]
[61.203202, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1785\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_tuple_power():\r\n"]
[61.225372, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1790\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_fraction_power():\r\n"]
[61.247543, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1799\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_from_table():\r\n"]
[61.269713, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1843\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_assign_slice_with_quantity\u001b[m\u001b[K_like():\r\n"]
[61.291883, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1900\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_repr_array_of_quantity\u001b[m\u001b[K():\r\n"]
[61.314054, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K2038\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_masked_quantity\u001b[m\u001b[K_str_repr():\r\n"]
[61.336224, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_array_methods.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K521\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_slice_to_quantity\u001b[m\u001b[K(self):\r\n"]
[61.358395, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_typing.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K14\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_typing(self):\r\n"]
[61.380565, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_typing.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K69\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_subclass_typing(self):\r\n"]
[61.402735, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_logarithmic.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K603\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_using_quantity\u001b[m\u001b[K_class(self):\r\n"]
[61.424906, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_logarithmic.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K630\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_decomposition():\r\n"]
[61.447076, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_logarithmic.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K658\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_view(self):\r\n"]
[61.469247, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_ufuncs.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1061\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_ndarray_inplace_op_with_quantity\u001b[m\u001b[K(self):\r\n"]
[61.491417, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_ufuncs.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1082\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_exception_with_where_quantity\u001b[m\u001b[K(self):\r\n"]
[61.513587, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_ufuncs.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1144\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_clip_quantity\u001b[m\u001b[K_inplace(self):\r\n"]
[61.535758, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_ufuncs.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1440\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K        \u001b[01;31m\u001b[Kdef test_basic(self, ufunc, duck_quantity\u001b[m\u001b[K):\r\n"]
[61.557928, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_ufuncs.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1453\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K        \u001b[01;31m\u001b[Kdef test_full(self, ufunc, duck_quantity\u001b[m\u001b[K, out):\r\n"]
[61.580099, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_ufuncs.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1473\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K        \u001b[01;31m\u001b[Kdef test_basic(self, ufunc, quantity, duck_quantity\u001b[m\u001b[K):\r\n"]
[61.602269, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_ufuncs.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1493\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K        \u001b[01;31m\u001b[Kdef test_full(self, ufunc, quantity, duck_quantity\u001b[m\u001b[K, out):\r\n"]
[61.624439, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_structured.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K706\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_initialization(self):\r\n"]
[61.64661, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_structured.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K715\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_si(self):\r\n"]
[61.66878, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_decorator.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K65\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_args_nonquantity\u001b[m\u001b[K(x_input):\r\n"]
[61.690951, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_decorator.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K110\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_not_quantity\u001b[m\u001b[K(x_input, y_input):\r\n"]
[61.713121, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_decorator.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K128\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_not_quantity\u001b[m\u001b[K_annotated(x_input, y_input):\r\n"]
[61.735291, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_decorator.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K200\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_kwarg_not_quantity\u001b[m\u001b[K(x_input, y_input):\r\n"]
[61.757462, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_decorator.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K466\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_annotated_not_quantity\u001b[m\u001b[K():\r\n"]
[61.779632, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_physical.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K190\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_physical_type_cannot_become_quantity\u001b[m\u001b[K():\r\n"]
[61.801803, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_annotations.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K136\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_args_nonquantity\u001b[m\u001b[K3(solarx_unit):\r\n"]
[61.823973, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_annotations.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K187\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_not_quantity\u001b[m\u001b[K3(solarx_unit, solary_unit):\r\n"]
[61.846143, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_quantity_annotations.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K290\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_kwarg_not_quantity\u001b[m\u001b[K3(solarx_unit, solary_unit):\r\n"]
[61.868314, "o", "\u001b[35m\u001b[K./astropy/units/tests/test_utils.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K15\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_asanyarray():\r\n"]
[61.890484, "o", "\u001b[35m\u001b[K./astropy/units/quantity_helper/function_helpers.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K341\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef _as_quantity\u001b[m\u001b[K(a):\r\n"]
[61.912655, "o", "\u001b[35m\u001b[K./astropy/nddata/nduncertainty.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K211\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef quantity\u001b[m\u001b[K(self):\r\n"]
[61.934825, "o", "\u001b[35m\u001b[K./astropy/nddata/tests/test_nduncertainty.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K117\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_init_fake_with_quantity\u001b[m\u001b[K(UncertClass):\r\n"]
[61.956996, "o", "\u001b[35m\u001b[K./astropy/nddata/tests/test_nduncertainty.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K284\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K(UncertClass):\r\n"]
[61.979166, "o", "\u001b[35m\u001b[K./astropy/nddata/tests/test_nddata.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K181\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_nddata_init_data_quantity\u001b[m\u001b[K(data):\r\n"]
[62.001336, "o", "\u001b[35m\u001b[K./astropy/nddata/tests/test_nddata.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K204\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_nddata_init_data_masked_quantity\u001b[m\u001b[K():\r\n"]
[62.023507, "o", "\u001b[35m\u001b[K./astropy/coordinates/spectral_coordinate.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K400\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef quantity\u001b[m\u001b[K(self):\r\n"]
[62.045677, "o", "\u001b[35m\u001b[K./astropy/coordinates/spectral_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K75\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef __quantity\u001b[m\u001b[K_subclass__(self, unit):\r\n"]
[62.067848, "o", "\u001b[35m\u001b[K./astropy/coordinates/tests/test_distance.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K161\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_distance_is_quantity\u001b[m\u001b[K():\r\n"]
[62.090018, "o", "\u001b[35m\u001b[K./astropy/coordinates/tests/test_distance.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K302\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_distance_to_quantity\u001b[m\u001b[K_when_not_units_of_length():\r\n"]
[62.112188, "o", "\u001b[35m\u001b[K./astropy/coordinates/tests/test_angles.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K559\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_angle_to_quantity\u001b[m\u001b[K():\r\n"]
[62.134359, "o", "\u001b[35m\u001b[K./astropy/coordinates/tests/test_angles.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K567\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_to_angle():\r\n"]
[62.156529, "o", "\u001b[35m\u001b[K./astropy/coordinates/tests/test_angles.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K967\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_mixed_string_and_quantity\u001b[m\u001b[K():\r\n"]
[62.1787, "o", "\u001b[35m\u001b[K./astropy/coordinates/tests/test_spectral_coordinate.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K268\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_init_quantity\u001b[m\u001b[K():\r\n"]
[62.20087, "o", "\u001b[35m\u001b[K./astropy/coordinates/tests/test_spectral_coordinate.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K278\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_init_spectral_quantity\u001b[m\u001b[K():\r\n"]
[62.22304, "o", "\u001b[35m\u001b[K./astropy/coordinates/tests/test_spectral_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K18\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_init_quantity\u001b[m\u001b[K(self, unit):\r\n"]
[62.245211, "o", "\u001b[35m\u001b[K./astropy/coordinates/tests/test_spectral_quantity.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K22\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_init_spectralquantity\u001b[m\u001b[K(self, unit):\r\n"]
[62.267381, "o", "\u001b[35m\u001b[K./astropy/coordinates/tests/test_representation.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K140\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_init_quantity\u001b[m\u001b[K(self):\r\n"]
[62.289552, "o", "\u001b[35m\u001b[K./astropy/coordinates/tests/test_representation.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K530\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_init_quantity\u001b[m\u001b[K(self):\r\n"]
[62.311722, "o", "\u001b[35m\u001b[K./astropy/coordinates/tests/test_representation.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K705\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_init_quantity\u001b[m\u001b[K(self):\r\n"]
[62.333892, "o", "\u001b[35m\u001b[K./astropy/coordinates/tests/test_representation.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K996\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_init_quantity\u001b[m\u001b[K(self):\r\n"]
[62.356063, "o", "\u001b[35m\u001b[K./astropy/coordinates/tests/test_representation.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1263\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_init_quantity\u001b[m\u001b[K(self):\r\n"]
[62.378233, "o", "\u001b[35m\u001b[K./astropy/coordinates/tests/test_frames.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1112\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_attributes():\r\n"]
[62.400404, "o", "\u001b[35m\u001b[K./astropy/coordinates/tests/test_frames.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1125\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_attribute_default():\r\n"]
[62.422574, "o", "\u001b[35m\u001b[K./astropy/table/column.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1088\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef quantity\u001b[m\u001b[K(self):\r\n"]
[62.444744, "o", "\u001b[35m\u001b[K./astropy/table/tests/test_column.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K151\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_init(self, Column):\r\n"]
[62.466915, "o", "\u001b[35m\u001b[K./astropy/table/tests/test_column.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K160\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_with_info_init(self, Column):\r\n"]
[62.489085, "o", "\u001b[35m\u001b[K./astropy/table/tests/test_column.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K173\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_comparison(self, Column):\r\n"]
[62.511256, "o", "\u001b[35m\u001b[K./astropy/table/tests/test_column.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K216\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_to_quantity\u001b[m\u001b[K(self, Column):\r\n"]
[62.533426, "o", "\u001b[35m\u001b[K./astropy/table/tests/test_column.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K266\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_to_funcunit_quantity\u001b[m\u001b[K(self, Column):\r\n"]
[62.555596, "o", "\u001b[35m\u001b[K./astropy/table/tests/test_mixin.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K126\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_votable_quantity\u001b[m\u001b[K_write(tmp_path):\r\n"]
[62.577767, "o", "\u001b[35m\u001b[K./astropy/table/tests/test_mixin.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K746\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_representation():\r\n"]
[62.599937, "o", "\u001b[35m\u001b[K./astropy/table/tests/test_init_table.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K608\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_init_Table_from_list_of_quantity\u001b[m\u001b[K():\r\n"]
[62.622108, "o", "\u001b[35m\u001b[K./astropy/table/tests/test_masked.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K600\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_masked_quantity\u001b[m\u001b[K_in_table():\r\n"]
[62.644278, "o", "\u001b[35m\u001b[K./astropy/table/tests/test_operations.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K805\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_join_with_join_distance_1d_quantity\u001b[m\u001b[K(self):\r\n"]
[62.666448, "o", "\u001b[35m\u001b[K./astropy/table/tests/test_operations.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K2348\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_join_mixins_time_quantity\u001b[m\u001b[K():\r\n"]
[62.688619, "o", "\u001b[35m\u001b[K./astropy/table/tests/test_table.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K153\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_set_new_col_new_table_quantity\u001b[m\u001b[K(self, table_types):\r\n"]
[62.710789, "o", "\u001b[35m\u001b[K./astropy/table/tests/test_table.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K943\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_inserting_quantity\u001b[m\u001b[K_row_in_empty_table(\r\n"]
[62.73296, "o", "\u001b[35m\u001b[K./astropy/time/utils.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K79\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef quantity\u001b[m\u001b[K_day_frac(val1, val2=None):\r\n"]
[62.75513, "o", "\u001b[35m\u001b[K./astropy/time/formats.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K639\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef _check_val_type_not_quantity\u001b[m\u001b[K(format_name, val1, val2):\r\n"]
[62.7773, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_basic.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K1519\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_decimalyear_no_quantity\u001b[m\u001b[K():\r\n"]
[62.799471, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_basic.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K2869\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_timedelta_empty_quantity\u001b[m\u001b[K():\r\n"]
[62.821641, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_comparisons.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K153\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_isclose_timedelta(swap, time_delta, other_quantity\u001b[m\u001b[K):\r\n"]
[62.843812, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_comparisons.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K167\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef isclose_other_quantity\u001b[m\u001b[K(t1, t2, **kwargs):\r\n"]
[62.865982, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_delta.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K103\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_time_delta_comp_num_quantity\u001b[m\u001b[K(self):\r\n"]
[62.888152, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_delta.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K117\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_time_delta_comp_nan_quantity\u001b[m\u001b[K(self):\r\n"]
[62.910323, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_delta.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K751\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_str_basic(sign, in_str, out_val, dt_sec):\r\n"]
[62.932493, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_delta.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K760\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_str_precision():\r\n"]
[62.954664, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_delta.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K796\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_str_invalid(in_str):\r\n"]
[62.976834, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_delta.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K812\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_str_out_subfmt():\r\n"]
[62.999004, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_delta.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K818\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_str_out_subfmt_precision():\r\n"]
[63.021175, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_delta.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K823\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_str_out_subfmt_to_value_subfmt():\r\n"]
[63.043345, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_delta.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K829\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity_str_out_subfmt_from_non_quantity\u001b[m\u001b[K_str():\r\n"]
[63.065516, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_delta.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K835\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_str_internal_precision():\r\n"]
[63.087686, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_delta.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K849\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_str_val_type_error():\r\n"]
[63.109857, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_delta.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K854\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_str_zero_value():\r\n"]
[63.132027, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_delta.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K860\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_str_multi_comps_overflow():\r\n"]
[63.154197, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_quantity_interaction.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K19\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_valid_quantity\u001b[m\u001b[K_input(self):\r\n"]
[63.176368, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_quantity_interaction.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K51\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_invalid_quantity\u001b[m\u001b[K_input(self):\r\n"]
[63.198538, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_quantity_interaction.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K72\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_no_quantity\u001b[m\u001b[K_input_allowed(self):\r\n"]
[63.220709, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_quantity_interaction.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K79\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_valid_quantity\u001b[m\u001b[K_operations(self):\r\n"]
[63.242879, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_quantity_interaction.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K95\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_invalid_quantity\u001b[m\u001b[K_operations(self):\r\n"]
[63.265049, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_quantity_interaction.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K107\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_valid_quantity\u001b[m\u001b[K_input(self):\r\n"]
[63.28722, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_quantity_interaction.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K117\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_invalid_quantity\u001b[m\u001b[K_input(self):\r\n"]
[63.30939, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_quantity_interaction.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K127\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_output(self):\r\n"]
[63.331561, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_quantity_interaction.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K139\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_output_errors(self):\r\n"]
[63.353731, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_quantity_interaction.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K160\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_valid_quantity\u001b[m\u001b[K_operations1(self):\r\n"]
[63.375901, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_quantity_interaction.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K182\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_valid_quantity\u001b[m\u001b[K_operations2(self):\r\n"]
[63.398072, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_quantity_interaction.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K220\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_valid_quantity\u001b[m\u001b[K_operations3(self):\r\n"]
[63.420242, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_quantity_interaction.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K267\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_invalid_quantity\u001b[m\u001b[K_operations(self):\r\n"]
[63.442413, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_quantity_interaction.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K272\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_invalid_quantity\u001b[m\u001b[K_operations2(self):\r\n"]
[63.464583, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_quantity_interaction.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K280\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_invalid_quantity\u001b[m\u001b[K_broadcast(self):\r\n"]
[63.486753, "o", "\u001b[35m\u001b[K./astropy/time/tests/test_quantity_interaction.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K326\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_conversion_rounding(q1, q2):\r\n"]
[63.508924, "o", "\u001b[35m\u001b[K./astropy/io/misc/yaml.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K166\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef _quantity\u001b[m\u001b[K_representer(tag):\r\n"]
[63.531094, "o", "\u001b[35m\u001b[K./astropy/io/misc/yaml.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K174\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef _quantity\u001b[m\u001b[K_constructor(cls):\r\n"]
[63.553265, "o", "\u001b[35m\u001b[K./astropy/modeling/core.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K896\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef uses_quantity\u001b[m\u001b[K(self):\r\n"]
[63.575435, "o", "\u001b[35m\u001b[K./astropy/modeling/parameters.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K441\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef quantity\u001b[m\u001b[K(self):\r\n"]
[63.597605, "o", "\u001b[35m\u001b[K./astropy/modeling/parameters.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K450\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef quantity(self, quantity\u001b[m\u001b[K):\r\n"]
[63.619776, "o", "\u001b[35m\u001b[K./astropy/modeling/tests/test_quantities_model.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K41\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_call():\r\n"]
[63.641946, "o", "\u001b[35m\u001b[K./astropy/modeling/tests/test_quantities_model.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K57\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_no_quantity\u001b[m\u001b[K_call():\r\n"]
[63.664117, "o", "\u001b[35m\u001b[K./astropy/modeling/tests/test_quantities_model.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K74\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_uses_quantity\u001b[m\u001b[K():\r\n"]
[63.686287, "o", "\u001b[35m\u001b[K./astropy/modeling/tests/test_quantities_model.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K91\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_uses_quantity\u001b[m\u001b[K_compound():\r\n"]
[63.708457, "o", "\u001b[35m\u001b[K./astropy/modeling/tests/test_quantities_model.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K108\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_uses_quantity\u001b[m\u001b[K_no_param():\r\n"]
[63.730628, "o", "\u001b[35m\u001b[K./astropy/modeling/tests/test_quantities_parameters.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K32\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_parameter_quantity\u001b[m\u001b[K():\r\n"]
[63.752798, "o", "\u001b[35m\u001b[K./astropy/modeling/tests/test_quantities_parameters.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K46\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_parameter_set_quantity\u001b[m\u001b[K():\r\n"]
[63.774969, "o", "\u001b[35m\u001b[K./astropy/modeling/tests/test_quantities_parameters.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K162\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_parameter_quantity\u001b[m\u001b[K_property():\r\n"]
[63.797139, "o", "\u001b[35m\u001b[K./astropy/modeling/tests/test_quantities_parameters.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K253\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_parameter_quantity\u001b[m\u001b[K_arithmetic():\r\n"]
[63.819309, "o", "\u001b[35m\u001b[K./astropy/modeling/tests/test_quantities_parameters.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K288\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_parameter_quantity\u001b[m\u001b[K_comparison():\r\n"]
[63.84148, "o", "\u001b[35m\u001b[K./astropy/modeling/tests/test_rotations.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K99\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_Rotation2D_quantity\u001b[m\u001b[K():\r\n"]
[63.86365, "o", "\u001b[35m\u001b[K./astropy/modeling/tests/test_parameters.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K505\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K(self):\r\n"]
[63.885821, "o", "\u001b[35m\u001b[K./astropy/modeling/tests/test_core.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K338\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K        \u001b[01;31m\u001b[Kdef model2(x, y, n_outputs=2, uses_quantity\u001b[m\u001b[K=True):\r\n"]
[63.907991, "o", "\u001b[35m\u001b[K./astropy/convolution/tests/test_convolve_kernels.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K155\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_gaussian_2d_kernel_quantity\u001b[m\u001b[K():\r\n"]
[63.930161, "o", "\u001b[35m\u001b[K./astropy/convolution/tests/test_convolve_fft.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K98\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K(self, boundary, nan_treatment, normalize_kernel, dealias):\r\n"]
[63.952332, "o", "\u001b[35m\u001b[K./astropy/convolution/tests/test_convolve.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K69\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K(\r\n"]
[63.974502, "o", "\u001b[35m\u001b[K./astropy/tests/helper.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K192\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef assert_quantity\u001b[m\u001b[K_allclose(actual, desired, rtol=1.0e-7, atol=None, **kwargs):\r\n"]
[63.996673, "o", "\u001b[35m\u001b[K./astropy/tests/tests/test_quantity_helpers.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K7\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_assert_quantity\u001b[m\u001b[K_allclose():\r\n"]
[64.018843, "o", "\u001b[35m\u001b[K./astropy/visualization/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K9\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef quantity\u001b[m\u001b[K_support(format=\"latex_inline\"):\r\n"]
[64.041013, "o", "\u001b[35m\u001b[K./astropy/visualization/tests/test_units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K71\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef test_quantity\u001b[m\u001b[K_subclass():\r\n"]
[64.063184, "o", "\u001b[35m\u001b[K./astropy/utils/masked/tests/test_masked.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K314\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_masked_quantity\u001b[m\u001b[K_getting(self):\r\n"]
[64.085354, "o", "\u001b[35m\u001b[K./astropy/utils/masked/tests/test_masked.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K326\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_masked_quantity\u001b[m\u001b[K_class_init(self):\r\n"]
[64.107525, "o", "\u001b[35m\u001b[K./astropy/utils/masked/tests/test_masked.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K351\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_initialization_with_list_of_masked_quantity\u001b[m\u001b[K_scalars(self):\r\n"]
[64.129695, "o", "\u001b[35m\u001b[K./astropy/utils/masked/tests/test_masked.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K357\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_initialization_with_list_of_masked_quantity\u001b[m\u001b[K_arrays(self):\r\n"]
[64.151865, "o", "\u001b[35m\u001b[K./astropy/utils/masked/tests/test_functions.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K344\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef test_ufunc_inplace_quantity\u001b[m\u001b[K_initial(self):\r\n"]
[64.174036, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/coordinates.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K197\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_init_quantity\u001b[m\u001b[K_scalar_positional(self):\r\n"]
[64.196206, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/coordinates.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K200\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_init_quantity\u001b[m\u001b[K_array_positional(self):\r\n"]
[64.218377, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/coordinates.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K203\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_init_quantity\u001b[m\u001b[K_scalar_positional_fk5_kwarg(self):\r\n"]
[64.240547, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/coordinates.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K206\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_init_quantity\u001b[m\u001b[K_scalar_positional_fk5_frame(self):\r\n"]
[64.262717, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/coordinates.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K209\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_init_quantity\u001b[m\u001b[K_scalar_positional_fk5_frame_extra_kwargs(self):\r\n"]
[64.284888, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/coordinates.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K212\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_init_quantity\u001b[m\u001b[K_scalar_keyword(self):\r\n"]
[64.307058, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/coordinates.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K215\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_init_quantity\u001b[m\u001b[K_array_keyword(self):\r\n"]
[64.329229, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K54\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_creation():\r\n"]
[64.351399, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K58\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_creation_nocopy():\r\n"]
[64.37357, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K62\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_view():\r\n"]
[64.39574, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K66\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_init_scalar():\r\n"]
[64.41791, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K70\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_init_array():\r\n"]
[64.440081, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K74\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_init_small_list():\r\n"]
[64.462251, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K82\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_init_small_array():\r\n"]
[64.484422, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K90\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_scalar_conversion():\r\n"]
[64.506592, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K94\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_array_conversion():\r\n"]
[64.528762, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K98\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_times_unit():\r\n"]
[64.550933, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K102\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef time_quantity_times_quantity\u001b[m\u001b[K():\r\n"]
[64.573103, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K106\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_ufunc_sin():\r\n"]
[64.595274, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K122\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_square(self):\r\n"]
[64.617444, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K125\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_np_square(self):\r\n"]
[64.639614, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K128\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_np_square_out(self):\r\n"]
[64.661785, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K131\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_sqrt(self):\r\n"]
[64.683955, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K134\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_np_sqrt(self):\r\n"]
[64.706126, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K137\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_np_sqrt_out(self):\r\n"]
[64.728296, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K166\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_equal(self):\r\n"]
[64.750466, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K170\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_np_equal(self):\r\n"]
[64.772637, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K173\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_truediv(self):\r\n"]
[64.794807, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K178\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_np_truediv(self):\r\n"]
[64.816978, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K181\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_mul(self):\r\n"]
[64.839148, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K185\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_np_multiply(self):\r\n"]
[64.861318, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K188\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_sub(self):\r\n"]
[64.883489, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K192\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_np_subtract(self):\r\n"]
[64.905659, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K195\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_add(self):\r\n"]
[64.92783, "o", "\u001b[35m\u001b[K./astropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K199\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef time_quantity\u001b[m\u001b[K_np_add(self):\r\n"]
[65.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[65.002, "i", "grep -R \"units\" -n src tests || true\r"]
[65.004, "o", "grep -R \"units\" -n src tests || true\r\n"]
[66.654, "o", "\u001b[?2004l\r\n"]
[68.302, "o", "grep: src: No such file or directory\r\n"]
[70.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[70.002, "i", "cat asv.ci.conf.json\r"]
[70.004, "o", "cat asv.ci.conf.json\r\n"]
[70.3356, "o", "\u001b[?2004l\r\n"]
[70.6652, "o", " {\r\n"]
[70.9948, "o", "   \"version\": 1,\r\n"]
[71.3244, "o", "   \"project\": \"astropy\",\r\n"]
[71.654, "o", "   \"project_url\": \"http://www.astropy.org/\",\r\n"]
[71.9836, "o", "   \"repo\": \".\",\r\n"]
[72.3132, "o", "   \"install_command\": [\r\n"]
[72.6428, "o", "     \"pip install . matplotlib scipy\"\r\n"]
[72.9724, "o", "   ],\r\n"]
[73.302, "o", "   \"branches\": [\"main\"],\r\n"]
[73.6316, "o", "   \"show_commit_url\": \"http://github.com/astropy/astropy/commit/\",\r\n"]
[73.9612, "o", "   \"pythons\": [\"3.11\"],\r\n"]
[74.2908, "o", "   \"environment_type\": \"virtualenv\",\r\n"]
[74.6204, "o", "   \"benchmark_dir\": \"astropy-benchmarks/benchmarks\"\r\n"]
[75.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[75.002, "i", "asv run -c asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list.*|units.time_quantity_creati\r"]
[75.004, "o", "asv run -c asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list.*|units.time_quantity_creati\r\n"]
[75.9948, "o", "ion_nocopy.*|units.time_quantity_init_small_array.*|units.time_quantity_times_unit.*|units.time_quantity_array_conversion.*|units.time_quantity_view.*\" --quick\r\n"]
[76.9836, "o", "\u001b[?2004l\r\n"]
[77.9724, "o", "usage: asv [-h] [--verbose] [--config CONFIG] [--version]\r\n"]
[78.9612, "o", "           {help,quickstart,machine,setup,run,continuous,find,rm,publish,preview,profile,update,show,compare,check,gh-pages} ...\r\n"]
[80.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[80.002, "i", "asv profile --python=same -c asv.ci.conf.json units.time_quantity_times_unit\r"]
[80.004, "o", "asv profile --python=same -c asv.ci.conf.json units.time_quantity_times_unit\r\n"]
[81.242, "o", "\u001b[?2004l\r\n"]
[82.478, "o", "usage: asv [-h] [--verbose] [--config CONFIG] [--version]\r\n"]
[83.714, "o", "           {help,quickstart,machine,setup,run,continuous,find,rm,publish,preview,profile,update,show,compare,check,gh-pages} ...\r\n"]
[85.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[85.002, "i", "sed -n '1,260p' astropy/units/quantity.py\r"]
[85.004, "o", "sed -n '1,260p' astropy/units/quantity.py\r\n"]
[85.024943, "o", "\u001b[?2004l\r\n"]
[85.043885, "o", "# Licensed under a 3-clause BSD style license - see LICENSE.rst\r\n"]
[85.062828, "o", "\"\"\"\r\n"]
[85.08177, "o", "This module defines the `Quantity` object, which represents a number with some\r\n"]
[85.100713, "o", "associated units. `Quantity` objects support operations like ordinary numbers,\r\n"]
[85.119655, "o", "but will deal with unit conversions internally.\r\n"]
[85.138598, "o", "\"\"\"\r\n"]
[85.15754, "o", "\r\n"]
[85.176483, "o", "from __future__ import annotations\r\n"]
[85.195425, "o", "\r\n"]
[85.214368, "o", "import builtins\r\n"]
[85.23331, "o", "import numbers\r\n"]
[85.252253, "o", "import operator\r\n"]
[85.271195, "o", "import re\r\n"]
[85.290138, "o", "import warnings\r\n"]
[85.30908, "o", "from fractions import Fraction\r\n"]
[85.328023, "o", "from typing import TYPE_CHECKING\r\n"]
[85.346966, "o", "\r\n"]
[85.365908, "o", "import numpy as np\r\n"]
[85.384851, "o", "\r\n"]
[85.403793, "o", "from astropy import config as _config\r\n"]
[85.422736, "o", "from astropy.utils.compat.numpycompat import COPY_IF_NEEDED, NUMPY_LT_2_0\r\n"]
[85.441678, "o", "from astropy.utils.data_info import ParentDtypeInfo\r\n"]
[85.460621, "o", "from astropy.utils.exceptions import AstropyWarning\r\n"]
[85.479563, "o", "\r\n"]
[85.498506, "o", "from .core import (\r\n"]
[85.517448, "o", "    Unit,\r\n"]
[85.536391, "o", "    UnitBase,\r\n"]
[85.555333, "o", "    UnitConversionError,\r\n"]
[85.574276, "o", "    UnitsError,\r\n"]
[85.593218, "o", "    UnitTypeError,\r\n"]
[85.612161, "o", "    dimensionless_unscaled,\r\n"]
[85.631103, "o", "    get_current_unit_registry,\r\n"]
[85.650046, "o", ")\r\n"]
[85.668989, "o", "from .format import Base, Latex\r\n"]
[85.687931, "o", "from .quantity_helper import can_have_arbitrary_unit, check_output, converters_and_unit\r\n"]
[85.706874, "o", "from .quantity_helper.function_helpers import (\r\n"]
[85.725816, "o", "    DISPATCHED_FUNCTIONS,\r\n"]
[85.744759, "o", "    FUNCTION_HELPERS,\r\n"]
[85.763701, "o", "    SUBCLASS_SAFE_FUNCTIONS,\r\n"]
[85.782644, "o", "    UNSUPPORTED_FUNCTIONS,\r\n"]
[85.801586, "o", ")\r\n"]
[85.820529, "o", "from .structured import StructuredUnit, _structured_unit_like_dtype\r\n"]
[85.839471, "o", "from .utils import is_effectively_unity\r\n"]
[85.858414, "o", "\r\n"]
[85.877356, "o", "if TYPE_CHECKING:\r\n"]
[85.896299, "o", "    from typing_extensions import Self\r\n"]
[85.915241, "o", "\r\n"]
[85.934184, "o", "    from .typing import QuantityLike\r\n"]
[85.953126, "o", "\r\n"]
[85.972069, "o", "__all__ = [\r\n"]
[85.991011, "o", "    \"Quantity\",\r\n"]
[86.009954, "o", "    \"SpecificTypeQuantity\",\r\n"]
[86.028897, "o", "    \"QuantityInfoBase\",\r\n"]
[86.047839, "o", "    \"QuantityInfo\",\r\n"]
[86.066782, "o", "    \"allclose\",\r\n"]
[86.085724, "o", "    \"isclose\",\r\n"]
[86.104667, "o", "]\r\n"]
[86.123609, "o", "\r\n"]
[86.142552, "o", "\r\n"]
[86.161494, "o", "# We don't want to run doctests in the docstrings we inherit from Numpy\r\n"]
[86.180437, "o", "__doctest_skip__ = [\"Quantity.*\"]\r\n"]
[86.199379, "o", "\r\n"]
[86.218322, "o", "_UNIT_NOT_INITIALISED = \"(Unit not initialised)\"\r\n"]
[86.237264, "o", "_UFUNCS_FILTER_WARNINGS = {np.arcsin, np.arccos, np.arccosh, np.arctanh}\r\n"]
[86.256207, "o", "\r\n"]
[86.275149, "o", "\r\n"]
[86.294092, "o", "class Conf(_config.ConfigNamespace):\r\n"]
[86.313034, "o", "    \"\"\"\r\n"]
[86.331977, "o", "    Configuration parameters for Quantity.\r\n"]
[86.35092, "o", "    \"\"\"\r\n"]
[86.369862, "o", "\r\n"]
[86.388805, "o", "    latex_array_threshold = _config.ConfigItem(\r\n"]
[86.407747, "o", "        100,\r\n"]
[86.42669, "o", "        \"The maximum size an array Quantity can be before its LaTeX \"\r\n"]
[86.445632, "o", "        'representation for IPython gets \"summarized\" (meaning only the first '\r\n"]
[86.464575, "o", "        'and last few elements are shown with \"...\" between). Setting this to a '\r\n"]
[86.483517, "o", "        \"negative number means that the value will instead be whatever numpy \"\r\n"]
[86.50246, "o", "        \"gets from get_printoptions.\",\r\n"]
[86.521402, "o", "    )\r\n"]
[86.540345, "o", "\r\n"]
[86.559287, "o", "\r\n"]
[86.57823, "o", "conf = Conf()\r\n"]
[86.597172, "o", "\r\n"]
[86.616115, "o", "\r\n"]
[86.635057, "o", "class QuantityIterator:\r\n"]
[86.654, "o", "    \"\"\"\r\n"]
[86.672943, "o", "    Flat iterator object to iterate over Quantities.\r\n"]
[86.691885, "o", "\r\n"]
[86.710828, "o", "    A `QuantityIterator` iterator is returned by ``q.flat`` for any Quantity\r\n"]
[86.72977, "o", "    ``q``.  It allows iterating over the array as if it were a 1-D array,\r\n"]
[86.748713, "o", "    either in a for-loop or by calling its `next` method.\r\n"]
[86.767655, "o", "\r\n"]
[86.786598, "o", "    Iteration is done in C-contiguous style, with the last index varying the\r\n"]
[86.80554, "o", "    fastest. The iterator can also be indexed using basic slicing or\r\n"]
[86.824483, "o", "    advanced indexing.\r\n"]
[86.843425, "o", "\r\n"]
[86.862368, "o", "    See Also\r\n"]
[86.88131, "o", "    --------\r\n"]
[86.900253, "o", "    Quantity.flatten : Returns a flattened copy of an array.\r\n"]
[86.919195, "o", "\r\n"]
[86.938138, "o", "    Notes\r\n"]
[86.95708, "o", "    -----\r\n"]
[86.976023, "o", "    `QuantityIterator` is inspired by `~numpy.ma.core.MaskedIterator`.  It\r\n"]
[86.994966, "o", "    is not exported by the `~astropy.units` module.  Instead of\r\n"]
[87.013908, "o", "    instantiating a `QuantityIterator` directly, use `Quantity.flat`.\r\n"]
[87.032851, "o", "    \"\"\"\r\n"]
[87.051793, "o", "\r\n"]
[87.070736, "o", "    def __init__(self, q):\r\n"]
[87.089678, "o", "        self._quantity = q\r\n"]
[87.108621, "o", "        self._dataiter = q.view(np.ndarray).flat\r\n"]
[87.127563, "o", "\r\n"]
[87.146506, "o", "    def __iter__(self):\r\n"]
[87.165448, "o", "        return self\r\n"]
[87.184391, "o", "\r\n"]
[87.203333, "o", "    def __getitem__(self, indx):\r\n"]
[87.222276, "o", "        out = self._dataiter.__getitem__(indx)\r\n"]
[87.241218, "o", "        # For single elements, ndarray.flat.__getitem__ returns scalars; these\r\n"]
[87.260161, "o", "        # need a new view as a Quantity.\r\n"]
[87.279103, "o", "        if isinstance(out, type(self._quantity)):\r\n"]
[87.298046, "o", "            return out\r\n"]
[87.316989, "o", "        else:\r\n"]
[87.335931, "o", "            return self._quantity._new_view(out)\r\n"]
[87.354874, "o", "\r\n"]
[87.373816, "o", "    def __setitem__(self, index, value):\r\n"]
[87.392759, "o", "        self._dataiter[index] = self._quantity._to_own_unit(value)\r\n"]
[87.411701, "o", "\r\n"]
[87.430644, "o", "    def __next__(self):\r\n"]
[87.449586, "o", "        \"\"\"\r\n"]
[87.468529, "o", "        Return the next value, or raise StopIteration.\r\n"]
[87.487471, "o", "        \"\"\"\r\n"]
[87.506414, "o", "        out = next(self._dataiter)\r\n"]
[87.525356, "o", "        # ndarray.flat._dataiter returns scalars, so need a view as a Quantity.\r\n"]
[87.544299, "o", "        return self._quantity._new_view(out)\r\n"]
[87.563241, "o", "\r\n"]
[87.582184, "o", "    next = __next__\r\n"]
[87.601126, "o", "\r\n"]
[87.620069, "o", "    def __len__(self):\r\n"]
[87.639011, "o", "        return len(self._dataiter)\r\n"]
[87.657954, "o", "\r\n"]
[87.676897, "o", "    # Properties and methods to match `numpy.ndarray.flatiter`\r\n"]
[87.695839, "o", "\r\n"]
[87.714782, "o", "    @property\r\n"]
[87.733724, "o", "    def base(self):\r\n"]
[87.752667, "o", "        \"\"\"A reference to the array that is iterated over.\"\"\"\r\n"]
[87.771609, "o", "        return self._quantity\r\n"]
[87.790552, "o", "\r\n"]
[87.809494, "o", "    @property\r\n"]
[87.828437, "o", "    def coords(self):\r\n"]
[87.847379, "o", "        \"\"\"An N-dimensional tuple of current coordinates.\"\"\"\r\n"]
[87.866322, "o", "        return self._dataiter.coords\r\n"]
[87.885264, "o", "\r\n"]
[87.904207, "o", "    @property\r\n"]
[87.923149, "o", "    def index(self):\r\n"]
[87.942092, "o", "        \"\"\"Current flat index into the array.\"\"\"\r\n"]
[87.961034, "o", "        return self._dataiter.index\r\n"]
[87.979977, "o", "\r\n"]
[87.99892, "o", "    def copy(self):\r\n"]
[88.017862, "o", "        \"\"\"Get a copy of the iterator as a 1-D array.\"\"\"\r\n"]
[88.036805, "o", "        return self._quantity.flatten()\r\n"]
[88.055747, "o", "\r\n"]
[88.07469, "o", "\r\n"]
[88.093632, "o", "class QuantityInfoBase(ParentDtypeInfo):\r\n"]
[88.112575, "o", "    # This is on a base class rather than QuantityInfo directly, so that\r\n"]
[88.131517, "o", "    # it can be used for EarthLocationInfo yet make clear that that class\r\n"]
[88.15046, "o", "    # should not be considered a typical Quantity subclass by Table.\r\n"]
[88.169402, "o", "    attrs_from_parent = {\"dtype\", \"unit\"}  # dtype and unit taken from parent\r\n"]
[88.188345, "o", "    _supports_indexing = True\r\n"]
[88.207287, "o", "\r\n"]
[88.22623, "o", "    @staticmethod\r\n"]
[88.245172, "o", "    def default_format(val):\r\n"]
[88.264115, "o", "        return f\"{val.value}\"\r\n"]
[88.283057, "o", "\r\n"]
[88.302, "o", "    @staticmethod\r\n"]
[88.320943, "o", "    def possible_string_format_functions(format_):\r\n"]
[88.339885, "o", "        \"\"\"Iterate through possible string-derived format functions.\r\n"]
[88.358828, "o", "\r\n"]
[88.37777, "o", "        A string can either be a format specifier for the format built-in,\r\n"]
[88.396713, "o", "        a new-style format string, or an old-style format string.\r\n"]
[88.415655, "o", "\r\n"]
[88.434598, "o", "        This method is overridden in order to suppress printing the unit\r\n"]
[88.45354, "o", "        in each row since it is already at the top in the column header.\r\n"]
[88.472483, "o", "        \"\"\"\r\n"]
[88.491425, "o", "        yield lambda format_, val: format(val.value, format_)\r\n"]
[88.510368, "o", "        yield lambda format_, val: format_.format(val.value)\r\n"]
[88.52931, "o", "        yield lambda format_, val: format_ % val.value\r\n"]
[88.548253, "o", "\r\n"]
[88.567195, "o", "\r\n"]
[88.586138, "o", "class QuantityInfo(QuantityInfoBase):\r\n"]
[88.60508, "o", "    \"\"\"\r\n"]
[88.624023, "o", "    Container for meta information like name, description, format.  This is\r\n"]
[88.642966, "o", "    required when the object is used as a mixin column within a table, but can\r\n"]
[88.661908, "o", "    be used as a general way to store meta information.\r\n"]
[88.680851, "o", "    \"\"\"\r\n"]
[88.699793, "o", "\r\n"]
[88.718736, "o", "    _represent_as_dict_attrs = (\"value\", \"unit\")\r\n"]
[88.737678, "o", "    _construct_from_dict_args = [\"value\"]\r\n"]
[88.756621, "o", "    _represent_as_dict_primary_data = \"value\"\r\n"]
[88.775563, "o", "\r\n"]
[88.794506, "o", "    def new_like(self, cols, length, metadata_conflicts=\"warn\", name=None):\r\n"]
[88.813448, "o", "        \"\"\"\r\n"]
[88.832391, "o", "        Return a new Quantity instance which is consistent with the\r\n"]
[88.851333, "o", "        input ``cols`` and has ``length`` rows.\r\n"]
[88.870276, "o", "\r\n"]
[88.889218, "o", "        This is intended for creating an empty column object whose elements can\r\n"]
[88.908161, "o", "        be set in-place for table operations like join or vstack.\r\n"]
[88.927103, "o", "\r\n"]
[88.946046, "o", "        Parameters\r\n"]
[88.964989, "o", "        ----------\r\n"]
[88.983931, "o", "        cols : list\r\n"]
[89.002874, "o", "            List of input columns\r\n"]
[89.021816, "o", "        length : int\r\n"]
[89.040759, "o", "            Length of the output column object\r\n"]
[89.059701, "o", "        metadata_conflicts : str ('warn'|'error'|'silent')\r\n"]
[89.078644, "o", "            How to handle metadata conflicts\r\n"]
[89.097586, "o", "        name : str\r\n"]
[89.116529, "o", "            Output column name\r\n"]
[89.135471, "o", "\r\n"]
[89.154414, "o", "        Returns\r\n"]
[89.173356, "o", "        -------\r\n"]
[89.192299, "o", "        col : `~astropy.units.Quantity` (or subclass)\r\n"]
[89.211241, "o", "            Empty instance of this class consistent with ``cols``\r\n"]
[89.230184, "o", "\r\n"]
[89.249126, "o", "        \"\"\"\r\n"]
[89.268069, "o", "        # Get merged info attributes like shape, dtype, format, description, etc.\r\n"]
[89.287011, "o", "        attrs = self.merge_cols_attributes(\r\n"]
[89.305954, "o", "            cols, metadata_conflicts, name, (\"meta\", \"format\", \"description\")\r\n"]
[89.324897, "o", "        )\r\n"]
[89.343839, "o", "\r\n"]
[89.362782, "o", "        # Make an empty quantity using the unit of the last one.\r\n"]
[89.381724, "o", "        shape = (length,) + attrs.pop(\"shape\")\r\n"]
[89.400667, "o", "        dtype = attrs.pop(\"dtype\")\r\n"]
[89.419609, "o", "        # Use zeros so we do not get problems for Quantity subclasses such\r\n"]
[89.438552, "o", "        # as Longitude and Latitude, which cannot take arbitrary values.\r\n"]
[89.457494, "o", "        data = np.zeros(shape=shape, dtype=dtype)\r\n"]
[89.476437, "o", "        # Get arguments needed to reconstruct class\r\n"]
[89.495379, "o", "        map = {\r\n"]
[89.514322, "o", "            key: (data if key == \"value\" else getattr(cols[-1], key))\r\n"]
[89.533264, "o", "            for key in self._represent_as_dict_attrs\r\n"]
[89.552207, "o", "        }\r\n"]
[89.571149, "o", "        map[\"copy\"] = COPY_IF_NEEDED\r\n"]
[89.590092, "o", "        out = self._construct_from_dict(map)\r\n"]
[89.609034, "o", "\r\n"]
[89.627977, "o", "        # Set remaining info attributes\r\n"]
[89.64692, "o", "        for attr, value in attrs.items():\r\n"]
[89.665862, "o", "            setattr(out.info, attr, value)\r\n"]
[89.684805, "o", "\r\n"]
[89.703747, "o", "        return out\r\n"]
[89.72269, "o", "\r\n"]
[89.741632, "o", "    def get_sortable_arrays(self):\r\n"]
[89.760575, "o", "        \"\"\"\r\n"]
[89.779517, "o", "        Return a list of arrays which can be lexically sorted to represent\r\n"]
[89.79846, "o", "        the order of the parent column.\r\n"]
[89.817402, "o", "\r\n"]
[89.836345, "o", "        For Quantity this is just the quantity itself.\r\n"]
[89.855287, "o", "\r\n"]
[89.87423, "o", "\r\n"]
[89.893172, "o", "        Returns\r\n"]
[89.912115, "o", "        -------\r\n"]
[89.931057, "o", "        arrays : list of ndarray\r\n"]
[90.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[90.002, "i", "sed -n '260,800p' astropy/units/quantity.py\r"]
[90.004, "o", "sed -n '260,800p' astropy/units/quantity.py\r\n"]
[90.016, "o", "\u001b[?2004l\r\n"]
[90.026, "o", "        \"\"\"\r\n"]
[90.036, "o", "        return [self._parent]\r\n"]
[90.046, "o", "\r\n"]
[90.056, "o", "\r\n"]
[90.066, "o", "class Quantity(np.ndarray):\r\n"]
[90.076, "o", "    \"\"\"A `~astropy.units.Quantity` represents a number with some associated unit.\r\n"]
[90.086, "o", "\r\n"]
[90.096, "o", "    See also: https://docs.astropy.org/en/stable/units/quantity.html\r\n"]
[90.106, "o", "\r\n"]
[90.116, "o", "    Parameters\r\n"]
[90.126, "o", "    ----------\r\n"]
[90.136, "o", "    value : number, `~numpy.ndarray`, `~astropy.units.Quantity` (sequence), or str\r\n"]
[90.146, "o", "        The numerical value of this quantity in the units given by unit.  If a\r\n"]
[90.156, "o", "        `Quantity` or sequence of them (or any other valid object with a\r\n"]
[90.166, "o", "        ``unit`` attribute), creates a new `Quantity` object, converting to\r\n"]
[90.176, "o", "        `unit` units as needed.  If a string, it is converted to a number or\r\n"]
[90.186, "o", "        `Quantity`, depending on whether a unit is present.\r\n"]
[90.196, "o", "\r\n"]
[90.206, "o", "    unit : unit-like\r\n"]
[90.216, "o", "        An object that represents the unit associated with the input value.\r\n"]
[90.226, "o", "        Must be an `~astropy.units.UnitBase` object or a string parseable by\r\n"]
[90.236, "o", "        the :mod:`~astropy.units` package.\r\n"]
[90.246, "o", "\r\n"]
[90.256, "o", "    dtype : ~numpy.dtype, optional\r\n"]
[90.266, "o", "        The dtype of the resulting Numpy array or scalar that will\r\n"]
[90.276, "o", "        hold the value.  If not provided, it is determined from the input,\r\n"]
[90.286, "o", "        except that any integer and (non-Quantity) object inputs are converted\r\n"]
[90.296, "o", "        to float by default.\r\n"]
[90.306, "o", "        If `None`, the normal `numpy.dtype` introspection is used, e.g.\r\n"]
[90.316, "o", "        preventing upcasting of integers.\r\n"]
[90.326, "o", "\r\n"]
[90.336, "o", "    copy : bool, optional\r\n"]
[90.346, "o", "        If `True` (default), then the value is copied.  Otherwise, a copy will\r\n"]
[90.356, "o", "        only be made if ``__array__`` returns a copy, if value is a nested\r\n"]
[90.366, "o", "        sequence, or if a copy is needed to satisfy an explicitly given\r\n"]
[90.376, "o", "        ``dtype``.  (The `False` option is intended mostly for internal use,\r\n"]
[90.386, "o", "        to speed up initialization where a copy is known to have been made.\r\n"]
[90.396, "o", "        Use with care.)\r\n"]
[90.406, "o", "\r\n"]
[90.416, "o", "    order : {'C', 'F', 'A'}, optional\r\n"]
[90.426, "o", "        Specify the order of the array.  As in `~numpy.array`.  This parameter\r\n"]
[90.436, "o", "        is ignored if the input is a `Quantity` and ``copy=False``.\r\n"]
[90.446, "o", "\r\n"]
[90.456, "o", "    subok : bool, optional\r\n"]
[90.466, "o", "        If `False` (default), the returned array will be forced to be a\r\n"]
[90.476, "o", "        `Quantity`.  Otherwise, `Quantity` subclasses will be passed through,\r\n"]
[90.486, "o", "        or a subclass appropriate for the unit will be used (such as\r\n"]
[90.496, "o", "        `~astropy.units.Dex` for ``u.dex(u.AA)``).\r\n"]
[90.506, "o", "\r\n"]
[90.516, "o", "    ndmin : int, optional\r\n"]
[90.526, "o", "        Specifies the minimum number of dimensions that the resulting array\r\n"]
[90.536, "o", "        should have.  Ones will be prepended to the shape as needed to meet\r\n"]
[90.546, "o", "        this requirement.  This parameter is ignored if the input is a\r\n"]
[90.556, "o", "        `Quantity` and ``copy=False``.\r\n"]
[90.566, "o", "\r\n"]
[90.576, "o", "    Raises\r\n"]
[90.586, "o", "    ------\r\n"]
[90.596, "o", "    TypeError\r\n"]
[90.606, "o", "        If the value provided is not a Python numeric type.\r\n"]
[90.616, "o", "    TypeError\r\n"]
[90.626, "o", "        If the unit provided is not either a :class:`~astropy.units.Unit`\r\n"]
[90.636, "o", "        object or a parseable string unit.\r\n"]
[90.646, "o", "\r\n"]
[90.656, "o", "    Notes\r\n"]
[90.666, "o", "    -----\r\n"]
[90.676, "o", "    Quantities can also be created by multiplying a number or array with a\r\n"]
[90.686, "o", "    :class:`~astropy.units.Unit`. See https://docs.astropy.org/en/latest/units/\r\n"]
[90.696, "o", "\r\n"]
[90.706, "o", "    Unless the ``dtype`` argument is explicitly specified, integer\r\n"]
[90.716, "o", "    or (non-Quantity) object inputs are converted to `float` by default.\r\n"]
[90.726, "o", "    \"\"\"\r\n"]
[90.736, "o", "\r\n"]
[90.746, "o", "    # Need to set a class-level default for _equivalencies, or\r\n"]
[90.756, "o", "    # Constants can not initialize properly\r\n"]
[90.766, "o", "    _equivalencies = []\r\n"]
[90.776, "o", "\r\n"]
[90.786, "o", "    # Default unit for initialization; can be overridden by subclasses,\r\n"]
[90.796, "o", "    # possibly to `None` to indicate there is no default unit.\r\n"]
[90.806, "o", "    _default_unit = dimensionless_unscaled\r\n"]
[90.816, "o", "\r\n"]
[90.826, "o", "    # Ensures views have an undefined unit.\r\n"]
[90.836, "o", "    _unit = None\r\n"]
[90.846, "o", "\r\n"]
[90.856, "o", "    __array_priority__ = 10000\r\n"]
[90.866, "o", "\r\n"]
[90.876, "o", "    def __class_getitem__(cls, unit_shape_dtype):\r\n"]
[90.886, "o", "        \"\"\"Quantity Type Hints.\r\n"]
[90.896, "o", "\r\n"]
[90.906, "o", "        Unit-aware type hints are ``Annotated`` objects that encode the class,\r\n"]
[90.916, "o", "        the unit, and possibly shape and dtype information, depending on the\r\n"]
[90.926, "o", "        python and :mod:`numpy` versions.\r\n"]
[90.936, "o", "\r\n"]
[90.946, "o", "        Schematically, ``Annotated[cls[shape, dtype], unit]``\r\n"]
[90.956, "o", "\r\n"]
[90.966, "o", "        As a classmethod, the type is the class, ie ``Quantity``\r\n"]
[90.976, "o", "        produces an ``Annotated[Quantity, ...]`` while a subclass\r\n"]
[90.986, "o", "        like :class:`~astropy.coordinates.Angle` returns\r\n"]
[90.996, "o", "        ``Annotated[Angle, ...]``.\r\n"]
[91.006, "o", "\r\n"]
[91.016, "o", "        Parameters\r\n"]
[91.026, "o", "        ----------\r\n"]
[91.036, "o", "        unit_shape_dtype : :class:`~astropy.units.UnitBase`, str, `~astropy.units.PhysicalType`, or tuple\r\n"]
[91.046, "o", "            Unit specification, can be the physical type (ie str or class).\r\n"]
[91.056, "o", "            If tuple, then the first element is the unit specification\r\n"]
[91.066, "o", "            and all other elements are for `numpy.ndarray` type annotations.\r\n"]
[91.076, "o", "            Whether they are included depends on the python and :mod:`numpy`\r\n"]
[91.086, "o", "            versions.\r\n"]
[91.096, "o", "\r\n"]
[91.106, "o", "        Returns\r\n"]
[91.116, "o", "        -------\r\n"]
[91.126, "o", "        `typing.Annotated`, `astropy.units.Unit`, or `astropy.units.PhysicalType`\r\n"]
[91.136, "o", "            Return type in this preference order:\r\n"]
[91.146, "o", "            * `typing.Annotated`\r\n"]
[91.156, "o", "            * `astropy.units.Unit` or `astropy.units.PhysicalType`\r\n"]
[91.166, "o", "\r\n"]
[91.176, "o", "        Raises\r\n"]
[91.186, "o", "        ------\r\n"]
[91.196, "o", "        TypeError\r\n"]
[91.206, "o", "            If the unit/physical_type annotation is not Unit-like or\r\n"]
[91.216, "o", "            PhysicalType-like.\r\n"]
[91.226, "o", "\r\n"]
[91.236, "o", "        Examples\r\n"]
[91.246, "o", "        --------\r\n"]
[91.256, "o", "        Create a unit-aware Quantity type annotation\r\n"]
[91.266, "o", "\r\n"]
[91.276, "o", "            >>> Quantity[Unit(\"s\")]\r\n"]
[91.286, "o", "            Annotated[Quantity, Unit(\"s\")]\r\n"]
[91.296, "o", "\r\n"]
[91.306, "o", "        See Also\r\n"]
[91.316, "o", "        --------\r\n"]
[91.326, "o", "        `~astropy.units.quantity_input`\r\n"]
[91.336, "o", "            Use annotations for unit checks on function arguments and results.\r\n"]
[91.346, "o", "\r\n"]
[91.356, "o", "        Notes\r\n"]
[91.366, "o", "        -----\r\n"]
[91.376, "o", "        |Quantity| types are also static-type compatible.\r\n"]
[91.386, "o", "        \"\"\"\r\n"]
[91.396, "o", "        from typing import Annotated\r\n"]
[91.406, "o", "\r\n"]
[91.416, "o", "        # process whether [unit] or [unit, shape, ptype]\r\n"]
[91.426, "o", "        if isinstance(unit_shape_dtype, tuple):  # unit, shape, dtype\r\n"]
[91.436, "o", "            target = unit_shape_dtype[0]\r\n"]
[91.446, "o", "            shape_dtype = unit_shape_dtype[1:]\r\n"]
[91.456, "o", "        else:  # just unit\r\n"]
[91.466, "o", "            target = unit_shape_dtype\r\n"]
[91.476, "o", "            shape_dtype = ()\r\n"]
[91.486, "o", "\r\n"]
[91.496, "o", "        # Allowed unit/physical types. Errors if neither.\r\n"]
[91.506, "o", "        try:\r\n"]
[91.516, "o", "            unit = Unit(target)\r\n"]
[91.526, "o", "        except (TypeError, ValueError):\r\n"]
[91.536, "o", "            from astropy.units.physical import get_physical_type\r\n"]
[91.546, "o", "\r\n"]
[91.556, "o", "            try:\r\n"]
[91.566, "o", "                unit = get_physical_type(target)\r\n"]
[91.576, "o", "            except (TypeError, ValueError, KeyError):  # KeyError for Enum\r\n"]
[91.586, "o", "                raise TypeError(\r\n"]
[91.596, "o", "                    \"unit annotation is not a Unit or PhysicalType\"\r\n"]
[91.606, "o", "                ) from None\r\n"]
[91.616, "o", "\r\n"]
[91.626, "o", "        # Quantity does not (yet) properly extend the NumPy generics types,\r\n"]
[91.636, "o", "        # introduced in numpy v1.22+, instead just including the unit info as\r\n"]
[91.646, "o", "        # metadata using Annotated.\r\n"]
[91.656, "o", "        # TODO: ensure we do interact with NDArray.__class_getitem__.\r\n"]
[91.666, "o", "        return Annotated[cls, unit]\r\n"]
[91.676, "o", "\r\n"]
[91.686, "o", "    def __new__(\r\n"]
[91.696, "o", "        cls: type[Self],\r\n"]
[91.706, "o", "        value: QuantityLike,\r\n"]
[91.716, "o", "        unit=None,\r\n"]
[91.726, "o", "        dtype=np.inexact,\r\n"]
[91.736, "o", "        copy=True,\r\n"]
[91.746, "o", "        order=None,\r\n"]
[91.756, "o", "        subok=False,\r\n"]
[91.766, "o", "        ndmin=0,\r\n"]
[91.776, "o", "    ) -> Self:\r\n"]
[91.786, "o", "        if unit is not None:\r\n"]
[91.796, "o", "            # convert unit first, to avoid multiple string->unit conversions\r\n"]
[91.806, "o", "            unit = Unit(unit)\r\n"]
[91.816, "o", "\r\n"]
[91.826, "o", "        # inexact -> upcast to float dtype\r\n"]
[91.836, "o", "        float_default = dtype is np.inexact\r\n"]
[91.846, "o", "        if float_default:\r\n"]
[91.856, "o", "            dtype = None\r\n"]
[91.866, "o", "\r\n"]
[91.876, "o", "        # optimize speed for Quantity with no dtype given, copy=COPY_IF_NEEDED\r\n"]
[91.886, "o", "        if isinstance(value, Quantity):\r\n"]
[91.896, "o", "            if unit is not None and unit is not value.unit:\r\n"]
[91.906, "o", "                value = value.to(unit)\r\n"]
[91.916, "o", "                # the above already makes a copy (with float dtype)\r\n"]
[91.926, "o", "                copy = COPY_IF_NEEDED\r\n"]
[91.936, "o", "\r\n"]
[91.946, "o", "            if type(value) is not cls and not (subok and isinstance(value, cls)):\r\n"]
[91.956, "o", "                value = value.view(cls)\r\n"]
[91.966, "o", "\r\n"]
[91.976, "o", "            if float_default and value.dtype.kind in \"iu\":\r\n"]
[91.986, "o", "                dtype = float\r\n"]
[91.996, "o", "\r\n"]
[92.006, "o", "            return np.array(\r\n"]
[92.016, "o", "                value, dtype=dtype, copy=copy, order=order, subok=True, ndmin=ndmin\r\n"]
[92.026, "o", "            )\r\n"]
[92.036, "o", "\r\n"]
[92.046, "o", "        # Maybe str, or list/tuple of Quantity? If so, this may set value_unit.\r\n"]
[92.056, "o", "        # To ensure array remains fast, we short-circuit it.\r\n"]
[92.066, "o", "        value_unit = None\r\n"]
[92.076, "o", "        if not isinstance(value, np.ndarray):\r\n"]
[92.086, "o", "            if isinstance(value, str):\r\n"]
[92.096, "o", "                # The first part of the regex string matches any integer/float;\r\n"]
[92.106, "o", "                # the second parts adds possible trailing .+-, which will break\r\n"]
[92.116, "o", "                # the float function below and ensure things like 1.2.3deg\r\n"]
[92.126, "o", "                # will not work.\r\n"]
[92.136, "o", "                pattern = (\r\n"]
[92.146, "o", "                    r\"\\s*[+-]?\"\r\n"]
[92.156, "o", "                    r\"((\\d+\\.?\\d*)|(\\.\\d+)|([nN][aA][nN])|\"\r\n"]
[92.166, "o", "                    r\"([iI][nN][fF]([iI][nN][iI][tT][yY]){0,1}))\"\r\n"]
[92.176, "o", "                    r\"([eE][+-]?\\d+)?\"\r\n"]
[92.186, "o", "                    r\"[.+-]?\"\r\n"]
[92.196, "o", "                )\r\n"]
[92.206, "o", "\r\n"]
[92.216, "o", "                v = re.match(pattern, value)\r\n"]
[92.226, "o", "                unit_string = None\r\n"]
[92.236, "o", "                try:\r\n"]
[92.246, "o", "                    value = float(v.group())\r\n"]
[92.256, "o", "\r\n"]
[92.266, "o", "                except Exception:\r\n"]
[92.276, "o", "                    raise TypeError(\r\n"]
[92.286, "o", "                        f'Cannot parse \"{value}\" as a {cls.__name__}. It does not '\r\n"]
[92.296, "o", "                        \"start with a number.\"\r\n"]
[92.306, "o", "                    )\r\n"]
[92.316, "o", "\r\n"]
[92.326, "o", "                unit_string = v.string[v.end() :].strip()\r\n"]
[92.336, "o", "                if unit_string:\r\n"]
[92.346, "o", "                    value_unit = Unit(unit_string)\r\n"]
[92.356, "o", "                    if unit is None:\r\n"]
[92.366, "o", "                        unit = value_unit  # signal no conversion needed below.\r\n"]
[92.376, "o", "\r\n"]
[92.386, "o", "            elif isinstance(value, (list, tuple)) and len(value) > 0:\r\n"]
[92.396, "o", "                if all(isinstance(v, Quantity) for v in value):\r\n"]
[92.406, "o", "                    # If a list/tuple contains only quantities, stack them,\r\n"]
[92.416, "o", "                    # which also converts them to the same unit.\r\n"]
[92.426, "o", "                    value = np.stack(value)\r\n"]
[92.436, "o", "                    copy = False\r\n"]
[92.446, "o", "\r\n"]
[92.456, "o", "                elif (\r\n"]
[92.466, "o", "                    dtype is None\r\n"]
[92.476, "o", "                    and not hasattr(value, \"dtype\")\r\n"]
[92.486, "o", "                    and isinstance(unit, StructuredUnit)\r\n"]
[92.496, "o", "                ):\r\n"]
[92.506, "o", "                    # Special case for list/tuple of values and a structured unit:\r\n"]
[92.516, "o", "                    # ``np.array(value, dtype=None)`` would treat tuples as lower\r\n"]
[92.526, "o", "                    # levels of the array, rather than as elements of a structured\r\n"]
[92.536, "o", "                    # array, so we use the structure of the unit to help infer the\r\n"]
[92.546, "o", "                    # structured dtype of the value.\r\n"]
[92.556, "o", "                    dtype = unit._recursively_get_dtype(value)\r\n"]
[92.566, "o", "\r\n"]
[92.576, "o", "        using_default_unit = False\r\n"]
[92.586, "o", "        if value_unit is None:\r\n"]
[92.596, "o", "            # If the value has a `unit` attribute and if not None\r\n"]
[92.606, "o", "            # (for Columns with uninitialized unit), treat it like a quantity.\r\n"]
[92.616, "o", "            value_unit = getattr(value, \"unit\", None)\r\n"]
[92.626, "o", "            if value_unit is None:\r\n"]
[92.636, "o", "                # Default to dimensionless for no (initialized) unit attribute.\r\n"]
[92.646, "o", "                if unit is None:\r\n"]
[92.656, "o", "                    using_default_unit = True\r\n"]
[92.666, "o", "                    unit = cls._default_unit\r\n"]
[92.676, "o", "                value_unit = unit  # signal below that no conversion is needed\r\n"]
[92.686, "o", "            else:\r\n"]
[92.696, "o", "                try:\r\n"]
[92.706, "o", "                    value_unit = Unit(value_unit)\r\n"]
[92.716, "o", "                except Exception as exc:\r\n"]
[92.726, "o", "                    raise TypeError(\r\n"]
[92.736, "o", "                        f\"The unit attribute {value.unit!r} of the input could \"\r\n"]
[92.746, "o", "                        \"not be parsed as an astropy Unit.\"\r\n"]
[92.756, "o", "                    ) from exc\r\n"]
[92.766, "o", "\r\n"]
[92.776, "o", "                if unit is None:\r\n"]
[92.786, "o", "                    unit = value_unit\r\n"]
[92.796, "o", "                elif unit is not value_unit:\r\n"]
[92.806, "o", "                    copy = COPY_IF_NEEDED  # copy will be made in conversion at end\r\n"]
[92.816, "o", "\r\n"]
[92.826, "o", "        value = np.array(\r\n"]
[92.836, "o", "            value, dtype=dtype, copy=copy, order=order, subok=True, ndmin=ndmin\r\n"]
[92.846, "o", "        )\r\n"]
[92.856, "o", "\r\n"]
[92.866, "o", "        # For no-user-input unit, make sure the constructed unit matches the\r\n"]
[92.876, "o", "        # structure of the data.\r\n"]
[92.886, "o", "        if using_default_unit and value.dtype.names is not None:\r\n"]
[92.896, "o", "            unit = value_unit = _structured_unit_like_dtype(value_unit, value.dtype)\r\n"]
[92.906, "o", "\r\n"]
[92.916, "o", "        # check that array contains numbers or long int objects\r\n"]
[92.926, "o", "        if value.dtype.kind in \"OSU\" and not (\r\n"]
[92.936, "o", "            value.dtype.kind == \"O\" and isinstance(value.item(0), numbers.Number)\r\n"]
[92.946, "o", "        ):\r\n"]
[92.956, "o", "            raise TypeError(\"The value must be a valid Python or Numpy numeric type.\")\r\n"]
[92.966, "o", "\r\n"]
[92.976, "o", "        # by default, cast any integer, boolean, etc., to float\r\n"]
[92.986, "o", "        if float_default and value.dtype.kind in \"iuO\":\r\n"]
[92.996, "o", "            value = value.astype(float)\r\n"]
[93.006, "o", "\r\n"]
[93.016, "o", "        # if we allow subclasses, allow a class from the unit.\r\n"]
[93.026, "o", "        if subok:\r\n"]
[93.036, "o", "            qcls = getattr(unit, \"_quantity_class\", cls)\r\n"]
[93.046, "o", "            if issubclass(qcls, cls):\r\n"]
[93.056, "o", "                cls = qcls\r\n"]
[93.066, "o", "\r\n"]
[93.076, "o", "        value = value.view(cls)\r\n"]
[93.086, "o", "        value._set_unit(value_unit)\r\n"]
[93.096, "o", "        if unit is value_unit:\r\n"]
[93.106, "o", "            return value\r\n"]
[93.116, "o", "        else:\r\n"]
[93.126, "o", "            # here we had non-Quantity input that had a \"unit\" attribute\r\n"]
[93.136, "o", "            # with a unit different from the desired one.  So, convert.\r\n"]
[93.146, "o", "            return value.to(unit)\r\n"]
[93.156, "o", "\r\n"]
[93.166, "o", "    def __array_finalize__(self, obj):\r\n"]
[93.176, "o", "        # Check whether super().__array_finalize should be called\r\n"]
[93.186, "o", "        # (sadly, ndarray.__array_finalize__ is None; we cannot be sure\r\n"]
[93.196, "o", "        # what is above us).\r\n"]
[93.206, "o", "        super_array_finalize = super().__array_finalize__\r\n"]
[93.216, "o", "        if super_array_finalize is not None:\r\n"]
[93.226, "o", "            super_array_finalize(obj)\r\n"]
[93.236, "o", "\r\n"]
[93.246, "o", "        # If we're a new object or viewing an ndarray, nothing has to be done.\r\n"]
[93.256, "o", "        if obj is None or obj.__class__ is np.ndarray:\r\n"]
[93.266, "o", "            return\r\n"]
[93.276, "o", "\r\n"]
[93.286, "o", "        # Copy over the unit and possibly info.  Note that the only way the\r\n"]
[93.296, "o", "        # unit can already be set is if one enters via _new_view(), where the\r\n"]
[93.306, "o", "        # unit is often different from that of self, and where propagation of\r\n"]
[93.316, "o", "        # info is not always desirable.\r\n"]
[93.326, "o", "        if self._unit is None:\r\n"]
[93.336, "o", "            unit = getattr(obj, \"_unit\", None)\r\n"]
[93.346, "o", "            if unit is not None:\r\n"]
[93.356, "o", "                self._set_unit(unit)\r\n"]
[93.366, "o", "\r\n"]
[93.376, "o", "            # Copy info if the original had `info` defined.  Because of the way the\r\n"]
[93.386, "o", "            # DataInfo works, `'info' in obj.__dict__` is False until the\r\n"]
[93.396, "o", "            # `info` attribute is accessed or set.\r\n"]
[93.406, "o", "            if \"info\" in obj.__dict__:\r\n"]
[93.416, "o", "                self.info = obj.info\r\n"]
[93.426, "o", "\r\n"]
[93.436, "o", "    def __array_wrap__(self, obj, context=None, return_scalar=False):\r\n"]
[93.446, "o", "        if context is None:\r\n"]
[93.456, "o", "            # Methods like .squeeze() created a new `ndarray` and then call\r\n"]
[93.466, "o", "            # __array_wrap__ to turn the array into self's subclass.\r\n"]
[93.476, "o", "            return self._new_view(obj)\r\n"]
[93.486, "o", "\r\n"]
[93.496, "o", "        raise NotImplementedError(\r\n"]
[93.506, "o", "            \"__array_wrap__ should not be used with a context any more since all \"\r\n"]
[93.516, "o", "            \"use should go through array_function. Please raise an issue on \"\r\n"]
[93.526, "o", "            \"https://github.com/astropy/astropy\"\r\n"]
[93.536, "o", "        )\r\n"]
[93.546, "o", "\r\n"]
[93.556, "o", "    def __array_ufunc__(self, function, method, *inputs, **kwargs):\r\n"]
[93.566, "o", "        \"\"\"Wrap numpy ufuncs, taking care of units.\r\n"]
[93.576, "o", "\r\n"]
[93.586, "o", "        Parameters\r\n"]
[93.596, "o", "        ----------\r\n"]
[93.606, "o", "        function : callable\r\n"]
[93.616, "o", "            ufunc to wrap.\r\n"]
[93.626, "o", "        method : str\r\n"]
[93.636, "o", "            Ufunc method: ``__call__``, ``at``, ``reduce``, etc.\r\n"]
[93.646, "o", "        inputs : tuple\r\n"]
[93.656, "o", "            Input arrays.\r\n"]
[93.666, "o", "        kwargs : keyword arguments\r\n"]
[93.676, "o", "            As passed on, with ``out`` containing possible quantity output.\r\n"]
[93.686, "o", "\r\n"]
[93.696, "o", "        Returns\r\n"]
[93.706, "o", "        -------\r\n"]
[93.716, "o", "        result : `~astropy.units.Quantity` or `NotImplemented`\r\n"]
[93.726, "o", "            Results of the ufunc, with the unit set properly.\r\n"]
[93.736, "o", "        \"\"\"\r\n"]
[93.746, "o", "        # Determine required conversion functions -- to bring the unit of the\r\n"]
[93.756, "o", "        # input to that expected (e.g., radian for np.sin), or to get\r\n"]
[93.766, "o", "        # consistent units between two inputs (e.g., in np.add) --\r\n"]
[93.776, "o", "        # and the unit of the result (or tuple of units for nout > 1).\r\n"]
[93.786, "o", "        try:\r\n"]
[93.796, "o", "            converters, unit = converters_and_unit(function, method, *inputs)\r\n"]
[93.806, "o", "\r\n"]
[93.816, "o", "            out = kwargs.get(\"out\", None)\r\n"]
[93.826, "o", "            # Avoid loop back by turning any Quantity output into array views.\r\n"]
[93.836, "o", "            if out is not None:\r\n"]
[93.846, "o", "                # If pre-allocated output is used, check it is suitable.\r\n"]
[93.856, "o", "                # This also returns array view, to ensure we don't loop back.\r\n"]
[93.866, "o", "                if function.nout == 1:\r\n"]
[93.876, "o", "                    out = out[0]\r\n"]
[93.886, "o", "                out_array = check_output(out, unit, inputs, function=function)\r\n"]
[93.896, "o", "                # Ensure output argument remains a tuple.\r\n"]
[93.906, "o", "                kwargs[\"out\"] = (out_array,) if function.nout == 1 else out_array\r\n"]
[93.916, "o", "\r\n"]
[93.926, "o", "            if method == \"reduce\" and \"initial\" in kwargs and unit is not None:\r\n"]
[93.936, "o", "                # Special-case for initial argument for reductions like\r\n"]
[93.946, "o", "                # np.add.reduce.  This should be converted to the output unit as\r\n"]
[93.956, "o", "                # well, which is typically the same as the input unit (but can\r\n"]
[93.966, "o", "                # in principle be different: unitless for np.equal, radian\r\n"]
[93.976, "o", "                # for np.arctan2, though those are not necessarily useful!)\r\n"]
[93.986, "o", "                kwargs[\"initial\"] = self._to_own_unit(\r\n"]
[93.996, "o", "                    kwargs[\"initial\"], check_precision=False, unit=unit\r\n"]
[94.006, "o", "                )\r\n"]
[94.016, "o", "\r\n"]
[94.026, "o", "            # Same for inputs, but here also convert if necessary.\r\n"]
[94.036, "o", "            arrays = []\r\n"]
[94.046, "o", "            for input_, converter in zip(inputs, converters):\r\n"]
[94.056, "o", "                input_ = getattr(input_, \"value\", input_)\r\n"]
[94.066, "o", "                arrays.append(converter(input_) if converter else input_)\r\n"]
[94.076, "o", "\r\n"]
[94.086, "o", "            # Call our superclass's __array_ufunc__\r\n"]
[94.096, "o", "            result = super().__array_ufunc__(function, method, *arrays, **kwargs)\r\n"]
[94.106, "o", "            # If unit is None, a plain array is expected (e.g., comparisons), which\r\n"]
[94.116, "o", "            # means we're done.\r\n"]
[94.126, "o", "            # We're also done if the result was None (for method 'at') or\r\n"]
[94.136, "o", "            # NotImplemented, which can happen if other inputs/outputs override\r\n"]
[94.146, "o", "            # __array_ufunc__; hopefully, they can then deal with us.\r\n"]
[94.156, "o", "            if unit is None or result is None or result is NotImplemented:\r\n"]
[94.166, "o", "                return result\r\n"]
[94.176, "o", "\r\n"]
[94.186, "o", "            return self._result_as_quantity(result, unit, out)\r\n"]
[94.196, "o", "\r\n"]
[94.206, "o", "        except (TypeError, ValueError, AttributeError) as e:\r\n"]
[94.216, "o", "            out_normalized = kwargs.get(\"out\", ())\r\n"]
[94.226, "o", "            inputs_and_outputs = inputs + out_normalized\r\n"]
[94.236, "o", "            ignored_ufunc = (\r\n"]
[94.246, "o", "                None,\r\n"]
[94.256, "o", "                np.ndarray.__array_ufunc__,\r\n"]
[94.266, "o", "                type(self).__array_ufunc__,\r\n"]
[94.276, "o", "            )\r\n"]
[94.286, "o", "            if not all(\r\n"]
[94.296, "o", "                getattr(type(io), \"__array_ufunc__\", None) in ignored_ufunc\r\n"]
[94.306, "o", "                for io in inputs_and_outputs\r\n"]
[94.316, "o", "            ):\r\n"]
[94.326, "o", "                return NotImplemented\r\n"]
[94.336, "o", "            else:\r\n"]
[94.346, "o", "                raise e\r\n"]
[94.356, "o", "\r\n"]
[94.366, "o", "    def _result_as_quantity(self, result, unit, out):\r\n"]
[94.376, "o", "        \"\"\"Turn result into a quantity with the given unit.\r\n"]
[94.386, "o", "\r\n"]
[94.396, "o", "        If no output is given, it will take a view of the array as a quantity,\r\n"]
[94.406, "o", "        and set the unit.  If output is given, those should be quantity views\r\n"]
[94.416, "o", "        of the result arrays, and the function will just set the unit.\r\n"]
[94.426, "o", "\r\n"]
[94.436, "o", "        Parameters\r\n"]
[94.446, "o", "        ----------\r\n"]
[94.456, "o", "        result : ndarray or tuple thereof\r\n"]
[94.466, "o", "            Array(s) which need to be turned into quantity.\r\n"]
[94.476, "o", "        unit : `~astropy.units.Unit`\r\n"]
[94.486, "o", "            Unit for the quantities to be returned (or `None` if the result\r\n"]
[94.496, "o", "            should not be a quantity).  Should be tuple if result is a tuple.\r\n"]
[94.506, "o", "        out : `~astropy.units.Quantity` or None\r\n"]
[94.516, "o", "            Possible output quantity. Should be `None` or a tuple if result\r\n"]
[94.526, "o", "            is a tuple.\r\n"]
[94.536, "o", "\r\n"]
[94.546, "o", "        Returns\r\n"]
[94.556, "o", "        -------\r\n"]
[94.566, "o", "        out : `~astropy.units.Quantity`\r\n"]
[94.576, "o", "           With units set.\r\n"]
[94.586, "o", "        \"\"\"\r\n"]
[94.596, "o", "        if isinstance(result, (tuple, list)):\r\n"]
[94.606, "o", "            if out is None:\r\n"]
[94.616, "o", "                out = (None,) * len(result)\r\n"]
[94.626, "o", "            # Some np.linalg functions return namedtuple, which is handy to access\r\n"]
[94.636, "o", "            # elements by name, but cannot be directly initialized with an iterator.\r\n"]
[94.646, "o", "            result_cls = getattr(result, \"_make\", result.__class__)\r\n"]
[94.656, "o", "            return result_cls(\r\n"]
[94.666, "o", "                self._result_as_quantity(result_, unit_, out_)\r\n"]
[94.676, "o", "                for (result_, unit_, out_) in zip(result, unit, out)\r\n"]
[94.686, "o", "            )\r\n"]
[94.696, "o", "\r\n"]
[94.706, "o", "        if out is None:\r\n"]
[94.716, "o", "            # View the result array as a Quantity with the proper unit.\r\n"]
[94.726, "o", "            return (\r\n"]
[94.736, "o", "                result\r\n"]
[94.746, "o", "                if unit is None\r\n"]
[94.756, "o", "                else self._new_view(result, unit, propagate_info=False)\r\n"]
[94.766, "o", "            )\r\n"]
[94.776, "o", "\r\n"]
[94.786, "o", "        elif isinstance(out, Quantity):\r\n"]
[94.796, "o", "            # For given Quantity output, just set the unit. We know the unit\r\n"]
[94.806, "o", "            # is not None and the output is of the correct Quantity subclass,\r\n"]
[94.816, "o", "            # as it was passed through check_output.\r\n"]
[94.826, "o", "            # (We cannot do this unconditionally, though, since it is possible\r\n"]
[94.836, "o", "            # for out to be ndarray and the unit to be dimensionless.)\r\n"]
[94.846, "o", "            out._set_unit(unit)\r\n"]
[94.856, "o", "\r\n"]
[94.866, "o", "        return out\r\n"]
[94.876, "o", "\r\n"]
[94.886, "o", "    def __quantity_subclass__(self, unit):\r\n"]
[94.896, "o", "        \"\"\"\r\n"]
[94.906, "o", "        Overridden by subclasses to change what kind of view is\r\n"]
[94.916, "o", "        created based on the output unit of an operation.\r\n"]
[94.926, "o", "\r\n"]
[94.936, "o", "        Parameters\r\n"]
[95.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[95.002, "i", "sed -n '800,1600p' astropy/units/quantity.py\r"]
[95.004, "o", "sed -n '800,1600p' astropy/units/quantity.py\r\n"]
[95.016, "o", "\u001b[?2004l\r\n"]
[95.026, "o", "            quantity_subclass = self.__class__\r\n"]
[95.036, "o", "        elif unit is self.unit and self.__class__ is Quantity:\r\n"]
[95.046, "o", "            # The second part is because we should not presume what other\r\n"]
[95.056, "o", "            # classes want to do for the same unit.  E.g., Constant will\r\n"]
[95.066, "o", "            # always want to fall back to Quantity, and relies on going\r\n"]
[95.076, "o", "            # through `__quantity_subclass__`.\r\n"]
[95.086, "o", "            quantity_subclass = Quantity\r\n"]
[95.096, "o", "        else:\r\n"]
[95.106, "o", "            unit = Unit(unit)\r\n"]
[95.116, "o", "            quantity_subclass = getattr(unit, \"_quantity_class\", Quantity)\r\n"]
[95.126, "o", "            if isinstance(self, quantity_subclass):\r\n"]
[95.136, "o", "                quantity_subclass, subok = self.__quantity_subclass__(unit)\r\n"]
[95.146, "o", "                if subok:\r\n"]
[95.156, "o", "                    quantity_subclass = self.__class__\r\n"]
[95.166, "o", "\r\n"]
[95.176, "o", "        # We only want to propagate information from ``self`` to our new view,\r\n"]
[95.186, "o", "        # so obj should be a regular array.  By using ``np.array``, we also\r\n"]
[95.196, "o", "        # convert python and numpy scalars, which cannot be viewed as arrays\r\n"]
[95.206, "o", "        # and thus not as Quantity either, to zero-dimensional arrays.\r\n"]
[95.216, "o", "        # (These are turned back into scalar in `.value`)\r\n"]
[95.226, "o", "        # Note that for an ndarray input, the np.array call takes only double\r\n"]
[95.236, "o", "        # ``obj.__class is np.ndarray``. So, not worth special-casing.\r\n"]
[95.246, "o", "        if obj is None:\r\n"]
[95.256, "o", "            obj = self.view(np.ndarray)\r\n"]
[95.266, "o", "        else:\r\n"]
[95.276, "o", "            obj = np.array(obj, copy=COPY_IF_NEEDED, subok=True)\r\n"]
[95.286, "o", "\r\n"]
[95.296, "o", "        # Take the view, set the unit, and update possible other properties\r\n"]
[95.306, "o", "        # such as ``info``, ``wrap_angle`` in `Longitude`, etc.\r\n"]
[95.316, "o", "        view = obj.view(quantity_subclass)\r\n"]
[95.326, "o", "        view._set_unit(unit)\r\n"]
[95.336, "o", "        view.__array_finalize__(self)\r\n"]
[95.346, "o", "        if propagate_info and \"info\" in self.__dict__:\r\n"]
[95.356, "o", "            view.info = self.info\r\n"]
[95.366, "o", "        return view\r\n"]
[95.376, "o", "\r\n"]
[95.386, "o", "    def _set_unit(self, unit):\r\n"]
[95.396, "o", "        \"\"\"Set the unit.\r\n"]
[95.406, "o", "\r\n"]
[95.416, "o", "        This is used anywhere the unit is set or modified, i.e., in the\r\n"]
[95.426, "o", "        initializer, in ``__imul__`` and ``__itruediv__`` for in-place\r\n"]
[95.436, "o", "        multiplication and division by another unit, as well as in\r\n"]
[95.446, "o", "        ``__array_finalize__`` for wrapping up views.  For Quantity, it just\r\n"]
[95.456, "o", "        sets the unit, but subclasses can override it to check that, e.g.,\r\n"]
[95.466, "o", "        a unit is consistent.\r\n"]
[95.476, "o", "        \"\"\"\r\n"]
[95.486, "o", "        if not isinstance(unit, UnitBase):\r\n"]
[95.496, "o", "            if isinstance(self._unit, StructuredUnit) or isinstance(\r\n"]
[95.506, "o", "                unit, StructuredUnit\r\n"]
[95.516, "o", "            ):\r\n"]
[95.526, "o", "                unit = StructuredUnit(unit, self.dtype)\r\n"]
[95.536, "o", "            else:\r\n"]
[95.546, "o", "                # Trying to go through a string ensures that, e.g., Magnitudes with\r\n"]
[95.556, "o", "                # dimensionless physical unit become Quantity with units of mag.\r\n"]
[95.566, "o", "                unit = Unit(str(unit), parse_strict=\"silent\")\r\n"]
[95.576, "o", "                if not isinstance(unit, (UnitBase, StructuredUnit)):\r\n"]
[95.586, "o", "                    raise UnitTypeError(\r\n"]
[95.596, "o", "                        f\"{self.__class__.__name__} instances require normal units, \"\r\n"]
[95.606, "o", "                        f\"not {unit.__class__} instances.\"\r\n"]
[95.616, "o", "                    )\r\n"]
[95.626, "o", "\r\n"]
[95.636, "o", "        self._unit = unit\r\n"]
[95.646, "o", "\r\n"]
[95.656, "o", "    def __deepcopy__(self, memo):\r\n"]
[95.666, "o", "        # If we don't define this, ``copy.deepcopy(quantity)`` will\r\n"]
[95.676, "o", "        # return a bare Numpy array.\r\n"]
[95.686, "o", "        return self.copy()\r\n"]
[95.696, "o", "\r\n"]
[95.706, "o", "    def __reduce__(self):\r\n"]
[95.716, "o", "        # patch to pickle Quantity objects (ndarray subclasses), see\r\n"]
[95.726, "o", "        # http://www.mail-archive.com/numpy-discussion@scipy.org/msg02446.html\r\n"]
[95.736, "o", "\r\n"]
[95.746, "o", "        object_state = list(super().__reduce__())\r\n"]
[95.756, "o", "        object_state[2] = (object_state[2], self.__dict__)\r\n"]
[95.766, "o", "        return tuple(object_state)\r\n"]
[95.776, "o", "\r\n"]
[95.786, "o", "    def __setstate__(self, state):\r\n"]
[95.796, "o", "        # patch to unpickle Quantity objects (ndarray subclasses), see\r\n"]
[95.806, "o", "        # http://www.mail-archive.com/numpy-discussion@scipy.org/msg02446.html\r\n"]
[95.816, "o", "\r\n"]
[95.826, "o", "        nd_state, own_state = state\r\n"]
[95.836, "o", "        super().__setstate__(nd_state)\r\n"]
[95.846, "o", "        self.__dict__.update(own_state)\r\n"]
[95.856, "o", "\r\n"]
[95.866, "o", "    info = QuantityInfo()\r\n"]
[95.876, "o", "\r\n"]
[95.886, "o", "    def _to_value(self, unit, equivalencies=[]):\r\n"]
[95.896, "o", "        \"\"\"Helper method for to and to_value.\"\"\"\r\n"]
[95.906, "o", "        if equivalencies == []:\r\n"]
[95.916, "o", "            equivalencies = self._equivalencies\r\n"]
[95.926, "o", "        if not self.dtype.names or isinstance(self.unit, StructuredUnit):\r\n"]
[95.936, "o", "            # Standard path, let unit to do work.\r\n"]
[95.946, "o", "            return self.unit.to(\r\n"]
[95.956, "o", "                unit, self.view(np.ndarray), equivalencies=equivalencies\r\n"]
[95.966, "o", "            )\r\n"]
[95.976, "o", "\r\n"]
[95.986, "o", "        else:\r\n"]
[95.996, "o", "            # The .to() method of a simple unit cannot convert a structured\r\n"]
[96.006, "o", "            # dtype, so we work around it, by recursing.\r\n"]
[96.016, "o", "            # TODO: deprecate this?\r\n"]
[96.026, "o", "            # Convert simple to Structured on initialization?\r\n"]
[96.036, "o", "            result = np.empty_like(self.view(np.ndarray))\r\n"]
[96.046, "o", "            for name in self.dtype.names:\r\n"]
[96.056, "o", "                result[name] = self[name]._to_value(unit, equivalencies)\r\n"]
[96.066, "o", "            return result\r\n"]
[96.076, "o", "\r\n"]
[96.086, "o", "    def to(self, unit, equivalencies=[], copy=True):\r\n"]
[96.096, "o", "        \"\"\"\r\n"]
[96.106, "o", "        Return a new `~astropy.units.Quantity` object with the specified unit.\r\n"]
[96.116, "o", "\r\n"]
[96.126, "o", "        Parameters\r\n"]
[96.136, "o", "        ----------\r\n"]
[96.146, "o", "        unit : unit-like\r\n"]
[96.156, "o", "            An object that represents the unit to convert to. Must be\r\n"]
[96.166, "o", "            an `~astropy.units.UnitBase` object or a string parseable\r\n"]
[96.176, "o", "            by the `~astropy.units` package.\r\n"]
[96.186, "o", "\r\n"]
[96.196, "o", "        equivalencies : list of tuple\r\n"]
[96.206, "o", "            A list of equivalence pairs to try if the units are not\r\n"]
[96.216, "o", "            directly convertible.  See :ref:`astropy:unit_equivalencies`.\r\n"]
[96.226, "o", "            If not provided or ``[]``, class default equivalencies will be used\r\n"]
[96.236, "o", "            (none for `~astropy.units.Quantity`, but may be set for subclasses)\r\n"]
[96.246, "o", "            If `None`, no equivalencies will be applied at all, not even any\r\n"]
[96.256, "o", "            set globally or within a context.\r\n"]
[96.266, "o", "\r\n"]
[96.276, "o", "        copy : bool, optional\r\n"]
[96.286, "o", "            If `True` (default), then the value is copied.  Otherwise, a copy\r\n"]
[96.296, "o", "            will only be made if necessary.\r\n"]
[96.306, "o", "\r\n"]
[96.316, "o", "        See Also\r\n"]
[96.326, "o", "        --------\r\n"]
[96.336, "o", "        to_value : get the numerical value in a given unit.\r\n"]
[96.346, "o", "        \"\"\"\r\n"]
[96.356, "o", "        # We don't use `to_value` below since we always want to make a copy\r\n"]
[96.366, "o", "        # and don't want to slow down this method (esp. the scalar case).\r\n"]
[96.376, "o", "        unit = Unit(unit)\r\n"]
[96.386, "o", "        if copy:\r\n"]
[96.396, "o", "            # Avoid using to_value to ensure that we make a copy. We also\r\n"]
[96.406, "o", "            # don't want to slow down this method (esp. the scalar case).\r\n"]
[96.416, "o", "            value = self._to_value(unit, equivalencies)\r\n"]
[96.426, "o", "        else:\r\n"]
[96.436, "o", "            # to_value only copies if necessary\r\n"]
[96.446, "o", "            value = self.to_value(unit, equivalencies)\r\n"]
[96.456, "o", "        return self._new_view(value, unit)\r\n"]
[96.466, "o", "\r\n"]
[96.476, "o", "    def to_value(self, unit=None, equivalencies=[]):\r\n"]
[96.486, "o", "        \"\"\"\r\n"]
[96.496, "o", "        The numerical value, possibly in a different unit.\r\n"]
[96.506, "o", "\r\n"]
[96.516, "o", "        Parameters\r\n"]
[96.526, "o", "        ----------\r\n"]
[96.536, "o", "        unit : unit-like, optional\r\n"]
[96.546, "o", "            The unit in which the value should be given. If not given or `None`,\r\n"]
[96.556, "o", "            use the current unit.\r\n"]
[96.566, "o", "\r\n"]
[96.576, "o", "        equivalencies : list of tuple, optional\r\n"]
[96.586, "o", "            A list of equivalence pairs to try if the units are not directly\r\n"]
[96.596, "o", "            convertible (see :ref:`astropy:unit_equivalencies`). If not provided\r\n"]
[96.606, "o", "            or ``[]``, class default equivalencies will be used (none for\r\n"]
[96.616, "o", "            `~astropy.units.Quantity`, but may be set for subclasses).\r\n"]
[96.626, "o", "            If `None`, no equivalencies will be applied at all, not even any\r\n"]
[96.636, "o", "            set globally or within a context.\r\n"]
[96.646, "o", "\r\n"]
[96.656, "o", "        Returns\r\n"]
[96.666, "o", "        -------\r\n"]
[96.676, "o", "        value : ndarray or scalar\r\n"]
[96.686, "o", "            The value in the units specified. For arrays, this will be a view\r\n"]
[96.696, "o", "            of the data if no unit conversion was necessary.\r\n"]
[96.706, "o", "\r\n"]
[96.716, "o", "        See Also\r\n"]
[96.726, "o", "        --------\r\n"]
[96.736, "o", "        to : Get a new instance in a different unit.\r\n"]
[96.746, "o", "        \"\"\"\r\n"]
[96.756, "o", "        if unit is None or unit is self.unit:\r\n"]
[96.766, "o", "            value = self.view(np.ndarray)\r\n"]
[96.776, "o", "        elif not self.dtype.names:\r\n"]
[96.786, "o", "            # For non-structured, we attempt a short-cut, where we just get\r\n"]
[96.796, "o", "            # the scale.  If that is 1, we do not have to do anything.\r\n"]
[96.806, "o", "            unit = Unit(unit)\r\n"]
[96.816, "o", "            # We want a view if the unit does not change.  One could check\r\n"]
[96.826, "o", "            # with \"==\", but that calculates the scale that we need anyway.\r\n"]
[96.836, "o", "            # TODO: would be better for `unit.to` to have an in-place flag.\r\n"]
[96.846, "o", "            try:\r\n"]
[96.856, "o", "                scale = self.unit._to(unit)\r\n"]
[96.866, "o", "            except Exception:\r\n"]
[96.876, "o", "                # Short-cut failed; try default (maybe equivalencies help).\r\n"]
[96.886, "o", "                value = self._to_value(unit, equivalencies)\r\n"]
[96.896, "o", "            else:\r\n"]
[96.906, "o", "                value = self.view(np.ndarray)\r\n"]
[96.916, "o", "                if not is_effectively_unity(scale):\r\n"]
[96.926, "o", "                    # not in-place!\r\n"]
[96.936, "o", "                    value = value * scale\r\n"]
[96.946, "o", "        else:\r\n"]
[96.956, "o", "            # For structured arrays, we go the default route.\r\n"]
[96.966, "o", "            value = self._to_value(unit, equivalencies)\r\n"]
[96.976, "o", "\r\n"]
[96.986, "o", "        # Index with empty tuple to decay array scalars in to numpy scalars.\r\n"]
[96.996, "o", "        return value if value.shape else value[()]\r\n"]
[97.006, "o", "\r\n"]
[97.016, "o", "    value = property(\r\n"]
[97.026, "o", "        to_value,\r\n"]
[97.036, "o", "        doc=\"\"\"The numerical value of this instance.\r\n"]
[97.046, "o", "\r\n"]
[97.056, "o", "    See also\r\n"]
[97.066, "o", "    --------\r\n"]
[97.076, "o", "    to_value : Get the numerical value in a given unit.\r\n"]
[97.086, "o", "    \"\"\",\r\n"]
[97.096, "o", "    )\r\n"]
[97.106, "o", "\r\n"]
[97.116, "o", "    @property\r\n"]
[97.126, "o", "    def unit(self):\r\n"]
[97.136, "o", "        \"\"\"\r\n"]
[97.146, "o", "        A `~astropy.units.UnitBase` object representing the unit of this\r\n"]
[97.156, "o", "        quantity.\r\n"]
[97.166, "o", "        \"\"\"\r\n"]
[97.176, "o", "        return self._unit\r\n"]
[97.186, "o", "\r\n"]
[97.196, "o", "    @property\r\n"]
[97.206, "o", "    def equivalencies(self):\r\n"]
[97.216, "o", "        \"\"\"\r\n"]
[97.226, "o", "        A list of equivalencies that will be applied by default during\r\n"]
[97.236, "o", "        unit conversions.\r\n"]
[97.246, "o", "        \"\"\"\r\n"]
[97.256, "o", "        return self._equivalencies\r\n"]
[97.266, "o", "\r\n"]
[97.276, "o", "    def _recursively_apply(self, func):\r\n"]
[97.286, "o", "        \"\"\"Apply function recursively to every field.\r\n"]
[97.296, "o", "\r\n"]
[97.306, "o", "        Returns a copy with the result.\r\n"]
[97.316, "o", "        \"\"\"\r\n"]
[97.326, "o", "        result = np.empty_like(self)\r\n"]
[97.336, "o", "        result_value = result.view(np.ndarray)\r\n"]
[97.346, "o", "        result_unit = ()\r\n"]
[97.356, "o", "        for name in self.dtype.names:\r\n"]
[97.366, "o", "            part = func(self[name])\r\n"]
[97.376, "o", "            result_value[name] = part.value\r\n"]
[97.386, "o", "            result_unit += (part.unit,)\r\n"]
[97.396, "o", "\r\n"]
[97.406, "o", "        result._set_unit(result_unit)\r\n"]
[97.416, "o", "        return result\r\n"]
[97.426, "o", "\r\n"]
[97.436, "o", "    @property\r\n"]
[97.446, "o", "    def si(self):\r\n"]
[97.456, "o", "        \"\"\"\r\n"]
[97.466, "o", "        Returns a copy of the current `Quantity` instance with SI units. The\r\n"]
[97.476, "o", "        value of the resulting object will be scaled.\r\n"]
[97.486, "o", "        \"\"\"\r\n"]
[97.496, "o", "        if self.dtype.names:\r\n"]
[97.506, "o", "            return self._recursively_apply(operator.attrgetter(\"si\"))\r\n"]
[97.516, "o", "        si_unit = self.unit.si\r\n"]
[97.526, "o", "        return self._new_view(self.value * si_unit.scale, si_unit / si_unit.scale)\r\n"]
[97.536, "o", "\r\n"]
[97.546, "o", "    @property\r\n"]
[97.556, "o", "    def cgs(self):\r\n"]
[97.566, "o", "        \"\"\"\r\n"]
[97.576, "o", "        Returns a copy of the current `Quantity` instance with CGS units. The\r\n"]
[97.586, "o", "        value of the resulting object will be scaled.\r\n"]
[97.596, "o", "        \"\"\"\r\n"]
[97.606, "o", "        if self.dtype.names:\r\n"]
[97.616, "o", "            return self._recursively_apply(operator.attrgetter(\"cgs\"))\r\n"]
[97.626, "o", "        cgs_unit = self.unit.cgs\r\n"]
[97.636, "o", "        return self._new_view(self.value * cgs_unit.scale, cgs_unit / cgs_unit.scale)\r\n"]
[97.646, "o", "\r\n"]
[97.656, "o", "    @property\r\n"]
[97.666, "o", "    def isscalar(self):\r\n"]
[97.676, "o", "        \"\"\"\r\n"]
[97.686, "o", "        True if the `value` of this quantity is a scalar, or False if it\r\n"]
[97.696, "o", "        is an array-like object.\r\n"]
[97.706, "o", "\r\n"]
[97.716, "o", "        .. note::\r\n"]
[97.726, "o", "            This is subtly different from `numpy.isscalar` in that\r\n"]
[97.736, "o", "            `numpy.isscalar` returns False for a zero-dimensional array\r\n"]
[97.746, "o", "            (e.g. ``np.array(1)``), while this is True for quantities,\r\n"]
[97.756, "o", "            since quantities cannot represent true numpy scalars.\r\n"]
[97.766, "o", "        \"\"\"\r\n"]
[97.776, "o", "        return not self.shape\r\n"]
[97.786, "o", "\r\n"]
[97.796, "o", "    # This flag controls whether convenience conversion members, such\r\n"]
[97.806, "o", "    # as `q.m` equivalent to `q.to_value(u.m)` are available.  This is\r\n"]
[97.816, "o", "    # not turned on on Quantity itself, but is on some subclasses of\r\n"]
[97.826, "o", "    # Quantity, such as `astropy.coordinates.Angle`.\r\n"]
[97.836, "o", "    _include_easy_conversion_members = False\r\n"]
[97.846, "o", "\r\n"]
[97.856, "o", "    def __dir__(self):\r\n"]
[97.866, "o", "        \"\"\"\r\n"]
[97.876, "o", "        Quantities are able to directly convert to other units that\r\n"]
[97.886, "o", "        have the same physical type.  This function is implemented in\r\n"]
[97.896, "o", "        order to make autocompletion still work correctly in IPython.\r\n"]
[97.906, "o", "        \"\"\"\r\n"]
[97.916, "o", "        if not self._include_easy_conversion_members:\r\n"]
[97.926, "o", "            return super().__dir__()\r\n"]
[97.936, "o", "\r\n"]
[97.946, "o", "        dir_values = set(super().__dir__())\r\n"]
[97.956, "o", "        equivalencies = Unit._normalize_equivalencies(self.equivalencies)\r\n"]
[97.966, "o", "        for equivalent in self.unit._get_units_with_same_physical_type(equivalencies):\r\n"]
[97.976, "o", "            dir_values.update(equivalent.names)\r\n"]
[97.986, "o", "        return sorted(dir_values)\r\n"]
[97.996, "o", "\r\n"]
[98.006, "o", "    def __getattr__(self, attr):\r\n"]
[98.016, "o", "        \"\"\"\r\n"]
[98.026, "o", "        Quantities are able to directly convert to other units that\r\n"]
[98.036, "o", "        have the same physical type.\r\n"]
[98.046, "o", "        \"\"\"\r\n"]
[98.056, "o", "        if not self._include_easy_conversion_members:\r\n"]
[98.066, "o", "            raise AttributeError(\r\n"]
[98.076, "o", "                f\"'{self.__class__.__name__}' object has no '{attr}' member\"\r\n"]
[98.086, "o", "            )\r\n"]
[98.096, "o", "\r\n"]
[98.106, "o", "        def get_virtual_unit_attribute():\r\n"]
[98.116, "o", "            registry = get_current_unit_registry().registry\r\n"]
[98.126, "o", "            to_unit = registry.get(attr, None)\r\n"]
[98.136, "o", "            if to_unit is None:\r\n"]
[98.146, "o", "                return None\r\n"]
[98.156, "o", "\r\n"]
[98.166, "o", "            try:\r\n"]
[98.176, "o", "                return self.unit.to(\r\n"]
[98.186, "o", "                    to_unit, self.value, equivalencies=self.equivalencies\r\n"]
[98.196, "o", "                )\r\n"]
[98.206, "o", "            except UnitsError:\r\n"]
[98.216, "o", "                return None\r\n"]
[98.226, "o", "\r\n"]
[98.236, "o", "        value = get_virtual_unit_attribute()\r\n"]
[98.246, "o", "\r\n"]
[98.256, "o", "        if value is None:\r\n"]
[98.266, "o", "            raise AttributeError(\r\n"]
[98.276, "o", "                f\"{self.__class__.__name__} instance has no attribute '{attr}'\"\r\n"]
[98.286, "o", "            )\r\n"]
[98.296, "o", "        else:\r\n"]
[98.306, "o", "            return value\r\n"]
[98.316, "o", "\r\n"]
[98.326, "o", "    # Equality needs to be handled explicitly as ndarray.__eq__ gives\r\n"]
[98.336, "o", "    # DeprecationWarnings on any error, which is distracting, and does not\r\n"]
[98.346, "o", "    # deal well with structured arrays (nor does the ufunc).\r\n"]
[98.356, "o", "    def __eq__(self, other):\r\n"]
[98.366, "o", "        try:\r\n"]
[98.376, "o", "            other_value = self._to_own_unit(other)\r\n"]
[98.386, "o", "        except UnitsError:\r\n"]
[98.396, "o", "            return False\r\n"]
[98.406, "o", "        except Exception:\r\n"]
[98.416, "o", "            return NotImplemented\r\n"]
[98.426, "o", "        return self.value.__eq__(other_value)\r\n"]
[98.436, "o", "\r\n"]
[98.446, "o", "    def __ne__(self, other):\r\n"]
[98.456, "o", "        try:\r\n"]
[98.466, "o", "            other_value = self._to_own_unit(other)\r\n"]
[98.476, "o", "        except UnitsError:\r\n"]
[98.486, "o", "            return True\r\n"]
[98.496, "o", "        except Exception:\r\n"]
[98.506, "o", "            return NotImplemented\r\n"]
[98.516, "o", "        return self.value.__ne__(other_value)\r\n"]
[98.526, "o", "\r\n"]
[98.536, "o", "    # Unit conversion operator (<<).\r\n"]
[98.546, "o", "    def __lshift__(self, other):\r\n"]
[98.556, "o", "        try:\r\n"]
[98.566, "o", "            other = Unit(other, parse_strict=\"silent\")\r\n"]
[98.576, "o", "        except UnitTypeError:\r\n"]
[98.586, "o", "            return NotImplemented\r\n"]
[98.596, "o", "\r\n"]
[98.606, "o", "        return self.__class__(self, other, copy=False, subok=True)\r\n"]
[98.616, "o", "\r\n"]
[98.626, "o", "    def __ilshift__(self, other):\r\n"]
[98.636, "o", "        try:\r\n"]
[98.646, "o", "            other = Unit(other, parse_strict=\"silent\")\r\n"]
[98.656, "o", "        except UnitTypeError:\r\n"]
[98.666, "o", "            return NotImplemented  # try other.__rlshift__(self)\r\n"]
[98.676, "o", "\r\n"]
[98.686, "o", "        try:\r\n"]
[98.696, "o", "            factor = self.unit._to(other)\r\n"]
[98.706, "o", "        except UnitConversionError:  # incompatible, or requires an Equivalency\r\n"]
[98.716, "o", "            return NotImplemented\r\n"]
[98.726, "o", "        except AttributeError:  # StructuredUnit does not have `_to`\r\n"]
[98.736, "o", "            # In principle, in-place might be possible.\r\n"]
[98.746, "o", "            return NotImplemented\r\n"]
[98.756, "o", "\r\n"]
[98.766, "o", "        view = self.view(np.ndarray)\r\n"]
[98.776, "o", "        try:\r\n"]
[98.786, "o", "            view *= factor  # operates on view\r\n"]
[98.796, "o", "        except TypeError:\r\n"]
[98.806, "o", "            # The error is `numpy.core._exceptions._UFuncOutputCastingError`,\r\n"]
[98.816, "o", "            # which inherits from `TypeError`.\r\n"]
[98.826, "o", "            return NotImplemented\r\n"]
[98.836, "o", "\r\n"]
[98.846, "o", "        self._set_unit(other)\r\n"]
[98.856, "o", "        return self\r\n"]
[98.866, "o", "\r\n"]
[98.876, "o", "    def __rlshift__(self, other):\r\n"]
[98.886, "o", "        if not self.isscalar:\r\n"]
[98.896, "o", "            return NotImplemented\r\n"]
[98.906, "o", "        return Unit(self).__rlshift__(other)\r\n"]
[98.916, "o", "\r\n"]
[98.926, "o", "    # Give warning for other >> self, since probably other << self was meant.\r\n"]
[98.936, "o", "    def __rrshift__(self, other):\r\n"]
[98.946, "o", "        warnings.warn(\r\n"]
[98.956, "o", "            \">> is not implemented. Did you mean to convert \"\r\n"]
[98.966, "o", "            \"something to this quantity as a unit using '<<'?\",\r\n"]
[98.976, "o", "            AstropyWarning,\r\n"]
[98.986, "o", "        )\r\n"]
[98.996, "o", "        return NotImplemented\r\n"]
[99.006, "o", "\r\n"]
[99.016, "o", "    # Also define __rshift__ and __irshift__ so we override default ndarray\r\n"]
[99.026, "o", "    # behaviour, but instead of emitting a warning here, let it be done by\r\n"]
[99.036, "o", "    # other (which likely is a unit if this was a mistake).\r\n"]
[99.046, "o", "    def __rshift__(self, other):\r\n"]
[99.056, "o", "        return NotImplemented\r\n"]
[99.066, "o", "\r\n"]
[99.076, "o", "    def __irshift__(self, other):\r\n"]
[99.086, "o", "        return NotImplemented\r\n"]
[99.096, "o", "\r\n"]
[99.106, "o", "    # Arithmetic operations\r\n"]
[99.116, "o", "    def __mul__(self, other):\r\n"]
[99.126, "o", "        \"\"\"Multiplication between `Quantity` objects and other objects.\"\"\"\r\n"]
[99.136, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[99.146, "o", "            try:\r\n"]
[99.156, "o", "                return self._new_view(\r\n"]
[99.166, "o", "                    self.value.copy(), other * self.unit, propagate_info=False\r\n"]
[99.176, "o", "                )\r\n"]
[99.186, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[99.196, "o", "                return NotImplemented\r\n"]
[99.206, "o", "\r\n"]
[99.216, "o", "        return super().__mul__(other)\r\n"]
[99.226, "o", "\r\n"]
[99.236, "o", "    def __imul__(self, other):\r\n"]
[99.246, "o", "        \"\"\"In-place multiplication between `Quantity` objects and others.\"\"\"\r\n"]
[99.256, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[99.266, "o", "            self._set_unit(other * self.unit)\r\n"]
[99.276, "o", "            return self\r\n"]
[99.286, "o", "\r\n"]
[99.296, "o", "        return super().__imul__(other)\r\n"]
[99.306, "o", "\r\n"]
[99.316, "o", "    def __rmul__(self, other):\r\n"]
[99.326, "o", "        \"\"\"\r\n"]
[99.336, "o", "        Right Multiplication between `Quantity` objects and other objects.\r\n"]
[99.346, "o", "        \"\"\"\r\n"]
[99.356, "o", "        return self.__mul__(other)\r\n"]
[99.366, "o", "\r\n"]
[99.376, "o", "    def __truediv__(self, other):\r\n"]
[99.386, "o", "        \"\"\"Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[99.396, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[99.406, "o", "            try:\r\n"]
[99.416, "o", "                return self._new_view(\r\n"]
[99.426, "o", "                    self.value.copy(), self.unit / other, propagate_info=False\r\n"]
[99.436, "o", "                )\r\n"]
[99.446, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[99.456, "o", "                return NotImplemented\r\n"]
[99.466, "o", "\r\n"]
[99.476, "o", "        return super().__truediv__(other)\r\n"]
[99.486, "o", "\r\n"]
[99.496, "o", "    def __itruediv__(self, other):\r\n"]
[99.506, "o", "        \"\"\"Inplace division between `Quantity` objects and other objects.\"\"\"\r\n"]
[99.516, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[99.526, "o", "            self._set_unit(self.unit / other)\r\n"]
[99.536, "o", "            return self\r\n"]
[99.546, "o", "\r\n"]
[99.556, "o", "        return super().__itruediv__(other)\r\n"]
[99.566, "o", "\r\n"]
[99.576, "o", "    def __rtruediv__(self, other):\r\n"]
[99.586, "o", "        \"\"\"Right Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[99.596, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[99.606, "o", "            return self._new_view(\r\n"]
[99.616, "o", "                1.0 / self.value, other / self.unit, propagate_info=False\r\n"]
[99.626, "o", "            )\r\n"]
[99.636, "o", "\r\n"]
[99.646, "o", "        return super().__rtruediv__(other)\r\n"]
[99.656, "o", "\r\n"]
[99.666, "o", "    def __pow__(self, other):\r\n"]
[99.676, "o", "        if isinstance(other, Fraction):\r\n"]
[99.686, "o", "            # Avoid getting object arrays by raising the value to a Fraction.\r\n"]
[99.696, "o", "            return self._new_view(\r\n"]
[99.706, "o", "                self.value ** float(other), self.unit**other, propagate_info=False\r\n"]
[99.716, "o", "            )\r\n"]
[99.726, "o", "\r\n"]
[99.736, "o", "        return super().__pow__(other)\r\n"]
[99.746, "o", "\r\n"]
[99.756, "o", "    # other overrides of special functions\r\n"]
[99.766, "o", "    def __hash__(self):\r\n"]
[99.776, "o", "        return hash(self.value) ^ hash(self.unit)\r\n"]
[99.786, "o", "\r\n"]
[99.796, "o", "    def __iter__(self):\r\n"]
[99.806, "o", "        if self.isscalar:\r\n"]
[99.816, "o", "            raise TypeError(\r\n"]
[99.826, "o", "                f\"'{self.__class__.__name__}' object with a scalar value is not\"\r\n"]
[99.836, "o", "                \" iterable\"\r\n"]
[99.846, "o", "            )\r\n"]
[99.856, "o", "\r\n"]
[99.866, "o", "        # Otherwise return a generator\r\n"]
[99.876, "o", "        def quantity_iter():\r\n"]
[99.886, "o", "            for val in self.value:\r\n"]
[99.896, "o", "                yield self._new_view(val)\r\n"]
[99.906, "o", "\r\n"]
[99.916, "o", "        return quantity_iter()\r\n"]
[99.926, "o", "\r\n"]
[99.936, "o", "    def __getitem__(self, key):\r\n"]
[100.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[100.002, "i", "sed -n '1600,2400p' astropy/units/quantity.py\r"]
[100.004, "o", "sed -n '1600,2400p' astropy/units/quantity.py\r\n"]
[100.016, "o", "\u001b[?2004l\r\n"]
[100.026, "o", "                    return f\"{self.value} {format(self.unit, format_spec)}\"\r\n"]
[100.036, "o", "            # Can the value be formatted on its own?\r\n"]
[100.046, "o", "            try:\r\n"]
[100.056, "o", "                return f\"{format(self.value, format_spec)}{self._unitstr:s}\"\r\n"]
[100.066, "o", "            except ValueError:\r\n"]
[100.076, "o", "                # Format the whole thing as a single string.\r\n"]
[100.086, "o", "                return format(f\"{self.value}{self._unitstr:s}\", format_spec)\r\n"]
[100.096, "o", "\r\n"]
[100.106, "o", "    def decompose(self, bases=[]):\r\n"]
[100.116, "o", "        \"\"\"\r\n"]
[100.126, "o", "        Generates a new `Quantity` with the units\r\n"]
[100.136, "o", "        decomposed. Decomposed units have only irreducible units in\r\n"]
[100.146, "o", "        them (see `astropy.units.UnitBase.decompose`).\r\n"]
[100.156, "o", "\r\n"]
[100.166, "o", "        Parameters\r\n"]
[100.176, "o", "        ----------\r\n"]
[100.186, "o", "        bases : sequence of `~astropy.units.UnitBase`, optional\r\n"]
[100.196, "o", "            The bases to decompose into.  When not provided,\r\n"]
[100.206, "o", "            decomposes down to any irreducible units.  When provided,\r\n"]
[100.216, "o", "            the decomposed result will only contain the given units.\r\n"]
[100.226, "o", "            This will raises a `~astropy.units.UnitsError` if it's not possible\r\n"]
[100.236, "o", "            to do so.\r\n"]
[100.246, "o", "\r\n"]
[100.256, "o", "        Returns\r\n"]
[100.266, "o", "        -------\r\n"]
[100.276, "o", "        newq : `~astropy.units.Quantity`\r\n"]
[100.286, "o", "            A new object equal to this quantity with units decomposed.\r\n"]
[100.296, "o", "        \"\"\"\r\n"]
[100.306, "o", "        return self._decompose(False, bases=bases)\r\n"]
[100.316, "o", "\r\n"]
[100.326, "o", "    def _decompose(self, allowscaledunits=False, bases=[]):\r\n"]
[100.336, "o", "        \"\"\"\r\n"]
[100.346, "o", "        Generates a new `Quantity` with the units decomposed. Decomposed\r\n"]
[100.356, "o", "        units have only irreducible units in them (see\r\n"]
[100.366, "o", "        `astropy.units.UnitBase.decompose`).\r\n"]
[100.376, "o", "\r\n"]
[100.386, "o", "        Parameters\r\n"]
[100.396, "o", "        ----------\r\n"]
[100.406, "o", "        allowscaledunits : bool\r\n"]
[100.416, "o", "            If True, the resulting `Quantity` may have a scale factor\r\n"]
[100.426, "o", "            associated with it.  If False, any scaling in the unit will\r\n"]
[100.436, "o", "            be subsumed into the value of the resulting `Quantity`\r\n"]
[100.446, "o", "\r\n"]
[100.456, "o", "        bases : sequence of UnitBase, optional\r\n"]
[100.466, "o", "            The bases to decompose into.  When not provided,\r\n"]
[100.476, "o", "            decomposes down to any irreducible units.  When provided,\r\n"]
[100.486, "o", "            the decomposed result will only contain the given units.\r\n"]
[100.496, "o", "            This will raises a `~astropy.units.UnitsError` if it's not possible\r\n"]
[100.506, "o", "            to do so.\r\n"]
[100.516, "o", "\r\n"]
[100.526, "o", "        Returns\r\n"]
[100.536, "o", "        -------\r\n"]
[100.546, "o", "        newq : `~astropy.units.Quantity`\r\n"]
[100.556, "o", "            A new object equal to this quantity with units decomposed.\r\n"]
[100.566, "o", "\r\n"]
[100.576, "o", "        \"\"\"\r\n"]
[100.586, "o", "        new_unit = self.unit.decompose(bases=bases)\r\n"]
[100.596, "o", "\r\n"]
[100.606, "o", "        # Be careful here because self.value usually is a view of self;\r\n"]
[100.616, "o", "        # be sure that the original value is not being modified.\r\n"]
[100.626, "o", "        if not allowscaledunits and hasattr(new_unit, \"scale\"):\r\n"]
[100.636, "o", "            new_value = self.value * new_unit.scale\r\n"]
[100.646, "o", "            new_unit = new_unit / new_unit.scale\r\n"]
[100.656, "o", "            return self._new_view(new_value, new_unit)\r\n"]
[100.666, "o", "        else:\r\n"]
[100.676, "o", "            return self._new_view(self.copy(), new_unit)\r\n"]
[100.686, "o", "\r\n"]
[100.696, "o", "    # These functions need to be overridden to take into account the units\r\n"]
[100.706, "o", "    # Array conversion\r\n"]
[100.716, "o", "    # https://numpy.org/doc/stable/reference/arrays.ndarray.html#array-conversion\r\n"]
[100.726, "o", "\r\n"]
[100.736, "o", "    def item(self, *args):\r\n"]
[100.746, "o", "        \"\"\"Copy an element of an array to a scalar Quantity and return it.\r\n"]
[100.756, "o", "\r\n"]
[100.766, "o", "        Like :meth:`~numpy.ndarray.item` except that it always\r\n"]
[100.776, "o", "        returns a `Quantity`, not a Python scalar.\r\n"]
[100.786, "o", "\r\n"]
[100.796, "o", "        \"\"\"\r\n"]
[100.806, "o", "        return self._new_view(super().item(*args))\r\n"]
[100.816, "o", "\r\n"]
[100.826, "o", "    def tolist(self):\r\n"]
[100.836, "o", "        raise NotImplementedError(\r\n"]
[100.846, "o", "            \"cannot make a list of Quantities. Get list of values with\"\r\n"]
[100.856, "o", "            \" q.value.tolist().\"\r\n"]
[100.866, "o", "        )\r\n"]
[100.876, "o", "\r\n"]
[100.886, "o", "    def _to_own_unit(self, value, check_precision=True, *, unit=None):\r\n"]
[100.896, "o", "        \"\"\"Convert value to one's own unit (or that given).\r\n"]
[100.906, "o", "\r\n"]
[100.916, "o", "        Here, non-quantities are treated as dimensionless, and care is taken\r\n"]
[100.926, "o", "        for values of 0, infinity or nan, which are allowed to have any unit.\r\n"]
[100.936, "o", "\r\n"]
[100.946, "o", "        Parameters\r\n"]
[100.956, "o", "        ----------\r\n"]
[100.966, "o", "        value : anything convertible to `~astropy.units.Quantity`\r\n"]
[100.976, "o", "            The value to be converted to the requested unit.\r\n"]
[100.986, "o", "        check_precision : bool\r\n"]
[100.996, "o", "            Whether to forbid conversion of float to integer if that changes\r\n"]
[101.006, "o", "            the input number.  Default: `True`.\r\n"]
[101.016, "o", "        unit : `~astropy.units.Unit` or None\r\n"]
[101.026, "o", "            The unit to convert to.  By default, the unit of ``self``.\r\n"]
[101.036, "o", "\r\n"]
[101.046, "o", "        Returns\r\n"]
[101.056, "o", "        -------\r\n"]
[101.066, "o", "        value : number or `~numpy.ndarray`\r\n"]
[101.076, "o", "            In the requested units.\r\n"]
[101.086, "o", "\r\n"]
[101.096, "o", "        \"\"\"\r\n"]
[101.106, "o", "        if unit is None:\r\n"]
[101.116, "o", "            unit = self.unit\r\n"]
[101.126, "o", "        try:\r\n"]
[101.136, "o", "            _value = value.to_value(unit)\r\n"]
[101.146, "o", "        except AttributeError:\r\n"]
[101.156, "o", "            # We're not a Quantity.\r\n"]
[101.166, "o", "            # First remove two special cases (with a fast test):\r\n"]
[101.176, "o", "            # 1) Maybe masked printing? MaskedArray with quantities does not\r\n"]
[101.186, "o", "            # work very well, but no reason to break even repr and str.\r\n"]
[101.196, "o", "            # 2) np.ma.masked? useful if we're a MaskedQuantity.\r\n"]
[101.206, "o", "            if value is np.ma.masked or (\r\n"]
[101.216, "o", "                value is np.ma.masked_print_option and self.dtype.kind == \"O\"\r\n"]
[101.226, "o", "            ):\r\n"]
[101.236, "o", "                return value\r\n"]
[101.246, "o", "            # Now, let's try a more general conversion.\r\n"]
[101.256, "o", "            # Plain arrays will be converted to dimensionless in the process,\r\n"]
[101.266, "o", "            # but anything with a unit attribute will use that.\r\n"]
[101.276, "o", "            try:\r\n"]
[101.286, "o", "                as_quantity = Quantity(value)\r\n"]
[101.296, "o", "                _value = as_quantity.to_value(unit)\r\n"]
[101.306, "o", "            except UnitsError:\r\n"]
[101.316, "o", "                # last chance: if this was not something with a unit\r\n"]
[101.326, "o", "                # and is all 0, inf, or nan, we treat it as arbitrary unit.\r\n"]
[101.336, "o", "                if not hasattr(value, \"unit\") and can_have_arbitrary_unit(\r\n"]
[101.346, "o", "                    as_quantity.value\r\n"]
[101.356, "o", "                ):\r\n"]
[101.366, "o", "                    _value = as_quantity.value\r\n"]
[101.376, "o", "                else:\r\n"]
[101.386, "o", "                    raise\r\n"]
[101.396, "o", "\r\n"]
[101.406, "o", "        if self.dtype.kind == \"i\" and check_precision:\r\n"]
[101.416, "o", "            # If, e.g., we are casting float to int, we want to fail if\r\n"]
[101.426, "o", "            # precision is lost, but let things pass if it works.\r\n"]
[101.436, "o", "            _value = np.array(_value, copy=COPY_IF_NEEDED, subok=True)\r\n"]
[101.446, "o", "            if not np.can_cast(_value.dtype, self.dtype):\r\n"]
[101.456, "o", "                self_dtype_array = np.array(_value, self.dtype, subok=True)\r\n"]
[101.466, "o", "                if not np.all((self_dtype_array == _value) | np.isnan(_value)):\r\n"]
[101.476, "o", "                    raise TypeError(\r\n"]
[101.486, "o", "                        \"cannot convert value type to array type without precision loss\"\r\n"]
[101.496, "o", "                    )\r\n"]
[101.506, "o", "\r\n"]
[101.516, "o", "        # Setting names to ensure things like equality work (note that\r\n"]
[101.526, "o", "        # above will have failed already if units did not match).\r\n"]
[101.536, "o", "        # TODO: is this the best place to do this?\r\n"]
[101.546, "o", "        if _value.dtype.names is not None:\r\n"]
[101.556, "o", "            _value = _value.astype(self.dtype, copy=False)\r\n"]
[101.566, "o", "        return _value\r\n"]
[101.576, "o", "\r\n"]
[101.586, "o", "    if NUMPY_LT_2_0:\r\n"]
[101.596, "o", "\r\n"]
[101.606, "o", "        def itemset(self, *args):\r\n"]
[101.616, "o", "            if len(args) == 0:\r\n"]
[101.626, "o", "                raise ValueError(\"itemset must have at least one argument\")\r\n"]
[101.636, "o", "\r\n"]
[101.646, "o", "            self.view(np.ndarray).itemset(*(args[:-1] + (self._to_own_unit(args[-1]),)))\r\n"]
[101.656, "o", "\r\n"]
[101.666, "o", "    def tostring(self, order=\"C\"):\r\n"]
[101.676, "o", "        \"\"\"Not implemented, use ``.value.tostring()`` instead.\"\"\"\r\n"]
[101.686, "o", "        raise NotImplementedError(\r\n"]
[101.696, "o", "            \"cannot write Quantities to string.  Write array with\"\r\n"]
[101.706, "o", "            \" q.value.tostring(...).\"\r\n"]
[101.716, "o", "        )\r\n"]
[101.726, "o", "\r\n"]
[101.736, "o", "    def tobytes(self, order=\"C\"):\r\n"]
[101.746, "o", "        \"\"\"Not implemented, use ``.value.tobytes()`` instead.\"\"\"\r\n"]
[101.756, "o", "        raise NotImplementedError(\r\n"]
[101.766, "o", "            \"cannot write Quantities to bytes.  Write array with q.value.tobytes(...).\"\r\n"]
[101.776, "o", "        )\r\n"]
[101.786, "o", "\r\n"]
[101.796, "o", "    def tofile(self, fid, sep=\"\", format=\"%s\"):\r\n"]
[101.806, "o", "        \"\"\"Not implemented, use ``.value.tofile()`` instead.\"\"\"\r\n"]
[101.816, "o", "        raise NotImplementedError(\r\n"]
[101.826, "o", "            \"cannot write Quantities to file.  Write array with q.value.tofile(...)\"\r\n"]
[101.836, "o", "        )\r\n"]
[101.846, "o", "\r\n"]
[101.856, "o", "    def dump(self, file):\r\n"]
[101.866, "o", "        \"\"\"Not implemented, use ``.value.dump()`` instead.\"\"\"\r\n"]
[101.876, "o", "        raise NotImplementedError(\r\n"]
[101.886, "o", "            \"cannot dump Quantities to file.  Write array with q.value.dump()\"\r\n"]
[101.896, "o", "        )\r\n"]
[101.906, "o", "\r\n"]
[101.916, "o", "    def dumps(self):\r\n"]
[101.926, "o", "        \"\"\"Not implemented, use ``.value.dumps()`` instead.\"\"\"\r\n"]
[101.936, "o", "        raise NotImplementedError(\r\n"]
[101.946, "o", "            \"cannot dump Quantities to string.  Write array with q.value.dumps()\"\r\n"]
[101.956, "o", "        )\r\n"]
[101.966, "o", "\r\n"]
[101.976, "o", "    # astype, byteswap, copy, view, getfield, setflags OK as is\r\n"]
[101.986, "o", "\r\n"]
[101.996, "o", "    def fill(self, value):\r\n"]
[102.006, "o", "        self.view(np.ndarray).fill(self._to_own_unit(value))\r\n"]
[102.016, "o", "\r\n"]
[102.026, "o", "    # Shape manipulation: resize cannot be done (does not own data), but\r\n"]
[102.036, "o", "    # shape, transpose, swapaxes, flatten, ravel, squeeze all OK.  Only\r\n"]
[102.046, "o", "    # the flat iterator needs to be overwritten, otherwise single items are\r\n"]
[102.056, "o", "    # returned as numbers.\r\n"]
[102.066, "o", "    @property\r\n"]
[102.076, "o", "    def flat(self):\r\n"]
[102.086, "o", "        \"\"\"A 1-D iterator over the Quantity array.\r\n"]
[102.096, "o", "\r\n"]
[102.106, "o", "        This returns a ``QuantityIterator`` instance, which behaves the same\r\n"]
[102.116, "o", "        as the `~numpy.flatiter` instance returned by `~numpy.ndarray.flat`,\r\n"]
[102.126, "o", "        and is similar to, but not a subclass of, Python's built-in iterator\r\n"]
[102.136, "o", "        object.\r\n"]
[102.146, "o", "        \"\"\"\r\n"]
[102.156, "o", "        return QuantityIterator(self)\r\n"]
[102.166, "o", "\r\n"]
[102.176, "o", "    @flat.setter\r\n"]
[102.186, "o", "    def flat(self, value):\r\n"]
[102.196, "o", "        y = self.ravel()\r\n"]
[102.206, "o", "        y[:] = value\r\n"]
[102.216, "o", "\r\n"]
[102.226, "o", "    # Item selection and manipulation\r\n"]
[102.236, "o", "    # repeat, sort, compress, diagonal OK\r\n"]
[102.246, "o", "    def take(self, indices, axis=None, out=None, mode=\"raise\"):\r\n"]
[102.256, "o", "        out = super().take(indices, axis=axis, out=out, mode=mode)\r\n"]
[102.266, "o", "        # For single elements, ndarray.take returns scalars; these\r\n"]
[102.276, "o", "        # need a new view as a Quantity.\r\n"]
[102.286, "o", "        if type(out) is not type(self):\r\n"]
[102.296, "o", "            out = self._new_view(out)\r\n"]
[102.306, "o", "        return out\r\n"]
[102.316, "o", "\r\n"]
[102.326, "o", "    def put(self, indices, values, mode=\"raise\"):\r\n"]
[102.336, "o", "        self.view(np.ndarray).put(indices, self._to_own_unit(values), mode)\r\n"]
[102.346, "o", "\r\n"]
[102.356, "o", "    def choose(self, choices, out=None, mode=\"raise\"):\r\n"]
[102.366, "o", "        raise NotImplementedError(\r\n"]
[102.376, "o", "            \"cannot choose based on quantity.  Choose using array with\"\r\n"]
[102.386, "o", "            \" q.value.choose(...)\"\r\n"]
[102.396, "o", "        )\r\n"]
[102.406, "o", "\r\n"]
[102.416, "o", "    # ensure we do not return indices as quantities\r\n"]
[102.426, "o", "    if NUMPY_LT_2_0:\r\n"]
[102.436, "o", "\r\n"]
[102.446, "o", "        def argsort(self, axis=-1, kind=None, order=None):\r\n"]
[102.456, "o", "            return self.view(np.ndarray).argsort(axis=axis, kind=kind, order=order)\r\n"]
[102.466, "o", "\r\n"]
[102.476, "o", "    else:\r\n"]
[102.486, "o", "\r\n"]
[102.496, "o", "        def argsort(self, axis=-1, kind=None, order=None, *, stable=None):\r\n"]
[102.506, "o", "            return self.view(np.ndarray).argsort(\r\n"]
[102.516, "o", "                axis=axis, kind=kind, order=order, stable=stable\r\n"]
[102.526, "o", "            )\r\n"]
[102.536, "o", "\r\n"]
[102.546, "o", "    def searchsorted(self, v, *args, **kwargs):\r\n"]
[102.556, "o", "        return np.searchsorted(\r\n"]
[102.566, "o", "            np.array(self), self._to_own_unit(v, check_precision=False), *args, **kwargs\r\n"]
[102.576, "o", "        )  # avoid numpy 1.6 problem\r\n"]
[102.586, "o", "\r\n"]
[102.596, "o", "    def argmax(self, axis=None, out=None, *, keepdims=False):\r\n"]
[102.606, "o", "        return self.view(np.ndarray).argmax(axis=axis, out=out, keepdims=keepdims)\r\n"]
[102.616, "o", "\r\n"]
[102.626, "o", "    def argmin(self, axis=None, out=None, *, keepdims=False):\r\n"]
[102.636, "o", "        return self.view(np.ndarray).argmin(axis=axis, out=out, keepdims=keepdims)\r\n"]
[102.646, "o", "\r\n"]
[102.656, "o", "    def __array_function__(self, function, types, args, kwargs):\r\n"]
[102.666, "o", "        \"\"\"Wrap numpy functions, taking care of units.\r\n"]
[102.676, "o", "\r\n"]
[102.686, "o", "        Parameters\r\n"]
[102.696, "o", "        ----------\r\n"]
[102.706, "o", "        function : callable\r\n"]
[102.716, "o", "            Numpy function to wrap\r\n"]
[102.726, "o", "        types : iterable of classes\r\n"]
[102.736, "o", "            Classes that provide an ``__array_function__`` override. Can\r\n"]
[102.746, "o", "            in principle be used to interact with other classes. Below,\r\n"]
[102.756, "o", "            mostly passed on to `~numpy.ndarray`, which can only interact\r\n"]
[102.766, "o", "            with subclasses.\r\n"]
[102.776, "o", "        args : tuple\r\n"]
[102.786, "o", "            Positional arguments provided in the function call.\r\n"]
[102.796, "o", "        kwargs : dict\r\n"]
[102.806, "o", "            Keyword arguments provided in the function call.\r\n"]
[102.816, "o", "\r\n"]
[102.826, "o", "        Returns\r\n"]
[102.836, "o", "        -------\r\n"]
[102.846, "o", "        result: `~astropy.units.Quantity`, `~numpy.ndarray`\r\n"]
[102.856, "o", "            As appropriate for the function.  If the function is not\r\n"]
[102.866, "o", "            supported, `NotImplemented` is returned, which will lead to\r\n"]
[102.876, "o", "            a `TypeError` unless another argument overrode the function.\r\n"]
[102.886, "o", "\r\n"]
[102.896, "o", "        Raises\r\n"]
[102.906, "o", "        ------\r\n"]
[102.916, "o", "        ~astropy.units.UnitsError\r\n"]
[102.926, "o", "            If operands have incompatible units.\r\n"]
[102.936, "o", "        \"\"\"\r\n"]
[102.946, "o", "        # A function should be in one of the following sets or dicts:\r\n"]
[102.956, "o", "        # 1. SUBCLASS_SAFE_FUNCTIONS (set), if the numpy implementation\r\n"]
[102.966, "o", "        #    supports Quantity; we pass on to ndarray.__array_function__.\r\n"]
[102.976, "o", "        # 2. FUNCTION_HELPERS (dict), if the numpy implementation is usable\r\n"]
[102.986, "o", "        #    after converting quantities to arrays with suitable units,\r\n"]
[102.996, "o", "        #    and possibly setting units on the result.\r\n"]
[103.006, "o", "        # 3. DISPATCHED_FUNCTIONS (dict), if the function makes sense but\r\n"]
[103.016, "o", "        #    requires a Quantity-specific implementation.\r\n"]
[103.026, "o", "        # 4. UNSUPPORTED_FUNCTIONS (set), if the function does not make sense.\r\n"]
[103.036, "o", "        # For now, since we may not yet have complete coverage, if a\r\n"]
[103.046, "o", "        # function is in none of the above, we simply call the numpy\r\n"]
[103.056, "o", "        # implementation.\r\n"]
[103.066, "o", "        if function in SUBCLASS_SAFE_FUNCTIONS:\r\n"]
[103.076, "o", "            return super().__array_function__(function, types, args, kwargs)\r\n"]
[103.086, "o", "\r\n"]
[103.096, "o", "        elif function in FUNCTION_HELPERS:\r\n"]
[103.106, "o", "            function_helper = FUNCTION_HELPERS[function]\r\n"]
[103.116, "o", "            try:\r\n"]
[103.126, "o", "                args, kwargs, unit, out = function_helper(*args, **kwargs)\r\n"]
[103.136, "o", "            except NotImplementedError:\r\n"]
[103.146, "o", "                return self._not_implemented_or_raise(function, types)\r\n"]
[103.156, "o", "\r\n"]
[103.166, "o", "            result = super().__array_function__(function, types, args, kwargs)\r\n"]
[103.176, "o", "            # Fall through to return section\r\n"]
[103.186, "o", "\r\n"]
[103.196, "o", "        elif function in DISPATCHED_FUNCTIONS:\r\n"]
[103.206, "o", "            dispatched_function = DISPATCHED_FUNCTIONS[function]\r\n"]
[103.216, "o", "            try:\r\n"]
[103.226, "o", "                result, unit, out = dispatched_function(*args, **kwargs)\r\n"]
[103.236, "o", "            except NotImplementedError:\r\n"]
[103.246, "o", "                return self._not_implemented_or_raise(function, types)\r\n"]
[103.256, "o", "\r\n"]
[103.266, "o", "            # Fall through to return section\r\n"]
[103.276, "o", "\r\n"]
[103.286, "o", "        elif function in UNSUPPORTED_FUNCTIONS:\r\n"]
[103.296, "o", "            return NotImplemented\r\n"]
[103.306, "o", "\r\n"]
[103.316, "o", "        else:\r\n"]
[103.326, "o", "            warnings.warn(\r\n"]
[103.336, "o", "                f\"function '{function.__name__}' is not known to astropy's Quantity.\"\r\n"]
[103.346, "o", "                \" Will run it anyway, hoping it will treat ndarray subclasses\"\r\n"]
[103.356, "o", "                \" correctly. Please raise an issue at\"\r\n"]
[103.366, "o", "                \" https://github.com/astropy/astropy/issues.\",\r\n"]
[103.376, "o", "                AstropyWarning,\r\n"]
[103.386, "o", "            )\r\n"]
[103.396, "o", "            return super().__array_function__(function, types, args, kwargs)\r\n"]
[103.406, "o", "\r\n"]
[103.416, "o", "        # If unit is None, a plain array is expected (e.g., boolean), which\r\n"]
[103.426, "o", "        # means we're done.\r\n"]
[103.436, "o", "        # We're also done if the result was NotImplemented, which can happen\r\n"]
[103.446, "o", "        # if other inputs/outputs override __array_function__;\r\n"]
[103.456, "o", "        # hopefully, they can then deal with us.\r\n"]
[103.466, "o", "        if unit is None or result is NotImplemented:\r\n"]
[103.476, "o", "            return result\r\n"]
[103.486, "o", "\r\n"]
[103.496, "o", "        return self._result_as_quantity(result, unit, out=out)\r\n"]
[103.506, "o", "\r\n"]
[103.516, "o", "    def _not_implemented_or_raise(self, function, types):\r\n"]
[103.526, "o", "        # Our function helper or dispatcher found that the function does not\r\n"]
[103.536, "o", "        # work with Quantity.  In principle, there may be another class that\r\n"]
[103.546, "o", "        # knows what to do with us, for which we should return NotImplemented.\r\n"]
[103.556, "o", "        # But if there is ndarray (or a non-Quantity subclass of it) around,\r\n"]
[103.566, "o", "        # it quite likely coerces, so we should just break.\r\n"]
[103.576, "o", "        if any(\r\n"]
[103.586, "o", "            issubclass(t, np.ndarray) and not issubclass(t, Quantity) for t in types\r\n"]
[103.596, "o", "        ):\r\n"]
[103.606, "o", "            raise TypeError(\r\n"]
[103.616, "o", "                f\"the Quantity implementation cannot handle {function} \"\r\n"]
[103.626, "o", "                \"with the given arguments.\"\r\n"]
[103.636, "o", "            ) from None\r\n"]
[103.646, "o", "        else:\r\n"]
[103.656, "o", "            return NotImplemented\r\n"]
[103.666, "o", "\r\n"]
[103.676, "o", "    # Calculation -- override ndarray methods to take into account units.\r\n"]
[103.686, "o", "    # We use the corresponding numpy functions to evaluate the results, since\r\n"]
[103.696, "o", "    # the methods do not always allow calling with keyword arguments.\r\n"]
[103.706, "o", "    # For instance, np.array([0.,2.]).clip(a_min=0., a_max=1.) gives\r\n"]
[103.716, "o", "    # TypeError: 'a_max' is an invalid keyword argument for this function.\r\n"]
[103.726, "o", "    def _wrap_function(self, function, *args, unit=None, out=None, **kwargs):\r\n"]
[103.736, "o", "        \"\"\"Wrap a numpy function that processes self, returning a Quantity.\r\n"]
[103.746, "o", "\r\n"]
[103.756, "o", "        Parameters\r\n"]
[103.766, "o", "        ----------\r\n"]
[103.776, "o", "        function : callable\r\n"]
[103.786, "o", "            Numpy function to wrap.\r\n"]
[103.796, "o", "        args : positional arguments\r\n"]
[103.806, "o", "            Any positional arguments to the function beyond the first argument\r\n"]
[103.816, "o", "            (which will be set to ``self``).\r\n"]
[103.826, "o", "        kwargs : keyword arguments\r\n"]
[103.836, "o", "            Keyword arguments to the function.\r\n"]
[103.846, "o", "\r\n"]
[103.856, "o", "        If present, the following arguments are treated specially:\r\n"]
[103.866, "o", "\r\n"]
[103.876, "o", "        unit : `~astropy.units.Unit`\r\n"]
[103.886, "o", "            Unit of the output result.  If not given, the unit of ``self``.\r\n"]
[103.896, "o", "        out : `~astropy.units.Quantity`\r\n"]
[103.906, "o", "            A Quantity instance in which to store the output.\r\n"]
[103.916, "o", "\r\n"]
[103.926, "o", "        Notes\r\n"]
[103.936, "o", "        -----\r\n"]
[103.946, "o", "        Output should always be assigned via a keyword argument, otherwise\r\n"]
[103.956, "o", "        no proper account of the unit is taken.\r\n"]
[103.966, "o", "\r\n"]
[103.976, "o", "        Returns\r\n"]
[103.986, "o", "        -------\r\n"]
[103.996, "o", "        out : `~astropy.units.Quantity`\r\n"]
[104.006, "o", "            Result of the function call, with the unit set properly.\r\n"]
[104.016, "o", "        \"\"\"\r\n"]
[104.026, "o", "        if unit is None:\r\n"]
[104.036, "o", "            unit = self.unit\r\n"]
[104.046, "o", "        # Ensure we don't loop back by turning any Quantity into array views.\r\n"]
[104.056, "o", "        args = (self.value,) + tuple(\r\n"]
[104.066, "o", "            (arg.value if isinstance(arg, Quantity) else arg) for arg in args\r\n"]
[104.076, "o", "        )\r\n"]
[104.086, "o", "        if out is not None:\r\n"]
[104.096, "o", "            # If pre-allocated output is used, check it is suitable.\r\n"]
[104.106, "o", "            # This also returns array view, to ensure we don't loop back.\r\n"]
[104.116, "o", "            arrays = tuple(arg for arg in args if isinstance(arg, np.ndarray))\r\n"]
[104.126, "o", "            kwargs[\"out\"] = check_output(out, unit, arrays, function=function)\r\n"]
[104.136, "o", "        # Apply the function and turn it back into a Quantity.\r\n"]
[104.146, "o", "        result = function(*args, **kwargs)\r\n"]
[104.156, "o", "        return self._result_as_quantity(result, unit, out)\r\n"]
[104.166, "o", "\r\n"]
[104.176, "o", "    def trace(self, offset=0, axis1=0, axis2=1, dtype=None, out=None):\r\n"]
[104.186, "o", "        return self._wrap_function(np.trace, offset, axis1, axis2, dtype, out=out)\r\n"]
[104.196, "o", "\r\n"]
[104.206, "o", "    def var(\r\n"]
[104.216, "o", "        self, axis=None, dtype=None, out=None, ddof=0, keepdims=False, *, where=True\r\n"]
[104.226, "o", "    ):\r\n"]
[104.236, "o", "        return self._wrap_function(\r\n"]
[104.246, "o", "            np.var,\r\n"]
[104.256, "o", "            axis,\r\n"]
[104.266, "o", "            dtype,\r\n"]
[104.276, "o", "            out=out,\r\n"]
[104.286, "o", "            ddof=ddof,\r\n"]
[104.296, "o", "            keepdims=keepdims,\r\n"]
[104.306, "o", "            where=where,\r\n"]
[104.316, "o", "            unit=self.unit**2,\r\n"]
[104.326, "o", "        )\r\n"]
[104.336, "o", "\r\n"]
[104.346, "o", "    def std(\r\n"]
[104.356, "o", "        self, axis=None, dtype=None, out=None, ddof=0, keepdims=False, *, where=True\r\n"]
[104.366, "o", "    ):\r\n"]
[104.376, "o", "        return self._wrap_function(\r\n"]
[104.386, "o", "            np.std, axis, dtype, out=out, ddof=ddof, keepdims=keepdims, where=where\r\n"]
[104.396, "o", "        )\r\n"]
[104.406, "o", "\r\n"]
[104.416, "o", "    def mean(self, axis=None, dtype=None, out=None, keepdims=False, *, where=True):\r\n"]
[104.426, "o", "        return self._wrap_function(\r\n"]
[104.436, "o", "            np.mean, axis, dtype, out=out, keepdims=keepdims, where=where\r\n"]
[104.446, "o", "        )\r\n"]
[104.456, "o", "\r\n"]
[104.466, "o", "    def round(self, decimals=0, out=None):\r\n"]
[104.476, "o", "        return self._wrap_function(np.round, decimals, out=out)\r\n"]
[104.486, "o", "\r\n"]
[104.496, "o", "    def dot(self, b, out=None):\r\n"]
[104.506, "o", "        result_unit = self.unit * getattr(b, \"unit\", dimensionless_unscaled)\r\n"]
[104.516, "o", "        return self._wrap_function(np.dot, b, out=out, unit=result_unit)\r\n"]
[104.526, "o", "\r\n"]
[104.536, "o", "    # Calculation: override methods that do not make sense.\r\n"]
[104.546, "o", "\r\n"]
[104.556, "o", "    def all(self, axis=None, out=None):\r\n"]
[104.566, "o", "        raise TypeError(\r\n"]
[104.576, "o", "            \"cannot evaluate truth value of quantities. \"\r\n"]
[104.586, "o", "            \"Evaluate array with q.value.all(...)\"\r\n"]
[104.596, "o", "        )\r\n"]
[104.606, "o", "\r\n"]
[104.616, "o", "    def any(self, axis=None, out=None):\r\n"]
[104.626, "o", "        raise TypeError(\r\n"]
[104.636, "o", "            \"cannot evaluate truth value of quantities. \"\r\n"]
[104.646, "o", "            \"Evaluate array with q.value.any(...)\"\r\n"]
[104.656, "o", "        )\r\n"]
[104.666, "o", "\r\n"]
[104.676, "o", "    # Calculation: numpy functions that can be overridden with methods.\r\n"]
[104.686, "o", "\r\n"]
[104.696, "o", "    def diff(self, n=1, axis=-1):\r\n"]
[104.706, "o", "        return self._wrap_function(np.diff, n, axis)\r\n"]
[104.716, "o", "\r\n"]
[104.726, "o", "    def ediff1d(self, to_end=None, to_begin=None):\r\n"]
[104.736, "o", "        return self._wrap_function(np.ediff1d, to_end, to_begin)\r\n"]
[104.746, "o", "\r\n"]
[104.756, "o", "    def insert(self, obj, values, axis=None):\r\n"]
[104.766, "o", "        \"\"\"\r\n"]
[104.776, "o", "        Insert values along the given axis before the given indices and return\r\n"]
[104.786, "o", "        a new `~astropy.units.Quantity` object.\r\n"]
[104.796, "o", "\r\n"]
[104.806, "o", "        This is a thin wrapper around the `numpy.insert` function.\r\n"]
[104.816, "o", "\r\n"]
[104.826, "o", "        Parameters\r\n"]
[104.836, "o", "        ----------\r\n"]
[104.846, "o", "        obj : int, slice or sequence of int\r\n"]
[104.856, "o", "            Object that defines the index or indices before which ``values`` is\r\n"]
[104.866, "o", "            inserted.\r\n"]
[104.876, "o", "        values : array-like\r\n"]
[104.886, "o", "            Values to insert.  If the type of ``values`` is different\r\n"]
[104.896, "o", "            from that of quantity, ``values`` is converted to the matching type.\r\n"]
[104.906, "o", "            ``values`` should be shaped so that it can be broadcast appropriately\r\n"]
[104.916, "o", "            The unit of ``values`` must be consistent with this quantity.\r\n"]
[104.926, "o", "        axis : int, optional\r\n"]
[104.936, "o", "            Axis along which to insert ``values``.  If ``axis`` is None then\r\n"]
[105.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[105.002, "i", "sed -n '2400,3200p' astropy/units/quantity.py\r"]
[105.004, "o", "sed -n '2400,3200p' astropy/units/quantity.py\r\n"]
[105.006, "o", "\u001b[?2004l\r\n"]
[110.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[110.002, "i", "cat asv.ci.conf.json\r"]
[110.004, "o", "cat asv.ci.conf.json\r\n"]
[110.3356, "o", "\u001b[?2004l\r\n"]
[110.6652, "o", " {\r\n"]
[110.9948, "o", "   \"version\": 1,\r\n"]
[111.3244, "o", "   \"project\": \"astropy\",\r\n"]
[111.654, "o", "   \"project_url\": \"http://www.astropy.org/\",\r\n"]
[111.9836, "o", "   \"repo\": \".\",\r\n"]
[112.3132, "o", "   \"install_command\": [\r\n"]
[112.6428, "o", "     \"pip install . matplotlib scipy\"\r\n"]
[112.9724, "o", "   ],\r\n"]
[113.302, "o", "   \"branches\": [\"main\"],\r\n"]
[113.6316, "o", "   \"show_commit_url\": \"http://github.com/astropy/astropy/commit/\",\r\n"]
[113.9612, "o", "   \"pythons\": [\"3.11\"],\r\n"]
[114.2908, "o", "   \"environment_type\": \"virtualenv\",\r\n"]
[114.6204, "o", "   \"benchmark_dir\": \"astropy-benchmarks/benchmarks\"\r\n"]
[115.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[115.002, "i", "sed -n '1,260p' astropy-benchmarks/benchmarks/units.py\r"]
[115.004, "o", "sed -n '1,260p' astropy-benchmarks/benchmarks/units.py\r\n"]
[115.026861, "o", "\u001b[?2004l\r\n"]
[115.047722, "o", "import copy\r\n"]
[115.068582, "o", "\r\n"]
[115.089443, "o", "import numpy as np\r\n"]
[115.110304, "o", "from astropy import units as u\r\n"]
[115.131165, "o", "\r\n"]
[115.152025, "o", "\r\n"]
[115.172886, "o", "# Unit tests\r\n"]
[115.193747, "o", "\r\n"]
[115.214608, "o", "\r\n"]
[115.235468, "o", "def time_unit_compose():\r\n"]
[115.256329, "o", "    u.Ry.compose()\r\n"]
[115.27719, "o", "\r\n"]
[115.298051, "o", "\r\n"]
[115.318911, "o", "def time_unit_to():\r\n"]
[115.339772, "o", "    u.m.to(u.pc)\r\n"]
[115.360633, "o", "\r\n"]
[115.381494, "o", "\r\n"]
[115.402354, "o", "def time_unit_parse():\r\n"]
[115.423215, "o", "    u.Unit(\"1e-07 kg m2 / s2\")\r\n"]
[115.444076, "o", "\r\n"]
[115.464937, "o", "\r\n"]
[115.485797, "o", "def time_simple_unit_parse():\r\n"]
[115.506658, "o", "    u.Unit(\"1 d\")\r\n"]
[115.527519, "o", "\r\n"]
[115.54838, "o", "\r\n"]
[115.569241, "o", "def time_very_simple_unit_parse():\r\n"]
[115.590101, "o", "    u.Unit(\"d\")\r\n"]
[115.610962, "o", "\r\n"]
[115.631823, "o", "\r\n"]
[115.652684, "o", "def mem_unit():\r\n"]
[115.673544, "o", "    return u.erg\r\n"]
[115.694405, "o", "\r\n"]
[115.715266, "o", "\r\n"]
[115.736127, "o", "def time_compose_to_bases():\r\n"]
[115.756987, "o", "    x = copy.copy(u.Ry)\r\n"]
[115.777848, "o", "    x.cgs\r\n"]
[115.798709, "o", "\r\n"]
[115.81957, "o", "\r\n"]
[115.84043, "o", "def time_compose_complex():\r\n"]
[115.861291, "o", "    # Composing a complex unit can be very inefficient\r\n"]
[115.882152, "o", "    (u.kg / u.s**3 * u.au**2.5 / u.yr**0.5 / u.sr**2).compose()\r\n"]
[115.903013, "o", "\r\n"]
[115.923873, "o", "\r\n"]
[115.944734, "o", "# Quantity tests\r\n"]
[115.965595, "o", "\r\n"]
[115.986456, "o", "a = np.arange(100000.0)\r\n"]
[116.007316, "o", "b1 = [1.0, 2.0, 3.0]\r\n"]
[116.028177, "o", "b2 = np.asarray(b1)\r\n"]
[116.049038, "o", "q0 = u.Quantity(1.0, u.s)\r\n"]
[116.069899, "o", "q1 = u.Quantity(a, u.m)\r\n"]
[116.090759, "o", "q2 = u.Quantity(a[:10000], u.deg)\r\n"]
[116.11162, "o", "\r\n"]
[116.132481, "o", "\r\n"]
[116.153342, "o", "def time_quantity_creation():\r\n"]
[116.174203, "o", "    u.Quantity(a, u.m)\r\n"]
[116.195063, "o", "\r\n"]
[116.215924, "o", "\r\n"]
[116.236785, "o", "def time_quantity_creation_nocopy():\r\n"]
[116.257646, "o", "    u.Quantity(a, u.m, copy=False)\r\n"]
[116.278506, "o", "\r\n"]
[116.299367, "o", "\r\n"]
[116.320228, "o", "def time_quantity_view():\r\n"]
[116.341089, "o", "    q1.view(u.Quantity)\r\n"]
[116.361949, "o", "\r\n"]
[116.38281, "o", "\r\n"]
[116.403671, "o", "def time_quantity_init_scalar():\r\n"]
[116.424532, "o", "    3.0 * u.m / u.s\r\n"]
[116.445392, "o", "\r\n"]
[116.466253, "o", "\r\n"]
[116.487114, "o", "def time_quantity_init_array():\r\n"]
[116.507975, "o", "    a * u.m / u.s\r\n"]
[116.528835, "o", "\r\n"]
[116.549696, "o", "\r\n"]
[116.570557, "o", "def time_quantity_init_small_list():\r\n"]
[116.591418, "o", "    \"\"\"\r\n"]
[116.612278, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[116.633139, "o", "    for small list.\r\n"]
[116.654, "o", "    \"\"\"\r\n"]
[116.674861, "o", "    b1 * u.m / u.s\r\n"]
[116.695722, "o", "\r\n"]
[116.716582, "o", "\r\n"]
[116.737443, "o", "def time_quantity_init_small_array():\r\n"]
[116.758304, "o", "    \"\"\"\r\n"]
[116.779165, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[116.800025, "o", "    for small array.\r\n"]
[116.820886, "o", "    \"\"\"\r\n"]
[116.841747, "o", "    b2 * u.m / u.s\r\n"]
[116.862608, "o", "\r\n"]
[116.883468, "o", "\r\n"]
[116.904329, "o", "def time_quantity_scalar_conversion():\r\n"]
[116.92519, "o", "    (3.0 * u.m / u.s).to(u.km / u.hour)\r\n"]
[116.946051, "o", "\r\n"]
[116.966911, "o", "\r\n"]
[116.987772, "o", "def time_quantity_array_conversion():\r\n"]
[117.008633, "o", "    (a * u.m / u.s).to(u.km / u.hour)\r\n"]
[117.029494, "o", "\r\n"]
[117.050354, "o", "\r\n"]
[117.071215, "o", "def time_quantity_times_unit():\r\n"]
[117.092076, "o", "    q1 * u.m\r\n"]
[117.112937, "o", "\r\n"]
[117.133797, "o", "\r\n"]
[117.154658, "o", "def time_quantity_times_quantity():\r\n"]
[117.175519, "o", "    q1 * q0\r\n"]
[117.19638, "o", "\r\n"]
[117.217241, "o", "\r\n"]
[117.238101, "o", "def time_quantity_ufunc_sin():\r\n"]
[117.258962, "o", "    np.sin(q2)\r\n"]
[117.279823, "o", "\r\n"]
[117.300684, "o", "\r\n"]
[117.321544, "o", "class TimeQuantityOpSmallArray:\r\n"]
[117.342405, "o", "    \"\"\"\r\n"]
[117.363266, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[117.384127, "o", "    for a small Numpy array.\r\n"]
[117.404987, "o", "    \"\"\"\r\n"]
[117.425848, "o", "\r\n"]
[117.446709, "o", "    def setup(self):\r\n"]
[117.46757, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[117.48843, "o", "        self.data = data * u.g\r\n"]
[117.509291, "o", "        self.out_sq = data * u.g**2\r\n"]
[117.530152, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[117.551013, "o", "\r\n"]
[117.571873, "o", "    def time_quantity_square(self):\r\n"]
[117.592734, "o", "        self.data**2\r\n"]
[117.613595, "o", "\r\n"]
[117.634456, "o", "    def time_quantity_np_square(self):\r\n"]
[117.655316, "o", "        np.power(self.data, 2)\r\n"]
[117.676177, "o", "\r\n"]
[117.697038, "o", "    def time_quantity_np_square_out(self):\r\n"]
[117.717899, "o", "        np.power(self.data, 2, out=self.out_sq)\r\n"]
[117.738759, "o", "\r\n"]
[117.75962, "o", "    def time_quantity_sqrt(self):\r\n"]
[117.780481, "o", "        self.data**0.5\r\n"]
[117.801342, "o", "\r\n"]
[117.822203, "o", "    def time_quantity_np_sqrt(self):\r\n"]
[117.843063, "o", "        np.sqrt(self.data)\r\n"]
[117.863924, "o", "\r\n"]
[117.884785, "o", "    def time_quantity_np_sqrt_out(self):\r\n"]
[117.905646, "o", "        np.sqrt(self.data, out=self.out_sqrt)\r\n"]
[117.926506, "o", "\r\n"]
[117.947367, "o", "\r\n"]
[117.968228, "o", "class TimeQuantityOpLargeArray(TimeQuantityOpSmallArray):\r\n"]
[117.989089, "o", "    \"\"\"\r\n"]
[118.009949, "o", "    Like :class:`TimeQuantityOpSmallArray` but for a large Numpy array.\r\n"]
[118.03081, "o", "    \"\"\"\r\n"]
[118.051671, "o", "\r\n"]
[118.072532, "o", "    def setup(self):\r\n"]
[118.093392, "o", "        data = np.arange(1e6) + 1\r\n"]
[118.114253, "o", "        self.data = data * u.g\r\n"]
[118.135114, "o", "        self.out_sq = data * u.g**2\r\n"]
[118.155975, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[118.176835, "o", "\r\n"]
[118.197696, "o", "\r\n"]
[118.218557, "o", "class TimeQuantityOpSmallArrayDiffUnit:\r\n"]
[118.239418, "o", "    \"\"\"\r\n"]
[118.260278, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[118.281139, "o", "    for small Numpy arrays with different units.\r\n"]
[118.302, "o", "    \"\"\"\r\n"]
[118.322861, "o", "\r\n"]
[118.343722, "o", "    def setup(self):\r\n"]
[118.364582, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[118.385443, "o", "        self.data = data * u.g\r\n"]
[118.406304, "o", "\r\n"]
[118.427165, "o", "        # A different but dimensionally compatible unit\r\n"]
[118.448025, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[118.468886, "o", "\r\n"]
[118.489747, "o", "    def time_quantity_equal(self):\r\n"]
[118.510608, "o", "        # Same as operator.eq\r\n"]
[118.531468, "o", "        self.data == self.data2\r\n"]
[118.552329, "o", "\r\n"]
[118.57319, "o", "    def time_quantity_np_equal(self):\r\n"]
[118.594051, "o", "        np.equal(self.data, self.data2)\r\n"]
[118.614911, "o", "\r\n"]
[118.635772, "o", "    def time_quantity_truediv(self):\r\n"]
[118.656633, "o", "        # Since benchmark is PY3 only, this is always true divide.\r\n"]
[118.677494, "o", "        # Same as operator.truediv\r\n"]
[118.698354, "o", "        self.data / self.data2\r\n"]
[118.719215, "o", "\r\n"]
[118.740076, "o", "    def time_quantity_np_truediv(self):\r\n"]
[118.760937, "o", "        np.true_divide(self.data, self.data2)\r\n"]
[118.781797, "o", "\r\n"]
[118.802658, "o", "    def time_quantity_mul(self):\r\n"]
[118.823519, "o", "        # Same as operator.mul\r\n"]
[118.84438, "o", "        self.data * self.data2\r\n"]
[118.865241, "o", "\r\n"]
[118.886101, "o", "    def time_quantity_np_multiply(self):\r\n"]
[118.906962, "o", "        np.multiply(self.data, self.data2)\r\n"]
[118.927823, "o", "\r\n"]
[118.948684, "o", "    def time_quantity_sub(self):\r\n"]
[118.969544, "o", "        # Same as operator.sub\r\n"]
[118.990405, "o", "        self.data - self.data2\r\n"]
[119.011266, "o", "\r\n"]
[119.032127, "o", "    def time_quantity_np_subtract(self):\r\n"]
[119.052987, "o", "        np.subtract(self.data, self.data2)\r\n"]
[119.073848, "o", "\r\n"]
[119.094709, "o", "    def time_quantity_add(self):\r\n"]
[119.11557, "o", "        # Same as operator.add\r\n"]
[119.13643, "o", "        self.data + self.data2\r\n"]
[119.157291, "o", "\r\n"]
[119.178152, "o", "    def time_quantity_np_add(self):\r\n"]
[119.199013, "o", "        np.add(self.data, self.data2)\r\n"]
[119.219873, "o", "\r\n"]
[119.240734, "o", "\r\n"]
[119.261595, "o", "class TimeQuantityOpSmallArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[119.282456, "o", "    \"\"\"\r\n"]
[119.303316, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[119.324177, "o", "    for small Numpy arrays with same units.\r\n"]
[119.345038, "o", "    \"\"\"\r\n"]
[119.365899, "o", "\r\n"]
[119.386759, "o", "    def setup(self):\r\n"]
[119.40762, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[119.428481, "o", "        self.data = data * u.g\r\n"]
[119.449342, "o", "        self.data2 = self.data.copy()\r\n"]
[119.470203, "o", "\r\n"]
[119.491063, "o", "\r\n"]
[119.511924, "o", "class TimeQuantityOpLargeArrayDiffUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[119.532785, "o", "    \"\"\"\r\n"]
[119.553646, "o", "    Like :class:`TimeQuantityOpSmallArrayDiffUnit` but for large Numpy arrays.\r\n"]
[119.574506, "o", "    \"\"\"\r\n"]
[119.595367, "o", "\r\n"]
[119.616228, "o", "    def setup(self):\r\n"]
[119.637089, "o", "        data = np.arange(1e6) + 1\r\n"]
[119.657949, "o", "        self.data = data * u.g\r\n"]
[119.67881, "o", "\r\n"]
[119.699671, "o", "        # A different but dimensionally compatible unit\r\n"]
[119.720532, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[119.741392, "o", "\r\n"]
[119.762253, "o", "\r\n"]
[119.783114, "o", "class TimeQuantityOpLargeArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[119.803975, "o", "    \"\"\"\r\n"]
[119.824835, "o", "    Like :class:`TimeQuantityOpSmallArraySameUnit` but for large Numpy arrays.\r\n"]
[119.845696, "o", "    \"\"\"\r\n"]
[119.866557, "o", "\r\n"]
[119.887418, "o", "    def setup(self):\r\n"]
[119.908278, "o", "        data = np.arange(1e6) + 1\r\n"]
[119.929139, "o", "        self.data = data * u.g\r\n"]
[120.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[120.002, "i", "asv dev -c asv.ci.conf.json -b \"units.time_quantity_init_small_list|units.time_quantity_creation_nocopy|units.time_\r"]
[120.004, "o", "asv dev -c asv.ci.conf.json -b \"units.time_quantity_init_small_list|units.time_quantity_creation_nocopy|units.time_\r\n"]
[120.9948, "o", "_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view\"\r\n"]
[121.9836, "o", "\u001b[?2004l\r\n"]
[122.9724, "o", "usage: asv [-h] [--verbose] [--config CONFIG] [--version]\r\n"]
[123.9612, "o", "           {help,quickstart,machine,setup,run,continuous,find,rm,publish,preview,profile,update,show,compare,check,gh-pages} ...\r\n"]
[125.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[125.002, "i", "asv profile -c asv.ci.conf.json units.time_quantity_times_unit\r"]
[125.004, "o", "asv profile -c asv.ci.conf.json units.time_quantity_times_unit\r\n"]
[126.242, "o", "\u001b[?2004l\r\n"]
[127.478, "o", "usage: asv [-h] [--verbose] [--config CONFIG] [--version]\r\n"]
[128.714, "o", "           {help,quickstart,machine,setup,run,continuous,find,rm,publish,preview,profile,update,show,compare,check,gh-pages} ...\r\n"]
[130.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[130.002, "i", "sed -n '1,400p' astropy/units/quantity.py\r"]
[130.004, "o", "sed -n '1,400p' astropy/units/quantity.py\r\n"]
[130.018329, "o", "\u001b[?2004l\r\n"]
[130.030658, "o", "# Licensed under a 3-clause BSD style license - see LICENSE.rst\r\n"]
[130.042988, "o", "\"\"\"\r\n"]
[130.055317, "o", "This module defines the `Quantity` object, which represents a number with some\r\n"]
[130.067646, "o", "associated units. `Quantity` objects support operations like ordinary numbers,\r\n"]
[130.079975, "o", "but will deal with unit conversions internally.\r\n"]
[130.092304, "o", "\"\"\"\r\n"]
[130.104633, "o", "\r\n"]
[130.116963, "o", "from __future__ import annotations\r\n"]
[130.129292, "o", "\r\n"]
[130.141621, "o", "import builtins\r\n"]
[130.15395, "o", "import numbers\r\n"]
[130.166279, "o", "import operator\r\n"]
[130.178608, "o", "import re\r\n"]
[130.190938, "o", "import warnings\r\n"]
[130.203267, "o", "from fractions import Fraction\r\n"]
[130.215596, "o", "from typing import TYPE_CHECKING\r\n"]
[130.227925, "o", "\r\n"]
[130.240254, "o", "import numpy as np\r\n"]
[130.252584, "o", "\r\n"]
[130.264913, "o", "from astropy import config as _config\r\n"]
[130.277242, "o", "from astropy.utils.compat.numpycompat import COPY_IF_NEEDED, NUMPY_LT_2_0\r\n"]
[130.289571, "o", "from astropy.utils.data_info import ParentDtypeInfo\r\n"]
[130.3019, "o", "from astropy.utils.exceptions import AstropyWarning\r\n"]
[130.314229, "o", "\r\n"]
[130.326559, "o", "from .core import (\r\n"]
[130.338888, "o", "    Unit,\r\n"]
[130.351217, "o", "    UnitBase,\r\n"]
[130.363546, "o", "    UnitConversionError,\r\n"]
[130.375875, "o", "    UnitsError,\r\n"]
[130.388204, "o", "    UnitTypeError,\r\n"]
[130.400534, "o", "    dimensionless_unscaled,\r\n"]
[130.412863, "o", "    get_current_unit_registry,\r\n"]
[130.425192, "o", ")\r\n"]
[130.437521, "o", "from .format import Base, Latex\r\n"]
[130.44985, "o", "from .quantity_helper import can_have_arbitrary_unit, check_output, converters_and_unit\r\n"]
[130.46218, "o", "from .quantity_helper.function_helpers import (\r\n"]
[130.474509, "o", "    DISPATCHED_FUNCTIONS,\r\n"]
[130.486838, "o", "    FUNCTION_HELPERS,\r\n"]
[130.499167, "o", "    SUBCLASS_SAFE_FUNCTIONS,\r\n"]
[130.511496, "o", "    UNSUPPORTED_FUNCTIONS,\r\n"]
[130.523825, "o", ")\r\n"]
[130.536155, "o", "from .structured import StructuredUnit, _structured_unit_like_dtype\r\n"]
[130.548484, "o", "from .utils import is_effectively_unity\r\n"]
[130.560813, "o", "\r\n"]
[130.573142, "o", "if TYPE_CHECKING:\r\n"]
[130.585471, "o", "    from typing_extensions import Self\r\n"]
[130.5978, "o", "\r\n"]
[130.61013, "o", "    from .typing import QuantityLike\r\n"]
[130.622459, "o", "\r\n"]
[130.634788, "o", "__all__ = [\r\n"]
[130.647117, "o", "    \"Quantity\",\r\n"]
[130.659446, "o", "    \"SpecificTypeQuantity\",\r\n"]
[130.671776, "o", "    \"QuantityInfoBase\",\r\n"]
[130.684105, "o", "    \"QuantityInfo\",\r\n"]
[130.696434, "o", "    \"allclose\",\r\n"]
[130.708763, "o", "    \"isclose\",\r\n"]
[130.721092, "o", "]\r\n"]
[130.733421, "o", "\r\n"]
[130.745751, "o", "\r\n"]
[130.75808, "o", "# We don't want to run doctests in the docstrings we inherit from Numpy\r\n"]
[130.770409, "o", "__doctest_skip__ = [\"Quantity.*\"]\r\n"]
[130.782738, "o", "\r\n"]
[130.795067, "o", "_UNIT_NOT_INITIALISED = \"(Unit not initialised)\"\r\n"]
[130.807397, "o", "_UFUNCS_FILTER_WARNINGS = {np.arcsin, np.arccos, np.arccosh, np.arctanh}\r\n"]
[130.819726, "o", "\r\n"]
[130.832055, "o", "\r\n"]
[130.844384, "o", "class Conf(_config.ConfigNamespace):\r\n"]
[130.856713, "o", "    \"\"\"\r\n"]
[130.869042, "o", "    Configuration parameters for Quantity.\r\n"]
[130.881372, "o", "    \"\"\"\r\n"]
[130.893701, "o", "\r\n"]
[130.90603, "o", "    latex_array_threshold = _config.ConfigItem(\r\n"]
[130.918359, "o", "        100,\r\n"]
[130.930688, "o", "        \"The maximum size an array Quantity can be before its LaTeX \"\r\n"]
[130.943017, "o", "        'representation for IPython gets \"summarized\" (meaning only the first '\r\n"]
[130.955347, "o", "        'and last few elements are shown with \"...\" between). Setting this to a '\r\n"]
[130.967676, "o", "        \"negative number means that the value will instead be whatever numpy \"\r\n"]
[130.980005, "o", "        \"gets from get_printoptions.\",\r\n"]
[130.992334, "o", "    )\r\n"]
[131.004663, "o", "\r\n"]
[131.016993, "o", "\r\n"]
[131.029322, "o", "conf = Conf()\r\n"]
[131.041651, "o", "\r\n"]
[131.05398, "o", "\r\n"]
[131.066309, "o", "class QuantityIterator:\r\n"]
[131.078638, "o", "    \"\"\"\r\n"]
[131.090968, "o", "    Flat iterator object to iterate over Quantities.\r\n"]
[131.103297, "o", "\r\n"]
[131.115626, "o", "    A `QuantityIterator` iterator is returned by ``q.flat`` for any Quantity\r\n"]
[131.127955, "o", "    ``q``.  It allows iterating over the array as if it were a 1-D array,\r\n"]
[131.140284, "o", "    either in a for-loop or by calling its `next` method.\r\n"]
[131.152613, "o", "\r\n"]
[131.164943, "o", "    Iteration is done in C-contiguous style, with the last index varying the\r\n"]
[131.177272, "o", "    fastest. The iterator can also be indexed using basic slicing or\r\n"]
[131.189601, "o", "    advanced indexing.\r\n"]
[131.20193, "o", "\r\n"]
[131.214259, "o", "    See Also\r\n"]
[131.226589, "o", "    --------\r\n"]
[131.238918, "o", "    Quantity.flatten : Returns a flattened copy of an array.\r\n"]
[131.251247, "o", "\r\n"]
[131.263576, "o", "    Notes\r\n"]
[131.275905, "o", "    -----\r\n"]
[131.288234, "o", "    `QuantityIterator` is inspired by `~numpy.ma.core.MaskedIterator`.  It\r\n"]
[131.300564, "o", "    is not exported by the `~astropy.units` module.  Instead of\r\n"]
[131.312893, "o", "    instantiating a `QuantityIterator` directly, use `Quantity.flat`.\r\n"]
[131.325222, "o", "    \"\"\"\r\n"]
[131.337551, "o", "\r\n"]
[131.34988, "o", "    def __init__(self, q):\r\n"]
[131.362209, "o", "        self._quantity = q\r\n"]
[131.374539, "o", "        self._dataiter = q.view(np.ndarray).flat\r\n"]
[131.386868, "o", "\r\n"]
[131.399197, "o", "    def __iter__(self):\r\n"]
[131.411526, "o", "        return self\r\n"]
[131.423855, "o", "\r\n"]
[131.436185, "o", "    def __getitem__(self, indx):\r\n"]
[131.448514, "o", "        out = self._dataiter.__getitem__(indx)\r\n"]
[131.460843, "o", "        # For single elements, ndarray.flat.__getitem__ returns scalars; these\r\n"]
[131.473172, "o", "        # need a new view as a Quantity.\r\n"]
[131.485501, "o", "        if isinstance(out, type(self._quantity)):\r\n"]
[131.49783, "o", "            return out\r\n"]
[131.51016, "o", "        else:\r\n"]
[131.522489, "o", "            return self._quantity._new_view(out)\r\n"]
[131.534818, "o", "\r\n"]
[131.547147, "o", "    def __setitem__(self, index, value):\r\n"]
[131.559476, "o", "        self._dataiter[index] = self._quantity._to_own_unit(value)\r\n"]
[131.571805, "o", "\r\n"]
[131.584135, "o", "    def __next__(self):\r\n"]
[131.596464, "o", "        \"\"\"\r\n"]
[131.608793, "o", "        Return the next value, or raise StopIteration.\r\n"]
[131.621122, "o", "        \"\"\"\r\n"]
[131.633451, "o", "        out = next(self._dataiter)\r\n"]
[131.645781, "o", "        # ndarray.flat._dataiter returns scalars, so need a view as a Quantity.\r\n"]
[131.65811, "o", "        return self._quantity._new_view(out)\r\n"]
[131.670439, "o", "\r\n"]
[131.682768, "o", "    next = __next__\r\n"]
[131.695097, "o", "\r\n"]
[131.707426, "o", "    def __len__(self):\r\n"]
[131.719756, "o", "        return len(self._dataiter)\r\n"]
[131.732085, "o", "\r\n"]
[131.744414, "o", "    # Properties and methods to match `numpy.ndarray.flatiter`\r\n"]
[131.756743, "o", "\r\n"]
[131.769072, "o", "    @property\r\n"]
[131.781401, "o", "    def base(self):\r\n"]
[131.793731, "o", "        \"\"\"A reference to the array that is iterated over.\"\"\"\r\n"]
[131.80606, "o", "        return self._quantity\r\n"]
[131.818389, "o", "\r\n"]
[131.830718, "o", "    @property\r\n"]
[131.843047, "o", "    def coords(self):\r\n"]
[131.855377, "o", "        \"\"\"An N-dimensional tuple of current coordinates.\"\"\"\r\n"]
[131.867706, "o", "        return self._dataiter.coords\r\n"]
[131.880035, "o", "\r\n"]
[131.892364, "o", "    @property\r\n"]
[131.904693, "o", "    def index(self):\r\n"]
[131.917022, "o", "        \"\"\"Current flat index into the array.\"\"\"\r\n"]
[131.929352, "o", "        return self._dataiter.index\r\n"]
[131.941681, "o", "\r\n"]
[131.95401, "o", "    def copy(self):\r\n"]
[131.966339, "o", "        \"\"\"Get a copy of the iterator as a 1-D array.\"\"\"\r\n"]
[131.978668, "o", "        return self._quantity.flatten()\r\n"]
[131.990998, "o", "\r\n"]
[132.003327, "o", "\r\n"]
[132.015656, "o", "class QuantityInfoBase(ParentDtypeInfo):\r\n"]
[132.027985, "o", "    # This is on a base class rather than QuantityInfo directly, so that\r\n"]
[132.040314, "o", "    # it can be used for EarthLocationInfo yet make clear that that class\r\n"]
[132.052643, "o", "    # should not be considered a typical Quantity subclass by Table.\r\n"]
[132.064973, "o", "    attrs_from_parent = {\"dtype\", \"unit\"}  # dtype and unit taken from parent\r\n"]
[132.077302, "o", "    _supports_indexing = True\r\n"]
[132.089631, "o", "\r\n"]
[132.10196, "o", "    @staticmethod\r\n"]
[132.114289, "o", "    def default_format(val):\r\n"]
[132.126618, "o", "        return f\"{val.value}\"\r\n"]
[132.138948, "o", "\r\n"]
[132.151277, "o", "    @staticmethod\r\n"]
[132.163606, "o", "    def possible_string_format_functions(format_):\r\n"]
[132.175935, "o", "        \"\"\"Iterate through possible string-derived format functions.\r\n"]
[132.188264, "o", "\r\n"]
[132.200594, "o", "        A string can either be a format specifier for the format built-in,\r\n"]
[132.212923, "o", "        a new-style format string, or an old-style format string.\r\n"]
[132.225252, "o", "\r\n"]
[132.237581, "o", "        This method is overridden in order to suppress printing the unit\r\n"]
[132.24991, "o", "        in each row since it is already at the top in the column header.\r\n"]
[132.262239, "o", "        \"\"\"\r\n"]
[132.274569, "o", "        yield lambda format_, val: format(val.value, format_)\r\n"]
[132.286898, "o", "        yield lambda format_, val: format_.format(val.value)\r\n"]
[132.299227, "o", "        yield lambda format_, val: format_ % val.value\r\n"]
[132.311556, "o", "\r\n"]
[132.323885, "o", "\r\n"]
[132.336214, "o", "class QuantityInfo(QuantityInfoBase):\r\n"]
[132.348544, "o", "    \"\"\"\r\n"]
[132.360873, "o", "    Container for meta information like name, description, format.  This is\r\n"]
[132.373202, "o", "    required when the object is used as a mixin column within a table, but can\r\n"]
[132.385531, "o", "    be used as a general way to store meta information.\r\n"]
[132.39786, "o", "    \"\"\"\r\n"]
[132.41019, "o", "\r\n"]
[132.422519, "o", "    _represent_as_dict_attrs = (\"value\", \"unit\")\r\n"]
[132.434848, "o", "    _construct_from_dict_args = [\"value\"]\r\n"]
[132.447177, "o", "    _represent_as_dict_primary_data = \"value\"\r\n"]
[132.459506, "o", "\r\n"]
[132.471835, "o", "    def new_like(self, cols, length, metadata_conflicts=\"warn\", name=None):\r\n"]
[132.484165, "o", "        \"\"\"\r\n"]
[132.496494, "o", "        Return a new Quantity instance which is consistent with the\r\n"]
[132.508823, "o", "        input ``cols`` and has ``length`` rows.\r\n"]
[132.521152, "o", "\r\n"]
[132.533481, "o", "        This is intended for creating an empty column object whose elements can\r\n"]
[132.54581, "o", "        be set in-place for table operations like join or vstack.\r\n"]
[132.55814, "o", "\r\n"]
[132.570469, "o", "        Parameters\r\n"]
[132.582798, "o", "        ----------\r\n"]
[132.595127, "o", "        cols : list\r\n"]
[132.607456, "o", "            List of input columns\r\n"]
[132.619786, "o", "        length : int\r\n"]
[132.632115, "o", "            Length of the output column object\r\n"]
[132.644444, "o", "        metadata_conflicts : str ('warn'|'error'|'silent')\r\n"]
[132.656773, "o", "            How to handle metadata conflicts\r\n"]
[132.669102, "o", "        name : str\r\n"]
[132.681431, "o", "            Output column name\r\n"]
[132.693761, "o", "\r\n"]
[132.70609, "o", "        Returns\r\n"]
[132.718419, "o", "        -------\r\n"]
[132.730748, "o", "        col : `~astropy.units.Quantity` (or subclass)\r\n"]
[132.743077, "o", "            Empty instance of this class consistent with ``cols``\r\n"]
[132.755406, "o", "\r\n"]
[132.767736, "o", "        \"\"\"\r\n"]
[132.780065, "o", "        # Get merged info attributes like shape, dtype, format, description, etc.\r\n"]
[132.792394, "o", "        attrs = self.merge_cols_attributes(\r\n"]
[132.804723, "o", "            cols, metadata_conflicts, name, (\"meta\", \"format\", \"description\")\r\n"]
[132.817052, "o", "        )\r\n"]
[132.829382, "o", "\r\n"]
[132.841711, "o", "        # Make an empty quantity using the unit of the last one.\r\n"]
[132.85404, "o", "        shape = (length,) + attrs.pop(\"shape\")\r\n"]
[132.866369, "o", "        dtype = attrs.pop(\"dtype\")\r\n"]
[132.878698, "o", "        # Use zeros so we do not get problems for Quantity subclasses such\r\n"]
[132.891027, "o", "        # as Longitude and Latitude, which cannot take arbitrary values.\r\n"]
[132.903357, "o", "        data = np.zeros(shape=shape, dtype=dtype)\r\n"]
[132.915686, "o", "        # Get arguments needed to reconstruct class\r\n"]
[132.928015, "o", "        map = {\r\n"]
[132.940344, "o", "            key: (data if key == \"value\" else getattr(cols[-1], key))\r\n"]
[132.952673, "o", "            for key in self._represent_as_dict_attrs\r\n"]
[132.965002, "o", "        }\r\n"]
[132.977332, "o", "        map[\"copy\"] = COPY_IF_NEEDED\r\n"]
[132.989661, "o", "        out = self._construct_from_dict(map)\r\n"]
[133.00199, "o", "\r\n"]
[133.014319, "o", "        # Set remaining info attributes\r\n"]
[133.026648, "o", "        for attr, value in attrs.items():\r\n"]
[133.038978, "o", "            setattr(out.info, attr, value)\r\n"]
[133.051307, "o", "\r\n"]
[133.063636, "o", "        return out\r\n"]
[133.075965, "o", "\r\n"]
[133.088294, "o", "    def get_sortable_arrays(self):\r\n"]
[133.100623, "o", "        \"\"\"\r\n"]
[133.112953, "o", "        Return a list of arrays which can be lexically sorted to represent\r\n"]
[133.125282, "o", "        the order of the parent column.\r\n"]
[133.137611, "o", "\r\n"]
[133.14994, "o", "        For Quantity this is just the quantity itself.\r\n"]
[133.162269, "o", "\r\n"]
[133.174599, "o", "\r\n"]
[133.186928, "o", "        Returns\r\n"]
[133.199257, "o", "        -------\r\n"]
[133.211586, "o", "        arrays : list of ndarray\r\n"]
[133.223915, "o", "        \"\"\"\r\n"]
[133.236244, "o", "        return [self._parent]\r\n"]
[133.248574, "o", "\r\n"]
[133.260903, "o", "\r\n"]
[133.273232, "o", "class Quantity(np.ndarray):\r\n"]
[133.285561, "o", "    \"\"\"A `~astropy.units.Quantity` represents a number with some associated unit.\r\n"]
[133.29789, "o", "\r\n"]
[133.310219, "o", "    See also: https://docs.astropy.org/en/stable/units/quantity.html\r\n"]
[133.322549, "o", "\r\n"]
[133.334878, "o", "    Parameters\r\n"]
[133.347207, "o", "    ----------\r\n"]
[133.359536, "o", "    value : number, `~numpy.ndarray`, `~astropy.units.Quantity` (sequence), or str\r\n"]
[133.371865, "o", "        The numerical value of this quantity in the units given by unit.  If a\r\n"]
[133.384195, "o", "        `Quantity` or sequence of them (or any other valid object with a\r\n"]
[133.396524, "o", "        ``unit`` attribute), creates a new `Quantity` object, converting to\r\n"]
[133.408853, "o", "        `unit` units as needed.  If a string, it is converted to a number or\r\n"]
[133.421182, "o", "        `Quantity`, depending on whether a unit is present.\r\n"]
[133.433511, "o", "\r\n"]
[133.44584, "o", "    unit : unit-like\r\n"]
[133.45817, "o", "        An object that represents the unit associated with the input value.\r\n"]
[133.470499, "o", "        Must be an `~astropy.units.UnitBase` object or a string parseable by\r\n"]
[133.482828, "o", "        the :mod:`~astropy.units` package.\r\n"]
[133.495157, "o", "\r\n"]
[133.507486, "o", "    dtype : ~numpy.dtype, optional\r\n"]
[133.519815, "o", "        The dtype of the resulting Numpy array or scalar that will\r\n"]
[133.532145, "o", "        hold the value.  If not provided, it is determined from the input,\r\n"]
[133.544474, "o", "        except that any integer and (non-Quantity) object inputs are converted\r\n"]
[133.556803, "o", "        to float by default.\r\n"]
[133.569132, "o", "        If `None`, the normal `numpy.dtype` introspection is used, e.g.\r\n"]
[133.581461, "o", "        preventing upcasting of integers.\r\n"]
[133.593791, "o", "\r\n"]
[133.60612, "o", "    copy : bool, optional\r\n"]
[133.618449, "o", "        If `True` (default), then the value is copied.  Otherwise, a copy will\r\n"]
[133.630778, "o", "        only be made if ``__array__`` returns a copy, if value is a nested\r\n"]
[133.643107, "o", "        sequence, or if a copy is needed to satisfy an explicitly given\r\n"]
[133.655436, "o", "        ``dtype``.  (The `False` option is intended mostly for internal use,\r\n"]
[133.667766, "o", "        to speed up initialization where a copy is known to have been made.\r\n"]
[133.680095, "o", "        Use with care.)\r\n"]
[133.692424, "o", "\r\n"]
[133.704753, "o", "    order : {'C', 'F', 'A'}, optional\r\n"]
[133.717082, "o", "        Specify the order of the array.  As in `~numpy.array`.  This parameter\r\n"]
[133.729411, "o", "        is ignored if the input is a `Quantity` and ``copy=False``.\r\n"]
[133.741741, "o", "\r\n"]
[133.75407, "o", "    subok : bool, optional\r\n"]
[133.766399, "o", "        If `False` (default), the returned array will be forced to be a\r\n"]
[133.778728, "o", "        `Quantity`.  Otherwise, `Quantity` subclasses will be passed through,\r\n"]
[133.791057, "o", "        or a subclass appropriate for the unit will be used (such as\r\n"]
[133.803387, "o", "        `~astropy.units.Dex` for ``u.dex(u.AA)``).\r\n"]
[133.815716, "o", "\r\n"]
[133.828045, "o", "    ndmin : int, optional\r\n"]
[133.840374, "o", "        Specifies the minimum number of dimensions that the resulting array\r\n"]
[133.852703, "o", "        should have.  Ones will be prepended to the shape as needed to meet\r\n"]
[133.865032, "o", "        this requirement.  This parameter is ignored if the input is a\r\n"]
[133.877362, "o", "        `Quantity` and ``copy=False``.\r\n"]
[133.889691, "o", "\r\n"]
[133.90202, "o", "    Raises\r\n"]
[133.914349, "o", "    ------\r\n"]
[133.926678, "o", "    TypeError\r\n"]
[133.939007, "o", "        If the value provided is not a Python numeric type.\r\n"]
[133.951337, "o", "    TypeError\r\n"]
[133.963666, "o", "        If the unit provided is not either a :class:`~astropy.units.Unit`\r\n"]
[133.975995, "o", "        object or a parseable string unit.\r\n"]
[133.988324, "o", "\r\n"]
[134.000653, "o", "    Notes\r\n"]
[134.012983, "o", "    -----\r\n"]
[134.025312, "o", "    Quantities can also be created by multiplying a number or array with a\r\n"]
[134.037641, "o", "    :class:`~astropy.units.Unit`. See https://docs.astropy.org/en/latest/units/\r\n"]
[134.04997, "o", "\r\n"]
[134.062299, "o", "    Unless the ``dtype`` argument is explicitly specified, integer\r\n"]
[134.074628, "o", "    or (non-Quantity) object inputs are converted to `float` by default.\r\n"]
[134.086958, "o", "    \"\"\"\r\n"]
[134.099287, "o", "\r\n"]
[134.111616, "o", "    # Need to set a class-level default for _equivalencies, or\r\n"]
[134.123945, "o", "    # Constants can not initialize properly\r\n"]
[134.136274, "o", "    _equivalencies = []\r\n"]
[134.148603, "o", "\r\n"]
[134.160933, "o", "    # Default unit for initialization; can be overridden by subclasses,\r\n"]
[134.173262, "o", "    # possibly to `None` to indicate there is no default unit.\r\n"]
[134.185591, "o", "    _default_unit = dimensionless_unscaled\r\n"]
[134.19792, "o", "\r\n"]
[134.210249, "o", "    # Ensures views have an undefined unit.\r\n"]
[134.222579, "o", "    _unit = None\r\n"]
[134.234908, "o", "\r\n"]
[134.247237, "o", "    __array_priority__ = 10000\r\n"]
[134.259566, "o", "\r\n"]
[134.271895, "o", "    def __class_getitem__(cls, unit_shape_dtype):\r\n"]
[134.284224, "o", "        \"\"\"Quantity Type Hints.\r\n"]
[134.296554, "o", "\r\n"]
[134.308883, "o", "        Unit-aware type hints are ``Annotated`` objects that encode the class,\r\n"]
[134.321212, "o", "        the unit, and possibly shape and dtype information, depending on the\r\n"]
[134.333541, "o", "        python and :mod:`numpy` versions.\r\n"]
[134.34587, "o", "\r\n"]
[134.3582, "o", "        Schematically, ``Annotated[cls[shape, dtype], unit]``\r\n"]
[134.370529, "o", "\r\n"]
[134.382858, "o", "        As a classmethod, the type is the class, ie ``Quantity``\r\n"]
[134.395187, "o", "        produces an ``Annotated[Quantity, ...]`` while a subclass\r\n"]
[134.407516, "o", "        like :class:`~astropy.coordinates.Angle` returns\r\n"]
[134.419845, "o", "        ``Annotated[Angle, ...]``.\r\n"]
[134.432175, "o", "\r\n"]
[134.444504, "o", "        Parameters\r\n"]
[134.456833, "o", "        ----------\r\n"]
[134.469162, "o", "        unit_shape_dtype : :class:`~astropy.units.UnitBase`, str, `~astropy.units.PhysicalType`, or tuple\r\n"]
[134.481491, "o", "            Unit specification, can be the physical type (ie str or class).\r\n"]
[134.49382, "o", "            If tuple, then the first element is the unit specification\r\n"]
[134.50615, "o", "            and all other elements are for `numpy.ndarray` type annotations.\r\n"]
[134.518479, "o", "            Whether they are included depends on the python and :mod:`numpy`\r\n"]
[134.530808, "o", "            versions.\r\n"]
[134.543137, "o", "\r\n"]
[134.555466, "o", "        Returns\r\n"]
[134.567796, "o", "        -------\r\n"]
[134.580125, "o", "        `typing.Annotated`, `astropy.units.Unit`, or `astropy.units.PhysicalType`\r\n"]
[134.592454, "o", "            Return type in this preference order:\r\n"]
[134.604783, "o", "            * `typing.Annotated`\r\n"]
[134.617112, "o", "            * `astropy.units.Unit` or `astropy.units.PhysicalType`\r\n"]
[134.629441, "o", "\r\n"]
[134.641771, "o", "        Raises\r\n"]
[134.6541, "o", "        ------\r\n"]
[134.666429, "o", "        TypeError\r\n"]
[134.678758, "o", "            If the unit/physical_type annotation is not Unit-like or\r\n"]
[134.691087, "o", "            PhysicalType-like.\r\n"]
[134.703416, "o", "\r\n"]
[134.715746, "o", "        Examples\r\n"]
[134.728075, "o", "        --------\r\n"]
[134.740404, "o", "        Create a unit-aware Quantity type annotation\r\n"]
[134.752733, "o", "\r\n"]
[134.765062, "o", "            >>> Quantity[Unit(\"s\")]\r\n"]
[134.777392, "o", "            Annotated[Quantity, Unit(\"s\")]\r\n"]
[134.789721, "o", "\r\n"]
[134.80205, "o", "        See Also\r\n"]
[134.814379, "o", "        --------\r\n"]
[134.826708, "o", "        `~astropy.units.quantity_input`\r\n"]
[134.839037, "o", "            Use annotations for unit checks on function arguments and results.\r\n"]
[134.851367, "o", "\r\n"]
[134.863696, "o", "        Notes\r\n"]
[134.876025, "o", "        -----\r\n"]
[134.888354, "o", "        |Quantity| types are also static-type compatible.\r\n"]
[134.900683, "o", "        \"\"\"\r\n"]
[134.913012, "o", "        from typing import Annotated\r\n"]
[134.925342, "o", "\r\n"]
[134.937671, "o", "        # process whether [unit] or [unit, shape, ptype]\r\n"]
[135.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[135.002, "i", "sed -n '400,1200p' astropy/units/quantity.py\r"]
[135.004, "o", "sed -n '400,1200p' astropy/units/quantity.py\r\n"]
[135.016, "o", "\u001b[?2004l\r\n"]
[135.026, "o", "        if isinstance(unit_shape_dtype, tuple):  # unit, shape, dtype\r\n"]
[135.036, "o", "            target = unit_shape_dtype[0]\r\n"]
[135.046, "o", "            shape_dtype = unit_shape_dtype[1:]\r\n"]
[135.056, "o", "        else:  # just unit\r\n"]
[135.066, "o", "            target = unit_shape_dtype\r\n"]
[135.076, "o", "            shape_dtype = ()\r\n"]
[135.086, "o", "\r\n"]
[135.096, "o", "        # Allowed unit/physical types. Errors if neither.\r\n"]
[135.106, "o", "        try:\r\n"]
[135.116, "o", "            unit = Unit(target)\r\n"]
[135.126, "o", "        except (TypeError, ValueError):\r\n"]
[135.136, "o", "            from astropy.units.physical import get_physical_type\r\n"]
[135.146, "o", "\r\n"]
[135.156, "o", "            try:\r\n"]
[135.166, "o", "                unit = get_physical_type(target)\r\n"]
[135.176, "o", "            except (TypeError, ValueError, KeyError):  # KeyError for Enum\r\n"]
[135.186, "o", "                raise TypeError(\r\n"]
[135.196, "o", "                    \"unit annotation is not a Unit or PhysicalType\"\r\n"]
[135.206, "o", "                ) from None\r\n"]
[135.216, "o", "\r\n"]
[135.226, "o", "        # Quantity does not (yet) properly extend the NumPy generics types,\r\n"]
[135.236, "o", "        # introduced in numpy v1.22+, instead just including the unit info as\r\n"]
[135.246, "o", "        # metadata using Annotated.\r\n"]
[135.256, "o", "        # TODO: ensure we do interact with NDArray.__class_getitem__.\r\n"]
[135.266, "o", "        return Annotated[cls, unit]\r\n"]
[135.276, "o", "\r\n"]
[135.286, "o", "    def __new__(\r\n"]
[135.296, "o", "        cls: type[Self],\r\n"]
[135.306, "o", "        value: QuantityLike,\r\n"]
[135.316, "o", "        unit=None,\r\n"]
[135.326, "o", "        dtype=np.inexact,\r\n"]
[135.336, "o", "        copy=True,\r\n"]
[135.346, "o", "        order=None,\r\n"]
[135.356, "o", "        subok=False,\r\n"]
[135.366, "o", "        ndmin=0,\r\n"]
[135.376, "o", "    ) -> Self:\r\n"]
[135.386, "o", "        if unit is not None:\r\n"]
[135.396, "o", "            # convert unit first, to avoid multiple string->unit conversions\r\n"]
[135.406, "o", "            unit = Unit(unit)\r\n"]
[135.416, "o", "\r\n"]
[135.426, "o", "        # inexact -> upcast to float dtype\r\n"]
[135.436, "o", "        float_default = dtype is np.inexact\r\n"]
[135.446, "o", "        if float_default:\r\n"]
[135.456, "o", "            dtype = None\r\n"]
[135.466, "o", "\r\n"]
[135.476, "o", "        # optimize speed for Quantity with no dtype given, copy=COPY_IF_NEEDED\r\n"]
[135.486, "o", "        if isinstance(value, Quantity):\r\n"]
[135.496, "o", "            if unit is not None and unit is not value.unit:\r\n"]
[135.506, "o", "                value = value.to(unit)\r\n"]
[135.516, "o", "                # the above already makes a copy (with float dtype)\r\n"]
[135.526, "o", "                copy = COPY_IF_NEEDED\r\n"]
[135.536, "o", "\r\n"]
[135.546, "o", "            if type(value) is not cls and not (subok and isinstance(value, cls)):\r\n"]
[135.556, "o", "                value = value.view(cls)\r\n"]
[135.566, "o", "\r\n"]
[135.576, "o", "            if float_default and value.dtype.kind in \"iu\":\r\n"]
[135.586, "o", "                dtype = float\r\n"]
[135.596, "o", "\r\n"]
[135.606, "o", "            return np.array(\r\n"]
[135.616, "o", "                value, dtype=dtype, copy=copy, order=order, subok=True, ndmin=ndmin\r\n"]
[135.626, "o", "            )\r\n"]
[135.636, "o", "\r\n"]
[135.646, "o", "        # Maybe str, or list/tuple of Quantity? If so, this may set value_unit.\r\n"]
[135.656, "o", "        # To ensure array remains fast, we short-circuit it.\r\n"]
[135.666, "o", "        value_unit = None\r\n"]
[135.676, "o", "        if not isinstance(value, np.ndarray):\r\n"]
[135.686, "o", "            if isinstance(value, str):\r\n"]
[135.696, "o", "                # The first part of the regex string matches any integer/float;\r\n"]
[135.706, "o", "                # the second parts adds possible trailing .+-, which will break\r\n"]
[135.716, "o", "                # the float function below and ensure things like 1.2.3deg\r\n"]
[135.726, "o", "                # will not work.\r\n"]
[135.736, "o", "                pattern = (\r\n"]
[135.746, "o", "                    r\"\\s*[+-]?\"\r\n"]
[135.756, "o", "                    r\"((\\d+\\.?\\d*)|(\\.\\d+)|([nN][aA][nN])|\"\r\n"]
[135.766, "o", "                    r\"([iI][nN][fF]([iI][nN][iI][tT][yY]){0,1}))\"\r\n"]
[135.776, "o", "                    r\"([eE][+-]?\\d+)?\"\r\n"]
[135.786, "o", "                    r\"[.+-]?\"\r\n"]
[135.796, "o", "                )\r\n"]
[135.806, "o", "\r\n"]
[135.816, "o", "                v = re.match(pattern, value)\r\n"]
[135.826, "o", "                unit_string = None\r\n"]
[135.836, "o", "                try:\r\n"]
[135.846, "o", "                    value = float(v.group())\r\n"]
[135.856, "o", "\r\n"]
[135.866, "o", "                except Exception:\r\n"]
[135.876, "o", "                    raise TypeError(\r\n"]
[135.886, "o", "                        f'Cannot parse \"{value}\" as a {cls.__name__}. It does not '\r\n"]
[135.896, "o", "                        \"start with a number.\"\r\n"]
[135.906, "o", "                    )\r\n"]
[135.916, "o", "\r\n"]
[135.926, "o", "                unit_string = v.string[v.end() :].strip()\r\n"]
[135.936, "o", "                if unit_string:\r\n"]
[135.946, "o", "                    value_unit = Unit(unit_string)\r\n"]
[135.956, "o", "                    if unit is None:\r\n"]
[135.966, "o", "                        unit = value_unit  # signal no conversion needed below.\r\n"]
[135.976, "o", "\r\n"]
[135.986, "o", "            elif isinstance(value, (list, tuple)) and len(value) > 0:\r\n"]
[135.996, "o", "                if all(isinstance(v, Quantity) for v in value):\r\n"]
[136.006, "o", "                    # If a list/tuple contains only quantities, stack them,\r\n"]
[136.016, "o", "                    # which also converts them to the same unit.\r\n"]
[136.026, "o", "                    value = np.stack(value)\r\n"]
[136.036, "o", "                    copy = False\r\n"]
[136.046, "o", "\r\n"]
[136.056, "o", "                elif (\r\n"]
[136.066, "o", "                    dtype is None\r\n"]
[136.076, "o", "                    and not hasattr(value, \"dtype\")\r\n"]
[136.086, "o", "                    and isinstance(unit, StructuredUnit)\r\n"]
[136.096, "o", "                ):\r\n"]
[136.106, "o", "                    # Special case for list/tuple of values and a structured unit:\r\n"]
[136.116, "o", "                    # ``np.array(value, dtype=None)`` would treat tuples as lower\r\n"]
[136.126, "o", "                    # levels of the array, rather than as elements of a structured\r\n"]
[136.136, "o", "                    # array, so we use the structure of the unit to help infer the\r\n"]
[136.146, "o", "                    # structured dtype of the value.\r\n"]
[136.156, "o", "                    dtype = unit._recursively_get_dtype(value)\r\n"]
[136.166, "o", "\r\n"]
[136.176, "o", "        using_default_unit = False\r\n"]
[136.186, "o", "        if value_unit is None:\r\n"]
[136.196, "o", "            # If the value has a `unit` attribute and if not None\r\n"]
[136.206, "o", "            # (for Columns with uninitialized unit), treat it like a quantity.\r\n"]
[136.216, "o", "            value_unit = getattr(value, \"unit\", None)\r\n"]
[136.226, "o", "            if value_unit is None:\r\n"]
[136.236, "o", "                # Default to dimensionless for no (initialized) unit attribute.\r\n"]
[136.246, "o", "                if unit is None:\r\n"]
[136.256, "o", "                    using_default_unit = True\r\n"]
[136.266, "o", "                    unit = cls._default_unit\r\n"]
[136.276, "o", "                value_unit = unit  # signal below that no conversion is needed\r\n"]
[136.286, "o", "            else:\r\n"]
[136.296, "o", "                try:\r\n"]
[136.306, "o", "                    value_unit = Unit(value_unit)\r\n"]
[136.316, "o", "                except Exception as exc:\r\n"]
[136.326, "o", "                    raise TypeError(\r\n"]
[136.336, "o", "                        f\"The unit attribute {value.unit!r} of the input could \"\r\n"]
[136.346, "o", "                        \"not be parsed as an astropy Unit.\"\r\n"]
[136.356, "o", "                    ) from exc\r\n"]
[136.366, "o", "\r\n"]
[136.376, "o", "                if unit is None:\r\n"]
[136.386, "o", "                    unit = value_unit\r\n"]
[136.396, "o", "                elif unit is not value_unit:\r\n"]
[136.406, "o", "                    copy = COPY_IF_NEEDED  # copy will be made in conversion at end\r\n"]
[136.416, "o", "\r\n"]
[136.426, "o", "        value = np.array(\r\n"]
[136.436, "o", "            value, dtype=dtype, copy=copy, order=order, subok=True, ndmin=ndmin\r\n"]
[136.446, "o", "        )\r\n"]
[136.456, "o", "\r\n"]
[136.466, "o", "        # For no-user-input unit, make sure the constructed unit matches the\r\n"]
[136.476, "o", "        # structure of the data.\r\n"]
[136.486, "o", "        if using_default_unit and value.dtype.names is not None:\r\n"]
[136.496, "o", "            unit = value_unit = _structured_unit_like_dtype(value_unit, value.dtype)\r\n"]
[136.506, "o", "\r\n"]
[136.516, "o", "        # check that array contains numbers or long int objects\r\n"]
[136.526, "o", "        if value.dtype.kind in \"OSU\" and not (\r\n"]
[136.536, "o", "            value.dtype.kind == \"O\" and isinstance(value.item(0), numbers.Number)\r\n"]
[136.546, "o", "        ):\r\n"]
[136.556, "o", "            raise TypeError(\"The value must be a valid Python or Numpy numeric type.\")\r\n"]
[136.566, "o", "\r\n"]
[136.576, "o", "        # by default, cast any integer, boolean, etc., to float\r\n"]
[136.586, "o", "        if float_default and value.dtype.kind in \"iuO\":\r\n"]
[136.596, "o", "            value = value.astype(float)\r\n"]
[136.606, "o", "\r\n"]
[136.616, "o", "        # if we allow subclasses, allow a class from the unit.\r\n"]
[136.626, "o", "        if subok:\r\n"]
[136.636, "o", "            qcls = getattr(unit, \"_quantity_class\", cls)\r\n"]
[136.646, "o", "            if issubclass(qcls, cls):\r\n"]
[136.656, "o", "                cls = qcls\r\n"]
[136.666, "o", "\r\n"]
[136.676, "o", "        value = value.view(cls)\r\n"]
[136.686, "o", "        value._set_unit(value_unit)\r\n"]
[136.696, "o", "        if unit is value_unit:\r\n"]
[136.706, "o", "            return value\r\n"]
[136.716, "o", "        else:\r\n"]
[136.726, "o", "            # here we had non-Quantity input that had a \"unit\" attribute\r\n"]
[136.736, "o", "            # with a unit different from the desired one.  So, convert.\r\n"]
[136.746, "o", "            return value.to(unit)\r\n"]
[136.756, "o", "\r\n"]
[136.766, "o", "    def __array_finalize__(self, obj):\r\n"]
[136.776, "o", "        # Check whether super().__array_finalize should be called\r\n"]
[136.786, "o", "        # (sadly, ndarray.__array_finalize__ is None; we cannot be sure\r\n"]
[136.796, "o", "        # what is above us).\r\n"]
[136.806, "o", "        super_array_finalize = super().__array_finalize__\r\n"]
[136.816, "o", "        if super_array_finalize is not None:\r\n"]
[136.826, "o", "            super_array_finalize(obj)\r\n"]
[136.836, "o", "\r\n"]
[136.846, "o", "        # If we're a new object or viewing an ndarray, nothing has to be done.\r\n"]
[136.856, "o", "        if obj is None or obj.__class__ is np.ndarray:\r\n"]
[136.866, "o", "            return\r\n"]
[136.876, "o", "\r\n"]
[136.886, "o", "        # Copy over the unit and possibly info.  Note that the only way the\r\n"]
[136.896, "o", "        # unit can already be set is if one enters via _new_view(), where the\r\n"]
[136.906, "o", "        # unit is often different from that of self, and where propagation of\r\n"]
[136.916, "o", "        # info is not always desirable.\r\n"]
[136.926, "o", "        if self._unit is None:\r\n"]
[136.936, "o", "            unit = getattr(obj, \"_unit\", None)\r\n"]
[136.946, "o", "            if unit is not None:\r\n"]
[136.956, "o", "                self._set_unit(unit)\r\n"]
[136.966, "o", "\r\n"]
[136.976, "o", "            # Copy info if the original had `info` defined.  Because of the way the\r\n"]
[136.986, "o", "            # DataInfo works, `'info' in obj.__dict__` is False until the\r\n"]
[136.996, "o", "            # `info` attribute is accessed or set.\r\n"]
[137.006, "o", "            if \"info\" in obj.__dict__:\r\n"]
[137.016, "o", "                self.info = obj.info\r\n"]
[137.026, "o", "\r\n"]
[137.036, "o", "    def __array_wrap__(self, obj, context=None, return_scalar=False):\r\n"]
[137.046, "o", "        if context is None:\r\n"]
[137.056, "o", "            # Methods like .squeeze() created a new `ndarray` and then call\r\n"]
[137.066, "o", "            # __array_wrap__ to turn the array into self's subclass.\r\n"]
[137.076, "o", "            return self._new_view(obj)\r\n"]
[137.086, "o", "\r\n"]
[137.096, "o", "        raise NotImplementedError(\r\n"]
[137.106, "o", "            \"__array_wrap__ should not be used with a context any more since all \"\r\n"]
[137.116, "o", "            \"use should go through array_function. Please raise an issue on \"\r\n"]
[137.126, "o", "            \"https://github.com/astropy/astropy\"\r\n"]
[137.136, "o", "        )\r\n"]
[137.146, "o", "\r\n"]
[137.156, "o", "    def __array_ufunc__(self, function, method, *inputs, **kwargs):\r\n"]
[137.166, "o", "        \"\"\"Wrap numpy ufuncs, taking care of units.\r\n"]
[137.176, "o", "\r\n"]
[137.186, "o", "        Parameters\r\n"]
[137.196, "o", "        ----------\r\n"]
[137.206, "o", "        function : callable\r\n"]
[137.216, "o", "            ufunc to wrap.\r\n"]
[137.226, "o", "        method : str\r\n"]
[137.236, "o", "            Ufunc method: ``__call__``, ``at``, ``reduce``, etc.\r\n"]
[137.246, "o", "        inputs : tuple\r\n"]
[137.256, "o", "            Input arrays.\r\n"]
[137.266, "o", "        kwargs : keyword arguments\r\n"]
[137.276, "o", "            As passed on, with ``out`` containing possible quantity output.\r\n"]
[137.286, "o", "\r\n"]
[137.296, "o", "        Returns\r\n"]
[137.306, "o", "        -------\r\n"]
[137.316, "o", "        result : `~astropy.units.Quantity` or `NotImplemented`\r\n"]
[137.326, "o", "            Results of the ufunc, with the unit set properly.\r\n"]
[137.336, "o", "        \"\"\"\r\n"]
[137.346, "o", "        # Determine required conversion functions -- to bring the unit of the\r\n"]
[137.356, "o", "        # input to that expected (e.g., radian for np.sin), or to get\r\n"]
[137.366, "o", "        # consistent units between two inputs (e.g., in np.add) --\r\n"]
[137.376, "o", "        # and the unit of the result (or tuple of units for nout > 1).\r\n"]
[137.386, "o", "        try:\r\n"]
[137.396, "o", "            converters, unit = converters_and_unit(function, method, *inputs)\r\n"]
[137.406, "o", "\r\n"]
[137.416, "o", "            out = kwargs.get(\"out\", None)\r\n"]
[137.426, "o", "            # Avoid loop back by turning any Quantity output into array views.\r\n"]
[137.436, "o", "            if out is not None:\r\n"]
[137.446, "o", "                # If pre-allocated output is used, check it is suitable.\r\n"]
[137.456, "o", "                # This also returns array view, to ensure we don't loop back.\r\n"]
[137.466, "o", "                if function.nout == 1:\r\n"]
[137.476, "o", "                    out = out[0]\r\n"]
[137.486, "o", "                out_array = check_output(out, unit, inputs, function=function)\r\n"]
[137.496, "o", "                # Ensure output argument remains a tuple.\r\n"]
[137.506, "o", "                kwargs[\"out\"] = (out_array,) if function.nout == 1 else out_array\r\n"]
[137.516, "o", "\r\n"]
[137.526, "o", "            if method == \"reduce\" and \"initial\" in kwargs and unit is not None:\r\n"]
[137.536, "o", "                # Special-case for initial argument for reductions like\r\n"]
[137.546, "o", "                # np.add.reduce.  This should be converted to the output unit as\r\n"]
[137.556, "o", "                # well, which is typically the same as the input unit (but can\r\n"]
[137.566, "o", "                # in principle be different: unitless for np.equal, radian\r\n"]
[137.576, "o", "                # for np.arctan2, though those are not necessarily useful!)\r\n"]
[137.586, "o", "                kwargs[\"initial\"] = self._to_own_unit(\r\n"]
[137.596, "o", "                    kwargs[\"initial\"], check_precision=False, unit=unit\r\n"]
[137.606, "o", "                )\r\n"]
[137.616, "o", "\r\n"]
[137.626, "o", "            # Same for inputs, but here also convert if necessary.\r\n"]
[137.636, "o", "            arrays = []\r\n"]
[137.646, "o", "            for input_, converter in zip(inputs, converters):\r\n"]
[137.656, "o", "                input_ = getattr(input_, \"value\", input_)\r\n"]
[137.666, "o", "                arrays.append(converter(input_) if converter else input_)\r\n"]
[137.676, "o", "\r\n"]
[137.686, "o", "            # Call our superclass's __array_ufunc__\r\n"]
[137.696, "o", "            result = super().__array_ufunc__(function, method, *arrays, **kwargs)\r\n"]
[137.706, "o", "            # If unit is None, a plain array is expected (e.g., comparisons), which\r\n"]
[137.716, "o", "            # means we're done.\r\n"]
[137.726, "o", "            # We're also done if the result was None (for method 'at') or\r\n"]
[137.736, "o", "            # NotImplemented, which can happen if other inputs/outputs override\r\n"]
[137.746, "o", "            # __array_ufunc__; hopefully, they can then deal with us.\r\n"]
[137.756, "o", "            if unit is None or result is None or result is NotImplemented:\r\n"]
[137.766, "o", "                return result\r\n"]
[137.776, "o", "\r\n"]
[137.786, "o", "            return self._result_as_quantity(result, unit, out)\r\n"]
[137.796, "o", "\r\n"]
[137.806, "o", "        except (TypeError, ValueError, AttributeError) as e:\r\n"]
[137.816, "o", "            out_normalized = kwargs.get(\"out\", ())\r\n"]
[137.826, "o", "            inputs_and_outputs = inputs + out_normalized\r\n"]
[137.836, "o", "            ignored_ufunc = (\r\n"]
[137.846, "o", "                None,\r\n"]
[137.856, "o", "                np.ndarray.__array_ufunc__,\r\n"]
[137.866, "o", "                type(self).__array_ufunc__,\r\n"]
[137.876, "o", "            )\r\n"]
[137.886, "o", "            if not all(\r\n"]
[137.896, "o", "                getattr(type(io), \"__array_ufunc__\", None) in ignored_ufunc\r\n"]
[137.906, "o", "                for io in inputs_and_outputs\r\n"]
[137.916, "o", "            ):\r\n"]
[137.926, "o", "                return NotImplemented\r\n"]
[137.936, "o", "            else:\r\n"]
[137.946, "o", "                raise e\r\n"]
[137.956, "o", "\r\n"]
[137.966, "o", "    def _result_as_quantity(self, result, unit, out):\r\n"]
[137.976, "o", "        \"\"\"Turn result into a quantity with the given unit.\r\n"]
[137.986, "o", "\r\n"]
[137.996, "o", "        If no output is given, it will take a view of the array as a quantity,\r\n"]
[138.006, "o", "        and set the unit.  If output is given, those should be quantity views\r\n"]
[138.016, "o", "        of the result arrays, and the function will just set the unit.\r\n"]
[138.026, "o", "\r\n"]
[138.036, "o", "        Parameters\r\n"]
[138.046, "o", "        ----------\r\n"]
[138.056, "o", "        result : ndarray or tuple thereof\r\n"]
[138.066, "o", "            Array(s) which need to be turned into quantity.\r\n"]
[138.076, "o", "        unit : `~astropy.units.Unit`\r\n"]
[138.086, "o", "            Unit for the quantities to be returned (or `None` if the result\r\n"]
[138.096, "o", "            should not be a quantity).  Should be tuple if result is a tuple.\r\n"]
[138.106, "o", "        out : `~astropy.units.Quantity` or None\r\n"]
[138.116, "o", "            Possible output quantity. Should be `None` or a tuple if result\r\n"]
[138.126, "o", "            is a tuple.\r\n"]
[138.136, "o", "\r\n"]
[138.146, "o", "        Returns\r\n"]
[138.156, "o", "        -------\r\n"]
[138.166, "o", "        out : `~astropy.units.Quantity`\r\n"]
[138.176, "o", "           With units set.\r\n"]
[138.186, "o", "        \"\"\"\r\n"]
[138.196, "o", "        if isinstance(result, (tuple, list)):\r\n"]
[138.206, "o", "            if out is None:\r\n"]
[138.216, "o", "                out = (None,) * len(result)\r\n"]
[138.226, "o", "            # Some np.linalg functions return namedtuple, which is handy to access\r\n"]
[138.236, "o", "            # elements by name, but cannot be directly initialized with an iterator.\r\n"]
[138.246, "o", "            result_cls = getattr(result, \"_make\", result.__class__)\r\n"]
[138.256, "o", "            return result_cls(\r\n"]
[138.266, "o", "                self._result_as_quantity(result_, unit_, out_)\r\n"]
[138.276, "o", "                for (result_, unit_, out_) in zip(result, unit, out)\r\n"]
[138.286, "o", "            )\r\n"]
[138.296, "o", "\r\n"]
[138.306, "o", "        if out is None:\r\n"]
[138.316, "o", "            # View the result array as a Quantity with the proper unit.\r\n"]
[138.326, "o", "            return (\r\n"]
[138.336, "o", "                result\r\n"]
[138.346, "o", "                if unit is None\r\n"]
[138.356, "o", "                else self._new_view(result, unit, propagate_info=False)\r\n"]
[138.366, "o", "            )\r\n"]
[138.376, "o", "\r\n"]
[138.386, "o", "        elif isinstance(out, Quantity):\r\n"]
[138.396, "o", "            # For given Quantity output, just set the unit. We know the unit\r\n"]
[138.406, "o", "            # is not None and the output is of the correct Quantity subclass,\r\n"]
[138.416, "o", "            # as it was passed through check_output.\r\n"]
[138.426, "o", "            # (We cannot do this unconditionally, though, since it is possible\r\n"]
[138.436, "o", "            # for out to be ndarray and the unit to be dimensionless.)\r\n"]
[138.446, "o", "            out._set_unit(unit)\r\n"]
[138.456, "o", "\r\n"]
[138.466, "o", "        return out\r\n"]
[138.476, "o", "\r\n"]
[138.486, "o", "    def __quantity_subclass__(self, unit):\r\n"]
[138.496, "o", "        \"\"\"\r\n"]
[138.506, "o", "        Overridden by subclasses to change what kind of view is\r\n"]
[138.516, "o", "        created based on the output unit of an operation.\r\n"]
[138.526, "o", "\r\n"]
[138.536, "o", "        Parameters\r\n"]
[138.546, "o", "        ----------\r\n"]
[138.556, "o", "        unit : UnitBase\r\n"]
[138.566, "o", "            The unit for which the appropriate class should be returned\r\n"]
[138.576, "o", "\r\n"]
[138.586, "o", "        Returns\r\n"]
[138.596, "o", "        -------\r\n"]
[138.606, "o", "        tuple :\r\n"]
[138.616, "o", "            - `~astropy.units.Quantity` subclass\r\n"]
[138.626, "o", "            - bool: True if subclasses of the given class are ok\r\n"]
[138.636, "o", "        \"\"\"\r\n"]
[138.646, "o", "        return Quantity, True\r\n"]
[138.656, "o", "\r\n"]
[138.666, "o", "    def _new_view(self, obj=None, unit=None, propagate_info=True):\r\n"]
[138.676, "o", "        \"\"\"Create a Quantity view of some array-like input, and set the unit.\r\n"]
[138.686, "o", "\r\n"]
[138.696, "o", "        By default, return a view of ``obj`` of the same class as ``self`` and\r\n"]
[138.706, "o", "        with the same unit.  Subclasses can override the type of class for a\r\n"]
[138.716, "o", "        given unit using ``__quantity_subclass__``, and can ensure properties\r\n"]
[138.726, "o", "        other than the unit are copied using ``__array_finalize__``.\r\n"]
[138.736, "o", "\r\n"]
[138.746, "o", "        If the given unit defines a ``_quantity_class`` of which ``self``\r\n"]
[138.756, "o", "        is not an instance, a view using this class is taken.\r\n"]
[138.766, "o", "\r\n"]
[138.776, "o", "        Parameters\r\n"]
[138.786, "o", "        ----------\r\n"]
[138.796, "o", "        obj : ndarray or scalar, optional\r\n"]
[138.806, "o", "            The array to create a view of.  If obj is a numpy or python scalar,\r\n"]
[138.816, "o", "            it will be converted to an array scalar.  By default, ``self``\r\n"]
[138.826, "o", "            is converted.\r\n"]
[138.836, "o", "\r\n"]
[138.846, "o", "        unit : unit-like, optional\r\n"]
[138.856, "o", "            The unit of the resulting object.  It is used to select a\r\n"]
[138.866, "o", "            subclass, and explicitly assigned to the view if given.\r\n"]
[138.876, "o", "            If not given, the subclass and unit will be that of ``self``.\r\n"]
[138.886, "o", "\r\n"]
[138.896, "o", "        propagate_info : bool, optional\r\n"]
[138.906, "o", "            Whether to transfer ``info`` if present.  Default: `True`, as\r\n"]
[138.916, "o", "            appropriate for, e.g., unit conversions or slicing, where the\r\n"]
[138.926, "o", "            nature of the object does not change.\r\n"]
[138.936, "o", "\r\n"]
[138.946, "o", "        Returns\r\n"]
[138.956, "o", "        -------\r\n"]
[138.966, "o", "        view : `~astropy.units.Quantity` subclass\r\n"]
[138.976, "o", "\r\n"]
[138.986, "o", "        \"\"\"\r\n"]
[138.996, "o", "        # Determine the unit and quantity subclass that we need for the view.\r\n"]
[139.006, "o", "        if unit is None:\r\n"]
[139.016, "o", "            unit = self.unit\r\n"]
[139.026, "o", "            quantity_subclass = self.__class__\r\n"]
[139.036, "o", "        elif unit is self.unit and self.__class__ is Quantity:\r\n"]
[139.046, "o", "            # The second part is because we should not presume what other\r\n"]
[139.056, "o", "            # classes want to do for the same unit.  E.g., Constant will\r\n"]
[139.066, "o", "            # always want to fall back to Quantity, and relies on going\r\n"]
[139.076, "o", "            # through `__quantity_subclass__`.\r\n"]
[139.086, "o", "            quantity_subclass = Quantity\r\n"]
[139.096, "o", "        else:\r\n"]
[139.106, "o", "            unit = Unit(unit)\r\n"]
[139.116, "o", "            quantity_subclass = getattr(unit, \"_quantity_class\", Quantity)\r\n"]
[139.126, "o", "            if isinstance(self, quantity_subclass):\r\n"]
[139.136, "o", "                quantity_subclass, subok = self.__quantity_subclass__(unit)\r\n"]
[139.146, "o", "                if subok:\r\n"]
[139.156, "o", "                    quantity_subclass = self.__class__\r\n"]
[139.166, "o", "\r\n"]
[139.176, "o", "        # We only want to propagate information from ``self`` to our new view,\r\n"]
[139.186, "o", "        # so obj should be a regular array.  By using ``np.array``, we also\r\n"]
[139.196, "o", "        # convert python and numpy scalars, which cannot be viewed as arrays\r\n"]
[139.206, "o", "        # and thus not as Quantity either, to zero-dimensional arrays.\r\n"]
[139.216, "o", "        # (These are turned back into scalar in `.value`)\r\n"]
[139.226, "o", "        # Note that for an ndarray input, the np.array call takes only double\r\n"]
[139.236, "o", "        # ``obj.__class is np.ndarray``. So, not worth special-casing.\r\n"]
[139.246, "o", "        if obj is None:\r\n"]
[139.256, "o", "            obj = self.view(np.ndarray)\r\n"]
[139.266, "o", "        else:\r\n"]
[139.276, "o", "            obj = np.array(obj, copy=COPY_IF_NEEDED, subok=True)\r\n"]
[139.286, "o", "\r\n"]
[139.296, "o", "        # Take the view, set the unit, and update possible other properties\r\n"]
[139.306, "o", "        # such as ``info``, ``wrap_angle`` in `Longitude`, etc.\r\n"]
[139.316, "o", "        view = obj.view(quantity_subclass)\r\n"]
[139.326, "o", "        view._set_unit(unit)\r\n"]
[139.336, "o", "        view.__array_finalize__(self)\r\n"]
[139.346, "o", "        if propagate_info and \"info\" in self.__dict__:\r\n"]
[139.356, "o", "            view.info = self.info\r\n"]
[139.366, "o", "        return view\r\n"]
[139.376, "o", "\r\n"]
[139.386, "o", "    def _set_unit(self, unit):\r\n"]
[139.396, "o", "        \"\"\"Set the unit.\r\n"]
[139.406, "o", "\r\n"]
[139.416, "o", "        This is used anywhere the unit is set or modified, i.e., in the\r\n"]
[139.426, "o", "        initializer, in ``__imul__`` and ``__itruediv__`` for in-place\r\n"]
[139.436, "o", "        multiplication and division by another unit, as well as in\r\n"]
[139.446, "o", "        ``__array_finalize__`` for wrapping up views.  For Quantity, it just\r\n"]
[139.456, "o", "        sets the unit, but subclasses can override it to check that, e.g.,\r\n"]
[139.466, "o", "        a unit is consistent.\r\n"]
[139.476, "o", "        \"\"\"\r\n"]
[139.486, "o", "        if not isinstance(unit, UnitBase):\r\n"]
[139.496, "o", "            if isinstance(self._unit, StructuredUnit) or isinstance(\r\n"]
[139.506, "o", "                unit, StructuredUnit\r\n"]
[139.516, "o", "            ):\r\n"]
[139.526, "o", "                unit = StructuredUnit(unit, self.dtype)\r\n"]
[139.536, "o", "            else:\r\n"]
[139.546, "o", "                # Trying to go through a string ensures that, e.g., Magnitudes with\r\n"]
[139.556, "o", "                # dimensionless physical unit become Quantity with units of mag.\r\n"]
[139.566, "o", "                unit = Unit(str(unit), parse_strict=\"silent\")\r\n"]
[139.576, "o", "                if not isinstance(unit, (UnitBase, StructuredUnit)):\r\n"]
[139.586, "o", "                    raise UnitTypeError(\r\n"]
[139.596, "o", "                        f\"{self.__class__.__name__} instances require normal units, \"\r\n"]
[139.606, "o", "                        f\"not {unit.__class__} instances.\"\r\n"]
[139.616, "o", "                    )\r\n"]
[139.626, "o", "\r\n"]
[139.636, "o", "        self._unit = unit\r\n"]
[139.646, "o", "\r\n"]
[139.656, "o", "    def __deepcopy__(self, memo):\r\n"]
[139.666, "o", "        # If we don't define this, ``copy.deepcopy(quantity)`` will\r\n"]
[139.676, "o", "        # return a bare Numpy array.\r\n"]
[139.686, "o", "        return self.copy()\r\n"]
[139.696, "o", "\r\n"]
[139.706, "o", "    def __reduce__(self):\r\n"]
[139.716, "o", "        # patch to pickle Quantity objects (ndarray subclasses), see\r\n"]
[139.726, "o", "        # http://www.mail-archive.com/numpy-discussion@scipy.org/msg02446.html\r\n"]
[139.736, "o", "\r\n"]
[139.746, "o", "        object_state = list(super().__reduce__())\r\n"]
[139.756, "o", "        object_state[2] = (object_state[2], self.__dict__)\r\n"]
[139.766, "o", "        return tuple(object_state)\r\n"]
[139.776, "o", "\r\n"]
[139.786, "o", "    def __setstate__(self, state):\r\n"]
[139.796, "o", "        # patch to unpickle Quantity objects (ndarray subclasses), see\r\n"]
[139.806, "o", "        # http://www.mail-archive.com/numpy-discussion@scipy.org/msg02446.html\r\n"]
[139.816, "o", "\r\n"]
[139.826, "o", "        nd_state, own_state = state\r\n"]
[139.836, "o", "        super().__setstate__(nd_state)\r\n"]
[139.846, "o", "        self.__dict__.update(own_state)\r\n"]
[139.856, "o", "\r\n"]
[139.866, "o", "    info = QuantityInfo()\r\n"]
[139.876, "o", "\r\n"]
[139.886, "o", "    def _to_value(self, unit, equivalencies=[]):\r\n"]
[139.896, "o", "        \"\"\"Helper method for to and to_value.\"\"\"\r\n"]
[139.906, "o", "        if equivalencies == []:\r\n"]
[139.916, "o", "            equivalencies = self._equivalencies\r\n"]
[139.926, "o", "        if not self.dtype.names or isinstance(self.unit, StructuredUnit):\r\n"]
[139.936, "o", "            # Standard path, let unit to do work.\r\n"]
[140.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[140.002, "i", "sed -n '1200,2000p' astropy/units/quantity.py\r"]
[140.004, "o", "sed -n '1200,2000p' astropy/units/quantity.py\r\n"]
[140.016, "o", "\u001b[?2004l\r\n"]
[140.026, "o", "    # behaviour, but instead of emitting a warning here, let it be done by\r\n"]
[140.036, "o", "    # other (which likely is a unit if this was a mistake).\r\n"]
[140.046, "o", "    def __rshift__(self, other):\r\n"]
[140.056, "o", "        return NotImplemented\r\n"]
[140.066, "o", "\r\n"]
[140.076, "o", "    def __irshift__(self, other):\r\n"]
[140.086, "o", "        return NotImplemented\r\n"]
[140.096, "o", "\r\n"]
[140.106, "o", "    # Arithmetic operations\r\n"]
[140.116, "o", "    def __mul__(self, other):\r\n"]
[140.126, "o", "        \"\"\"Multiplication between `Quantity` objects and other objects.\"\"\"\r\n"]
[140.136, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[140.146, "o", "            try:\r\n"]
[140.156, "o", "                return self._new_view(\r\n"]
[140.166, "o", "                    self.value.copy(), other * self.unit, propagate_info=False\r\n"]
[140.176, "o", "                )\r\n"]
[140.186, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[140.196, "o", "                return NotImplemented\r\n"]
[140.206, "o", "\r\n"]
[140.216, "o", "        return super().__mul__(other)\r\n"]
[140.226, "o", "\r\n"]
[140.236, "o", "    def __imul__(self, other):\r\n"]
[140.246, "o", "        \"\"\"In-place multiplication between `Quantity` objects and others.\"\"\"\r\n"]
[140.256, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[140.266, "o", "            self._set_unit(other * self.unit)\r\n"]
[140.276, "o", "            return self\r\n"]
[140.286, "o", "\r\n"]
[140.296, "o", "        return super().__imul__(other)\r\n"]
[140.306, "o", "\r\n"]
[140.316, "o", "    def __rmul__(self, other):\r\n"]
[140.326, "o", "        \"\"\"\r\n"]
[140.336, "o", "        Right Multiplication between `Quantity` objects and other objects.\r\n"]
[140.346, "o", "        \"\"\"\r\n"]
[140.356, "o", "        return self.__mul__(other)\r\n"]
[140.366, "o", "\r\n"]
[140.376, "o", "    def __truediv__(self, other):\r\n"]
[140.386, "o", "        \"\"\"Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[140.396, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[140.406, "o", "            try:\r\n"]
[140.416, "o", "                return self._new_view(\r\n"]
[140.426, "o", "                    self.value.copy(), self.unit / other, propagate_info=False\r\n"]
[140.436, "o", "                )\r\n"]
[140.446, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[140.456, "o", "                return NotImplemented\r\n"]
[140.466, "o", "\r\n"]
[140.476, "o", "        return super().__truediv__(other)\r\n"]
[140.486, "o", "\r\n"]
[140.496, "o", "    def __itruediv__(self, other):\r\n"]
[140.506, "o", "        \"\"\"Inplace division between `Quantity` objects and other objects.\"\"\"\r\n"]
[140.516, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[140.526, "o", "            self._set_unit(self.unit / other)\r\n"]
[140.536, "o", "            return self\r\n"]
[140.546, "o", "\r\n"]
[140.556, "o", "        return super().__itruediv__(other)\r\n"]
[140.566, "o", "\r\n"]
[140.576, "o", "    def __rtruediv__(self, other):\r\n"]
[140.586, "o", "        \"\"\"Right Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[140.596, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[140.606, "o", "            return self._new_view(\r\n"]
[140.616, "o", "                1.0 / self.value, other / self.unit, propagate_info=False\r\n"]
[140.626, "o", "            )\r\n"]
[140.636, "o", "\r\n"]
[140.646, "o", "        return super().__rtruediv__(other)\r\n"]
[140.656, "o", "\r\n"]
[140.666, "o", "    def __pow__(self, other):\r\n"]
[140.676, "o", "        if isinstance(other, Fraction):\r\n"]
[140.686, "o", "            # Avoid getting object arrays by raising the value to a Fraction.\r\n"]
[140.696, "o", "            return self._new_view(\r\n"]
[140.706, "o", "                self.value ** float(other), self.unit**other, propagate_info=False\r\n"]
[140.716, "o", "            )\r\n"]
[140.726, "o", "\r\n"]
[140.736, "o", "        return super().__pow__(other)\r\n"]
[140.746, "o", "\r\n"]
[140.756, "o", "    # other overrides of special functions\r\n"]
[140.766, "o", "    def __hash__(self):\r\n"]
[140.776, "o", "        return hash(self.value) ^ hash(self.unit)\r\n"]
[140.786, "o", "\r\n"]
[140.796, "o", "    def __iter__(self):\r\n"]
[140.806, "o", "        if self.isscalar:\r\n"]
[140.816, "o", "            raise TypeError(\r\n"]
[140.826, "o", "                f\"'{self.__class__.__name__}' object with a scalar value is not\"\r\n"]
[140.836, "o", "                \" iterable\"\r\n"]
[140.846, "o", "            )\r\n"]
[140.856, "o", "\r\n"]
[140.866, "o", "        # Otherwise return a generator\r\n"]
[140.876, "o", "        def quantity_iter():\r\n"]
[140.886, "o", "            for val in self.value:\r\n"]
[140.896, "o", "                yield self._new_view(val)\r\n"]
[140.906, "o", "\r\n"]
[140.916, "o", "        return quantity_iter()\r\n"]
[140.926, "o", "\r\n"]
[140.936, "o", "    def __getitem__(self, key):\r\n"]
[140.946, "o", "        if isinstance(key, str) and isinstance(self.unit, StructuredUnit):\r\n"]
[140.956, "o", "            return self._new_view(\r\n"]
[140.966, "o", "                self.view(np.ndarray)[key], self.unit[key], propagate_info=False\r\n"]
[140.976, "o", "            )\r\n"]
[140.986, "o", "\r\n"]
[140.996, "o", "        try:\r\n"]
[141.006, "o", "            out = super().__getitem__(key)\r\n"]
[141.016, "o", "        except IndexError:\r\n"]
[141.026, "o", "            # We want zero-dimensional Quantity objects to behave like scalars,\r\n"]
[141.036, "o", "            # so they should raise a TypeError rather than an IndexError.\r\n"]
[141.046, "o", "            if self.isscalar:\r\n"]
[141.056, "o", "                raise TypeError(\r\n"]
[141.066, "o", "                    f\"'{self.__class__.__name__}' object with a scalar value \"\r\n"]
[141.076, "o", "                    \"does not support indexing\"\r\n"]
[141.086, "o", "                )\r\n"]
[141.096, "o", "            else:\r\n"]
[141.106, "o", "                raise\r\n"]
[141.116, "o", "        # For single elements, ndarray.__getitem__ returns scalars; these\r\n"]
[141.126, "o", "        # need a new view as a Quantity.\r\n"]
[141.136, "o", "        if not isinstance(out, np.ndarray):\r\n"]
[141.146, "o", "            out = self._new_view(out)\r\n"]
[141.156, "o", "        return out\r\n"]
[141.166, "o", "\r\n"]
[141.176, "o", "    def __setitem__(self, i, value):\r\n"]
[141.186, "o", "        if isinstance(i, str):\r\n"]
[141.196, "o", "            # Indexing will cause a different unit, so by doing this in\r\n"]
[141.206, "o", "            # two steps we effectively try with the right unit.\r\n"]
[141.216, "o", "            self[i][...] = value\r\n"]
[141.226, "o", "            return\r\n"]
[141.236, "o", "\r\n"]
[141.246, "o", "        # update indices in info if the info property has been accessed\r\n"]
[141.256, "o", "        # (in which case 'info' in self.__dict__ is True; this is guaranteed\r\n"]
[141.266, "o", "        # to be the case if we're part of a table).\r\n"]
[141.276, "o", "        if not self.isscalar and \"info\" in self.__dict__:\r\n"]
[141.286, "o", "            self.info.adjust_indices(i, value, len(self))\r\n"]
[141.296, "o", "        self.view(np.ndarray).__setitem__(i, self._to_own_unit(value))\r\n"]
[141.306, "o", "\r\n"]
[141.316, "o", "    # __contains__ is OK\r\n"]
[141.326, "o", "\r\n"]
[141.336, "o", "    def __bool__(self):\r\n"]
[141.346, "o", "        \"\"\"This method raises ValueError, since truthiness of quantities is ambiguous,\r\n"]
[141.356, "o", "        especially for logarithmic units and temperatures. Use explicit comparisons.\r\n"]
[141.366, "o", "        \"\"\"\r\n"]
[141.376, "o", "        raise ValueError(\r\n"]
[141.386, "o", "            f\"{type(self).__name__} truthiness is ambiguous, especially for logarithmic units\"\r\n"]
[141.396, "o", "            \" and temperatures. Use explicit comparisons.\"\r\n"]
[141.406, "o", "        )\r\n"]
[141.416, "o", "\r\n"]
[141.426, "o", "    def __len__(self):\r\n"]
[141.436, "o", "        if self.isscalar:\r\n"]
[141.446, "o", "            raise TypeError(\r\n"]
[141.456, "o", "                f\"'{self.__class__.__name__}' object with a scalar value has no len()\"\r\n"]
[141.466, "o", "            )\r\n"]
[141.476, "o", "        else:\r\n"]
[141.486, "o", "            return len(self.value)\r\n"]
[141.496, "o", "\r\n"]
[141.506, "o", "    # Numerical types\r\n"]
[141.516, "o", "    def __float__(self):\r\n"]
[141.526, "o", "        try:\r\n"]
[141.536, "o", "            return float(self.to_value(dimensionless_unscaled))\r\n"]
[141.546, "o", "        except (UnitsError, TypeError):\r\n"]
[141.556, "o", "            raise TypeError(\r\n"]
[141.566, "o", "                \"only dimensionless scalar quantities can be \"\r\n"]
[141.576, "o", "                \"converted to Python scalars\"\r\n"]
[141.586, "o", "            )\r\n"]
[141.596, "o", "\r\n"]
[141.606, "o", "    def __int__(self):\r\n"]
[141.616, "o", "        try:\r\n"]
[141.626, "o", "            return int(self.to_value(dimensionless_unscaled))\r\n"]
[141.636, "o", "        except (UnitsError, TypeError):\r\n"]
[141.646, "o", "            raise TypeError(\r\n"]
[141.656, "o", "                \"only dimensionless scalar quantities can be \"\r\n"]
[141.666, "o", "                \"converted to Python scalars\"\r\n"]
[141.676, "o", "            )\r\n"]
[141.686, "o", "\r\n"]
[141.696, "o", "    def __index__(self):\r\n"]
[141.706, "o", "        # for indices, we do not want to mess around with scaling at all,\r\n"]
[141.716, "o", "        # so unlike for float, int, we insist here on unscaled dimensionless\r\n"]
[141.726, "o", "        try:\r\n"]
[141.736, "o", "            assert self.unit.is_unity()\r\n"]
[141.746, "o", "            return self.value.__index__()\r\n"]
[141.756, "o", "        except Exception:\r\n"]
[141.766, "o", "            raise TypeError(\r\n"]
[141.776, "o", "                \"only integer dimensionless scalar quantities \"\r\n"]
[141.786, "o", "                \"can be converted to a Python index\"\r\n"]
[141.796, "o", "            )\r\n"]
[141.806, "o", "\r\n"]
[141.816, "o", "    # TODO: we may want to add a hook for dimensionless quantities?\r\n"]
[141.826, "o", "    @property\r\n"]
[141.836, "o", "    def _unitstr(self):\r\n"]
[141.846, "o", "        if self.unit is None:\r\n"]
[141.856, "o", "            unitstr = _UNIT_NOT_INITIALISED\r\n"]
[141.866, "o", "        else:\r\n"]
[141.876, "o", "            unitstr = str(self.unit)\r\n"]
[141.886, "o", "\r\n"]
[141.896, "o", "        if unitstr:\r\n"]
[141.906, "o", "            unitstr = \" \" + unitstr\r\n"]
[141.916, "o", "\r\n"]
[141.926, "o", "        return unitstr\r\n"]
[141.936, "o", "\r\n"]
[141.946, "o", "    def to_string(\r\n"]
[141.956, "o", "        self, unit=None, precision=None, format=None, subfmt=None, *, formatter=None\r\n"]
[141.966, "o", "    ):\r\n"]
[141.976, "o", "        \"\"\"\r\n"]
[141.986, "o", "        Generate a string representation of the quantity and its unit.\r\n"]
[141.996, "o", "\r\n"]
[142.006, "o", "        The behavior of this function can be altered via the\r\n"]
[142.016, "o", "        `numpy.set_printoptions` function and its various keywords.  The\r\n"]
[142.026, "o", "        exception to this is the ``threshold`` keyword, which is controlled via\r\n"]
[142.036, "o", "        the ``[units.quantity]`` configuration item ``latex_array_threshold``.\r\n"]
[142.046, "o", "        This is treated separately because the numpy default of 1000 is too big\r\n"]
[142.056, "o", "        for most browsers to handle.\r\n"]
[142.066, "o", "\r\n"]
[142.076, "o", "        Parameters\r\n"]
[142.086, "o", "        ----------\r\n"]
[142.096, "o", "        unit : unit-like, optional\r\n"]
[142.106, "o", "            Specifies the unit.  If not provided,\r\n"]
[142.116, "o", "            the unit used to initialize the quantity will be used.\r\n"]
[142.126, "o", "\r\n"]
[142.136, "o", "        precision : number, optional\r\n"]
[142.146, "o", "            The level of decimal precision. If `None`, or not provided,\r\n"]
[142.156, "o", "            it will be determined from NumPy print options.\r\n"]
[142.166, "o", "\r\n"]
[142.176, "o", "        format : str, optional\r\n"]
[142.186, "o", "            The format of the result. If not provided, an unadorned\r\n"]
[142.196, "o", "            string is returned. Supported values are:\r\n"]
[142.206, "o", "\r\n"]
[142.216, "o", "            - 'latex': Return a LaTeX-formatted string\r\n"]
[142.226, "o", "\r\n"]
[142.236, "o", "            - 'latex_inline': Return a LaTeX-formatted string that uses\r\n"]
[142.246, "o", "              negative exponents instead of fractions\r\n"]
[142.256, "o", "\r\n"]
[142.266, "o", "        formatter : str, callable, dict, optional\r\n"]
[142.276, "o", "            The formatter to use for the value. If a string, it should be a\r\n"]
[142.286, "o", "            valid format specifier using Python's mini-language. If a callable,\r\n"]
[142.296, "o", "            it will be treated as the default formatter for all values and will\r\n"]
[142.306, "o", "            overwrite default Latex formatting for exponential notation and complex\r\n"]
[142.316, "o", "            numbers. If a dict, it should map a specific type to a callable to be\r\n"]
[142.326, "o", "            directly passed into `numpy.array2string`. If not provided, the default\r\n"]
[142.336, "o", "            formatter will be used.\r\n"]
[142.346, "o", "\r\n"]
[142.356, "o", "        subfmt : str, optional\r\n"]
[142.366, "o", "            Subformat of the result. For the moment, only used for\r\n"]
[142.376, "o", "            ``format='latex'`` and ``format='latex_inline'``. Supported\r\n"]
[142.386, "o", "            values are:\r\n"]
[142.396, "o", "\r\n"]
[142.406, "o", "            - 'inline': Use ``$ ... $`` as delimiters.\r\n"]
[142.416, "o", "\r\n"]
[142.426, "o", "            - 'display': Use ``$\\\\displaystyle ... $`` as delimiters.\r\n"]
[142.436, "o", "\r\n"]
[142.446, "o", "        Returns\r\n"]
[142.456, "o", "        -------\r\n"]
[142.466, "o", "        str\r\n"]
[142.476, "o", "            A string with the contents of this Quantity\r\n"]
[142.486, "o", "        \"\"\"\r\n"]
[142.496, "o", "        if unit is not None and unit != self.unit:\r\n"]
[142.506, "o", "            return self.to(unit).to_string(\r\n"]
[142.516, "o", "                unit=None,\r\n"]
[142.526, "o", "                precision=precision,\r\n"]
[142.536, "o", "                format=format,\r\n"]
[142.546, "o", "                subfmt=subfmt,\r\n"]
[142.556, "o", "                formatter=formatter,\r\n"]
[142.566, "o", "            )\r\n"]
[142.576, "o", "\r\n"]
[142.586, "o", "        if format is None and formatter is None and precision is None:\r\n"]
[142.596, "o", "            # Use default formatting settings\r\n"]
[142.606, "o", "            return f\"{self.value}{self._unitstr:s}\"\r\n"]
[142.616, "o", "\r\n"]
[142.626, "o", "        formats = {\r\n"]
[142.636, "o", "            None: None,\r\n"]
[142.646, "o", "            \"latex\": {\r\n"]
[142.656, "o", "                None: (\"$\", \"$\"),\r\n"]
[142.666, "o", "                \"inline\": (\"$\", \"$\"),\r\n"]
[142.676, "o", "                \"display\": (r\"$\\displaystyle \", r\"$\"),\r\n"]
[142.686, "o", "            },\r\n"]
[142.696, "o", "        }\r\n"]
[142.706, "o", "        formats[\"latex_inline\"] = formats[\"latex\"]\r\n"]
[142.716, "o", "\r\n"]
[142.726, "o", "        if format not in formats:\r\n"]
[142.736, "o", "            raise ValueError(f\"Unknown format '{format}'\")\r\n"]
[142.746, "o", "\r\n"]
[142.756, "o", "        format_spec = formatter if isinstance(formatter, str) else None\r\n"]
[142.766, "o", "\r\n"]
[142.776, "o", "        if format is None:\r\n"]
[142.786, "o", "            if format_spec is not None:\r\n"]
[142.796, "o", "\r\n"]
[142.806, "o", "                def formatter(value):\r\n"]
[142.816, "o", "                    return builtins.format(value, format_spec)\r\n"]
[142.826, "o", "\r\n"]
[142.836, "o", "            if callable(formatter):\r\n"]
[142.846, "o", "                formatter = {\"all\": formatter}\r\n"]
[142.856, "o", "\r\n"]
[142.866, "o", "            return (\r\n"]
[142.876, "o", "                np.array2string(\r\n"]
[142.886, "o", "                    self.value,\r\n"]
[142.896, "o", "                    precision=precision,\r\n"]
[142.906, "o", "                    floatmode=\"fixed\",\r\n"]
[142.916, "o", "                    formatter=formatter,\r\n"]
[142.926, "o", "                )\r\n"]
[142.936, "o", "                + self._unitstr\r\n"]
[142.946, "o", "            )\r\n"]
[142.956, "o", "\r\n"]
[142.966, "o", "        # else, for the moment we assume format=\"latex\" or \"latex_inline\".\r\n"]
[142.976, "o", "\r\n"]
[142.986, "o", "        # Set the precision if set, otherwise use numpy default\r\n"]
[142.996, "o", "        pops = np.get_printoptions()\r\n"]
[143.006, "o", "        if format_spec is None:\r\n"]
[143.016, "o", "            format_spec = (\r\n"]
[143.026, "o", "                f\".{precision if precision is not None else pops['precision']}g\"\r\n"]
[143.036, "o", "            )\r\n"]
[143.046, "o", "\r\n"]
[143.056, "o", "        # Use default formatters\r\n"]
[143.066, "o", "        if formatter is None or isinstance(formatter, str):\r\n"]
[143.076, "o", "            # Filter width and alignment operations for latex\r\n"]
[143.086, "o", "            # [[fill]align][sign][\"z\"][\"#\"][\"0\"][width][grouping_option][\".\" precision][type]\r\n"]
[143.096, "o", "            format_spec = re.sub(\r\n"]
[143.106, "o", "                r\"(.*?)([+\\- ]?)(\\d+)?(,)?(\\.\\d+)?([a-zA-Z%]+)?$\",\r\n"]
[143.116, "o", "                r\"\\2\\5\\6\",\r\n"]
[143.126, "o", "                format_spec,\r\n"]
[143.136, "o", "            )\r\n"]
[143.146, "o", "\r\n"]
[143.156, "o", "            if self.dtype.kind == \"c\":  # Complex default latex formatter\r\n"]
[143.166, "o", "                # Disallow sign operations for the imaginary part\r\n"]
[143.176, "o", "                imag_format_spec = re.sub(r\"[+\\- ]\", \"\", format_spec)\r\n"]
[143.186, "o", "\r\n"]
[143.196, "o", "                def formatter(value):\r\n"]
[143.206, "o", "                    return \"({}{}i)\".format(\r\n"]
[143.216, "o", "                        Latex.format_exponential_notation(\r\n"]
[143.226, "o", "                            value.real, format_spec=format_spec\r\n"]
[143.236, "o", "                        ),\r\n"]
[143.246, "o", "                        Latex.format_exponential_notation(\r\n"]
[143.256, "o", "                            value.imag, format_spec=\"+\" + imag_format_spec\r\n"]
[143.266, "o", "                        ),\r\n"]
[143.276, "o", "                    )\r\n"]
[143.286, "o", "\r\n"]
[143.296, "o", "            else:  # Float default latex formatter\r\n"]
[143.306, "o", "\r\n"]
[143.316, "o", "                def formatter(value):\r\n"]
[143.326, "o", "                    return Latex.format_exponential_notation(\r\n"]
[143.336, "o", "                        value, format_spec=format_spec\r\n"]
[143.346, "o", "                    )\r\n"]
[143.356, "o", "\r\n"]
[143.366, "o", "        if callable(formatter):\r\n"]
[143.376, "o", "            formatter = {\"all\": formatter}\r\n"]
[143.386, "o", "\r\n"]
[143.396, "o", "        # The view is needed for the scalar case - self.value might be float.\r\n"]
[143.406, "o", "        latex_value = np.array2string(\r\n"]
[143.416, "o", "            self.view(np.ndarray),\r\n"]
[143.426, "o", "            threshold=(\r\n"]
[143.436, "o", "                conf.latex_array_threshold\r\n"]
[143.446, "o", "                if conf.latex_array_threshold > -1\r\n"]
[143.456, "o", "                else pops[\"threshold\"]\r\n"]
[143.466, "o", "            ),\r\n"]
[143.476, "o", "            formatter=formatter,\r\n"]
[143.486, "o", "            max_line_width=np.inf,\r\n"]
[143.496, "o", "            separator=\",~\",\r\n"]
[143.506, "o", "        )\r\n"]
[143.516, "o", "\r\n"]
[143.526, "o", "        latex_value = latex_value.replace(\"...\", r\"\\dots\")\r\n"]
[143.536, "o", "\r\n"]
[143.546, "o", "        # Format unit\r\n"]
[143.556, "o", "        # [1:-1] strips the '$' on either side needed for math mode\r\n"]
[143.566, "o", "        if self.unit is None:\r\n"]
[143.576, "o", "            latex_unit = _UNIT_NOT_INITIALISED\r\n"]
[143.586, "o", "        elif format == \"latex\":\r\n"]
[143.596, "o", "            latex_unit = self.unit._repr_latex_()[1:-1]  # note this is unicode\r\n"]
[143.606, "o", "        elif format == \"latex_inline\":\r\n"]
[143.616, "o", "            latex_unit = self.unit.to_string(format=\"latex_inline\")[1:-1]\r\n"]
[143.626, "o", "\r\n"]
[143.636, "o", "        delimiter_left, delimiter_right = formats[format][subfmt]\r\n"]
[143.646, "o", "\r\n"]
[143.656, "o", "        # Add a space in front except for super-script units like degrees.\r\n"]
[143.666, "o", "        if not latex_unit.removeprefix(\"\\\\mathrm{\").startswith(\"{}^\"):\r\n"]
[143.676, "o", "            latex_unit = rf\" \\; {latex_unit}\"\r\n"]
[143.686, "o", "\r\n"]
[143.696, "o", "        return rf\"{delimiter_left}{latex_value}{latex_unit}{delimiter_right}\"\r\n"]
[143.706, "o", "\r\n"]
[143.716, "o", "    def __str__(self):\r\n"]
[143.726, "o", "        return self.to_string()\r\n"]
[143.736, "o", "\r\n"]
[143.746, "o", "    def __repr__(self):\r\n"]
[143.756, "o", "        prefixstr = \"<\" + self.__class__.__name__ + \" \"\r\n"]
[143.766, "o", "        arrstr = np.array2string(\r\n"]
[143.776, "o", "            self.view(np.ndarray), separator=\", \", prefix=prefixstr\r\n"]
[143.786, "o", "        )\r\n"]
[143.796, "o", "        return f\"{prefixstr}{arrstr}{self._unitstr:s}>\"\r\n"]
[143.806, "o", "\r\n"]
[143.816, "o", "    def _repr_latex_(self):\r\n"]
[143.826, "o", "        \"\"\"\r\n"]
[143.836, "o", "        Generate a latex representation of the quantity and its unit.\r\n"]
[143.846, "o", "\r\n"]
[143.856, "o", "        Returns\r\n"]
[143.866, "o", "        -------\r\n"]
[143.876, "o", "        lstr\r\n"]
[143.886, "o", "            A LaTeX string with the contents of this Quantity\r\n"]
[143.896, "o", "        \"\"\"\r\n"]
[143.906, "o", "        # NOTE: This should change to display format in a future release\r\n"]
[143.916, "o", "        return self.to_string(format=\"latex\", subfmt=\"inline\")\r\n"]
[143.926, "o", "\r\n"]
[143.936, "o", "    def __format__(self, format_spec):\r\n"]
[143.946, "o", "        try:\r\n"]
[143.956, "o", "            return self.to_string(format=format_spec)\r\n"]
[143.966, "o", "        except ValueError:\r\n"]
[143.976, "o", "            # We might have a unit format not implemented in `to_string()`.\r\n"]
[143.986, "o", "            if format_spec in Base.registry:\r\n"]
[143.996, "o", "                if self.unit is dimensionless_unscaled:\r\n"]
[144.006, "o", "                    return f\"{self.value}\"\r\n"]
[144.016, "o", "                else:\r\n"]
[144.026, "o", "                    return f\"{self.value} {format(self.unit, format_spec)}\"\r\n"]
[144.036, "o", "            # Can the value be formatted on its own?\r\n"]
[144.046, "o", "            try:\r\n"]
[144.056, "o", "                return f\"{format(self.value, format_spec)}{self._unitstr:s}\"\r\n"]
[144.066, "o", "            except ValueError:\r\n"]
[144.076, "o", "                # Format the whole thing as a single string.\r\n"]
[144.086, "o", "                return format(f\"{self.value}{self._unitstr:s}\", format_spec)\r\n"]
[144.096, "o", "\r\n"]
[144.106, "o", "    def decompose(self, bases=[]):\r\n"]
[144.116, "o", "        \"\"\"\r\n"]
[144.126, "o", "        Generates a new `Quantity` with the units\r\n"]
[144.136, "o", "        decomposed. Decomposed units have only irreducible units in\r\n"]
[144.146, "o", "        them (see `astropy.units.UnitBase.decompose`).\r\n"]
[144.156, "o", "\r\n"]
[144.166, "o", "        Parameters\r\n"]
[144.176, "o", "        ----------\r\n"]
[144.186, "o", "        bases : sequence of `~astropy.units.UnitBase`, optional\r\n"]
[144.196, "o", "            The bases to decompose into.  When not provided,\r\n"]
[144.206, "o", "            decomposes down to any irreducible units.  When provided,\r\n"]
[144.216, "o", "            the decomposed result will only contain the given units.\r\n"]
[144.226, "o", "            This will raises a `~astropy.units.UnitsError` if it's not possible\r\n"]
[144.236, "o", "            to do so.\r\n"]
[144.246, "o", "\r\n"]
[144.256, "o", "        Returns\r\n"]
[144.266, "o", "        -------\r\n"]
[144.276, "o", "        newq : `~astropy.units.Quantity`\r\n"]
[144.286, "o", "            A new object equal to this quantity with units decomposed.\r\n"]
[144.296, "o", "        \"\"\"\r\n"]
[144.306, "o", "        return self._decompose(False, bases=bases)\r\n"]
[144.316, "o", "\r\n"]
[144.326, "o", "    def _decompose(self, allowscaledunits=False, bases=[]):\r\n"]
[144.336, "o", "        \"\"\"\r\n"]
[144.346, "o", "        Generates a new `Quantity` with the units decomposed. Decomposed\r\n"]
[144.356, "o", "        units have only irreducible units in them (see\r\n"]
[144.366, "o", "        `astropy.units.UnitBase.decompose`).\r\n"]
[144.376, "o", "\r\n"]
[144.386, "o", "        Parameters\r\n"]
[144.396, "o", "        ----------\r\n"]
[144.406, "o", "        allowscaledunits : bool\r\n"]
[144.416, "o", "            If True, the resulting `Quantity` may have a scale factor\r\n"]
[144.426, "o", "            associated with it.  If False, any scaling in the unit will\r\n"]
[144.436, "o", "            be subsumed into the value of the resulting `Quantity`\r\n"]
[144.446, "o", "\r\n"]
[144.456, "o", "        bases : sequence of UnitBase, optional\r\n"]
[144.466, "o", "            The bases to decompose into.  When not provided,\r\n"]
[144.476, "o", "            decomposes down to any irreducible units.  When provided,\r\n"]
[144.486, "o", "            the decomposed result will only contain the given units.\r\n"]
[144.496, "o", "            This will raises a `~astropy.units.UnitsError` if it's not possible\r\n"]
[144.506, "o", "            to do so.\r\n"]
[144.516, "o", "\r\n"]
[144.526, "o", "        Returns\r\n"]
[144.536, "o", "        -------\r\n"]
[144.546, "o", "        newq : `~astropy.units.Quantity`\r\n"]
[144.556, "o", "            A new object equal to this quantity with units decomposed.\r\n"]
[144.566, "o", "\r\n"]
[144.576, "o", "        \"\"\"\r\n"]
[144.586, "o", "        new_unit = self.unit.decompose(bases=bases)\r\n"]
[144.596, "o", "\r\n"]
[144.606, "o", "        # Be careful here because self.value usually is a view of self;\r\n"]
[144.616, "o", "        # be sure that the original value is not being modified.\r\n"]
[144.626, "o", "        if not allowscaledunits and hasattr(new_unit, \"scale\"):\r\n"]
[144.636, "o", "            new_value = self.value * new_unit.scale\r\n"]
[144.646, "o", "            new_unit = new_unit / new_unit.scale\r\n"]
[144.656, "o", "            return self._new_view(new_value, new_unit)\r\n"]
[144.666, "o", "        else:\r\n"]
[144.676, "o", "            return self._new_view(self.copy(), new_unit)\r\n"]
[144.686, "o", "\r\n"]
[144.696, "o", "    # These functions need to be overridden to take into account the units\r\n"]
[144.706, "o", "    # Array conversion\r\n"]
[144.716, "o", "    # https://numpy.org/doc/stable/reference/arrays.ndarray.html#array-conversion\r\n"]
[144.726, "o", "\r\n"]
[144.736, "o", "    def item(self, *args):\r\n"]
[144.746, "o", "        \"\"\"Copy an element of an array to a scalar Quantity and return it.\r\n"]
[144.756, "o", "\r\n"]
[144.766, "o", "        Like :meth:`~numpy.ndarray.item` except that it always\r\n"]
[144.776, "o", "        returns a `Quantity`, not a Python scalar.\r\n"]
[144.786, "o", "\r\n"]
[144.796, "o", "        \"\"\"\r\n"]
[144.806, "o", "        return self._new_view(super().item(*args))\r\n"]
[144.816, "o", "\r\n"]
[144.826, "o", "    def tolist(self):\r\n"]
[144.836, "o", "        raise NotImplementedError(\r\n"]
[144.846, "o", "            \"cannot make a list of Quantities. Get list of values with\"\r\n"]
[144.856, "o", "            \" q.value.tolist().\"\r\n"]
[144.866, "o", "        )\r\n"]
[144.876, "o", "\r\n"]
[144.886, "o", "    def _to_own_unit(self, value, check_precision=True, *, unit=None):\r\n"]
[144.896, "o", "        \"\"\"Convert value to one's own unit (or that given).\r\n"]
[144.906, "o", "\r\n"]
[144.916, "o", "        Here, non-quantities are treated as dimensionless, and care is taken\r\n"]
[144.926, "o", "        for values of 0, infinity or nan, which are allowed to have any unit.\r\n"]
[144.936, "o", "\r\n"]
[145.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[145.002, "i", "cat asv.ci.conf.json\r"]
[145.004, "o", "cat asv.ci.conf.json\r\n"]
[145.3356, "o", "\u001b[?2004l\r\n"]
[145.6652, "o", " {\r\n"]
[145.9948, "o", "   \"version\": 1,\r\n"]
[146.3244, "o", "   \"project\": \"astropy\",\r\n"]
[146.654, "o", "   \"project_url\": \"http://www.astropy.org/\",\r\n"]
[146.9836, "o", "   \"repo\": \".\",\r\n"]
[147.3132, "o", "   \"install_command\": [\r\n"]
[147.6428, "o", "     \"pip install . matplotlib scipy\"\r\n"]
[147.9724, "o", "   ],\r\n"]
[148.302, "o", "   \"branches\": [\"main\"],\r\n"]
[148.6316, "o", "   \"show_commit_url\": \"http://github.com/astropy/astropy/commit/\",\r\n"]
[148.9612, "o", "   \"pythons\": [\"3.11\"],\r\n"]
[149.2908, "o", "   \"environment_type\": \"virtualenv\",\r\n"]
[149.6204, "o", "   \"benchmark_dir\": \"astropy-benchmarks/benchmarks\"\r\n"]
[150.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[150.002, "i", "sed -n '1,240p' astropy-benchmarks/benchmarks/units.py\r"]
[150.004, "o", "sed -n '1,240p' astropy-benchmarks/benchmarks/units.py\r\n"]
[150.026861, "o", "\u001b[?2004l\r\n"]
[150.047722, "o", "import copy\r\n"]
[150.068582, "o", "\r\n"]
[150.089443, "o", "import numpy as np\r\n"]
[150.110304, "o", "from astropy import units as u\r\n"]
[150.131165, "o", "\r\n"]
[150.152025, "o", "\r\n"]
[150.172886, "o", "# Unit tests\r\n"]
[150.193747, "o", "\r\n"]
[150.214608, "o", "\r\n"]
[150.235468, "o", "def time_unit_compose():\r\n"]
[150.256329, "o", "    u.Ry.compose()\r\n"]
[150.27719, "o", "\r\n"]
[150.298051, "o", "\r\n"]
[150.318911, "o", "def time_unit_to():\r\n"]
[150.339772, "o", "    u.m.to(u.pc)\r\n"]
[150.360633, "o", "\r\n"]
[150.381494, "o", "\r\n"]
[150.402354, "o", "def time_unit_parse():\r\n"]
[150.423215, "o", "    u.Unit(\"1e-07 kg m2 / s2\")\r\n"]
[150.444076, "o", "\r\n"]
[150.464937, "o", "\r\n"]
[150.485797, "o", "def time_simple_unit_parse():\r\n"]
[150.506658, "o", "    u.Unit(\"1 d\")\r\n"]
[150.527519, "o", "\r\n"]
[150.54838, "o", "\r\n"]
[150.569241, "o", "def time_very_simple_unit_parse():\r\n"]
[150.590101, "o", "    u.Unit(\"d\")\r\n"]
[150.610962, "o", "\r\n"]
[150.631823, "o", "\r\n"]
[150.652684, "o", "def mem_unit():\r\n"]
[150.673544, "o", "    return u.erg\r\n"]
[150.694405, "o", "\r\n"]
[150.715266, "o", "\r\n"]
[150.736127, "o", "def time_compose_to_bases():\r\n"]
[150.756987, "o", "    x = copy.copy(u.Ry)\r\n"]
[150.777848, "o", "    x.cgs\r\n"]
[150.798709, "o", "\r\n"]
[150.81957, "o", "\r\n"]
[150.84043, "o", "def time_compose_complex():\r\n"]
[150.861291, "o", "    # Composing a complex unit can be very inefficient\r\n"]
[150.882152, "o", "    (u.kg / u.s**3 * u.au**2.5 / u.yr**0.5 / u.sr**2).compose()\r\n"]
[150.903013, "o", "\r\n"]
[150.923873, "o", "\r\n"]
[150.944734, "o", "# Quantity tests\r\n"]
[150.965595, "o", "\r\n"]
[150.986456, "o", "a = np.arange(100000.0)\r\n"]
[151.007316, "o", "b1 = [1.0, 2.0, 3.0]\r\n"]
[151.028177, "o", "b2 = np.asarray(b1)\r\n"]
[151.049038, "o", "q0 = u.Quantity(1.0, u.s)\r\n"]
[151.069899, "o", "q1 = u.Quantity(a, u.m)\r\n"]
[151.090759, "o", "q2 = u.Quantity(a[:10000], u.deg)\r\n"]
[151.11162, "o", "\r\n"]
[151.132481, "o", "\r\n"]
[151.153342, "o", "def time_quantity_creation():\r\n"]
[151.174203, "o", "    u.Quantity(a, u.m)\r\n"]
[151.195063, "o", "\r\n"]
[151.215924, "o", "\r\n"]
[151.236785, "o", "def time_quantity_creation_nocopy():\r\n"]
[151.257646, "o", "    u.Quantity(a, u.m, copy=False)\r\n"]
[151.278506, "o", "\r\n"]
[151.299367, "o", "\r\n"]
[151.320228, "o", "def time_quantity_view():\r\n"]
[151.341089, "o", "    q1.view(u.Quantity)\r\n"]
[151.361949, "o", "\r\n"]
[151.38281, "o", "\r\n"]
[151.403671, "o", "def time_quantity_init_scalar():\r\n"]
[151.424532, "o", "    3.0 * u.m / u.s\r\n"]
[151.445392, "o", "\r\n"]
[151.466253, "o", "\r\n"]
[151.487114, "o", "def time_quantity_init_array():\r\n"]
[151.507975, "o", "    a * u.m / u.s\r\n"]
[151.528835, "o", "\r\n"]
[151.549696, "o", "\r\n"]
[151.570557, "o", "def time_quantity_init_small_list():\r\n"]
[151.591418, "o", "    \"\"\"\r\n"]
[151.612278, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[151.633139, "o", "    for small list.\r\n"]
[151.654, "o", "    \"\"\"\r\n"]
[151.674861, "o", "    b1 * u.m / u.s\r\n"]
[151.695722, "o", "\r\n"]
[151.716582, "o", "\r\n"]
[151.737443, "o", "def time_quantity_init_small_array():\r\n"]
[151.758304, "o", "    \"\"\"\r\n"]
[151.779165, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[151.800025, "o", "    for small array.\r\n"]
[151.820886, "o", "    \"\"\"\r\n"]
[151.841747, "o", "    b2 * u.m / u.s\r\n"]
[151.862608, "o", "\r\n"]
[151.883468, "o", "\r\n"]
[151.904329, "o", "def time_quantity_scalar_conversion():\r\n"]
[151.92519, "o", "    (3.0 * u.m / u.s).to(u.km / u.hour)\r\n"]
[151.946051, "o", "\r\n"]
[151.966911, "o", "\r\n"]
[151.987772, "o", "def time_quantity_array_conversion():\r\n"]
[152.008633, "o", "    (a * u.m / u.s).to(u.km / u.hour)\r\n"]
[152.029494, "o", "\r\n"]
[152.050354, "o", "\r\n"]
[152.071215, "o", "def time_quantity_times_unit():\r\n"]
[152.092076, "o", "    q1 * u.m\r\n"]
[152.112937, "o", "\r\n"]
[152.133797, "o", "\r\n"]
[152.154658, "o", "def time_quantity_times_quantity():\r\n"]
[152.175519, "o", "    q1 * q0\r\n"]
[152.19638, "o", "\r\n"]
[152.217241, "o", "\r\n"]
[152.238101, "o", "def time_quantity_ufunc_sin():\r\n"]
[152.258962, "o", "    np.sin(q2)\r\n"]
[152.279823, "o", "\r\n"]
[152.300684, "o", "\r\n"]
[152.321544, "o", "class TimeQuantityOpSmallArray:\r\n"]
[152.342405, "o", "    \"\"\"\r\n"]
[152.363266, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[152.384127, "o", "    for a small Numpy array.\r\n"]
[152.404987, "o", "    \"\"\"\r\n"]
[152.425848, "o", "\r\n"]
[152.446709, "o", "    def setup(self):\r\n"]
[152.46757, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[152.48843, "o", "        self.data = data * u.g\r\n"]
[152.509291, "o", "        self.out_sq = data * u.g**2\r\n"]
[152.530152, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[152.551013, "o", "\r\n"]
[152.571873, "o", "    def time_quantity_square(self):\r\n"]
[152.592734, "o", "        self.data**2\r\n"]
[152.613595, "o", "\r\n"]
[152.634456, "o", "    def time_quantity_np_square(self):\r\n"]
[152.655316, "o", "        np.power(self.data, 2)\r\n"]
[152.676177, "o", "\r\n"]
[152.697038, "o", "    def time_quantity_np_square_out(self):\r\n"]
[152.717899, "o", "        np.power(self.data, 2, out=self.out_sq)\r\n"]
[152.738759, "o", "\r\n"]
[152.75962, "o", "    def time_quantity_sqrt(self):\r\n"]
[152.780481, "o", "        self.data**0.5\r\n"]
[152.801342, "o", "\r\n"]
[152.822203, "o", "    def time_quantity_np_sqrt(self):\r\n"]
[152.843063, "o", "        np.sqrt(self.data)\r\n"]
[152.863924, "o", "\r\n"]
[152.884785, "o", "    def time_quantity_np_sqrt_out(self):\r\n"]
[152.905646, "o", "        np.sqrt(self.data, out=self.out_sqrt)\r\n"]
[152.926506, "o", "\r\n"]
[152.947367, "o", "\r\n"]
[152.968228, "o", "class TimeQuantityOpLargeArray(TimeQuantityOpSmallArray):\r\n"]
[152.989089, "o", "    \"\"\"\r\n"]
[153.009949, "o", "    Like :class:`TimeQuantityOpSmallArray` but for a large Numpy array.\r\n"]
[153.03081, "o", "    \"\"\"\r\n"]
[153.051671, "o", "\r\n"]
[153.072532, "o", "    def setup(self):\r\n"]
[153.093392, "o", "        data = np.arange(1e6) + 1\r\n"]
[153.114253, "o", "        self.data = data * u.g\r\n"]
[153.135114, "o", "        self.out_sq = data * u.g**2\r\n"]
[153.155975, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[153.176835, "o", "\r\n"]
[153.197696, "o", "\r\n"]
[153.218557, "o", "class TimeQuantityOpSmallArrayDiffUnit:\r\n"]
[153.239418, "o", "    \"\"\"\r\n"]
[153.260278, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[153.281139, "o", "    for small Numpy arrays with different units.\r\n"]
[153.302, "o", "    \"\"\"\r\n"]
[153.322861, "o", "\r\n"]
[153.343722, "o", "    def setup(self):\r\n"]
[153.364582, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[153.385443, "o", "        self.data = data * u.g\r\n"]
[153.406304, "o", "\r\n"]
[153.427165, "o", "        # A different but dimensionally compatible unit\r\n"]
[153.448025, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[153.468886, "o", "\r\n"]
[153.489747, "o", "    def time_quantity_equal(self):\r\n"]
[153.510608, "o", "        # Same as operator.eq\r\n"]
[153.531468, "o", "        self.data == self.data2\r\n"]
[153.552329, "o", "\r\n"]
[153.57319, "o", "    def time_quantity_np_equal(self):\r\n"]
[153.594051, "o", "        np.equal(self.data, self.data2)\r\n"]
[153.614911, "o", "\r\n"]
[153.635772, "o", "    def time_quantity_truediv(self):\r\n"]
[153.656633, "o", "        # Since benchmark is PY3 only, this is always true divide.\r\n"]
[153.677494, "o", "        # Same as operator.truediv\r\n"]
[153.698354, "o", "        self.data / self.data2\r\n"]
[153.719215, "o", "\r\n"]
[153.740076, "o", "    def time_quantity_np_truediv(self):\r\n"]
[153.760937, "o", "        np.true_divide(self.data, self.data2)\r\n"]
[153.781797, "o", "\r\n"]
[153.802658, "o", "    def time_quantity_mul(self):\r\n"]
[153.823519, "o", "        # Same as operator.mul\r\n"]
[153.84438, "o", "        self.data * self.data2\r\n"]
[153.865241, "o", "\r\n"]
[153.886101, "o", "    def time_quantity_np_multiply(self):\r\n"]
[153.906962, "o", "        np.multiply(self.data, self.data2)\r\n"]
[153.927823, "o", "\r\n"]
[153.948684, "o", "    def time_quantity_sub(self):\r\n"]
[153.969544, "o", "        # Same as operator.sub\r\n"]
[153.990405, "o", "        self.data - self.data2\r\n"]
[154.011266, "o", "\r\n"]
[154.032127, "o", "    def time_quantity_np_subtract(self):\r\n"]
[154.052987, "o", "        np.subtract(self.data, self.data2)\r\n"]
[154.073848, "o", "\r\n"]
[154.094709, "o", "    def time_quantity_add(self):\r\n"]
[154.11557, "o", "        # Same as operator.add\r\n"]
[154.13643, "o", "        self.data + self.data2\r\n"]
[154.157291, "o", "\r\n"]
[154.178152, "o", "    def time_quantity_np_add(self):\r\n"]
[154.199013, "o", "        np.add(self.data, self.data2)\r\n"]
[154.219873, "o", "\r\n"]
[154.240734, "o", "\r\n"]
[154.261595, "o", "class TimeQuantityOpSmallArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[154.282456, "o", "    \"\"\"\r\n"]
[154.303316, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[154.324177, "o", "    for small Numpy arrays with same units.\r\n"]
[154.345038, "o", "    \"\"\"\r\n"]
[154.365899, "o", "\r\n"]
[154.386759, "o", "    def setup(self):\r\n"]
[154.40762, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[154.428481, "o", "        self.data = data * u.g\r\n"]
[154.449342, "o", "        self.data2 = self.data.copy()\r\n"]
[154.470203, "o", "\r\n"]
[154.491063, "o", "\r\n"]
[154.511924, "o", "class TimeQuantityOpLargeArrayDiffUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[154.532785, "o", "    \"\"\"\r\n"]
[154.553646, "o", "    Like :class:`TimeQuantityOpSmallArrayDiffUnit` but for large Numpy arrays.\r\n"]
[154.574506, "o", "    \"\"\"\r\n"]
[154.595367, "o", "\r\n"]
[154.616228, "o", "    def setup(self):\r\n"]
[154.637089, "o", "        data = np.arange(1e6) + 1\r\n"]
[154.657949, "o", "        self.data = data * u.g\r\n"]
[154.67881, "o", "\r\n"]
[154.699671, "o", "        # A different but dimensionally compatible unit\r\n"]
[154.720532, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[154.741392, "o", "\r\n"]
[154.762253, "o", "\r\n"]
[154.783114, "o", "class TimeQuantityOpLargeArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[154.803975, "o", "    \"\"\"\r\n"]
[154.824835, "o", "    Like :class:`TimeQuantityOpSmallArraySameUnit` but for large Numpy arrays.\r\n"]
[154.845696, "o", "    \"\"\"\r\n"]
[154.866557, "o", "\r\n"]
[154.887418, "o", "    def setup(self):\r\n"]
[154.908278, "o", "        data = np.arange(1e6) + 1\r\n"]
[154.929139, "o", "        self.data = data * u.g\r\n"]
[155.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[155.002, "i", "asv dev -c asv.ci.conf.json -b \"units.time_quantity_init_small_list|units.time_quantity_creation_nocopy|units.time_\r"]
[155.004, "o", "asv dev -c asv.ci.conf.json -b \"units.time_quantity_init_small_list|units.time_quantity_creation_nocopy|units.time_\r\n"]
[155.9948, "o", "_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view\"\r\n"]
[156.9836, "o", "\u001b[?2004l\r\n"]
[157.9724, "o", "usage: asv [-h] [--verbose] [--config CONFIG] [--version]\r\n"]
[158.9612, "o", "           {help,quickstart,machine,setup,run,continuous,find,rm,publish,preview,profile,update,show,compare,check,gh-pages} ...\r\n"]
[160.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[160.002, "i", "asv profile -c asv.ci.conf.json units.time_quantity_times_unit\r"]
[160.004, "o", "asv profile -c asv.ci.conf.json units.time_quantity_times_unit\r\n"]
[161.242, "o", "\u001b[?2004l\r\n"]
[162.478, "o", "usage: asv [-h] [--verbose] [--config CONFIG] [--version]\r\n"]
[163.714, "o", "           {help,quickstart,machine,setup,run,continuous,find,rm,publish,preview,profile,update,show,compare,check,gh-pages} ...\r\n"]
[165.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[165.002, "i", "sed -n '1,400p' astropy/units/quantity.py\r"]
[165.004, "o", "sed -n '1,400p' astropy/units/quantity.py\r\n"]
[165.018329, "o", "\u001b[?2004l\r\n"]
[165.030658, "o", "# Licensed under a 3-clause BSD style license - see LICENSE.rst\r\n"]
[165.042988, "o", "\"\"\"\r\n"]
[165.055317, "o", "This module defines the `Quantity` object, which represents a number with some\r\n"]
[165.067646, "o", "associated units. `Quantity` objects support operations like ordinary numbers,\r\n"]
[165.079975, "o", "but will deal with unit conversions internally.\r\n"]
[165.092304, "o", "\"\"\"\r\n"]
[165.104633, "o", "\r\n"]
[165.116963, "o", "from __future__ import annotations\r\n"]
[165.129292, "o", "\r\n"]
[165.141621, "o", "import builtins\r\n"]
[165.15395, "o", "import numbers\r\n"]
[165.166279, "o", "import operator\r\n"]
[165.178608, "o", "import re\r\n"]
[165.190938, "o", "import warnings\r\n"]
[165.203267, "o", "from fractions import Fraction\r\n"]
[165.215596, "o", "from typing import TYPE_CHECKING\r\n"]
[165.227925, "o", "\r\n"]
[165.240254, "o", "import numpy as np\r\n"]
[165.252584, "o", "\r\n"]
[165.264913, "o", "from astropy import config as _config\r\n"]
[165.277242, "o", "from astropy.utils.compat.numpycompat import COPY_IF_NEEDED, NUMPY_LT_2_0\r\n"]
[165.289571, "o", "from astropy.utils.data_info import ParentDtypeInfo\r\n"]
[165.3019, "o", "from astropy.utils.exceptions import AstropyWarning\r\n"]
[165.314229, "o", "\r\n"]
[165.326559, "o", "from .core import (\r\n"]
[165.338888, "o", "    Unit,\r\n"]
[165.351217, "o", "    UnitBase,\r\n"]
[165.363546, "o", "    UnitConversionError,\r\n"]
[165.375875, "o", "    UnitsError,\r\n"]
[165.388204, "o", "    UnitTypeError,\r\n"]
[165.400534, "o", "    dimensionless_unscaled,\r\n"]
[165.412863, "o", "    get_current_unit_registry,\r\n"]
[165.425192, "o", ")\r\n"]
[165.437521, "o", "from .format import Base, Latex\r\n"]
[165.44985, "o", "from .quantity_helper import can_have_arbitrary_unit, check_output, converters_and_unit\r\n"]
[165.46218, "o", "from .quantity_helper.function_helpers import (\r\n"]
[165.474509, "o", "    DISPATCHED_FUNCTIONS,\r\n"]
[165.486838, "o", "    FUNCTION_HELPERS,\r\n"]
[165.499167, "o", "    SUBCLASS_SAFE_FUNCTIONS,\r\n"]
[165.511496, "o", "    UNSUPPORTED_FUNCTIONS,\r\n"]
[165.523825, "o", ")\r\n"]
[165.536155, "o", "from .structured import StructuredUnit, _structured_unit_like_dtype\r\n"]
[165.548484, "o", "from .utils import is_effectively_unity\r\n"]
[165.560813, "o", "\r\n"]
[165.573142, "o", "if TYPE_CHECKING:\r\n"]
[165.585471, "o", "    from typing_extensions import Self\r\n"]
[165.5978, "o", "\r\n"]
[165.61013, "o", "    from .typing import QuantityLike\r\n"]
[165.622459, "o", "\r\n"]
[165.634788, "o", "__all__ = [\r\n"]
[165.647117, "o", "    \"Quantity\",\r\n"]
[165.659446, "o", "    \"SpecificTypeQuantity\",\r\n"]
[165.671776, "o", "    \"QuantityInfoBase\",\r\n"]
[165.684105, "o", "    \"QuantityInfo\",\r\n"]
[165.696434, "o", "    \"allclose\",\r\n"]
[165.708763, "o", "    \"isclose\",\r\n"]
[165.721092, "o", "]\r\n"]
[165.733421, "o", "\r\n"]
[165.745751, "o", "\r\n"]
[165.75808, "o", "# We don't want to run doctests in the docstrings we inherit from Numpy\r\n"]
[165.770409, "o", "__doctest_skip__ = [\"Quantity.*\"]\r\n"]
[165.782738, "o", "\r\n"]
[165.795067, "o", "_UNIT_NOT_INITIALISED = \"(Unit not initialised)\"\r\n"]
[165.807397, "o", "_UFUNCS_FILTER_WARNINGS = {np.arcsin, np.arccos, np.arccosh, np.arctanh}\r\n"]
[165.819726, "o", "\r\n"]
[165.832055, "o", "\r\n"]
[165.844384, "o", "class Conf(_config.ConfigNamespace):\r\n"]
[165.856713, "o", "    \"\"\"\r\n"]
[165.869042, "o", "    Configuration parameters for Quantity.\r\n"]
[165.881372, "o", "    \"\"\"\r\n"]
[165.893701, "o", "\r\n"]
[165.90603, "o", "    latex_array_threshold = _config.ConfigItem(\r\n"]
[165.918359, "o", "        100,\r\n"]
[165.930688, "o", "        \"The maximum size an array Quantity can be before its LaTeX \"\r\n"]
[165.943017, "o", "        'representation for IPython gets \"summarized\" (meaning only the first '\r\n"]
[165.955347, "o", "        'and last few elements are shown with \"...\" between). Setting this to a '\r\n"]
[165.967676, "o", "        \"negative number means that the value will instead be whatever numpy \"\r\n"]
[165.980005, "o", "        \"gets from get_printoptions.\",\r\n"]
[165.992334, "o", "    )\r\n"]
[166.004663, "o", "\r\n"]
[166.016993, "o", "\r\n"]
[166.029322, "o", "conf = Conf()\r\n"]
[166.041651, "o", "\r\n"]
[166.05398, "o", "\r\n"]
[166.066309, "o", "class QuantityIterator:\r\n"]
[166.078638, "o", "    \"\"\"\r\n"]
[166.090968, "o", "    Flat iterator object to iterate over Quantities.\r\n"]
[166.103297, "o", "\r\n"]
[166.115626, "o", "    A `QuantityIterator` iterator is returned by ``q.flat`` for any Quantity\r\n"]
[166.127955, "o", "    ``q``.  It allows iterating over the array as if it were a 1-D array,\r\n"]
[166.140284, "o", "    either in a for-loop or by calling its `next` method.\r\n"]
[166.152613, "o", "\r\n"]
[166.164943, "o", "    Iteration is done in C-contiguous style, with the last index varying the\r\n"]
[166.177272, "o", "    fastest. The iterator can also be indexed using basic slicing or\r\n"]
[166.189601, "o", "    advanced indexing.\r\n"]
[166.20193, "o", "\r\n"]
[166.214259, "o", "    See Also\r\n"]
[166.226589, "o", "    --------\r\n"]
[166.238918, "o", "    Quantity.flatten : Returns a flattened copy of an array.\r\n"]
[166.251247, "o", "\r\n"]
[166.263576, "o", "    Notes\r\n"]
[166.275905, "o", "    -----\r\n"]
[166.288234, "o", "    `QuantityIterator` is inspired by `~numpy.ma.core.MaskedIterator`.  It\r\n"]
[166.300564, "o", "    is not exported by the `~astropy.units` module.  Instead of\r\n"]
[166.312893, "o", "    instantiating a `QuantityIterator` directly, use `Quantity.flat`.\r\n"]
[166.325222, "o", "    \"\"\"\r\n"]
[166.337551, "o", "\r\n"]
[166.34988, "o", "    def __init__(self, q):\r\n"]
[166.362209, "o", "        self._quantity = q\r\n"]
[166.374539, "o", "        self._dataiter = q.view(np.ndarray).flat\r\n"]
[166.386868, "o", "\r\n"]
[166.399197, "o", "    def __iter__(self):\r\n"]
[166.411526, "o", "        return self\r\n"]
[166.423855, "o", "\r\n"]
[166.436185, "o", "    def __getitem__(self, indx):\r\n"]
[166.448514, "o", "        out = self._dataiter.__getitem__(indx)\r\n"]
[166.460843, "o", "        # For single elements, ndarray.flat.__getitem__ returns scalars; these\r\n"]
[166.473172, "o", "        # need a new view as a Quantity.\r\n"]
[166.485501, "o", "        if isinstance(out, type(self._quantity)):\r\n"]
[166.49783, "o", "            return out\r\n"]
[166.51016, "o", "        else:\r\n"]
[166.522489, "o", "            return self._quantity._new_view(out)\r\n"]
[166.534818, "o", "\r\n"]
[166.547147, "o", "    def __setitem__(self, index, value):\r\n"]
[166.559476, "o", "        self._dataiter[index] = self._quantity._to_own_unit(value)\r\n"]
[166.571805, "o", "\r\n"]
[166.584135, "o", "    def __next__(self):\r\n"]
[166.596464, "o", "        \"\"\"\r\n"]
[166.608793, "o", "        Return the next value, or raise StopIteration.\r\n"]
[166.621122, "o", "        \"\"\"\r\n"]
[166.633451, "o", "        out = next(self._dataiter)\r\n"]
[166.645781, "o", "        # ndarray.flat._dataiter returns scalars, so need a view as a Quantity.\r\n"]
[166.65811, "o", "        return self._quantity._new_view(out)\r\n"]
[166.670439, "o", "\r\n"]
[166.682768, "o", "    next = __next__\r\n"]
[166.695097, "o", "\r\n"]
[166.707426, "o", "    def __len__(self):\r\n"]
[166.719756, "o", "        return len(self._dataiter)\r\n"]
[166.732085, "o", "\r\n"]
[166.744414, "o", "    # Properties and methods to match `numpy.ndarray.flatiter`\r\n"]
[166.756743, "o", "\r\n"]
[166.769072, "o", "    @property\r\n"]
[166.781401, "o", "    def base(self):\r\n"]
[166.793731, "o", "        \"\"\"A reference to the array that is iterated over.\"\"\"\r\n"]
[166.80606, "o", "        return self._quantity\r\n"]
[166.818389, "o", "\r\n"]
[166.830718, "o", "    @property\r\n"]
[166.843047, "o", "    def coords(self):\r\n"]
[166.855377, "o", "        \"\"\"An N-dimensional tuple of current coordinates.\"\"\"\r\n"]
[166.867706, "o", "        return self._dataiter.coords\r\n"]
[166.880035, "o", "\r\n"]
[166.892364, "o", "    @property\r\n"]
[166.904693, "o", "    def index(self):\r\n"]
[166.917022, "o", "        \"\"\"Current flat index into the array.\"\"\"\r\n"]
[166.929352, "o", "        return self._dataiter.index\r\n"]
[166.941681, "o", "\r\n"]
[166.95401, "o", "    def copy(self):\r\n"]
[166.966339, "o", "        \"\"\"Get a copy of the iterator as a 1-D array.\"\"\"\r\n"]
[166.978668, "o", "        return self._quantity.flatten()\r\n"]
[166.990998, "o", "\r\n"]
[167.003327, "o", "\r\n"]
[167.015656, "o", "class QuantityInfoBase(ParentDtypeInfo):\r\n"]
[167.027985, "o", "    # This is on a base class rather than QuantityInfo directly, so that\r\n"]
[167.040314, "o", "    # it can be used for EarthLocationInfo yet make clear that that class\r\n"]
[167.052643, "o", "    # should not be considered a typical Quantity subclass by Table.\r\n"]
[167.064973, "o", "    attrs_from_parent = {\"dtype\", \"unit\"}  # dtype and unit taken from parent\r\n"]
[167.077302, "o", "    _supports_indexing = True\r\n"]
[167.089631, "o", "\r\n"]
[167.10196, "o", "    @staticmethod\r\n"]
[167.114289, "o", "    def default_format(val):\r\n"]
[167.126618, "o", "        return f\"{val.value}\"\r\n"]
[167.138948, "o", "\r\n"]
[167.151277, "o", "    @staticmethod\r\n"]
[167.163606, "o", "    def possible_string_format_functions(format_):\r\n"]
[167.175935, "o", "        \"\"\"Iterate through possible string-derived format functions.\r\n"]
[167.188264, "o", "\r\n"]
[167.200594, "o", "        A string can either be a format specifier for the format built-in,\r\n"]
[167.212923, "o", "        a new-style format string, or an old-style format string.\r\n"]
[167.225252, "o", "\r\n"]
[167.237581, "o", "        This method is overridden in order to suppress printing the unit\r\n"]
[167.24991, "o", "        in each row since it is already at the top in the column header.\r\n"]
[167.262239, "o", "        \"\"\"\r\n"]
[167.274569, "o", "        yield lambda format_, val: format(val.value, format_)\r\n"]
[167.286898, "o", "        yield lambda format_, val: format_.format(val.value)\r\n"]
[167.299227, "o", "        yield lambda format_, val: format_ % val.value\r\n"]
[167.311556, "o", "\r\n"]
[167.323885, "o", "\r\n"]
[167.336214, "o", "class QuantityInfo(QuantityInfoBase):\r\n"]
[167.348544, "o", "    \"\"\"\r\n"]
[167.360873, "o", "    Container for meta information like name, description, format.  This is\r\n"]
[167.373202, "o", "    required when the object is used as a mixin column within a table, but can\r\n"]
[167.385531, "o", "    be used as a general way to store meta information.\r\n"]
[167.39786, "o", "    \"\"\"\r\n"]
[167.41019, "o", "\r\n"]
[167.422519, "o", "    _represent_as_dict_attrs = (\"value\", \"unit\")\r\n"]
[167.434848, "o", "    _construct_from_dict_args = [\"value\"]\r\n"]
[167.447177, "o", "    _represent_as_dict_primary_data = \"value\"\r\n"]
[167.459506, "o", "\r\n"]
[167.471835, "o", "    def new_like(self, cols, length, metadata_conflicts=\"warn\", name=None):\r\n"]
[167.484165, "o", "        \"\"\"\r\n"]
[167.496494, "o", "        Return a new Quantity instance which is consistent with the\r\n"]
[167.508823, "o", "        input ``cols`` and has ``length`` rows.\r\n"]
[167.521152, "o", "\r\n"]
[167.533481, "o", "        This is intended for creating an empty column object whose elements can\r\n"]
[167.54581, "o", "        be set in-place for table operations like join or vstack.\r\n"]
[167.55814, "o", "\r\n"]
[167.570469, "o", "        Parameters\r\n"]
[167.582798, "o", "        ----------\r\n"]
[167.595127, "o", "        cols : list\r\n"]
[167.607456, "o", "            List of input columns\r\n"]
[167.619786, "o", "        length : int\r\n"]
[167.632115, "o", "            Length of the output column object\r\n"]
[167.644444, "o", "        metadata_conflicts : str ('warn'|'error'|'silent')\r\n"]
[167.656773, "o", "            How to handle metadata conflicts\r\n"]
[167.669102, "o", "        name : str\r\n"]
[167.681431, "o", "            Output column name\r\n"]
[167.693761, "o", "\r\n"]
[167.70609, "o", "        Returns\r\n"]
[167.718419, "o", "        -------\r\n"]
[167.730748, "o", "        col : `~astropy.units.Quantity` (or subclass)\r\n"]
[167.743077, "o", "            Empty instance of this class consistent with ``cols``\r\n"]
[167.755406, "o", "\r\n"]
[167.767736, "o", "        \"\"\"\r\n"]
[167.780065, "o", "        # Get merged info attributes like shape, dtype, format, description, etc.\r\n"]
[167.792394, "o", "        attrs = self.merge_cols_attributes(\r\n"]
[167.804723, "o", "            cols, metadata_conflicts, name, (\"meta\", \"format\", \"description\")\r\n"]
[167.817052, "o", "        )\r\n"]
[167.829382, "o", "\r\n"]
[167.841711, "o", "        # Make an empty quantity using the unit of the last one.\r\n"]
[167.85404, "o", "        shape = (length,) + attrs.pop(\"shape\")\r\n"]
[167.866369, "o", "        dtype = attrs.pop(\"dtype\")\r\n"]
[167.878698, "o", "        # Use zeros so we do not get problems for Quantity subclasses such\r\n"]
[167.891027, "o", "        # as Longitude and Latitude, which cannot take arbitrary values.\r\n"]
[167.903357, "o", "        data = np.zeros(shape=shape, dtype=dtype)\r\n"]
[167.915686, "o", "        # Get arguments needed to reconstruct class\r\n"]
[167.928015, "o", "        map = {\r\n"]
[167.940344, "o", "            key: (data if key == \"value\" else getattr(cols[-1], key))\r\n"]
[167.952673, "o", "            for key in self._represent_as_dict_attrs\r\n"]
[167.965002, "o", "        }\r\n"]
[167.977332, "o", "        map[\"copy\"] = COPY_IF_NEEDED\r\n"]
[167.989661, "o", "        out = self._construct_from_dict(map)\r\n"]
[168.00199, "o", "\r\n"]
[168.014319, "o", "        # Set remaining info attributes\r\n"]
[168.026648, "o", "        for attr, value in attrs.items():\r\n"]
[168.038978, "o", "            setattr(out.info, attr, value)\r\n"]
[168.051307, "o", "\r\n"]
[168.063636, "o", "        return out\r\n"]
[168.075965, "o", "\r\n"]
[168.088294, "o", "    def get_sortable_arrays(self):\r\n"]
[168.100623, "o", "        \"\"\"\r\n"]
[168.112953, "o", "        Return a list of arrays which can be lexically sorted to represent\r\n"]
[168.125282, "o", "        the order of the parent column.\r\n"]
[168.137611, "o", "\r\n"]
[168.14994, "o", "        For Quantity this is just the quantity itself.\r\n"]
[168.162269, "o", "\r\n"]
[168.174599, "o", "\r\n"]
[168.186928, "o", "        Returns\r\n"]
[168.199257, "o", "        -------\r\n"]
[168.211586, "o", "        arrays : list of ndarray\r\n"]
[168.223915, "o", "        \"\"\"\r\n"]
[168.236244, "o", "        return [self._parent]\r\n"]
[168.248574, "o", "\r\n"]
[168.260903, "o", "\r\n"]
[168.273232, "o", "class Quantity(np.ndarray):\r\n"]
[168.285561, "o", "    \"\"\"A `~astropy.units.Quantity` represents a number with some associated unit.\r\n"]
[168.29789, "o", "\r\n"]
[168.310219, "o", "    See also: https://docs.astropy.org/en/stable/units/quantity.html\r\n"]
[168.322549, "o", "\r\n"]
[168.334878, "o", "    Parameters\r\n"]
[168.347207, "o", "    ----------\r\n"]
[168.359536, "o", "    value : number, `~numpy.ndarray`, `~astropy.units.Quantity` (sequence), or str\r\n"]
[168.371865, "o", "        The numerical value of this quantity in the units given by unit.  If a\r\n"]
[168.384195, "o", "        `Quantity` or sequence of them (or any other valid object with a\r\n"]
[168.396524, "o", "        ``unit`` attribute), creates a new `Quantity` object, converting to\r\n"]
[168.408853, "o", "        `unit` units as needed.  If a string, it is converted to a number or\r\n"]
[168.421182, "o", "        `Quantity`, depending on whether a unit is present.\r\n"]
[168.433511, "o", "\r\n"]
[168.44584, "o", "    unit : unit-like\r\n"]
[168.45817, "o", "        An object that represents the unit associated with the input value.\r\n"]
[168.470499, "o", "        Must be an `~astropy.units.UnitBase` object or a string parseable by\r\n"]
[168.482828, "o", "        the :mod:`~astropy.units` package.\r\n"]
[168.495157, "o", "\r\n"]
[168.507486, "o", "    dtype : ~numpy.dtype, optional\r\n"]
[168.519815, "o", "        The dtype of the resulting Numpy array or scalar that will\r\n"]
[168.532145, "o", "        hold the value.  If not provided, it is determined from the input,\r\n"]
[168.544474, "o", "        except that any integer and (non-Quantity) object inputs are converted\r\n"]
[168.556803, "o", "        to float by default.\r\n"]
[168.569132, "o", "        If `None`, the normal `numpy.dtype` introspection is used, e.g.\r\n"]
[168.581461, "o", "        preventing upcasting of integers.\r\n"]
[168.593791, "o", "\r\n"]
[168.60612, "o", "    copy : bool, optional\r\n"]
[168.618449, "o", "        If `True` (default), then the value is copied.  Otherwise, a copy will\r\n"]
[168.630778, "o", "        only be made if ``__array__`` returns a copy, if value is a nested\r\n"]
[168.643107, "o", "        sequence, or if a copy is needed to satisfy an explicitly given\r\n"]
[168.655436, "o", "        ``dtype``.  (The `False` option is intended mostly for internal use,\r\n"]
[168.667766, "o", "        to speed up initialization where a copy is known to have been made.\r\n"]
[168.680095, "o", "        Use with care.)\r\n"]
[168.692424, "o", "\r\n"]
[168.704753, "o", "    order : {'C', 'F', 'A'}, optional\r\n"]
[168.717082, "o", "        Specify the order of the array.  As in `~numpy.array`.  This parameter\r\n"]
[168.729411, "o", "        is ignored if the input is a `Quantity` and ``copy=False``.\r\n"]
[168.741741, "o", "\r\n"]
[168.75407, "o", "    subok : bool, optional\r\n"]
[168.766399, "o", "        If `False` (default), the returned array will be forced to be a\r\n"]
[168.778728, "o", "        `Quantity`.  Otherwise, `Quantity` subclasses will be passed through,\r\n"]
[168.791057, "o", "        or a subclass appropriate for the unit will be used (such as\r\n"]
[168.803387, "o", "        `~astropy.units.Dex` for ``u.dex(u.AA)``).\r\n"]
[168.815716, "o", "\r\n"]
[168.828045, "o", "    ndmin : int, optional\r\n"]
[168.840374, "o", "        Specifies the minimum number of dimensions that the resulting array\r\n"]
[168.852703, "o", "        should have.  Ones will be prepended to the shape as needed to meet\r\n"]
[168.865032, "o", "        this requirement.  This parameter is ignored if the input is a\r\n"]
[168.877362, "o", "        `Quantity` and ``copy=False``.\r\n"]
[168.889691, "o", "\r\n"]
[168.90202, "o", "    Raises\r\n"]
[168.914349, "o", "    ------\r\n"]
[168.926678, "o", "    TypeError\r\n"]
[168.939007, "o", "        If the value provided is not a Python numeric type.\r\n"]
[168.951337, "o", "    TypeError\r\n"]
[168.963666, "o", "        If the unit provided is not either a :class:`~astropy.units.Unit`\r\n"]
[168.975995, "o", "        object or a parseable string unit.\r\n"]
[168.988324, "o", "\r\n"]
[169.000653, "o", "    Notes\r\n"]
[169.012983, "o", "    -----\r\n"]
[169.025312, "o", "    Quantities can also be created by multiplying a number or array with a\r\n"]
[169.037641, "o", "    :class:`~astropy.units.Unit`. See https://docs.astropy.org/en/latest/units/\r\n"]
[169.04997, "o", "\r\n"]
[169.062299, "o", "    Unless the ``dtype`` argument is explicitly specified, integer\r\n"]
[169.074628, "o", "    or (non-Quantity) object inputs are converted to `float` by default.\r\n"]
[169.086958, "o", "    \"\"\"\r\n"]
[169.099287, "o", "\r\n"]
[169.111616, "o", "    # Need to set a class-level default for _equivalencies, or\r\n"]
[169.123945, "o", "    # Constants can not initialize properly\r\n"]
[169.136274, "o", "    _equivalencies = []\r\n"]
[169.148603, "o", "\r\n"]
[169.160933, "o", "    # Default unit for initialization; can be overridden by subclasses,\r\n"]
[169.173262, "o", "    # possibly to `None` to indicate there is no default unit.\r\n"]
[169.185591, "o", "    _default_unit = dimensionless_unscaled\r\n"]
[169.19792, "o", "\r\n"]
[169.210249, "o", "    # Ensures views have an undefined unit.\r\n"]
[169.222579, "o", "    _unit = None\r\n"]
[169.234908, "o", "\r\n"]
[169.247237, "o", "    __array_priority__ = 10000\r\n"]
[169.259566, "o", "\r\n"]
[169.271895, "o", "    def __class_getitem__(cls, unit_shape_dtype):\r\n"]
[169.284224, "o", "        \"\"\"Quantity Type Hints.\r\n"]
[169.296554, "o", "\r\n"]
[169.308883, "o", "        Unit-aware type hints are ``Annotated`` objects that encode the class,\r\n"]
[169.321212, "o", "        the unit, and possibly shape and dtype information, depending on the\r\n"]
[169.333541, "o", "        python and :mod:`numpy` versions.\r\n"]
[169.34587, "o", "\r\n"]
[169.3582, "o", "        Schematically, ``Annotated[cls[shape, dtype], unit]``\r\n"]
[169.370529, "o", "\r\n"]
[169.382858, "o", "        As a classmethod, the type is the class, ie ``Quantity``\r\n"]
[169.395187, "o", "        produces an ``Annotated[Quantity, ...]`` while a subclass\r\n"]
[169.407516, "o", "        like :class:`~astropy.coordinates.Angle` returns\r\n"]
[169.419845, "o", "        ``Annotated[Angle, ...]``.\r\n"]
[169.432175, "o", "\r\n"]
[169.444504, "o", "        Parameters\r\n"]
[169.456833, "o", "        ----------\r\n"]
[169.469162, "o", "        unit_shape_dtype : :class:`~astropy.units.UnitBase`, str, `~astropy.units.PhysicalType`, or tuple\r\n"]
[169.481491, "o", "            Unit specification, can be the physical type (ie str or class).\r\n"]
[169.49382, "o", "            If tuple, then the first element is the unit specification\r\n"]
[169.50615, "o", "            and all other elements are for `numpy.ndarray` type annotations.\r\n"]
[169.518479, "o", "            Whether they are included depends on the python and :mod:`numpy`\r\n"]
[169.530808, "o", "            versions.\r\n"]
[169.543137, "o", "\r\n"]
[169.555466, "o", "        Returns\r\n"]
[169.567796, "o", "        -------\r\n"]
[169.580125, "o", "        `typing.Annotated`, `astropy.units.Unit`, or `astropy.units.PhysicalType`\r\n"]
[169.592454, "o", "            Return type in this preference order:\r\n"]
[169.604783, "o", "            * `typing.Annotated`\r\n"]
[169.617112, "o", "            * `astropy.units.Unit` or `astropy.units.PhysicalType`\r\n"]
[169.629441, "o", "\r\n"]
[169.641771, "o", "        Raises\r\n"]
[169.6541, "o", "        ------\r\n"]
[169.666429, "o", "        TypeError\r\n"]
[169.678758, "o", "            If the unit/physical_type annotation is not Unit-like or\r\n"]
[169.691087, "o", "            PhysicalType-like.\r\n"]
[169.703416, "o", "\r\n"]
[169.715746, "o", "        Examples\r\n"]
[169.728075, "o", "        --------\r\n"]
[169.740404, "o", "        Create a unit-aware Quantity type annotation\r\n"]
[169.752733, "o", "\r\n"]
[169.765062, "o", "            >>> Quantity[Unit(\"s\")]\r\n"]
[169.777392, "o", "            Annotated[Quantity, Unit(\"s\")]\r\n"]
[169.789721, "o", "\r\n"]
[169.80205, "o", "        See Also\r\n"]
[169.814379, "o", "        --------\r\n"]
[169.826708, "o", "        `~astropy.units.quantity_input`\r\n"]
[169.839037, "o", "            Use annotations for unit checks on function arguments and results.\r\n"]
[169.851367, "o", "\r\n"]
[169.863696, "o", "        Notes\r\n"]
[169.876025, "o", "        -----\r\n"]
[169.888354, "o", "        |Quantity| types are also static-type compatible.\r\n"]
[169.900683, "o", "        \"\"\"\r\n"]
[169.913012, "o", "        from typing import Annotated\r\n"]
[169.925342, "o", "\r\n"]
[169.937671, "o", "        # process whether [unit] or [unit, shape, ptype]\r\n"]
[170.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[170.002, "i", "sed -n '400,1200p' astropy/units/quantity.py\r"]
[170.004, "o", "sed -n '400,1200p' astropy/units/quantity.py\r\n"]
[170.016, "o", "\u001b[?2004l\r\n"]
[170.026, "o", "        if isinstance(unit_shape_dtype, tuple):  # unit, shape, dtype\r\n"]
[170.036, "o", "            target = unit_shape_dtype[0]\r\n"]
[170.046, "o", "            shape_dtype = unit_shape_dtype[1:]\r\n"]
[170.056, "o", "        else:  # just unit\r\n"]
[170.066, "o", "            target = unit_shape_dtype\r\n"]
[170.076, "o", "            shape_dtype = ()\r\n"]
[170.086, "o", "\r\n"]
[170.096, "o", "        # Allowed unit/physical types. Errors if neither.\r\n"]
[170.106, "o", "        try:\r\n"]
[170.116, "o", "            unit = Unit(target)\r\n"]
[170.126, "o", "        except (TypeError, ValueError):\r\n"]
[170.136, "o", "            from astropy.units.physical import get_physical_type\r\n"]
[170.146, "o", "\r\n"]
[170.156, "o", "            try:\r\n"]
[170.166, "o", "                unit = get_physical_type(target)\r\n"]
[170.176, "o", "            except (TypeError, ValueError, KeyError):  # KeyError for Enum\r\n"]
[170.186, "o", "                raise TypeError(\r\n"]
[170.196, "o", "                    \"unit annotation is not a Unit or PhysicalType\"\r\n"]
[170.206, "o", "                ) from None\r\n"]
[170.216, "o", "\r\n"]
[170.226, "o", "        # Quantity does not (yet) properly extend the NumPy generics types,\r\n"]
[170.236, "o", "        # introduced in numpy v1.22+, instead just including the unit info as\r\n"]
[170.246, "o", "        # metadata using Annotated.\r\n"]
[170.256, "o", "        # TODO: ensure we do interact with NDArray.__class_getitem__.\r\n"]
[170.266, "o", "        return Annotated[cls, unit]\r\n"]
[170.276, "o", "\r\n"]
[170.286, "o", "    def __new__(\r\n"]
[170.296, "o", "        cls: type[Self],\r\n"]
[170.306, "o", "        value: QuantityLike,\r\n"]
[170.316, "o", "        unit=None,\r\n"]
[170.326, "o", "        dtype=np.inexact,\r\n"]
[170.336, "o", "        copy=True,\r\n"]
[170.346, "o", "        order=None,\r\n"]
[170.356, "o", "        subok=False,\r\n"]
[170.366, "o", "        ndmin=0,\r\n"]
[170.376, "o", "    ) -> Self:\r\n"]
[170.386, "o", "        if unit is not None:\r\n"]
[170.396, "o", "            # convert unit first, to avoid multiple string->unit conversions\r\n"]
[170.406, "o", "            unit = Unit(unit)\r\n"]
[170.416, "o", "\r\n"]
[170.426, "o", "        # inexact -> upcast to float dtype\r\n"]
[170.436, "o", "        float_default = dtype is np.inexact\r\n"]
[170.446, "o", "        if float_default:\r\n"]
[170.456, "o", "            dtype = None\r\n"]
[170.466, "o", "\r\n"]
[170.476, "o", "        # optimize speed for Quantity with no dtype given, copy=COPY_IF_NEEDED\r\n"]
[170.486, "o", "        if isinstance(value, Quantity):\r\n"]
[170.496, "o", "            if unit is not None and unit is not value.unit:\r\n"]
[170.506, "o", "                value = value.to(unit)\r\n"]
[170.516, "o", "                # the above already makes a copy (with float dtype)\r\n"]
[170.526, "o", "                copy = COPY_IF_NEEDED\r\n"]
[170.536, "o", "\r\n"]
[170.546, "o", "            if type(value) is not cls and not (subok and isinstance(value, cls)):\r\n"]
[170.556, "o", "                value = value.view(cls)\r\n"]
[170.566, "o", "\r\n"]
[170.576, "o", "            if float_default and value.dtype.kind in \"iu\":\r\n"]
[170.586, "o", "                dtype = float\r\n"]
[170.596, "o", "\r\n"]
[170.606, "o", "            return np.array(\r\n"]
[170.616, "o", "                value, dtype=dtype, copy=copy, order=order, subok=True, ndmin=ndmin\r\n"]
[170.626, "o", "            )\r\n"]
[170.636, "o", "\r\n"]
[170.646, "o", "        # Maybe str, or list/tuple of Quantity? If so, this may set value_unit.\r\n"]
[170.656, "o", "        # To ensure array remains fast, we short-circuit it.\r\n"]
[170.666, "o", "        value_unit = None\r\n"]
[170.676, "o", "        if not isinstance(value, np.ndarray):\r\n"]
[170.686, "o", "            if isinstance(value, str):\r\n"]
[170.696, "o", "                # The first part of the regex string matches any integer/float;\r\n"]
[170.706, "o", "                # the second parts adds possible trailing .+-, which will break\r\n"]
[170.716, "o", "                # the float function below and ensure things like 1.2.3deg\r\n"]
[170.726, "o", "                # will not work.\r\n"]
[170.736, "o", "                pattern = (\r\n"]
[170.746, "o", "                    r\"\\s*[+-]?\"\r\n"]
[170.756, "o", "                    r\"((\\d+\\.?\\d*)|(\\.\\d+)|([nN][aA][nN])|\"\r\n"]
[170.766, "o", "                    r\"([iI][nN][fF]([iI][nN][iI][tT][yY]){0,1}))\"\r\n"]
[170.776, "o", "                    r\"([eE][+-]?\\d+)?\"\r\n"]
[170.786, "o", "                    r\"[.+-]?\"\r\n"]
[170.796, "o", "                )\r\n"]
[170.806, "o", "\r\n"]
[170.816, "o", "                v = re.match(pattern, value)\r\n"]
[170.826, "o", "                unit_string = None\r\n"]
[170.836, "o", "                try:\r\n"]
[170.846, "o", "                    value = float(v.group())\r\n"]
[170.856, "o", "\r\n"]
[170.866, "o", "                except Exception:\r\n"]
[170.876, "o", "                    raise TypeError(\r\n"]
[170.886, "o", "                        f'Cannot parse \"{value}\" as a {cls.__name__}. It does not '\r\n"]
[170.896, "o", "                        \"start with a number.\"\r\n"]
[170.906, "o", "                    )\r\n"]
[170.916, "o", "\r\n"]
[170.926, "o", "                unit_string = v.string[v.end() :].strip()\r\n"]
[170.936, "o", "                if unit_string:\r\n"]
[170.946, "o", "                    value_unit = Unit(unit_string)\r\n"]
[170.956, "o", "                    if unit is None:\r\n"]
[170.966, "o", "                        unit = value_unit  # signal no conversion needed below.\r\n"]
[170.976, "o", "\r\n"]
[170.986, "o", "            elif isinstance(value, (list, tuple)) and len(value) > 0:\r\n"]
[170.996, "o", "                if all(isinstance(v, Quantity) for v in value):\r\n"]
[171.006, "o", "                    # If a list/tuple contains only quantities, stack them,\r\n"]
[171.016, "o", "                    # which also converts them to the same unit.\r\n"]
[171.026, "o", "                    value = np.stack(value)\r\n"]
[171.036, "o", "                    copy = False\r\n"]
[171.046, "o", "\r\n"]
[171.056, "o", "                elif (\r\n"]
[171.066, "o", "                    dtype is None\r\n"]
[171.076, "o", "                    and not hasattr(value, \"dtype\")\r\n"]
[171.086, "o", "                    and isinstance(unit, StructuredUnit)\r\n"]
[171.096, "o", "                ):\r\n"]
[171.106, "o", "                    # Special case for list/tuple of values and a structured unit:\r\n"]
[171.116, "o", "                    # ``np.array(value, dtype=None)`` would treat tuples as lower\r\n"]
[171.126, "o", "                    # levels of the array, rather than as elements of a structured\r\n"]
[171.136, "o", "                    # array, so we use the structure of the unit to help infer the\r\n"]
[171.146, "o", "                    # structured dtype of the value.\r\n"]
[171.156, "o", "                    dtype = unit._recursively_get_dtype(value)\r\n"]
[171.166, "o", "\r\n"]
[171.176, "o", "        using_default_unit = False\r\n"]
[171.186, "o", "        if value_unit is None:\r\n"]
[171.196, "o", "            # If the value has a `unit` attribute and if not None\r\n"]
[171.206, "o", "            # (for Columns with uninitialized unit), treat it like a quantity.\r\n"]
[171.216, "o", "            value_unit = getattr(value, \"unit\", None)\r\n"]
[171.226, "o", "            if value_unit is None:\r\n"]
[171.236, "o", "                # Default to dimensionless for no (initialized) unit attribute.\r\n"]
[171.246, "o", "                if unit is None:\r\n"]
[171.256, "o", "                    using_default_unit = True\r\n"]
[171.266, "o", "                    unit = cls._default_unit\r\n"]
[171.276, "o", "                value_unit = unit  # signal below that no conversion is needed\r\n"]
[171.286, "o", "            else:\r\n"]
[171.296, "o", "                try:\r\n"]
[171.306, "o", "                    value_unit = Unit(value_unit)\r\n"]
[171.316, "o", "                except Exception as exc:\r\n"]
[171.326, "o", "                    raise TypeError(\r\n"]
[171.336, "o", "                        f\"The unit attribute {value.unit!r} of the input could \"\r\n"]
[171.346, "o", "                        \"not be parsed as an astropy Unit.\"\r\n"]
[171.356, "o", "                    ) from exc\r\n"]
[171.366, "o", "\r\n"]
[171.376, "o", "                if unit is None:\r\n"]
[171.386, "o", "                    unit = value_unit\r\n"]
[171.396, "o", "                elif unit is not value_unit:\r\n"]
[171.406, "o", "                    copy = COPY_IF_NEEDED  # copy will be made in conversion at end\r\n"]
[171.416, "o", "\r\n"]
[171.426, "o", "        value = np.array(\r\n"]
[171.436, "o", "            value, dtype=dtype, copy=copy, order=order, subok=True, ndmin=ndmin\r\n"]
[171.446, "o", "        )\r\n"]
[171.456, "o", "\r\n"]
[171.466, "o", "        # For no-user-input unit, make sure the constructed unit matches the\r\n"]
[171.476, "o", "        # structure of the data.\r\n"]
[171.486, "o", "        if using_default_unit and value.dtype.names is not None:\r\n"]
[171.496, "o", "            unit = value_unit = _structured_unit_like_dtype(value_unit, value.dtype)\r\n"]
[171.506, "o", "\r\n"]
[171.516, "o", "        # check that array contains numbers or long int objects\r\n"]
[171.526, "o", "        if value.dtype.kind in \"OSU\" and not (\r\n"]
[171.536, "o", "            value.dtype.kind == \"O\" and isinstance(value.item(0), numbers.Number)\r\n"]
[171.546, "o", "        ):\r\n"]
[171.556, "o", "            raise TypeError(\"The value must be a valid Python or Numpy numeric type.\")\r\n"]
[171.566, "o", "\r\n"]
[171.576, "o", "        # by default, cast any integer, boolean, etc., to float\r\n"]
[171.586, "o", "        if float_default and value.dtype.kind in \"iuO\":\r\n"]
[171.596, "o", "            value = value.astype(float)\r\n"]
[171.606, "o", "\r\n"]
[171.616, "o", "        # if we allow subclasses, allow a class from the unit.\r\n"]
[171.626, "o", "        if subok:\r\n"]
[171.636, "o", "            qcls = getattr(unit, \"_quantity_class\", cls)\r\n"]
[171.646, "o", "            if issubclass(qcls, cls):\r\n"]
[171.656, "o", "                cls = qcls\r\n"]
[171.666, "o", "\r\n"]
[171.676, "o", "        value = value.view(cls)\r\n"]
[171.686, "o", "        value._set_unit(value_unit)\r\n"]
[171.696, "o", "        if unit is value_unit:\r\n"]
[171.706, "o", "            return value\r\n"]
[171.716, "o", "        else:\r\n"]
[171.726, "o", "            # here we had non-Quantity input that had a \"unit\" attribute\r\n"]
[171.736, "o", "            # with a unit different from the desired one.  So, convert.\r\n"]
[171.746, "o", "            return value.to(unit)\r\n"]
[171.756, "o", "\r\n"]
[171.766, "o", "    def __array_finalize__(self, obj):\r\n"]
[171.776, "o", "        # Check whether super().__array_finalize should be called\r\n"]
[171.786, "o", "        # (sadly, ndarray.__array_finalize__ is None; we cannot be sure\r\n"]
[171.796, "o", "        # what is above us).\r\n"]
[171.806, "o", "        super_array_finalize = super().__array_finalize__\r\n"]
[171.816, "o", "        if super_array_finalize is not None:\r\n"]
[171.826, "o", "            super_array_finalize(obj)\r\n"]
[171.836, "o", "\r\n"]
[171.846, "o", "        # If we're a new object or viewing an ndarray, nothing has to be done.\r\n"]
[171.856, "o", "        if obj is None or obj.__class__ is np.ndarray:\r\n"]
[171.866, "o", "            return\r\n"]
[171.876, "o", "\r\n"]
[171.886, "o", "        # Copy over the unit and possibly info.  Note that the only way the\r\n"]
[171.896, "o", "        # unit can already be set is if one enters via _new_view(), where the\r\n"]
[171.906, "o", "        # unit is often different from that of self, and where propagation of\r\n"]
[171.916, "o", "        # info is not always desirable.\r\n"]
[171.926, "o", "        if self._unit is None:\r\n"]
[171.936, "o", "            unit = getattr(obj, \"_unit\", None)\r\n"]
[171.946, "o", "            if unit is not None:\r\n"]
[171.956, "o", "                self._set_unit(unit)\r\n"]
[171.966, "o", "\r\n"]
[171.976, "o", "            # Copy info if the original had `info` defined.  Because of the way the\r\n"]
[171.986, "o", "            # DataInfo works, `'info' in obj.__dict__` is False until the\r\n"]
[171.996, "o", "            # `info` attribute is accessed or set.\r\n"]
[172.006, "o", "            if \"info\" in obj.__dict__:\r\n"]
[172.016, "o", "                self.info = obj.info\r\n"]
[172.026, "o", "\r\n"]
[172.036, "o", "    def __array_wrap__(self, obj, context=None, return_scalar=False):\r\n"]
[172.046, "o", "        if context is None:\r\n"]
[172.056, "o", "            # Methods like .squeeze() created a new `ndarray` and then call\r\n"]
[172.066, "o", "            # __array_wrap__ to turn the array into self's subclass.\r\n"]
[172.076, "o", "            return self._new_view(obj)\r\n"]
[172.086, "o", "\r\n"]
[172.096, "o", "        raise NotImplementedError(\r\n"]
[172.106, "o", "            \"__array_wrap__ should not be used with a context any more since all \"\r\n"]
[172.116, "o", "            \"use should go through array_function. Please raise an issue on \"\r\n"]
[172.126, "o", "            \"https://github.com/astropy/astropy\"\r\n"]
[172.136, "o", "        )\r\n"]
[172.146, "o", "\r\n"]
[172.156, "o", "    def __array_ufunc__(self, function, method, *inputs, **kwargs):\r\n"]
[172.166, "o", "        \"\"\"Wrap numpy ufuncs, taking care of units.\r\n"]
[172.176, "o", "\r\n"]
[172.186, "o", "        Parameters\r\n"]
[172.196, "o", "        ----------\r\n"]
[172.206, "o", "        function : callable\r\n"]
[172.216, "o", "            ufunc to wrap.\r\n"]
[172.226, "o", "        method : str\r\n"]
[172.236, "o", "            Ufunc method: ``__call__``, ``at``, ``reduce``, etc.\r\n"]
[172.246, "o", "        inputs : tuple\r\n"]
[172.256, "o", "            Input arrays.\r\n"]
[172.266, "o", "        kwargs : keyword arguments\r\n"]
[172.276, "o", "            As passed on, with ``out`` containing possible quantity output.\r\n"]
[172.286, "o", "\r\n"]
[172.296, "o", "        Returns\r\n"]
[172.306, "o", "        -------\r\n"]
[172.316, "o", "        result : `~astropy.units.Quantity` or `NotImplemented`\r\n"]
[172.326, "o", "            Results of the ufunc, with the unit set properly.\r\n"]
[172.336, "o", "        \"\"\"\r\n"]
[172.346, "o", "        # Determine required conversion functions -- to bring the unit of the\r\n"]
[172.356, "o", "        # input to that expected (e.g., radian for np.sin), or to get\r\n"]
[172.366, "o", "        # consistent units between two inputs (e.g., in np.add) --\r\n"]
[172.376, "o", "        # and the unit of the result (or tuple of units for nout > 1).\r\n"]
[172.386, "o", "        try:\r\n"]
[172.396, "o", "            converters, unit = converters_and_unit(function, method, *inputs)\r\n"]
[172.406, "o", "\r\n"]
[172.416, "o", "            out = kwargs.get(\"out\", None)\r\n"]
[172.426, "o", "            # Avoid loop back by turning any Quantity output into array views.\r\n"]
[172.436, "o", "            if out is not None:\r\n"]
[172.446, "o", "                # If pre-allocated output is used, check it is suitable.\r\n"]
[172.456, "o", "                # This also returns array view, to ensure we don't loop back.\r\n"]
[172.466, "o", "                if function.nout == 1:\r\n"]
[172.476, "o", "                    out = out[0]\r\n"]
[172.486, "o", "                out_array = check_output(out, unit, inputs, function=function)\r\n"]
[172.496, "o", "                # Ensure output argument remains a tuple.\r\n"]
[172.506, "o", "                kwargs[\"out\"] = (out_array,) if function.nout == 1 else out_array\r\n"]
[172.516, "o", "\r\n"]
[172.526, "o", "            if method == \"reduce\" and \"initial\" in kwargs and unit is not None:\r\n"]
[172.536, "o", "                # Special-case for initial argument for reductions like\r\n"]
[172.546, "o", "                # np.add.reduce.  This should be converted to the output unit as\r\n"]
[172.556, "o", "                # well, which is typically the same as the input unit (but can\r\n"]
[172.566, "o", "                # in principle be different: unitless for np.equal, radian\r\n"]
[172.576, "o", "                # for np.arctan2, though those are not necessarily useful!)\r\n"]
[172.586, "o", "                kwargs[\"initial\"] = self._to_own_unit(\r\n"]
[172.596, "o", "                    kwargs[\"initial\"], check_precision=False, unit=unit\r\n"]
[172.606, "o", "                )\r\n"]
[172.616, "o", "\r\n"]
[172.626, "o", "            # Same for inputs, but here also convert if necessary.\r\n"]
[172.636, "o", "            arrays = []\r\n"]
[172.646, "o", "            for input_, converter in zip(inputs, converters):\r\n"]
[172.656, "o", "                input_ = getattr(input_, \"value\", input_)\r\n"]
[172.666, "o", "                arrays.append(converter(input_) if converter else input_)\r\n"]
[172.676, "o", "\r\n"]
[172.686, "o", "            # Call our superclass's __array_ufunc__\r\n"]
[172.696, "o", "            result = super().__array_ufunc__(function, method, *arrays, **kwargs)\r\n"]
[172.706, "o", "            # If unit is None, a plain array is expected (e.g., comparisons), which\r\n"]
[172.716, "o", "            # means we're done.\r\n"]
[172.726, "o", "            # We're also done if the result was None (for method 'at') or\r\n"]
[172.736, "o", "            # NotImplemented, which can happen if other inputs/outputs override\r\n"]
[172.746, "o", "            # __array_ufunc__; hopefully, they can then deal with us.\r\n"]
[172.756, "o", "            if unit is None or result is None or result is NotImplemented:\r\n"]
[172.766, "o", "                return result\r\n"]
[172.776, "o", "\r\n"]
[172.786, "o", "            return self._result_as_quantity(result, unit, out)\r\n"]
[172.796, "o", "\r\n"]
[172.806, "o", "        except (TypeError, ValueError, AttributeError) as e:\r\n"]
[172.816, "o", "            out_normalized = kwargs.get(\"out\", ())\r\n"]
[172.826, "o", "            inputs_and_outputs = inputs + out_normalized\r\n"]
[172.836, "o", "            ignored_ufunc = (\r\n"]
[172.846, "o", "                None,\r\n"]
[172.856, "o", "                np.ndarray.__array_ufunc__,\r\n"]
[172.866, "o", "                type(self).__array_ufunc__,\r\n"]
[172.876, "o", "            )\r\n"]
[172.886, "o", "            if not all(\r\n"]
[172.896, "o", "                getattr(type(io), \"__array_ufunc__\", None) in ignored_ufunc\r\n"]
[172.906, "o", "                for io in inputs_and_outputs\r\n"]
[172.916, "o", "            ):\r\n"]
[172.926, "o", "                return NotImplemented\r\n"]
[172.936, "o", "            else:\r\n"]
[172.946, "o", "                raise e\r\n"]
[172.956, "o", "\r\n"]
[172.966, "o", "    def _result_as_quantity(self, result, unit, out):\r\n"]
[172.976, "o", "        \"\"\"Turn result into a quantity with the given unit.\r\n"]
[172.986, "o", "\r\n"]
[172.996, "o", "        If no output is given, it will take a view of the array as a quantity,\r\n"]
[173.006, "o", "        and set the unit.  If output is given, those should be quantity views\r\n"]
[173.016, "o", "        of the result arrays, and the function will just set the unit.\r\n"]
[173.026, "o", "\r\n"]
[173.036, "o", "        Parameters\r\n"]
[173.046, "o", "        ----------\r\n"]
[173.056, "o", "        result : ndarray or tuple thereof\r\n"]
[173.066, "o", "            Array(s) which need to be turned into quantity.\r\n"]
[173.076, "o", "        unit : `~astropy.units.Unit`\r\n"]
[173.086, "o", "            Unit for the quantities to be returned (or `None` if the result\r\n"]
[173.096, "o", "            should not be a quantity).  Should be tuple if result is a tuple.\r\n"]
[173.106, "o", "        out : `~astropy.units.Quantity` or None\r\n"]
[173.116, "o", "            Possible output quantity. Should be `None` or a tuple if result\r\n"]
[173.126, "o", "            is a tuple.\r\n"]
[173.136, "o", "\r\n"]
[173.146, "o", "        Returns\r\n"]
[173.156, "o", "        -------\r\n"]
[173.166, "o", "        out : `~astropy.units.Quantity`\r\n"]
[173.176, "o", "           With units set.\r\n"]
[173.186, "o", "        \"\"\"\r\n"]
[173.196, "o", "        if isinstance(result, (tuple, list)):\r\n"]
[173.206, "o", "            if out is None:\r\n"]
[173.216, "o", "                out = (None,) * len(result)\r\n"]
[173.226, "o", "            # Some np.linalg functions return namedtuple, which is handy to access\r\n"]
[173.236, "o", "            # elements by name, but cannot be directly initialized with an iterator.\r\n"]
[173.246, "o", "            result_cls = getattr(result, \"_make\", result.__class__)\r\n"]
[173.256, "o", "            return result_cls(\r\n"]
[173.266, "o", "                self._result_as_quantity(result_, unit_, out_)\r\n"]
[173.276, "o", "                for (result_, unit_, out_) in zip(result, unit, out)\r\n"]
[173.286, "o", "            )\r\n"]
[173.296, "o", "\r\n"]
[173.306, "o", "        if out is None:\r\n"]
[173.316, "o", "            # View the result array as a Quantity with the proper unit.\r\n"]
[173.326, "o", "            return (\r\n"]
[173.336, "o", "                result\r\n"]
[173.346, "o", "                if unit is None\r\n"]
[173.356, "o", "                else self._new_view(result, unit, propagate_info=False)\r\n"]
[173.366, "o", "            )\r\n"]
[173.376, "o", "\r\n"]
[173.386, "o", "        elif isinstance(out, Quantity):\r\n"]
[173.396, "o", "            # For given Quantity output, just set the unit. We know the unit\r\n"]
[173.406, "o", "            # is not None and the output is of the correct Quantity subclass,\r\n"]
[173.416, "o", "            # as it was passed through check_output.\r\n"]
[173.426, "o", "            # (We cannot do this unconditionally, though, since it is possible\r\n"]
[173.436, "o", "            # for out to be ndarray and the unit to be dimensionless.)\r\n"]
[173.446, "o", "            out._set_unit(unit)\r\n"]
[173.456, "o", "\r\n"]
[173.466, "o", "        return out\r\n"]
[173.476, "o", "\r\n"]
[173.486, "o", "    def __quantity_subclass__(self, unit):\r\n"]
[173.496, "o", "        \"\"\"\r\n"]
[173.506, "o", "        Overridden by subclasses to change what kind of view is\r\n"]
[173.516, "o", "        created based on the output unit of an operation.\r\n"]
[173.526, "o", "\r\n"]
[173.536, "o", "        Parameters\r\n"]
[173.546, "o", "        ----------\r\n"]
[173.556, "o", "        unit : UnitBase\r\n"]
[173.566, "o", "            The unit for which the appropriate class should be returned\r\n"]
[173.576, "o", "\r\n"]
[173.586, "o", "        Returns\r\n"]
[173.596, "o", "        -------\r\n"]
[173.606, "o", "        tuple :\r\n"]
[173.616, "o", "            - `~astropy.units.Quantity` subclass\r\n"]
[173.626, "o", "            - bool: True if subclasses of the given class are ok\r\n"]
[173.636, "o", "        \"\"\"\r\n"]
[173.646, "o", "        return Quantity, True\r\n"]
[173.656, "o", "\r\n"]
[173.666, "o", "    def _new_view(self, obj=None, unit=None, propagate_info=True):\r\n"]
[173.676, "o", "        \"\"\"Create a Quantity view of some array-like input, and set the unit.\r\n"]
[173.686, "o", "\r\n"]
[173.696, "o", "        By default, return a view of ``obj`` of the same class as ``self`` and\r\n"]
[173.706, "o", "        with the same unit.  Subclasses can override the type of class for a\r\n"]
[173.716, "o", "        given unit using ``__quantity_subclass__``, and can ensure properties\r\n"]
[173.726, "o", "        other than the unit are copied using ``__array_finalize__``.\r\n"]
[173.736, "o", "\r\n"]
[173.746, "o", "        If the given unit defines a ``_quantity_class`` of which ``self``\r\n"]
[173.756, "o", "        is not an instance, a view using this class is taken.\r\n"]
[173.766, "o", "\r\n"]
[173.776, "o", "        Parameters\r\n"]
[173.786, "o", "        ----------\r\n"]
[173.796, "o", "        obj : ndarray or scalar, optional\r\n"]
[173.806, "o", "            The array to create a view of.  If obj is a numpy or python scalar,\r\n"]
[173.816, "o", "            it will be converted to an array scalar.  By default, ``self``\r\n"]
[173.826, "o", "            is converted.\r\n"]
[173.836, "o", "\r\n"]
[173.846, "o", "        unit : unit-like, optional\r\n"]
[173.856, "o", "            The unit of the resulting object.  It is used to select a\r\n"]
[173.866, "o", "            subclass, and explicitly assigned to the view if given.\r\n"]
[173.876, "o", "            If not given, the subclass and unit will be that of ``self``.\r\n"]
[173.886, "o", "\r\n"]
[173.896, "o", "        propagate_info : bool, optional\r\n"]
[173.906, "o", "            Whether to transfer ``info`` if present.  Default: `True`, as\r\n"]
[173.916, "o", "            appropriate for, e.g., unit conversions or slicing, where the\r\n"]
[173.926, "o", "            nature of the object does not change.\r\n"]
[173.936, "o", "\r\n"]
[173.946, "o", "        Returns\r\n"]
[173.956, "o", "        -------\r\n"]
[173.966, "o", "        view : `~astropy.units.Quantity` subclass\r\n"]
[173.976, "o", "\r\n"]
[173.986, "o", "        \"\"\"\r\n"]
[173.996, "o", "        # Determine the unit and quantity subclass that we need for the view.\r\n"]
[174.006, "o", "        if unit is None:\r\n"]
[174.016, "o", "            unit = self.unit\r\n"]
[174.026, "o", "            quantity_subclass = self.__class__\r\n"]
[174.036, "o", "        elif unit is self.unit and self.__class__ is Quantity:\r\n"]
[174.046, "o", "            # The second part is because we should not presume what other\r\n"]
[174.056, "o", "            # classes want to do for the same unit.  E.g., Constant will\r\n"]
[174.066, "o", "            # always want to fall back to Quantity, and relies on going\r\n"]
[174.076, "o", "            # through `__quantity_subclass__`.\r\n"]
[174.086, "o", "            quantity_subclass = Quantity\r\n"]
[174.096, "o", "        else:\r\n"]
[174.106, "o", "            unit = Unit(unit)\r\n"]
[174.116, "o", "            quantity_subclass = getattr(unit, \"_quantity_class\", Quantity)\r\n"]
[174.126, "o", "            if isinstance(self, quantity_subclass):\r\n"]
[174.136, "o", "                quantity_subclass, subok = self.__quantity_subclass__(unit)\r\n"]
[174.146, "o", "                if subok:\r\n"]
[174.156, "o", "                    quantity_subclass = self.__class__\r\n"]
[174.166, "o", "\r\n"]
[174.176, "o", "        # We only want to propagate information from ``self`` to our new view,\r\n"]
[174.186, "o", "        # so obj should be a regular array.  By using ``np.array``, we also\r\n"]
[174.196, "o", "        # convert python and numpy scalars, which cannot be viewed as arrays\r\n"]
[174.206, "o", "        # and thus not as Quantity either, to zero-dimensional arrays.\r\n"]
[174.216, "o", "        # (These are turned back into scalar in `.value`)\r\n"]
[174.226, "o", "        # Note that for an ndarray input, the np.array call takes only double\r\n"]
[174.236, "o", "        # ``obj.__class is np.ndarray``. So, not worth special-casing.\r\n"]
[174.246, "o", "        if obj is None:\r\n"]
[174.256, "o", "            obj = self.view(np.ndarray)\r\n"]
[174.266, "o", "        else:\r\n"]
[174.276, "o", "            obj = np.array(obj, copy=COPY_IF_NEEDED, subok=True)\r\n"]
[174.286, "o", "\r\n"]
[174.296, "o", "        # Take the view, set the unit, and update possible other properties\r\n"]
[174.306, "o", "        # such as ``info``, ``wrap_angle`` in `Longitude`, etc.\r\n"]
[174.316, "o", "        view = obj.view(quantity_subclass)\r\n"]
[174.326, "o", "        view._set_unit(unit)\r\n"]
[174.336, "o", "        view.__array_finalize__(self)\r\n"]
[174.346, "o", "        if propagate_info and \"info\" in self.__dict__:\r\n"]
[174.356, "o", "            view.info = self.info\r\n"]
[174.366, "o", "        return view\r\n"]
[174.376, "o", "\r\n"]
[174.386, "o", "    def _set_unit(self, unit):\r\n"]
[174.396, "o", "        \"\"\"Set the unit.\r\n"]
[174.406, "o", "\r\n"]
[174.416, "o", "        This is used anywhere the unit is set or modified, i.e., in the\r\n"]
[174.426, "o", "        initializer, in ``__imul__`` and ``__itruediv__`` for in-place\r\n"]
[174.436, "o", "        multiplication and division by another unit, as well as in\r\n"]
[174.446, "o", "        ``__array_finalize__`` for wrapping up views.  For Quantity, it just\r\n"]
[174.456, "o", "        sets the unit, but subclasses can override it to check that, e.g.,\r\n"]
[174.466, "o", "        a unit is consistent.\r\n"]
[174.476, "o", "        \"\"\"\r\n"]
[174.486, "o", "        if not isinstance(unit, UnitBase):\r\n"]
[174.496, "o", "            if isinstance(self._unit, StructuredUnit) or isinstance(\r\n"]
[174.506, "o", "                unit, StructuredUnit\r\n"]
[174.516, "o", "            ):\r\n"]
[174.526, "o", "                unit = StructuredUnit(unit, self.dtype)\r\n"]
[174.536, "o", "            else:\r\n"]
[174.546, "o", "                # Trying to go through a string ensures that, e.g., Magnitudes with\r\n"]
[174.556, "o", "                # dimensionless physical unit become Quantity with units of mag.\r\n"]
[174.566, "o", "                unit = Unit(str(unit), parse_strict=\"silent\")\r\n"]
[174.576, "o", "                if not isinstance(unit, (UnitBase, StructuredUnit)):\r\n"]
[174.586, "o", "                    raise UnitTypeError(\r\n"]
[174.596, "o", "                        f\"{self.__class__.__name__} instances require normal units, \"\r\n"]
[174.606, "o", "                        f\"not {unit.__class__} instances.\"\r\n"]
[174.616, "o", "                    )\r\n"]
[174.626, "o", "\r\n"]
[174.636, "o", "        self._unit = unit\r\n"]
[174.646, "o", "\r\n"]
[174.656, "o", "    def __deepcopy__(self, memo):\r\n"]
[174.666, "o", "        # If we don't define this, ``copy.deepcopy(quantity)`` will\r\n"]
[174.676, "o", "        # return a bare Numpy array.\r\n"]
[174.686, "o", "        return self.copy()\r\n"]
[174.696, "o", "\r\n"]
[174.706, "o", "    def __reduce__(self):\r\n"]
[174.716, "o", "        # patch to pickle Quantity objects (ndarray subclasses), see\r\n"]
[174.726, "o", "        # http://www.mail-archive.com/numpy-discussion@scipy.org/msg02446.html\r\n"]
[174.736, "o", "\r\n"]
[174.746, "o", "        object_state = list(super().__reduce__())\r\n"]
[174.756, "o", "        object_state[2] = (object_state[2], self.__dict__)\r\n"]
[174.766, "o", "        return tuple(object_state)\r\n"]
[174.776, "o", "\r\n"]
[174.786, "o", "    def __setstate__(self, state):\r\n"]
[174.796, "o", "        # patch to unpickle Quantity objects (ndarray subclasses), see\r\n"]
[174.806, "o", "        # http://www.mail-archive.com/numpy-discussion@scipy.org/msg02446.html\r\n"]
[174.816, "o", "\r\n"]
[174.826, "o", "        nd_state, own_state = state\r\n"]
[174.836, "o", "        super().__setstate__(nd_state)\r\n"]
[174.846, "o", "        self.__dict__.update(own_state)\r\n"]
[174.856, "o", "\r\n"]
[174.866, "o", "    info = QuantityInfo()\r\n"]
[174.876, "o", "\r\n"]
[174.886, "o", "    def _to_value(self, unit, equivalencies=[]):\r\n"]
[174.896, "o", "        \"\"\"Helper method for to and to_value.\"\"\"\r\n"]
[174.906, "o", "        if equivalencies == []:\r\n"]
[174.916, "o", "            equivalencies = self._equivalencies\r\n"]
[174.926, "o", "        if not self.dtype.names or isinstance(self.unit, StructuredUnit):\r\n"]
[174.936, "o", "            # Standard path, let unit to do work.\r\n"]
[175.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[175.002, "i", "sed -n '1200,2000p' astropy/units/quantity.py\r"]
[175.004, "o", "sed -n '1200,2000p' astropy/units/quantity.py\r\n"]
[175.016, "o", "\u001b[?2004l\r\n"]
[175.026, "o", "    # behaviour, but instead of emitting a warning here, let it be done by\r\n"]
[175.036, "o", "    # other (which likely is a unit if this was a mistake).\r\n"]
[175.046, "o", "    def __rshift__(self, other):\r\n"]
[175.056, "o", "        return NotImplemented\r\n"]
[175.066, "o", "\r\n"]
[175.076, "o", "    def __irshift__(self, other):\r\n"]
[175.086, "o", "        return NotImplemented\r\n"]
[175.096, "o", "\r\n"]
[175.106, "o", "    # Arithmetic operations\r\n"]
[175.116, "o", "    def __mul__(self, other):\r\n"]
[175.126, "o", "        \"\"\"Multiplication between `Quantity` objects and other objects.\"\"\"\r\n"]
[175.136, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[175.146, "o", "            try:\r\n"]
[175.156, "o", "                return self._new_view(\r\n"]
[175.166, "o", "                    self.value.copy(), other * self.unit, propagate_info=False\r\n"]
[175.176, "o", "                )\r\n"]
[175.186, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[175.196, "o", "                return NotImplemented\r\n"]
[175.206, "o", "\r\n"]
[175.216, "o", "        return super().__mul__(other)\r\n"]
[175.226, "o", "\r\n"]
[175.236, "o", "    def __imul__(self, other):\r\n"]
[175.246, "o", "        \"\"\"In-place multiplication between `Quantity` objects and others.\"\"\"\r\n"]
[175.256, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[175.266, "o", "            self._set_unit(other * self.unit)\r\n"]
[175.276, "o", "            return self\r\n"]
[175.286, "o", "\r\n"]
[175.296, "o", "        return super().__imul__(other)\r\n"]
[175.306, "o", "\r\n"]
[175.316, "o", "    def __rmul__(self, other):\r\n"]
[175.326, "o", "        \"\"\"\r\n"]
[175.336, "o", "        Right Multiplication between `Quantity` objects and other objects.\r\n"]
[175.346, "o", "        \"\"\"\r\n"]
[175.356, "o", "        return self.__mul__(other)\r\n"]
[175.366, "o", "\r\n"]
[175.376, "o", "    def __truediv__(self, other):\r\n"]
[175.386, "o", "        \"\"\"Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[175.396, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[175.406, "o", "            try:\r\n"]
[175.416, "o", "                return self._new_view(\r\n"]
[175.426, "o", "                    self.value.copy(), self.unit / other, propagate_info=False\r\n"]
[175.436, "o", "                )\r\n"]
[175.446, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[175.456, "o", "                return NotImplemented\r\n"]
[175.466, "o", "\r\n"]
[175.476, "o", "        return super().__truediv__(other)\r\n"]
[175.486, "o", "\r\n"]
[175.496, "o", "    def __itruediv__(self, other):\r\n"]
[175.506, "o", "        \"\"\"Inplace division between `Quantity` objects and other objects.\"\"\"\r\n"]
[175.516, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[175.526, "o", "            self._set_unit(self.unit / other)\r\n"]
[175.536, "o", "            return self\r\n"]
[175.546, "o", "\r\n"]
[175.556, "o", "        return super().__itruediv__(other)\r\n"]
[175.566, "o", "\r\n"]
[175.576, "o", "    def __rtruediv__(self, other):\r\n"]
[175.586, "o", "        \"\"\"Right Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[175.596, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[175.606, "o", "            return self._new_view(\r\n"]
[175.616, "o", "                1.0 / self.value, other / self.unit, propagate_info=False\r\n"]
[175.626, "o", "            )\r\n"]
[175.636, "o", "\r\n"]
[175.646, "o", "        return super().__rtruediv__(other)\r\n"]
[175.656, "o", "\r\n"]
[175.666, "o", "    def __pow__(self, other):\r\n"]
[175.676, "o", "        if isinstance(other, Fraction):\r\n"]
[175.686, "o", "            # Avoid getting object arrays by raising the value to a Fraction.\r\n"]
[175.696, "o", "            return self._new_view(\r\n"]
[175.706, "o", "                self.value ** float(other), self.unit**other, propagate_info=False\r\n"]
[175.716, "o", "            )\r\n"]
[175.726, "o", "\r\n"]
[175.736, "o", "        return super().__pow__(other)\r\n"]
[175.746, "o", "\r\n"]
[175.756, "o", "    # other overrides of special functions\r\n"]
[175.766, "o", "    def __hash__(self):\r\n"]
[175.776, "o", "        return hash(self.value) ^ hash(self.unit)\r\n"]
[175.786, "o", "\r\n"]
[175.796, "o", "    def __iter__(self):\r\n"]
[175.806, "o", "        if self.isscalar:\r\n"]
[175.816, "o", "            raise TypeError(\r\n"]
[175.826, "o", "                f\"'{self.__class__.__name__}' object with a scalar value is not\"\r\n"]
[175.836, "o", "                \" iterable\"\r\n"]
[175.846, "o", "            )\r\n"]
[175.856, "o", "\r\n"]
[175.866, "o", "        # Otherwise return a generator\r\n"]
[175.876, "o", "        def quantity_iter():\r\n"]
[175.886, "o", "            for val in self.value:\r\n"]
[175.896, "o", "                yield self._new_view(val)\r\n"]
[175.906, "o", "\r\n"]
[175.916, "o", "        return quantity_iter()\r\n"]
[175.926, "o", "\r\n"]
[175.936, "o", "    def __getitem__(self, key):\r\n"]
[175.946, "o", "        if isinstance(key, str) and isinstance(self.unit, StructuredUnit):\r\n"]
[175.956, "o", "            return self._new_view(\r\n"]
[175.966, "o", "                self.view(np.ndarray)[key], self.unit[key], propagate_info=False\r\n"]
[175.976, "o", "            )\r\n"]
[175.986, "o", "\r\n"]
[175.996, "o", "        try:\r\n"]
[176.006, "o", "            out = super().__getitem__(key)\r\n"]
[176.016, "o", "        except IndexError:\r\n"]
[176.026, "o", "            # We want zero-dimensional Quantity objects to behave like scalars,\r\n"]
[176.036, "o", "            # so they should raise a TypeError rather than an IndexError.\r\n"]
[176.046, "o", "            if self.isscalar:\r\n"]
[176.056, "o", "                raise TypeError(\r\n"]
[176.066, "o", "                    f\"'{self.__class__.__name__}' object with a scalar value \"\r\n"]
[176.076, "o", "                    \"does not support indexing\"\r\n"]
[176.086, "o", "                )\r\n"]
[176.096, "o", "            else:\r\n"]
[176.106, "o", "                raise\r\n"]
[176.116, "o", "        # For single elements, ndarray.__getitem__ returns scalars; these\r\n"]
[176.126, "o", "        # need a new view as a Quantity.\r\n"]
[176.136, "o", "        if not isinstance(out, np.ndarray):\r\n"]
[176.146, "o", "            out = self._new_view(out)\r\n"]
[176.156, "o", "        return out\r\n"]
[176.166, "o", "\r\n"]
[176.176, "o", "    def __setitem__(self, i, value):\r\n"]
[176.186, "o", "        if isinstance(i, str):\r\n"]
[176.196, "o", "            # Indexing will cause a different unit, so by doing this in\r\n"]
[176.206, "o", "            # two steps we effectively try with the right unit.\r\n"]
[176.216, "o", "            self[i][...] = value\r\n"]
[176.226, "o", "            return\r\n"]
[176.236, "o", "\r\n"]
[176.246, "o", "        # update indices in info if the info property has been accessed\r\n"]
[176.256, "o", "        # (in which case 'info' in self.__dict__ is True; this is guaranteed\r\n"]
[176.266, "o", "        # to be the case if we're part of a table).\r\n"]
[176.276, "o", "        if not self.isscalar and \"info\" in self.__dict__:\r\n"]
[176.286, "o", "            self.info.adjust_indices(i, value, len(self))\r\n"]
[176.296, "o", "        self.view(np.ndarray).__setitem__(i, self._to_own_unit(value))\r\n"]
[176.306, "o", "\r\n"]
[176.316, "o", "    # __contains__ is OK\r\n"]
[176.326, "o", "\r\n"]
[176.336, "o", "    def __bool__(self):\r\n"]
[176.346, "o", "        \"\"\"This method raises ValueError, since truthiness of quantities is ambiguous,\r\n"]
[176.356, "o", "        especially for logarithmic units and temperatures. Use explicit comparisons.\r\n"]
[176.366, "o", "        \"\"\"\r\n"]
[176.376, "o", "        raise ValueError(\r\n"]
[176.386, "o", "            f\"{type(self).__name__} truthiness is ambiguous, especially for logarithmic units\"\r\n"]
[176.396, "o", "            \" and temperatures. Use explicit comparisons.\"\r\n"]
[176.406, "o", "        )\r\n"]
[176.416, "o", "\r\n"]
[176.426, "o", "    def __len__(self):\r\n"]
[176.436, "o", "        if self.isscalar:\r\n"]
[176.446, "o", "            raise TypeError(\r\n"]
[176.456, "o", "                f\"'{self.__class__.__name__}' object with a scalar value has no len()\"\r\n"]
[176.466, "o", "            )\r\n"]
[176.476, "o", "        else:\r\n"]
[176.486, "o", "            return len(self.value)\r\n"]
[176.496, "o", "\r\n"]
[176.506, "o", "    # Numerical types\r\n"]
[176.516, "o", "    def __float__(self):\r\n"]
[176.526, "o", "        try:\r\n"]
[176.536, "o", "            return float(self.to_value(dimensionless_unscaled))\r\n"]
[176.546, "o", "        except (UnitsError, TypeError):\r\n"]
[176.556, "o", "            raise TypeError(\r\n"]
[176.566, "o", "                \"only dimensionless scalar quantities can be \"\r\n"]
[176.576, "o", "                \"converted to Python scalars\"\r\n"]
[176.586, "o", "            )\r\n"]
[176.596, "o", "\r\n"]
[176.606, "o", "    def __int__(self):\r\n"]
[176.616, "o", "        try:\r\n"]
[176.626, "o", "            return int(self.to_value(dimensionless_unscaled))\r\n"]
[176.636, "o", "        except (UnitsError, TypeError):\r\n"]
[176.646, "o", "            raise TypeError(\r\n"]
[176.656, "o", "                \"only dimensionless scalar quantities can be \"\r\n"]
[176.666, "o", "                \"converted to Python scalars\"\r\n"]
[176.676, "o", "            )\r\n"]
[176.686, "o", "\r\n"]
[176.696, "o", "    def __index__(self):\r\n"]
[176.706, "o", "        # for indices, we do not want to mess around with scaling at all,\r\n"]
[176.716, "o", "        # so unlike for float, int, we insist here on unscaled dimensionless\r\n"]
[176.726, "o", "        try:\r\n"]
[176.736, "o", "            assert self.unit.is_unity()\r\n"]
[176.746, "o", "            return self.value.__index__()\r\n"]
[176.756, "o", "        except Exception:\r\n"]
[176.766, "o", "            raise TypeError(\r\n"]
[176.776, "o", "                \"only integer dimensionless scalar quantities \"\r\n"]
[176.786, "o", "                \"can be converted to a Python index\"\r\n"]
[176.796, "o", "            )\r\n"]
[176.806, "o", "\r\n"]
[176.816, "o", "    # TODO: we may want to add a hook for dimensionless quantities?\r\n"]
[176.826, "o", "    @property\r\n"]
[176.836, "o", "    def _unitstr(self):\r\n"]
[176.846, "o", "        if self.unit is None:\r\n"]
[176.856, "o", "            unitstr = _UNIT_NOT_INITIALISED\r\n"]
[176.866, "o", "        else:\r\n"]
[176.876, "o", "            unitstr = str(self.unit)\r\n"]
[176.886, "o", "\r\n"]
[176.896, "o", "        if unitstr:\r\n"]
[176.906, "o", "            unitstr = \" \" + unitstr\r\n"]
[176.916, "o", "\r\n"]
[176.926, "o", "        return unitstr\r\n"]
[176.936, "o", "\r\n"]
[176.946, "o", "    def to_string(\r\n"]
[176.956, "o", "        self, unit=None, precision=None, format=None, subfmt=None, *, formatter=None\r\n"]
[176.966, "o", "    ):\r\n"]
[176.976, "o", "        \"\"\"\r\n"]
[176.986, "o", "        Generate a string representation of the quantity and its unit.\r\n"]
[176.996, "o", "\r\n"]
[177.006, "o", "        The behavior of this function can be altered via the\r\n"]
[177.016, "o", "        `numpy.set_printoptions` function and its various keywords.  The\r\n"]
[177.026, "o", "        exception to this is the ``threshold`` keyword, which is controlled via\r\n"]
[177.036, "o", "        the ``[units.quantity]`` configuration item ``latex_array_threshold``.\r\n"]
[177.046, "o", "        This is treated separately because the numpy default of 1000 is too big\r\n"]
[177.056, "o", "        for most browsers to handle.\r\n"]
[177.066, "o", "\r\n"]
[177.076, "o", "        Parameters\r\n"]
[177.086, "o", "        ----------\r\n"]
[177.096, "o", "        unit : unit-like, optional\r\n"]
[177.106, "o", "            Specifies the unit.  If not provided,\r\n"]
[177.116, "o", "            the unit used to initialize the quantity will be used.\r\n"]
[177.126, "o", "\r\n"]
[177.136, "o", "        precision : number, optional\r\n"]
[177.146, "o", "            The level of decimal precision. If `None`, or not provided,\r\n"]
[177.156, "o", "            it will be determined from NumPy print options.\r\n"]
[177.166, "o", "\r\n"]
[177.176, "o", "        format : str, optional\r\n"]
[177.186, "o", "            The format of the result. If not provided, an unadorned\r\n"]
[177.196, "o", "            string is returned. Supported values are:\r\n"]
[177.206, "o", "\r\n"]
[177.216, "o", "            - 'latex': Return a LaTeX-formatted string\r\n"]
[177.226, "o", "\r\n"]
[177.236, "o", "            - 'latex_inline': Return a LaTeX-formatted string that uses\r\n"]
[177.246, "o", "              negative exponents instead of fractions\r\n"]
[177.256, "o", "\r\n"]
[177.266, "o", "        formatter : str, callable, dict, optional\r\n"]
[177.276, "o", "            The formatter to use for the value. If a string, it should be a\r\n"]
[177.286, "o", "            valid format specifier using Python's mini-language. If a callable,\r\n"]
[177.296, "o", "            it will be treated as the default formatter for all values and will\r\n"]
[177.306, "o", "            overwrite default Latex formatting for exponential notation and complex\r\n"]
[177.316, "o", "            numbers. If a dict, it should map a specific type to a callable to be\r\n"]
[177.326, "o", "            directly passed into `numpy.array2string`. If not provided, the default\r\n"]
[177.336, "o", "            formatter will be used.\r\n"]
[177.346, "o", "\r\n"]
[177.356, "o", "        subfmt : str, optional\r\n"]
[177.366, "o", "            Subformat of the result. For the moment, only used for\r\n"]
[177.376, "o", "            ``format='latex'`` and ``format='latex_inline'``. Supported\r\n"]
[177.386, "o", "            values are:\r\n"]
[177.396, "o", "\r\n"]
[177.406, "o", "            - 'inline': Use ``$ ... $`` as delimiters.\r\n"]
[177.416, "o", "\r\n"]
[177.426, "o", "            - 'display': Use ``$\\\\displaystyle ... $`` as delimiters.\r\n"]
[177.436, "o", "\r\n"]
[177.446, "o", "        Returns\r\n"]
[177.456, "o", "        -------\r\n"]
[177.466, "o", "        str\r\n"]
[177.476, "o", "            A string with the contents of this Quantity\r\n"]
[177.486, "o", "        \"\"\"\r\n"]
[177.496, "o", "        if unit is not None and unit != self.unit:\r\n"]
[177.506, "o", "            return self.to(unit).to_string(\r\n"]
[177.516, "o", "                unit=None,\r\n"]
[177.526, "o", "                precision=precision,\r\n"]
[177.536, "o", "                format=format,\r\n"]
[177.546, "o", "                subfmt=subfmt,\r\n"]
[177.556, "o", "                formatter=formatter,\r\n"]
[177.566, "o", "            )\r\n"]
[177.576, "o", "\r\n"]
[177.586, "o", "        if format is None and formatter is None and precision is None:\r\n"]
[177.596, "o", "            # Use default formatting settings\r\n"]
[177.606, "o", "            return f\"{self.value}{self._unitstr:s}\"\r\n"]
[177.616, "o", "\r\n"]
[177.626, "o", "        formats = {\r\n"]
[177.636, "o", "            None: None,\r\n"]
[177.646, "o", "            \"latex\": {\r\n"]
[177.656, "o", "                None: (\"$\", \"$\"),\r\n"]
[177.666, "o", "                \"inline\": (\"$\", \"$\"),\r\n"]
[177.676, "o", "                \"display\": (r\"$\\displaystyle \", r\"$\"),\r\n"]
[177.686, "o", "            },\r\n"]
[177.696, "o", "        }\r\n"]
[177.706, "o", "        formats[\"latex_inline\"] = formats[\"latex\"]\r\n"]
[177.716, "o", "\r\n"]
[177.726, "o", "        if format not in formats:\r\n"]
[177.736, "o", "            raise ValueError(f\"Unknown format '{format}'\")\r\n"]
[177.746, "o", "\r\n"]
[177.756, "o", "        format_spec = formatter if isinstance(formatter, str) else None\r\n"]
[177.766, "o", "\r\n"]
[177.776, "o", "        if format is None:\r\n"]
[177.786, "o", "            if format_spec is not None:\r\n"]
[177.796, "o", "\r\n"]
[177.806, "o", "                def formatter(value):\r\n"]
[177.816, "o", "                    return builtins.format(value, format_spec)\r\n"]
[177.826, "o", "\r\n"]
[177.836, "o", "            if callable(formatter):\r\n"]
[177.846, "o", "                formatter = {\"all\": formatter}\r\n"]
[177.856, "o", "\r\n"]
[177.866, "o", "            return (\r\n"]
[177.876, "o", "                np.array2string(\r\n"]
[177.886, "o", "                    self.value,\r\n"]
[177.896, "o", "                    precision=precision,\r\n"]
[177.906, "o", "                    floatmode=\"fixed\",\r\n"]
[177.916, "o", "                    formatter=formatter,\r\n"]
[177.926, "o", "                )\r\n"]
[177.936, "o", "                + self._unitstr\r\n"]
[177.946, "o", "            )\r\n"]
[177.956, "o", "\r\n"]
[177.966, "o", "        # else, for the moment we assume format=\"latex\" or \"latex_inline\".\r\n"]
[177.976, "o", "\r\n"]
[177.986, "o", "        # Set the precision if set, otherwise use numpy default\r\n"]
[177.996, "o", "        pops = np.get_printoptions()\r\n"]
[178.006, "o", "        if format_spec is None:\r\n"]
[178.016, "o", "            format_spec = (\r\n"]
[178.026, "o", "                f\".{precision if precision is not None else pops['precision']}g\"\r\n"]
[178.036, "o", "            )\r\n"]
[178.046, "o", "\r\n"]
[178.056, "o", "        # Use default formatters\r\n"]
[178.066, "o", "        if formatter is None or isinstance(formatter, str):\r\n"]
[178.076, "o", "            # Filter width and alignment operations for latex\r\n"]
[178.086, "o", "            # [[fill]align][sign][\"z\"][\"#\"][\"0\"][width][grouping_option][\".\" precision][type]\r\n"]
[178.096, "o", "            format_spec = re.sub(\r\n"]
[178.106, "o", "                r\"(.*?)([+\\- ]?)(\\d+)?(,)?(\\.\\d+)?([a-zA-Z%]+)?$\",\r\n"]
[178.116, "o", "                r\"\\2\\5\\6\",\r\n"]
[178.126, "o", "                format_spec,\r\n"]
[178.136, "o", "            )\r\n"]
[178.146, "o", "\r\n"]
[178.156, "o", "            if self.dtype.kind == \"c\":  # Complex default latex formatter\r\n"]
[178.166, "o", "                # Disallow sign operations for the imaginary part\r\n"]
[178.176, "o", "                imag_format_spec = re.sub(r\"[+\\- ]\", \"\", format_spec)\r\n"]
[178.186, "o", "\r\n"]
[178.196, "o", "                def formatter(value):\r\n"]
[178.206, "o", "                    return \"({}{}i)\".format(\r\n"]
[178.216, "o", "                        Latex.format_exponential_notation(\r\n"]
[178.226, "o", "                            value.real, format_spec=format_spec\r\n"]
[178.236, "o", "                        ),\r\n"]
[178.246, "o", "                        Latex.format_exponential_notation(\r\n"]
[178.256, "o", "                            value.imag, format_spec=\"+\" + imag_format_spec\r\n"]
[178.266, "o", "                        ),\r\n"]
[178.276, "o", "                    )\r\n"]
[178.286, "o", "\r\n"]
[178.296, "o", "            else:  # Float default latex formatter\r\n"]
[178.306, "o", "\r\n"]
[178.316, "o", "                def formatter(value):\r\n"]
[178.326, "o", "                    return Latex.format_exponential_notation(\r\n"]
[178.336, "o", "                        value, format_spec=format_spec\r\n"]
[178.346, "o", "                    )\r\n"]
[178.356, "o", "\r\n"]
[178.366, "o", "        if callable(formatter):\r\n"]
[178.376, "o", "            formatter = {\"all\": formatter}\r\n"]
[178.386, "o", "\r\n"]
[178.396, "o", "        # The view is needed for the scalar case - self.value might be float.\r\n"]
[178.406, "o", "        latex_value = np.array2string(\r\n"]
[178.416, "o", "            self.view(np.ndarray),\r\n"]
[178.426, "o", "            threshold=(\r\n"]
[178.436, "o", "                conf.latex_array_threshold\r\n"]
[178.446, "o", "                if conf.latex_array_threshold > -1\r\n"]
[178.456, "o", "                else pops[\"threshold\"]\r\n"]
[178.466, "o", "            ),\r\n"]
[178.476, "o", "            formatter=formatter,\r\n"]
[178.486, "o", "            max_line_width=np.inf,\r\n"]
[178.496, "o", "            separator=\",~\",\r\n"]
[178.506, "o", "        )\r\n"]
[178.516, "o", "\r\n"]
[178.526, "o", "        latex_value = latex_value.replace(\"...\", r\"\\dots\")\r\n"]
[178.536, "o", "\r\n"]
[178.546, "o", "        # Format unit\r\n"]
[178.556, "o", "        # [1:-1] strips the '$' on either side needed for math mode\r\n"]
[178.566, "o", "        if self.unit is None:\r\n"]
[178.576, "o", "            latex_unit = _UNIT_NOT_INITIALISED\r\n"]
[178.586, "o", "        elif format == \"latex\":\r\n"]
[178.596, "o", "            latex_unit = self.unit._repr_latex_()[1:-1]  # note this is unicode\r\n"]
[178.606, "o", "        elif format == \"latex_inline\":\r\n"]
[178.616, "o", "            latex_unit = self.unit.to_string(format=\"latex_inline\")[1:-1]\r\n"]
[178.626, "o", "\r\n"]
[178.636, "o", "        delimiter_left, delimiter_right = formats[format][subfmt]\r\n"]
[178.646, "o", "\r\n"]
[178.656, "o", "        # Add a space in front except for super-script units like degrees.\r\n"]
[178.666, "o", "        if not latex_unit.removeprefix(\"\\\\mathrm{\").startswith(\"{}^\"):\r\n"]
[178.676, "o", "            latex_unit = rf\" \\; {latex_unit}\"\r\n"]
[178.686, "o", "\r\n"]
[178.696, "o", "        return rf\"{delimiter_left}{latex_value}{latex_unit}{delimiter_right}\"\r\n"]
[178.706, "o", "\r\n"]
[178.716, "o", "    def __str__(self):\r\n"]
[178.726, "o", "        return self.to_string()\r\n"]
[178.736, "o", "\r\n"]
[178.746, "o", "    def __repr__(self):\r\n"]
[178.756, "o", "        prefixstr = \"<\" + self.__class__.__name__ + \" \"\r\n"]
[178.766, "o", "        arrstr = np.array2string(\r\n"]
[178.776, "o", "            self.view(np.ndarray), separator=\", \", prefix=prefixstr\r\n"]
[178.786, "o", "        )\r\n"]
[178.796, "o", "        return f\"{prefixstr}{arrstr}{self._unitstr:s}>\"\r\n"]
[178.806, "o", "\r\n"]
[178.816, "o", "    def _repr_latex_(self):\r\n"]
[178.826, "o", "        \"\"\"\r\n"]
[178.836, "o", "        Generate a latex representation of the quantity and its unit.\r\n"]
[178.846, "o", "\r\n"]
[178.856, "o", "        Returns\r\n"]
[178.866, "o", "        -------\r\n"]
[178.876, "o", "        lstr\r\n"]
[178.886, "o", "            A LaTeX string with the contents of this Quantity\r\n"]
[178.896, "o", "        \"\"\"\r\n"]
[178.906, "o", "        # NOTE: This should change to display format in a future release\r\n"]
[178.916, "o", "        return self.to_string(format=\"latex\", subfmt=\"inline\")\r\n"]
[178.926, "o", "\r\n"]
[178.936, "o", "    def __format__(self, format_spec):\r\n"]
[178.946, "o", "        try:\r\n"]
[178.956, "o", "            return self.to_string(format=format_spec)\r\n"]
[178.966, "o", "        except ValueError:\r\n"]
[178.976, "o", "            # We might have a unit format not implemented in `to_string()`.\r\n"]
[178.986, "o", "            if format_spec in Base.registry:\r\n"]
[178.996, "o", "                if self.unit is dimensionless_unscaled:\r\n"]
[179.006, "o", "                    return f\"{self.value}\"\r\n"]
[179.016, "o", "                else:\r\n"]
[179.026, "o", "                    return f\"{self.value} {format(self.unit, format_spec)}\"\r\n"]
[179.036, "o", "            # Can the value be formatted on its own?\r\n"]
[179.046, "o", "            try:\r\n"]
[179.056, "o", "                return f\"{format(self.value, format_spec)}{self._unitstr:s}\"\r\n"]
[179.066, "o", "            except ValueError:\r\n"]
[179.076, "o", "                # Format the whole thing as a single string.\r\n"]
[179.086, "o", "                return format(f\"{self.value}{self._unitstr:s}\", format_spec)\r\n"]
[179.096, "o", "\r\n"]
[179.106, "o", "    def decompose(self, bases=[]):\r\n"]
[179.116, "o", "        \"\"\"\r\n"]
[179.126, "o", "        Generates a new `Quantity` with the units\r\n"]
[179.136, "o", "        decomposed. Decomposed units have only irreducible units in\r\n"]
[179.146, "o", "        them (see `astropy.units.UnitBase.decompose`).\r\n"]
[179.156, "o", "\r\n"]
[179.166, "o", "        Parameters\r\n"]
[179.176, "o", "        ----------\r\n"]
[179.186, "o", "        bases : sequence of `~astropy.units.UnitBase`, optional\r\n"]
[179.196, "o", "            The bases to decompose into.  When not provided,\r\n"]
[179.206, "o", "            decomposes down to any irreducible units.  When provided,\r\n"]
[179.216, "o", "            the decomposed result will only contain the given units.\r\n"]
[179.226, "o", "            This will raises a `~astropy.units.UnitsError` if it's not possible\r\n"]
[179.236, "o", "            to do so.\r\n"]
[179.246, "o", "\r\n"]
[179.256, "o", "        Returns\r\n"]
[179.266, "o", "        -------\r\n"]
[179.276, "o", "        newq : `~astropy.units.Quantity`\r\n"]
[179.286, "o", "            A new object equal to this quantity with units decomposed.\r\n"]
[179.296, "o", "        \"\"\"\r\n"]
[179.306, "o", "        return self._decompose(False, bases=bases)\r\n"]
[179.316, "o", "\r\n"]
[179.326, "o", "    def _decompose(self, allowscaledunits=False, bases=[]):\r\n"]
[179.336, "o", "        \"\"\"\r\n"]
[179.346, "o", "        Generates a new `Quantity` with the units decomposed. Decomposed\r\n"]
[179.356, "o", "        units have only irreducible units in them (see\r\n"]
[179.366, "o", "        `astropy.units.UnitBase.decompose`).\r\n"]
[179.376, "o", "\r\n"]
[179.386, "o", "        Parameters\r\n"]
[179.396, "o", "        ----------\r\n"]
[179.406, "o", "        allowscaledunits : bool\r\n"]
[179.416, "o", "            If True, the resulting `Quantity` may have a scale factor\r\n"]
[179.426, "o", "            associated with it.  If False, any scaling in the unit will\r\n"]
[179.436, "o", "            be subsumed into the value of the resulting `Quantity`\r\n"]
[179.446, "o", "\r\n"]
[179.456, "o", "        bases : sequence of UnitBase, optional\r\n"]
[179.466, "o", "            The bases to decompose into.  When not provided,\r\n"]
[179.476, "o", "            decomposes down to any irreducible units.  When provided,\r\n"]
[179.486, "o", "            the decomposed result will only contain the given units.\r\n"]
[179.496, "o", "            This will raises a `~astropy.units.UnitsError` if it's not possible\r\n"]
[179.506, "o", "            to do so.\r\n"]
[179.516, "o", "\r\n"]
[179.526, "o", "        Returns\r\n"]
[179.536, "o", "        -------\r\n"]
[179.546, "o", "        newq : `~astropy.units.Quantity`\r\n"]
[179.556, "o", "            A new object equal to this quantity with units decomposed.\r\n"]
[179.566, "o", "\r\n"]
[179.576, "o", "        \"\"\"\r\n"]
[179.586, "o", "        new_unit = self.unit.decompose(bases=bases)\r\n"]
[179.596, "o", "\r\n"]
[179.606, "o", "        # Be careful here because self.value usually is a view of self;\r\n"]
[179.616, "o", "        # be sure that the original value is not being modified.\r\n"]
[179.626, "o", "        if not allowscaledunits and hasattr(new_unit, \"scale\"):\r\n"]
[179.636, "o", "            new_value = self.value * new_unit.scale\r\n"]
[179.646, "o", "            new_unit = new_unit / new_unit.scale\r\n"]
[179.656, "o", "            return self._new_view(new_value, new_unit)\r\n"]
[179.666, "o", "        else:\r\n"]
[179.676, "o", "            return self._new_view(self.copy(), new_unit)\r\n"]
[179.686, "o", "\r\n"]
[179.696, "o", "    # These functions need to be overridden to take into account the units\r\n"]
[179.706, "o", "    # Array conversion\r\n"]
[179.716, "o", "    # https://numpy.org/doc/stable/reference/arrays.ndarray.html#array-conversion\r\n"]
[179.726, "o", "\r\n"]
[179.736, "o", "    def item(self, *args):\r\n"]
[179.746, "o", "        \"\"\"Copy an element of an array to a scalar Quantity and return it.\r\n"]
[179.756, "o", "\r\n"]
[179.766, "o", "        Like :meth:`~numpy.ndarray.item` except that it always\r\n"]
[179.776, "o", "        returns a `Quantity`, not a Python scalar.\r\n"]
[179.786, "o", "\r\n"]
[179.796, "o", "        \"\"\"\r\n"]
[179.806, "o", "        return self._new_view(super().item(*args))\r\n"]
[179.816, "o", "\r\n"]
[179.826, "o", "    def tolist(self):\r\n"]
[179.836, "o", "        raise NotImplementedError(\r\n"]
[179.846, "o", "            \"cannot make a list of Quantities. Get list of values with\"\r\n"]
[179.856, "o", "            \" q.value.tolist().\"\r\n"]
[179.866, "o", "        )\r\n"]
[179.876, "o", "\r\n"]
[179.886, "o", "    def _to_own_unit(self, value, check_precision=True, *, unit=None):\r\n"]
[179.896, "o", "        \"\"\"Convert value to one's own unit (or that given).\r\n"]
[179.906, "o", "\r\n"]
[179.916, "o", "        Here, non-quantities are treated as dimensionless, and care is taken\r\n"]
[179.926, "o", "        for values of 0, infinity or nan, which are allowed to have any unit.\r\n"]
[179.936, "o", "\r\n"]
[180.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[180.002, "i", "cat asv.ci.conf.json\r"]
[180.004, "o", "cat asv.ci.conf.json\r\n"]
[180.3356, "o", "\u001b[?2004l\r\n"]
[180.6652, "o", " {\r\n"]
[180.9948, "o", "   \"version\": 1,\r\n"]
[181.3244, "o", "   \"project\": \"astropy\",\r\n"]
[181.654, "o", "   \"project_url\": \"http://www.astropy.org/\",\r\n"]
[181.9836, "o", "   \"repo\": \".\",\r\n"]
[182.3132, "o", "   \"install_command\": [\r\n"]
[182.6428, "o", "     \"pip install . matplotlib scipy\"\r\n"]
[182.9724, "o", "   ],\r\n"]
[183.302, "o", "   \"branches\": [\"main\"],\r\n"]
[183.6316, "o", "   \"show_commit_url\": \"http://github.com/astropy/astropy/commit/\",\r\n"]
[183.9612, "o", "   \"pythons\": [\"3.11\"],\r\n"]
[184.2908, "o", "   \"environment_type\": \"virtualenv\",\r\n"]
[184.6204, "o", "   \"benchmark_dir\": \"astropy-benchmarks/benchmarks\"\r\n"]
[185.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[185.002, "i", "sed -n '1,220p' astropy-benchmarks/benchmarks/units.py\r"]
[185.004, "o", "sed -n '1,220p' astropy-benchmarks/benchmarks/units.py\r\n"]
[185.028371, "o", "\u001b[?2004l\r\n"]
[185.050742, "o", "import copy\r\n"]
[185.073113, "o", "\r\n"]
[185.095484, "o", "import numpy as np\r\n"]
[185.117855, "o", "from astropy import units as u\r\n"]
[185.140226, "o", "\r\n"]
[185.162597, "o", "\r\n"]
[185.184968, "o", "# Unit tests\r\n"]
[185.207339, "o", "\r\n"]
[185.22971, "o", "\r\n"]
[185.252081, "o", "def time_unit_compose():\r\n"]
[185.274452, "o", "    u.Ry.compose()\r\n"]
[185.296824, "o", "\r\n"]
[185.319195, "o", "\r\n"]
[185.341566, "o", "def time_unit_to():\r\n"]
[185.363937, "o", "    u.m.to(u.pc)\r\n"]
[185.386308, "o", "\r\n"]
[185.408679, "o", "\r\n"]
[185.43105, "o", "def time_unit_parse():\r\n"]
[185.453421, "o", "    u.Unit(\"1e-07 kg m2 / s2\")\r\n"]
[185.475792, "o", "\r\n"]
[185.498163, "o", "\r\n"]
[185.520534, "o", "def time_simple_unit_parse():\r\n"]
[185.542905, "o", "    u.Unit(\"1 d\")\r\n"]
[185.565276, "o", "\r\n"]
[185.587647, "o", "\r\n"]
[185.610018, "o", "def time_very_simple_unit_parse():\r\n"]
[185.632389, "o", "    u.Unit(\"d\")\r\n"]
[185.65476, "o", "\r\n"]
[185.677131, "o", "\r\n"]
[185.699502, "o", "def mem_unit():\r\n"]
[185.721873, "o", "    return u.erg\r\n"]
[185.744244, "o", "\r\n"]
[185.766615, "o", "\r\n"]
[185.788986, "o", "def time_compose_to_bases():\r\n"]
[185.811357, "o", "    x = copy.copy(u.Ry)\r\n"]
[185.833729, "o", "    x.cgs\r\n"]
[185.8561, "o", "\r\n"]
[185.878471, "o", "\r\n"]
[185.900842, "o", "def time_compose_complex():\r\n"]
[185.923213, "o", "    # Composing a complex unit can be very inefficient\r\n"]
[185.945584, "o", "    (u.kg / u.s**3 * u.au**2.5 / u.yr**0.5 / u.sr**2).compose()\r\n"]
[185.967955, "o", "\r\n"]
[185.990326, "o", "\r\n"]
[186.012697, "o", "# Quantity tests\r\n"]
[186.035068, "o", "\r\n"]
[186.057439, "o", "a = np.arange(100000.0)\r\n"]
[186.07981, "o", "b1 = [1.0, 2.0, 3.0]\r\n"]
[186.102181, "o", "b2 = np.asarray(b1)\r\n"]
[186.124552, "o", "q0 = u.Quantity(1.0, u.s)\r\n"]
[186.146923, "o", "q1 = u.Quantity(a, u.m)\r\n"]
[186.169294, "o", "q2 = u.Quantity(a[:10000], u.deg)\r\n"]
[186.191665, "o", "\r\n"]
[186.214036, "o", "\r\n"]
[186.236407, "o", "def time_quantity_creation():\r\n"]
[186.258778, "o", "    u.Quantity(a, u.m)\r\n"]
[186.281149, "o", "\r\n"]
[186.30352, "o", "\r\n"]
[186.325891, "o", "def time_quantity_creation_nocopy():\r\n"]
[186.348262, "o", "    u.Quantity(a, u.m, copy=False)\r\n"]
[186.370633, "o", "\r\n"]
[186.393005, "o", "\r\n"]
[186.415376, "o", "def time_quantity_view():\r\n"]
[186.437747, "o", "    q1.view(u.Quantity)\r\n"]
[186.460118, "o", "\r\n"]
[186.482489, "o", "\r\n"]
[186.50486, "o", "def time_quantity_init_scalar():\r\n"]
[186.527231, "o", "    3.0 * u.m / u.s\r\n"]
[186.549602, "o", "\r\n"]
[186.571973, "o", "\r\n"]
[186.594344, "o", "def time_quantity_init_array():\r\n"]
[186.616715, "o", "    a * u.m / u.s\r\n"]
[186.639086, "o", "\r\n"]
[186.661457, "o", "\r\n"]
[186.683828, "o", "def time_quantity_init_small_list():\r\n"]
[186.706199, "o", "    \"\"\"\r\n"]
[186.72857, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[186.750941, "o", "    for small list.\r\n"]
[186.773312, "o", "    \"\"\"\r\n"]
[186.795683, "o", "    b1 * u.m / u.s\r\n"]
[186.818054, "o", "\r\n"]
[186.840425, "o", "\r\n"]
[186.862796, "o", "def time_quantity_init_small_array():\r\n"]
[186.885167, "o", "    \"\"\"\r\n"]
[186.907538, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[186.92991, "o", "    for small array.\r\n"]
[186.952281, "o", "    \"\"\"\r\n"]
[186.974652, "o", "    b2 * u.m / u.s\r\n"]
[186.997023, "o", "\r\n"]
[187.019394, "o", "\r\n"]
[187.041765, "o", "def time_quantity_scalar_conversion():\r\n"]
[187.064136, "o", "    (3.0 * u.m / u.s).to(u.km / u.hour)\r\n"]
[187.086507, "o", "\r\n"]
[187.108878, "o", "\r\n"]
[187.131249, "o", "def time_quantity_array_conversion():\r\n"]
[187.15362, "o", "    (a * u.m / u.s).to(u.km / u.hour)\r\n"]
[187.175991, "o", "\r\n"]
[187.198362, "o", "\r\n"]
[187.220733, "o", "def time_quantity_times_unit():\r\n"]
[187.243104, "o", "    q1 * u.m\r\n"]
[187.265475, "o", "\r\n"]
[187.287846, "o", "\r\n"]
[187.310217, "o", "def time_quantity_times_quantity():\r\n"]
[187.332588, "o", "    q1 * q0\r\n"]
[187.354959, "o", "\r\n"]
[187.37733, "o", "\r\n"]
[187.399701, "o", "def time_quantity_ufunc_sin():\r\n"]
[187.422072, "o", "    np.sin(q2)\r\n"]
[187.444443, "o", "\r\n"]
[187.466814, "o", "\r\n"]
[187.489186, "o", "class TimeQuantityOpSmallArray:\r\n"]
[187.511557, "o", "    \"\"\"\r\n"]
[187.533928, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[187.556299, "o", "    for a small Numpy array.\r\n"]
[187.57867, "o", "    \"\"\"\r\n"]
[187.601041, "o", "\r\n"]
[187.623412, "o", "    def setup(self):\r\n"]
[187.645783, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[187.668154, "o", "        self.data = data * u.g\r\n"]
[187.690525, "o", "        self.out_sq = data * u.g**2\r\n"]
[187.712896, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[187.735267, "o", "\r\n"]
[187.757638, "o", "    def time_quantity_square(self):\r\n"]
[187.780009, "o", "        self.data**2\r\n"]
[187.80238, "o", "\r\n"]
[187.824751, "o", "    def time_quantity_np_square(self):\r\n"]
[187.847122, "o", "        np.power(self.data, 2)\r\n"]
[187.869493, "o", "\r\n"]
[187.891864, "o", "    def time_quantity_np_square_out(self):\r\n"]
[187.914235, "o", "        np.power(self.data, 2, out=self.out_sq)\r\n"]
[187.936606, "o", "\r\n"]
[187.958977, "o", "    def time_quantity_sqrt(self):\r\n"]
[187.981348, "o", "        self.data**0.5\r\n"]
[188.003719, "o", "\r\n"]
[188.02609, "o", "    def time_quantity_np_sqrt(self):\r\n"]
[188.048462, "o", "        np.sqrt(self.data)\r\n"]
[188.070833, "o", "\r\n"]
[188.093204, "o", "    def time_quantity_np_sqrt_out(self):\r\n"]
[188.115575, "o", "        np.sqrt(self.data, out=self.out_sqrt)\r\n"]
[188.137946, "o", "\r\n"]
[188.160317, "o", "\r\n"]
[188.182688, "o", "class TimeQuantityOpLargeArray(TimeQuantityOpSmallArray):\r\n"]
[188.205059, "o", "    \"\"\"\r\n"]
[188.22743, "o", "    Like :class:`TimeQuantityOpSmallArray` but for a large Numpy array.\r\n"]
[188.249801, "o", "    \"\"\"\r\n"]
[188.272172, "o", "\r\n"]
[188.294543, "o", "    def setup(self):\r\n"]
[188.316914, "o", "        data = np.arange(1e6) + 1\r\n"]
[188.339285, "o", "        self.data = data * u.g\r\n"]
[188.361656, "o", "        self.out_sq = data * u.g**2\r\n"]
[188.384027, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[188.406398, "o", "\r\n"]
[188.428769, "o", "\r\n"]
[188.45114, "o", "class TimeQuantityOpSmallArrayDiffUnit:\r\n"]
[188.473511, "o", "    \"\"\"\r\n"]
[188.495882, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[188.518253, "o", "    for small Numpy arrays with different units.\r\n"]
[188.540624, "o", "    \"\"\"\r\n"]
[188.562995, "o", "\r\n"]
[188.585367, "o", "    def setup(self):\r\n"]
[188.607738, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[188.630109, "o", "        self.data = data * u.g\r\n"]
[188.65248, "o", "\r\n"]
[188.674851, "o", "        # A different but dimensionally compatible unit\r\n"]
[188.697222, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[188.719593, "o", "\r\n"]
[188.741964, "o", "    def time_quantity_equal(self):\r\n"]
[188.764335, "o", "        # Same as operator.eq\r\n"]
[188.786706, "o", "        self.data == self.data2\r\n"]
[188.809077, "o", "\r\n"]
[188.831448, "o", "    def time_quantity_np_equal(self):\r\n"]
[188.853819, "o", "        np.equal(self.data, self.data2)\r\n"]
[188.87619, "o", "\r\n"]
[188.898561, "o", "    def time_quantity_truediv(self):\r\n"]
[188.920932, "o", "        # Since benchmark is PY3 only, this is always true divide.\r\n"]
[188.943303, "o", "        # Same as operator.truediv\r\n"]
[188.965674, "o", "        self.data / self.data2\r\n"]
[188.988045, "o", "\r\n"]
[189.010416, "o", "    def time_quantity_np_truediv(self):\r\n"]
[189.032787, "o", "        np.true_divide(self.data, self.data2)\r\n"]
[189.055158, "o", "\r\n"]
[189.077529, "o", "    def time_quantity_mul(self):\r\n"]
[189.0999, "o", "        # Same as operator.mul\r\n"]
[189.122271, "o", "        self.data * self.data2\r\n"]
[189.144643, "o", "\r\n"]
[189.167014, "o", "    def time_quantity_np_multiply(self):\r\n"]
[189.189385, "o", "        np.multiply(self.data, self.data2)\r\n"]
[189.211756, "o", "\r\n"]
[189.234127, "o", "    def time_quantity_sub(self):\r\n"]
[189.256498, "o", "        # Same as operator.sub\r\n"]
[189.278869, "o", "        self.data - self.data2\r\n"]
[189.30124, "o", "\r\n"]
[189.323611, "o", "    def time_quantity_np_subtract(self):\r\n"]
[189.345982, "o", "        np.subtract(self.data, self.data2)\r\n"]
[189.368353, "o", "\r\n"]
[189.390724, "o", "    def time_quantity_add(self):\r\n"]
[189.413095, "o", "        # Same as operator.add\r\n"]
[189.435466, "o", "        self.data + self.data2\r\n"]
[189.457837, "o", "\r\n"]
[189.480208, "o", "    def time_quantity_np_add(self):\r\n"]
[189.502579, "o", "        np.add(self.data, self.data2)\r\n"]
[189.52495, "o", "\r\n"]
[189.547321, "o", "\r\n"]
[189.569692, "o", "class TimeQuantityOpSmallArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[189.592063, "o", "    \"\"\"\r\n"]
[189.614434, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[189.636805, "o", "    for small Numpy arrays with same units.\r\n"]
[189.659176, "o", "    \"\"\"\r\n"]
[189.681548, "o", "\r\n"]
[189.703919, "o", "    def setup(self):\r\n"]
[189.72629, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[189.748661, "o", "        self.data = data * u.g\r\n"]
[189.771032, "o", "        self.data2 = self.data.copy()\r\n"]
[189.793403, "o", "\r\n"]
[189.815774, "o", "\r\n"]
[189.838145, "o", "class TimeQuantityOpLargeArrayDiffUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[189.860516, "o", "    \"\"\"\r\n"]
[189.882887, "o", "    Like :class:`TimeQuantityOpSmallArrayDiffUnit` but for large Numpy arrays.\r\n"]
[189.905258, "o", "    \"\"\"\r\n"]
[189.927629, "o", "\r\n"]
[190.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[190.002, "i", "asv dev -c asv.ci.conf.json -b \"units.time_quantity_init_small_list|units.time_quantity_creation_nocopy|units.time_\r"]
[190.004, "o", "asv dev -c asv.ci.conf.json -b \"units.time_quantity_init_small_list|units.time_quantity_creation_nocopy|units.time_\r\n"]
[190.9948, "o", "_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view\"\r\n"]
[191.9836, "o", "\u001b[?2004l\r\n"]
[192.9724, "o", "usage: asv [-h] [--verbose] [--config CONFIG] [--version]\r\n"]
[193.9612, "o", "           {help,quickstart,machine,setup,run,continuous,find,rm,publish,preview,profile,update,show,compare,check,gh-pages} ...\r\n"]
[195.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[195.002, "i", "asv profile -c asv.ci.conf.json units.time_quantity_times_unit\r"]
[195.004, "o", "asv profile -c asv.ci.conf.json units.time_quantity_times_unit\r\n"]
[196.242, "o", "\u001b[?2004l\r\n"]
[197.478, "o", "usage: asv [-h] [--verbose] [--config CONFIG] [--version]\r\n"]
[198.714, "o", "           {help,quickstart,machine,setup,run,continuous,find,rm,publish,preview,profile,update,show,compare,check,gh-pages} ...\r\n"]
[200.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[200.002, "i", "sed -n '1,400p' astropy/units/quantity.py\r"]
[200.004, "o", "sed -n '1,400p' astropy/units/quantity.py\r\n"]
[200.018329, "o", "\u001b[?2004l\r\n"]
[200.030658, "o", "# Licensed under a 3-clause BSD style license - see LICENSE.rst\r\n"]
[200.042988, "o", "\"\"\"\r\n"]
[200.055317, "o", "This module defines the `Quantity` object, which represents a number with some\r\n"]
[200.067646, "o", "associated units. `Quantity` objects support operations like ordinary numbers,\r\n"]
[200.079975, "o", "but will deal with unit conversions internally.\r\n"]
[200.092304, "o", "\"\"\"\r\n"]
[200.104633, "o", "\r\n"]
[200.116963, "o", "from __future__ import annotations\r\n"]
[200.129292, "o", "\r\n"]
[200.141621, "o", "import builtins\r\n"]
[200.15395, "o", "import numbers\r\n"]
[200.166279, "o", "import operator\r\n"]
[200.178608, "o", "import re\r\n"]
[200.190938, "o", "import warnings\r\n"]
[200.203267, "o", "from fractions import Fraction\r\n"]
[200.215596, "o", "from typing import TYPE_CHECKING\r\n"]
[200.227925, "o", "\r\n"]
[200.240254, "o", "import numpy as np\r\n"]
[200.252584, "o", "\r\n"]
[200.264913, "o", "from astropy import config as _config\r\n"]
[200.277242, "o", "from astropy.utils.compat.numpycompat import COPY_IF_NEEDED, NUMPY_LT_2_0\r\n"]
[200.289571, "o", "from astropy.utils.data_info import ParentDtypeInfo\r\n"]
[200.3019, "o", "from astropy.utils.exceptions import AstropyWarning\r\n"]
[200.314229, "o", "\r\n"]
[200.326559, "o", "from .core import (\r\n"]
[200.338888, "o", "    Unit,\r\n"]
[200.351217, "o", "    UnitBase,\r\n"]
[200.363546, "o", "    UnitConversionError,\r\n"]
[200.375875, "o", "    UnitsError,\r\n"]
[200.388204, "o", "    UnitTypeError,\r\n"]
[200.400534, "o", "    dimensionless_unscaled,\r\n"]
[200.412863, "o", "    get_current_unit_registry,\r\n"]
[200.425192, "o", ")\r\n"]
[200.437521, "o", "from .format import Base, Latex\r\n"]
[200.44985, "o", "from .quantity_helper import can_have_arbitrary_unit, check_output, converters_and_unit\r\n"]
[200.46218, "o", "from .quantity_helper.function_helpers import (\r\n"]
[200.474509, "o", "    DISPATCHED_FUNCTIONS,\r\n"]
[200.486838, "o", "    FUNCTION_HELPERS,\r\n"]
[200.499167, "o", "    SUBCLASS_SAFE_FUNCTIONS,\r\n"]
[200.511496, "o", "    UNSUPPORTED_FUNCTIONS,\r\n"]
[200.523825, "o", ")\r\n"]
[200.536155, "o", "from .structured import StructuredUnit, _structured_unit_like_dtype\r\n"]
[200.548484, "o", "from .utils import is_effectively_unity\r\n"]
[200.560813, "o", "\r\n"]
[200.573142, "o", "if TYPE_CHECKING:\r\n"]
[200.585471, "o", "    from typing_extensions import Self\r\n"]
[200.5978, "o", "\r\n"]
[200.61013, "o", "    from .typing import QuantityLike\r\n"]
[200.622459, "o", "\r\n"]
[200.634788, "o", "__all__ = [\r\n"]
[200.647117, "o", "    \"Quantity\",\r\n"]
[200.659446, "o", "    \"SpecificTypeQuantity\",\r\n"]
[200.671776, "o", "    \"QuantityInfoBase\",\r\n"]
[200.684105, "o", "    \"QuantityInfo\",\r\n"]
[200.696434, "o", "    \"allclose\",\r\n"]
[200.708763, "o", "    \"isclose\",\r\n"]
[200.721092, "o", "]\r\n"]
[200.733421, "o", "\r\n"]
[200.745751, "o", "\r\n"]
[200.75808, "o", "# We don't want to run doctests in the docstrings we inherit from Numpy\r\n"]
[200.770409, "o", "__doctest_skip__ = [\"Quantity.*\"]\r\n"]
[200.782738, "o", "\r\n"]
[200.795067, "o", "_UNIT_NOT_INITIALISED = \"(Unit not initialised)\"\r\n"]
[200.807397, "o", "_UFUNCS_FILTER_WARNINGS = {np.arcsin, np.arccos, np.arccosh, np.arctanh}\r\n"]
[200.819726, "o", "\r\n"]
[200.832055, "o", "\r\n"]
[200.844384, "o", "class Conf(_config.ConfigNamespace):\r\n"]
[200.856713, "o", "    \"\"\"\r\n"]
[200.869042, "o", "    Configuration parameters for Quantity.\r\n"]
[200.881372, "o", "    \"\"\"\r\n"]
[200.893701, "o", "\r\n"]
[200.90603, "o", "    latex_array_threshold = _config.ConfigItem(\r\n"]
[200.918359, "o", "        100,\r\n"]
[200.930688, "o", "        \"The maximum size an array Quantity can be before its LaTeX \"\r\n"]
[200.943017, "o", "        'representation for IPython gets \"summarized\" (meaning only the first '\r\n"]
[200.955347, "o", "        'and last few elements are shown with \"...\" between). Setting this to a '\r\n"]
[200.967676, "o", "        \"negative number means that the value will instead be whatever numpy \"\r\n"]
[200.980005, "o", "        \"gets from get_printoptions.\",\r\n"]
[200.992334, "o", "    )\r\n"]
[201.004663, "o", "\r\n"]
[201.016993, "o", "\r\n"]
[201.029322, "o", "conf = Conf()\r\n"]
[201.041651, "o", "\r\n"]
[201.05398, "o", "\r\n"]
[201.066309, "o", "class QuantityIterator:\r\n"]
[201.078638, "o", "    \"\"\"\r\n"]
[201.090968, "o", "    Flat iterator object to iterate over Quantities.\r\n"]
[201.103297, "o", "\r\n"]
[201.115626, "o", "    A `QuantityIterator` iterator is returned by ``q.flat`` for any Quantity\r\n"]
[201.127955, "o", "    ``q``.  It allows iterating over the array as if it were a 1-D array,\r\n"]
[201.140284, "o", "    either in a for-loop or by calling its `next` method.\r\n"]
[201.152613, "o", "\r\n"]
[201.164943, "o", "    Iteration is done in C-contiguous style, with the last index varying the\r\n"]
[201.177272, "o", "    fastest. The iterator can also be indexed using basic slicing or\r\n"]
[201.189601, "o", "    advanced indexing.\r\n"]
[201.20193, "o", "\r\n"]
[201.214259, "o", "    See Also\r\n"]
[201.226589, "o", "    --------\r\n"]
[201.238918, "o", "    Quantity.flatten : Returns a flattened copy of an array.\r\n"]
[201.251247, "o", "\r\n"]
[201.263576, "o", "    Notes\r\n"]
[201.275905, "o", "    -----\r\n"]
[201.288234, "o", "    `QuantityIterator` is inspired by `~numpy.ma.core.MaskedIterator`.  It\r\n"]
[201.300564, "o", "    is not exported by the `~astropy.units` module.  Instead of\r\n"]
[201.312893, "o", "    instantiating a `QuantityIterator` directly, use `Quantity.flat`.\r\n"]
[201.325222, "o", "    \"\"\"\r\n"]
[201.337551, "o", "\r\n"]
[201.34988, "o", "    def __init__(self, q):\r\n"]
[201.362209, "o", "        self._quantity = q\r\n"]
[201.374539, "o", "        self._dataiter = q.view(np.ndarray).flat\r\n"]
[201.386868, "o", "\r\n"]
[201.399197, "o", "    def __iter__(self):\r\n"]
[201.411526, "o", "        return self\r\n"]
[201.423855, "o", "\r\n"]
[201.436185, "o", "    def __getitem__(self, indx):\r\n"]
[201.448514, "o", "        out = self._dataiter.__getitem__(indx)\r\n"]
[201.460843, "o", "        # For single elements, ndarray.flat.__getitem__ returns scalars; these\r\n"]
[201.473172, "o", "        # need a new view as a Quantity.\r\n"]
[201.485501, "o", "        if isinstance(out, type(self._quantity)):\r\n"]
[201.49783, "o", "            return out\r\n"]
[201.51016, "o", "        else:\r\n"]
[201.522489, "o", "            return self._quantity._new_view(out)\r\n"]
[201.534818, "o", "\r\n"]
[201.547147, "o", "    def __setitem__(self, index, value):\r\n"]
[201.559476, "o", "        self._dataiter[index] = self._quantity._to_own_unit(value)\r\n"]
[201.571805, "o", "\r\n"]
[201.584135, "o", "    def __next__(self):\r\n"]
[201.596464, "o", "        \"\"\"\r\n"]
[201.608793, "o", "        Return the next value, or raise StopIteration.\r\n"]
[201.621122, "o", "        \"\"\"\r\n"]
[201.633451, "o", "        out = next(self._dataiter)\r\n"]
[201.645781, "o", "        # ndarray.flat._dataiter returns scalars, so need a view as a Quantity.\r\n"]
[201.65811, "o", "        return self._quantity._new_view(out)\r\n"]
[201.670439, "o", "\r\n"]
[201.682768, "o", "    next = __next__\r\n"]
[201.695097, "o", "\r\n"]
[201.707426, "o", "    def __len__(self):\r\n"]
[201.719756, "o", "        return len(self._dataiter)\r\n"]
[201.732085, "o", "\r\n"]
[201.744414, "o", "    # Properties and methods to match `numpy.ndarray.flatiter`\r\n"]
[201.756743, "o", "\r\n"]
[201.769072, "o", "    @property\r\n"]
[201.781401, "o", "    def base(self):\r\n"]
[201.793731, "o", "        \"\"\"A reference to the array that is iterated over.\"\"\"\r\n"]
[201.80606, "o", "        return self._quantity\r\n"]
[201.818389, "o", "\r\n"]
[201.830718, "o", "    @property\r\n"]
[201.843047, "o", "    def coords(self):\r\n"]
[201.855377, "o", "        \"\"\"An N-dimensional tuple of current coordinates.\"\"\"\r\n"]
[201.867706, "o", "        return self._dataiter.coords\r\n"]
[201.880035, "o", "\r\n"]
[201.892364, "o", "    @property\r\n"]
[201.904693, "o", "    def index(self):\r\n"]
[201.917022, "o", "        \"\"\"Current flat index into the array.\"\"\"\r\n"]
[201.929352, "o", "        return self._dataiter.index\r\n"]
[201.941681, "o", "\r\n"]
[201.95401, "o", "    def copy(self):\r\n"]
[201.966339, "o", "        \"\"\"Get a copy of the iterator as a 1-D array.\"\"\"\r\n"]
[201.978668, "o", "        return self._quantity.flatten()\r\n"]
[201.990998, "o", "\r\n"]
[202.003327, "o", "\r\n"]
[202.015656, "o", "class QuantityInfoBase(ParentDtypeInfo):\r\n"]
[202.027985, "o", "    # This is on a base class rather than QuantityInfo directly, so that\r\n"]
[202.040314, "o", "    # it can be used for EarthLocationInfo yet make clear that that class\r\n"]
[202.052643, "o", "    # should not be considered a typical Quantity subclass by Table.\r\n"]
[202.064973, "o", "    attrs_from_parent = {\"dtype\", \"unit\"}  # dtype and unit taken from parent\r\n"]
[202.077302, "o", "    _supports_indexing = True\r\n"]
[202.089631, "o", "\r\n"]
[202.10196, "o", "    @staticmethod\r\n"]
[202.114289, "o", "    def default_format(val):\r\n"]
[202.126618, "o", "        return f\"{val.value}\"\r\n"]
[202.138948, "o", "\r\n"]
[202.151277, "o", "    @staticmethod\r\n"]
[202.163606, "o", "    def possible_string_format_functions(format_):\r\n"]
[202.175935, "o", "        \"\"\"Iterate through possible string-derived format functions.\r\n"]
[202.188264, "o", "\r\n"]
[202.200594, "o", "        A string can either be a format specifier for the format built-in,\r\n"]
[202.212923, "o", "        a new-style format string, or an old-style format string.\r\n"]
[202.225252, "o", "\r\n"]
[202.237581, "o", "        This method is overridden in order to suppress printing the unit\r\n"]
[202.24991, "o", "        in each row since it is already at the top in the column header.\r\n"]
[202.262239, "o", "        \"\"\"\r\n"]
[202.274569, "o", "        yield lambda format_, val: format(val.value, format_)\r\n"]
[202.286898, "o", "        yield lambda format_, val: format_.format(val.value)\r\n"]
[202.299227, "o", "        yield lambda format_, val: format_ % val.value\r\n"]
[202.311556, "o", "\r\n"]
[202.323885, "o", "\r\n"]
[202.336214, "o", "class QuantityInfo(QuantityInfoBase):\r\n"]
[202.348544, "o", "    \"\"\"\r\n"]
[202.360873, "o", "    Container for meta information like name, description, format.  This is\r\n"]
[202.373202, "o", "    required when the object is used as a mixin column within a table, but can\r\n"]
[202.385531, "o", "    be used as a general way to store meta information.\r\n"]
[202.39786, "o", "    \"\"\"\r\n"]
[202.41019, "o", "\r\n"]
[202.422519, "o", "    _represent_as_dict_attrs = (\"value\", \"unit\")\r\n"]
[202.434848, "o", "    _construct_from_dict_args = [\"value\"]\r\n"]
[202.447177, "o", "    _represent_as_dict_primary_data = \"value\"\r\n"]
[202.459506, "o", "\r\n"]
[202.471835, "o", "    def new_like(self, cols, length, metadata_conflicts=\"warn\", name=None):\r\n"]
[202.484165, "o", "        \"\"\"\r\n"]
[202.496494, "o", "        Return a new Quantity instance which is consistent with the\r\n"]
[202.508823, "o", "        input ``cols`` and has ``length`` rows.\r\n"]
[202.521152, "o", "\r\n"]
[202.533481, "o", "        This is intended for creating an empty column object whose elements can\r\n"]
[202.54581, "o", "        be set in-place for table operations like join or vstack.\r\n"]
[202.55814, "o", "\r\n"]
[202.570469, "o", "        Parameters\r\n"]
[202.582798, "o", "        ----------\r\n"]
[202.595127, "o", "        cols : list\r\n"]
[202.607456, "o", "            List of input columns\r\n"]
[202.619786, "o", "        length : int\r\n"]
[202.632115, "o", "            Length of the output column object\r\n"]
[202.644444, "o", "        metadata_conflicts : str ('warn'|'error'|'silent')\r\n"]
[202.656773, "o", "            How to handle metadata conflicts\r\n"]
[202.669102, "o", "        name : str\r\n"]
[202.681431, "o", "            Output column name\r\n"]
[202.693761, "o", "\r\n"]
[202.70609, "o", "        Returns\r\n"]
[202.718419, "o", "        -------\r\n"]
[202.730748, "o", "        col : `~astropy.units.Quantity` (or subclass)\r\n"]
[202.743077, "o", "            Empty instance of this class consistent with ``cols``\r\n"]
[202.755406, "o", "\r\n"]
[202.767736, "o", "        \"\"\"\r\n"]
[202.780065, "o", "        # Get merged info attributes like shape, dtype, format, description, etc.\r\n"]
[202.792394, "o", "        attrs = self.merge_cols_attributes(\r\n"]
[202.804723, "o", "            cols, metadata_conflicts, name, (\"meta\", \"format\", \"description\")\r\n"]
[202.817052, "o", "        )\r\n"]
[202.829382, "o", "\r\n"]
[202.841711, "o", "        # Make an empty quantity using the unit of the last one.\r\n"]
[202.85404, "o", "        shape = (length,) + attrs.pop(\"shape\")\r\n"]
[202.866369, "o", "        dtype = attrs.pop(\"dtype\")\r\n"]
[202.878698, "o", "        # Use zeros so we do not get problems for Quantity subclasses such\r\n"]
[202.891027, "o", "        # as Longitude and Latitude, which cannot take arbitrary values.\r\n"]
[202.903357, "o", "        data = np.zeros(shape=shape, dtype=dtype)\r\n"]
[202.915686, "o", "        # Get arguments needed to reconstruct class\r\n"]
[202.928015, "o", "        map = {\r\n"]
[202.940344, "o", "            key: (data if key == \"value\" else getattr(cols[-1], key))\r\n"]
[202.952673, "o", "            for key in self._represent_as_dict_attrs\r\n"]
[202.965002, "o", "        }\r\n"]
[202.977332, "o", "        map[\"copy\"] = COPY_IF_NEEDED\r\n"]
[202.989661, "o", "        out = self._construct_from_dict(map)\r\n"]
[203.00199, "o", "\r\n"]
[203.014319, "o", "        # Set remaining info attributes\r\n"]
[203.026648, "o", "        for attr, value in attrs.items():\r\n"]
[203.038978, "o", "            setattr(out.info, attr, value)\r\n"]
[203.051307, "o", "\r\n"]
[203.063636, "o", "        return out\r\n"]
[203.075965, "o", "\r\n"]
[203.088294, "o", "    def get_sortable_arrays(self):\r\n"]
[203.100623, "o", "        \"\"\"\r\n"]
[203.112953, "o", "        Return a list of arrays which can be lexically sorted to represent\r\n"]
[203.125282, "o", "        the order of the parent column.\r\n"]
[203.137611, "o", "\r\n"]
[203.14994, "o", "        For Quantity this is just the quantity itself.\r\n"]
[203.162269, "o", "\r\n"]
[203.174599, "o", "\r\n"]
[203.186928, "o", "        Returns\r\n"]
[203.199257, "o", "        -------\r\n"]
[203.211586, "o", "        arrays : list of ndarray\r\n"]
[203.223915, "o", "        \"\"\"\r\n"]
[203.236244, "o", "        return [self._parent]\r\n"]
[203.248574, "o", "\r\n"]
[203.260903, "o", "\r\n"]
[203.273232, "o", "class Quantity(np.ndarray):\r\n"]
[203.285561, "o", "    \"\"\"A `~astropy.units.Quantity` represents a number with some associated unit.\r\n"]
[203.29789, "o", "\r\n"]
[203.310219, "o", "    See also: https://docs.astropy.org/en/stable/units/quantity.html\r\n"]
[203.322549, "o", "\r\n"]
[203.334878, "o", "    Parameters\r\n"]
[203.347207, "o", "    ----------\r\n"]
[203.359536, "o", "    value : number, `~numpy.ndarray`, `~astropy.units.Quantity` (sequence), or str\r\n"]
[203.371865, "o", "        The numerical value of this quantity in the units given by unit.  If a\r\n"]
[203.384195, "o", "        `Quantity` or sequence of them (or any other valid object with a\r\n"]
[203.396524, "o", "        ``unit`` attribute), creates a new `Quantity` object, converting to\r\n"]
[203.408853, "o", "        `unit` units as needed.  If a string, it is converted to a number or\r\n"]
[203.421182, "o", "        `Quantity`, depending on whether a unit is present.\r\n"]
[203.433511, "o", "\r\n"]
[203.44584, "o", "    unit : unit-like\r\n"]
[203.45817, "o", "        An object that represents the unit associated with the input value.\r\n"]
[203.470499, "o", "        Must be an `~astropy.units.UnitBase` object or a string parseable by\r\n"]
[203.482828, "o", "        the :mod:`~astropy.units` package.\r\n"]
[203.495157, "o", "\r\n"]
[203.507486, "o", "    dtype : ~numpy.dtype, optional\r\n"]
[203.519815, "o", "        The dtype of the resulting Numpy array or scalar that will\r\n"]
[203.532145, "o", "        hold the value.  If not provided, it is determined from the input,\r\n"]
[203.544474, "o", "        except that any integer and (non-Quantity) object inputs are converted\r\n"]
[203.556803, "o", "        to float by default.\r\n"]
[203.569132, "o", "        If `None`, the normal `numpy.dtype` introspection is used, e.g.\r\n"]
[203.581461, "o", "        preventing upcasting of integers.\r\n"]
[203.593791, "o", "\r\n"]
[203.60612, "o", "    copy : bool, optional\r\n"]
[203.618449, "o", "        If `True` (default), then the value is copied.  Otherwise, a copy will\r\n"]
[203.630778, "o", "        only be made if ``__array__`` returns a copy, if value is a nested\r\n"]
[203.643107, "o", "        sequence, or if a copy is needed to satisfy an explicitly given\r\n"]
[203.655436, "o", "        ``dtype``.  (The `False` option is intended mostly for internal use,\r\n"]
[203.667766, "o", "        to speed up initialization where a copy is known to have been made.\r\n"]
[203.680095, "o", "        Use with care.)\r\n"]
[203.692424, "o", "\r\n"]
[203.704753, "o", "    order : {'C', 'F', 'A'}, optional\r\n"]
[203.717082, "o", "        Specify the order of the array.  As in `~numpy.array`.  This parameter\r\n"]
[203.729411, "o", "        is ignored if the input is a `Quantity` and ``copy=False``.\r\n"]
[203.741741, "o", "\r\n"]
[203.75407, "o", "    subok : bool, optional\r\n"]
[203.766399, "o", "        If `False` (default), the returned array will be forced to be a\r\n"]
[203.778728, "o", "        `Quantity`.  Otherwise, `Quantity` subclasses will be passed through,\r\n"]
[203.791057, "o", "        or a subclass appropriate for the unit will be used (such as\r\n"]
[203.803387, "o", "        `~astropy.units.Dex` for ``u.dex(u.AA)``).\r\n"]
[203.815716, "o", "\r\n"]
[203.828045, "o", "    ndmin : int, optional\r\n"]
[203.840374, "o", "        Specifies the minimum number of dimensions that the resulting array\r\n"]
[203.852703, "o", "        should have.  Ones will be prepended to the shape as needed to meet\r\n"]
[203.865032, "o", "        this requirement.  This parameter is ignored if the input is a\r\n"]
[203.877362, "o", "        `Quantity` and ``copy=False``.\r\n"]
[203.889691, "o", "\r\n"]
[203.90202, "o", "    Raises\r\n"]
[203.914349, "o", "    ------\r\n"]
[203.926678, "o", "    TypeError\r\n"]
[203.939007, "o", "        If the value provided is not a Python numeric type.\r\n"]
[203.951337, "o", "    TypeError\r\n"]
[203.963666, "o", "        If the unit provided is not either a :class:`~astropy.units.Unit`\r\n"]
[203.975995, "o", "        object or a parseable string unit.\r\n"]
[203.988324, "o", "\r\n"]
[204.000653, "o", "    Notes\r\n"]
[204.012983, "o", "    -----\r\n"]
[204.025312, "o", "    Quantities can also be created by multiplying a number or array with a\r\n"]
[204.037641, "o", "    :class:`~astropy.units.Unit`. See https://docs.astropy.org/en/latest/units/\r\n"]
[204.04997, "o", "\r\n"]
[204.062299, "o", "    Unless the ``dtype`` argument is explicitly specified, integer\r\n"]
[204.074628, "o", "    or (non-Quantity) object inputs are converted to `float` by default.\r\n"]
[204.086958, "o", "    \"\"\"\r\n"]
[204.099287, "o", "\r\n"]
[204.111616, "o", "    # Need to set a class-level default for _equivalencies, or\r\n"]
[204.123945, "o", "    # Constants can not initialize properly\r\n"]
[204.136274, "o", "    _equivalencies = []\r\n"]
[204.148603, "o", "\r\n"]
[204.160933, "o", "    # Default unit for initialization; can be overridden by subclasses,\r\n"]
[204.173262, "o", "    # possibly to `None` to indicate there is no default unit.\r\n"]
[204.185591, "o", "    _default_unit = dimensionless_unscaled\r\n"]
[204.19792, "o", "\r\n"]
[204.210249, "o", "    # Ensures views have an undefined unit.\r\n"]
[204.222579, "o", "    _unit = None\r\n"]
[204.234908, "o", "\r\n"]
[204.247237, "o", "    __array_priority__ = 10000\r\n"]
[204.259566, "o", "\r\n"]
[204.271895, "o", "    def __class_getitem__(cls, unit_shape_dtype):\r\n"]
[204.284224, "o", "        \"\"\"Quantity Type Hints.\r\n"]
[204.296554, "o", "\r\n"]
[204.308883, "o", "        Unit-aware type hints are ``Annotated`` objects that encode the class,\r\n"]
[204.321212, "o", "        the unit, and possibly shape and dtype information, depending on the\r\n"]
[204.333541, "o", "        python and :mod:`numpy` versions.\r\n"]
[204.34587, "o", "\r\n"]
[204.3582, "o", "        Schematically, ``Annotated[cls[shape, dtype], unit]``\r\n"]
[204.370529, "o", "\r\n"]
[204.382858, "o", "        As a classmethod, the type is the class, ie ``Quantity``\r\n"]
[204.395187, "o", "        produces an ``Annotated[Quantity, ...]`` while a subclass\r\n"]
[204.407516, "o", "        like :class:`~astropy.coordinates.Angle` returns\r\n"]
[204.419845, "o", "        ``Annotated[Angle, ...]``.\r\n"]
[204.432175, "o", "\r\n"]
[204.444504, "o", "        Parameters\r\n"]
[204.456833, "o", "        ----------\r\n"]
[204.469162, "o", "        unit_shape_dtype : :class:`~astropy.units.UnitBase`, str, `~astropy.units.PhysicalType`, or tuple\r\n"]
[204.481491, "o", "            Unit specification, can be the physical type (ie str or class).\r\n"]
[204.49382, "o", "            If tuple, then the first element is the unit specification\r\n"]
[204.50615, "o", "            and all other elements are for `numpy.ndarray` type annotations.\r\n"]
[204.518479, "o", "            Whether they are included depends on the python and :mod:`numpy`\r\n"]
[204.530808, "o", "            versions.\r\n"]
[204.543137, "o", "\r\n"]
[204.555466, "o", "        Returns\r\n"]
[204.567796, "o", "        -------\r\n"]
[204.580125, "o", "        `typing.Annotated`, `astropy.units.Unit`, or `astropy.units.PhysicalType`\r\n"]
[204.592454, "o", "            Return type in this preference order:\r\n"]
[204.604783, "o", "            * `typing.Annotated`\r\n"]
[204.617112, "o", "            * `astropy.units.Unit` or `astropy.units.PhysicalType`\r\n"]
[204.629441, "o", "\r\n"]
[204.641771, "o", "        Raises\r\n"]
[204.6541, "o", "        ------\r\n"]
[204.666429, "o", "        TypeError\r\n"]
[204.678758, "o", "            If the unit/physical_type annotation is not Unit-like or\r\n"]
[204.691087, "o", "            PhysicalType-like.\r\n"]
[204.703416, "o", "\r\n"]
[204.715746, "o", "        Examples\r\n"]
[204.728075, "o", "        --------\r\n"]
[204.740404, "o", "        Create a unit-aware Quantity type annotation\r\n"]
[204.752733, "o", "\r\n"]
[204.765062, "o", "            >>> Quantity[Unit(\"s\")]\r\n"]
[204.777392, "o", "            Annotated[Quantity, Unit(\"s\")]\r\n"]
[204.789721, "o", "\r\n"]
[204.80205, "o", "        See Also\r\n"]
[204.814379, "o", "        --------\r\n"]
[204.826708, "o", "        `~astropy.units.quantity_input`\r\n"]
[204.839037, "o", "            Use annotations for unit checks on function arguments and results.\r\n"]
[204.851367, "o", "\r\n"]
[204.863696, "o", "        Notes\r\n"]
[204.876025, "o", "        -----\r\n"]
[204.888354, "o", "        |Quantity| types are also static-type compatible.\r\n"]
[204.900683, "o", "        \"\"\"\r\n"]
[204.913012, "o", "        from typing import Annotated\r\n"]
[204.925342, "o", "\r\n"]
[204.937671, "o", "        # process whether [unit] or [unit, shape, ptype]\r\n"]
[205.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[205.002, "i", "sed -n '400,1200p' astropy/units/quantity.py\r"]
[205.004, "o", "sed -n '400,1200p' astropy/units/quantity.py\r\n"]
[205.016, "o", "\u001b[?2004l\r\n"]
[205.026, "o", "        if isinstance(unit_shape_dtype, tuple):  # unit, shape, dtype\r\n"]
[205.036, "o", "            target = unit_shape_dtype[0]\r\n"]
[205.046, "o", "            shape_dtype = unit_shape_dtype[1:]\r\n"]
[205.056, "o", "        else:  # just unit\r\n"]
[205.066, "o", "            target = unit_shape_dtype\r\n"]
[205.076, "o", "            shape_dtype = ()\r\n"]
[205.086, "o", "\r\n"]
[205.096, "o", "        # Allowed unit/physical types. Errors if neither.\r\n"]
[205.106, "o", "        try:\r\n"]
[205.116, "o", "            unit = Unit(target)\r\n"]
[205.126, "o", "        except (TypeError, ValueError):\r\n"]
[205.136, "o", "            from astropy.units.physical import get_physical_type\r\n"]
[205.146, "o", "\r\n"]
[205.156, "o", "            try:\r\n"]
[205.166, "o", "                unit = get_physical_type(target)\r\n"]
[205.176, "o", "            except (TypeError, ValueError, KeyError):  # KeyError for Enum\r\n"]
[205.186, "o", "                raise TypeError(\r\n"]
[205.196, "o", "                    \"unit annotation is not a Unit or PhysicalType\"\r\n"]
[205.206, "o", "                ) from None\r\n"]
[205.216, "o", "\r\n"]
[205.226, "o", "        # Quantity does not (yet) properly extend the NumPy generics types,\r\n"]
[205.236, "o", "        # introduced in numpy v1.22+, instead just including the unit info as\r\n"]
[205.246, "o", "        # metadata using Annotated.\r\n"]
[205.256, "o", "        # TODO: ensure we do interact with NDArray.__class_getitem__.\r\n"]
[205.266, "o", "        return Annotated[cls, unit]\r\n"]
[205.276, "o", "\r\n"]
[205.286, "o", "    def __new__(\r\n"]
[205.296, "o", "        cls: type[Self],\r\n"]
[205.306, "o", "        value: QuantityLike,\r\n"]
[205.316, "o", "        unit=None,\r\n"]
[205.326, "o", "        dtype=np.inexact,\r\n"]
[205.336, "o", "        copy=True,\r\n"]
[205.346, "o", "        order=None,\r\n"]
[205.356, "o", "        subok=False,\r\n"]
[205.366, "o", "        ndmin=0,\r\n"]
[205.376, "o", "    ) -> Self:\r\n"]
[205.386, "o", "        if unit is not None:\r\n"]
[205.396, "o", "            # convert unit first, to avoid multiple string->unit conversions\r\n"]
[205.406, "o", "            unit = Unit(unit)\r\n"]
[205.416, "o", "\r\n"]
[205.426, "o", "        # inexact -> upcast to float dtype\r\n"]
[205.436, "o", "        float_default = dtype is np.inexact\r\n"]
[205.446, "o", "        if float_default:\r\n"]
[205.456, "o", "            dtype = None\r\n"]
[205.466, "o", "\r\n"]
[205.476, "o", "        # optimize speed for Quantity with no dtype given, copy=COPY_IF_NEEDED\r\n"]
[205.486, "o", "        if isinstance(value, Quantity):\r\n"]
[205.496, "o", "            if unit is not None and unit is not value.unit:\r\n"]
[205.506, "o", "                value = value.to(unit)\r\n"]
[205.516, "o", "                # the above already makes a copy (with float dtype)\r\n"]
[205.526, "o", "                copy = COPY_IF_NEEDED\r\n"]
[205.536, "o", "\r\n"]
[205.546, "o", "            if type(value) is not cls and not (subok and isinstance(value, cls)):\r\n"]
[205.556, "o", "                value = value.view(cls)\r\n"]
[205.566, "o", "\r\n"]
[205.576, "o", "            if float_default and value.dtype.kind in \"iu\":\r\n"]
[205.586, "o", "                dtype = float\r\n"]
[205.596, "o", "\r\n"]
[205.606, "o", "            return np.array(\r\n"]
[205.616, "o", "                value, dtype=dtype, copy=copy, order=order, subok=True, ndmin=ndmin\r\n"]
[205.626, "o", "            )\r\n"]
[205.636, "o", "\r\n"]
[205.646, "o", "        # Maybe str, or list/tuple of Quantity? If so, this may set value_unit.\r\n"]
[205.656, "o", "        # To ensure array remains fast, we short-circuit it.\r\n"]
[205.666, "o", "        value_unit = None\r\n"]
[205.676, "o", "        if not isinstance(value, np.ndarray):\r\n"]
[205.686, "o", "            if isinstance(value, str):\r\n"]
[205.696, "o", "                # The first part of the regex string matches any integer/float;\r\n"]
[205.706, "o", "                # the second parts adds possible trailing .+-, which will break\r\n"]
[205.716, "o", "                # the float function below and ensure things like 1.2.3deg\r\n"]
[205.726, "o", "                # will not work.\r\n"]
[205.736, "o", "                pattern = (\r\n"]
[205.746, "o", "                    r\"\\s*[+-]?\"\r\n"]
[205.756, "o", "                    r\"((\\d+\\.?\\d*)|(\\.\\d+)|([nN][aA][nN])|\"\r\n"]
[205.766, "o", "                    r\"([iI][nN][fF]([iI][nN][iI][tT][yY]){0,1}))\"\r\n"]
[205.776, "o", "                    r\"([eE][+-]?\\d+)?\"\r\n"]
[205.786, "o", "                    r\"[.+-]?\"\r\n"]
[205.796, "o", "                )\r\n"]
[205.806, "o", "\r\n"]
[205.816, "o", "                v = re.match(pattern, value)\r\n"]
[205.826, "o", "                unit_string = None\r\n"]
[205.836, "o", "                try:\r\n"]
[205.846, "o", "                    value = float(v.group())\r\n"]
[205.856, "o", "\r\n"]
[205.866, "o", "                except Exception:\r\n"]
[205.876, "o", "                    raise TypeError(\r\n"]
[205.886, "o", "                        f'Cannot parse \"{value}\" as a {cls.__name__}. It does not '\r\n"]
[205.896, "o", "                        \"start with a number.\"\r\n"]
[205.906, "o", "                    )\r\n"]
[205.916, "o", "\r\n"]
[205.926, "o", "                unit_string = v.string[v.end() :].strip()\r\n"]
[205.936, "o", "                if unit_string:\r\n"]
[205.946, "o", "                    value_unit = Unit(unit_string)\r\n"]
[205.956, "o", "                    if unit is None:\r\n"]
[205.966, "o", "                        unit = value_unit  # signal no conversion needed below.\r\n"]
[205.976, "o", "\r\n"]
[205.986, "o", "            elif isinstance(value, (list, tuple)) and len(value) > 0:\r\n"]
[205.996, "o", "                if all(isinstance(v, Quantity) for v in value):\r\n"]
[206.006, "o", "                    # If a list/tuple contains only quantities, stack them,\r\n"]
[206.016, "o", "                    # which also converts them to the same unit.\r\n"]
[206.026, "o", "                    value = np.stack(value)\r\n"]
[206.036, "o", "                    copy = False\r\n"]
[206.046, "o", "\r\n"]
[206.056, "o", "                elif (\r\n"]
[206.066, "o", "                    dtype is None\r\n"]
[206.076, "o", "                    and not hasattr(value, \"dtype\")\r\n"]
[206.086, "o", "                    and isinstance(unit, StructuredUnit)\r\n"]
[206.096, "o", "                ):\r\n"]
[206.106, "o", "                    # Special case for list/tuple of values and a structured unit:\r\n"]
[206.116, "o", "                    # ``np.array(value, dtype=None)`` would treat tuples as lower\r\n"]
[206.126, "o", "                    # levels of the array, rather than as elements of a structured\r\n"]
[206.136, "o", "                    # array, so we use the structure of the unit to help infer the\r\n"]
[206.146, "o", "                    # structured dtype of the value.\r\n"]
[206.156, "o", "                    dtype = unit._recursively_get_dtype(value)\r\n"]
[206.166, "o", "\r\n"]
[206.176, "o", "        using_default_unit = False\r\n"]
[206.186, "o", "        if value_unit is None:\r\n"]
[206.196, "o", "            # If the value has a `unit` attribute and if not None\r\n"]
[206.206, "o", "            # (for Columns with uninitialized unit), treat it like a quantity.\r\n"]
[206.216, "o", "            value_unit = getattr(value, \"unit\", None)\r\n"]
[206.226, "o", "            if value_unit is None:\r\n"]
[206.236, "o", "                # Default to dimensionless for no (initialized) unit attribute.\r\n"]
[206.246, "o", "                if unit is None:\r\n"]
[206.256, "o", "                    using_default_unit = True\r\n"]
[206.266, "o", "                    unit = cls._default_unit\r\n"]
[206.276, "o", "                value_unit = unit  # signal below that no conversion is needed\r\n"]
[206.286, "o", "            else:\r\n"]
[206.296, "o", "                try:\r\n"]
[206.306, "o", "                    value_unit = Unit(value_unit)\r\n"]
[206.316, "o", "                except Exception as exc:\r\n"]
[206.326, "o", "                    raise TypeError(\r\n"]
[206.336, "o", "                        f\"The unit attribute {value.unit!r} of the input could \"\r\n"]
[206.346, "o", "                        \"not be parsed as an astropy Unit.\"\r\n"]
[206.356, "o", "                    ) from exc\r\n"]
[206.366, "o", "\r\n"]
[206.376, "o", "                if unit is None:\r\n"]
[206.386, "o", "                    unit = value_unit\r\n"]
[206.396, "o", "                elif unit is not value_unit:\r\n"]
[206.406, "o", "                    copy = COPY_IF_NEEDED  # copy will be made in conversion at end\r\n"]
[206.416, "o", "\r\n"]
[206.426, "o", "        value = np.array(\r\n"]
[206.436, "o", "            value, dtype=dtype, copy=copy, order=order, subok=True, ndmin=ndmin\r\n"]
[206.446, "o", "        )\r\n"]
[206.456, "o", "\r\n"]
[206.466, "o", "        # For no-user-input unit, make sure the constructed unit matches the\r\n"]
[206.476, "o", "        # structure of the data.\r\n"]
[206.486, "o", "        if using_default_unit and value.dtype.names is not None:\r\n"]
[206.496, "o", "            unit = value_unit = _structured_unit_like_dtype(value_unit, value.dtype)\r\n"]
[206.506, "o", "\r\n"]
[206.516, "o", "        # check that array contains numbers or long int objects\r\n"]
[206.526, "o", "        if value.dtype.kind in \"OSU\" and not (\r\n"]
[206.536, "o", "            value.dtype.kind == \"O\" and isinstance(value.item(0), numbers.Number)\r\n"]
[206.546, "o", "        ):\r\n"]
[206.556, "o", "            raise TypeError(\"The value must be a valid Python or Numpy numeric type.\")\r\n"]
[206.566, "o", "\r\n"]
[206.576, "o", "        # by default, cast any integer, boolean, etc., to float\r\n"]
[206.586, "o", "        if float_default and value.dtype.kind in \"iuO\":\r\n"]
[206.596, "o", "            value = value.astype(float)\r\n"]
[206.606, "o", "\r\n"]
[206.616, "o", "        # if we allow subclasses, allow a class from the unit.\r\n"]
[206.626, "o", "        if subok:\r\n"]
[206.636, "o", "            qcls = getattr(unit, \"_quantity_class\", cls)\r\n"]
[206.646, "o", "            if issubclass(qcls, cls):\r\n"]
[206.656, "o", "                cls = qcls\r\n"]
[206.666, "o", "\r\n"]
[206.676, "o", "        value = value.view(cls)\r\n"]
[206.686, "o", "        value._set_unit(value_unit)\r\n"]
[206.696, "o", "        if unit is value_unit:\r\n"]
[206.706, "o", "            return value\r\n"]
[206.716, "o", "        else:\r\n"]
[206.726, "o", "            # here we had non-Quantity input that had a \"unit\" attribute\r\n"]
[206.736, "o", "            # with a unit different from the desired one.  So, convert.\r\n"]
[206.746, "o", "            return value.to(unit)\r\n"]
[206.756, "o", "\r\n"]
[206.766, "o", "    def __array_finalize__(self, obj):\r\n"]
[206.776, "o", "        # Check whether super().__array_finalize should be called\r\n"]
[206.786, "o", "        # (sadly, ndarray.__array_finalize__ is None; we cannot be sure\r\n"]
[206.796, "o", "        # what is above us).\r\n"]
[206.806, "o", "        super_array_finalize = super().__array_finalize__\r\n"]
[206.816, "o", "        if super_array_finalize is not None:\r\n"]
[206.826, "o", "            super_array_finalize(obj)\r\n"]
[206.836, "o", "\r\n"]
[206.846, "o", "        # If we're a new object or viewing an ndarray, nothing has to be done.\r\n"]
[206.856, "o", "        if obj is None or obj.__class__ is np.ndarray:\r\n"]
[206.866, "o", "            return\r\n"]
[206.876, "o", "\r\n"]
[206.886, "o", "        # Copy over the unit and possibly info.  Note that the only way the\r\n"]
[206.896, "o", "        # unit can already be set is if one enters via _new_view(), where the\r\n"]
[206.906, "o", "        # unit is often different from that of self, and where propagation of\r\n"]
[206.916, "o", "        # info is not always desirable.\r\n"]
[206.926, "o", "        if self._unit is None:\r\n"]
[206.936, "o", "            unit = getattr(obj, \"_unit\", None)\r\n"]
[206.946, "o", "            if unit is not None:\r\n"]
[206.956, "o", "                self._set_unit(unit)\r\n"]
[206.966, "o", "\r\n"]
[206.976, "o", "            # Copy info if the original had `info` defined.  Because of the way the\r\n"]
[206.986, "o", "            # DataInfo works, `'info' in obj.__dict__` is False until the\r\n"]
[206.996, "o", "            # `info` attribute is accessed or set.\r\n"]
[207.006, "o", "            if \"info\" in obj.__dict__:\r\n"]
[207.016, "o", "                self.info = obj.info\r\n"]
[207.026, "o", "\r\n"]
[207.036, "o", "    def __array_wrap__(self, obj, context=None, return_scalar=False):\r\n"]
[207.046, "o", "        if context is None:\r\n"]
[207.056, "o", "            # Methods like .squeeze() created a new `ndarray` and then call\r\n"]
[207.066, "o", "            # __array_wrap__ to turn the array into self's subclass.\r\n"]
[207.076, "o", "            return self._new_view(obj)\r\n"]
[207.086, "o", "\r\n"]
[207.096, "o", "        raise NotImplementedError(\r\n"]
[207.106, "o", "            \"__array_wrap__ should not be used with a context any more since all \"\r\n"]
[207.116, "o", "            \"use should go through array_function. Please raise an issue on \"\r\n"]
[207.126, "o", "            \"https://github.com/astropy/astropy\"\r\n"]
[207.136, "o", "        )\r\n"]
[207.146, "o", "\r\n"]
[207.156, "o", "    def __array_ufunc__(self, function, method, *inputs, **kwargs):\r\n"]
[207.166, "o", "        \"\"\"Wrap numpy ufuncs, taking care of units.\r\n"]
[207.176, "o", "\r\n"]
[207.186, "o", "        Parameters\r\n"]
[207.196, "o", "        ----------\r\n"]
[207.206, "o", "        function : callable\r\n"]
[207.216, "o", "            ufunc to wrap.\r\n"]
[207.226, "o", "        method : str\r\n"]
[207.236, "o", "            Ufunc method: ``__call__``, ``at``, ``reduce``, etc.\r\n"]
[207.246, "o", "        inputs : tuple\r\n"]
[207.256, "o", "            Input arrays.\r\n"]
[207.266, "o", "        kwargs : keyword arguments\r\n"]
[207.276, "o", "            As passed on, with ``out`` containing possible quantity output.\r\n"]
[207.286, "o", "\r\n"]
[207.296, "o", "        Returns\r\n"]
[207.306, "o", "        -------\r\n"]
[207.316, "o", "        result : `~astropy.units.Quantity` or `NotImplemented`\r\n"]
[207.326, "o", "            Results of the ufunc, with the unit set properly.\r\n"]
[207.336, "o", "        \"\"\"\r\n"]
[207.346, "o", "        # Determine required conversion functions -- to bring the unit of the\r\n"]
[207.356, "o", "        # input to that expected (e.g., radian for np.sin), or to get\r\n"]
[207.366, "o", "        # consistent units between two inputs (e.g., in np.add) --\r\n"]
[207.376, "o", "        # and the unit of the result (or tuple of units for nout > 1).\r\n"]
[207.386, "o", "        try:\r\n"]
[207.396, "o", "            converters, unit = converters_and_unit(function, method, *inputs)\r\n"]
[207.406, "o", "\r\n"]
[207.416, "o", "            out = kwargs.get(\"out\", None)\r\n"]
[207.426, "o", "            # Avoid loop back by turning any Quantity output into array views.\r\n"]
[207.436, "o", "            if out is not None:\r\n"]
[207.446, "o", "                # If pre-allocated output is used, check it is suitable.\r\n"]
[207.456, "o", "                # This also returns array view, to ensure we don't loop back.\r\n"]
[207.466, "o", "                if function.nout == 1:\r\n"]
[207.476, "o", "                    out = out[0]\r\n"]
[207.486, "o", "                out_array = check_output(out, unit, inputs, function=function)\r\n"]
[207.496, "o", "                # Ensure output argument remains a tuple.\r\n"]
[207.506, "o", "                kwargs[\"out\"] = (out_array,) if function.nout == 1 else out_array\r\n"]
[207.516, "o", "\r\n"]
[207.526, "o", "            if method == \"reduce\" and \"initial\" in kwargs and unit is not None:\r\n"]
[207.536, "o", "                # Special-case for initial argument for reductions like\r\n"]
[207.546, "o", "                # np.add.reduce.  This should be converted to the output unit as\r\n"]
[207.556, "o", "                # well, which is typically the same as the input unit (but can\r\n"]
[207.566, "o", "                # in principle be different: unitless for np.equal, radian\r\n"]
[207.576, "o", "                # for np.arctan2, though those are not necessarily useful!)\r\n"]
[207.586, "o", "                kwargs[\"initial\"] = self._to_own_unit(\r\n"]
[207.596, "o", "                    kwargs[\"initial\"], check_precision=False, unit=unit\r\n"]
[207.606, "o", "                )\r\n"]
[207.616, "o", "\r\n"]
[207.626, "o", "            # Same for inputs, but here also convert if necessary.\r\n"]
[207.636, "o", "            arrays = []\r\n"]
[207.646, "o", "            for input_, converter in zip(inputs, converters):\r\n"]
[207.656, "o", "                input_ = getattr(input_, \"value\", input_)\r\n"]
[207.666, "o", "                arrays.append(converter(input_) if converter else input_)\r\n"]
[207.676, "o", "\r\n"]
[207.686, "o", "            # Call our superclass's __array_ufunc__\r\n"]
[207.696, "o", "            result = super().__array_ufunc__(function, method, *arrays, **kwargs)\r\n"]
[207.706, "o", "            # If unit is None, a plain array is expected (e.g., comparisons), which\r\n"]
[207.716, "o", "            # means we're done.\r\n"]
[207.726, "o", "            # We're also done if the result was None (for method 'at') or\r\n"]
[207.736, "o", "            # NotImplemented, which can happen if other inputs/outputs override\r\n"]
[207.746, "o", "            # __array_ufunc__; hopefully, they can then deal with us.\r\n"]
[207.756, "o", "            if unit is None or result is None or result is NotImplemented:\r\n"]
[207.766, "o", "                return result\r\n"]
[207.776, "o", "\r\n"]
[207.786, "o", "            return self._result_as_quantity(result, unit, out)\r\n"]
[207.796, "o", "\r\n"]
[207.806, "o", "        except (TypeError, ValueError, AttributeError) as e:\r\n"]
[207.816, "o", "            out_normalized = kwargs.get(\"out\", ())\r\n"]
[207.826, "o", "            inputs_and_outputs = inputs + out_normalized\r\n"]
[207.836, "o", "            ignored_ufunc = (\r\n"]
[207.846, "o", "                None,\r\n"]
[207.856, "o", "                np.ndarray.__array_ufunc__,\r\n"]
[207.866, "o", "                type(self).__array_ufunc__,\r\n"]
[207.876, "o", "            )\r\n"]
[207.886, "o", "            if not all(\r\n"]
[207.896, "o", "                getattr(type(io), \"__array_ufunc__\", None) in ignored_ufunc\r\n"]
[207.906, "o", "                for io in inputs_and_outputs\r\n"]
[207.916, "o", "            ):\r\n"]
[207.926, "o", "                return NotImplemented\r\n"]
[207.936, "o", "            else:\r\n"]
[207.946, "o", "                raise e\r\n"]
[207.956, "o", "\r\n"]
[207.966, "o", "    def _result_as_quantity(self, result, unit, out):\r\n"]
[207.976, "o", "        \"\"\"Turn result into a quantity with the given unit.\r\n"]
[207.986, "o", "\r\n"]
[207.996, "o", "        If no output is given, it will take a view of the array as a quantity,\r\n"]
[208.006, "o", "        and set the unit.  If output is given, those should be quantity views\r\n"]
[208.016, "o", "        of the result arrays, and the function will just set the unit.\r\n"]
[208.026, "o", "\r\n"]
[208.036, "o", "        Parameters\r\n"]
[208.046, "o", "        ----------\r\n"]
[208.056, "o", "        result : ndarray or tuple thereof\r\n"]
[208.066, "o", "            Array(s) which need to be turned into quantity.\r\n"]
[208.076, "o", "        unit : `~astropy.units.Unit`\r\n"]
[208.086, "o", "            Unit for the quantities to be returned (or `None` if the result\r\n"]
[208.096, "o", "            should not be a quantity).  Should be tuple if result is a tuple.\r\n"]
[208.106, "o", "        out : `~astropy.units.Quantity` or None\r\n"]
[208.116, "o", "            Possible output quantity. Should be `None` or a tuple if result\r\n"]
[208.126, "o", "            is a tuple.\r\n"]
[208.136, "o", "\r\n"]
[208.146, "o", "        Returns\r\n"]
[208.156, "o", "        -------\r\n"]
[208.166, "o", "        out : `~astropy.units.Quantity`\r\n"]
[208.176, "o", "           With units set.\r\n"]
[208.186, "o", "        \"\"\"\r\n"]
[208.196, "o", "        if isinstance(result, (tuple, list)):\r\n"]
[208.206, "o", "            if out is None:\r\n"]
[208.216, "o", "                out = (None,) * len(result)\r\n"]
[208.226, "o", "            # Some np.linalg functions return namedtuple, which is handy to access\r\n"]
[208.236, "o", "            # elements by name, but cannot be directly initialized with an iterator.\r\n"]
[208.246, "o", "            result_cls = getattr(result, \"_make\", result.__class__)\r\n"]
[208.256, "o", "            return result_cls(\r\n"]
[208.266, "o", "                self._result_as_quantity(result_, unit_, out_)\r\n"]
[208.276, "o", "                for (result_, unit_, out_) in zip(result, unit, out)\r\n"]
[208.286, "o", "            )\r\n"]
[208.296, "o", "\r\n"]
[208.306, "o", "        if out is None:\r\n"]
[208.316, "o", "            # View the result array as a Quantity with the proper unit.\r\n"]
[208.326, "o", "            return (\r\n"]
[208.336, "o", "                result\r\n"]
[208.346, "o", "                if unit is None\r\n"]
[208.356, "o", "                else self._new_view(result, unit, propagate_info=False)\r\n"]
[208.366, "o", "            )\r\n"]
[208.376, "o", "\r\n"]
[208.386, "o", "        elif isinstance(out, Quantity):\r\n"]
[208.396, "o", "            # For given Quantity output, just set the unit. We know the unit\r\n"]
[208.406, "o", "            # is not None and the output is of the correct Quantity subclass,\r\n"]
[208.416, "o", "            # as it was passed through check_output.\r\n"]
[208.426, "o", "            # (We cannot do this unconditionally, though, since it is possible\r\n"]
[208.436, "o", "            # for out to be ndarray and the unit to be dimensionless.)\r\n"]
[208.446, "o", "            out._set_unit(unit)\r\n"]
[208.456, "o", "\r\n"]
[208.466, "o", "        return out\r\n"]
[208.476, "o", "\r\n"]
[208.486, "o", "    def __quantity_subclass__(self, unit):\r\n"]
[208.496, "o", "        \"\"\"\r\n"]
[208.506, "o", "        Overridden by subclasses to change what kind of view is\r\n"]
[208.516, "o", "        created based on the output unit of an operation.\r\n"]
[208.526, "o", "\r\n"]
[208.536, "o", "        Parameters\r\n"]
[208.546, "o", "        ----------\r\n"]
[208.556, "o", "        unit : UnitBase\r\n"]
[208.566, "o", "            The unit for which the appropriate class should be returned\r\n"]
[208.576, "o", "\r\n"]
[208.586, "o", "        Returns\r\n"]
[208.596, "o", "        -------\r\n"]
[208.606, "o", "        tuple :\r\n"]
[208.616, "o", "            - `~astropy.units.Quantity` subclass\r\n"]
[208.626, "o", "            - bool: True if subclasses of the given class are ok\r\n"]
[208.636, "o", "        \"\"\"\r\n"]
[208.646, "o", "        return Quantity, True\r\n"]
[208.656, "o", "\r\n"]
[208.666, "o", "    def _new_view(self, obj=None, unit=None, propagate_info=True):\r\n"]
[208.676, "o", "        \"\"\"Create a Quantity view of some array-like input, and set the unit.\r\n"]
[208.686, "o", "\r\n"]
[208.696, "o", "        By default, return a view of ``obj`` of the same class as ``self`` and\r\n"]
[208.706, "o", "        with the same unit.  Subclasses can override the type of class for a\r\n"]
[208.716, "o", "        given unit using ``__quantity_subclass__``, and can ensure properties\r\n"]
[208.726, "o", "        other than the unit are copied using ``__array_finalize__``.\r\n"]
[208.736, "o", "\r\n"]
[208.746, "o", "        If the given unit defines a ``_quantity_class`` of which ``self``\r\n"]
[208.756, "o", "        is not an instance, a view using this class is taken.\r\n"]
[208.766, "o", "\r\n"]
[208.776, "o", "        Parameters\r\n"]
[208.786, "o", "        ----------\r\n"]
[208.796, "o", "        obj : ndarray or scalar, optional\r\n"]
[208.806, "o", "            The array to create a view of.  If obj is a numpy or python scalar,\r\n"]
[208.816, "o", "            it will be converted to an array scalar.  By default, ``self``\r\n"]
[208.826, "o", "            is converted.\r\n"]
[208.836, "o", "\r\n"]
[208.846, "o", "        unit : unit-like, optional\r\n"]
[208.856, "o", "            The unit of the resulting object.  It is used to select a\r\n"]
[208.866, "o", "            subclass, and explicitly assigned to the view if given.\r\n"]
[208.876, "o", "            If not given, the subclass and unit will be that of ``self``.\r\n"]
[208.886, "o", "\r\n"]
[208.896, "o", "        propagate_info : bool, optional\r\n"]
[208.906, "o", "            Whether to transfer ``info`` if present.  Default: `True`, as\r\n"]
[208.916, "o", "            appropriate for, e.g., unit conversions or slicing, where the\r\n"]
[208.926, "o", "            nature of the object does not change.\r\n"]
[208.936, "o", "\r\n"]
[208.946, "o", "        Returns\r\n"]
[208.956, "o", "        -------\r\n"]
[208.966, "o", "        view : `~astropy.units.Quantity` subclass\r\n"]
[208.976, "o", "\r\n"]
[208.986, "o", "        \"\"\"\r\n"]
[208.996, "o", "        # Determine the unit and quantity subclass that we need for the view.\r\n"]
[209.006, "o", "        if unit is None:\r\n"]
[209.016, "o", "            unit = self.unit\r\n"]
[209.026, "o", "            quantity_subclass = self.__class__\r\n"]
[209.036, "o", "        elif unit is self.unit and self.__class__ is Quantity:\r\n"]
[209.046, "o", "            # The second part is because we should not presume what other\r\n"]
[209.056, "o", "            # classes want to do for the same unit.  E.g., Constant will\r\n"]
[209.066, "o", "            # always want to fall back to Quantity, and relies on going\r\n"]
[209.076, "o", "            # through `__quantity_subclass__`.\r\n"]
[209.086, "o", "            quantity_subclass = Quantity\r\n"]
[209.096, "o", "        else:\r\n"]
[209.106, "o", "            unit = Unit(unit)\r\n"]
[209.116, "o", "            quantity_subclass = getattr(unit, \"_quantity_class\", Quantity)\r\n"]
[209.126, "o", "            if isinstance(self, quantity_subclass):\r\n"]
[209.136, "o", "                quantity_subclass, subok = self.__quantity_subclass__(unit)\r\n"]
[209.146, "o", "                if subok:\r\n"]
[209.156, "o", "                    quantity_subclass = self.__class__\r\n"]
[209.166, "o", "\r\n"]
[209.176, "o", "        # We only want to propagate information from ``self`` to our new view,\r\n"]
[209.186, "o", "        # so obj should be a regular array.  By using ``np.array``, we also\r\n"]
[209.196, "o", "        # convert python and numpy scalars, which cannot be viewed as arrays\r\n"]
[209.206, "o", "        # and thus not as Quantity either, to zero-dimensional arrays.\r\n"]
[209.216, "o", "        # (These are turned back into scalar in `.value`)\r\n"]
[209.226, "o", "        # Note that for an ndarray input, the np.array call takes only double\r\n"]
[209.236, "o", "        # ``obj.__class is np.ndarray``. So, not worth special-casing.\r\n"]
[209.246, "o", "        if obj is None:\r\n"]
[209.256, "o", "            obj = self.view(np.ndarray)\r\n"]
[209.266, "o", "        else:\r\n"]
[209.276, "o", "            obj = np.array(obj, copy=COPY_IF_NEEDED, subok=True)\r\n"]
[209.286, "o", "\r\n"]
[209.296, "o", "        # Take the view, set the unit, and update possible other properties\r\n"]
[209.306, "o", "        # such as ``info``, ``wrap_angle`` in `Longitude`, etc.\r\n"]
[209.316, "o", "        view = obj.view(quantity_subclass)\r\n"]
[209.326, "o", "        view._set_unit(unit)\r\n"]
[209.336, "o", "        view.__array_finalize__(self)\r\n"]
[209.346, "o", "        if propagate_info and \"info\" in self.__dict__:\r\n"]
[209.356, "o", "            view.info = self.info\r\n"]
[209.366, "o", "        return view\r\n"]
[209.376, "o", "\r\n"]
[209.386, "o", "    def _set_unit(self, unit):\r\n"]
[209.396, "o", "        \"\"\"Set the unit.\r\n"]
[209.406, "o", "\r\n"]
[209.416, "o", "        This is used anywhere the unit is set or modified, i.e., in the\r\n"]
[209.426, "o", "        initializer, in ``__imul__`` and ``__itruediv__`` for in-place\r\n"]
[209.436, "o", "        multiplication and division by another unit, as well as in\r\n"]
[209.446, "o", "        ``__array_finalize__`` for wrapping up views.  For Quantity, it just\r\n"]
[209.456, "o", "        sets the unit, but subclasses can override it to check that, e.g.,\r\n"]
[209.466, "o", "        a unit is consistent.\r\n"]
[209.476, "o", "        \"\"\"\r\n"]
[209.486, "o", "        if not isinstance(unit, UnitBase):\r\n"]
[209.496, "o", "            if isinstance(self._unit, StructuredUnit) or isinstance(\r\n"]
[209.506, "o", "                unit, StructuredUnit\r\n"]
[209.516, "o", "            ):\r\n"]
[209.526, "o", "                unit = StructuredUnit(unit, self.dtype)\r\n"]
[209.536, "o", "            else:\r\n"]
[209.546, "o", "                # Trying to go through a string ensures that, e.g., Magnitudes with\r\n"]
[209.556, "o", "                # dimensionless physical unit become Quantity with units of mag.\r\n"]
[209.566, "o", "                unit = Unit(str(unit), parse_strict=\"silent\")\r\n"]
[209.576, "o", "                if not isinstance(unit, (UnitBase, StructuredUnit)):\r\n"]
[209.586, "o", "                    raise UnitTypeError(\r\n"]
[209.596, "o", "                        f\"{self.__class__.__name__} instances require normal units, \"\r\n"]
[209.606, "o", "                        f\"not {unit.__class__} instances.\"\r\n"]
[209.616, "o", "                    )\r\n"]
[209.626, "o", "\r\n"]
[209.636, "o", "        self._unit = unit\r\n"]
[209.646, "o", "\r\n"]
[209.656, "o", "    def __deepcopy__(self, memo):\r\n"]
[209.666, "o", "        # If we don't define this, ``copy.deepcopy(quantity)`` will\r\n"]
[209.676, "o", "        # return a bare Numpy array.\r\n"]
[209.686, "o", "        return self.copy()\r\n"]
[209.696, "o", "\r\n"]
[209.706, "o", "    def __reduce__(self):\r\n"]
[209.716, "o", "        # patch to pickle Quantity objects (ndarray subclasses), see\r\n"]
[209.726, "o", "        # http://www.mail-archive.com/numpy-discussion@scipy.org/msg02446.html\r\n"]
[209.736, "o", "\r\n"]
[209.746, "o", "        object_state = list(super().__reduce__())\r\n"]
[209.756, "o", "        object_state[2] = (object_state[2], self.__dict__)\r\n"]
[209.766, "o", "        return tuple(object_state)\r\n"]
[209.776, "o", "\r\n"]
[209.786, "o", "    def __setstate__(self, state):\r\n"]
[209.796, "o", "        # patch to unpickle Quantity objects (ndarray subclasses), see\r\n"]
[209.806, "o", "        # http://www.mail-archive.com/numpy-discussion@scipy.org/msg02446.html\r\n"]
[209.816, "o", "\r\n"]
[209.826, "o", "        nd_state, own_state = state\r\n"]
[209.836, "o", "        super().__setstate__(nd_state)\r\n"]
[209.846, "o", "        self.__dict__.update(own_state)\r\n"]
[209.856, "o", "\r\n"]
[209.866, "o", "    info = QuantityInfo()\r\n"]
[209.876, "o", "\r\n"]
[209.886, "o", "    def _to_value(self, unit, equivalencies=[]):\r\n"]
[209.896, "o", "        \"\"\"Helper method for to and to_value.\"\"\"\r\n"]
[209.906, "o", "        if equivalencies == []:\r\n"]
[209.916, "o", "            equivalencies = self._equivalencies\r\n"]
[209.926, "o", "        if not self.dtype.names or isinstance(self.unit, StructuredUnit):\r\n"]
[209.936, "o", "            # Standard path, let unit to do work.\r\n"]
[210.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[210.002, "i", "sed -n '1200,2000p' astropy/units/quantity.py\r"]
[210.004, "o", "sed -n '1200,2000p' astropy/units/quantity.py\r\n"]
[210.016, "o", "\u001b[?2004l\r\n"]
[210.026, "o", "    # behaviour, but instead of emitting a warning here, let it be done by\r\n"]
[210.036, "o", "    # other (which likely is a unit if this was a mistake).\r\n"]
[210.046, "o", "    def __rshift__(self, other):\r\n"]
[210.056, "o", "        return NotImplemented\r\n"]
[210.066, "o", "\r\n"]
[210.076, "o", "    def __irshift__(self, other):\r\n"]
[210.086, "o", "        return NotImplemented\r\n"]
[210.096, "o", "\r\n"]
[210.106, "o", "    # Arithmetic operations\r\n"]
[210.116, "o", "    def __mul__(self, other):\r\n"]
[210.126, "o", "        \"\"\"Multiplication between `Quantity` objects and other objects.\"\"\"\r\n"]
[210.136, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[210.146, "o", "            try:\r\n"]
[210.156, "o", "                return self._new_view(\r\n"]
[210.166, "o", "                    self.value.copy(), other * self.unit, propagate_info=False\r\n"]
[210.176, "o", "                )\r\n"]
[210.186, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[210.196, "o", "                return NotImplemented\r\n"]
[210.206, "o", "\r\n"]
[210.216, "o", "        return super().__mul__(other)\r\n"]
[210.226, "o", "\r\n"]
[210.236, "o", "    def __imul__(self, other):\r\n"]
[210.246, "o", "        \"\"\"In-place multiplication between `Quantity` objects and others.\"\"\"\r\n"]
[210.256, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[210.266, "o", "            self._set_unit(other * self.unit)\r\n"]
[210.276, "o", "            return self\r\n"]
[210.286, "o", "\r\n"]
[210.296, "o", "        return super().__imul__(other)\r\n"]
[210.306, "o", "\r\n"]
[210.316, "o", "    def __rmul__(self, other):\r\n"]
[210.326, "o", "        \"\"\"\r\n"]
[210.336, "o", "        Right Multiplication between `Quantity` objects and other objects.\r\n"]
[210.346, "o", "        \"\"\"\r\n"]
[210.356, "o", "        return self.__mul__(other)\r\n"]
[210.366, "o", "\r\n"]
[210.376, "o", "    def __truediv__(self, other):\r\n"]
[210.386, "o", "        \"\"\"Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[210.396, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[210.406, "o", "            try:\r\n"]
[210.416, "o", "                return self._new_view(\r\n"]
[210.426, "o", "                    self.value.copy(), self.unit / other, propagate_info=False\r\n"]
[210.436, "o", "                )\r\n"]
[210.446, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[210.456, "o", "                return NotImplemented\r\n"]
[210.466, "o", "\r\n"]
[210.476, "o", "        return super().__truediv__(other)\r\n"]
[210.486, "o", "\r\n"]
[210.496, "o", "    def __itruediv__(self, other):\r\n"]
[210.506, "o", "        \"\"\"Inplace division between `Quantity` objects and other objects.\"\"\"\r\n"]
[210.516, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[210.526, "o", "            self._set_unit(self.unit / other)\r\n"]
[210.536, "o", "            return self\r\n"]
[210.546, "o", "\r\n"]
[210.556, "o", "        return super().__itruediv__(other)\r\n"]
[210.566, "o", "\r\n"]
[210.576, "o", "    def __rtruediv__(self, other):\r\n"]
[210.586, "o", "        \"\"\"Right Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[210.596, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[210.606, "o", "            return self._new_view(\r\n"]
[210.616, "o", "                1.0 / self.value, other / self.unit, propagate_info=False\r\n"]
[210.626, "o", "            )\r\n"]
[210.636, "o", "\r\n"]
[210.646, "o", "        return super().__rtruediv__(other)\r\n"]
[210.656, "o", "\r\n"]
[210.666, "o", "    def __pow__(self, other):\r\n"]
[210.676, "o", "        if isinstance(other, Fraction):\r\n"]
[210.686, "o", "            # Avoid getting object arrays by raising the value to a Fraction.\r\n"]
[210.696, "o", "            return self._new_view(\r\n"]
[210.706, "o", "                self.value ** float(other), self.unit**other, propagate_info=False\r\n"]
[210.716, "o", "            )\r\n"]
[210.726, "o", "\r\n"]
[210.736, "o", "        return super().__pow__(other)\r\n"]
[210.746, "o", "\r\n"]
[210.756, "o", "    # other overrides of special functions\r\n"]
[210.766, "o", "    def __hash__(self):\r\n"]
[210.776, "o", "        return hash(self.value) ^ hash(self.unit)\r\n"]
[210.786, "o", "\r\n"]
[210.796, "o", "    def __iter__(self):\r\n"]
[210.806, "o", "        if self.isscalar:\r\n"]
[210.816, "o", "            raise TypeError(\r\n"]
[210.826, "o", "                f\"'{self.__class__.__name__}' object with a scalar value is not\"\r\n"]
[210.836, "o", "                \" iterable\"\r\n"]
[210.846, "o", "            )\r\n"]
[210.856, "o", "\r\n"]
[210.866, "o", "        # Otherwise return a generator\r\n"]
[210.876, "o", "        def quantity_iter():\r\n"]
[210.886, "o", "            for val in self.value:\r\n"]
[210.896, "o", "                yield self._new_view(val)\r\n"]
[210.906, "o", "\r\n"]
[210.916, "o", "        return quantity_iter()\r\n"]
[210.926, "o", "\r\n"]
[210.936, "o", "    def __getitem__(self, key):\r\n"]
[210.946, "o", "        if isinstance(key, str) and isinstance(self.unit, StructuredUnit):\r\n"]
[210.956, "o", "            return self._new_view(\r\n"]
[210.966, "o", "                self.view(np.ndarray)[key], self.unit[key], propagate_info=False\r\n"]
[210.976, "o", "            )\r\n"]
[210.986, "o", "\r\n"]
[210.996, "o", "        try:\r\n"]
[211.006, "o", "            out = super().__getitem__(key)\r\n"]
[211.016, "o", "        except IndexError:\r\n"]
[211.026, "o", "            # We want zero-dimensional Quantity objects to behave like scalars,\r\n"]
[211.036, "o", "            # so they should raise a TypeError rather than an IndexError.\r\n"]
[211.046, "o", "            if self.isscalar:\r\n"]
[211.056, "o", "                raise TypeError(\r\n"]
[211.066, "o", "                    f\"'{self.__class__.__name__}' object with a scalar value \"\r\n"]
[211.076, "o", "                    \"does not support indexing\"\r\n"]
[211.086, "o", "                )\r\n"]
[211.096, "o", "            else:\r\n"]
[211.106, "o", "                raise\r\n"]
[211.116, "o", "        # For single elements, ndarray.__getitem__ returns scalars; these\r\n"]
[211.126, "o", "        # need a new view as a Quantity.\r\n"]
[211.136, "o", "        if not isinstance(out, np.ndarray):\r\n"]
[211.146, "o", "            out = self._new_view(out)\r\n"]
[211.156, "o", "        return out\r\n"]
[211.166, "o", "\r\n"]
[211.176, "o", "    def __setitem__(self, i, value):\r\n"]
[211.186, "o", "        if isinstance(i, str):\r\n"]
[211.196, "o", "            # Indexing will cause a different unit, so by doing this in\r\n"]
[211.206, "o", "            # two steps we effectively try with the right unit.\r\n"]
[211.216, "o", "            self[i][...] = value\r\n"]
[211.226, "o", "            return\r\n"]
[211.236, "o", "\r\n"]
[211.246, "o", "        # update indices in info if the info property has been accessed\r\n"]
[211.256, "o", "        # (in which case 'info' in self.__dict__ is True; this is guaranteed\r\n"]
[211.266, "o", "        # to be the case if we're part of a table).\r\n"]
[211.276, "o", "        if not self.isscalar and \"info\" in self.__dict__:\r\n"]
[211.286, "o", "            self.info.adjust_indices(i, value, len(self))\r\n"]
[211.296, "o", "        self.view(np.ndarray).__setitem__(i, self._to_own_unit(value))\r\n"]
[211.306, "o", "\r\n"]
[211.316, "o", "    # __contains__ is OK\r\n"]
[211.326, "o", "\r\n"]
[211.336, "o", "    def __bool__(self):\r\n"]
[211.346, "o", "        \"\"\"This method raises ValueError, since truthiness of quantities is ambiguous,\r\n"]
[211.356, "o", "        especially for logarithmic units and temperatures. Use explicit comparisons.\r\n"]
[211.366, "o", "        \"\"\"\r\n"]
[211.376, "o", "        raise ValueError(\r\n"]
[211.386, "o", "            f\"{type(self).__name__} truthiness is ambiguous, especially for logarithmic units\"\r\n"]
[211.396, "o", "            \" and temperatures. Use explicit comparisons.\"\r\n"]
[211.406, "o", "        )\r\n"]
[211.416, "o", "\r\n"]
[211.426, "o", "    def __len__(self):\r\n"]
[211.436, "o", "        if self.isscalar:\r\n"]
[211.446, "o", "            raise TypeError(\r\n"]
[211.456, "o", "                f\"'{self.__class__.__name__}' object with a scalar value has no len()\"\r\n"]
[211.466, "o", "            )\r\n"]
[211.476, "o", "        else:\r\n"]
[211.486, "o", "            return len(self.value)\r\n"]
[211.496, "o", "\r\n"]
[211.506, "o", "    # Numerical types\r\n"]
[211.516, "o", "    def __float__(self):\r\n"]
[211.526, "o", "        try:\r\n"]
[211.536, "o", "            return float(self.to_value(dimensionless_unscaled))\r\n"]
[211.546, "o", "        except (UnitsError, TypeError):\r\n"]
[211.556, "o", "            raise TypeError(\r\n"]
[211.566, "o", "                \"only dimensionless scalar quantities can be \"\r\n"]
[211.576, "o", "                \"converted to Python scalars\"\r\n"]
[211.586, "o", "            )\r\n"]
[211.596, "o", "\r\n"]
[211.606, "o", "    def __int__(self):\r\n"]
[211.616, "o", "        try:\r\n"]
[211.626, "o", "            return int(self.to_value(dimensionless_unscaled))\r\n"]
[211.636, "o", "        except (UnitsError, TypeError):\r\n"]
[211.646, "o", "            raise TypeError(\r\n"]
[211.656, "o", "                \"only dimensionless scalar quantities can be \"\r\n"]
[211.666, "o", "                \"converted to Python scalars\"\r\n"]
[211.676, "o", "            )\r\n"]
[211.686, "o", "\r\n"]
[211.696, "o", "    def __index__(self):\r\n"]
[211.706, "o", "        # for indices, we do not want to mess around with scaling at all,\r\n"]
[211.716, "o", "        # so unlike for float, int, we insist here on unscaled dimensionless\r\n"]
[211.726, "o", "        try:\r\n"]
[211.736, "o", "            assert self.unit.is_unity()\r\n"]
[211.746, "o", "            return self.value.__index__()\r\n"]
[211.756, "o", "        except Exception:\r\n"]
[211.766, "o", "            raise TypeError(\r\n"]
[211.776, "o", "                \"only integer dimensionless scalar quantities \"\r\n"]
[211.786, "o", "                \"can be converted to a Python index\"\r\n"]
[211.796, "o", "            )\r\n"]
[211.806, "o", "\r\n"]
[211.816, "o", "    # TODO: we may want to add a hook for dimensionless quantities?\r\n"]
[211.826, "o", "    @property\r\n"]
[211.836, "o", "    def _unitstr(self):\r\n"]
[211.846, "o", "        if self.unit is None:\r\n"]
[211.856, "o", "            unitstr = _UNIT_NOT_INITIALISED\r\n"]
[211.866, "o", "        else:\r\n"]
[211.876, "o", "            unitstr = str(self.unit)\r\n"]
[211.886, "o", "\r\n"]
[211.896, "o", "        if unitstr:\r\n"]
[211.906, "o", "            unitstr = \" \" + unitstr\r\n"]
[211.916, "o", "\r\n"]
[211.926, "o", "        return unitstr\r\n"]
[211.936, "o", "\r\n"]
[211.946, "o", "    def to_string(\r\n"]
[211.956, "o", "        self, unit=None, precision=None, format=None, subfmt=None, *, formatter=None\r\n"]
[211.966, "o", "    ):\r\n"]
[211.976, "o", "        \"\"\"\r\n"]
[211.986, "o", "        Generate a string representation of the quantity and its unit.\r\n"]
[211.996, "o", "\r\n"]
[212.006, "o", "        The behavior of this function can be altered via the\r\n"]
[212.016, "o", "        `numpy.set_printoptions` function and its various keywords.  The\r\n"]
[212.026, "o", "        exception to this is the ``threshold`` keyword, which is controlled via\r\n"]
[212.036, "o", "        the ``[units.quantity]`` configuration item ``latex_array_threshold``.\r\n"]
[212.046, "o", "        This is treated separately because the numpy default of 1000 is too big\r\n"]
[212.056, "o", "        for most browsers to handle.\r\n"]
[212.066, "o", "\r\n"]
[212.076, "o", "        Parameters\r\n"]
[212.086, "o", "        ----------\r\n"]
[212.096, "o", "        unit : unit-like, optional\r\n"]
[212.106, "o", "            Specifies the unit.  If not provided,\r\n"]
[212.116, "o", "            the unit used to initialize the quantity will be used.\r\n"]
[212.126, "o", "\r\n"]
[212.136, "o", "        precision : number, optional\r\n"]
[212.146, "o", "            The level of decimal precision. If `None`, or not provided,\r\n"]
[212.156, "o", "            it will be determined from NumPy print options.\r\n"]
[212.166, "o", "\r\n"]
[212.176, "o", "        format : str, optional\r\n"]
[212.186, "o", "            The format of the result. If not provided, an unadorned\r\n"]
[212.196, "o", "            string is returned. Supported values are:\r\n"]
[212.206, "o", "\r\n"]
[212.216, "o", "            - 'latex': Return a LaTeX-formatted string\r\n"]
[212.226, "o", "\r\n"]
[212.236, "o", "            - 'latex_inline': Return a LaTeX-formatted string that uses\r\n"]
[212.246, "o", "              negative exponents instead of fractions\r\n"]
[212.256, "o", "\r\n"]
[212.266, "o", "        formatter : str, callable, dict, optional\r\n"]
[212.276, "o", "            The formatter to use for the value. If a string, it should be a\r\n"]
[212.286, "o", "            valid format specifier using Python's mini-language. If a callable,\r\n"]
[212.296, "o", "            it will be treated as the default formatter for all values and will\r\n"]
[212.306, "o", "            overwrite default Latex formatting for exponential notation and complex\r\n"]
[212.316, "o", "            numbers. If a dict, it should map a specific type to a callable to be\r\n"]
[212.326, "o", "            directly passed into `numpy.array2string`. If not provided, the default\r\n"]
[212.336, "o", "            formatter will be used.\r\n"]
[212.346, "o", "\r\n"]
[212.356, "o", "        subfmt : str, optional\r\n"]
[212.366, "o", "            Subformat of the result. For the moment, only used for\r\n"]
[212.376, "o", "            ``format='latex'`` and ``format='latex_inline'``. Supported\r\n"]
[212.386, "o", "            values are:\r\n"]
[212.396, "o", "\r\n"]
[212.406, "o", "            - 'inline': Use ``$ ... $`` as delimiters.\r\n"]
[212.416, "o", "\r\n"]
[212.426, "o", "            - 'display': Use ``$\\\\displaystyle ... $`` as delimiters.\r\n"]
[212.436, "o", "\r\n"]
[212.446, "o", "        Returns\r\n"]
[212.456, "o", "        -------\r\n"]
[212.466, "o", "        str\r\n"]
[212.476, "o", "            A string with the contents of this Quantity\r\n"]
[212.486, "o", "        \"\"\"\r\n"]
[212.496, "o", "        if unit is not None and unit != self.unit:\r\n"]
[212.506, "o", "            return self.to(unit).to_string(\r\n"]
[212.516, "o", "                unit=None,\r\n"]
[212.526, "o", "                precision=precision,\r\n"]
[212.536, "o", "                format=format,\r\n"]
[212.546, "o", "                subfmt=subfmt,\r\n"]
[212.556, "o", "                formatter=formatter,\r\n"]
[212.566, "o", "            )\r\n"]
[212.576, "o", "\r\n"]
[212.586, "o", "        if format is None and formatter is None and precision is None:\r\n"]
[212.596, "o", "            # Use default formatting settings\r\n"]
[212.606, "o", "            return f\"{self.value}{self._unitstr:s}\"\r\n"]
[212.616, "o", "\r\n"]
[212.626, "o", "        formats = {\r\n"]
[212.636, "o", "            None: None,\r\n"]
[212.646, "o", "            \"latex\": {\r\n"]
[212.656, "o", "                None: (\"$\", \"$\"),\r\n"]
[212.666, "o", "                \"inline\": (\"$\", \"$\"),\r\n"]
[212.676, "o", "                \"display\": (r\"$\\displaystyle \", r\"$\"),\r\n"]
[212.686, "o", "            },\r\n"]
[212.696, "o", "        }\r\n"]
[212.706, "o", "        formats[\"latex_inline\"] = formats[\"latex\"]\r\n"]
[212.716, "o", "\r\n"]
[212.726, "o", "        if format not in formats:\r\n"]
[212.736, "o", "            raise ValueError(f\"Unknown format '{format}'\")\r\n"]
[212.746, "o", "\r\n"]
[212.756, "o", "        format_spec = formatter if isinstance(formatter, str) else None\r\n"]
[212.766, "o", "\r\n"]
[212.776, "o", "        if format is None:\r\n"]
[212.786, "o", "            if format_spec is not None:\r\n"]
[212.796, "o", "\r\n"]
[212.806, "o", "                def formatter(value):\r\n"]
[212.816, "o", "                    return builtins.format(value, format_spec)\r\n"]
[212.826, "o", "\r\n"]
[212.836, "o", "            if callable(formatter):\r\n"]
[212.846, "o", "                formatter = {\"all\": formatter}\r\n"]
[212.856, "o", "\r\n"]
[212.866, "o", "            return (\r\n"]
[212.876, "o", "                np.array2string(\r\n"]
[212.886, "o", "                    self.value,\r\n"]
[212.896, "o", "                    precision=precision,\r\n"]
[212.906, "o", "                    floatmode=\"fixed\",\r\n"]
[212.916, "o", "                    formatter=formatter,\r\n"]
[212.926, "o", "                )\r\n"]
[212.936, "o", "                + self._unitstr\r\n"]
[212.946, "o", "            )\r\n"]
[212.956, "o", "\r\n"]
[212.966, "o", "        # else, for the moment we assume format=\"latex\" or \"latex_inline\".\r\n"]
[212.976, "o", "\r\n"]
[212.986, "o", "        # Set the precision if set, otherwise use numpy default\r\n"]
[212.996, "o", "        pops = np.get_printoptions()\r\n"]
[213.006, "o", "        if format_spec is None:\r\n"]
[213.016, "o", "            format_spec = (\r\n"]
[213.026, "o", "                f\".{precision if precision is not None else pops['precision']}g\"\r\n"]
[213.036, "o", "            )\r\n"]
[213.046, "o", "\r\n"]
[213.056, "o", "        # Use default formatters\r\n"]
[213.066, "o", "        if formatter is None or isinstance(formatter, str):\r\n"]
[213.076, "o", "            # Filter width and alignment operations for latex\r\n"]
[213.086, "o", "            # [[fill]align][sign][\"z\"][\"#\"][\"0\"][width][grouping_option][\".\" precision][type]\r\n"]
[213.096, "o", "            format_spec = re.sub(\r\n"]
[213.106, "o", "                r\"(.*?)([+\\- ]?)(\\d+)?(,)?(\\.\\d+)?([a-zA-Z%]+)?$\",\r\n"]
[213.116, "o", "                r\"\\2\\5\\6\",\r\n"]
[213.126, "o", "                format_spec,\r\n"]
[213.136, "o", "            )\r\n"]
[213.146, "o", "\r\n"]
[213.156, "o", "            if self.dtype.kind == \"c\":  # Complex default latex formatter\r\n"]
[213.166, "o", "                # Disallow sign operations for the imaginary part\r\n"]
[213.176, "o", "                imag_format_spec = re.sub(r\"[+\\- ]\", \"\", format_spec)\r\n"]
[213.186, "o", "\r\n"]
[213.196, "o", "                def formatter(value):\r\n"]
[213.206, "o", "                    return \"({}{}i)\".format(\r\n"]
[213.216, "o", "                        Latex.format_exponential_notation(\r\n"]
[213.226, "o", "                            value.real, format_spec=format_spec\r\n"]
[213.236, "o", "                        ),\r\n"]
[213.246, "o", "                        Latex.format_exponential_notation(\r\n"]
[213.256, "o", "                            value.imag, format_spec=\"+\" + imag_format_spec\r\n"]
[213.266, "o", "                        ),\r\n"]
[213.276, "o", "                    )\r\n"]
[213.286, "o", "\r\n"]
[213.296, "o", "            else:  # Float default latex formatter\r\n"]
[213.306, "o", "\r\n"]
[213.316, "o", "                def formatter(value):\r\n"]
[213.326, "o", "                    return Latex.format_exponential_notation(\r\n"]
[213.336, "o", "                        value, format_spec=format_spec\r\n"]
[213.346, "o", "                    )\r\n"]
[213.356, "o", "\r\n"]
[213.366, "o", "        if callable(formatter):\r\n"]
[213.376, "o", "            formatter = {\"all\": formatter}\r\n"]
[213.386, "o", "\r\n"]
[213.396, "o", "        # The view is needed for the scalar case - self.value might be float.\r\n"]
[213.406, "o", "        latex_value = np.array2string(\r\n"]
[213.416, "o", "            self.view(np.ndarray),\r\n"]
[213.426, "o", "            threshold=(\r\n"]
[213.436, "o", "                conf.latex_array_threshold\r\n"]
[213.446, "o", "                if conf.latex_array_threshold > -1\r\n"]
[213.456, "o", "                else pops[\"threshold\"]\r\n"]
[213.466, "o", "            ),\r\n"]
[213.476, "o", "            formatter=formatter,\r\n"]
[213.486, "o", "            max_line_width=np.inf,\r\n"]
[213.496, "o", "            separator=\",~\",\r\n"]
[213.506, "o", "        )\r\n"]
[213.516, "o", "\r\n"]
[213.526, "o", "        latex_value = latex_value.replace(\"...\", r\"\\dots\")\r\n"]
[213.536, "o", "\r\n"]
[213.546, "o", "        # Format unit\r\n"]
[213.556, "o", "        # [1:-1] strips the '$' on either side needed for math mode\r\n"]
[213.566, "o", "        if self.unit is None:\r\n"]
[213.576, "o", "            latex_unit = _UNIT_NOT_INITIALISED\r\n"]
[213.586, "o", "        elif format == \"latex\":\r\n"]
[213.596, "o", "            latex_unit = self.unit._repr_latex_()[1:-1]  # note this is unicode\r\n"]
[213.606, "o", "        elif format == \"latex_inline\":\r\n"]
[213.616, "o", "            latex_unit = self.unit.to_string(format=\"latex_inline\")[1:-1]\r\n"]
[213.626, "o", "\r\n"]
[213.636, "o", "        delimiter_left, delimiter_right = formats[format][subfmt]\r\n"]
[213.646, "o", "\r\n"]
[213.656, "o", "        # Add a space in front except for super-script units like degrees.\r\n"]
[213.666, "o", "        if not latex_unit.removeprefix(\"\\\\mathrm{\").startswith(\"{}^\"):\r\n"]
[213.676, "o", "            latex_unit = rf\" \\; {latex_unit}\"\r\n"]
[213.686, "o", "\r\n"]
[213.696, "o", "        return rf\"{delimiter_left}{latex_value}{latex_unit}{delimiter_right}\"\r\n"]
[213.706, "o", "\r\n"]
[213.716, "o", "    def __str__(self):\r\n"]
[213.726, "o", "        return self.to_string()\r\n"]
[213.736, "o", "\r\n"]
[213.746, "o", "    def __repr__(self):\r\n"]
[213.756, "o", "        prefixstr = \"<\" + self.__class__.__name__ + \" \"\r\n"]
[213.766, "o", "        arrstr = np.array2string(\r\n"]
[213.776, "o", "            self.view(np.ndarray), separator=\", \", prefix=prefixstr\r\n"]
[213.786, "o", "        )\r\n"]
[213.796, "o", "        return f\"{prefixstr}{arrstr}{self._unitstr:s}>\"\r\n"]
[213.806, "o", "\r\n"]
[213.816, "o", "    def _repr_latex_(self):\r\n"]
[213.826, "o", "        \"\"\"\r\n"]
[213.836, "o", "        Generate a latex representation of the quantity and its unit.\r\n"]
[213.846, "o", "\r\n"]
[213.856, "o", "        Returns\r\n"]
[213.866, "o", "        -------\r\n"]
[213.876, "o", "        lstr\r\n"]
[213.886, "o", "            A LaTeX string with the contents of this Quantity\r\n"]
[213.896, "o", "        \"\"\"\r\n"]
[213.906, "o", "        # NOTE: This should change to display format in a future release\r\n"]
[213.916, "o", "        return self.to_string(format=\"latex\", subfmt=\"inline\")\r\n"]
[213.926, "o", "\r\n"]
[213.936, "o", "    def __format__(self, format_spec):\r\n"]
[213.946, "o", "        try:\r\n"]
[213.956, "o", "            return self.to_string(format=format_spec)\r\n"]
[213.966, "o", "        except ValueError:\r\n"]
[213.976, "o", "            # We might have a unit format not implemented in `to_string()`.\r\n"]
[213.986, "o", "            if format_spec in Base.registry:\r\n"]
[213.996, "o", "                if self.unit is dimensionless_unscaled:\r\n"]
[214.006, "o", "                    return f\"{self.value}\"\r\n"]
[214.016, "o", "                else:\r\n"]
[214.026, "o", "                    return f\"{self.value} {format(self.unit, format_spec)}\"\r\n"]
[214.036, "o", "            # Can the value be formatted on its own?\r\n"]
[214.046, "o", "            try:\r\n"]
[214.056, "o", "                return f\"{format(self.value, format_spec)}{self._unitstr:s}\"\r\n"]
[214.066, "o", "            except ValueError:\r\n"]
[214.076, "o", "                # Format the whole thing as a single string.\r\n"]
[214.086, "o", "                return format(f\"{self.value}{self._unitstr:s}\", format_spec)\r\n"]
[214.096, "o", "\r\n"]
[214.106, "o", "    def decompose(self, bases=[]):\r\n"]
[214.116, "o", "        \"\"\"\r\n"]
[214.126, "o", "        Generates a new `Quantity` with the units\r\n"]
[214.136, "o", "        decomposed. Decomposed units have only irreducible units in\r\n"]
[214.146, "o", "        them (see `astropy.units.UnitBase.decompose`).\r\n"]
[214.156, "o", "\r\n"]
[214.166, "o", "        Parameters\r\n"]
[214.176, "o", "        ----------\r\n"]
[214.186, "o", "        bases : sequence of `~astropy.units.UnitBase`, optional\r\n"]
[214.196, "o", "            The bases to decompose into.  When not provided,\r\n"]
[214.206, "o", "            decomposes down to any irreducible units.  When provided,\r\n"]
[214.216, "o", "            the decomposed result will only contain the given units.\r\n"]
[214.226, "o", "            This will raises a `~astropy.units.UnitsError` if it's not possible\r\n"]
[214.236, "o", "            to do so.\r\n"]
[214.246, "o", "\r\n"]
[214.256, "o", "        Returns\r\n"]
[214.266, "o", "        -------\r\n"]
[214.276, "o", "        newq : `~astropy.units.Quantity`\r\n"]
[214.286, "o", "            A new object equal to this quantity with units decomposed.\r\n"]
[214.296, "o", "        \"\"\"\r\n"]
[214.306, "o", "        return self._decompose(False, bases=bases)\r\n"]
[214.316, "o", "\r\n"]
[214.326, "o", "    def _decompose(self, allowscaledunits=False, bases=[]):\r\n"]
[214.336, "o", "        \"\"\"\r\n"]
[214.346, "o", "        Generates a new `Quantity` with the units decomposed. Decomposed\r\n"]
[214.356, "o", "        units have only irreducible units in them (see\r\n"]
[214.366, "o", "        `astropy.units.UnitBase.decompose`).\r\n"]
[214.376, "o", "\r\n"]
[214.386, "o", "        Parameters\r\n"]
[214.396, "o", "        ----------\r\n"]
[214.406, "o", "        allowscaledunits : bool\r\n"]
[214.416, "o", "            If True, the resulting `Quantity` may have a scale factor\r\n"]
[214.426, "o", "            associated with it.  If False, any scaling in the unit will\r\n"]
[214.436, "o", "            be subsumed into the value of the resulting `Quantity`\r\n"]
[214.446, "o", "\r\n"]
[214.456, "o", "        bases : sequence of UnitBase, optional\r\n"]
[214.466, "o", "            The bases to decompose into.  When not provided,\r\n"]
[214.476, "o", "            decomposes down to any irreducible units.  When provided,\r\n"]
[214.486, "o", "            the decomposed result will only contain the given units.\r\n"]
[214.496, "o", "            This will raises a `~astropy.units.UnitsError` if it's not possible\r\n"]
[214.506, "o", "            to do so.\r\n"]
[214.516, "o", "\r\n"]
[214.526, "o", "        Returns\r\n"]
[214.536, "o", "        -------\r\n"]
[214.546, "o", "        newq : `~astropy.units.Quantity`\r\n"]
[214.556, "o", "            A new object equal to this quantity with units decomposed.\r\n"]
[214.566, "o", "\r\n"]
[214.576, "o", "        \"\"\"\r\n"]
[214.586, "o", "        new_unit = self.unit.decompose(bases=bases)\r\n"]
[214.596, "o", "\r\n"]
[214.606, "o", "        # Be careful here because self.value usually is a view of self;\r\n"]
[214.616, "o", "        # be sure that the original value is not being modified.\r\n"]
[214.626, "o", "        if not allowscaledunits and hasattr(new_unit, \"scale\"):\r\n"]
[214.636, "o", "            new_value = self.value * new_unit.scale\r\n"]
[214.646, "o", "            new_unit = new_unit / new_unit.scale\r\n"]
[214.656, "o", "            return self._new_view(new_value, new_unit)\r\n"]
[214.666, "o", "        else:\r\n"]
[214.676, "o", "            return self._new_view(self.copy(), new_unit)\r\n"]
[214.686, "o", "\r\n"]
[214.696, "o", "    # These functions need to be overridden to take into account the units\r\n"]
[214.706, "o", "    # Array conversion\r\n"]
[214.716, "o", "    # https://numpy.org/doc/stable/reference/arrays.ndarray.html#array-conversion\r\n"]
[214.726, "o", "\r\n"]
[214.736, "o", "    def item(self, *args):\r\n"]
[214.746, "o", "        \"\"\"Copy an element of an array to a scalar Quantity and return it.\r\n"]
[214.756, "o", "\r\n"]
[214.766, "o", "        Like :meth:`~numpy.ndarray.item` except that it always\r\n"]
[214.776, "o", "        returns a `Quantity`, not a Python scalar.\r\n"]
[214.786, "o", "\r\n"]
[214.796, "o", "        \"\"\"\r\n"]
[214.806, "o", "        return self._new_view(super().item(*args))\r\n"]
[214.816, "o", "\r\n"]
[214.826, "o", "    def tolist(self):\r\n"]
[214.836, "o", "        raise NotImplementedError(\r\n"]
[214.846, "o", "            \"cannot make a list of Quantities. Get list of values with\"\r\n"]
[214.856, "o", "            \" q.value.tolist().\"\r\n"]
[214.866, "o", "        )\r\n"]
[214.876, "o", "\r\n"]
[214.886, "o", "    def _to_own_unit(self, value, check_precision=True, *, unit=None):\r\n"]
[214.896, "o", "        \"\"\"Convert value to one's own unit (or that given).\r\n"]
[214.906, "o", "\r\n"]
[214.916, "o", "        Here, non-quantities are treated as dimensionless, and care is taken\r\n"]
[214.926, "o", "        for values of 0, infinity or nan, which are allowed to have any unit.\r\n"]
[214.936, "o", "\r\n"]
[215.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[215.002, "i", "cat asv.ci.conf.json\r"]
[215.004, "o", "cat asv.ci.conf.json\r\n"]
[215.3356, "o", "\u001b[?2004l\r\n"]
[215.6652, "o", " {\r\n"]
[215.9948, "o", "   \"version\": 1,\r\n"]
[216.3244, "o", "   \"project\": \"astropy\",\r\n"]
[216.654, "o", "   \"project_url\": \"http://www.astropy.org/\",\r\n"]
[216.9836, "o", "   \"repo\": \".\",\r\n"]
[217.3132, "o", "   \"install_command\": [\r\n"]
[217.6428, "o", "     \"pip install . matplotlib scipy\"\r\n"]
[217.9724, "o", "   ],\r\n"]
[218.302, "o", "   \"branches\": [\"main\"],\r\n"]
[218.6316, "o", "   \"show_commit_url\": \"http://github.com/astropy/astropy/commit/\",\r\n"]
[218.9612, "o", "   \"pythons\": [\"3.11\"],\r\n"]
[219.2908, "o", "   \"environment_type\": \"virtualenv\",\r\n"]
[219.6204, "o", "   \"benchmark_dir\": \"astropy-benchmarks/benchmarks\"\r\n"]
[220.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[220.002, "i", "sed -n '1,240p' astropy-benchmarks/benchmarks/units.py\r"]
[220.004, "o", "sed -n '1,240p' astropy-benchmarks/benchmarks/units.py\r\n"]
[220.026861, "o", "\u001b[?2004l\r\n"]
[220.047722, "o", "import copy\r\n"]
[220.068582, "o", "\r\n"]
[220.089443, "o", "import numpy as np\r\n"]
[220.110304, "o", "from astropy import units as u\r\n"]
[220.131165, "o", "\r\n"]
[220.152025, "o", "\r\n"]
[220.172886, "o", "# Unit tests\r\n"]
[220.193747, "o", "\r\n"]
[220.214608, "o", "\r\n"]
[220.235468, "o", "def time_unit_compose():\r\n"]
[220.256329, "o", "    u.Ry.compose()\r\n"]
[220.27719, "o", "\r\n"]
[220.298051, "o", "\r\n"]
[220.318911, "o", "def time_unit_to():\r\n"]
[220.339772, "o", "    u.m.to(u.pc)\r\n"]
[220.360633, "o", "\r\n"]
[220.381494, "o", "\r\n"]
[220.402354, "o", "def time_unit_parse():\r\n"]
[220.423215, "o", "    u.Unit(\"1e-07 kg m2 / s2\")\r\n"]
[220.444076, "o", "\r\n"]
[220.464937, "o", "\r\n"]
[220.485797, "o", "def time_simple_unit_parse():\r\n"]
[220.506658, "o", "    u.Unit(\"1 d\")\r\n"]
[220.527519, "o", "\r\n"]
[220.54838, "o", "\r\n"]
[220.569241, "o", "def time_very_simple_unit_parse():\r\n"]
[220.590101, "o", "    u.Unit(\"d\")\r\n"]
[220.610962, "o", "\r\n"]
[220.631823, "o", "\r\n"]
[220.652684, "o", "def mem_unit():\r\n"]
[220.673544, "o", "    return u.erg\r\n"]
[220.694405, "o", "\r\n"]
[220.715266, "o", "\r\n"]
[220.736127, "o", "def time_compose_to_bases():\r\n"]
[220.756987, "o", "    x = copy.copy(u.Ry)\r\n"]
[220.777848, "o", "    x.cgs\r\n"]
[220.798709, "o", "\r\n"]
[220.81957, "o", "\r\n"]
[220.84043, "o", "def time_compose_complex():\r\n"]
[220.861291, "o", "    # Composing a complex unit can be very inefficient\r\n"]
[220.882152, "o", "    (u.kg / u.s**3 * u.au**2.5 / u.yr**0.5 / u.sr**2).compose()\r\n"]
[220.903013, "o", "\r\n"]
[220.923873, "o", "\r\n"]
[220.944734, "o", "# Quantity tests\r\n"]
[220.965595, "o", "\r\n"]
[220.986456, "o", "a = np.arange(100000.0)\r\n"]
[221.007316, "o", "b1 = [1.0, 2.0, 3.0]\r\n"]
[221.028177, "o", "b2 = np.asarray(b1)\r\n"]
[221.049038, "o", "q0 = u.Quantity(1.0, u.s)\r\n"]
[221.069899, "o", "q1 = u.Quantity(a, u.m)\r\n"]
[221.090759, "o", "q2 = u.Quantity(a[:10000], u.deg)\r\n"]
[221.11162, "o", "\r\n"]
[221.132481, "o", "\r\n"]
[221.153342, "o", "def time_quantity_creation():\r\n"]
[221.174203, "o", "    u.Quantity(a, u.m)\r\n"]
[221.195063, "o", "\r\n"]
[221.215924, "o", "\r\n"]
[221.236785, "o", "def time_quantity_creation_nocopy():\r\n"]
[221.257646, "o", "    u.Quantity(a, u.m, copy=False)\r\n"]
[221.278506, "o", "\r\n"]
[221.299367, "o", "\r\n"]
[221.320228, "o", "def time_quantity_view():\r\n"]
[221.341089, "o", "    q1.view(u.Quantity)\r\n"]
[221.361949, "o", "\r\n"]
[221.38281, "o", "\r\n"]
[221.403671, "o", "def time_quantity_init_scalar():\r\n"]
[221.424532, "o", "    3.0 * u.m / u.s\r\n"]
[221.445392, "o", "\r\n"]
[221.466253, "o", "\r\n"]
[221.487114, "o", "def time_quantity_init_array():\r\n"]
[221.507975, "o", "    a * u.m / u.s\r\n"]
[221.528835, "o", "\r\n"]
[221.549696, "o", "\r\n"]
[221.570557, "o", "def time_quantity_init_small_list():\r\n"]
[221.591418, "o", "    \"\"\"\r\n"]
[221.612278, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[221.633139, "o", "    for small list.\r\n"]
[221.654, "o", "    \"\"\"\r\n"]
[221.674861, "o", "    b1 * u.m / u.s\r\n"]
[221.695722, "o", "\r\n"]
[221.716582, "o", "\r\n"]
[221.737443, "o", "def time_quantity_init_small_array():\r\n"]
[221.758304, "o", "    \"\"\"\r\n"]
[221.779165, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[221.800025, "o", "    for small array.\r\n"]
[221.820886, "o", "    \"\"\"\r\n"]
[221.841747, "o", "    b2 * u.m / u.s\r\n"]
[221.862608, "o", "\r\n"]
[221.883468, "o", "\r\n"]
[221.904329, "o", "def time_quantity_scalar_conversion():\r\n"]
[221.92519, "o", "    (3.0 * u.m / u.s).to(u.km / u.hour)\r\n"]
[221.946051, "o", "\r\n"]
[221.966911, "o", "\r\n"]
[221.987772, "o", "def time_quantity_array_conversion():\r\n"]
[222.008633, "o", "    (a * u.m / u.s).to(u.km / u.hour)\r\n"]
[222.029494, "o", "\r\n"]
[222.050354, "o", "\r\n"]
[222.071215, "o", "def time_quantity_times_unit():\r\n"]
[222.092076, "o", "    q1 * u.m\r\n"]
[222.112937, "o", "\r\n"]
[222.133797, "o", "\r\n"]
[222.154658, "o", "def time_quantity_times_quantity():\r\n"]
[222.175519, "o", "    q1 * q0\r\n"]
[222.19638, "o", "\r\n"]
[222.217241, "o", "\r\n"]
[222.238101, "o", "def time_quantity_ufunc_sin():\r\n"]
[222.258962, "o", "    np.sin(q2)\r\n"]
[222.279823, "o", "\r\n"]
[222.300684, "o", "\r\n"]
[222.321544, "o", "class TimeQuantityOpSmallArray:\r\n"]
[222.342405, "o", "    \"\"\"\r\n"]
[222.363266, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[222.384127, "o", "    for a small Numpy array.\r\n"]
[222.404987, "o", "    \"\"\"\r\n"]
[222.425848, "o", "\r\n"]
[222.446709, "o", "    def setup(self):\r\n"]
[222.46757, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[222.48843, "o", "        self.data = data * u.g\r\n"]
[222.509291, "o", "        self.out_sq = data * u.g**2\r\n"]
[222.530152, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[222.551013, "o", "\r\n"]
[222.571873, "o", "    def time_quantity_square(self):\r\n"]
[222.592734, "o", "        self.data**2\r\n"]
[222.613595, "o", "\r\n"]
[222.634456, "o", "    def time_quantity_np_square(self):\r\n"]
[222.655316, "o", "        np.power(self.data, 2)\r\n"]
[222.676177, "o", "\r\n"]
[222.697038, "o", "    def time_quantity_np_square_out(self):\r\n"]
[222.717899, "o", "        np.power(self.data, 2, out=self.out_sq)\r\n"]
[222.738759, "o", "\r\n"]
[222.75962, "o", "    def time_quantity_sqrt(self):\r\n"]
[222.780481, "o", "        self.data**0.5\r\n"]
[222.801342, "o", "\r\n"]
[222.822203, "o", "    def time_quantity_np_sqrt(self):\r\n"]
[222.843063, "o", "        np.sqrt(self.data)\r\n"]
[222.863924, "o", "\r\n"]
[222.884785, "o", "    def time_quantity_np_sqrt_out(self):\r\n"]
[222.905646, "o", "        np.sqrt(self.data, out=self.out_sqrt)\r\n"]
[222.926506, "o", "\r\n"]
[222.947367, "o", "\r\n"]
[222.968228, "o", "class TimeQuantityOpLargeArray(TimeQuantityOpSmallArray):\r\n"]
[222.989089, "o", "    \"\"\"\r\n"]
[223.009949, "o", "    Like :class:`TimeQuantityOpSmallArray` but for a large Numpy array.\r\n"]
[223.03081, "o", "    \"\"\"\r\n"]
[223.051671, "o", "\r\n"]
[223.072532, "o", "    def setup(self):\r\n"]
[223.093392, "o", "        data = np.arange(1e6) + 1\r\n"]
[223.114253, "o", "        self.data = data * u.g\r\n"]
[223.135114, "o", "        self.out_sq = data * u.g**2\r\n"]
[223.155975, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[223.176835, "o", "\r\n"]
[223.197696, "o", "\r\n"]
[223.218557, "o", "class TimeQuantityOpSmallArrayDiffUnit:\r\n"]
[223.239418, "o", "    \"\"\"\r\n"]
[223.260278, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[223.281139, "o", "    for small Numpy arrays with different units.\r\n"]
[223.302, "o", "    \"\"\"\r\n"]
[223.322861, "o", "\r\n"]
[223.343722, "o", "    def setup(self):\r\n"]
[223.364582, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[223.385443, "o", "        self.data = data * u.g\r\n"]
[223.406304, "o", "\r\n"]
[223.427165, "o", "        # A different but dimensionally compatible unit\r\n"]
[223.448025, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[223.468886, "o", "\r\n"]
[223.489747, "o", "    def time_quantity_equal(self):\r\n"]
[223.510608, "o", "        # Same as operator.eq\r\n"]
[223.531468, "o", "        self.data == self.data2\r\n"]
[223.552329, "o", "\r\n"]
[223.57319, "o", "    def time_quantity_np_equal(self):\r\n"]
[223.594051, "o", "        np.equal(self.data, self.data2)\r\n"]
[223.614911, "o", "\r\n"]
[223.635772, "o", "    def time_quantity_truediv(self):\r\n"]
[223.656633, "o", "        # Since benchmark is PY3 only, this is always true divide.\r\n"]
[223.677494, "o", "        # Same as operator.truediv\r\n"]
[223.698354, "o", "        self.data / self.data2\r\n"]
[223.719215, "o", "\r\n"]
[223.740076, "o", "    def time_quantity_np_truediv(self):\r\n"]
[223.760937, "o", "        np.true_divide(self.data, self.data2)\r\n"]
[223.781797, "o", "\r\n"]
[223.802658, "o", "    def time_quantity_mul(self):\r\n"]
[223.823519, "o", "        # Same as operator.mul\r\n"]
[223.84438, "o", "        self.data * self.data2\r\n"]
[223.865241, "o", "\r\n"]
[223.886101, "o", "    def time_quantity_np_multiply(self):\r\n"]
[223.906962, "o", "        np.multiply(self.data, self.data2)\r\n"]
[223.927823, "o", "\r\n"]
[223.948684, "o", "    def time_quantity_sub(self):\r\n"]
[223.969544, "o", "        # Same as operator.sub\r\n"]
[223.990405, "o", "        self.data - self.data2\r\n"]
[224.011266, "o", "\r\n"]
[224.032127, "o", "    def time_quantity_np_subtract(self):\r\n"]
[224.052987, "o", "        np.subtract(self.data, self.data2)\r\n"]
[224.073848, "o", "\r\n"]
[224.094709, "o", "    def time_quantity_add(self):\r\n"]
[224.11557, "o", "        # Same as operator.add\r\n"]
[224.13643, "o", "        self.data + self.data2\r\n"]
[224.157291, "o", "\r\n"]
[224.178152, "o", "    def time_quantity_np_add(self):\r\n"]
[224.199013, "o", "        np.add(self.data, self.data2)\r\n"]
[224.219873, "o", "\r\n"]
[224.240734, "o", "\r\n"]
[224.261595, "o", "class TimeQuantityOpSmallArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[224.282456, "o", "    \"\"\"\r\n"]
[224.303316, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[224.324177, "o", "    for small Numpy arrays with same units.\r\n"]
[224.345038, "o", "    \"\"\"\r\n"]
[224.365899, "o", "\r\n"]
[224.386759, "o", "    def setup(self):\r\n"]
[224.40762, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[224.428481, "o", "        self.data = data * u.g\r\n"]
[224.449342, "o", "        self.data2 = self.data.copy()\r\n"]
[224.470203, "o", "\r\n"]
[224.491063, "o", "\r\n"]
[224.511924, "o", "class TimeQuantityOpLargeArrayDiffUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[224.532785, "o", "    \"\"\"\r\n"]
[224.553646, "o", "    Like :class:`TimeQuantityOpSmallArrayDiffUnit` but for large Numpy arrays.\r\n"]
[224.574506, "o", "    \"\"\"\r\n"]
[224.595367, "o", "\r\n"]
[224.616228, "o", "    def setup(self):\r\n"]
[224.637089, "o", "        data = np.arange(1e6) + 1\r\n"]
[224.657949, "o", "        self.data = data * u.g\r\n"]
[224.67881, "o", "\r\n"]
[224.699671, "o", "        # A different but dimensionally compatible unit\r\n"]
[224.720532, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[224.741392, "o", "\r\n"]
[224.762253, "o", "\r\n"]
[224.783114, "o", "class TimeQuantityOpLargeArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[224.803975, "o", "    \"\"\"\r\n"]
[224.824835, "o", "    Like :class:`TimeQuantityOpSmallArraySameUnit` but for large Numpy arrays.\r\n"]
[224.845696, "o", "    \"\"\"\r\n"]
[224.866557, "o", "\r\n"]
[224.887418, "o", "    def setup(self):\r\n"]
[224.908278, "o", "        data = np.arange(1e6) + 1\r\n"]
[224.929139, "o", "        self.data = data * u.g\r\n"]
[225.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[225.002, "i", "asv dev -c asv.ci.conf.json -b \"units.time_quantity_init_small_list|units.time_quantity_creation_nocopy|units.time_\r"]
[225.004, "o", "asv dev -c asv.ci.conf.json -b \"units.time_quantity_init_small_list|units.time_quantity_creation_nocopy|units.time_\r\n"]
[225.9948, "o", "_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view\"\r\n"]
[226.9836, "o", "\u001b[?2004l\r\n"]
[227.9724, "o", "usage: asv [-h] [--verbose] [--config CONFIG] [--version]\r\n"]
[228.9612, "o", "           {help,quickstart,machine,setup,run,continuous,find,rm,publish,preview,profile,update,show,compare,check,gh-pages} ...\r\n"]
[230.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[230.002, "i", "asv profile -c asv.ci.conf.json units.time_quantity_times_unit\r"]
[230.004, "o", "asv profile -c asv.ci.conf.json units.time_quantity_times_unit\r\n"]
[231.242, "o", "\u001b[?2004l\r\n"]
[232.478, "o", "usage: asv [-h] [--verbose] [--config CONFIG] [--version]\r\n"]
[233.714, "o", "           {help,quickstart,machine,setup,run,continuous,find,rm,publish,preview,profile,update,show,compare,check,gh-pages} ...\r\n"]
[235.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[235.002, "i", "sed -n '1,400p' astropy/units/quantity.py\r"]
[235.004, "o", "sed -n '1,400p' astropy/units/quantity.py\r\n"]
[235.018329, "o", "\u001b[?2004l\r\n"]
[235.030658, "o", "# Licensed under a 3-clause BSD style license - see LICENSE.rst\r\n"]
[235.042988, "o", "\"\"\"\r\n"]
[235.055317, "o", "This module defines the `Quantity` object, which represents a number with some\r\n"]
[235.067646, "o", "associated units. `Quantity` objects support operations like ordinary numbers,\r\n"]
[235.079975, "o", "but will deal with unit conversions internally.\r\n"]
[235.092304, "o", "\"\"\"\r\n"]
[235.104633, "o", "\r\n"]
[235.116963, "o", "from __future__ import annotations\r\n"]
[235.129292, "o", "\r\n"]
[235.141621, "o", "import builtins\r\n"]
[235.15395, "o", "import numbers\r\n"]
[235.166279, "o", "import operator\r\n"]
[235.178608, "o", "import re\r\n"]
[235.190938, "o", "import warnings\r\n"]
[235.203267, "o", "from fractions import Fraction\r\n"]
[235.215596, "o", "from typing import TYPE_CHECKING\r\n"]
[235.227925, "o", "\r\n"]
[235.240254, "o", "import numpy as np\r\n"]
[235.252584, "o", "\r\n"]
[235.264913, "o", "from astropy import config as _config\r\n"]
[235.277242, "o", "from astropy.utils.compat.numpycompat import COPY_IF_NEEDED, NUMPY_LT_2_0\r\n"]
[235.289571, "o", "from astropy.utils.data_info import ParentDtypeInfo\r\n"]
[235.3019, "o", "from astropy.utils.exceptions import AstropyWarning\r\n"]
[235.314229, "o", "\r\n"]
[235.326559, "o", "from .core import (\r\n"]
[235.338888, "o", "    Unit,\r\n"]
[235.351217, "o", "    UnitBase,\r\n"]
[235.363546, "o", "    UnitConversionError,\r\n"]
[235.375875, "o", "    UnitsError,\r\n"]
[235.388204, "o", "    UnitTypeError,\r\n"]
[235.400534, "o", "    dimensionless_unscaled,\r\n"]
[235.412863, "o", "    get_current_unit_registry,\r\n"]
[235.425192, "o", ")\r\n"]
[235.437521, "o", "from .format import Base, Latex\r\n"]
[235.44985, "o", "from .quantity_helper import can_have_arbitrary_unit, check_output, converters_and_unit\r\n"]
[235.46218, "o", "from .quantity_helper.function_helpers import (\r\n"]
[235.474509, "o", "    DISPATCHED_FUNCTIONS,\r\n"]
[235.486838, "o", "    FUNCTION_HELPERS,\r\n"]
[235.499167, "o", "    SUBCLASS_SAFE_FUNCTIONS,\r\n"]
[235.511496, "o", "    UNSUPPORTED_FUNCTIONS,\r\n"]
[235.523825, "o", ")\r\n"]
[235.536155, "o", "from .structured import StructuredUnit, _structured_unit_like_dtype\r\n"]
[235.548484, "o", "from .utils import is_effectively_unity\r\n"]
[235.560813, "o", "\r\n"]
[235.573142, "o", "if TYPE_CHECKING:\r\n"]
[235.585471, "o", "    from typing_extensions import Self\r\n"]
[235.5978, "o", "\r\n"]
[235.61013, "o", "    from .typing import QuantityLike\r\n"]
[235.622459, "o", "\r\n"]
[235.634788, "o", "__all__ = [\r\n"]
[235.647117, "o", "    \"Quantity\",\r\n"]
[235.659446, "o", "    \"SpecificTypeQuantity\",\r\n"]
[235.671776, "o", "    \"QuantityInfoBase\",\r\n"]
[235.684105, "o", "    \"QuantityInfo\",\r\n"]
[235.696434, "o", "    \"allclose\",\r\n"]
[235.708763, "o", "    \"isclose\",\r\n"]
[235.721092, "o", "]\r\n"]
[235.733421, "o", "\r\n"]
[235.745751, "o", "\r\n"]
[235.75808, "o", "# We don't want to run doctests in the docstrings we inherit from Numpy\r\n"]
[235.770409, "o", "__doctest_skip__ = [\"Quantity.*\"]\r\n"]
[235.782738, "o", "\r\n"]
[235.795067, "o", "_UNIT_NOT_INITIALISED = \"(Unit not initialised)\"\r\n"]
[235.807397, "o", "_UFUNCS_FILTER_WARNINGS = {np.arcsin, np.arccos, np.arccosh, np.arctanh}\r\n"]
[235.819726, "o", "\r\n"]
[235.832055, "o", "\r\n"]
[235.844384, "o", "class Conf(_config.ConfigNamespace):\r\n"]
[235.856713, "o", "    \"\"\"\r\n"]
[235.869042, "o", "    Configuration parameters for Quantity.\r\n"]
[235.881372, "o", "    \"\"\"\r\n"]
[235.893701, "o", "\r\n"]
[235.90603, "o", "    latex_array_threshold = _config.ConfigItem(\r\n"]
[235.918359, "o", "        100,\r\n"]
[235.930688, "o", "        \"The maximum size an array Quantity can be before its LaTeX \"\r\n"]
[235.943017, "o", "        'representation for IPython gets \"summarized\" (meaning only the first '\r\n"]
[235.955347, "o", "        'and last few elements are shown with \"...\" between). Setting this to a '\r\n"]
[235.967676, "o", "        \"negative number means that the value will instead be whatever numpy \"\r\n"]
[235.980005, "o", "        \"gets from get_printoptions.\",\r\n"]
[235.992334, "o", "    )\r\n"]
[236.004663, "o", "\r\n"]
[236.016993, "o", "\r\n"]
[236.029322, "o", "conf = Conf()\r\n"]
[236.041651, "o", "\r\n"]
[236.05398, "o", "\r\n"]
[236.066309, "o", "class QuantityIterator:\r\n"]
[236.078638, "o", "    \"\"\"\r\n"]
[236.090968, "o", "    Flat iterator object to iterate over Quantities.\r\n"]
[236.103297, "o", "\r\n"]
[236.115626, "o", "    A `QuantityIterator` iterator is returned by ``q.flat`` for any Quantity\r\n"]
[236.127955, "o", "    ``q``.  It allows iterating over the array as if it were a 1-D array,\r\n"]
[236.140284, "o", "    either in a for-loop or by calling its `next` method.\r\n"]
[236.152613, "o", "\r\n"]
[236.164943, "o", "    Iteration is done in C-contiguous style, with the last index varying the\r\n"]
[236.177272, "o", "    fastest. The iterator can also be indexed using basic slicing or\r\n"]
[236.189601, "o", "    advanced indexing.\r\n"]
[236.20193, "o", "\r\n"]
[236.214259, "o", "    See Also\r\n"]
[236.226589, "o", "    --------\r\n"]
[236.238918, "o", "    Quantity.flatten : Returns a flattened copy of an array.\r\n"]
[236.251247, "o", "\r\n"]
[236.263576, "o", "    Notes\r\n"]
[236.275905, "o", "    -----\r\n"]
[236.288234, "o", "    `QuantityIterator` is inspired by `~numpy.ma.core.MaskedIterator`.  It\r\n"]
[236.300564, "o", "    is not exported by the `~astropy.units` module.  Instead of\r\n"]
[236.312893, "o", "    instantiating a `QuantityIterator` directly, use `Quantity.flat`.\r\n"]
[236.325222, "o", "    \"\"\"\r\n"]
[236.337551, "o", "\r\n"]
[236.34988, "o", "    def __init__(self, q):\r\n"]
[236.362209, "o", "        self._quantity = q\r\n"]
[236.374539, "o", "        self._dataiter = q.view(np.ndarray).flat\r\n"]
[236.386868, "o", "\r\n"]
[236.399197, "o", "    def __iter__(self):\r\n"]
[236.411526, "o", "        return self\r\n"]
[236.423855, "o", "\r\n"]
[236.436185, "o", "    def __getitem__(self, indx):\r\n"]
[236.448514, "o", "        out = self._dataiter.__getitem__(indx)\r\n"]
[236.460843, "o", "        # For single elements, ndarray.flat.__getitem__ returns scalars; these\r\n"]
[236.473172, "o", "        # need a new view as a Quantity.\r\n"]
[236.485501, "o", "        if isinstance(out, type(self._quantity)):\r\n"]
[236.49783, "o", "            return out\r\n"]
[236.51016, "o", "        else:\r\n"]
[236.522489, "o", "            return self._quantity._new_view(out)\r\n"]
[236.534818, "o", "\r\n"]
[236.547147, "o", "    def __setitem__(self, index, value):\r\n"]
[236.559476, "o", "        self._dataiter[index] = self._quantity._to_own_unit(value)\r\n"]
[236.571805, "o", "\r\n"]
[236.584135, "o", "    def __next__(self):\r\n"]
[236.596464, "o", "        \"\"\"\r\n"]
[236.608793, "o", "        Return the next value, or raise StopIteration.\r\n"]
[236.621122, "o", "        \"\"\"\r\n"]
[236.633451, "o", "        out = next(self._dataiter)\r\n"]
[236.645781, "o", "        # ndarray.flat._dataiter returns scalars, so need a view as a Quantity.\r\n"]
[236.65811, "o", "        return self._quantity._new_view(out)\r\n"]
[236.670439, "o", "\r\n"]
[236.682768, "o", "    next = __next__\r\n"]
[236.695097, "o", "\r\n"]
[236.707426, "o", "    def __len__(self):\r\n"]
[236.719756, "o", "        return len(self._dataiter)\r\n"]
[236.732085, "o", "\r\n"]
[236.744414, "o", "    # Properties and methods to match `numpy.ndarray.flatiter`\r\n"]
[236.756743, "o", "\r\n"]
[236.769072, "o", "    @property\r\n"]
[236.781401, "o", "    def base(self):\r\n"]
[236.793731, "o", "        \"\"\"A reference to the array that is iterated over.\"\"\"\r\n"]
[236.80606, "o", "        return self._quantity\r\n"]
[236.818389, "o", "\r\n"]
[236.830718, "o", "    @property\r\n"]
[236.843047, "o", "    def coords(self):\r\n"]
[236.855377, "o", "        \"\"\"An N-dimensional tuple of current coordinates.\"\"\"\r\n"]
[236.867706, "o", "        return self._dataiter.coords\r\n"]
[236.880035, "o", "\r\n"]
[236.892364, "o", "    @property\r\n"]
[236.904693, "o", "    def index(self):\r\n"]
[236.917022, "o", "        \"\"\"Current flat index into the array.\"\"\"\r\n"]
[236.929352, "o", "        return self._dataiter.index\r\n"]
[236.941681, "o", "\r\n"]
[236.95401, "o", "    def copy(self):\r\n"]
[236.966339, "o", "        \"\"\"Get a copy of the iterator as a 1-D array.\"\"\"\r\n"]
[236.978668, "o", "        return self._quantity.flatten()\r\n"]
[236.990998, "o", "\r\n"]
[237.003327, "o", "\r\n"]
[237.015656, "o", "class QuantityInfoBase(ParentDtypeInfo):\r\n"]
[237.027985, "o", "    # This is on a base class rather than QuantityInfo directly, so that\r\n"]
[237.040314, "o", "    # it can be used for EarthLocationInfo yet make clear that that class\r\n"]
[237.052643, "o", "    # should not be considered a typical Quantity subclass by Table.\r\n"]
[237.064973, "o", "    attrs_from_parent = {\"dtype\", \"unit\"}  # dtype and unit taken from parent\r\n"]
[237.077302, "o", "    _supports_indexing = True\r\n"]
[237.089631, "o", "\r\n"]
[237.10196, "o", "    @staticmethod\r\n"]
[237.114289, "o", "    def default_format(val):\r\n"]
[237.126618, "o", "        return f\"{val.value}\"\r\n"]
[237.138948, "o", "\r\n"]
[237.151277, "o", "    @staticmethod\r\n"]
[237.163606, "o", "    def possible_string_format_functions(format_):\r\n"]
[237.175935, "o", "        \"\"\"Iterate through possible string-derived format functions.\r\n"]
[237.188264, "o", "\r\n"]
[237.200594, "o", "        A string can either be a format specifier for the format built-in,\r\n"]
[237.212923, "o", "        a new-style format string, or an old-style format string.\r\n"]
[237.225252, "o", "\r\n"]
[237.237581, "o", "        This method is overridden in order to suppress printing the unit\r\n"]
[237.24991, "o", "        in each row since it is already at the top in the column header.\r\n"]
[237.262239, "o", "        \"\"\"\r\n"]
[237.274569, "o", "        yield lambda format_, val: format(val.value, format_)\r\n"]
[237.286898, "o", "        yield lambda format_, val: format_.format(val.value)\r\n"]
[237.299227, "o", "        yield lambda format_, val: format_ % val.value\r\n"]
[237.311556, "o", "\r\n"]
[237.323885, "o", "\r\n"]
[237.336214, "o", "class QuantityInfo(QuantityInfoBase):\r\n"]
[237.348544, "o", "    \"\"\"\r\n"]
[237.360873, "o", "    Container for meta information like name, description, format.  This is\r\n"]
[237.373202, "o", "    required when the object is used as a mixin column within a table, but can\r\n"]
[237.385531, "o", "    be used as a general way to store meta information.\r\n"]
[237.39786, "o", "    \"\"\"\r\n"]
[237.41019, "o", "\r\n"]
[237.422519, "o", "    _represent_as_dict_attrs = (\"value\", \"unit\")\r\n"]
[237.434848, "o", "    _construct_from_dict_args = [\"value\"]\r\n"]
[237.447177, "o", "    _represent_as_dict_primary_data = \"value\"\r\n"]
[237.459506, "o", "\r\n"]
[237.471835, "o", "    def new_like(self, cols, length, metadata_conflicts=\"warn\", name=None):\r\n"]
[237.484165, "o", "        \"\"\"\r\n"]
[237.496494, "o", "        Return a new Quantity instance which is consistent with the\r\n"]
[237.508823, "o", "        input ``cols`` and has ``length`` rows.\r\n"]
[237.521152, "o", "\r\n"]
[237.533481, "o", "        This is intended for creating an empty column object whose elements can\r\n"]
[237.54581, "o", "        be set in-place for table operations like join or vstack.\r\n"]
[237.55814, "o", "\r\n"]
[237.570469, "o", "        Parameters\r\n"]
[237.582798, "o", "        ----------\r\n"]
[237.595127, "o", "        cols : list\r\n"]
[237.607456, "o", "            List of input columns\r\n"]
[237.619786, "o", "        length : int\r\n"]
[237.632115, "o", "            Length of the output column object\r\n"]
[237.644444, "o", "        metadata_conflicts : str ('warn'|'error'|'silent')\r\n"]
[237.656773, "o", "            How to handle metadata conflicts\r\n"]
[237.669102, "o", "        name : str\r\n"]
[237.681431, "o", "            Output column name\r\n"]
[237.693761, "o", "\r\n"]
[237.70609, "o", "        Returns\r\n"]
[237.718419, "o", "        -------\r\n"]
[237.730748, "o", "        col : `~astropy.units.Quantity` (or subclass)\r\n"]
[237.743077, "o", "            Empty instance of this class consistent with ``cols``\r\n"]
[237.755406, "o", "\r\n"]
[237.767736, "o", "        \"\"\"\r\n"]
[237.780065, "o", "        # Get merged info attributes like shape, dtype, format, description, etc.\r\n"]
[237.792394, "o", "        attrs = self.merge_cols_attributes(\r\n"]
[237.804723, "o", "            cols, metadata_conflicts, name, (\"meta\", \"format\", \"description\")\r\n"]
[237.817052, "o", "        )\r\n"]
[237.829382, "o", "\r\n"]
[237.841711, "o", "        # Make an empty quantity using the unit of the last one.\r\n"]
[237.85404, "o", "        shape = (length,) + attrs.pop(\"shape\")\r\n"]
[237.866369, "o", "        dtype = attrs.pop(\"dtype\")\r\n"]
[237.878698, "o", "        # Use zeros so we do not get problems for Quantity subclasses such\r\n"]
[237.891027, "o", "        # as Longitude and Latitude, which cannot take arbitrary values.\r\n"]
[237.903357, "o", "        data = np.zeros(shape=shape, dtype=dtype)\r\n"]
[237.915686, "o", "        # Get arguments needed to reconstruct class\r\n"]
[237.928015, "o", "        map = {\r\n"]
[237.940344, "o", "            key: (data if key == \"value\" else getattr(cols[-1], key))\r\n"]
[237.952673, "o", "            for key in self._represent_as_dict_attrs\r\n"]
[237.965002, "o", "        }\r\n"]
[237.977332, "o", "        map[\"copy\"] = COPY_IF_NEEDED\r\n"]
[237.989661, "o", "        out = self._construct_from_dict(map)\r\n"]
[238.00199, "o", "\r\n"]
[238.014319, "o", "        # Set remaining info attributes\r\n"]
[238.026648, "o", "        for attr, value in attrs.items():\r\n"]
[238.038978, "o", "            setattr(out.info, attr, value)\r\n"]
[238.051307, "o", "\r\n"]
[238.063636, "o", "        return out\r\n"]
[238.075965, "o", "\r\n"]
[238.088294, "o", "    def get_sortable_arrays(self):\r\n"]
[238.100623, "o", "        \"\"\"\r\n"]
[238.112953, "o", "        Return a list of arrays which can be lexically sorted to represent\r\n"]
[238.125282, "o", "        the order of the parent column.\r\n"]
[238.137611, "o", "\r\n"]
[238.14994, "o", "        For Quantity this is just the quantity itself.\r\n"]
[238.162269, "o", "\r\n"]
[238.174599, "o", "\r\n"]
[238.186928, "o", "        Returns\r\n"]
[238.199257, "o", "        -------\r\n"]
[238.211586, "o", "        arrays : list of ndarray\r\n"]
[238.223915, "o", "        \"\"\"\r\n"]
[238.236244, "o", "        return [self._parent]\r\n"]
[238.248574, "o", "\r\n"]
[238.260903, "o", "\r\n"]
[238.273232, "o", "class Quantity(np.ndarray):\r\n"]
[238.285561, "o", "    \"\"\"A `~astropy.units.Quantity` represents a number with some associated unit.\r\n"]
[238.29789, "o", "\r\n"]
[238.310219, "o", "    See also: https://docs.astropy.org/en/stable/units/quantity.html\r\n"]
[238.322549, "o", "\r\n"]
[238.334878, "o", "    Parameters\r\n"]
[238.347207, "o", "    ----------\r\n"]
[238.359536, "o", "    value : number, `~numpy.ndarray`, `~astropy.units.Quantity` (sequence), or str\r\n"]
[238.371865, "o", "        The numerical value of this quantity in the units given by unit.  If a\r\n"]
[238.384195, "o", "        `Quantity` or sequence of them (or any other valid object with a\r\n"]
[238.396524, "o", "        ``unit`` attribute), creates a new `Quantity` object, converting to\r\n"]
[238.408853, "o", "        `unit` units as needed.  If a string, it is converted to a number or\r\n"]
[238.421182, "o", "        `Quantity`, depending on whether a unit is present.\r\n"]
[238.433511, "o", "\r\n"]
[238.44584, "o", "    unit : unit-like\r\n"]
[238.45817, "o", "        An object that represents the unit associated with the input value.\r\n"]
[238.470499, "o", "        Must be an `~astropy.units.UnitBase` object or a string parseable by\r\n"]
[238.482828, "o", "        the :mod:`~astropy.units` package.\r\n"]
[238.495157, "o", "\r\n"]
[238.507486, "o", "    dtype : ~numpy.dtype, optional\r\n"]
[238.519815, "o", "        The dtype of the resulting Numpy array or scalar that will\r\n"]
[238.532145, "o", "        hold the value.  If not provided, it is determined from the input,\r\n"]
[238.544474, "o", "        except that any integer and (non-Quantity) object inputs are converted\r\n"]
[238.556803, "o", "        to float by default.\r\n"]
[238.569132, "o", "        If `None`, the normal `numpy.dtype` introspection is used, e.g.\r\n"]
[238.581461, "o", "        preventing upcasting of integers.\r\n"]
[238.593791, "o", "\r\n"]
[238.60612, "o", "    copy : bool, optional\r\n"]
[238.618449, "o", "        If `True` (default), then the value is copied.  Otherwise, a copy will\r\n"]
[238.630778, "o", "        only be made if ``__array__`` returns a copy, if value is a nested\r\n"]
[238.643107, "o", "        sequence, or if a copy is needed to satisfy an explicitly given\r\n"]
[238.655436, "o", "        ``dtype``.  (The `False` option is intended mostly for internal use,\r\n"]
[238.667766, "o", "        to speed up initialization where a copy is known to have been made.\r\n"]
[238.680095, "o", "        Use with care.)\r\n"]
[238.692424, "o", "\r\n"]
[238.704753, "o", "    order : {'C', 'F', 'A'}, optional\r\n"]
[238.717082, "o", "        Specify the order of the array.  As in `~numpy.array`.  This parameter\r\n"]
[238.729411, "o", "        is ignored if the input is a `Quantity` and ``copy=False``.\r\n"]
[238.741741, "o", "\r\n"]
[238.75407, "o", "    subok : bool, optional\r\n"]
[238.766399, "o", "        If `False` (default), the returned array will be forced to be a\r\n"]
[238.778728, "o", "        `Quantity`.  Otherwise, `Quantity` subclasses will be passed through,\r\n"]
[238.791057, "o", "        or a subclass appropriate for the unit will be used (such as\r\n"]
[238.803387, "o", "        `~astropy.units.Dex` for ``u.dex(u.AA)``).\r\n"]
[238.815716, "o", "\r\n"]
[238.828045, "o", "    ndmin : int, optional\r\n"]
[238.840374, "o", "        Specifies the minimum number of dimensions that the resulting array\r\n"]
[238.852703, "o", "        should have.  Ones will be prepended to the shape as needed to meet\r\n"]
[238.865032, "o", "        this requirement.  This parameter is ignored if the input is a\r\n"]
[238.877362, "o", "        `Quantity` and ``copy=False``.\r\n"]
[238.889691, "o", "\r\n"]
[238.90202, "o", "    Raises\r\n"]
[238.914349, "o", "    ------\r\n"]
[238.926678, "o", "    TypeError\r\n"]
[238.939007, "o", "        If the value provided is not a Python numeric type.\r\n"]
[238.951337, "o", "    TypeError\r\n"]
[238.963666, "o", "        If the unit provided is not either a :class:`~astropy.units.Unit`\r\n"]
[238.975995, "o", "        object or a parseable string unit.\r\n"]
[238.988324, "o", "\r\n"]
[239.000653, "o", "    Notes\r\n"]
[239.012983, "o", "    -----\r\n"]
[239.025312, "o", "    Quantities can also be created by multiplying a number or array with a\r\n"]
[239.037641, "o", "    :class:`~astropy.units.Unit`. See https://docs.astropy.org/en/latest/units/\r\n"]
[239.04997, "o", "\r\n"]
[239.062299, "o", "    Unless the ``dtype`` argument is explicitly specified, integer\r\n"]
[239.074628, "o", "    or (non-Quantity) object inputs are converted to `float` by default.\r\n"]
[239.086958, "o", "    \"\"\"\r\n"]
[239.099287, "o", "\r\n"]
[239.111616, "o", "    # Need to set a class-level default for _equivalencies, or\r\n"]
[239.123945, "o", "    # Constants can not initialize properly\r\n"]
[239.136274, "o", "    _equivalencies = []\r\n"]
[239.148603, "o", "\r\n"]
[239.160933, "o", "    # Default unit for initialization; can be overridden by subclasses,\r\n"]
[239.173262, "o", "    # possibly to `None` to indicate there is no default unit.\r\n"]
[239.185591, "o", "    _default_unit = dimensionless_unscaled\r\n"]
[239.19792, "o", "\r\n"]
[239.210249, "o", "    # Ensures views have an undefined unit.\r\n"]
[239.222579, "o", "    _unit = None\r\n"]
[239.234908, "o", "\r\n"]
[239.247237, "o", "    __array_priority__ = 10000\r\n"]
[239.259566, "o", "\r\n"]
[239.271895, "o", "    def __class_getitem__(cls, unit_shape_dtype):\r\n"]
[239.284224, "o", "        \"\"\"Quantity Type Hints.\r\n"]
[239.296554, "o", "\r\n"]
[239.308883, "o", "        Unit-aware type hints are ``Annotated`` objects that encode the class,\r\n"]
[239.321212, "o", "        the unit, and possibly shape and dtype information, depending on the\r\n"]
[239.333541, "o", "        python and :mod:`numpy` versions.\r\n"]
[239.34587, "o", "\r\n"]
[239.3582, "o", "        Schematically, ``Annotated[cls[shape, dtype], unit]``\r\n"]
[239.370529, "o", "\r\n"]
[239.382858, "o", "        As a classmethod, the type is the class, ie ``Quantity``\r\n"]
[239.395187, "o", "        produces an ``Annotated[Quantity, ...]`` while a subclass\r\n"]
[239.407516, "o", "        like :class:`~astropy.coordinates.Angle` returns\r\n"]
[239.419845, "o", "        ``Annotated[Angle, ...]``.\r\n"]
[239.432175, "o", "\r\n"]
[239.444504, "o", "        Parameters\r\n"]
[239.456833, "o", "        ----------\r\n"]
[239.469162, "o", "        unit_shape_dtype : :class:`~astropy.units.UnitBase`, str, `~astropy.units.PhysicalType`, or tuple\r\n"]
[239.481491, "o", "            Unit specification, can be the physical type (ie str or class).\r\n"]
[239.49382, "o", "            If tuple, then the first element is the unit specification\r\n"]
[239.50615, "o", "            and all other elements are for `numpy.ndarray` type annotations.\r\n"]
[239.518479, "o", "            Whether they are included depends on the python and :mod:`numpy`\r\n"]
[239.530808, "o", "            versions.\r\n"]
[239.543137, "o", "\r\n"]
[239.555466, "o", "        Returns\r\n"]
[239.567796, "o", "        -------\r\n"]
[239.580125, "o", "        `typing.Annotated`, `astropy.units.Unit`, or `astropy.units.PhysicalType`\r\n"]
[239.592454, "o", "            Return type in this preference order:\r\n"]
[239.604783, "o", "            * `typing.Annotated`\r\n"]
[239.617112, "o", "            * `astropy.units.Unit` or `astropy.units.PhysicalType`\r\n"]
[239.629441, "o", "\r\n"]
[239.641771, "o", "        Raises\r\n"]
[239.6541, "o", "        ------\r\n"]
[239.666429, "o", "        TypeError\r\n"]
[239.678758, "o", "            If the unit/physical_type annotation is not Unit-like or\r\n"]
[239.691087, "o", "            PhysicalType-like.\r\n"]
[239.703416, "o", "\r\n"]
[239.715746, "o", "        Examples\r\n"]
[239.728075, "o", "        --------\r\n"]
[239.740404, "o", "        Create a unit-aware Quantity type annotation\r\n"]
[239.752733, "o", "\r\n"]
[239.765062, "o", "            >>> Quantity[Unit(\"s\")]\r\n"]
[239.777392, "o", "            Annotated[Quantity, Unit(\"s\")]\r\n"]
[239.789721, "o", "\r\n"]
[239.80205, "o", "        See Also\r\n"]
[239.814379, "o", "        --------\r\n"]
[239.826708, "o", "        `~astropy.units.quantity_input`\r\n"]
[239.839037, "o", "            Use annotations for unit checks on function arguments and results.\r\n"]
[239.851367, "o", "\r\n"]
[239.863696, "o", "        Notes\r\n"]
[239.876025, "o", "        -----\r\n"]
[239.888354, "o", "        |Quantity| types are also static-type compatible.\r\n"]
[239.900683, "o", "        \"\"\"\r\n"]
[239.913012, "o", "        from typing import Annotated\r\n"]
[239.925342, "o", "\r\n"]
[239.937671, "o", "        # process whether [unit] or [unit, shape, ptype]\r\n"]
[240.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[240.002, "i", "sed -n '400,1200p' astropy/units/quantity.py\r"]
[240.004, "o", "sed -n '400,1200p' astropy/units/quantity.py\r\n"]
[240.016, "o", "\u001b[?2004l\r\n"]
[240.026, "o", "        if isinstance(unit_shape_dtype, tuple):  # unit, shape, dtype\r\n"]
[240.036, "o", "            target = unit_shape_dtype[0]\r\n"]
[240.046, "o", "            shape_dtype = unit_shape_dtype[1:]\r\n"]
[240.056, "o", "        else:  # just unit\r\n"]
[240.066, "o", "            target = unit_shape_dtype\r\n"]
[240.076, "o", "            shape_dtype = ()\r\n"]
[240.086, "o", "\r\n"]
[240.096, "o", "        # Allowed unit/physical types. Errors if neither.\r\n"]
[240.106, "o", "        try:\r\n"]
[240.116, "o", "            unit = Unit(target)\r\n"]
[240.126, "o", "        except (TypeError, ValueError):\r\n"]
[240.136, "o", "            from astropy.units.physical import get_physical_type\r\n"]
[240.146, "o", "\r\n"]
[240.156, "o", "            try:\r\n"]
[240.166, "o", "                unit = get_physical_type(target)\r\n"]
[240.176, "o", "            except (TypeError, ValueError, KeyError):  # KeyError for Enum\r\n"]
[240.186, "o", "                raise TypeError(\r\n"]
[240.196, "o", "                    \"unit annotation is not a Unit or PhysicalType\"\r\n"]
[240.206, "o", "                ) from None\r\n"]
[240.216, "o", "\r\n"]
[240.226, "o", "        # Quantity does not (yet) properly extend the NumPy generics types,\r\n"]
[240.236, "o", "        # introduced in numpy v1.22+, instead just including the unit info as\r\n"]
[240.246, "o", "        # metadata using Annotated.\r\n"]
[240.256, "o", "        # TODO: ensure we do interact with NDArray.__class_getitem__.\r\n"]
[240.266, "o", "        return Annotated[cls, unit]\r\n"]
[240.276, "o", "\r\n"]
[240.286, "o", "    def __new__(\r\n"]
[240.296, "o", "        cls: type[Self],\r\n"]
[240.306, "o", "        value: QuantityLike,\r\n"]
[240.316, "o", "        unit=None,\r\n"]
[240.326, "o", "        dtype=np.inexact,\r\n"]
[240.336, "o", "        copy=True,\r\n"]
[240.346, "o", "        order=None,\r\n"]
[240.356, "o", "        subok=False,\r\n"]
[240.366, "o", "        ndmin=0,\r\n"]
[240.376, "o", "    ) -> Self:\r\n"]
[240.386, "o", "        if unit is not None:\r\n"]
[240.396, "o", "            # convert unit first, to avoid multiple string->unit conversions\r\n"]
[240.406, "o", "            unit = Unit(unit)\r\n"]
[240.416, "o", "\r\n"]
[240.426, "o", "        # inexact -> upcast to float dtype\r\n"]
[240.436, "o", "        float_default = dtype is np.inexact\r\n"]
[240.446, "o", "        if float_default:\r\n"]
[240.456, "o", "            dtype = None\r\n"]
[240.466, "o", "\r\n"]
[240.476, "o", "        # optimize speed for Quantity with no dtype given, copy=COPY_IF_NEEDED\r\n"]
[240.486, "o", "        if isinstance(value, Quantity):\r\n"]
[240.496, "o", "            if unit is not None and unit is not value.unit:\r\n"]
[240.506, "o", "                value = value.to(unit)\r\n"]
[240.516, "o", "                # the above already makes a copy (with float dtype)\r\n"]
[240.526, "o", "                copy = COPY_IF_NEEDED\r\n"]
[240.536, "o", "\r\n"]
[240.546, "o", "            if type(value) is not cls and not (subok and isinstance(value, cls)):\r\n"]
[240.556, "o", "                value = value.view(cls)\r\n"]
[240.566, "o", "\r\n"]
[240.576, "o", "            if float_default and value.dtype.kind in \"iu\":\r\n"]
[240.586, "o", "                dtype = float\r\n"]
[240.596, "o", "\r\n"]
[240.606, "o", "            return np.array(\r\n"]
[240.616, "o", "                value, dtype=dtype, copy=copy, order=order, subok=True, ndmin=ndmin\r\n"]
[240.626, "o", "            )\r\n"]
[240.636, "o", "\r\n"]
[240.646, "o", "        # Maybe str, or list/tuple of Quantity? If so, this may set value_unit.\r\n"]
[240.656, "o", "        # To ensure array remains fast, we short-circuit it.\r\n"]
[240.666, "o", "        value_unit = None\r\n"]
[240.676, "o", "        if not isinstance(value, np.ndarray):\r\n"]
[240.686, "o", "            if isinstance(value, str):\r\n"]
[240.696, "o", "                # The first part of the regex string matches any integer/float;\r\n"]
[240.706, "o", "                # the second parts adds possible trailing .+-, which will break\r\n"]
[240.716, "o", "                # the float function below and ensure things like 1.2.3deg\r\n"]
[240.726, "o", "                # will not work.\r\n"]
[240.736, "o", "                pattern = (\r\n"]
[240.746, "o", "                    r\"\\s*[+-]?\"\r\n"]
[240.756, "o", "                    r\"((\\d+\\.?\\d*)|(\\.\\d+)|([nN][aA][nN])|\"\r\n"]
[240.766, "o", "                    r\"([iI][nN][fF]([iI][nN][iI][tT][yY]){0,1}))\"\r\n"]
[240.776, "o", "                    r\"([eE][+-]?\\d+)?\"\r\n"]
[240.786, "o", "                    r\"[.+-]?\"\r\n"]
[240.796, "o", "                )\r\n"]
[240.806, "o", "\r\n"]
[240.816, "o", "                v = re.match(pattern, value)\r\n"]
[240.826, "o", "                unit_string = None\r\n"]
[240.836, "o", "                try:\r\n"]
[240.846, "o", "                    value = float(v.group())\r\n"]
[240.856, "o", "\r\n"]
[240.866, "o", "                except Exception:\r\n"]
[240.876, "o", "                    raise TypeError(\r\n"]
[240.886, "o", "                        f'Cannot parse \"{value}\" as a {cls.__name__}. It does not '\r\n"]
[240.896, "o", "                        \"start with a number.\"\r\n"]
[240.906, "o", "                    )\r\n"]
[240.916, "o", "\r\n"]
[240.926, "o", "                unit_string = v.string[v.end() :].strip()\r\n"]
[240.936, "o", "                if unit_string:\r\n"]
[240.946, "o", "                    value_unit = Unit(unit_string)\r\n"]
[240.956, "o", "                    if unit is None:\r\n"]
[240.966, "o", "                        unit = value_unit  # signal no conversion needed below.\r\n"]
[240.976, "o", "\r\n"]
[240.986, "o", "            elif isinstance(value, (list, tuple)) and len(value) > 0:\r\n"]
[240.996, "o", "                if all(isinstance(v, Quantity) for v in value):\r\n"]
[241.006, "o", "                    # If a list/tuple contains only quantities, stack them,\r\n"]
[241.016, "o", "                    # which also converts them to the same unit.\r\n"]
[241.026, "o", "                    value = np.stack(value)\r\n"]
[241.036, "o", "                    copy = False\r\n"]
[241.046, "o", "\r\n"]
[241.056, "o", "                elif (\r\n"]
[241.066, "o", "                    dtype is None\r\n"]
[241.076, "o", "                    and not hasattr(value, \"dtype\")\r\n"]
[241.086, "o", "                    and isinstance(unit, StructuredUnit)\r\n"]
[241.096, "o", "                ):\r\n"]
[241.106, "o", "                    # Special case for list/tuple of values and a structured unit:\r\n"]
[241.116, "o", "                    # ``np.array(value, dtype=None)`` would treat tuples as lower\r\n"]
[241.126, "o", "                    # levels of the array, rather than as elements of a structured\r\n"]
[241.136, "o", "                    # array, so we use the structure of the unit to help infer the\r\n"]
[241.146, "o", "                    # structured dtype of the value.\r\n"]
[241.156, "o", "                    dtype = unit._recursively_get_dtype(value)\r\n"]
[241.166, "o", "\r\n"]
[241.176, "o", "        using_default_unit = False\r\n"]
[241.186, "o", "        if value_unit is None:\r\n"]
[241.196, "o", "            # If the value has a `unit` attribute and if not None\r\n"]
[241.206, "o", "            # (for Columns with uninitialized unit), treat it like a quantity.\r\n"]
[241.216, "o", "            value_unit = getattr(value, \"unit\", None)\r\n"]
[241.226, "o", "            if value_unit is None:\r\n"]
[241.236, "o", "                # Default to dimensionless for no (initialized) unit attribute.\r\n"]
[241.246, "o", "                if unit is None:\r\n"]
[241.256, "o", "                    using_default_unit = True\r\n"]
[241.266, "o", "                    unit = cls._default_unit\r\n"]
[241.276, "o", "                value_unit = unit  # signal below that no conversion is needed\r\n"]
[241.286, "o", "            else:\r\n"]
[241.296, "o", "                try:\r\n"]
[241.306, "o", "                    value_unit = Unit(value_unit)\r\n"]
[241.316, "o", "                except Exception as exc:\r\n"]
[241.326, "o", "                    raise TypeError(\r\n"]
[241.336, "o", "                        f\"The unit attribute {value.unit!r} of the input could \"\r\n"]
[241.346, "o", "                        \"not be parsed as an astropy Unit.\"\r\n"]
[241.356, "o", "                    ) from exc\r\n"]
[241.366, "o", "\r\n"]
[241.376, "o", "                if unit is None:\r\n"]
[241.386, "o", "                    unit = value_unit\r\n"]
[241.396, "o", "                elif unit is not value_unit:\r\n"]
[241.406, "o", "                    copy = COPY_IF_NEEDED  # copy will be made in conversion at end\r\n"]
[241.416, "o", "\r\n"]
[241.426, "o", "        value = np.array(\r\n"]
[241.436, "o", "            value, dtype=dtype, copy=copy, order=order, subok=True, ndmin=ndmin\r\n"]
[241.446, "o", "        )\r\n"]
[241.456, "o", "\r\n"]
[241.466, "o", "        # For no-user-input unit, make sure the constructed unit matches the\r\n"]
[241.476, "o", "        # structure of the data.\r\n"]
[241.486, "o", "        if using_default_unit and value.dtype.names is not None:\r\n"]
[241.496, "o", "            unit = value_unit = _structured_unit_like_dtype(value_unit, value.dtype)\r\n"]
[241.506, "o", "\r\n"]
[241.516, "o", "        # check that array contains numbers or long int objects\r\n"]
[241.526, "o", "        if value.dtype.kind in \"OSU\" and not (\r\n"]
[241.536, "o", "            value.dtype.kind == \"O\" and isinstance(value.item(0), numbers.Number)\r\n"]
[241.546, "o", "        ):\r\n"]
[241.556, "o", "            raise TypeError(\"The value must be a valid Python or Numpy numeric type.\")\r\n"]
[241.566, "o", "\r\n"]
[241.576, "o", "        # by default, cast any integer, boolean, etc., to float\r\n"]
[241.586, "o", "        if float_default and value.dtype.kind in \"iuO\":\r\n"]
[241.596, "o", "            value = value.astype(float)\r\n"]
[241.606, "o", "\r\n"]
[241.616, "o", "        # if we allow subclasses, allow a class from the unit.\r\n"]
[241.626, "o", "        if subok:\r\n"]
[241.636, "o", "            qcls = getattr(unit, \"_quantity_class\", cls)\r\n"]
[241.646, "o", "            if issubclass(qcls, cls):\r\n"]
[241.656, "o", "                cls = qcls\r\n"]
[241.666, "o", "\r\n"]
[241.676, "o", "        value = value.view(cls)\r\n"]
[241.686, "o", "        value._set_unit(value_unit)\r\n"]
[241.696, "o", "        if unit is value_unit:\r\n"]
[241.706, "o", "            return value\r\n"]
[241.716, "o", "        else:\r\n"]
[241.726, "o", "            # here we had non-Quantity input that had a \"unit\" attribute\r\n"]
[241.736, "o", "            # with a unit different from the desired one.  So, convert.\r\n"]
[241.746, "o", "            return value.to(unit)\r\n"]
[241.756, "o", "\r\n"]
[241.766, "o", "    def __array_finalize__(self, obj):\r\n"]
[241.776, "o", "        # Check whether super().__array_finalize should be called\r\n"]
[241.786, "o", "        # (sadly, ndarray.__array_finalize__ is None; we cannot be sure\r\n"]
[241.796, "o", "        # what is above us).\r\n"]
[241.806, "o", "        super_array_finalize = super().__array_finalize__\r\n"]
[241.816, "o", "        if super_array_finalize is not None:\r\n"]
[241.826, "o", "            super_array_finalize(obj)\r\n"]
[241.836, "o", "\r\n"]
[241.846, "o", "        # If we're a new object or viewing an ndarray, nothing has to be done.\r\n"]
[241.856, "o", "        if obj is None or obj.__class__ is np.ndarray:\r\n"]
[241.866, "o", "            return\r\n"]
[241.876, "o", "\r\n"]
[241.886, "o", "        # Copy over the unit and possibly info.  Note that the only way the\r\n"]
[241.896, "o", "        # unit can already be set is if one enters via _new_view(), where the\r\n"]
[241.906, "o", "        # unit is often different from that of self, and where propagation of\r\n"]
[241.916, "o", "        # info is not always desirable.\r\n"]
[241.926, "o", "        if self._unit is None:\r\n"]
[241.936, "o", "            unit = getattr(obj, \"_unit\", None)\r\n"]
[241.946, "o", "            if unit is not None:\r\n"]
[241.956, "o", "                self._set_unit(unit)\r\n"]
[241.966, "o", "\r\n"]
[241.976, "o", "            # Copy info if the original had `info` defined.  Because of the way the\r\n"]
[241.986, "o", "            # DataInfo works, `'info' in obj.__dict__` is False until the\r\n"]
[241.996, "o", "            # `info` attribute is accessed or set.\r\n"]
[242.006, "o", "            if \"info\" in obj.__dict__:\r\n"]
[242.016, "o", "                self.info = obj.info\r\n"]
[242.026, "o", "\r\n"]
[242.036, "o", "    def __array_wrap__(self, obj, context=None, return_scalar=False):\r\n"]
[242.046, "o", "        if context is None:\r\n"]
[242.056, "o", "            # Methods like .squeeze() created a new `ndarray` and then call\r\n"]
[242.066, "o", "            # __array_wrap__ to turn the array into self's subclass.\r\n"]
[242.076, "o", "            return self._new_view(obj)\r\n"]
[242.086, "o", "\r\n"]
[242.096, "o", "        raise NotImplementedError(\r\n"]
[242.106, "o", "            \"__array_wrap__ should not be used with a context any more since all \"\r\n"]
[242.116, "o", "            \"use should go through array_function. Please raise an issue on \"\r\n"]
[242.126, "o", "            \"https://github.com/astropy/astropy\"\r\n"]
[242.136, "o", "        )\r\n"]
[242.146, "o", "\r\n"]
[242.156, "o", "    def __array_ufunc__(self, function, method, *inputs, **kwargs):\r\n"]
[242.166, "o", "        \"\"\"Wrap numpy ufuncs, taking care of units.\r\n"]
[242.176, "o", "\r\n"]
[242.186, "o", "        Parameters\r\n"]
[242.196, "o", "        ----------\r\n"]
[242.206, "o", "        function : callable\r\n"]
[242.216, "o", "            ufunc to wrap.\r\n"]
[242.226, "o", "        method : str\r\n"]
[242.236, "o", "            Ufunc method: ``__call__``, ``at``, ``reduce``, etc.\r\n"]
[242.246, "o", "        inputs : tuple\r\n"]
[242.256, "o", "            Input arrays.\r\n"]
[242.266, "o", "        kwargs : keyword arguments\r\n"]
[242.276, "o", "            As passed on, with ``out`` containing possible quantity output.\r\n"]
[242.286, "o", "\r\n"]
[242.296, "o", "        Returns\r\n"]
[242.306, "o", "        -------\r\n"]
[242.316, "o", "        result : `~astropy.units.Quantity` or `NotImplemented`\r\n"]
[242.326, "o", "            Results of the ufunc, with the unit set properly.\r\n"]
[242.336, "o", "        \"\"\"\r\n"]
[242.346, "o", "        # Determine required conversion functions -- to bring the unit of the\r\n"]
[242.356, "o", "        # input to that expected (e.g., radian for np.sin), or to get\r\n"]
[242.366, "o", "        # consistent units between two inputs (e.g., in np.add) --\r\n"]
[242.376, "o", "        # and the unit of the result (or tuple of units for nout > 1).\r\n"]
[242.386, "o", "        try:\r\n"]
[242.396, "o", "            converters, unit = converters_and_unit(function, method, *inputs)\r\n"]
[242.406, "o", "\r\n"]
[242.416, "o", "            out = kwargs.get(\"out\", None)\r\n"]
[242.426, "o", "            # Avoid loop back by turning any Quantity output into array views.\r\n"]
[242.436, "o", "            if out is not None:\r\n"]
[242.446, "o", "                # If pre-allocated output is used, check it is suitable.\r\n"]
[242.456, "o", "                # This also returns array view, to ensure we don't loop back.\r\n"]
[242.466, "o", "                if function.nout == 1:\r\n"]
[242.476, "o", "                    out = out[0]\r\n"]
[242.486, "o", "                out_array = check_output(out, unit, inputs, function=function)\r\n"]
[242.496, "o", "                # Ensure output argument remains a tuple.\r\n"]
[242.506, "o", "                kwargs[\"out\"] = (out_array,) if function.nout == 1 else out_array\r\n"]
[242.516, "o", "\r\n"]
[242.526, "o", "            if method == \"reduce\" and \"initial\" in kwargs and unit is not None:\r\n"]
[242.536, "o", "                # Special-case for initial argument for reductions like\r\n"]
[242.546, "o", "                # np.add.reduce.  This should be converted to the output unit as\r\n"]
[242.556, "o", "                # well, which is typically the same as the input unit (but can\r\n"]
[242.566, "o", "                # in principle be different: unitless for np.equal, radian\r\n"]
[242.576, "o", "                # for np.arctan2, though those are not necessarily useful!)\r\n"]
[242.586, "o", "                kwargs[\"initial\"] = self._to_own_unit(\r\n"]
[242.596, "o", "                    kwargs[\"initial\"], check_precision=False, unit=unit\r\n"]
[242.606, "o", "                )\r\n"]
[242.616, "o", "\r\n"]
[242.626, "o", "            # Same for inputs, but here also convert if necessary.\r\n"]
[242.636, "o", "            arrays = []\r\n"]
[242.646, "o", "            for input_, converter in zip(inputs, converters):\r\n"]
[242.656, "o", "                input_ = getattr(input_, \"value\", input_)\r\n"]
[242.666, "o", "                arrays.append(converter(input_) if converter else input_)\r\n"]
[242.676, "o", "\r\n"]
[242.686, "o", "            # Call our superclass's __array_ufunc__\r\n"]
[242.696, "o", "            result = super().__array_ufunc__(function, method, *arrays, **kwargs)\r\n"]
[242.706, "o", "            # If unit is None, a plain array is expected (e.g., comparisons), which\r\n"]
[242.716, "o", "            # means we're done.\r\n"]
[242.726, "o", "            # We're also done if the result was None (for method 'at') or\r\n"]
[242.736, "o", "            # NotImplemented, which can happen if other inputs/outputs override\r\n"]
[242.746, "o", "            # __array_ufunc__; hopefully, they can then deal with us.\r\n"]
[242.756, "o", "            if unit is None or result is None or result is NotImplemented:\r\n"]
[242.766, "o", "                return result\r\n"]
[242.776, "o", "\r\n"]
[242.786, "o", "            return self._result_as_quantity(result, unit, out)\r\n"]
[242.796, "o", "\r\n"]
[242.806, "o", "        except (TypeError, ValueError, AttributeError) as e:\r\n"]
[242.816, "o", "            out_normalized = kwargs.get(\"out\", ())\r\n"]
[242.826, "o", "            inputs_and_outputs = inputs + out_normalized\r\n"]
[242.836, "o", "            ignored_ufunc = (\r\n"]
[242.846, "o", "                None,\r\n"]
[242.856, "o", "                np.ndarray.__array_ufunc__,\r\n"]
[242.866, "o", "                type(self).__array_ufunc__,\r\n"]
[242.876, "o", "            )\r\n"]
[242.886, "o", "            if not all(\r\n"]
[242.896, "o", "                getattr(type(io), \"__array_ufunc__\", None) in ignored_ufunc\r\n"]
[242.906, "o", "                for io in inputs_and_outputs\r\n"]
[242.916, "o", "            ):\r\n"]
[242.926, "o", "                return NotImplemented\r\n"]
[242.936, "o", "            else:\r\n"]
[242.946, "o", "                raise e\r\n"]
[242.956, "o", "\r\n"]
[242.966, "o", "    def _result_as_quantity(self, result, unit, out):\r\n"]
[242.976, "o", "        \"\"\"Turn result into a quantity with the given unit.\r\n"]
[242.986, "o", "\r\n"]
[242.996, "o", "        If no output is given, it will take a view of the array as a quantity,\r\n"]
[243.006, "o", "        and set the unit.  If output is given, those should be quantity views\r\n"]
[243.016, "o", "        of the result arrays, and the function will just set the unit.\r\n"]
[243.026, "o", "\r\n"]
[243.036, "o", "        Parameters\r\n"]
[243.046, "o", "        ----------\r\n"]
[243.056, "o", "        result : ndarray or tuple thereof\r\n"]
[243.066, "o", "            Array(s) which need to be turned into quantity.\r\n"]
[243.076, "o", "        unit : `~astropy.units.Unit`\r\n"]
[243.086, "o", "            Unit for the quantities to be returned (or `None` if the result\r\n"]
[243.096, "o", "            should not be a quantity).  Should be tuple if result is a tuple.\r\n"]
[243.106, "o", "        out : `~astropy.units.Quantity` or None\r\n"]
[243.116, "o", "            Possible output quantity. Should be `None` or a tuple if result\r\n"]
[243.126, "o", "            is a tuple.\r\n"]
[243.136, "o", "\r\n"]
[243.146, "o", "        Returns\r\n"]
[243.156, "o", "        -------\r\n"]
[243.166, "o", "        out : `~astropy.units.Quantity`\r\n"]
[243.176, "o", "           With units set.\r\n"]
[243.186, "o", "        \"\"\"\r\n"]
[243.196, "o", "        if isinstance(result, (tuple, list)):\r\n"]
[243.206, "o", "            if out is None:\r\n"]
[243.216, "o", "                out = (None,) * len(result)\r\n"]
[243.226, "o", "            # Some np.linalg functions return namedtuple, which is handy to access\r\n"]
[243.236, "o", "            # elements by name, but cannot be directly initialized with an iterator.\r\n"]
[243.246, "o", "            result_cls = getattr(result, \"_make\", result.__class__)\r\n"]
[243.256, "o", "            return result_cls(\r\n"]
[243.266, "o", "                self._result_as_quantity(result_, unit_, out_)\r\n"]
[243.276, "o", "                for (result_, unit_, out_) in zip(result, unit, out)\r\n"]
[243.286, "o", "            )\r\n"]
[243.296, "o", "\r\n"]
[243.306, "o", "        if out is None:\r\n"]
[243.316, "o", "            # View the result array as a Quantity with the proper unit.\r\n"]
[243.326, "o", "            return (\r\n"]
[243.336, "o", "                result\r\n"]
[243.346, "o", "                if unit is None\r\n"]
[243.356, "o", "                else self._new_view(result, unit, propagate_info=False)\r\n"]
[243.366, "o", "            )\r\n"]
[243.376, "o", "\r\n"]
[243.386, "o", "        elif isinstance(out, Quantity):\r\n"]
[243.396, "o", "            # For given Quantity output, just set the unit. We know the unit\r\n"]
[243.406, "o", "            # is not None and the output is of the correct Quantity subclass,\r\n"]
[243.416, "o", "            # as it was passed through check_output.\r\n"]
[243.426, "o", "            # (We cannot do this unconditionally, though, since it is possible\r\n"]
[243.436, "o", "            # for out to be ndarray and the unit to be dimensionless.)\r\n"]
[243.446, "o", "            out._set_unit(unit)\r\n"]
[243.456, "o", "\r\n"]
[243.466, "o", "        return out\r\n"]
[243.476, "o", "\r\n"]
[243.486, "o", "    def __quantity_subclass__(self, unit):\r\n"]
[243.496, "o", "        \"\"\"\r\n"]
[243.506, "o", "        Overridden by subclasses to change what kind of view is\r\n"]
[243.516, "o", "        created based on the output unit of an operation.\r\n"]
[243.526, "o", "\r\n"]
[243.536, "o", "        Parameters\r\n"]
[243.546, "o", "        ----------\r\n"]
[243.556, "o", "        unit : UnitBase\r\n"]
[243.566, "o", "            The unit for which the appropriate class should be returned\r\n"]
[243.576, "o", "\r\n"]
[243.586, "o", "        Returns\r\n"]
[243.596, "o", "        -------\r\n"]
[243.606, "o", "        tuple :\r\n"]
[243.616, "o", "            - `~astropy.units.Quantity` subclass\r\n"]
[243.626, "o", "            - bool: True if subclasses of the given class are ok\r\n"]
[243.636, "o", "        \"\"\"\r\n"]
[243.646, "o", "        return Quantity, True\r\n"]
[243.656, "o", "\r\n"]
[243.666, "o", "    def _new_view(self, obj=None, unit=None, propagate_info=True):\r\n"]
[243.676, "o", "        \"\"\"Create a Quantity view of some array-like input, and set the unit.\r\n"]
[243.686, "o", "\r\n"]
[243.696, "o", "        By default, return a view of ``obj`` of the same class as ``self`` and\r\n"]
[243.706, "o", "        with the same unit.  Subclasses can override the type of class for a\r\n"]
[243.716, "o", "        given unit using ``__quantity_subclass__``, and can ensure properties\r\n"]
[243.726, "o", "        other than the unit are copied using ``__array_finalize__``.\r\n"]
[243.736, "o", "\r\n"]
[243.746, "o", "        If the given unit defines a ``_quantity_class`` of which ``self``\r\n"]
[243.756, "o", "        is not an instance, a view using this class is taken.\r\n"]
[243.766, "o", "\r\n"]
[243.776, "o", "        Parameters\r\n"]
[243.786, "o", "        ----------\r\n"]
[243.796, "o", "        obj : ndarray or scalar, optional\r\n"]
[243.806, "o", "            The array to create a view of.  If obj is a numpy or python scalar,\r\n"]
[243.816, "o", "            it will be converted to an array scalar.  By default, ``self``\r\n"]
[243.826, "o", "            is converted.\r\n"]
[243.836, "o", "\r\n"]
[243.846, "o", "        unit : unit-like, optional\r\n"]
[243.856, "o", "            The unit of the resulting object.  It is used to select a\r\n"]
[243.866, "o", "            subclass, and explicitly assigned to the view if given.\r\n"]
[243.876, "o", "            If not given, the subclass and unit will be that of ``self``.\r\n"]
[243.886, "o", "\r\n"]
[243.896, "o", "        propagate_info : bool, optional\r\n"]
[243.906, "o", "            Whether to transfer ``info`` if present.  Default: `True`, as\r\n"]
[243.916, "o", "            appropriate for, e.g., unit conversions or slicing, where the\r\n"]
[243.926, "o", "            nature of the object does not change.\r\n"]
[243.936, "o", "\r\n"]
[243.946, "o", "        Returns\r\n"]
[243.956, "o", "        -------\r\n"]
[243.966, "o", "        view : `~astropy.units.Quantity` subclass\r\n"]
[243.976, "o", "\r\n"]
[243.986, "o", "        \"\"\"\r\n"]
[243.996, "o", "        # Determine the unit and quantity subclass that we need for the view.\r\n"]
[244.006, "o", "        if unit is None:\r\n"]
[244.016, "o", "            unit = self.unit\r\n"]
[244.026, "o", "            quantity_subclass = self.__class__\r\n"]
[244.036, "o", "        elif unit is self.unit and self.__class__ is Quantity:\r\n"]
[244.046, "o", "            # The second part is because we should not presume what other\r\n"]
[244.056, "o", "            # classes want to do for the same unit.  E.g., Constant will\r\n"]
[244.066, "o", "            # always want to fall back to Quantity, and relies on going\r\n"]
[244.076, "o", "            # through `__quantity_subclass__`.\r\n"]
[244.086, "o", "            quantity_subclass = Quantity\r\n"]
[244.096, "o", "        else:\r\n"]
[244.106, "o", "            unit = Unit(unit)\r\n"]
[244.116, "o", "            quantity_subclass = getattr(unit, \"_quantity_class\", Quantity)\r\n"]
[244.126, "o", "            if isinstance(self, quantity_subclass):\r\n"]
[244.136, "o", "                quantity_subclass, subok = self.__quantity_subclass__(unit)\r\n"]
[244.146, "o", "                if subok:\r\n"]
[244.156, "o", "                    quantity_subclass = self.__class__\r\n"]
[244.166, "o", "\r\n"]
[244.176, "o", "        # We only want to propagate information from ``self`` to our new view,\r\n"]
[244.186, "o", "        # so obj should be a regular array.  By using ``np.array``, we also\r\n"]
[244.196, "o", "        # convert python and numpy scalars, which cannot be viewed as arrays\r\n"]
[244.206, "o", "        # and thus not as Quantity either, to zero-dimensional arrays.\r\n"]
[244.216, "o", "        # (These are turned back into scalar in `.value`)\r\n"]
[244.226, "o", "        # Note that for an ndarray input, the np.array call takes only double\r\n"]
[244.236, "o", "        # ``obj.__class is np.ndarray``. So, not worth special-casing.\r\n"]
[244.246, "o", "        if obj is None:\r\n"]
[244.256, "o", "            obj = self.view(np.ndarray)\r\n"]
[244.266, "o", "        else:\r\n"]
[244.276, "o", "            obj = np.array(obj, copy=COPY_IF_NEEDED, subok=True)\r\n"]
[244.286, "o", "\r\n"]
[244.296, "o", "        # Take the view, set the unit, and update possible other properties\r\n"]
[244.306, "o", "        # such as ``info``, ``wrap_angle`` in `Longitude`, etc.\r\n"]
[244.316, "o", "        view = obj.view(quantity_subclass)\r\n"]
[244.326, "o", "        view._set_unit(unit)\r\n"]
[244.336, "o", "        view.__array_finalize__(self)\r\n"]
[244.346, "o", "        if propagate_info and \"info\" in self.__dict__:\r\n"]
[244.356, "o", "            view.info = self.info\r\n"]
[244.366, "o", "        return view\r\n"]
[244.376, "o", "\r\n"]
[244.386, "o", "    def _set_unit(self, unit):\r\n"]
[244.396, "o", "        \"\"\"Set the unit.\r\n"]
[244.406, "o", "\r\n"]
[244.416, "o", "        This is used anywhere the unit is set or modified, i.e., in the\r\n"]
[244.426, "o", "        initializer, in ``__imul__`` and ``__itruediv__`` for in-place\r\n"]
[244.436, "o", "        multiplication and division by another unit, as well as in\r\n"]
[244.446, "o", "        ``__array_finalize__`` for wrapping up views.  For Quantity, it just\r\n"]
[244.456, "o", "        sets the unit, but subclasses can override it to check that, e.g.,\r\n"]
[244.466, "o", "        a unit is consistent.\r\n"]
[244.476, "o", "        \"\"\"\r\n"]
[244.486, "o", "        if not isinstance(unit, UnitBase):\r\n"]
[244.496, "o", "            if isinstance(self._unit, StructuredUnit) or isinstance(\r\n"]
[244.506, "o", "                unit, StructuredUnit\r\n"]
[244.516, "o", "            ):\r\n"]
[244.526, "o", "                unit = StructuredUnit(unit, self.dtype)\r\n"]
[244.536, "o", "            else:\r\n"]
[244.546, "o", "                # Trying to go through a string ensures that, e.g., Magnitudes with\r\n"]
[244.556, "o", "                # dimensionless physical unit become Quantity with units of mag.\r\n"]
[244.566, "o", "                unit = Unit(str(unit), parse_strict=\"silent\")\r\n"]
[244.576, "o", "                if not isinstance(unit, (UnitBase, StructuredUnit)):\r\n"]
[244.586, "o", "                    raise UnitTypeError(\r\n"]
[244.596, "o", "                        f\"{self.__class__.__name__} instances require normal units, \"\r\n"]
[244.606, "o", "                        f\"not {unit.__class__} instances.\"\r\n"]
[244.616, "o", "                    )\r\n"]
[244.626, "o", "\r\n"]
[244.636, "o", "        self._unit = unit\r\n"]
[244.646, "o", "\r\n"]
[244.656, "o", "    def __deepcopy__(self, memo):\r\n"]
[244.666, "o", "        # If we don't define this, ``copy.deepcopy(quantity)`` will\r\n"]
[244.676, "o", "        # return a bare Numpy array.\r\n"]
[244.686, "o", "        return self.copy()\r\n"]
[244.696, "o", "\r\n"]
[244.706, "o", "    def __reduce__(self):\r\n"]
[244.716, "o", "        # patch to pickle Quantity objects (ndarray subclasses), see\r\n"]
[244.726, "o", "        # http://www.mail-archive.com/numpy-discussion@scipy.org/msg02446.html\r\n"]
[244.736, "o", "\r\n"]
[244.746, "o", "        object_state = list(super().__reduce__())\r\n"]
[244.756, "o", "        object_state[2] = (object_state[2], self.__dict__)\r\n"]
[244.766, "o", "        return tuple(object_state)\r\n"]
[244.776, "o", "\r\n"]
[244.786, "o", "    def __setstate__(self, state):\r\n"]
[244.796, "o", "        # patch to unpickle Quantity objects (ndarray subclasses), see\r\n"]
[244.806, "o", "        # http://www.mail-archive.com/numpy-discussion@scipy.org/msg02446.html\r\n"]
[244.816, "o", "\r\n"]
[244.826, "o", "        nd_state, own_state = state\r\n"]
[244.836, "o", "        super().__setstate__(nd_state)\r\n"]
[244.846, "o", "        self.__dict__.update(own_state)\r\n"]
[244.856, "o", "\r\n"]
[244.866, "o", "    info = QuantityInfo()\r\n"]
[244.876, "o", "\r\n"]
[244.886, "o", "    def _to_value(self, unit, equivalencies=[]):\r\n"]
[244.896, "o", "        \"\"\"Helper method for to and to_value.\"\"\"\r\n"]
[244.906, "o", "        if equivalencies == []:\r\n"]
[244.916, "o", "            equivalencies = self._equivalencies\r\n"]
[244.926, "o", "        if not self.dtype.names or isinstance(self.unit, StructuredUnit):\r\n"]
[244.936, "o", "            # Standard path, let unit to do work.\r\n"]
[245.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[245.002, "i", "sed -n '1200,2000p' astropy/units/quantity.py\r"]
[245.004, "o", "sed -n '1200,2000p' astropy/units/quantity.py\r\n"]
[245.016, "o", "\u001b[?2004l\r\n"]
[245.026, "o", "    # behaviour, but instead of emitting a warning here, let it be done by\r\n"]
[245.036, "o", "    # other (which likely is a unit if this was a mistake).\r\n"]
[245.046, "o", "    def __rshift__(self, other):\r\n"]
[245.056, "o", "        return NotImplemented\r\n"]
[245.066, "o", "\r\n"]
[245.076, "o", "    def __irshift__(self, other):\r\n"]
[245.086, "o", "        return NotImplemented\r\n"]
[245.096, "o", "\r\n"]
[245.106, "o", "    # Arithmetic operations\r\n"]
[245.116, "o", "    def __mul__(self, other):\r\n"]
[245.126, "o", "        \"\"\"Multiplication between `Quantity` objects and other objects.\"\"\"\r\n"]
[245.136, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[245.146, "o", "            try:\r\n"]
[245.156, "o", "                return self._new_view(\r\n"]
[245.166, "o", "                    self.value.copy(), other * self.unit, propagate_info=False\r\n"]
[245.176, "o", "                )\r\n"]
[245.186, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[245.196, "o", "                return NotImplemented\r\n"]
[245.206, "o", "\r\n"]
[245.216, "o", "        return super().__mul__(other)\r\n"]
[245.226, "o", "\r\n"]
[245.236, "o", "    def __imul__(self, other):\r\n"]
[245.246, "o", "        \"\"\"In-place multiplication between `Quantity` objects and others.\"\"\"\r\n"]
[245.256, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[245.266, "o", "            self._set_unit(other * self.unit)\r\n"]
[245.276, "o", "            return self\r\n"]
[245.286, "o", "\r\n"]
[245.296, "o", "        return super().__imul__(other)\r\n"]
[245.306, "o", "\r\n"]
[245.316, "o", "    def __rmul__(self, other):\r\n"]
[245.326, "o", "        \"\"\"\r\n"]
[245.336, "o", "        Right Multiplication between `Quantity` objects and other objects.\r\n"]
[245.346, "o", "        \"\"\"\r\n"]
[245.356, "o", "        return self.__mul__(other)\r\n"]
[245.366, "o", "\r\n"]
[245.376, "o", "    def __truediv__(self, other):\r\n"]
[245.386, "o", "        \"\"\"Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[245.396, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[245.406, "o", "            try:\r\n"]
[245.416, "o", "                return self._new_view(\r\n"]
[245.426, "o", "                    self.value.copy(), self.unit / other, propagate_info=False\r\n"]
[245.436, "o", "                )\r\n"]
[245.446, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[245.456, "o", "                return NotImplemented\r\n"]
[245.466, "o", "\r\n"]
[245.476, "o", "        return super().__truediv__(other)\r\n"]
[245.486, "o", "\r\n"]
[245.496, "o", "    def __itruediv__(self, other):\r\n"]
[245.506, "o", "        \"\"\"Inplace division between `Quantity` objects and other objects.\"\"\"\r\n"]
[245.516, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[245.526, "o", "            self._set_unit(self.unit / other)\r\n"]
[245.536, "o", "            return self\r\n"]
[245.546, "o", "\r\n"]
[245.556, "o", "        return super().__itruediv__(other)\r\n"]
[245.566, "o", "\r\n"]
[245.576, "o", "    def __rtruediv__(self, other):\r\n"]
[245.586, "o", "        \"\"\"Right Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[245.596, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[245.606, "o", "            return self._new_view(\r\n"]
[245.616, "o", "                1.0 / self.value, other / self.unit, propagate_info=False\r\n"]
[245.626, "o", "            )\r\n"]
[245.636, "o", "\r\n"]
[245.646, "o", "        return super().__rtruediv__(other)\r\n"]
[245.656, "o", "\r\n"]
[245.666, "o", "    def __pow__(self, other):\r\n"]
[245.676, "o", "        if isinstance(other, Fraction):\r\n"]
[245.686, "o", "            # Avoid getting object arrays by raising the value to a Fraction.\r\n"]
[245.696, "o", "            return self._new_view(\r\n"]
[245.706, "o", "                self.value ** float(other), self.unit**other, propagate_info=False\r\n"]
[245.716, "o", "            )\r\n"]
[245.726, "o", "\r\n"]
[245.736, "o", "        return super().__pow__(other)\r\n"]
[245.746, "o", "\r\n"]
[245.756, "o", "    # other overrides of special functions\r\n"]
[245.766, "o", "    def __hash__(self):\r\n"]
[245.776, "o", "        return hash(self.value) ^ hash(self.unit)\r\n"]
[245.786, "o", "\r\n"]
[245.796, "o", "    def __iter__(self):\r\n"]
[245.806, "o", "        if self.isscalar:\r\n"]
[245.816, "o", "            raise TypeError(\r\n"]
[245.826, "o", "                f\"'{self.__class__.__name__}' object with a scalar value is not\"\r\n"]
[245.836, "o", "                \" iterable\"\r\n"]
[245.846, "o", "            )\r\n"]
[245.856, "o", "\r\n"]
[245.866, "o", "        # Otherwise return a generator\r\n"]
[245.876, "o", "        def quantity_iter():\r\n"]
[245.886, "o", "            for val in self.value:\r\n"]
[245.896, "o", "                yield self._new_view(val)\r\n"]
[245.906, "o", "\r\n"]
[245.916, "o", "        return quantity_iter()\r\n"]
[245.926, "o", "\r\n"]
[245.936, "o", "    def __getitem__(self, key):\r\n"]
[245.946, "o", "        if isinstance(key, str) and isinstance(self.unit, StructuredUnit):\r\n"]
[245.956, "o", "            return self._new_view(\r\n"]
[245.966, "o", "                self.view(np.ndarray)[key], self.unit[key], propagate_info=False\r\n"]
[245.976, "o", "            )\r\n"]
[245.986, "o", "\r\n"]
[245.996, "o", "        try:\r\n"]
[246.006, "o", "            out = super().__getitem__(key)\r\n"]
[246.016, "o", "        except IndexError:\r\n"]
[246.026, "o", "            # We want zero-dimensional Quantity objects to behave like scalars,\r\n"]
[246.036, "o", "            # so they should raise a TypeError rather than an IndexError.\r\n"]
[246.046, "o", "            if self.isscalar:\r\n"]
[246.056, "o", "                raise TypeError(\r\n"]
[246.066, "o", "                    f\"'{self.__class__.__name__}' object with a scalar value \"\r\n"]
[246.076, "o", "                    \"does not support indexing\"\r\n"]
[246.086, "o", "                )\r\n"]
[246.096, "o", "            else:\r\n"]
[246.106, "o", "                raise\r\n"]
[246.116, "o", "        # For single elements, ndarray.__getitem__ returns scalars; these\r\n"]
[246.126, "o", "        # need a new view as a Quantity.\r\n"]
[246.136, "o", "        if not isinstance(out, np.ndarray):\r\n"]
[246.146, "o", "            out = self._new_view(out)\r\n"]
[246.156, "o", "        return out\r\n"]
[246.166, "o", "\r\n"]
[246.176, "o", "    def __setitem__(self, i, value):\r\n"]
[246.186, "o", "        if isinstance(i, str):\r\n"]
[246.196, "o", "            # Indexing will cause a different unit, so by doing this in\r\n"]
[246.206, "o", "            # two steps we effectively try with the right unit.\r\n"]
[246.216, "o", "            self[i][...] = value\r\n"]
[246.226, "o", "            return\r\n"]
[246.236, "o", "\r\n"]
[246.246, "o", "        # update indices in info if the info property has been accessed\r\n"]
[246.256, "o", "        # (in which case 'info' in self.__dict__ is True; this is guaranteed\r\n"]
[246.266, "o", "        # to be the case if we're part of a table).\r\n"]
[246.276, "o", "        if not self.isscalar and \"info\" in self.__dict__:\r\n"]
[246.286, "o", "            self.info.adjust_indices(i, value, len(self))\r\n"]
[246.296, "o", "        self.view(np.ndarray).__setitem__(i, self._to_own_unit(value))\r\n"]
[246.306, "o", "\r\n"]
[246.316, "o", "    # __contains__ is OK\r\n"]
[246.326, "o", "\r\n"]
[246.336, "o", "    def __bool__(self):\r\n"]
[246.346, "o", "        \"\"\"This method raises ValueError, since truthiness of quantities is ambiguous,\r\n"]
[246.356, "o", "        especially for logarithmic units and temperatures. Use explicit comparisons.\r\n"]
[246.366, "o", "        \"\"\"\r\n"]
[246.376, "o", "        raise ValueError(\r\n"]
[246.386, "o", "            f\"{type(self).__name__} truthiness is ambiguous, especially for logarithmic units\"\r\n"]
[246.396, "o", "            \" and temperatures. Use explicit comparisons.\"\r\n"]
[246.406, "o", "        )\r\n"]
[246.416, "o", "\r\n"]
[246.426, "o", "    def __len__(self):\r\n"]
[246.436, "o", "        if self.isscalar:\r\n"]
[246.446, "o", "            raise TypeError(\r\n"]
[246.456, "o", "                f\"'{self.__class__.__name__}' object with a scalar value has no len()\"\r\n"]
[246.466, "o", "            )\r\n"]
[246.476, "o", "        else:\r\n"]
[246.486, "o", "            return len(self.value)\r\n"]
[246.496, "o", "\r\n"]
[246.506, "o", "    # Numerical types\r\n"]
[246.516, "o", "    def __float__(self):\r\n"]
[246.526, "o", "        try:\r\n"]
[246.536, "o", "            return float(self.to_value(dimensionless_unscaled))\r\n"]
[246.546, "o", "        except (UnitsError, TypeError):\r\n"]
[246.556, "o", "            raise TypeError(\r\n"]
[246.566, "o", "                \"only dimensionless scalar quantities can be \"\r\n"]
[246.576, "o", "                \"converted to Python scalars\"\r\n"]
[246.586, "o", "            )\r\n"]
[246.596, "o", "\r\n"]
[246.606, "o", "    def __int__(self):\r\n"]
[246.616, "o", "        try:\r\n"]
[246.626, "o", "            return int(self.to_value(dimensionless_unscaled))\r\n"]
[246.636, "o", "        except (UnitsError, TypeError):\r\n"]
[246.646, "o", "            raise TypeError(\r\n"]
[246.656, "o", "                \"only dimensionless scalar quantities can be \"\r\n"]
[246.666, "o", "                \"converted to Python scalars\"\r\n"]
[246.676, "o", "            )\r\n"]
[246.686, "o", "\r\n"]
[246.696, "o", "    def __index__(self):\r\n"]
[246.706, "o", "        # for indices, we do not want to mess around with scaling at all,\r\n"]
[246.716, "o", "        # so unlike for float, int, we insist here on unscaled dimensionless\r\n"]
[246.726, "o", "        try:\r\n"]
[246.736, "o", "            assert self.unit.is_unity()\r\n"]
[246.746, "o", "            return self.value.__index__()\r\n"]
[246.756, "o", "        except Exception:\r\n"]
[246.766, "o", "            raise TypeError(\r\n"]
[246.776, "o", "                \"only integer dimensionless scalar quantities \"\r\n"]
[246.786, "o", "                \"can be converted to a Python index\"\r\n"]
[246.796, "o", "            )\r\n"]
[246.806, "o", "\r\n"]
[246.816, "o", "    # TODO: we may want to add a hook for dimensionless quantities?\r\n"]
[246.826, "o", "    @property\r\n"]
[246.836, "o", "    def _unitstr(self):\r\n"]
[246.846, "o", "        if self.unit is None:\r\n"]
[246.856, "o", "            unitstr = _UNIT_NOT_INITIALISED\r\n"]
[246.866, "o", "        else:\r\n"]
[246.876, "o", "            unitstr = str(self.unit)\r\n"]
[246.886, "o", "\r\n"]
[246.896, "o", "        if unitstr:\r\n"]
[246.906, "o", "            unitstr = \" \" + unitstr\r\n"]
[246.916, "o", "\r\n"]
[246.926, "o", "        return unitstr\r\n"]
[246.936, "o", "\r\n"]
[246.946, "o", "    def to_string(\r\n"]
[246.956, "o", "        self, unit=None, precision=None, format=None, subfmt=None, *, formatter=None\r\n"]
[246.966, "o", "    ):\r\n"]
[246.976, "o", "        \"\"\"\r\n"]
[246.986, "o", "        Generate a string representation of the quantity and its unit.\r\n"]
[246.996, "o", "\r\n"]
[247.006, "o", "        The behavior of this function can be altered via the\r\n"]
[247.016, "o", "        `numpy.set_printoptions` function and its various keywords.  The\r\n"]
[247.026, "o", "        exception to this is the ``threshold`` keyword, which is controlled via\r\n"]
[247.036, "o", "        the ``[units.quantity]`` configuration item ``latex_array_threshold``.\r\n"]
[247.046, "o", "        This is treated separately because the numpy default of 1000 is too big\r\n"]
[247.056, "o", "        for most browsers to handle.\r\n"]
[247.066, "o", "\r\n"]
[247.076, "o", "        Parameters\r\n"]
[247.086, "o", "        ----------\r\n"]
[247.096, "o", "        unit : unit-like, optional\r\n"]
[247.106, "o", "            Specifies the unit.  If not provided,\r\n"]
[247.116, "o", "            the unit used to initialize the quantity will be used.\r\n"]
[247.126, "o", "\r\n"]
[247.136, "o", "        precision : number, optional\r\n"]
[247.146, "o", "            The level of decimal precision. If `None`, or not provided,\r\n"]
[247.156, "o", "            it will be determined from NumPy print options.\r\n"]
[247.166, "o", "\r\n"]
[247.176, "o", "        format : str, optional\r\n"]
[247.186, "o", "            The format of the result. If not provided, an unadorned\r\n"]
[247.196, "o", "            string is returned. Supported values are:\r\n"]
[247.206, "o", "\r\n"]
[247.216, "o", "            - 'latex': Return a LaTeX-formatted string\r\n"]
[247.226, "o", "\r\n"]
[247.236, "o", "            - 'latex_inline': Return a LaTeX-formatted string that uses\r\n"]
[247.246, "o", "              negative exponents instead of fractions\r\n"]
[247.256, "o", "\r\n"]
[247.266, "o", "        formatter : str, callable, dict, optional\r\n"]
[247.276, "o", "            The formatter to use for the value. If a string, it should be a\r\n"]
[247.286, "o", "            valid format specifier using Python's mini-language. If a callable,\r\n"]
[247.296, "o", "            it will be treated as the default formatter for all values and will\r\n"]
[247.306, "o", "            overwrite default Latex formatting for exponential notation and complex\r\n"]
[247.316, "o", "            numbers. If a dict, it should map a specific type to a callable to be\r\n"]
[247.326, "o", "            directly passed into `numpy.array2string`. If not provided, the default\r\n"]
[247.336, "o", "            formatter will be used.\r\n"]
[247.346, "o", "\r\n"]
[247.356, "o", "        subfmt : str, optional\r\n"]
[247.366, "o", "            Subformat of the result. For the moment, only used for\r\n"]
[247.376, "o", "            ``format='latex'`` and ``format='latex_inline'``. Supported\r\n"]
[247.386, "o", "            values are:\r\n"]
[247.396, "o", "\r\n"]
[247.406, "o", "            - 'inline': Use ``$ ... $`` as delimiters.\r\n"]
[247.416, "o", "\r\n"]
[247.426, "o", "            - 'display': Use ``$\\\\displaystyle ... $`` as delimiters.\r\n"]
[247.436, "o", "\r\n"]
[247.446, "o", "        Returns\r\n"]
[247.456, "o", "        -------\r\n"]
[247.466, "o", "        str\r\n"]
[247.476, "o", "            A string with the contents of this Quantity\r\n"]
[247.486, "o", "        \"\"\"\r\n"]
[247.496, "o", "        if unit is not None and unit != self.unit:\r\n"]
[247.506, "o", "            return self.to(unit).to_string(\r\n"]
[247.516, "o", "                unit=None,\r\n"]
[247.526, "o", "                precision=precision,\r\n"]
[247.536, "o", "                format=format,\r\n"]
[247.546, "o", "                subfmt=subfmt,\r\n"]
[247.556, "o", "                formatter=formatter,\r\n"]
[247.566, "o", "            )\r\n"]
[247.576, "o", "\r\n"]
[247.586, "o", "        if format is None and formatter is None and precision is None:\r\n"]
[247.596, "o", "            # Use default formatting settings\r\n"]
[247.606, "o", "            return f\"{self.value}{self._unitstr:s}\"\r\n"]
[247.616, "o", "\r\n"]
[247.626, "o", "        formats = {\r\n"]
[247.636, "o", "            None: None,\r\n"]
[247.646, "o", "            \"latex\": {\r\n"]
[247.656, "o", "                None: (\"$\", \"$\"),\r\n"]
[247.666, "o", "                \"inline\": (\"$\", \"$\"),\r\n"]
[247.676, "o", "                \"display\": (r\"$\\displaystyle \", r\"$\"),\r\n"]
[247.686, "o", "            },\r\n"]
[247.696, "o", "        }\r\n"]
[247.706, "o", "        formats[\"latex_inline\"] = formats[\"latex\"]\r\n"]
[247.716, "o", "\r\n"]
[247.726, "o", "        if format not in formats:\r\n"]
[247.736, "o", "            raise ValueError(f\"Unknown format '{format}'\")\r\n"]
[247.746, "o", "\r\n"]
[247.756, "o", "        format_spec = formatter if isinstance(formatter, str) else None\r\n"]
[247.766, "o", "\r\n"]
[247.776, "o", "        if format is None:\r\n"]
[247.786, "o", "            if format_spec is not None:\r\n"]
[247.796, "o", "\r\n"]
[247.806, "o", "                def formatter(value):\r\n"]
[247.816, "o", "                    return builtins.format(value, format_spec)\r\n"]
[247.826, "o", "\r\n"]
[247.836, "o", "            if callable(formatter):\r\n"]
[247.846, "o", "                formatter = {\"all\": formatter}\r\n"]
[247.856, "o", "\r\n"]
[247.866, "o", "            return (\r\n"]
[247.876, "o", "                np.array2string(\r\n"]
[247.886, "o", "                    self.value,\r\n"]
[247.896, "o", "                    precision=precision,\r\n"]
[247.906, "o", "                    floatmode=\"fixed\",\r\n"]
[247.916, "o", "                    formatter=formatter,\r\n"]
[247.926, "o", "                )\r\n"]
[247.936, "o", "                + self._unitstr\r\n"]
[247.946, "o", "            )\r\n"]
[247.956, "o", "\r\n"]
[247.966, "o", "        # else, for the moment we assume format=\"latex\" or \"latex_inline\".\r\n"]
[247.976, "o", "\r\n"]
[247.986, "o", "        # Set the precision if set, otherwise use numpy default\r\n"]
[247.996, "o", "        pops = np.get_printoptions()\r\n"]
[248.006, "o", "        if format_spec is None:\r\n"]
[248.016, "o", "            format_spec = (\r\n"]
[248.026, "o", "                f\".{precision if precision is not None else pops['precision']}g\"\r\n"]
[248.036, "o", "            )\r\n"]
[248.046, "o", "\r\n"]
[248.056, "o", "        # Use default formatters\r\n"]
[248.066, "o", "        if formatter is None or isinstance(formatter, str):\r\n"]
[248.076, "o", "            # Filter width and alignment operations for latex\r\n"]
[248.086, "o", "            # [[fill]align][sign][\"z\"][\"#\"][\"0\"][width][grouping_option][\".\" precision][type]\r\n"]
[248.096, "o", "            format_spec = re.sub(\r\n"]
[248.106, "o", "                r\"(.*?)([+\\- ]?)(\\d+)?(,)?(\\.\\d+)?([a-zA-Z%]+)?$\",\r\n"]
[248.116, "o", "                r\"\\2\\5\\6\",\r\n"]
[248.126, "o", "                format_spec,\r\n"]
[248.136, "o", "            )\r\n"]
[248.146, "o", "\r\n"]
[248.156, "o", "            if self.dtype.kind == \"c\":  # Complex default latex formatter\r\n"]
[248.166, "o", "                # Disallow sign operations for the imaginary part\r\n"]
[248.176, "o", "                imag_format_spec = re.sub(r\"[+\\- ]\", \"\", format_spec)\r\n"]
[248.186, "o", "\r\n"]
[248.196, "o", "                def formatter(value):\r\n"]
[248.206, "o", "                    return \"({}{}i)\".format(\r\n"]
[248.216, "o", "                        Latex.format_exponential_notation(\r\n"]
[248.226, "o", "                            value.real, format_spec=format_spec\r\n"]
[248.236, "o", "                        ),\r\n"]
[248.246, "o", "                        Latex.format_exponential_notation(\r\n"]
[248.256, "o", "                            value.imag, format_spec=\"+\" + imag_format_spec\r\n"]
[248.266, "o", "                        ),\r\n"]
[248.276, "o", "                    )\r\n"]
[248.286, "o", "\r\n"]
[248.296, "o", "            else:  # Float default latex formatter\r\n"]
[248.306, "o", "\r\n"]
[248.316, "o", "                def formatter(value):\r\n"]
[248.326, "o", "                    return Latex.format_exponential_notation(\r\n"]
[248.336, "o", "                        value, format_spec=format_spec\r\n"]
[248.346, "o", "                    )\r\n"]
[248.356, "o", "\r\n"]
[248.366, "o", "        if callable(formatter):\r\n"]
[248.376, "o", "            formatter = {\"all\": formatter}\r\n"]
[248.386, "o", "\r\n"]
[248.396, "o", "        # The view is needed for the scalar case - self.value might be float.\r\n"]
[248.406, "o", "        latex_value = np.array2string(\r\n"]
[248.416, "o", "            self.view(np.ndarray),\r\n"]
[248.426, "o", "            threshold=(\r\n"]
[248.436, "o", "                conf.latex_array_threshold\r\n"]
[248.446, "o", "                if conf.latex_array_threshold > -1\r\n"]
[248.456, "o", "                else pops[\"threshold\"]\r\n"]
[248.466, "o", "            ),\r\n"]
[248.476, "o", "            formatter=formatter,\r\n"]
[248.486, "o", "            max_line_width=np.inf,\r\n"]
[248.496, "o", "            separator=\",~\",\r\n"]
[248.506, "o", "        )\r\n"]
[248.516, "o", "\r\n"]
[248.526, "o", "        latex_value = latex_value.replace(\"...\", r\"\\dots\")\r\n"]
[248.536, "o", "\r\n"]
[248.546, "o", "        # Format unit\r\n"]
[248.556, "o", "        # [1:-1] strips the '$' on either side needed for math mode\r\n"]
[248.566, "o", "        if self.unit is None:\r\n"]
[248.576, "o", "            latex_unit = _UNIT_NOT_INITIALISED\r\n"]
[248.586, "o", "        elif format == \"latex\":\r\n"]
[248.596, "o", "            latex_unit = self.unit._repr_latex_()[1:-1]  # note this is unicode\r\n"]
[248.606, "o", "        elif format == \"latex_inline\":\r\n"]
[248.616, "o", "            latex_unit = self.unit.to_string(format=\"latex_inline\")[1:-1]\r\n"]
[248.626, "o", "\r\n"]
[248.636, "o", "        delimiter_left, delimiter_right = formats[format][subfmt]\r\n"]
[248.646, "o", "\r\n"]
[248.656, "o", "        # Add a space in front except for super-script units like degrees.\r\n"]
[248.666, "o", "        if not latex_unit.removeprefix(\"\\\\mathrm{\").startswith(\"{}^\"):\r\n"]
[248.676, "o", "            latex_unit = rf\" \\; {latex_unit}\"\r\n"]
[248.686, "o", "\r\n"]
[248.696, "o", "        return rf\"{delimiter_left}{latex_value}{latex_unit}{delimiter_right}\"\r\n"]
[248.706, "o", "\r\n"]
[248.716, "o", "    def __str__(self):\r\n"]
[248.726, "o", "        return self.to_string()\r\n"]
[248.736, "o", "\r\n"]
[248.746, "o", "    def __repr__(self):\r\n"]
[248.756, "o", "        prefixstr = \"<\" + self.__class__.__name__ + \" \"\r\n"]
[248.766, "o", "        arrstr = np.array2string(\r\n"]
[248.776, "o", "            self.view(np.ndarray), separator=\", \", prefix=prefixstr\r\n"]
[248.786, "o", "        )\r\n"]
[248.796, "o", "        return f\"{prefixstr}{arrstr}{self._unitstr:s}>\"\r\n"]
[248.806, "o", "\r\n"]
[248.816, "o", "    def _repr_latex_(self):\r\n"]
[248.826, "o", "        \"\"\"\r\n"]
[248.836, "o", "        Generate a latex representation of the quantity and its unit.\r\n"]
[248.846, "o", "\r\n"]
[248.856, "o", "        Returns\r\n"]
[248.866, "o", "        -------\r\n"]
[248.876, "o", "        lstr\r\n"]
[248.886, "o", "            A LaTeX string with the contents of this Quantity\r\n"]
[248.896, "o", "        \"\"\"\r\n"]
[248.906, "o", "        # NOTE: This should change to display format in a future release\r\n"]
[248.916, "o", "        return self.to_string(format=\"latex\", subfmt=\"inline\")\r\n"]
[248.926, "o", "\r\n"]
[248.936, "o", "    def __format__(self, format_spec):\r\n"]
[248.946, "o", "        try:\r\n"]
[248.956, "o", "            return self.to_string(format=format_spec)\r\n"]
[248.966, "o", "        except ValueError:\r\n"]
[248.976, "o", "            # We might have a unit format not implemented in `to_string()`.\r\n"]
[248.986, "o", "            if format_spec in Base.registry:\r\n"]
[248.996, "o", "                if self.unit is dimensionless_unscaled:\r\n"]
[249.006, "o", "                    return f\"{self.value}\"\r\n"]
[249.016, "o", "                else:\r\n"]
[249.026, "o", "                    return f\"{self.value} {format(self.unit, format_spec)}\"\r\n"]
[249.036, "o", "            # Can the value be formatted on its own?\r\n"]
[249.046, "o", "            try:\r\n"]
[249.056, "o", "                return f\"{format(self.value, format_spec)}{self._unitstr:s}\"\r\n"]
[249.066, "o", "            except ValueError:\r\n"]
[249.076, "o", "                # Format the whole thing as a single string.\r\n"]
[249.086, "o", "                return format(f\"{self.value}{self._unitstr:s}\", format_spec)\r\n"]
[249.096, "o", "\r\n"]
[249.106, "o", "    def decompose(self, bases=[]):\r\n"]
[249.116, "o", "        \"\"\"\r\n"]
[249.126, "o", "        Generates a new `Quantity` with the units\r\n"]
[249.136, "o", "        decomposed. Decomposed units have only irreducible units in\r\n"]
[249.146, "o", "        them (see `astropy.units.UnitBase.decompose`).\r\n"]
[249.156, "o", "\r\n"]
[249.166, "o", "        Parameters\r\n"]
[249.176, "o", "        ----------\r\n"]
[249.186, "o", "        bases : sequence of `~astropy.units.UnitBase`, optional\r\n"]
[249.196, "o", "            The bases to decompose into.  When not provided,\r\n"]
[249.206, "o", "            decomposes down to any irreducible units.  When provided,\r\n"]
[249.216, "o", "            the decomposed result will only contain the given units.\r\n"]
[249.226, "o", "            This will raises a `~astropy.units.UnitsError` if it's not possible\r\n"]
[249.236, "o", "            to do so.\r\n"]
[249.246, "o", "\r\n"]
[249.256, "o", "        Returns\r\n"]
[249.266, "o", "        -------\r\n"]
[249.276, "o", "        newq : `~astropy.units.Quantity`\r\n"]
[249.286, "o", "            A new object equal to this quantity with units decomposed.\r\n"]
[249.296, "o", "        \"\"\"\r\n"]
[249.306, "o", "        return self._decompose(False, bases=bases)\r\n"]
[249.316, "o", "\r\n"]
[249.326, "o", "    def _decompose(self, allowscaledunits=False, bases=[]):\r\n"]
[249.336, "o", "        \"\"\"\r\n"]
[249.346, "o", "        Generates a new `Quantity` with the units decomposed. Decomposed\r\n"]
[249.356, "o", "        units have only irreducible units in them (see\r\n"]
[249.366, "o", "        `astropy.units.UnitBase.decompose`).\r\n"]
[249.376, "o", "\r\n"]
[249.386, "o", "        Parameters\r\n"]
[249.396, "o", "        ----------\r\n"]
[249.406, "o", "        allowscaledunits : bool\r\n"]
[249.416, "o", "            If True, the resulting `Quantity` may have a scale factor\r\n"]
[249.426, "o", "            associated with it.  If False, any scaling in the unit will\r\n"]
[249.436, "o", "            be subsumed into the value of the resulting `Quantity`\r\n"]
[249.446, "o", "\r\n"]
[249.456, "o", "        bases : sequence of UnitBase, optional\r\n"]
[249.466, "o", "            The bases to decompose into.  When not provided,\r\n"]
[249.476, "o", "            decomposes down to any irreducible units.  When provided,\r\n"]
[249.486, "o", "            the decomposed result will only contain the given units.\r\n"]
[249.496, "o", "            This will raises a `~astropy.units.UnitsError` if it's not possible\r\n"]
[249.506, "o", "            to do so.\r\n"]
[249.516, "o", "\r\n"]
[249.526, "o", "        Returns\r\n"]
[249.536, "o", "        -------\r\n"]
[249.546, "o", "        newq : `~astropy.units.Quantity`\r\n"]
[249.556, "o", "            A new object equal to this quantity with units decomposed.\r\n"]
[249.566, "o", "\r\n"]
[249.576, "o", "        \"\"\"\r\n"]
[249.586, "o", "        new_unit = self.unit.decompose(bases=bases)\r\n"]
[249.596, "o", "\r\n"]
[249.606, "o", "        # Be careful here because self.value usually is a view of self;\r\n"]
[249.616, "o", "        # be sure that the original value is not being modified.\r\n"]
[249.626, "o", "        if not allowscaledunits and hasattr(new_unit, \"scale\"):\r\n"]
[249.636, "o", "            new_value = self.value * new_unit.scale\r\n"]
[249.646, "o", "            new_unit = new_unit / new_unit.scale\r\n"]
[249.656, "o", "            return self._new_view(new_value, new_unit)\r\n"]
[249.666, "o", "        else:\r\n"]
[249.676, "o", "            return self._new_view(self.copy(), new_unit)\r\n"]
[249.686, "o", "\r\n"]
[249.696, "o", "    # These functions need to be overridden to take into account the units\r\n"]
[249.706, "o", "    # Array conversion\r\n"]
[249.716, "o", "    # https://numpy.org/doc/stable/reference/arrays.ndarray.html#array-conversion\r\n"]
[249.726, "o", "\r\n"]
[249.736, "o", "    def item(self, *args):\r\n"]
[249.746, "o", "        \"\"\"Copy an element of an array to a scalar Quantity and return it.\r\n"]
[249.756, "o", "\r\n"]
[249.766, "o", "        Like :meth:`~numpy.ndarray.item` except that it always\r\n"]
[249.776, "o", "        returns a `Quantity`, not a Python scalar.\r\n"]
[249.786, "o", "\r\n"]
[249.796, "o", "        \"\"\"\r\n"]
[249.806, "o", "        return self._new_view(super().item(*args))\r\n"]
[249.816, "o", "\r\n"]
[249.826, "o", "    def tolist(self):\r\n"]
[249.836, "o", "        raise NotImplementedError(\r\n"]
[249.846, "o", "            \"cannot make a list of Quantities. Get list of values with\"\r\n"]
[249.856, "o", "            \" q.value.tolist().\"\r\n"]
[249.866, "o", "        )\r\n"]
[249.876, "o", "\r\n"]
[249.886, "o", "    def _to_own_unit(self, value, check_precision=True, *, unit=None):\r\n"]
[249.896, "o", "        \"\"\"Convert value to one's own unit (or that given).\r\n"]
[249.906, "o", "\r\n"]
[249.916, "o", "        Here, non-quantities are treated as dimensionless, and care is taken\r\n"]
[249.926, "o", "        for values of 0, infinity or nan, which are allowed to have any unit.\r\n"]
[249.936, "o", "\r\n"]
[250.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[250.002, "i", "cat asv.ci.conf.json\r"]
[250.004, "o", "cat asv.ci.conf.json\r\n"]
[250.3356, "o", "\u001b[?2004l\r\n"]
[250.6652, "o", " {\r\n"]
[250.9948, "o", "   \"version\": 1,\r\n"]
[251.3244, "o", "   \"project\": \"astropy\",\r\n"]
[251.654, "o", "   \"project_url\": \"http://www.astropy.org/\",\r\n"]
[251.9836, "o", "   \"repo\": \".\",\r\n"]
[252.3132, "o", "   \"install_command\": [\r\n"]
[252.6428, "o", "     \"pip install . matplotlib scipy\"\r\n"]
[252.9724, "o", "   ],\r\n"]
[253.302, "o", "   \"branches\": [\"main\"],\r\n"]
[253.6316, "o", "   \"show_commit_url\": \"http://github.com/astropy/astropy/commit/\",\r\n"]
[253.9612, "o", "   \"pythons\": [\"3.11\"],\r\n"]
[254.2908, "o", "   \"environment_type\": \"virtualenv\",\r\n"]
[254.6204, "o", "   \"benchmark_dir\": \"astropy-benchmarks/benchmarks\"\r\n"]
[255.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[255.002, "i", "sed -n '1,240p' astropy-benchmarks/benchmarks/units.py\r"]
[255.004, "o", "sed -n '1,240p' astropy-benchmarks/benchmarks/units.py\r\n"]
[255.026861, "o", "\u001b[?2004l\r\n"]
[255.047722, "o", "import copy\r\n"]
[255.068582, "o", "\r\n"]
[255.089443, "o", "import numpy as np\r\n"]
[255.110304, "o", "from astropy import units as u\r\n"]
[255.131165, "o", "\r\n"]
[255.152025, "o", "\r\n"]
[255.172886, "o", "# Unit tests\r\n"]
[255.193747, "o", "\r\n"]
[255.214608, "o", "\r\n"]
[255.235468, "o", "def time_unit_compose():\r\n"]
[255.256329, "o", "    u.Ry.compose()\r\n"]
[255.27719, "o", "\r\n"]
[255.298051, "o", "\r\n"]
[255.318911, "o", "def time_unit_to():\r\n"]
[255.339772, "o", "    u.m.to(u.pc)\r\n"]
[255.360633, "o", "\r\n"]
[255.381494, "o", "\r\n"]
[255.402354, "o", "def time_unit_parse():\r\n"]
[255.423215, "o", "    u.Unit(\"1e-07 kg m2 / s2\")\r\n"]
[255.444076, "o", "\r\n"]
[255.464937, "o", "\r\n"]
[255.485797, "o", "def time_simple_unit_parse():\r\n"]
[255.506658, "o", "    u.Unit(\"1 d\")\r\n"]
[255.527519, "o", "\r\n"]
[255.54838, "o", "\r\n"]
[255.569241, "o", "def time_very_simple_unit_parse():\r\n"]
[255.590101, "o", "    u.Unit(\"d\")\r\n"]
[255.610962, "o", "\r\n"]
[255.631823, "o", "\r\n"]
[255.652684, "o", "def mem_unit():\r\n"]
[255.673544, "o", "    return u.erg\r\n"]
[255.694405, "o", "\r\n"]
[255.715266, "o", "\r\n"]
[255.736127, "o", "def time_compose_to_bases():\r\n"]
[255.756987, "o", "    x = copy.copy(u.Ry)\r\n"]
[255.777848, "o", "    x.cgs\r\n"]
[255.798709, "o", "\r\n"]
[255.81957, "o", "\r\n"]
[255.84043, "o", "def time_compose_complex():\r\n"]
[255.861291, "o", "    # Composing a complex unit can be very inefficient\r\n"]
[255.882152, "o", "    (u.kg / u.s**3 * u.au**2.5 / u.yr**0.5 / u.sr**2).compose()\r\n"]
[255.903013, "o", "\r\n"]
[255.923873, "o", "\r\n"]
[255.944734, "o", "# Quantity tests\r\n"]
[255.965595, "o", "\r\n"]
[255.986456, "o", "a = np.arange(100000.0)\r\n"]
[256.007316, "o", "b1 = [1.0, 2.0, 3.0]\r\n"]
[256.028177, "o", "b2 = np.asarray(b1)\r\n"]
[256.049038, "o", "q0 = u.Quantity(1.0, u.s)\r\n"]
[256.069899, "o", "q1 = u.Quantity(a, u.m)\r\n"]
[256.090759, "o", "q2 = u.Quantity(a[:10000], u.deg)\r\n"]
[256.11162, "o", "\r\n"]
[256.132481, "o", "\r\n"]
[256.153342, "o", "def time_quantity_creation():\r\n"]
[256.174203, "o", "    u.Quantity(a, u.m)\r\n"]
[256.195063, "o", "\r\n"]
[256.215924, "o", "\r\n"]
[256.236785, "o", "def time_quantity_creation_nocopy():\r\n"]
[256.257646, "o", "    u.Quantity(a, u.m, copy=False)\r\n"]
[256.278506, "o", "\r\n"]
[256.299367, "o", "\r\n"]
[256.320228, "o", "def time_quantity_view():\r\n"]
[256.341089, "o", "    q1.view(u.Quantity)\r\n"]
[256.361949, "o", "\r\n"]
[256.38281, "o", "\r\n"]
[256.403671, "o", "def time_quantity_init_scalar():\r\n"]
[256.424532, "o", "    3.0 * u.m / u.s\r\n"]
[256.445392, "o", "\r\n"]
[256.466253, "o", "\r\n"]
[256.487114, "o", "def time_quantity_init_array():\r\n"]
[256.507975, "o", "    a * u.m / u.s\r\n"]
[256.528835, "o", "\r\n"]
[256.549696, "o", "\r\n"]
[256.570557, "o", "def time_quantity_init_small_list():\r\n"]
[256.591418, "o", "    \"\"\"\r\n"]
[256.612278, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[256.633139, "o", "    for small list.\r\n"]
[256.654, "o", "    \"\"\"\r\n"]
[256.674861, "o", "    b1 * u.m / u.s\r\n"]
[256.695722, "o", "\r\n"]
[256.716582, "o", "\r\n"]
[256.737443, "o", "def time_quantity_init_small_array():\r\n"]
[256.758304, "o", "    \"\"\"\r\n"]
[256.779165, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[256.800025, "o", "    for small array.\r\n"]
[256.820886, "o", "    \"\"\"\r\n"]
[256.841747, "o", "    b2 * u.m / u.s\r\n"]
[256.862608, "o", "\r\n"]
[256.883468, "o", "\r\n"]
[256.904329, "o", "def time_quantity_scalar_conversion():\r\n"]
[256.92519, "o", "    (3.0 * u.m / u.s).to(u.km / u.hour)\r\n"]
[256.946051, "o", "\r\n"]
[256.966911, "o", "\r\n"]
[256.987772, "o", "def time_quantity_array_conversion():\r\n"]
[257.008633, "o", "    (a * u.m / u.s).to(u.km / u.hour)\r\n"]
[257.029494, "o", "\r\n"]
[257.050354, "o", "\r\n"]
[257.071215, "o", "def time_quantity_times_unit():\r\n"]
[257.092076, "o", "    q1 * u.m\r\n"]
[257.112937, "o", "\r\n"]
[257.133797, "o", "\r\n"]
[257.154658, "o", "def time_quantity_times_quantity():\r\n"]
[257.175519, "o", "    q1 * q0\r\n"]
[257.19638, "o", "\r\n"]
[257.217241, "o", "\r\n"]
[257.238101, "o", "def time_quantity_ufunc_sin():\r\n"]
[257.258962, "o", "    np.sin(q2)\r\n"]
[257.279823, "o", "\r\n"]
[257.300684, "o", "\r\n"]
[257.321544, "o", "class TimeQuantityOpSmallArray:\r\n"]
[257.342405, "o", "    \"\"\"\r\n"]
[257.363266, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[257.384127, "o", "    for a small Numpy array.\r\n"]
[257.404987, "o", "    \"\"\"\r\n"]
[257.425848, "o", "\r\n"]
[257.446709, "o", "    def setup(self):\r\n"]
[257.46757, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[257.48843, "o", "        self.data = data * u.g\r\n"]
[257.509291, "o", "        self.out_sq = data * u.g**2\r\n"]
[257.530152, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[257.551013, "o", "\r\n"]
[257.571873, "o", "    def time_quantity_square(self):\r\n"]
[257.592734, "o", "        self.data**2\r\n"]
[257.613595, "o", "\r\n"]
[257.634456, "o", "    def time_quantity_np_square(self):\r\n"]
[257.655316, "o", "        np.power(self.data, 2)\r\n"]
[257.676177, "o", "\r\n"]
[257.697038, "o", "    def time_quantity_np_square_out(self):\r\n"]
[257.717899, "o", "        np.power(self.data, 2, out=self.out_sq)\r\n"]
[257.738759, "o", "\r\n"]
[257.75962, "o", "    def time_quantity_sqrt(self):\r\n"]
[257.780481, "o", "        self.data**0.5\r\n"]
[257.801342, "o", "\r\n"]
[257.822203, "o", "    def time_quantity_np_sqrt(self):\r\n"]
[257.843063, "o", "        np.sqrt(self.data)\r\n"]
[257.863924, "o", "\r\n"]
[257.884785, "o", "    def time_quantity_np_sqrt_out(self):\r\n"]
[257.905646, "o", "        np.sqrt(self.data, out=self.out_sqrt)\r\n"]
[257.926506, "o", "\r\n"]
[257.947367, "o", "\r\n"]
[257.968228, "o", "class TimeQuantityOpLargeArray(TimeQuantityOpSmallArray):\r\n"]
[257.989089, "o", "    \"\"\"\r\n"]
[258.009949, "o", "    Like :class:`TimeQuantityOpSmallArray` but for a large Numpy array.\r\n"]
[258.03081, "o", "    \"\"\"\r\n"]
[258.051671, "o", "\r\n"]
[258.072532, "o", "    def setup(self):\r\n"]
[258.093392, "o", "        data = np.arange(1e6) + 1\r\n"]
[258.114253, "o", "        self.data = data * u.g\r\n"]
[258.135114, "o", "        self.out_sq = data * u.g**2\r\n"]
[258.155975, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[258.176835, "o", "\r\n"]
[258.197696, "o", "\r\n"]
[258.218557, "o", "class TimeQuantityOpSmallArrayDiffUnit:\r\n"]
[258.239418, "o", "    \"\"\"\r\n"]
[258.260278, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[258.281139, "o", "    for small Numpy arrays with different units.\r\n"]
[258.302, "o", "    \"\"\"\r\n"]
[258.322861, "o", "\r\n"]
[258.343722, "o", "    def setup(self):\r\n"]
[258.364582, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[258.385443, "o", "        self.data = data * u.g\r\n"]
[258.406304, "o", "\r\n"]
[258.427165, "o", "        # A different but dimensionally compatible unit\r\n"]
[258.448025, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[258.468886, "o", "\r\n"]
[258.489747, "o", "    def time_quantity_equal(self):\r\n"]
[258.510608, "o", "        # Same as operator.eq\r\n"]
[258.531468, "o", "        self.data == self.data2\r\n"]
[258.552329, "o", "\r\n"]
[258.57319, "o", "    def time_quantity_np_equal(self):\r\n"]
[258.594051, "o", "        np.equal(self.data, self.data2)\r\n"]
[258.614911, "o", "\r\n"]
[258.635772, "o", "    def time_quantity_truediv(self):\r\n"]
[258.656633, "o", "        # Since benchmark is PY3 only, this is always true divide.\r\n"]
[258.677494, "o", "        # Same as operator.truediv\r\n"]
[258.698354, "o", "        self.data / self.data2\r\n"]
[258.719215, "o", "\r\n"]
[258.740076, "o", "    def time_quantity_np_truediv(self):\r\n"]
[258.760937, "o", "        np.true_divide(self.data, self.data2)\r\n"]
[258.781797, "o", "\r\n"]
[258.802658, "o", "    def time_quantity_mul(self):\r\n"]
[258.823519, "o", "        # Same as operator.mul\r\n"]
[258.84438, "o", "        self.data * self.data2\r\n"]
[258.865241, "o", "\r\n"]
[258.886101, "o", "    def time_quantity_np_multiply(self):\r\n"]
[258.906962, "o", "        np.multiply(self.data, self.data2)\r\n"]
[258.927823, "o", "\r\n"]
[258.948684, "o", "    def time_quantity_sub(self):\r\n"]
[258.969544, "o", "        # Same as operator.sub\r\n"]
[258.990405, "o", "        self.data - self.data2\r\n"]
[259.011266, "o", "\r\n"]
[259.032127, "o", "    def time_quantity_np_subtract(self):\r\n"]
[259.052987, "o", "        np.subtract(self.data, self.data2)\r\n"]
[259.073848, "o", "\r\n"]
[259.094709, "o", "    def time_quantity_add(self):\r\n"]
[259.11557, "o", "        # Same as operator.add\r\n"]
[259.13643, "o", "        self.data + self.data2\r\n"]
[259.157291, "o", "\r\n"]
[259.178152, "o", "    def time_quantity_np_add(self):\r\n"]
[259.199013, "o", "        np.add(self.data, self.data2)\r\n"]
[259.219873, "o", "\r\n"]
[259.240734, "o", "\r\n"]
[259.261595, "o", "class TimeQuantityOpSmallArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[259.282456, "o", "    \"\"\"\r\n"]
[259.303316, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[259.324177, "o", "    for small Numpy arrays with same units.\r\n"]
[259.345038, "o", "    \"\"\"\r\n"]
[259.365899, "o", "\r\n"]
[259.386759, "o", "    def setup(self):\r\n"]
[259.40762, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[259.428481, "o", "        self.data = data * u.g\r\n"]
[259.449342, "o", "        self.data2 = self.data.copy()\r\n"]
[259.470203, "o", "\r\n"]
[259.491063, "o", "\r\n"]
[259.511924, "o", "class TimeQuantityOpLargeArrayDiffUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[259.532785, "o", "    \"\"\"\r\n"]
[259.553646, "o", "    Like :class:`TimeQuantityOpSmallArrayDiffUnit` but for large Numpy arrays.\r\n"]
[259.574506, "o", "    \"\"\"\r\n"]
[259.595367, "o", "\r\n"]
[259.616228, "o", "    def setup(self):\r\n"]
[259.637089, "o", "        data = np.arange(1e6) + 1\r\n"]
[259.657949, "o", "        self.data = data * u.g\r\n"]
[259.67881, "o", "\r\n"]
[259.699671, "o", "        # A different but dimensionally compatible unit\r\n"]
[259.720532, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[259.741392, "o", "\r\n"]
[259.762253, "o", "\r\n"]
[259.783114, "o", "class TimeQuantityOpLargeArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[259.803975, "o", "    \"\"\"\r\n"]
[259.824835, "o", "    Like :class:`TimeQuantityOpSmallArraySameUnit` but for large Numpy arrays.\r\n"]
[259.845696, "o", "    \"\"\"\r\n"]
[259.866557, "o", "\r\n"]
[259.887418, "o", "    def setup(self):\r\n"]
[259.908278, "o", "        data = np.arange(1e6) + 1\r\n"]
[259.929139, "o", "        self.data = data * u.g\r\n"]
[260.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[260.002, "i", "asv dev -c asv.ci.conf.json -b \"units.time_quantity_init_small_list|units.time_quantity_creation_nocopy|units.time_\r"]
[260.004, "o", "asv dev -c asv.ci.conf.json -b \"units.time_quantity_init_small_list|units.time_quantity_creation_nocopy|units.time_\r\n"]
[260.9948, "o", "_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view\"\r\n"]
[261.9836, "o", "\u001b[?2004l\r\n"]
[262.9724, "o", "usage: asv [-h] [--verbose] [--config CONFIG] [--version]\r\n"]
[263.9612, "o", "           {help,quickstart,machine,setup,run,continuous,find,rm,publish,preview,profile,update,show,compare,check,gh-pages} ...\r\n"]
[265.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[265.002, "i", "asv profile -c asv.ci.conf.json units.time_quantity_times_unit\r"]
[265.004, "o", "asv profile -c asv.ci.conf.json units.time_quantity_times_unit\r\n"]
[266.242, "o", "\u001b[?2004l\r\n"]
[267.478, "o", "usage: asv [-h] [--verbose] [--config CONFIG] [--version]\r\n"]
[268.714, "o", "           {help,quickstart,machine,setup,run,continuous,find,rm,publish,preview,profile,update,show,compare,check,gh-pages} ...\r\n"]
[270.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[270.002, "i", "sed -n '1,400p' astropy/units/quantity.py\r"]
[270.004, "o", "sed -n '1,400p' astropy/units/quantity.py\r\n"]
[270.018329, "o", "\u001b[?2004l\r\n"]
[270.030658, "o", "# Licensed under a 3-clause BSD style license - see LICENSE.rst\r\n"]
[270.042988, "o", "\"\"\"\r\n"]
[270.055317, "o", "This module defines the `Quantity` object, which represents a number with some\r\n"]
[270.067646, "o", "associated units. `Quantity` objects support operations like ordinary numbers,\r\n"]
[270.079975, "o", "but will deal with unit conversions internally.\r\n"]
[270.092304, "o", "\"\"\"\r\n"]
[270.104633, "o", "\r\n"]
[270.116963, "o", "from __future__ import annotations\r\n"]
[270.129292, "o", "\r\n"]
[270.141621, "o", "import builtins\r\n"]
[270.15395, "o", "import numbers\r\n"]
[270.166279, "o", "import operator\r\n"]
[270.178608, "o", "import re\r\n"]
[270.190938, "o", "import warnings\r\n"]
[270.203267, "o", "from fractions import Fraction\r\n"]
[270.215596, "o", "from typing import TYPE_CHECKING\r\n"]
[270.227925, "o", "\r\n"]
[270.240254, "o", "import numpy as np\r\n"]
[270.252584, "o", "\r\n"]
[270.264913, "o", "from astropy import config as _config\r\n"]
[270.277242, "o", "from astropy.utils.compat.numpycompat import COPY_IF_NEEDED, NUMPY_LT_2_0\r\n"]
[270.289571, "o", "from astropy.utils.data_info import ParentDtypeInfo\r\n"]
[270.3019, "o", "from astropy.utils.exceptions import AstropyWarning\r\n"]
[270.314229, "o", "\r\n"]
[270.326559, "o", "from .core import (\r\n"]
[270.338888, "o", "    Unit,\r\n"]
[270.351217, "o", "    UnitBase,\r\n"]
[270.363546, "o", "    UnitConversionError,\r\n"]
[270.375875, "o", "    UnitsError,\r\n"]
[270.388204, "o", "    UnitTypeError,\r\n"]
[270.400534, "o", "    dimensionless_unscaled,\r\n"]
[270.412863, "o", "    get_current_unit_registry,\r\n"]
[270.425192, "o", ")\r\n"]
[270.437521, "o", "from .format import Base, Latex\r\n"]
[270.44985, "o", "from .quantity_helper import can_have_arbitrary_unit, check_output, converters_and_unit\r\n"]
[270.46218, "o", "from .quantity_helper.function_helpers import (\r\n"]
[270.474509, "o", "    DISPATCHED_FUNCTIONS,\r\n"]
[270.486838, "o", "    FUNCTION_HELPERS,\r\n"]
[270.499167, "o", "    SUBCLASS_SAFE_FUNCTIONS,\r\n"]
[270.511496, "o", "    UNSUPPORTED_FUNCTIONS,\r\n"]
[270.523825, "o", ")\r\n"]
[270.536155, "o", "from .structured import StructuredUnit, _structured_unit_like_dtype\r\n"]
[270.548484, "o", "from .utils import is_effectively_unity\r\n"]
[270.560813, "o", "\r\n"]
[270.573142, "o", "if TYPE_CHECKING:\r\n"]
[270.585471, "o", "    from typing_extensions import Self\r\n"]
[270.5978, "o", "\r\n"]
[270.61013, "o", "    from .typing import QuantityLike\r\n"]
[270.622459, "o", "\r\n"]
[270.634788, "o", "__all__ = [\r\n"]
[270.647117, "o", "    \"Quantity\",\r\n"]
[270.659446, "o", "    \"SpecificTypeQuantity\",\r\n"]
[270.671776, "o", "    \"QuantityInfoBase\",\r\n"]
[270.684105, "o", "    \"QuantityInfo\",\r\n"]
[270.696434, "o", "    \"allclose\",\r\n"]
[270.708763, "o", "    \"isclose\",\r\n"]
[270.721092, "o", "]\r\n"]
[270.733421, "o", "\r\n"]
[270.745751, "o", "\r\n"]
[270.75808, "o", "# We don't want to run doctests in the docstrings we inherit from Numpy\r\n"]
[270.770409, "o", "__doctest_skip__ = [\"Quantity.*\"]\r\n"]
[270.782738, "o", "\r\n"]
[270.795067, "o", "_UNIT_NOT_INITIALISED = \"(Unit not initialised)\"\r\n"]
[270.807397, "o", "_UFUNCS_FILTER_WARNINGS = {np.arcsin, np.arccos, np.arccosh, np.arctanh}\r\n"]
[270.819726, "o", "\r\n"]
[270.832055, "o", "\r\n"]
[270.844384, "o", "class Conf(_config.ConfigNamespace):\r\n"]
[270.856713, "o", "    \"\"\"\r\n"]
[270.869042, "o", "    Configuration parameters for Quantity.\r\n"]
[270.881372, "o", "    \"\"\"\r\n"]
[270.893701, "o", "\r\n"]
[270.90603, "o", "    latex_array_threshold = _config.ConfigItem(\r\n"]
[270.918359, "o", "        100,\r\n"]
[270.930688, "o", "        \"The maximum size an array Quantity can be before its LaTeX \"\r\n"]
[270.943017, "o", "        'representation for IPython gets \"summarized\" (meaning only the first '\r\n"]
[270.955347, "o", "        'and last few elements are shown with \"...\" between). Setting this to a '\r\n"]
[270.967676, "o", "        \"negative number means that the value will instead be whatever numpy \"\r\n"]
[270.980005, "o", "        \"gets from get_printoptions.\",\r\n"]
[270.992334, "o", "    )\r\n"]
[271.004663, "o", "\r\n"]
[271.016993, "o", "\r\n"]
[271.029322, "o", "conf = Conf()\r\n"]
[271.041651, "o", "\r\n"]
[271.05398, "o", "\r\n"]
[271.066309, "o", "class QuantityIterator:\r\n"]
[271.078638, "o", "    \"\"\"\r\n"]
[271.090968, "o", "    Flat iterator object to iterate over Quantities.\r\n"]
[271.103297, "o", "\r\n"]
[271.115626, "o", "    A `QuantityIterator` iterator is returned by ``q.flat`` for any Quantity\r\n"]
[271.127955, "o", "    ``q``.  It allows iterating over the array as if it were a 1-D array,\r\n"]
[271.140284, "o", "    either in a for-loop or by calling its `next` method.\r\n"]
[271.152613, "o", "\r\n"]
[271.164943, "o", "    Iteration is done in C-contiguous style, with the last index varying the\r\n"]
[271.177272, "o", "    fastest. The iterator can also be indexed using basic slicing or\r\n"]
[271.189601, "o", "    advanced indexing.\r\n"]
[271.20193, "o", "\r\n"]
[271.214259, "o", "    See Also\r\n"]
[271.226589, "o", "    --------\r\n"]
[271.238918, "o", "    Quantity.flatten : Returns a flattened copy of an array.\r\n"]
[271.251247, "o", "\r\n"]
[271.263576, "o", "    Notes\r\n"]
[271.275905, "o", "    -----\r\n"]
[271.288234, "o", "    `QuantityIterator` is inspired by `~numpy.ma.core.MaskedIterator`.  It\r\n"]
[271.300564, "o", "    is not exported by the `~astropy.units` module.  Instead of\r\n"]
[271.312893, "o", "    instantiating a `QuantityIterator` directly, use `Quantity.flat`.\r\n"]
[271.325222, "o", "    \"\"\"\r\n"]
[271.337551, "o", "\r\n"]
[271.34988, "o", "    def __init__(self, q):\r\n"]
[271.362209, "o", "        self._quantity = q\r\n"]
[271.374539, "o", "        self._dataiter = q.view(np.ndarray).flat\r\n"]
[271.386868, "o", "\r\n"]
[271.399197, "o", "    def __iter__(self):\r\n"]
[271.411526, "o", "        return self\r\n"]
[271.423855, "o", "\r\n"]
[271.436185, "o", "    def __getitem__(self, indx):\r\n"]
[271.448514, "o", "        out = self._dataiter.__getitem__(indx)\r\n"]
[271.460843, "o", "        # For single elements, ndarray.flat.__getitem__ returns scalars; these\r\n"]
[271.473172, "o", "        # need a new view as a Quantity.\r\n"]
[271.485501, "o", "        if isinstance(out, type(self._quantity)):\r\n"]
[271.49783, "o", "            return out\r\n"]
[271.51016, "o", "        else:\r\n"]
[271.522489, "o", "            return self._quantity._new_view(out)\r\n"]
[271.534818, "o", "\r\n"]
[271.547147, "o", "    def __setitem__(self, index, value):\r\n"]
[271.559476, "o", "        self._dataiter[index] = self._quantity._to_own_unit(value)\r\n"]
[271.571805, "o", "\r\n"]
[271.584135, "o", "    def __next__(self):\r\n"]
[271.596464, "o", "        \"\"\"\r\n"]
[271.608793, "o", "        Return the next value, or raise StopIteration.\r\n"]
[271.621122, "o", "        \"\"\"\r\n"]
[271.633451, "o", "        out = next(self._dataiter)\r\n"]
[271.645781, "o", "        # ndarray.flat._dataiter returns scalars, so need a view as a Quantity.\r\n"]
[271.65811, "o", "        return self._quantity._new_view(out)\r\n"]
[271.670439, "o", "\r\n"]
[271.682768, "o", "    next = __next__\r\n"]
[271.695097, "o", "\r\n"]
[271.707426, "o", "    def __len__(self):\r\n"]
[271.719756, "o", "        return len(self._dataiter)\r\n"]
[271.732085, "o", "\r\n"]
[271.744414, "o", "    # Properties and methods to match `numpy.ndarray.flatiter`\r\n"]
[271.756743, "o", "\r\n"]
[271.769072, "o", "    @property\r\n"]
[271.781401, "o", "    def base(self):\r\n"]
[271.793731, "o", "        \"\"\"A reference to the array that is iterated over.\"\"\"\r\n"]
[271.80606, "o", "        return self._quantity\r\n"]
[271.818389, "o", "\r\n"]
[271.830718, "o", "    @property\r\n"]
[271.843047, "o", "    def coords(self):\r\n"]
[271.855377, "o", "        \"\"\"An N-dimensional tuple of current coordinates.\"\"\"\r\n"]
[271.867706, "o", "        return self._dataiter.coords\r\n"]
[271.880035, "o", "\r\n"]
[271.892364, "o", "    @property\r\n"]
[271.904693, "o", "    def index(self):\r\n"]
[271.917022, "o", "        \"\"\"Current flat index into the array.\"\"\"\r\n"]
[271.929352, "o", "        return self._dataiter.index\r\n"]
[271.941681, "o", "\r\n"]
[271.95401, "o", "    def copy(self):\r\n"]
[271.966339, "o", "        \"\"\"Get a copy of the iterator as a 1-D array.\"\"\"\r\n"]
[271.978668, "o", "        return self._quantity.flatten()\r\n"]
[271.990998, "o", "\r\n"]
[272.003327, "o", "\r\n"]
[272.015656, "o", "class QuantityInfoBase(ParentDtypeInfo):\r\n"]
[272.027985, "o", "    # This is on a base class rather than QuantityInfo directly, so that\r\n"]
[272.040314, "o", "    # it can be used for EarthLocationInfo yet make clear that that class\r\n"]
[272.052643, "o", "    # should not be considered a typical Quantity subclass by Table.\r\n"]
[272.064973, "o", "    attrs_from_parent = {\"dtype\", \"unit\"}  # dtype and unit taken from parent\r\n"]
[272.077302, "o", "    _supports_indexing = True\r\n"]
[272.089631, "o", "\r\n"]
[272.10196, "o", "    @staticmethod\r\n"]
[272.114289, "o", "    def default_format(val):\r\n"]
[272.126618, "o", "        return f\"{val.value}\"\r\n"]
[272.138948, "o", "\r\n"]
[272.151277, "o", "    @staticmethod\r\n"]
[272.163606, "o", "    def possible_string_format_functions(format_):\r\n"]
[272.175935, "o", "        \"\"\"Iterate through possible string-derived format functions.\r\n"]
[272.188264, "o", "\r\n"]
[272.200594, "o", "        A string can either be a format specifier for the format built-in,\r\n"]
[272.212923, "o", "        a new-style format string, or an old-style format string.\r\n"]
[272.225252, "o", "\r\n"]
[272.237581, "o", "        This method is overridden in order to suppress printing the unit\r\n"]
[272.24991, "o", "        in each row since it is already at the top in the column header.\r\n"]
[272.262239, "o", "        \"\"\"\r\n"]
[272.274569, "o", "        yield lambda format_, val: format(val.value, format_)\r\n"]
[272.286898, "o", "        yield lambda format_, val: format_.format(val.value)\r\n"]
[272.299227, "o", "        yield lambda format_, val: format_ % val.value\r\n"]
[272.311556, "o", "\r\n"]
[272.323885, "o", "\r\n"]
[272.336214, "o", "class QuantityInfo(QuantityInfoBase):\r\n"]
[272.348544, "o", "    \"\"\"\r\n"]
[272.360873, "o", "    Container for meta information like name, description, format.  This is\r\n"]
[272.373202, "o", "    required when the object is used as a mixin column within a table, but can\r\n"]
[272.385531, "o", "    be used as a general way to store meta information.\r\n"]
[272.39786, "o", "    \"\"\"\r\n"]
[272.41019, "o", "\r\n"]
[272.422519, "o", "    _represent_as_dict_attrs = (\"value\", \"unit\")\r\n"]
[272.434848, "o", "    _construct_from_dict_args = [\"value\"]\r\n"]
[272.447177, "o", "    _represent_as_dict_primary_data = \"value\"\r\n"]
[272.459506, "o", "\r\n"]
[272.471835, "o", "    def new_like(self, cols, length, metadata_conflicts=\"warn\", name=None):\r\n"]
[272.484165, "o", "        \"\"\"\r\n"]
[272.496494, "o", "        Return a new Quantity instance which is consistent with the\r\n"]
[272.508823, "o", "        input ``cols`` and has ``length`` rows.\r\n"]
[272.521152, "o", "\r\n"]
[272.533481, "o", "        This is intended for creating an empty column object whose elements can\r\n"]
[272.54581, "o", "        be set in-place for table operations like join or vstack.\r\n"]
[272.55814, "o", "\r\n"]
[272.570469, "o", "        Parameters\r\n"]
[272.582798, "o", "        ----------\r\n"]
[272.595127, "o", "        cols : list\r\n"]
[272.607456, "o", "            List of input columns\r\n"]
[272.619786, "o", "        length : int\r\n"]
[272.632115, "o", "            Length of the output column object\r\n"]
[272.644444, "o", "        metadata_conflicts : str ('warn'|'error'|'silent')\r\n"]
[272.656773, "o", "            How to handle metadata conflicts\r\n"]
[272.669102, "o", "        name : str\r\n"]
[272.681431, "o", "            Output column name\r\n"]
[272.693761, "o", "\r\n"]
[272.70609, "o", "        Returns\r\n"]
[272.718419, "o", "        -------\r\n"]
[272.730748, "o", "        col : `~astropy.units.Quantity` (or subclass)\r\n"]
[272.743077, "o", "            Empty instance of this class consistent with ``cols``\r\n"]
[272.755406, "o", "\r\n"]
[272.767736, "o", "        \"\"\"\r\n"]
[272.780065, "o", "        # Get merged info attributes like shape, dtype, format, description, etc.\r\n"]
[272.792394, "o", "        attrs = self.merge_cols_attributes(\r\n"]
[272.804723, "o", "            cols, metadata_conflicts, name, (\"meta\", \"format\", \"description\")\r\n"]
[272.817052, "o", "        )\r\n"]
[272.829382, "o", "\r\n"]
[272.841711, "o", "        # Make an empty quantity using the unit of the last one.\r\n"]
[272.85404, "o", "        shape = (length,) + attrs.pop(\"shape\")\r\n"]
[272.866369, "o", "        dtype = attrs.pop(\"dtype\")\r\n"]
[272.878698, "o", "        # Use zeros so we do not get problems for Quantity subclasses such\r\n"]
[272.891027, "o", "        # as Longitude and Latitude, which cannot take arbitrary values.\r\n"]
[272.903357, "o", "        data = np.zeros(shape=shape, dtype=dtype)\r\n"]
[272.915686, "o", "        # Get arguments needed to reconstruct class\r\n"]
[272.928015, "o", "        map = {\r\n"]
[272.940344, "o", "            key: (data if key == \"value\" else getattr(cols[-1], key))\r\n"]
[272.952673, "o", "            for key in self._represent_as_dict_attrs\r\n"]
[272.965002, "o", "        }\r\n"]
[272.977332, "o", "        map[\"copy\"] = COPY_IF_NEEDED\r\n"]
[272.989661, "o", "        out = self._construct_from_dict(map)\r\n"]
[273.00199, "o", "\r\n"]
[273.014319, "o", "        # Set remaining info attributes\r\n"]
[273.026648, "o", "        for attr, value in attrs.items():\r\n"]
[273.038978, "o", "            setattr(out.info, attr, value)\r\n"]
[273.051307, "o", "\r\n"]
[273.063636, "o", "        return out\r\n"]
[273.075965, "o", "\r\n"]
[273.088294, "o", "    def get_sortable_arrays(self):\r\n"]
[273.100623, "o", "        \"\"\"\r\n"]
[273.112953, "o", "        Return a list of arrays which can be lexically sorted to represent\r\n"]
[273.125282, "o", "        the order of the parent column.\r\n"]
[273.137611, "o", "\r\n"]
[273.14994, "o", "        For Quantity this is just the quantity itself.\r\n"]
[273.162269, "o", "\r\n"]
[273.174599, "o", "\r\n"]
[273.186928, "o", "        Returns\r\n"]
[273.199257, "o", "        -------\r\n"]
[273.211586, "o", "        arrays : list of ndarray\r\n"]
[273.223915, "o", "        \"\"\"\r\n"]
[273.236244, "o", "        return [self._parent]\r\n"]
[273.248574, "o", "\r\n"]
[273.260903, "o", "\r\n"]
[273.273232, "o", "class Quantity(np.ndarray):\r\n"]
[273.285561, "o", "    \"\"\"A `~astropy.units.Quantity` represents a number with some associated unit.\r\n"]
[273.29789, "o", "\r\n"]
[273.310219, "o", "    See also: https://docs.astropy.org/en/stable/units/quantity.html\r\n"]
[273.322549, "o", "\r\n"]
[273.334878, "o", "    Parameters\r\n"]
[273.347207, "o", "    ----------\r\n"]
[273.359536, "o", "    value : number, `~numpy.ndarray`, `~astropy.units.Quantity` (sequence), or str\r\n"]
[273.371865, "o", "        The numerical value of this quantity in the units given by unit.  If a\r\n"]
[273.384195, "o", "        `Quantity` or sequence of them (or any other valid object with a\r\n"]
[273.396524, "o", "        ``unit`` attribute), creates a new `Quantity` object, converting to\r\n"]
[273.408853, "o", "        `unit` units as needed.  If a string, it is converted to a number or\r\n"]
[273.421182, "o", "        `Quantity`, depending on whether a unit is present.\r\n"]
[273.433511, "o", "\r\n"]
[273.44584, "o", "    unit : unit-like\r\n"]
[273.45817, "o", "        An object that represents the unit associated with the input value.\r\n"]
[273.470499, "o", "        Must be an `~astropy.units.UnitBase` object or a string parseable by\r\n"]
[273.482828, "o", "        the :mod:`~astropy.units` package.\r\n"]
[273.495157, "o", "\r\n"]
[273.507486, "o", "    dtype : ~numpy.dtype, optional\r\n"]
[273.519815, "o", "        The dtype of the resulting Numpy array or scalar that will\r\n"]
[273.532145, "o", "        hold the value.  If not provided, it is determined from the input,\r\n"]
[273.544474, "o", "        except that any integer and (non-Quantity) object inputs are converted\r\n"]
[273.556803, "o", "        to float by default.\r\n"]
[273.569132, "o", "        If `None`, the normal `numpy.dtype` introspection is used, e.g.\r\n"]
[273.581461, "o", "        preventing upcasting of integers.\r\n"]
[273.593791, "o", "\r\n"]
[273.60612, "o", "    copy : bool, optional\r\n"]
[273.618449, "o", "        If `True` (default), then the value is copied.  Otherwise, a copy will\r\n"]
[273.630778, "o", "        only be made if ``__array__`` returns a copy, if value is a nested\r\n"]
[273.643107, "o", "        sequence, or if a copy is needed to satisfy an explicitly given\r\n"]
[273.655436, "o", "        ``dtype``.  (The `False` option is intended mostly for internal use,\r\n"]
[273.667766, "o", "        to speed up initialization where a copy is known to have been made.\r\n"]
[273.680095, "o", "        Use with care.)\r\n"]
[273.692424, "o", "\r\n"]
[273.704753, "o", "    order : {'C', 'F', 'A'}, optional\r\n"]
[273.717082, "o", "        Specify the order of the array.  As in `~numpy.array`.  This parameter\r\n"]
[273.729411, "o", "        is ignored if the input is a `Quantity` and ``copy=False``.\r\n"]
[273.741741, "o", "\r\n"]
[273.75407, "o", "    subok : bool, optional\r\n"]
[273.766399, "o", "        If `False` (default), the returned array will be forced to be a\r\n"]
[273.778728, "o", "        `Quantity`.  Otherwise, `Quantity` subclasses will be passed through,\r\n"]
[273.791057, "o", "        or a subclass appropriate for the unit will be used (such as\r\n"]
[273.803387, "o", "        `~astropy.units.Dex` for ``u.dex(u.AA)``).\r\n"]
[273.815716, "o", "\r\n"]
[273.828045, "o", "    ndmin : int, optional\r\n"]
[273.840374, "o", "        Specifies the minimum number of dimensions that the resulting array\r\n"]
[273.852703, "o", "        should have.  Ones will be prepended to the shape as needed to meet\r\n"]
[273.865032, "o", "        this requirement.  This parameter is ignored if the input is a\r\n"]
[273.877362, "o", "        `Quantity` and ``copy=False``.\r\n"]
[273.889691, "o", "\r\n"]
[273.90202, "o", "    Raises\r\n"]
[273.914349, "o", "    ------\r\n"]
[273.926678, "o", "    TypeError\r\n"]
[273.939007, "o", "        If the value provided is not a Python numeric type.\r\n"]
[273.951337, "o", "    TypeError\r\n"]
[273.963666, "o", "        If the unit provided is not either a :class:`~astropy.units.Unit`\r\n"]
[273.975995, "o", "        object or a parseable string unit.\r\n"]
[273.988324, "o", "\r\n"]
[274.000653, "o", "    Notes\r\n"]
[274.012983, "o", "    -----\r\n"]
[274.025312, "o", "    Quantities can also be created by multiplying a number or array with a\r\n"]
[274.037641, "o", "    :class:`~astropy.units.Unit`. See https://docs.astropy.org/en/latest/units/\r\n"]
[274.04997, "o", "\r\n"]
[274.062299, "o", "    Unless the ``dtype`` argument is explicitly specified, integer\r\n"]
[274.074628, "o", "    or (non-Quantity) object inputs are converted to `float` by default.\r\n"]
[274.086958, "o", "    \"\"\"\r\n"]
[274.099287, "o", "\r\n"]
[274.111616, "o", "    # Need to set a class-level default for _equivalencies, or\r\n"]
[274.123945, "o", "    # Constants can not initialize properly\r\n"]
[274.136274, "o", "    _equivalencies = []\r\n"]
[274.148603, "o", "\r\n"]
[274.160933, "o", "    # Default unit for initialization; can be overridden by subclasses,\r\n"]
[274.173262, "o", "    # possibly to `None` to indicate there is no default unit.\r\n"]
[274.185591, "o", "    _default_unit = dimensionless_unscaled\r\n"]
[274.19792, "o", "\r\n"]
[274.210249, "o", "    # Ensures views have an undefined unit.\r\n"]
[274.222579, "o", "    _unit = None\r\n"]
[274.234908, "o", "\r\n"]
[274.247237, "o", "    __array_priority__ = 10000\r\n"]
[274.259566, "o", "\r\n"]
[274.271895, "o", "    def __class_getitem__(cls, unit_shape_dtype):\r\n"]
[274.284224, "o", "        \"\"\"Quantity Type Hints.\r\n"]
[274.296554, "o", "\r\n"]
[274.308883, "o", "        Unit-aware type hints are ``Annotated`` objects that encode the class,\r\n"]
[274.321212, "o", "        the unit, and possibly shape and dtype information, depending on the\r\n"]
[274.333541, "o", "        python and :mod:`numpy` versions.\r\n"]
[274.34587, "o", "\r\n"]
[274.3582, "o", "        Schematically, ``Annotated[cls[shape, dtype], unit]``\r\n"]
[274.370529, "o", "\r\n"]
[274.382858, "o", "        As a classmethod, the type is the class, ie ``Quantity``\r\n"]
[274.395187, "o", "        produces an ``Annotated[Quantity, ...]`` while a subclass\r\n"]
[274.407516, "o", "        like :class:`~astropy.coordinates.Angle` returns\r\n"]
[274.419845, "o", "        ``Annotated[Angle, ...]``.\r\n"]
[274.432175, "o", "\r\n"]
[274.444504, "o", "        Parameters\r\n"]
[274.456833, "o", "        ----------\r\n"]
[274.469162, "o", "        unit_shape_dtype : :class:`~astropy.units.UnitBase`, str, `~astropy.units.PhysicalType`, or tuple\r\n"]
[274.481491, "o", "            Unit specification, can be the physical type (ie str or class).\r\n"]
[274.49382, "o", "            If tuple, then the first element is the unit specification\r\n"]
[274.50615, "o", "            and all other elements are for `numpy.ndarray` type annotations.\r\n"]
[274.518479, "o", "            Whether they are included depends on the python and :mod:`numpy`\r\n"]
[274.530808, "o", "            versions.\r\n"]
[274.543137, "o", "\r\n"]
[274.555466, "o", "        Returns\r\n"]
[274.567796, "o", "        -------\r\n"]
[274.580125, "o", "        `typing.Annotated`, `astropy.units.Unit`, or `astropy.units.PhysicalType`\r\n"]
[274.592454, "o", "            Return type in this preference order:\r\n"]
[274.604783, "o", "            * `typing.Annotated`\r\n"]
[274.617112, "o", "            * `astropy.units.Unit` or `astropy.units.PhysicalType`\r\n"]
[274.629441, "o", "\r\n"]
[274.641771, "o", "        Raises\r\n"]
[274.6541, "o", "        ------\r\n"]
[274.666429, "o", "        TypeError\r\n"]
[274.678758, "o", "            If the unit/physical_type annotation is not Unit-like or\r\n"]
[274.691087, "o", "            PhysicalType-like.\r\n"]
[274.703416, "o", "\r\n"]
[274.715746, "o", "        Examples\r\n"]
[274.728075, "o", "        --------\r\n"]
[274.740404, "o", "        Create a unit-aware Quantity type annotation\r\n"]
[274.752733, "o", "\r\n"]
[274.765062, "o", "            >>> Quantity[Unit(\"s\")]\r\n"]
[274.777392, "o", "            Annotated[Quantity, Unit(\"s\")]\r\n"]
[274.789721, "o", "\r\n"]
[274.80205, "o", "        See Also\r\n"]
[274.814379, "o", "        --------\r\n"]
[274.826708, "o", "        `~astropy.units.quantity_input`\r\n"]
[274.839037, "o", "            Use annotations for unit checks on function arguments and results.\r\n"]
[274.851367, "o", "\r\n"]
[274.863696, "o", "        Notes\r\n"]
[274.876025, "o", "        -----\r\n"]
[274.888354, "o", "        |Quantity| types are also static-type compatible.\r\n"]
[274.900683, "o", "        \"\"\"\r\n"]
[274.913012, "o", "        from typing import Annotated\r\n"]
[274.925342, "o", "\r\n"]
[274.937671, "o", "        # process whether [unit] or [unit, shape, ptype]\r\n"]
[275.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[275.002, "i", "sed -n '400,1200p' astropy/units/quantity.py\r"]
[275.004, "o", "sed -n '400,1200p' astropy/units/quantity.py\r\n"]
[275.016, "o", "\u001b[?2004l\r\n"]
[275.026, "o", "        if isinstance(unit_shape_dtype, tuple):  # unit, shape, dtype\r\n"]
[275.036, "o", "            target = unit_shape_dtype[0]\r\n"]
[275.046, "o", "            shape_dtype = unit_shape_dtype[1:]\r\n"]
[275.056, "o", "        else:  # just unit\r\n"]
[275.066, "o", "            target = unit_shape_dtype\r\n"]
[275.076, "o", "            shape_dtype = ()\r\n"]
[275.086, "o", "\r\n"]
[275.096, "o", "        # Allowed unit/physical types. Errors if neither.\r\n"]
[275.106, "o", "        try:\r\n"]
[275.116, "o", "            unit = Unit(target)\r\n"]
[275.126, "o", "        except (TypeError, ValueError):\r\n"]
[275.136, "o", "            from astropy.units.physical import get_physical_type\r\n"]
[275.146, "o", "\r\n"]
[275.156, "o", "            try:\r\n"]
[275.166, "o", "                unit = get_physical_type(target)\r\n"]
[275.176, "o", "            except (TypeError, ValueError, KeyError):  # KeyError for Enum\r\n"]
[275.186, "o", "                raise TypeError(\r\n"]
[275.196, "o", "                    \"unit annotation is not a Unit or PhysicalType\"\r\n"]
[275.206, "o", "                ) from None\r\n"]
[275.216, "o", "\r\n"]
[275.226, "o", "        # Quantity does not (yet) properly extend the NumPy generics types,\r\n"]
[275.236, "o", "        # introduced in numpy v1.22+, instead just including the unit info as\r\n"]
[275.246, "o", "        # metadata using Annotated.\r\n"]
[275.256, "o", "        # TODO: ensure we do interact with NDArray.__class_getitem__.\r\n"]
[275.266, "o", "        return Annotated[cls, unit]\r\n"]
[275.276, "o", "\r\n"]
[275.286, "o", "    def __new__(\r\n"]
[275.296, "o", "        cls: type[Self],\r\n"]
[275.306, "o", "        value: QuantityLike,\r\n"]
[275.316, "o", "        unit=None,\r\n"]
[275.326, "o", "        dtype=np.inexact,\r\n"]
[275.336, "o", "        copy=True,\r\n"]
[275.346, "o", "        order=None,\r\n"]
[275.356, "o", "        subok=False,\r\n"]
[275.366, "o", "        ndmin=0,\r\n"]
[275.376, "o", "    ) -> Self:\r\n"]
[275.386, "o", "        if unit is not None:\r\n"]
[275.396, "o", "            # convert unit first, to avoid multiple string->unit conversions\r\n"]
[275.406, "o", "            unit = Unit(unit)\r\n"]
[275.416, "o", "\r\n"]
[275.426, "o", "        # inexact -> upcast to float dtype\r\n"]
[275.436, "o", "        float_default = dtype is np.inexact\r\n"]
[275.446, "o", "        if float_default:\r\n"]
[275.456, "o", "            dtype = None\r\n"]
[275.466, "o", "\r\n"]
[275.476, "o", "        # optimize speed for Quantity with no dtype given, copy=COPY_IF_NEEDED\r\n"]
[275.486, "o", "        if isinstance(value, Quantity):\r\n"]
[275.496, "o", "            if unit is not None and unit is not value.unit:\r\n"]
[275.506, "o", "                value = value.to(unit)\r\n"]
[275.516, "o", "                # the above already makes a copy (with float dtype)\r\n"]
[275.526, "o", "                copy = COPY_IF_NEEDED\r\n"]
[275.536, "o", "\r\n"]
[275.546, "o", "            if type(value) is not cls and not (subok and isinstance(value, cls)):\r\n"]
[275.556, "o", "                value = value.view(cls)\r\n"]
[275.566, "o", "\r\n"]
[275.576, "o", "            if float_default and value.dtype.kind in \"iu\":\r\n"]
[275.586, "o", "                dtype = float\r\n"]
[275.596, "o", "\r\n"]
[275.606, "o", "            return np.array(\r\n"]
[275.616, "o", "                value, dtype=dtype, copy=copy, order=order, subok=True, ndmin=ndmin\r\n"]
[275.626, "o", "            )\r\n"]
[275.636, "o", "\r\n"]
[275.646, "o", "        # Maybe str, or list/tuple of Quantity? If so, this may set value_unit.\r\n"]
[275.656, "o", "        # To ensure array remains fast, we short-circuit it.\r\n"]
[275.666, "o", "        value_unit = None\r\n"]
[275.676, "o", "        if not isinstance(value, np.ndarray):\r\n"]
[275.686, "o", "            if isinstance(value, str):\r\n"]
[275.696, "o", "                # The first part of the regex string matches any integer/float;\r\n"]
[275.706, "o", "                # the second parts adds possible trailing .+-, which will break\r\n"]
[275.716, "o", "                # the float function below and ensure things like 1.2.3deg\r\n"]
[275.726, "o", "                # will not work.\r\n"]
[275.736, "o", "                pattern = (\r\n"]
[275.746, "o", "                    r\"\\s*[+-]?\"\r\n"]
[275.756, "o", "                    r\"((\\d+\\.?\\d*)|(\\.\\d+)|([nN][aA][nN])|\"\r\n"]
[275.766, "o", "                    r\"([iI][nN][fF]([iI][nN][iI][tT][yY]){0,1}))\"\r\n"]
[275.776, "o", "                    r\"([eE][+-]?\\d+)?\"\r\n"]
[275.786, "o", "                    r\"[.+-]?\"\r\n"]
[275.796, "o", "                )\r\n"]
[275.806, "o", "\r\n"]
[275.816, "o", "                v = re.match(pattern, value)\r\n"]
[275.826, "o", "                unit_string = None\r\n"]
[275.836, "o", "                try:\r\n"]
[275.846, "o", "                    value = float(v.group())\r\n"]
[275.856, "o", "\r\n"]
[275.866, "o", "                except Exception:\r\n"]
[275.876, "o", "                    raise TypeError(\r\n"]
[275.886, "o", "                        f'Cannot parse \"{value}\" as a {cls.__name__}. It does not '\r\n"]
[275.896, "o", "                        \"start with a number.\"\r\n"]
[275.906, "o", "                    )\r\n"]
[275.916, "o", "\r\n"]
[275.926, "o", "                unit_string = v.string[v.end() :].strip()\r\n"]
[275.936, "o", "                if unit_string:\r\n"]
[275.946, "o", "                    value_unit = Unit(unit_string)\r\n"]
[275.956, "o", "                    if unit is None:\r\n"]
[275.966, "o", "                        unit = value_unit  # signal no conversion needed below.\r\n"]
[275.976, "o", "\r\n"]
[275.986, "o", "            elif isinstance(value, (list, tuple)) and len(value) > 0:\r\n"]
[275.996, "o", "                if all(isinstance(v, Quantity) for v in value):\r\n"]
[276.006, "o", "                    # If a list/tuple contains only quantities, stack them,\r\n"]
[276.016, "o", "                    # which also converts them to the same unit.\r\n"]
[276.026, "o", "                    value = np.stack(value)\r\n"]
[276.036, "o", "                    copy = False\r\n"]
[276.046, "o", "\r\n"]
[276.056, "o", "                elif (\r\n"]
[276.066, "o", "                    dtype is None\r\n"]
[276.076, "o", "                    and not hasattr(value, \"dtype\")\r\n"]
[276.086, "o", "                    and isinstance(unit, StructuredUnit)\r\n"]
[276.096, "o", "                ):\r\n"]
[276.106, "o", "                    # Special case for list/tuple of values and a structured unit:\r\n"]
[276.116, "o", "                    # ``np.array(value, dtype=None)`` would treat tuples as lower\r\n"]
[276.126, "o", "                    # levels of the array, rather than as elements of a structured\r\n"]
[276.136, "o", "                    # array, so we use the structure of the unit to help infer the\r\n"]
[276.146, "o", "                    # structured dtype of the value.\r\n"]
[276.156, "o", "                    dtype = unit._recursively_get_dtype(value)\r\n"]
[276.166, "o", "\r\n"]
[276.176, "o", "        using_default_unit = False\r\n"]
[276.186, "o", "        if value_unit is None:\r\n"]
[276.196, "o", "            # If the value has a `unit` attribute and if not None\r\n"]
[276.206, "o", "            # (for Columns with uninitialized unit), treat it like a quantity.\r\n"]
[276.216, "o", "            value_unit = getattr(value, \"unit\", None)\r\n"]
[276.226, "o", "            if value_unit is None:\r\n"]
[276.236, "o", "                # Default to dimensionless for no (initialized) unit attribute.\r\n"]
[276.246, "o", "                if unit is None:\r\n"]
[276.256, "o", "                    using_default_unit = True\r\n"]
[276.266, "o", "                    unit = cls._default_unit\r\n"]
[276.276, "o", "                value_unit = unit  # signal below that no conversion is needed\r\n"]
[276.286, "o", "            else:\r\n"]
[276.296, "o", "                try:\r\n"]
[276.306, "o", "                    value_unit = Unit(value_unit)\r\n"]
[276.316, "o", "                except Exception as exc:\r\n"]
[276.326, "o", "                    raise TypeError(\r\n"]
[276.336, "o", "                        f\"The unit attribute {value.unit!r} of the input could \"\r\n"]
[276.346, "o", "                        \"not be parsed as an astropy Unit.\"\r\n"]
[276.356, "o", "                    ) from exc\r\n"]
[276.366, "o", "\r\n"]
[276.376, "o", "                if unit is None:\r\n"]
[276.386, "o", "                    unit = value_unit\r\n"]
[276.396, "o", "                elif unit is not value_unit:\r\n"]
[276.406, "o", "                    copy = COPY_IF_NEEDED  # copy will be made in conversion at end\r\n"]
[276.416, "o", "\r\n"]
[276.426, "o", "        value = np.array(\r\n"]
[276.436, "o", "            value, dtype=dtype, copy=copy, order=order, subok=True, ndmin=ndmin\r\n"]
[276.446, "o", "        )\r\n"]
[276.456, "o", "\r\n"]
[276.466, "o", "        # For no-user-input unit, make sure the constructed unit matches the\r\n"]
[276.476, "o", "        # structure of the data.\r\n"]
[276.486, "o", "        if using_default_unit and value.dtype.names is not None:\r\n"]
[276.496, "o", "            unit = value_unit = _structured_unit_like_dtype(value_unit, value.dtype)\r\n"]
[276.506, "o", "\r\n"]
[276.516, "o", "        # check that array contains numbers or long int objects\r\n"]
[276.526, "o", "        if value.dtype.kind in \"OSU\" and not (\r\n"]
[276.536, "o", "            value.dtype.kind == \"O\" and isinstance(value.item(0), numbers.Number)\r\n"]
[276.546, "o", "        ):\r\n"]
[276.556, "o", "            raise TypeError(\"The value must be a valid Python or Numpy numeric type.\")\r\n"]
[276.566, "o", "\r\n"]
[276.576, "o", "        # by default, cast any integer, boolean, etc., to float\r\n"]
[276.586, "o", "        if float_default and value.dtype.kind in \"iuO\":\r\n"]
[276.596, "o", "            value = value.astype(float)\r\n"]
[276.606, "o", "\r\n"]
[276.616, "o", "        # if we allow subclasses, allow a class from the unit.\r\n"]
[276.626, "o", "        if subok:\r\n"]
[276.636, "o", "            qcls = getattr(unit, \"_quantity_class\", cls)\r\n"]
[276.646, "o", "            if issubclass(qcls, cls):\r\n"]
[276.656, "o", "                cls = qcls\r\n"]
[276.666, "o", "\r\n"]
[276.676, "o", "        value = value.view(cls)\r\n"]
[276.686, "o", "        value._set_unit(value_unit)\r\n"]
[276.696, "o", "        if unit is value_unit:\r\n"]
[276.706, "o", "            return value\r\n"]
[276.716, "o", "        else:\r\n"]
[276.726, "o", "            # here we had non-Quantity input that had a \"unit\" attribute\r\n"]
[276.736, "o", "            # with a unit different from the desired one.  So, convert.\r\n"]
[276.746, "o", "            return value.to(unit)\r\n"]
[276.756, "o", "\r\n"]
[276.766, "o", "    def __array_finalize__(self, obj):\r\n"]
[276.776, "o", "        # Check whether super().__array_finalize should be called\r\n"]
[276.786, "o", "        # (sadly, ndarray.__array_finalize__ is None; we cannot be sure\r\n"]
[276.796, "o", "        # what is above us).\r\n"]
[276.806, "o", "        super_array_finalize = super().__array_finalize__\r\n"]
[276.816, "o", "        if super_array_finalize is not None:\r\n"]
[276.826, "o", "            super_array_finalize(obj)\r\n"]
[276.836, "o", "\r\n"]
[276.846, "o", "        # If we're a new object or viewing an ndarray, nothing has to be done.\r\n"]
[276.856, "o", "        if obj is None or obj.__class__ is np.ndarray:\r\n"]
[276.866, "o", "            return\r\n"]
[276.876, "o", "\r\n"]
[276.886, "o", "        # Copy over the unit and possibly info.  Note that the only way the\r\n"]
[276.896, "o", "        # unit can already be set is if one enters via _new_view(), where the\r\n"]
[276.906, "o", "        # unit is often different from that of self, and where propagation of\r\n"]
[276.916, "o", "        # info is not always desirable.\r\n"]
[276.926, "o", "        if self._unit is None:\r\n"]
[276.936, "o", "            unit = getattr(obj, \"_unit\", None)\r\n"]
[276.946, "o", "            if unit is not None:\r\n"]
[276.956, "o", "                self._set_unit(unit)\r\n"]
[276.966, "o", "\r\n"]
[276.976, "o", "            # Copy info if the original had `info` defined.  Because of the way the\r\n"]
[276.986, "o", "            # DataInfo works, `'info' in obj.__dict__` is False until the\r\n"]
[276.996, "o", "            # `info` attribute is accessed or set.\r\n"]
[277.006, "o", "            if \"info\" in obj.__dict__:\r\n"]
[277.016, "o", "                self.info = obj.info\r\n"]
[277.026, "o", "\r\n"]
[277.036, "o", "    def __array_wrap__(self, obj, context=None, return_scalar=False):\r\n"]
[277.046, "o", "        if context is None:\r\n"]
[277.056, "o", "            # Methods like .squeeze() created a new `ndarray` and then call\r\n"]
[277.066, "o", "            # __array_wrap__ to turn the array into self's subclass.\r\n"]
[277.076, "o", "            return self._new_view(obj)\r\n"]
[277.086, "o", "\r\n"]
[277.096, "o", "        raise NotImplementedError(\r\n"]
[277.106, "o", "            \"__array_wrap__ should not be used with a context any more since all \"\r\n"]
[277.116, "o", "            \"use should go through array_function. Please raise an issue on \"\r\n"]
[277.126, "o", "            \"https://github.com/astropy/astropy\"\r\n"]
[277.136, "o", "        )\r\n"]
[277.146, "o", "\r\n"]
[277.156, "o", "    def __array_ufunc__(self, function, method, *inputs, **kwargs):\r\n"]
[277.166, "o", "        \"\"\"Wrap numpy ufuncs, taking care of units.\r\n"]
[277.176, "o", "\r\n"]
[277.186, "o", "        Parameters\r\n"]
[277.196, "o", "        ----------\r\n"]
[277.206, "o", "        function : callable\r\n"]
[277.216, "o", "            ufunc to wrap.\r\n"]
[277.226, "o", "        method : str\r\n"]
[277.236, "o", "            Ufunc method: ``__call__``, ``at``, ``reduce``, etc.\r\n"]
[277.246, "o", "        inputs : tuple\r\n"]
[277.256, "o", "            Input arrays.\r\n"]
[277.266, "o", "        kwargs : keyword arguments\r\n"]
[277.276, "o", "            As passed on, with ``out`` containing possible quantity output.\r\n"]
[277.286, "o", "\r\n"]
[277.296, "o", "        Returns\r\n"]
[277.306, "o", "        -------\r\n"]
[277.316, "o", "        result : `~astropy.units.Quantity` or `NotImplemented`\r\n"]
[277.326, "o", "            Results of the ufunc, with the unit set properly.\r\n"]
[277.336, "o", "        \"\"\"\r\n"]
[277.346, "o", "        # Determine required conversion functions -- to bring the unit of the\r\n"]
[277.356, "o", "        # input to that expected (e.g., radian for np.sin), or to get\r\n"]
[277.366, "o", "        # consistent units between two inputs (e.g., in np.add) --\r\n"]
[277.376, "o", "        # and the unit of the result (or tuple of units for nout > 1).\r\n"]
[277.386, "o", "        try:\r\n"]
[277.396, "o", "            converters, unit = converters_and_unit(function, method, *inputs)\r\n"]
[277.406, "o", "\r\n"]
[277.416, "o", "            out = kwargs.get(\"out\", None)\r\n"]
[277.426, "o", "            # Avoid loop back by turning any Quantity output into array views.\r\n"]
[277.436, "o", "            if out is not None:\r\n"]
[277.446, "o", "                # If pre-allocated output is used, check it is suitable.\r\n"]
[277.456, "o", "                # This also returns array view, to ensure we don't loop back.\r\n"]
[277.466, "o", "                if function.nout == 1:\r\n"]
[277.476, "o", "                    out = out[0]\r\n"]
[277.486, "o", "                out_array = check_output(out, unit, inputs, function=function)\r\n"]
[277.496, "o", "                # Ensure output argument remains a tuple.\r\n"]
[277.506, "o", "                kwargs[\"out\"] = (out_array,) if function.nout == 1 else out_array\r\n"]
[277.516, "o", "\r\n"]
[277.526, "o", "            if method == \"reduce\" and \"initial\" in kwargs and unit is not None:\r\n"]
[277.536, "o", "                # Special-case for initial argument for reductions like\r\n"]
[277.546, "o", "                # np.add.reduce.  This should be converted to the output unit as\r\n"]
[277.556, "o", "                # well, which is typically the same as the input unit (but can\r\n"]
[277.566, "o", "                # in principle be different: unitless for np.equal, radian\r\n"]
[277.576, "o", "                # for np.arctan2, though those are not necessarily useful!)\r\n"]
[277.586, "o", "                kwargs[\"initial\"] = self._to_own_unit(\r\n"]
[277.596, "o", "                    kwargs[\"initial\"], check_precision=False, unit=unit\r\n"]
[277.606, "o", "                )\r\n"]
[277.616, "o", "\r\n"]
[277.626, "o", "            # Same for inputs, but here also convert if necessary.\r\n"]
[277.636, "o", "            arrays = []\r\n"]
[277.646, "o", "            for input_, converter in zip(inputs, converters):\r\n"]
[277.656, "o", "                input_ = getattr(input_, \"value\", input_)\r\n"]
[277.666, "o", "                arrays.append(converter(input_) if converter else input_)\r\n"]
[277.676, "o", "\r\n"]
[277.686, "o", "            # Call our superclass's __array_ufunc__\r\n"]
[277.696, "o", "            result = super().__array_ufunc__(function, method, *arrays, **kwargs)\r\n"]
[277.706, "o", "            # If unit is None, a plain array is expected (e.g., comparisons), which\r\n"]
[277.716, "o", "            # means we're done.\r\n"]
[277.726, "o", "            # We're also done if the result was None (for method 'at') or\r\n"]
[277.736, "o", "            # NotImplemented, which can happen if other inputs/outputs override\r\n"]
[277.746, "o", "            # __array_ufunc__; hopefully, they can then deal with us.\r\n"]
[277.756, "o", "            if unit is None or result is None or result is NotImplemented:\r\n"]
[277.766, "o", "                return result\r\n"]
[277.776, "o", "\r\n"]
[277.786, "o", "            return self._result_as_quantity(result, unit, out)\r\n"]
[277.796, "o", "\r\n"]
[277.806, "o", "        except (TypeError, ValueError, AttributeError) as e:\r\n"]
[277.816, "o", "            out_normalized = kwargs.get(\"out\", ())\r\n"]
[277.826, "o", "            inputs_and_outputs = inputs + out_normalized\r\n"]
[277.836, "o", "            ignored_ufunc = (\r\n"]
[277.846, "o", "                None,\r\n"]
[277.856, "o", "                np.ndarray.__array_ufunc__,\r\n"]
[277.866, "o", "                type(self).__array_ufunc__,\r\n"]
[277.876, "o", "            )\r\n"]
[277.886, "o", "            if not all(\r\n"]
[277.896, "o", "                getattr(type(io), \"__array_ufunc__\", None) in ignored_ufunc\r\n"]
[277.906, "o", "                for io in inputs_and_outputs\r\n"]
[277.916, "o", "            ):\r\n"]
[277.926, "o", "                return NotImplemented\r\n"]
[277.936, "o", "            else:\r\n"]
[277.946, "o", "                raise e\r\n"]
[277.956, "o", "\r\n"]
[277.966, "o", "    def _result_as_quantity(self, result, unit, out):\r\n"]
[277.976, "o", "        \"\"\"Turn result into a quantity with the given unit.\r\n"]
[277.986, "o", "\r\n"]
[277.996, "o", "        If no output is given, it will take a view of the array as a quantity,\r\n"]
[278.006, "o", "        and set the unit.  If output is given, those should be quantity views\r\n"]
[278.016, "o", "        of the result arrays, and the function will just set the unit.\r\n"]
[278.026, "o", "\r\n"]
[278.036, "o", "        Parameters\r\n"]
[278.046, "o", "        ----------\r\n"]
[278.056, "o", "        result : ndarray or tuple thereof\r\n"]
[278.066, "o", "            Array(s) which need to be turned into quantity.\r\n"]
[278.076, "o", "        unit : `~astropy.units.Unit`\r\n"]
[278.086, "o", "            Unit for the quantities to be returned (or `None` if the result\r\n"]
[278.096, "o", "            should not be a quantity).  Should be tuple if result is a tuple.\r\n"]
[278.106, "o", "        out : `~astropy.units.Quantity` or None\r\n"]
[278.116, "o", "            Possible output quantity. Should be `None` or a tuple if result\r\n"]
[278.126, "o", "            is a tuple.\r\n"]
[278.136, "o", "\r\n"]
[278.146, "o", "        Returns\r\n"]
[278.156, "o", "        -------\r\n"]
[278.166, "o", "        out : `~astropy.units.Quantity`\r\n"]
[278.176, "o", "           With units set.\r\n"]
[278.186, "o", "        \"\"\"\r\n"]
[278.196, "o", "        if isinstance(result, (tuple, list)):\r\n"]
[278.206, "o", "            if out is None:\r\n"]
[278.216, "o", "                out = (None,) * len(result)\r\n"]
[278.226, "o", "            # Some np.linalg functions return namedtuple, which is handy to access\r\n"]
[278.236, "o", "            # elements by name, but cannot be directly initialized with an iterator.\r\n"]
[278.246, "o", "            result_cls = getattr(result, \"_make\", result.__class__)\r\n"]
[278.256, "o", "            return result_cls(\r\n"]
[278.266, "o", "                self._result_as_quantity(result_, unit_, out_)\r\n"]
[278.276, "o", "                for (result_, unit_, out_) in zip(result, unit, out)\r\n"]
[278.286, "o", "            )\r\n"]
[278.296, "o", "\r\n"]
[278.306, "o", "        if out is None:\r\n"]
[278.316, "o", "            # View the result array as a Quantity with the proper unit.\r\n"]
[278.326, "o", "            return (\r\n"]
[278.336, "o", "                result\r\n"]
[278.346, "o", "                if unit is None\r\n"]
[278.356, "o", "                else self._new_view(result, unit, propagate_info=False)\r\n"]
[278.366, "o", "            )\r\n"]
[278.376, "o", "\r\n"]
[278.386, "o", "        elif isinstance(out, Quantity):\r\n"]
[278.396, "o", "            # For given Quantity output, just set the unit. We know the unit\r\n"]
[278.406, "o", "            # is not None and the output is of the correct Quantity subclass,\r\n"]
[278.416, "o", "            # as it was passed through check_output.\r\n"]
[278.426, "o", "            # (We cannot do this unconditionally, though, since it is possible\r\n"]
[278.436, "o", "            # for out to be ndarray and the unit to be dimensionless.)\r\n"]
[278.446, "o", "            out._set_unit(unit)\r\n"]
[278.456, "o", "\r\n"]
[278.466, "o", "        return out\r\n"]
[278.476, "o", "\r\n"]
[278.486, "o", "    def __quantity_subclass__(self, unit):\r\n"]
[278.496, "o", "        \"\"\"\r\n"]
[278.506, "o", "        Overridden by subclasses to change what kind of view is\r\n"]
[278.516, "o", "        created based on the output unit of an operation.\r\n"]
[278.526, "o", "\r\n"]
[278.536, "o", "        Parameters\r\n"]
[278.546, "o", "        ----------\r\n"]
[278.556, "o", "        unit : UnitBase\r\n"]
[278.566, "o", "            The unit for which the appropriate class should be returned\r\n"]
[278.576, "o", "\r\n"]
[278.586, "o", "        Returns\r\n"]
[278.596, "o", "        -------\r\n"]
[278.606, "o", "        tuple :\r\n"]
[278.616, "o", "            - `~astropy.units.Quantity` subclass\r\n"]
[278.626, "o", "            - bool: True if subclasses of the given class are ok\r\n"]
[278.636, "o", "        \"\"\"\r\n"]
[278.646, "o", "        return Quantity, True\r\n"]
[278.656, "o", "\r\n"]
[278.666, "o", "    def _new_view(self, obj=None, unit=None, propagate_info=True):\r\n"]
[278.676, "o", "        \"\"\"Create a Quantity view of some array-like input, and set the unit.\r\n"]
[278.686, "o", "\r\n"]
[278.696, "o", "        By default, return a view of ``obj`` of the same class as ``self`` and\r\n"]
[278.706, "o", "        with the same unit.  Subclasses can override the type of class for a\r\n"]
[278.716, "o", "        given unit using ``__quantity_subclass__``, and can ensure properties\r\n"]
[278.726, "o", "        other than the unit are copied using ``__array_finalize__``.\r\n"]
[278.736, "o", "\r\n"]
[278.746, "o", "        If the given unit defines a ``_quantity_class`` of which ``self``\r\n"]
[278.756, "o", "        is not an instance, a view using this class is taken.\r\n"]
[278.766, "o", "\r\n"]
[278.776, "o", "        Parameters\r\n"]
[278.786, "o", "        ----------\r\n"]
[278.796, "o", "        obj : ndarray or scalar, optional\r\n"]
[278.806, "o", "            The array to create a view of.  If obj is a numpy or python scalar,\r\n"]
[278.816, "o", "            it will be converted to an array scalar.  By default, ``self``\r\n"]
[278.826, "o", "            is converted.\r\n"]
[278.836, "o", "\r\n"]
[278.846, "o", "        unit : unit-like, optional\r\n"]
[278.856, "o", "            The unit of the resulting object.  It is used to select a\r\n"]
[278.866, "o", "            subclass, and explicitly assigned to the view if given.\r\n"]
[278.876, "o", "            If not given, the subclass and unit will be that of ``self``.\r\n"]
[278.886, "o", "\r\n"]
[278.896, "o", "        propagate_info : bool, optional\r\n"]
[278.906, "o", "            Whether to transfer ``info`` if present.  Default: `True`, as\r\n"]
[278.916, "o", "            appropriate for, e.g., unit conversions or slicing, where the\r\n"]
[278.926, "o", "            nature of the object does not change.\r\n"]
[278.936, "o", "\r\n"]
[278.946, "o", "        Returns\r\n"]
[278.956, "o", "        -------\r\n"]
[278.966, "o", "        view : `~astropy.units.Quantity` subclass\r\n"]
[278.976, "o", "\r\n"]
[278.986, "o", "        \"\"\"\r\n"]
[278.996, "o", "        # Determine the unit and quantity subclass that we need for the view.\r\n"]
[279.006, "o", "        if unit is None:\r\n"]
[279.016, "o", "            unit = self.unit\r\n"]
[279.026, "o", "            quantity_subclass = self.__class__\r\n"]
[279.036, "o", "        elif unit is self.unit and self.__class__ is Quantity:\r\n"]
[279.046, "o", "            # The second part is because we should not presume what other\r\n"]
[279.056, "o", "            # classes want to do for the same unit.  E.g., Constant will\r\n"]
[279.066, "o", "            # always want to fall back to Quantity, and relies on going\r\n"]
[279.076, "o", "            # through `__quantity_subclass__`.\r\n"]
[279.086, "o", "            quantity_subclass = Quantity\r\n"]
[279.096, "o", "        else:\r\n"]
[279.106, "o", "            unit = Unit(unit)\r\n"]
[279.116, "o", "            quantity_subclass = getattr(unit, \"_quantity_class\", Quantity)\r\n"]
[279.126, "o", "            if isinstance(self, quantity_subclass):\r\n"]
[279.136, "o", "                quantity_subclass, subok = self.__quantity_subclass__(unit)\r\n"]
[279.146, "o", "                if subok:\r\n"]
[279.156, "o", "                    quantity_subclass = self.__class__\r\n"]
[279.166, "o", "\r\n"]
[279.176, "o", "        # We only want to propagate information from ``self`` to our new view,\r\n"]
[279.186, "o", "        # so obj should be a regular array.  By using ``np.array``, we also\r\n"]
[279.196, "o", "        # convert python and numpy scalars, which cannot be viewed as arrays\r\n"]
[279.206, "o", "        # and thus not as Quantity either, to zero-dimensional arrays.\r\n"]
[279.216, "o", "        # (These are turned back into scalar in `.value`)\r\n"]
[279.226, "o", "        # Note that for an ndarray input, the np.array call takes only double\r\n"]
[279.236, "o", "        # ``obj.__class is np.ndarray``. So, not worth special-casing.\r\n"]
[279.246, "o", "        if obj is None:\r\n"]
[279.256, "o", "            obj = self.view(np.ndarray)\r\n"]
[279.266, "o", "        else:\r\n"]
[279.276, "o", "            obj = np.array(obj, copy=COPY_IF_NEEDED, subok=True)\r\n"]
[279.286, "o", "\r\n"]
[279.296, "o", "        # Take the view, set the unit, and update possible other properties\r\n"]
[279.306, "o", "        # such as ``info``, ``wrap_angle`` in `Longitude`, etc.\r\n"]
[279.316, "o", "        view = obj.view(quantity_subclass)\r\n"]
[279.326, "o", "        view._set_unit(unit)\r\n"]
[279.336, "o", "        view.__array_finalize__(self)\r\n"]
[279.346, "o", "        if propagate_info and \"info\" in self.__dict__:\r\n"]
[279.356, "o", "            view.info = self.info\r\n"]
[279.366, "o", "        return view\r\n"]
[279.376, "o", "\r\n"]
[279.386, "o", "    def _set_unit(self, unit):\r\n"]
[279.396, "o", "        \"\"\"Set the unit.\r\n"]
[279.406, "o", "\r\n"]
[279.416, "o", "        This is used anywhere the unit is set or modified, i.e., in the\r\n"]
[279.426, "o", "        initializer, in ``__imul__`` and ``__itruediv__`` for in-place\r\n"]
[279.436, "o", "        multiplication and division by another unit, as well as in\r\n"]
[279.446, "o", "        ``__array_finalize__`` for wrapping up views.  For Quantity, it just\r\n"]
[279.456, "o", "        sets the unit, but subclasses can override it to check that, e.g.,\r\n"]
[279.466, "o", "        a unit is consistent.\r\n"]
[279.476, "o", "        \"\"\"\r\n"]
[279.486, "o", "        if not isinstance(unit, UnitBase):\r\n"]
[279.496, "o", "            if isinstance(self._unit, StructuredUnit) or isinstance(\r\n"]
[279.506, "o", "                unit, StructuredUnit\r\n"]
[279.516, "o", "            ):\r\n"]
[279.526, "o", "                unit = StructuredUnit(unit, self.dtype)\r\n"]
[279.536, "o", "            else:\r\n"]
[279.546, "o", "                # Trying to go through a string ensures that, e.g., Magnitudes with\r\n"]
[279.556, "o", "                # dimensionless physical unit become Quantity with units of mag.\r\n"]
[279.566, "o", "                unit = Unit(str(unit), parse_strict=\"silent\")\r\n"]
[279.576, "o", "                if not isinstance(unit, (UnitBase, StructuredUnit)):\r\n"]
[279.586, "o", "                    raise UnitTypeError(\r\n"]
[279.596, "o", "                        f\"{self.__class__.__name__} instances require normal units, \"\r\n"]
[279.606, "o", "                        f\"not {unit.__class__} instances.\"\r\n"]
[279.616, "o", "                    )\r\n"]
[279.626, "o", "\r\n"]
[279.636, "o", "        self._unit = unit\r\n"]
[279.646, "o", "\r\n"]
[279.656, "o", "    def __deepcopy__(self, memo):\r\n"]
[279.666, "o", "        # If we don't define this, ``copy.deepcopy(quantity)`` will\r\n"]
[279.676, "o", "        # return a bare Numpy array.\r\n"]
[279.686, "o", "        return self.copy()\r\n"]
[279.696, "o", "\r\n"]
[279.706, "o", "    def __reduce__(self):\r\n"]
[279.716, "o", "        # patch to pickle Quantity objects (ndarray subclasses), see\r\n"]
[279.726, "o", "        # http://www.mail-archive.com/numpy-discussion@scipy.org/msg02446.html\r\n"]
[279.736, "o", "\r\n"]
[279.746, "o", "        object_state = list(super().__reduce__())\r\n"]
[279.756, "o", "        object_state[2] = (object_state[2], self.__dict__)\r\n"]
[279.766, "o", "        return tuple(object_state)\r\n"]
[279.776, "o", "\r\n"]
[279.786, "o", "    def __setstate__(self, state):\r\n"]
[279.796, "o", "        # patch to unpickle Quantity objects (ndarray subclasses), see\r\n"]
[279.806, "o", "        # http://www.mail-archive.com/numpy-discussion@scipy.org/msg02446.html\r\n"]
[279.816, "o", "\r\n"]
[279.826, "o", "        nd_state, own_state = state\r\n"]
[279.836, "o", "        super().__setstate__(nd_state)\r\n"]
[279.846, "o", "        self.__dict__.update(own_state)\r\n"]
[279.856, "o", "\r\n"]
[279.866, "o", "    info = QuantityInfo()\r\n"]
[279.876, "o", "\r\n"]
[279.886, "o", "    def _to_value(self, unit, equivalencies=[]):\r\n"]
[279.896, "o", "        \"\"\"Helper method for to and to_value.\"\"\"\r\n"]
[279.906, "o", "        if equivalencies == []:\r\n"]
[279.916, "o", "            equivalencies = self._equivalencies\r\n"]
[279.926, "o", "        if not self.dtype.names or isinstance(self.unit, StructuredUnit):\r\n"]
[279.936, "o", "            # Standard path, let unit to do work.\r\n"]
[280.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[280.002, "i", "sed -n '1200,2000p' astropy/units/quantity.py\r"]
[280.004, "o", "sed -n '1200,2000p' astropy/units/quantity.py\r\n"]
[280.016, "o", "\u001b[?2004l\r\n"]
[280.026, "o", "    # behaviour, but instead of emitting a warning here, let it be done by\r\n"]
[280.036, "o", "    # other (which likely is a unit if this was a mistake).\r\n"]
[280.046, "o", "    def __rshift__(self, other):\r\n"]
[280.056, "o", "        return NotImplemented\r\n"]
[280.066, "o", "\r\n"]
[280.076, "o", "    def __irshift__(self, other):\r\n"]
[280.086, "o", "        return NotImplemented\r\n"]
[280.096, "o", "\r\n"]
[280.106, "o", "    # Arithmetic operations\r\n"]
[280.116, "o", "    def __mul__(self, other):\r\n"]
[280.126, "o", "        \"\"\"Multiplication between `Quantity` objects and other objects.\"\"\"\r\n"]
[280.136, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[280.146, "o", "            try:\r\n"]
[280.156, "o", "                return self._new_view(\r\n"]
[280.166, "o", "                    self.value.copy(), other * self.unit, propagate_info=False\r\n"]
[280.176, "o", "                )\r\n"]
[280.186, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[280.196, "o", "                return NotImplemented\r\n"]
[280.206, "o", "\r\n"]
[280.216, "o", "        return super().__mul__(other)\r\n"]
[280.226, "o", "\r\n"]
[280.236, "o", "    def __imul__(self, other):\r\n"]
[280.246, "o", "        \"\"\"In-place multiplication between `Quantity` objects and others.\"\"\"\r\n"]
[280.256, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[280.266, "o", "            self._set_unit(other * self.unit)\r\n"]
[280.276, "o", "            return self\r\n"]
[280.286, "o", "\r\n"]
[280.296, "o", "        return super().__imul__(other)\r\n"]
[280.306, "o", "\r\n"]
[280.316, "o", "    def __rmul__(self, other):\r\n"]
[280.326, "o", "        \"\"\"\r\n"]
[280.336, "o", "        Right Multiplication between `Quantity` objects and other objects.\r\n"]
[280.346, "o", "        \"\"\"\r\n"]
[280.356, "o", "        return self.__mul__(other)\r\n"]
[280.366, "o", "\r\n"]
[280.376, "o", "    def __truediv__(self, other):\r\n"]
[280.386, "o", "        \"\"\"Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[280.396, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[280.406, "o", "            try:\r\n"]
[280.416, "o", "                return self._new_view(\r\n"]
[280.426, "o", "                    self.value.copy(), self.unit / other, propagate_info=False\r\n"]
[280.436, "o", "                )\r\n"]
[280.446, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[280.456, "o", "                return NotImplemented\r\n"]
[280.466, "o", "\r\n"]
[280.476, "o", "        return super().__truediv__(other)\r\n"]
[280.486, "o", "\r\n"]
[280.496, "o", "    def __itruediv__(self, other):\r\n"]
[280.506, "o", "        \"\"\"Inplace division between `Quantity` objects and other objects.\"\"\"\r\n"]
[280.516, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[280.526, "o", "            self._set_unit(self.unit / other)\r\n"]
[280.536, "o", "            return self\r\n"]
[280.546, "o", "\r\n"]
[280.556, "o", "        return super().__itruediv__(other)\r\n"]
[280.566, "o", "\r\n"]
[280.576, "o", "    def __rtruediv__(self, other):\r\n"]
[280.586, "o", "        \"\"\"Right Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[280.596, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[280.606, "o", "            return self._new_view(\r\n"]
[280.616, "o", "                1.0 / self.value, other / self.unit, propagate_info=False\r\n"]
[280.626, "o", "            )\r\n"]
[280.636, "o", "\r\n"]
[280.646, "o", "        return super().__rtruediv__(other)\r\n"]
[280.656, "o", "\r\n"]
[280.666, "o", "    def __pow__(self, other):\r\n"]
[280.676, "o", "        if isinstance(other, Fraction):\r\n"]
[280.686, "o", "            # Avoid getting object arrays by raising the value to a Fraction.\r\n"]
[280.696, "o", "            return self._new_view(\r\n"]
[280.706, "o", "                self.value ** float(other), self.unit**other, propagate_info=False\r\n"]
[280.716, "o", "            )\r\n"]
[280.726, "o", "\r\n"]
[280.736, "o", "        return super().__pow__(other)\r\n"]
[280.746, "o", "\r\n"]
[280.756, "o", "    # other overrides of special functions\r\n"]
[280.766, "o", "    def __hash__(self):\r\n"]
[280.776, "o", "        return hash(self.value) ^ hash(self.unit)\r\n"]
[280.786, "o", "\r\n"]
[280.796, "o", "    def __iter__(self):\r\n"]
[280.806, "o", "        if self.isscalar:\r\n"]
[280.816, "o", "            raise TypeError(\r\n"]
[280.826, "o", "                f\"'{self.__class__.__name__}' object with a scalar value is not\"\r\n"]
[280.836, "o", "                \" iterable\"\r\n"]
[280.846, "o", "            )\r\n"]
[280.856, "o", "\r\n"]
[280.866, "o", "        # Otherwise return a generator\r\n"]
[280.876, "o", "        def quantity_iter():\r\n"]
[280.886, "o", "            for val in self.value:\r\n"]
[280.896, "o", "                yield self._new_view(val)\r\n"]
[280.906, "o", "\r\n"]
[280.916, "o", "        return quantity_iter()\r\n"]
[280.926, "o", "\r\n"]
[280.936, "o", "    def __getitem__(self, key):\r\n"]
[280.946, "o", "        if isinstance(key, str) and isinstance(self.unit, StructuredUnit):\r\n"]
[280.956, "o", "            return self._new_view(\r\n"]
[280.966, "o", "                self.view(np.ndarray)[key], self.unit[key], propagate_info=False\r\n"]
[280.976, "o", "            )\r\n"]
[280.986, "o", "\r\n"]
[280.996, "o", "        try:\r\n"]
[281.006, "o", "            out = super().__getitem__(key)\r\n"]
[281.016, "o", "        except IndexError:\r\n"]
[281.026, "o", "            # We want zero-dimensional Quantity objects to behave like scalars,\r\n"]
[281.036, "o", "            # so they should raise a TypeError rather than an IndexError.\r\n"]
[281.046, "o", "            if self.isscalar:\r\n"]
[281.056, "o", "                raise TypeError(\r\n"]
[281.066, "o", "                    f\"'{self.__class__.__name__}' object with a scalar value \"\r\n"]
[281.076, "o", "                    \"does not support indexing\"\r\n"]
[281.086, "o", "                )\r\n"]
[281.096, "o", "            else:\r\n"]
[281.106, "o", "                raise\r\n"]
[281.116, "o", "        # For single elements, ndarray.__getitem__ returns scalars; these\r\n"]
[281.126, "o", "        # need a new view as a Quantity.\r\n"]
[281.136, "o", "        if not isinstance(out, np.ndarray):\r\n"]
[281.146, "o", "            out = self._new_view(out)\r\n"]
[281.156, "o", "        return out\r\n"]
[281.166, "o", "\r\n"]
[281.176, "o", "    def __setitem__(self, i, value):\r\n"]
[281.186, "o", "        if isinstance(i, str):\r\n"]
[281.196, "o", "            # Indexing will cause a different unit, so by doing this in\r\n"]
[281.206, "o", "            # two steps we effectively try with the right unit.\r\n"]
[281.216, "o", "            self[i][...] = value\r\n"]
[281.226, "o", "            return\r\n"]
[281.236, "o", "\r\n"]
[281.246, "o", "        # update indices in info if the info property has been accessed\r\n"]
[281.256, "o", "        # (in which case 'info' in self.__dict__ is True; this is guaranteed\r\n"]
[281.266, "o", "        # to be the case if we're part of a table).\r\n"]
[281.276, "o", "        if not self.isscalar and \"info\" in self.__dict__:\r\n"]
[281.286, "o", "            self.info.adjust_indices(i, value, len(self))\r\n"]
[281.296, "o", "        self.view(np.ndarray).__setitem__(i, self._to_own_unit(value))\r\n"]
[281.306, "o", "\r\n"]
[281.316, "o", "    # __contains__ is OK\r\n"]
[281.326, "o", "\r\n"]
[281.336, "o", "    def __bool__(self):\r\n"]
[281.346, "o", "        \"\"\"This method raises ValueError, since truthiness of quantities is ambiguous,\r\n"]
[281.356, "o", "        especially for logarithmic units and temperatures. Use explicit comparisons.\r\n"]
[281.366, "o", "        \"\"\"\r\n"]
[281.376, "o", "        raise ValueError(\r\n"]
[281.386, "o", "            f\"{type(self).__name__} truthiness is ambiguous, especially for logarithmic units\"\r\n"]
[281.396, "o", "            \" and temperatures. Use explicit comparisons.\"\r\n"]
[281.406, "o", "        )\r\n"]
[281.416, "o", "\r\n"]
[281.426, "o", "    def __len__(self):\r\n"]
[281.436, "o", "        if self.isscalar:\r\n"]
[281.446, "o", "            raise TypeError(\r\n"]
[281.456, "o", "                f\"'{self.__class__.__name__}' object with a scalar value has no len()\"\r\n"]
[281.466, "o", "            )\r\n"]
[281.476, "o", "        else:\r\n"]
[281.486, "o", "            return len(self.value)\r\n"]
[281.496, "o", "\r\n"]
[281.506, "o", "    # Numerical types\r\n"]
[281.516, "o", "    def __float__(self):\r\n"]
[281.526, "o", "        try:\r\n"]
[281.536, "o", "            return float(self.to_value(dimensionless_unscaled))\r\n"]
[281.546, "o", "        except (UnitsError, TypeError):\r\n"]
[281.556, "o", "            raise TypeError(\r\n"]
[281.566, "o", "                \"only dimensionless scalar quantities can be \"\r\n"]
[281.576, "o", "                \"converted to Python scalars\"\r\n"]
[281.586, "o", "            )\r\n"]
[281.596, "o", "\r\n"]
[281.606, "o", "    def __int__(self):\r\n"]
[281.616, "o", "        try:\r\n"]
[281.626, "o", "            return int(self.to_value(dimensionless_unscaled))\r\n"]
[281.636, "o", "        except (UnitsError, TypeError):\r\n"]
[281.646, "o", "            raise TypeError(\r\n"]
[281.656, "o", "                \"only dimensionless scalar quantities can be \"\r\n"]
[281.666, "o", "                \"converted to Python scalars\"\r\n"]
[281.676, "o", "            )\r\n"]
[281.686, "o", "\r\n"]
[281.696, "o", "    def __index__(self):\r\n"]
[281.706, "o", "        # for indices, we do not want to mess around with scaling at all,\r\n"]
[281.716, "o", "        # so unlike for float, int, we insist here on unscaled dimensionless\r\n"]
[281.726, "o", "        try:\r\n"]
[281.736, "o", "            assert self.unit.is_unity()\r\n"]
[281.746, "o", "            return self.value.__index__()\r\n"]
[281.756, "o", "        except Exception:\r\n"]
[281.766, "o", "            raise TypeError(\r\n"]
[281.776, "o", "                \"only integer dimensionless scalar quantities \"\r\n"]
[281.786, "o", "                \"can be converted to a Python index\"\r\n"]
[281.796, "o", "            )\r\n"]
[281.806, "o", "\r\n"]
[281.816, "o", "    # TODO: we may want to add a hook for dimensionless quantities?\r\n"]
[281.826, "o", "    @property\r\n"]
[281.836, "o", "    def _unitstr(self):\r\n"]
[281.846, "o", "        if self.unit is None:\r\n"]
[281.856, "o", "            unitstr = _UNIT_NOT_INITIALISED\r\n"]
[281.866, "o", "        else:\r\n"]
[281.876, "o", "            unitstr = str(self.unit)\r\n"]
[281.886, "o", "\r\n"]
[281.896, "o", "        if unitstr:\r\n"]
[281.906, "o", "            unitstr = \" \" + unitstr\r\n"]
[281.916, "o", "\r\n"]
[281.926, "o", "        return unitstr\r\n"]
[281.936, "o", "\r\n"]
[281.946, "o", "    def to_string(\r\n"]
[281.956, "o", "        self, unit=None, precision=None, format=None, subfmt=None, *, formatter=None\r\n"]
[281.966, "o", "    ):\r\n"]
[281.976, "o", "        \"\"\"\r\n"]
[281.986, "o", "        Generate a string representation of the quantity and its unit.\r\n"]
[281.996, "o", "\r\n"]
[282.006, "o", "        The behavior of this function can be altered via the\r\n"]
[282.016, "o", "        `numpy.set_printoptions` function and its various keywords.  The\r\n"]
[282.026, "o", "        exception to this is the ``threshold`` keyword, which is controlled via\r\n"]
[282.036, "o", "        the ``[units.quantity]`` configuration item ``latex_array_threshold``.\r\n"]
[282.046, "o", "        This is treated separately because the numpy default of 1000 is too big\r\n"]
[282.056, "o", "        for most browsers to handle.\r\n"]
[282.066, "o", "\r\n"]
[282.076, "o", "        Parameters\r\n"]
[282.086, "o", "        ----------\r\n"]
[282.096, "o", "        unit : unit-like, optional\r\n"]
[282.106, "o", "            Specifies the unit.  If not provided,\r\n"]
[282.116, "o", "            the unit used to initialize the quantity will be used.\r\n"]
[282.126, "o", "\r\n"]
[282.136, "o", "        precision : number, optional\r\n"]
[282.146, "o", "            The level of decimal precision. If `None`, or not provided,\r\n"]
[282.156, "o", "            it will be determined from NumPy print options.\r\n"]
[282.166, "o", "\r\n"]
[282.176, "o", "        format : str, optional\r\n"]
[282.186, "o", "            The format of the result. If not provided, an unadorned\r\n"]
[282.196, "o", "            string is returned. Supported values are:\r\n"]
[282.206, "o", "\r\n"]
[282.216, "o", "            - 'latex': Return a LaTeX-formatted string\r\n"]
[282.226, "o", "\r\n"]
[282.236, "o", "            - 'latex_inline': Return a LaTeX-formatted string that uses\r\n"]
[282.246, "o", "              negative exponents instead of fractions\r\n"]
[282.256, "o", "\r\n"]
[282.266, "o", "        formatter : str, callable, dict, optional\r\n"]
[282.276, "o", "            The formatter to use for the value. If a string, it should be a\r\n"]
[282.286, "o", "            valid format specifier using Python's mini-language. If a callable,\r\n"]
[282.296, "o", "            it will be treated as the default formatter for all values and will\r\n"]
[282.306, "o", "            overwrite default Latex formatting for exponential notation and complex\r\n"]
[282.316, "o", "            numbers. If a dict, it should map a specific type to a callable to be\r\n"]
[282.326, "o", "            directly passed into `numpy.array2string`. If not provided, the default\r\n"]
[282.336, "o", "            formatter will be used.\r\n"]
[282.346, "o", "\r\n"]
[282.356, "o", "        subfmt : str, optional\r\n"]
[282.366, "o", "            Subformat of the result. For the moment, only used for\r\n"]
[282.376, "o", "            ``format='latex'`` and ``format='latex_inline'``. Supported\r\n"]
[282.386, "o", "            values are:\r\n"]
[282.396, "o", "\r\n"]
[282.406, "o", "            - 'inline': Use ``$ ... $`` as delimiters.\r\n"]
[282.416, "o", "\r\n"]
[282.426, "o", "            - 'display': Use ``$\\\\displaystyle ... $`` as delimiters.\r\n"]
[282.436, "o", "\r\n"]
[282.446, "o", "        Returns\r\n"]
[282.456, "o", "        -------\r\n"]
[282.466, "o", "        str\r\n"]
[282.476, "o", "            A string with the contents of this Quantity\r\n"]
[282.486, "o", "        \"\"\"\r\n"]
[282.496, "o", "        if unit is not None and unit != self.unit:\r\n"]
[282.506, "o", "            return self.to(unit).to_string(\r\n"]
[282.516, "o", "                unit=None,\r\n"]
[282.526, "o", "                precision=precision,\r\n"]
[282.536, "o", "                format=format,\r\n"]
[282.546, "o", "                subfmt=subfmt,\r\n"]
[282.556, "o", "                formatter=formatter,\r\n"]
[282.566, "o", "            )\r\n"]
[282.576, "o", "\r\n"]
[282.586, "o", "        if format is None and formatter is None and precision is None:\r\n"]
[282.596, "o", "            # Use default formatting settings\r\n"]
[282.606, "o", "            return f\"{self.value}{self._unitstr:s}\"\r\n"]
[282.616, "o", "\r\n"]
[282.626, "o", "        formats = {\r\n"]
[282.636, "o", "            None: None,\r\n"]
[282.646, "o", "            \"latex\": {\r\n"]
[282.656, "o", "                None: (\"$\", \"$\"),\r\n"]
[282.666, "o", "                \"inline\": (\"$\", \"$\"),\r\n"]
[282.676, "o", "                \"display\": (r\"$\\displaystyle \", r\"$\"),\r\n"]
[282.686, "o", "            },\r\n"]
[282.696, "o", "        }\r\n"]
[282.706, "o", "        formats[\"latex_inline\"] = formats[\"latex\"]\r\n"]
[282.716, "o", "\r\n"]
[282.726, "o", "        if format not in formats:\r\n"]
[282.736, "o", "            raise ValueError(f\"Unknown format '{format}'\")\r\n"]
[282.746, "o", "\r\n"]
[282.756, "o", "        format_spec = formatter if isinstance(formatter, str) else None\r\n"]
[282.766, "o", "\r\n"]
[282.776, "o", "        if format is None:\r\n"]
[282.786, "o", "            if format_spec is not None:\r\n"]
[282.796, "o", "\r\n"]
[282.806, "o", "                def formatter(value):\r\n"]
[282.816, "o", "                    return builtins.format(value, format_spec)\r\n"]
[282.826, "o", "\r\n"]
[282.836, "o", "            if callable(formatter):\r\n"]
[282.846, "o", "                formatter = {\"all\": formatter}\r\n"]
[282.856, "o", "\r\n"]
[282.866, "o", "            return (\r\n"]
[282.876, "o", "                np.array2string(\r\n"]
[282.886, "o", "                    self.value,\r\n"]
[282.896, "o", "                    precision=precision,\r\n"]
[282.906, "o", "                    floatmode=\"fixed\",\r\n"]
[282.916, "o", "                    formatter=formatter,\r\n"]
[282.926, "o", "                )\r\n"]
[282.936, "o", "                + self._unitstr\r\n"]
[282.946, "o", "            )\r\n"]
[282.956, "o", "\r\n"]
[282.966, "o", "        # else, for the moment we assume format=\"latex\" or \"latex_inline\".\r\n"]
[282.976, "o", "\r\n"]
[282.986, "o", "        # Set the precision if set, otherwise use numpy default\r\n"]
[282.996, "o", "        pops = np.get_printoptions()\r\n"]
[283.006, "o", "        if format_spec is None:\r\n"]
[283.016, "o", "            format_spec = (\r\n"]
[283.026, "o", "                f\".{precision if precision is not None else pops['precision']}g\"\r\n"]
[283.036, "o", "            )\r\n"]
[283.046, "o", "\r\n"]
[283.056, "o", "        # Use default formatters\r\n"]
[283.066, "o", "        if formatter is None or isinstance(formatter, str):\r\n"]
[283.076, "o", "            # Filter width and alignment operations for latex\r\n"]
[283.086, "o", "            # [[fill]align][sign][\"z\"][\"#\"][\"0\"][width][grouping_option][\".\" precision][type]\r\n"]
[283.096, "o", "            format_spec = re.sub(\r\n"]
[283.106, "o", "                r\"(.*?)([+\\- ]?)(\\d+)?(,)?(\\.\\d+)?([a-zA-Z%]+)?$\",\r\n"]
[283.116, "o", "                r\"\\2\\5\\6\",\r\n"]
[283.126, "o", "                format_spec,\r\n"]
[283.136, "o", "            )\r\n"]
[283.146, "o", "\r\n"]
[283.156, "o", "            if self.dtype.kind == \"c\":  # Complex default latex formatter\r\n"]
[283.166, "o", "                # Disallow sign operations for the imaginary part\r\n"]
[283.176, "o", "                imag_format_spec = re.sub(r\"[+\\- ]\", \"\", format_spec)\r\n"]
[283.186, "o", "\r\n"]
[283.196, "o", "                def formatter(value):\r\n"]
[283.206, "o", "                    return \"({}{}i)\".format(\r\n"]
[283.216, "o", "                        Latex.format_exponential_notation(\r\n"]
[283.226, "o", "                            value.real, format_spec=format_spec\r\n"]
[283.236, "o", "                        ),\r\n"]
[283.246, "o", "                        Latex.format_exponential_notation(\r\n"]
[283.256, "o", "                            value.imag, format_spec=\"+\" + imag_format_spec\r\n"]
[283.266, "o", "                        ),\r\n"]
[283.276, "o", "                    )\r\n"]
[283.286, "o", "\r\n"]
[283.296, "o", "            else:  # Float default latex formatter\r\n"]
[283.306, "o", "\r\n"]
[283.316, "o", "                def formatter(value):\r\n"]
[283.326, "o", "                    return Latex.format_exponential_notation(\r\n"]
[283.336, "o", "                        value, format_spec=format_spec\r\n"]
[283.346, "o", "                    )\r\n"]
[283.356, "o", "\r\n"]
[283.366, "o", "        if callable(formatter):\r\n"]
[283.376, "o", "            formatter = {\"all\": formatter}\r\n"]
[283.386, "o", "\r\n"]
[283.396, "o", "        # The view is needed for the scalar case - self.value might be float.\r\n"]
[283.406, "o", "        latex_value = np.array2string(\r\n"]
[283.416, "o", "            self.view(np.ndarray),\r\n"]
[283.426, "o", "            threshold=(\r\n"]
[283.436, "o", "                conf.latex_array_threshold\r\n"]
[283.446, "o", "                if conf.latex_array_threshold > -1\r\n"]
[283.456, "o", "                else pops[\"threshold\"]\r\n"]
[283.466, "o", "            ),\r\n"]
[283.476, "o", "            formatter=formatter,\r\n"]
[283.486, "o", "            max_line_width=np.inf,\r\n"]
[283.496, "o", "            separator=\",~\",\r\n"]
[283.506, "o", "        )\r\n"]
[283.516, "o", "\r\n"]
[283.526, "o", "        latex_value = latex_value.replace(\"...\", r\"\\dots\")\r\n"]
[283.536, "o", "\r\n"]
[283.546, "o", "        # Format unit\r\n"]
[283.556, "o", "        # [1:-1] strips the '$' on either side needed for math mode\r\n"]
[283.566, "o", "        if self.unit is None:\r\n"]
[283.576, "o", "            latex_unit = _UNIT_NOT_INITIALISED\r\n"]
[283.586, "o", "        elif format == \"latex\":\r\n"]
[283.596, "o", "            latex_unit = self.unit._repr_latex_()[1:-1]  # note this is unicode\r\n"]
[283.606, "o", "        elif format == \"latex_inline\":\r\n"]
[283.616, "o", "            latex_unit = self.unit.to_string(format=\"latex_inline\")[1:-1]\r\n"]
[283.626, "o", "\r\n"]
[283.636, "o", "        delimiter_left, delimiter_right = formats[format][subfmt]\r\n"]
[283.646, "o", "\r\n"]
[283.656, "o", "        # Add a space in front except for super-script units like degrees.\r\n"]
[283.666, "o", "        if not latex_unit.removeprefix(\"\\\\mathrm{\").startswith(\"{}^\"):\r\n"]
[283.676, "o", "            latex_unit = rf\" \\; {latex_unit}\"\r\n"]
[283.686, "o", "\r\n"]
[283.696, "o", "        return rf\"{delimiter_left}{latex_value}{latex_unit}{delimiter_right}\"\r\n"]
[283.706, "o", "\r\n"]
[283.716, "o", "    def __str__(self):\r\n"]
[283.726, "o", "        return self.to_string()\r\n"]
[283.736, "o", "\r\n"]
[283.746, "o", "    def __repr__(self):\r\n"]
[283.756, "o", "        prefixstr = \"<\" + self.__class__.__name__ + \" \"\r\n"]
[283.766, "o", "        arrstr = np.array2string(\r\n"]
[283.776, "o", "            self.view(np.ndarray), separator=\", \", prefix=prefixstr\r\n"]
[283.786, "o", "        )\r\n"]
[283.796, "o", "        return f\"{prefixstr}{arrstr}{self._unitstr:s}>\"\r\n"]
[283.806, "o", "\r\n"]
[283.816, "o", "    def _repr_latex_(self):\r\n"]
[283.826, "o", "        \"\"\"\r\n"]
[283.836, "o", "        Generate a latex representation of the quantity and its unit.\r\n"]
[283.846, "o", "\r\n"]
[283.856, "o", "        Returns\r\n"]
[283.866, "o", "        -------\r\n"]
[283.876, "o", "        lstr\r\n"]
[283.886, "o", "            A LaTeX string with the contents of this Quantity\r\n"]
[283.896, "o", "        \"\"\"\r\n"]
[283.906, "o", "        # NOTE: This should change to display format in a future release\r\n"]
[283.916, "o", "        return self.to_string(format=\"latex\", subfmt=\"inline\")\r\n"]
[283.926, "o", "\r\n"]
[283.936, "o", "    def __format__(self, format_spec):\r\n"]
[283.946, "o", "        try:\r\n"]
[283.956, "o", "            return self.to_string(format=format_spec)\r\n"]
[283.966, "o", "        except ValueError:\r\n"]
[283.976, "o", "            # We might have a unit format not implemented in `to_string()`.\r\n"]
[283.986, "o", "            if format_spec in Base.registry:\r\n"]
[283.996, "o", "                if self.unit is dimensionless_unscaled:\r\n"]
[284.006, "o", "                    return f\"{self.value}\"\r\n"]
[284.016, "o", "                else:\r\n"]
[284.026, "o", "                    return f\"{self.value} {format(self.unit, format_spec)}\"\r\n"]
[284.036, "o", "            # Can the value be formatted on its own?\r\n"]
[284.046, "o", "            try:\r\n"]
[284.056, "o", "                return f\"{format(self.value, format_spec)}{self._unitstr:s}\"\r\n"]
[284.066, "o", "            except ValueError:\r\n"]
[284.076, "o", "                # Format the whole thing as a single string.\r\n"]
[284.086, "o", "                return format(f\"{self.value}{self._unitstr:s}\", format_spec)\r\n"]
[284.096, "o", "\r\n"]
[284.106, "o", "    def decompose(self, bases=[]):\r\n"]
[284.116, "o", "        \"\"\"\r\n"]
[284.126, "o", "        Generates a new `Quantity` with the units\r\n"]
[284.136, "o", "        decomposed. Decomposed units have only irreducible units in\r\n"]
[284.146, "o", "        them (see `astropy.units.UnitBase.decompose`).\r\n"]
[284.156, "o", "\r\n"]
[284.166, "o", "        Parameters\r\n"]
[284.176, "o", "        ----------\r\n"]
[284.186, "o", "        bases : sequence of `~astropy.units.UnitBase`, optional\r\n"]
[284.196, "o", "            The bases to decompose into.  When not provided,\r\n"]
[284.206, "o", "            decomposes down to any irreducible units.  When provided,\r\n"]
[284.216, "o", "            the decomposed result will only contain the given units.\r\n"]
[284.226, "o", "            This will raises a `~astropy.units.UnitsError` if it's not possible\r\n"]
[284.236, "o", "            to do so.\r\n"]
[284.246, "o", "\r\n"]
[284.256, "o", "        Returns\r\n"]
[284.266, "o", "        -------\r\n"]
[284.276, "o", "        newq : `~astropy.units.Quantity`\r\n"]
[284.286, "o", "            A new object equal to this quantity with units decomposed.\r\n"]
[284.296, "o", "        \"\"\"\r\n"]
[284.306, "o", "        return self._decompose(False, bases=bases)\r\n"]
[284.316, "o", "\r\n"]
[284.326, "o", "    def _decompose(self, allowscaledunits=False, bases=[]):\r\n"]
[284.336, "o", "        \"\"\"\r\n"]
[284.346, "o", "        Generates a new `Quantity` with the units decomposed. Decomposed\r\n"]
[284.356, "o", "        units have only irreducible units in them (see\r\n"]
[284.366, "o", "        `astropy.units.UnitBase.decompose`).\r\n"]
[284.376, "o", "\r\n"]
[284.386, "o", "        Parameters\r\n"]
[284.396, "o", "        ----------\r\n"]
[284.406, "o", "        allowscaledunits : bool\r\n"]
[284.416, "o", "            If True, the resulting `Quantity` may have a scale factor\r\n"]
[284.426, "o", "            associated with it.  If False, any scaling in the unit will\r\n"]
[284.436, "o", "            be subsumed into the value of the resulting `Quantity`\r\n"]
[284.446, "o", "\r\n"]
[284.456, "o", "        bases : sequence of UnitBase, optional\r\n"]
[284.466, "o", "            The bases to decompose into.  When not provided,\r\n"]
[284.476, "o", "            decomposes down to any irreducible units.  When provided,\r\n"]
[284.486, "o", "            the decomposed result will only contain the given units.\r\n"]
[284.496, "o", "            This will raises a `~astropy.units.UnitsError` if it's not possible\r\n"]
[284.506, "o", "            to do so.\r\n"]
[284.516, "o", "\r\n"]
[284.526, "o", "        Returns\r\n"]
[284.536, "o", "        -------\r\n"]
[284.546, "o", "        newq : `~astropy.units.Quantity`\r\n"]
[284.556, "o", "            A new object equal to this quantity with units decomposed.\r\n"]
[284.566, "o", "\r\n"]
[284.576, "o", "        \"\"\"\r\n"]
[284.586, "o", "        new_unit = self.unit.decompose(bases=bases)\r\n"]
[284.596, "o", "\r\n"]
[284.606, "o", "        # Be careful here because self.value usually is a view of self;\r\n"]
[284.616, "o", "        # be sure that the original value is not being modified.\r\n"]
[284.626, "o", "        if not allowscaledunits and hasattr(new_unit, \"scale\"):\r\n"]
[284.636, "o", "            new_value = self.value * new_unit.scale\r\n"]
[284.646, "o", "            new_unit = new_unit / new_unit.scale\r\n"]
[284.656, "o", "            return self._new_view(new_value, new_unit)\r\n"]
[284.666, "o", "        else:\r\n"]
[284.676, "o", "            return self._new_view(self.copy(), new_unit)\r\n"]
[284.686, "o", "\r\n"]
[284.696, "o", "    # These functions need to be overridden to take into account the units\r\n"]
[284.706, "o", "    # Array conversion\r\n"]
[284.716, "o", "    # https://numpy.org/doc/stable/reference/arrays.ndarray.html#array-conversion\r\n"]
[284.726, "o", "\r\n"]
[284.736, "o", "    def item(self, *args):\r\n"]
[284.746, "o", "        \"\"\"Copy an element of an array to a scalar Quantity and return it.\r\n"]
[284.756, "o", "\r\n"]
[284.766, "o", "        Like :meth:`~numpy.ndarray.item` except that it always\r\n"]
[284.776, "o", "        returns a `Quantity`, not a Python scalar.\r\n"]
[284.786, "o", "\r\n"]
[284.796, "o", "        \"\"\"\r\n"]
[284.806, "o", "        return self._new_view(super().item(*args))\r\n"]
[284.816, "o", "\r\n"]
[284.826, "o", "    def tolist(self):\r\n"]
[284.836, "o", "        raise NotImplementedError(\r\n"]
[284.846, "o", "            \"cannot make a list of Quantities. Get list of values with\"\r\n"]
[284.856, "o", "            \" q.value.tolist().\"\r\n"]
[284.866, "o", "        )\r\n"]
[284.876, "o", "\r\n"]
[284.886, "o", "    def _to_own_unit(self, value, check_precision=True, *, unit=None):\r\n"]
[284.896, "o", "        \"\"\"Convert value to one's own unit (or that given).\r\n"]
[284.906, "o", "\r\n"]
[284.916, "o", "        Here, non-quantities are treated as dimensionless, and care is taken\r\n"]
[284.926, "o", "        for values of 0, infinity or nan, which are allowed to have any unit.\r\n"]
[284.936, "o", "\r\n"]
[285.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[285.002, "i", "cat asv.ci.conf.json\r"]
[285.004, "o", "cat asv.ci.conf.json\r\n"]
[285.3356, "o", "\u001b[?2004l\r\n"]
[285.6652, "o", " {\r\n"]
[285.9948, "o", "   \"version\": 1,\r\n"]
[286.3244, "o", "   \"project\": \"astropy\",\r\n"]
[286.654, "o", "   \"project_url\": \"http://www.astropy.org/\",\r\n"]
[286.9836, "o", "   \"repo\": \".\",\r\n"]
[287.3132, "o", "   \"install_command\": [\r\n"]
[287.6428, "o", "     \"pip install . matplotlib scipy\"\r\n"]
[287.9724, "o", "   ],\r\n"]
[288.302, "o", "   \"branches\": [\"main\"],\r\n"]
[288.6316, "o", "   \"show_commit_url\": \"http://github.com/astropy/astropy/commit/\",\r\n"]
[288.9612, "o", "   \"pythons\": [\"3.11\"],\r\n"]
[289.2908, "o", "   \"environment_type\": \"virtualenv\",\r\n"]
[289.6204, "o", "   \"benchmark_dir\": \"astropy-benchmarks/benchmarks\"\r\n"]
[290.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[290.002, "i", "sed -n '1,260p' astropy-benchmarks/benchmarks/units.py\r"]
[290.004, "o", "sed -n '1,260p' astropy-benchmarks/benchmarks/units.py\r\n"]
[290.026861, "o", "\u001b[?2004l\r\n"]
[290.047722, "o", "import copy\r\n"]
[290.068582, "o", "\r\n"]
[290.089443, "o", "import numpy as np\r\n"]
[290.110304, "o", "from astropy import units as u\r\n"]
[290.131165, "o", "\r\n"]
[290.152025, "o", "\r\n"]
[290.172886, "o", "# Unit tests\r\n"]
[290.193747, "o", "\r\n"]
[290.214608, "o", "\r\n"]
[290.235468, "o", "def time_unit_compose():\r\n"]
[290.256329, "o", "    u.Ry.compose()\r\n"]
[290.27719, "o", "\r\n"]
[290.298051, "o", "\r\n"]
[290.318911, "o", "def time_unit_to():\r\n"]
[290.339772, "o", "    u.m.to(u.pc)\r\n"]
[290.360633, "o", "\r\n"]
[290.381494, "o", "\r\n"]
[290.402354, "o", "def time_unit_parse():\r\n"]
[290.423215, "o", "    u.Unit(\"1e-07 kg m2 / s2\")\r\n"]
[290.444076, "o", "\r\n"]
[290.464937, "o", "\r\n"]
[290.485797, "o", "def time_simple_unit_parse():\r\n"]
[290.506658, "o", "    u.Unit(\"1 d\")\r\n"]
[290.527519, "o", "\r\n"]
[290.54838, "o", "\r\n"]
[290.569241, "o", "def time_very_simple_unit_parse():\r\n"]
[290.590101, "o", "    u.Unit(\"d\")\r\n"]
[290.610962, "o", "\r\n"]
[290.631823, "o", "\r\n"]
[290.652684, "o", "def mem_unit():\r\n"]
[290.673544, "o", "    return u.erg\r\n"]
[290.694405, "o", "\r\n"]
[290.715266, "o", "\r\n"]
[290.736127, "o", "def time_compose_to_bases():\r\n"]
[290.756987, "o", "    x = copy.copy(u.Ry)\r\n"]
[290.777848, "o", "    x.cgs\r\n"]
[290.798709, "o", "\r\n"]
[290.81957, "o", "\r\n"]
[290.84043, "o", "def time_compose_complex():\r\n"]
[290.861291, "o", "    # Composing a complex unit can be very inefficient\r\n"]
[290.882152, "o", "    (u.kg / u.s**3 * u.au**2.5 / u.yr**0.5 / u.sr**2).compose()\r\n"]
[290.903013, "o", "\r\n"]
[290.923873, "o", "\r\n"]
[290.944734, "o", "# Quantity tests\r\n"]
[290.965595, "o", "\r\n"]
[290.986456, "o", "a = np.arange(100000.0)\r\n"]
[291.007316, "o", "b1 = [1.0, 2.0, 3.0]\r\n"]
[291.028177, "o", "b2 = np.asarray(b1)\r\n"]
[291.049038, "o", "q0 = u.Quantity(1.0, u.s)\r\n"]
[291.069899, "o", "q1 = u.Quantity(a, u.m)\r\n"]
[291.090759, "o", "q2 = u.Quantity(a[:10000], u.deg)\r\n"]
[291.11162, "o", "\r\n"]
[291.132481, "o", "\r\n"]
[291.153342, "o", "def time_quantity_creation():\r\n"]
[291.174203, "o", "    u.Quantity(a, u.m)\r\n"]
[291.195063, "o", "\r\n"]
[291.215924, "o", "\r\n"]
[291.236785, "o", "def time_quantity_creation_nocopy():\r\n"]
[291.257646, "o", "    u.Quantity(a, u.m, copy=False)\r\n"]
[291.278506, "o", "\r\n"]
[291.299367, "o", "\r\n"]
[291.320228, "o", "def time_quantity_view():\r\n"]
[291.341089, "o", "    q1.view(u.Quantity)\r\n"]
[291.361949, "o", "\r\n"]
[291.38281, "o", "\r\n"]
[291.403671, "o", "def time_quantity_init_scalar():\r\n"]
[291.424532, "o", "    3.0 * u.m / u.s\r\n"]
[291.445392, "o", "\r\n"]
[291.466253, "o", "\r\n"]
[291.487114, "o", "def time_quantity_init_array():\r\n"]
[291.507975, "o", "    a * u.m / u.s\r\n"]
[291.528835, "o", "\r\n"]
[291.549696, "o", "\r\n"]
[291.570557, "o", "def time_quantity_init_small_list():\r\n"]
[291.591418, "o", "    \"\"\"\r\n"]
[291.612278, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[291.633139, "o", "    for small list.\r\n"]
[291.654, "o", "    \"\"\"\r\n"]
[291.674861, "o", "    b1 * u.m / u.s\r\n"]
[291.695722, "o", "\r\n"]
[291.716582, "o", "\r\n"]
[291.737443, "o", "def time_quantity_init_small_array():\r\n"]
[291.758304, "o", "    \"\"\"\r\n"]
[291.779165, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[291.800025, "o", "    for small array.\r\n"]
[291.820886, "o", "    \"\"\"\r\n"]
[291.841747, "o", "    b2 * u.m / u.s\r\n"]
[291.862608, "o", "\r\n"]
[291.883468, "o", "\r\n"]
[291.904329, "o", "def time_quantity_scalar_conversion():\r\n"]
[291.92519, "o", "    (3.0 * u.m / u.s).to(u.km / u.hour)\r\n"]
[291.946051, "o", "\r\n"]
[291.966911, "o", "\r\n"]
[291.987772, "o", "def time_quantity_array_conversion():\r\n"]
[292.008633, "o", "    (a * u.m / u.s).to(u.km / u.hour)\r\n"]
[292.029494, "o", "\r\n"]
[292.050354, "o", "\r\n"]
[292.071215, "o", "def time_quantity_times_unit():\r\n"]
[292.092076, "o", "    q1 * u.m\r\n"]
[292.112937, "o", "\r\n"]
[292.133797, "o", "\r\n"]
[292.154658, "o", "def time_quantity_times_quantity():\r\n"]
[292.175519, "o", "    q1 * q0\r\n"]
[292.19638, "o", "\r\n"]
[292.217241, "o", "\r\n"]
[292.238101, "o", "def time_quantity_ufunc_sin():\r\n"]
[292.258962, "o", "    np.sin(q2)\r\n"]
[292.279823, "o", "\r\n"]
[292.300684, "o", "\r\n"]
[292.321544, "o", "class TimeQuantityOpSmallArray:\r\n"]
[292.342405, "o", "    \"\"\"\r\n"]
[292.363266, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[292.384127, "o", "    for a small Numpy array.\r\n"]
[292.404987, "o", "    \"\"\"\r\n"]
[292.425848, "o", "\r\n"]
[292.446709, "o", "    def setup(self):\r\n"]
[292.46757, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[292.48843, "o", "        self.data = data * u.g\r\n"]
[292.509291, "o", "        self.out_sq = data * u.g**2\r\n"]
[292.530152, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[292.551013, "o", "\r\n"]
[292.571873, "o", "    def time_quantity_square(self):\r\n"]
[292.592734, "o", "        self.data**2\r\n"]
[292.613595, "o", "\r\n"]
[292.634456, "o", "    def time_quantity_np_square(self):\r\n"]
[292.655316, "o", "        np.power(self.data, 2)\r\n"]
[292.676177, "o", "\r\n"]
[292.697038, "o", "    def time_quantity_np_square_out(self):\r\n"]
[292.717899, "o", "        np.power(self.data, 2, out=self.out_sq)\r\n"]
[292.738759, "o", "\r\n"]
[292.75962, "o", "    def time_quantity_sqrt(self):\r\n"]
[292.780481, "o", "        self.data**0.5\r\n"]
[292.801342, "o", "\r\n"]
[292.822203, "o", "    def time_quantity_np_sqrt(self):\r\n"]
[292.843063, "o", "        np.sqrt(self.data)\r\n"]
[292.863924, "o", "\r\n"]
[292.884785, "o", "    def time_quantity_np_sqrt_out(self):\r\n"]
[292.905646, "o", "        np.sqrt(self.data, out=self.out_sqrt)\r\n"]
[292.926506, "o", "\r\n"]
[292.947367, "o", "\r\n"]
[292.968228, "o", "class TimeQuantityOpLargeArray(TimeQuantityOpSmallArray):\r\n"]
[292.989089, "o", "    \"\"\"\r\n"]
[293.009949, "o", "    Like :class:`TimeQuantityOpSmallArray` but for a large Numpy array.\r\n"]
[293.03081, "o", "    \"\"\"\r\n"]
[293.051671, "o", "\r\n"]
[293.072532, "o", "    def setup(self):\r\n"]
[293.093392, "o", "        data = np.arange(1e6) + 1\r\n"]
[293.114253, "o", "        self.data = data * u.g\r\n"]
[293.135114, "o", "        self.out_sq = data * u.g**2\r\n"]
[293.155975, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[293.176835, "o", "\r\n"]
[293.197696, "o", "\r\n"]
[293.218557, "o", "class TimeQuantityOpSmallArrayDiffUnit:\r\n"]
[293.239418, "o", "    \"\"\"\r\n"]
[293.260278, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[293.281139, "o", "    for small Numpy arrays with different units.\r\n"]
[293.302, "o", "    \"\"\"\r\n"]
[293.322861, "o", "\r\n"]
[293.343722, "o", "    def setup(self):\r\n"]
[293.364582, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[293.385443, "o", "        self.data = data * u.g\r\n"]
[293.406304, "o", "\r\n"]
[293.427165, "o", "        # A different but dimensionally compatible unit\r\n"]
[293.448025, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[293.468886, "o", "\r\n"]
[293.489747, "o", "    def time_quantity_equal(self):\r\n"]
[293.510608, "o", "        # Same as operator.eq\r\n"]
[293.531468, "o", "        self.data == self.data2\r\n"]
[293.552329, "o", "\r\n"]
[293.57319, "o", "    def time_quantity_np_equal(self):\r\n"]
[293.594051, "o", "        np.equal(self.data, self.data2)\r\n"]
[293.614911, "o", "\r\n"]
[293.635772, "o", "    def time_quantity_truediv(self):\r\n"]
[293.656633, "o", "        # Since benchmark is PY3 only, this is always true divide.\r\n"]
[293.677494, "o", "        # Same as operator.truediv\r\n"]
[293.698354, "o", "        self.data / self.data2\r\n"]
[293.719215, "o", "\r\n"]
[293.740076, "o", "    def time_quantity_np_truediv(self):\r\n"]
[293.760937, "o", "        np.true_divide(self.data, self.data2)\r\n"]
[293.781797, "o", "\r\n"]
[293.802658, "o", "    def time_quantity_mul(self):\r\n"]
[293.823519, "o", "        # Same as operator.mul\r\n"]
[293.84438, "o", "        self.data * self.data2\r\n"]
[293.865241, "o", "\r\n"]
[293.886101, "o", "    def time_quantity_np_multiply(self):\r\n"]
[293.906962, "o", "        np.multiply(self.data, self.data2)\r\n"]
[293.927823, "o", "\r\n"]
[293.948684, "o", "    def time_quantity_sub(self):\r\n"]
[293.969544, "o", "        # Same as operator.sub\r\n"]
[293.990405, "o", "        self.data - self.data2\r\n"]
[294.011266, "o", "\r\n"]
[294.032127, "o", "    def time_quantity_np_subtract(self):\r\n"]
[294.052987, "o", "        np.subtract(self.data, self.data2)\r\n"]
[294.073848, "o", "\r\n"]
[294.094709, "o", "    def time_quantity_add(self):\r\n"]
[294.11557, "o", "        # Same as operator.add\r\n"]
[294.13643, "o", "        self.data + self.data2\r\n"]
[294.157291, "o", "\r\n"]
[294.178152, "o", "    def time_quantity_np_add(self):\r\n"]
[294.199013, "o", "        np.add(self.data, self.data2)\r\n"]
[294.219873, "o", "\r\n"]
[294.240734, "o", "\r\n"]
[294.261595, "o", "class TimeQuantityOpSmallArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[294.282456, "o", "    \"\"\"\r\n"]
[294.303316, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[294.324177, "o", "    for small Numpy arrays with same units.\r\n"]
[294.345038, "o", "    \"\"\"\r\n"]
[294.365899, "o", "\r\n"]
[294.386759, "o", "    def setup(self):\r\n"]
[294.40762, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[294.428481, "o", "        self.data = data * u.g\r\n"]
[294.449342, "o", "        self.data2 = self.data.copy()\r\n"]
[294.470203, "o", "\r\n"]
[294.491063, "o", "\r\n"]
[294.511924, "o", "class TimeQuantityOpLargeArrayDiffUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[294.532785, "o", "    \"\"\"\r\n"]
[294.553646, "o", "    Like :class:`TimeQuantityOpSmallArrayDiffUnit` but for large Numpy arrays.\r\n"]
[294.574506, "o", "    \"\"\"\r\n"]
[294.595367, "o", "\r\n"]
[294.616228, "o", "    def setup(self):\r\n"]
[294.637089, "o", "        data = np.arange(1e6) + 1\r\n"]
[294.657949, "o", "        self.data = data * u.g\r\n"]
[294.67881, "o", "\r\n"]
[294.699671, "o", "        # A different but dimensionally compatible unit\r\n"]
[294.720532, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[294.741392, "o", "\r\n"]
[294.762253, "o", "\r\n"]
[294.783114, "o", "class TimeQuantityOpLargeArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[294.803975, "o", "    \"\"\"\r\n"]
[294.824835, "o", "    Like :class:`TimeQuantityOpSmallArraySameUnit` but for large Numpy arrays.\r\n"]
[294.845696, "o", "    \"\"\"\r\n"]
[294.866557, "o", "\r\n"]
[294.887418, "o", "    def setup(self):\r\n"]
[294.908278, "o", "        data = np.arange(1e6) + 1\r\n"]
[294.929139, "o", "        self.data = data * u.g\r\n"]
[295.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[295.002, "i", "asv dev -c asv.ci.conf.json -b \"units.time_quantity_init_small_list|units.time_quantity_creation_nocopy|units.time_\r"]
[295.004, "o", "asv dev -c asv.ci.conf.json -b \"units.time_quantity_init_small_list|units.time_quantity_creation_nocopy|units.time_\r\n"]
[295.9948, "o", "_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view\"\r\n"]
[296.9836, "o", "\u001b[?2004l\r\n"]
[297.9724, "o", "usage: asv [-h] [--verbose] [--config CONFIG] [--version]\r\n"]
[298.9612, "o", "           {help,quickstart,machine,setup,run,continuous,find,rm,publish,preview,profile,update,show,compare,check,gh-pages} ...\r\n"]
[300.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[300.002, "i", "asv profile -c asv.ci.conf.json units.time_quantity_times_unit\r"]
[300.004, "o", "asv profile -c asv.ci.conf.json units.time_quantity_times_unit\r\n"]
[301.242, "o", "\u001b[?2004l\r\n"]
[302.478, "o", "usage: asv [-h] [--verbose] [--config CONFIG] [--version]\r\n"]
[303.714, "o", "           {help,quickstart,machine,setup,run,continuous,find,rm,publish,preview,profile,update,show,compare,check,gh-pages} ...\r\n"]
[305.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[305.002, "i", "grep -n \"class Quantity\" -n astropy/units/quantity.py\r"]
[305.004, "o", "grep -n \"class Quantity\" -n astropy/units/quantity.py\r\n"]
[305.9948, "o", "\u001b[?2004l\r\n"]
[306.9836, "o", "\u001b[32m\u001b[K85\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kclass Quantity\u001b[m\u001b[KIterator:\r\n"]
[307.9724, "o", "\u001b[32m\u001b[K162\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kclass Quantity\u001b[m\u001b[KInfoBase(ParentDtypeInfo):\r\n"]
[308.9612, "o", "\u001b[32m\u001b[K188\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kclass Quantity\u001b[m\u001b[KInfo(QuantityInfoBase):\r\n"]
[310.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[310.002, "i", "grep -n \"def __new__\" astropy/units/quantity.py\r"]
[310.004, "o", "grep -n \"def __new__\" astropy/units/quantity.py\r\n"]
[312.478, "o", "\u001b[?2004l\r\n"]
[315.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[315.002, "i", "grep -n \"def __mul__\" astropy/units/quantity.py\r"]
[315.004, "o", "grep -n \"def __mul__\" astropy/units/quantity.py\r\n"]
[317.478, "o", "\u001b[?2004l\r\n"]
[320.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[320.002, "i", "sed -n '1,400p' astropy/units/quantity.py\r"]
[320.004, "o", "sed -n '1,400p' astropy/units/quantity.py\r\n"]
[320.018329, "o", "\u001b[?2004l\r\n"]
[320.030658, "o", "# Licensed under a 3-clause BSD style license - see LICENSE.rst\r\n"]
[320.042988, "o", "\"\"\"\r\n"]
[320.055317, "o", "This module defines the `Quantity` object, which represents a number with some\r\n"]
[320.067646, "o", "associated units. `Quantity` objects support operations like ordinary numbers,\r\n"]
[320.079975, "o", "but will deal with unit conversions internally.\r\n"]
[320.092304, "o", "\"\"\"\r\n"]
[320.104633, "o", "\r\n"]
[320.116963, "o", "from __future__ import annotations\r\n"]
[320.129292, "o", "\r\n"]
[320.141621, "o", "import builtins\r\n"]
[320.15395, "o", "import numbers\r\n"]
[320.166279, "o", "import operator\r\n"]
[320.178608, "o", "import re\r\n"]
[320.190938, "o", "import warnings\r\n"]
[320.203267, "o", "from fractions import Fraction\r\n"]
[320.215596, "o", "from typing import TYPE_CHECKING\r\n"]
[320.227925, "o", "\r\n"]
[320.240254, "o", "import numpy as np\r\n"]
[320.252584, "o", "\r\n"]
[320.264913, "o", "from astropy import config as _config\r\n"]
[320.277242, "o", "from astropy.utils.compat.numpycompat import COPY_IF_NEEDED, NUMPY_LT_2_0\r\n"]
[320.289571, "o", "from astropy.utils.data_info import ParentDtypeInfo\r\n"]
[320.3019, "o", "from astropy.utils.exceptions import AstropyWarning\r\n"]
[320.314229, "o", "\r\n"]
[320.326559, "o", "from .core import (\r\n"]
[320.338888, "o", "    Unit,\r\n"]
[320.351217, "o", "    UnitBase,\r\n"]
[320.363546, "o", "    UnitConversionError,\r\n"]
[320.375875, "o", "    UnitsError,\r\n"]
[320.388204, "o", "    UnitTypeError,\r\n"]
[320.400534, "o", "    dimensionless_unscaled,\r\n"]
[320.412863, "o", "    get_current_unit_registry,\r\n"]
[320.425192, "o", ")\r\n"]
[320.437521, "o", "from .format import Base, Latex\r\n"]
[320.44985, "o", "from .quantity_helper import can_have_arbitrary_unit, check_output, converters_and_unit\r\n"]
[320.46218, "o", "from .quantity_helper.function_helpers import (\r\n"]
[320.474509, "o", "    DISPATCHED_FUNCTIONS,\r\n"]
[320.486838, "o", "    FUNCTION_HELPERS,\r\n"]
[320.499167, "o", "    SUBCLASS_SAFE_FUNCTIONS,\r\n"]
[320.511496, "o", "    UNSUPPORTED_FUNCTIONS,\r\n"]
[320.523825, "o", ")\r\n"]
[320.536155, "o", "from .structured import StructuredUnit, _structured_unit_like_dtype\r\n"]
[320.548484, "o", "from .utils import is_effectively_unity\r\n"]
[320.560813, "o", "\r\n"]
[320.573142, "o", "if TYPE_CHECKING:\r\n"]
[320.585471, "o", "    from typing_extensions import Self\r\n"]
[320.5978, "o", "\r\n"]
[320.61013, "o", "    from .typing import QuantityLike\r\n"]
[320.622459, "o", "\r\n"]
[320.634788, "o", "__all__ = [\r\n"]
[320.647117, "o", "    \"Quantity\",\r\n"]
[320.659446, "o", "    \"SpecificTypeQuantity\",\r\n"]
[320.671776, "o", "    \"QuantityInfoBase\",\r\n"]
[320.684105, "o", "    \"QuantityInfo\",\r\n"]
[320.696434, "o", "    \"allclose\",\r\n"]
[320.708763, "o", "    \"isclose\",\r\n"]
[320.721092, "o", "]\r\n"]
[320.733421, "o", "\r\n"]
[320.745751, "o", "\r\n"]
[320.75808, "o", "# We don't want to run doctests in the docstrings we inherit from Numpy\r\n"]
[320.770409, "o", "__doctest_skip__ = [\"Quantity.*\"]\r\n"]
[320.782738, "o", "\r\n"]
[320.795067, "o", "_UNIT_NOT_INITIALISED = \"(Unit not initialised)\"\r\n"]
[320.807397, "o", "_UFUNCS_FILTER_WARNINGS = {np.arcsin, np.arccos, np.arccosh, np.arctanh}\r\n"]
[320.819726, "o", "\r\n"]
[320.832055, "o", "\r\n"]
[320.844384, "o", "class Conf(_config.ConfigNamespace):\r\n"]
[320.856713, "o", "    \"\"\"\r\n"]
[320.869042, "o", "    Configuration parameters for Quantity.\r\n"]
[320.881372, "o", "    \"\"\"\r\n"]
[320.893701, "o", "\r\n"]
[320.90603, "o", "    latex_array_threshold = _config.ConfigItem(\r\n"]
[320.918359, "o", "        100,\r\n"]
[320.930688, "o", "        \"The maximum size an array Quantity can be before its LaTeX \"\r\n"]
[320.943017, "o", "        'representation for IPython gets \"summarized\" (meaning only the first '\r\n"]
[320.955347, "o", "        'and last few elements are shown with \"...\" between). Setting this to a '\r\n"]
[320.967676, "o", "        \"negative number means that the value will instead be whatever numpy \"\r\n"]
[320.980005, "o", "        \"gets from get_printoptions.\",\r\n"]
[320.992334, "o", "    )\r\n"]
[321.004663, "o", "\r\n"]
[321.016993, "o", "\r\n"]
[321.029322, "o", "conf = Conf()\r\n"]
[321.041651, "o", "\r\n"]
[321.05398, "o", "\r\n"]
[321.066309, "o", "class QuantityIterator:\r\n"]
[321.078638, "o", "    \"\"\"\r\n"]
[321.090968, "o", "    Flat iterator object to iterate over Quantities.\r\n"]
[321.103297, "o", "\r\n"]
[321.115626, "o", "    A `QuantityIterator` iterator is returned by ``q.flat`` for any Quantity\r\n"]
[321.127955, "o", "    ``q``.  It allows iterating over the array as if it were a 1-D array,\r\n"]
[321.140284, "o", "    either in a for-loop or by calling its `next` method.\r\n"]
[321.152613, "o", "\r\n"]
[321.164943, "o", "    Iteration is done in C-contiguous style, with the last index varying the\r\n"]
[321.177272, "o", "    fastest. The iterator can also be indexed using basic slicing or\r\n"]
[321.189601, "o", "    advanced indexing.\r\n"]
[321.20193, "o", "\r\n"]
[321.214259, "o", "    See Also\r\n"]
[321.226589, "o", "    --------\r\n"]
[321.238918, "o", "    Quantity.flatten : Returns a flattened copy of an array.\r\n"]
[321.251247, "o", "\r\n"]
[321.263576, "o", "    Notes\r\n"]
[321.275905, "o", "    -----\r\n"]
[321.288234, "o", "    `QuantityIterator` is inspired by `~numpy.ma.core.MaskedIterator`.  It\r\n"]
[321.300564, "o", "    is not exported by the `~astropy.units` module.  Instead of\r\n"]
[321.312893, "o", "    instantiating a `QuantityIterator` directly, use `Quantity.flat`.\r\n"]
[321.325222, "o", "    \"\"\"\r\n"]
[321.337551, "o", "\r\n"]
[321.34988, "o", "    def __init__(self, q):\r\n"]
[321.362209, "o", "        self._quantity = q\r\n"]
[321.374539, "o", "        self._dataiter = q.view(np.ndarray).flat\r\n"]
[321.386868, "o", "\r\n"]
[321.399197, "o", "    def __iter__(self):\r\n"]
[321.411526, "o", "        return self\r\n"]
[321.423855, "o", "\r\n"]
[321.436185, "o", "    def __getitem__(self, indx):\r\n"]
[321.448514, "o", "        out = self._dataiter.__getitem__(indx)\r\n"]
[321.460843, "o", "        # For single elements, ndarray.flat.__getitem__ returns scalars; these\r\n"]
[321.473172, "o", "        # need a new view as a Quantity.\r\n"]
[321.485501, "o", "        if isinstance(out, type(self._quantity)):\r\n"]
[321.49783, "o", "            return out\r\n"]
[321.51016, "o", "        else:\r\n"]
[321.522489, "o", "            return self._quantity._new_view(out)\r\n"]
[321.534818, "o", "\r\n"]
[321.547147, "o", "    def __setitem__(self, index, value):\r\n"]
[321.559476, "o", "        self._dataiter[index] = self._quantity._to_own_unit(value)\r\n"]
[321.571805, "o", "\r\n"]
[321.584135, "o", "    def __next__(self):\r\n"]
[321.596464, "o", "        \"\"\"\r\n"]
[321.608793, "o", "        Return the next value, or raise StopIteration.\r\n"]
[321.621122, "o", "        \"\"\"\r\n"]
[321.633451, "o", "        out = next(self._dataiter)\r\n"]
[321.645781, "o", "        # ndarray.flat._dataiter returns scalars, so need a view as a Quantity.\r\n"]
[321.65811, "o", "        return self._quantity._new_view(out)\r\n"]
[321.670439, "o", "\r\n"]
[321.682768, "o", "    next = __next__\r\n"]
[321.695097, "o", "\r\n"]
[321.707426, "o", "    def __len__(self):\r\n"]
[321.719756, "o", "        return len(self._dataiter)\r\n"]
[321.732085, "o", "\r\n"]
[321.744414, "o", "    # Properties and methods to match `numpy.ndarray.flatiter`\r\n"]
[321.756743, "o", "\r\n"]
[321.769072, "o", "    @property\r\n"]
[321.781401, "o", "    def base(self):\r\n"]
[321.793731, "o", "        \"\"\"A reference to the array that is iterated over.\"\"\"\r\n"]
[321.80606, "o", "        return self._quantity\r\n"]
[321.818389, "o", "\r\n"]
[321.830718, "o", "    @property\r\n"]
[321.843047, "o", "    def coords(self):\r\n"]
[321.855377, "o", "        \"\"\"An N-dimensional tuple of current coordinates.\"\"\"\r\n"]
[321.867706, "o", "        return self._dataiter.coords\r\n"]
[321.880035, "o", "\r\n"]
[321.892364, "o", "    @property\r\n"]
[321.904693, "o", "    def index(self):\r\n"]
[321.917022, "o", "        \"\"\"Current flat index into the array.\"\"\"\r\n"]
[321.929352, "o", "        return self._dataiter.index\r\n"]
[321.941681, "o", "\r\n"]
[321.95401, "o", "    def copy(self):\r\n"]
[321.966339, "o", "        \"\"\"Get a copy of the iterator as a 1-D array.\"\"\"\r\n"]
[321.978668, "o", "        return self._quantity.flatten()\r\n"]
[321.990998, "o", "\r\n"]
[322.003327, "o", "\r\n"]
[322.015656, "o", "class QuantityInfoBase(ParentDtypeInfo):\r\n"]
[322.027985, "o", "    # This is on a base class rather than QuantityInfo directly, so that\r\n"]
[322.040314, "o", "    # it can be used for EarthLocationInfo yet make clear that that class\r\n"]
[322.052643, "o", "    # should not be considered a typical Quantity subclass by Table.\r\n"]
[322.064973, "o", "    attrs_from_parent = {\"dtype\", \"unit\"}  # dtype and unit taken from parent\r\n"]
[322.077302, "o", "    _supports_indexing = True\r\n"]
[322.089631, "o", "\r\n"]
[322.10196, "o", "    @staticmethod\r\n"]
[322.114289, "o", "    def default_format(val):\r\n"]
[322.126618, "o", "        return f\"{val.value}\"\r\n"]
[322.138948, "o", "\r\n"]
[322.151277, "o", "    @staticmethod\r\n"]
[322.163606, "o", "    def possible_string_format_functions(format_):\r\n"]
[322.175935, "o", "        \"\"\"Iterate through possible string-derived format functions.\r\n"]
[322.188264, "o", "\r\n"]
[322.200594, "o", "        A string can either be a format specifier for the format built-in,\r\n"]
[322.212923, "o", "        a new-style format string, or an old-style format string.\r\n"]
[322.225252, "o", "\r\n"]
[322.237581, "o", "        This method is overridden in order to suppress printing the unit\r\n"]
[322.24991, "o", "        in each row since it is already at the top in the column header.\r\n"]
[322.262239, "o", "        \"\"\"\r\n"]
[322.274569, "o", "        yield lambda format_, val: format(val.value, format_)\r\n"]
[322.286898, "o", "        yield lambda format_, val: format_.format(val.value)\r\n"]
[322.299227, "o", "        yield lambda format_, val: format_ % val.value\r\n"]
[322.311556, "o", "\r\n"]
[322.323885, "o", "\r\n"]
[322.336214, "o", "class QuantityInfo(QuantityInfoBase):\r\n"]
[322.348544, "o", "    \"\"\"\r\n"]
[322.360873, "o", "    Container for meta information like name, description, format.  This is\r\n"]
[322.373202, "o", "    required when the object is used as a mixin column within a table, but can\r\n"]
[322.385531, "o", "    be used as a general way to store meta information.\r\n"]
[322.39786, "o", "    \"\"\"\r\n"]
[322.41019, "o", "\r\n"]
[322.422519, "o", "    _represent_as_dict_attrs = (\"value\", \"unit\")\r\n"]
[322.434848, "o", "    _construct_from_dict_args = [\"value\"]\r\n"]
[322.447177, "o", "    _represent_as_dict_primary_data = \"value\"\r\n"]
[322.459506, "o", "\r\n"]
[322.471835, "o", "    def new_like(self, cols, length, metadata_conflicts=\"warn\", name=None):\r\n"]
[322.484165, "o", "        \"\"\"\r\n"]
[322.496494, "o", "        Return a new Quantity instance which is consistent with the\r\n"]
[322.508823, "o", "        input ``cols`` and has ``length`` rows.\r\n"]
[322.521152, "o", "\r\n"]
[322.533481, "o", "        This is intended for creating an empty column object whose elements can\r\n"]
[322.54581, "o", "        be set in-place for table operations like join or vstack.\r\n"]
[322.55814, "o", "\r\n"]
[322.570469, "o", "        Parameters\r\n"]
[322.582798, "o", "        ----------\r\n"]
[322.595127, "o", "        cols : list\r\n"]
[322.607456, "o", "            List of input columns\r\n"]
[322.619786, "o", "        length : int\r\n"]
[322.632115, "o", "            Length of the output column object\r\n"]
[322.644444, "o", "        metadata_conflicts : str ('warn'|'error'|'silent')\r\n"]
[322.656773, "o", "            How to handle metadata conflicts\r\n"]
[322.669102, "o", "        name : str\r\n"]
[322.681431, "o", "            Output column name\r\n"]
[322.693761, "o", "\r\n"]
[322.70609, "o", "        Returns\r\n"]
[322.718419, "o", "        -------\r\n"]
[322.730748, "o", "        col : `~astropy.units.Quantity` (or subclass)\r\n"]
[322.743077, "o", "            Empty instance of this class consistent with ``cols``\r\n"]
[322.755406, "o", "\r\n"]
[322.767736, "o", "        \"\"\"\r\n"]
[322.780065, "o", "        # Get merged info attributes like shape, dtype, format, description, etc.\r\n"]
[322.792394, "o", "        attrs = self.merge_cols_attributes(\r\n"]
[322.804723, "o", "            cols, metadata_conflicts, name, (\"meta\", \"format\", \"description\")\r\n"]
[322.817052, "o", "        )\r\n"]
[322.829382, "o", "\r\n"]
[322.841711, "o", "        # Make an empty quantity using the unit of the last one.\r\n"]
[322.85404, "o", "        shape = (length,) + attrs.pop(\"shape\")\r\n"]
[322.866369, "o", "        dtype = attrs.pop(\"dtype\")\r\n"]
[322.878698, "o", "        # Use zeros so we do not get problems for Quantity subclasses such\r\n"]
[322.891027, "o", "        # as Longitude and Latitude, which cannot take arbitrary values.\r\n"]
[322.903357, "o", "        data = np.zeros(shape=shape, dtype=dtype)\r\n"]
[322.915686, "o", "        # Get arguments needed to reconstruct class\r\n"]
[322.928015, "o", "        map = {\r\n"]
[322.940344, "o", "            key: (data if key == \"value\" else getattr(cols[-1], key))\r\n"]
[322.952673, "o", "            for key in self._represent_as_dict_attrs\r\n"]
[322.965002, "o", "        }\r\n"]
[322.977332, "o", "        map[\"copy\"] = COPY_IF_NEEDED\r\n"]
[322.989661, "o", "        out = self._construct_from_dict(map)\r\n"]
[323.00199, "o", "\r\n"]
[323.014319, "o", "        # Set remaining info attributes\r\n"]
[323.026648, "o", "        for attr, value in attrs.items():\r\n"]
[323.038978, "o", "            setattr(out.info, attr, value)\r\n"]
[323.051307, "o", "\r\n"]
[323.063636, "o", "        return out\r\n"]
[323.075965, "o", "\r\n"]
[323.088294, "o", "    def get_sortable_arrays(self):\r\n"]
[323.100623, "o", "        \"\"\"\r\n"]
[323.112953, "o", "        Return a list of arrays which can be lexically sorted to represent\r\n"]
[323.125282, "o", "        the order of the parent column.\r\n"]
[323.137611, "o", "\r\n"]
[323.14994, "o", "        For Quantity this is just the quantity itself.\r\n"]
[323.162269, "o", "\r\n"]
[323.174599, "o", "\r\n"]
[323.186928, "o", "        Returns\r\n"]
[323.199257, "o", "        -------\r\n"]
[323.211586, "o", "        arrays : list of ndarray\r\n"]
[323.223915, "o", "        \"\"\"\r\n"]
[323.236244, "o", "        return [self._parent]\r\n"]
[323.248574, "o", "\r\n"]
[323.260903, "o", "\r\n"]
[323.273232, "o", "class Quantity(np.ndarray):\r\n"]
[323.285561, "o", "    \"\"\"A `~astropy.units.Quantity` represents a number with some associated unit.\r\n"]
[323.29789, "o", "\r\n"]
[323.310219, "o", "    See also: https://docs.astropy.org/en/stable/units/quantity.html\r\n"]
[323.322549, "o", "\r\n"]
[323.334878, "o", "    Parameters\r\n"]
[323.347207, "o", "    ----------\r\n"]
[323.359536, "o", "    value : number, `~numpy.ndarray`, `~astropy.units.Quantity` (sequence), or str\r\n"]
[323.371865, "o", "        The numerical value of this quantity in the units given by unit.  If a\r\n"]
[323.384195, "o", "        `Quantity` or sequence of them (or any other valid object with a\r\n"]
[323.396524, "o", "        ``unit`` attribute), creates a new `Quantity` object, converting to\r\n"]
[323.408853, "o", "        `unit` units as needed.  If a string, it is converted to a number or\r\n"]
[323.421182, "o", "        `Quantity`, depending on whether a unit is present.\r\n"]
[323.433511, "o", "\r\n"]
[323.44584, "o", "    unit : unit-like\r\n"]
[323.45817, "o", "        An object that represents the unit associated with the input value.\r\n"]
[323.470499, "o", "        Must be an `~astropy.units.UnitBase` object or a string parseable by\r\n"]
[323.482828, "o", "        the :mod:`~astropy.units` package.\r\n"]
[323.495157, "o", "\r\n"]
[323.507486, "o", "    dtype : ~numpy.dtype, optional\r\n"]
[323.519815, "o", "        The dtype of the resulting Numpy array or scalar that will\r\n"]
[323.532145, "o", "        hold the value.  If not provided, it is determined from the input,\r\n"]
[323.544474, "o", "        except that any integer and (non-Quantity) object inputs are converted\r\n"]
[323.556803, "o", "        to float by default.\r\n"]
[323.569132, "o", "        If `None`, the normal `numpy.dtype` introspection is used, e.g.\r\n"]
[323.581461, "o", "        preventing upcasting of integers.\r\n"]
[323.593791, "o", "\r\n"]
[323.60612, "o", "    copy : bool, optional\r\n"]
[323.618449, "o", "        If `True` (default), then the value is copied.  Otherwise, a copy will\r\n"]
[323.630778, "o", "        only be made if ``__array__`` returns a copy, if value is a nested\r\n"]
[323.643107, "o", "        sequence, or if a copy is needed to satisfy an explicitly given\r\n"]
[323.655436, "o", "        ``dtype``.  (The `False` option is intended mostly for internal use,\r\n"]
[323.667766, "o", "        to speed up initialization where a copy is known to have been made.\r\n"]
[323.680095, "o", "        Use with care.)\r\n"]
[323.692424, "o", "\r\n"]
[323.704753, "o", "    order : {'C', 'F', 'A'}, optional\r\n"]
[323.717082, "o", "        Specify the order of the array.  As in `~numpy.array`.  This parameter\r\n"]
[323.729411, "o", "        is ignored if the input is a `Quantity` and ``copy=False``.\r\n"]
[323.741741, "o", "\r\n"]
[323.75407, "o", "    subok : bool, optional\r\n"]
[323.766399, "o", "        If `False` (default), the returned array will be forced to be a\r\n"]
[323.778728, "o", "        `Quantity`.  Otherwise, `Quantity` subclasses will be passed through,\r\n"]
[323.791057, "o", "        or a subclass appropriate for the unit will be used (such as\r\n"]
[323.803387, "o", "        `~astropy.units.Dex` for ``u.dex(u.AA)``).\r\n"]
[323.815716, "o", "\r\n"]
[323.828045, "o", "    ndmin : int, optional\r\n"]
[323.840374, "o", "        Specifies the minimum number of dimensions that the resulting array\r\n"]
[323.852703, "o", "        should have.  Ones will be prepended to the shape as needed to meet\r\n"]
[323.865032, "o", "        this requirement.  This parameter is ignored if the input is a\r\n"]
[323.877362, "o", "        `Quantity` and ``copy=False``.\r\n"]
[323.889691, "o", "\r\n"]
[323.90202, "o", "    Raises\r\n"]
[323.914349, "o", "    ------\r\n"]
[323.926678, "o", "    TypeError\r\n"]
[323.939007, "o", "        If the value provided is not a Python numeric type.\r\n"]
[323.951337, "o", "    TypeError\r\n"]
[323.963666, "o", "        If the unit provided is not either a :class:`~astropy.units.Unit`\r\n"]
[323.975995, "o", "        object or a parseable string unit.\r\n"]
[323.988324, "o", "\r\n"]
[324.000653, "o", "    Notes\r\n"]
[324.012983, "o", "    -----\r\n"]
[324.025312, "o", "    Quantities can also be created by multiplying a number or array with a\r\n"]
[324.037641, "o", "    :class:`~astropy.units.Unit`. See https://docs.astropy.org/en/latest/units/\r\n"]
[324.04997, "o", "\r\n"]
[324.062299, "o", "    Unless the ``dtype`` argument is explicitly specified, integer\r\n"]
[324.074628, "o", "    or (non-Quantity) object inputs are converted to `float` by default.\r\n"]
[324.086958, "o", "    \"\"\"\r\n"]
[324.099287, "o", "\r\n"]
[324.111616, "o", "    # Need to set a class-level default for _equivalencies, or\r\n"]
[324.123945, "o", "    # Constants can not initialize properly\r\n"]
[324.136274, "o", "    _equivalencies = []\r\n"]
[324.148603, "o", "\r\n"]
[324.160933, "o", "    # Default unit for initialization; can be overridden by subclasses,\r\n"]
[324.173262, "o", "    # possibly to `None` to indicate there is no default unit.\r\n"]
[324.185591, "o", "    _default_unit = dimensionless_unscaled\r\n"]
[324.19792, "o", "\r\n"]
[324.210249, "o", "    # Ensures views have an undefined unit.\r\n"]
[324.222579, "o", "    _unit = None\r\n"]
[324.234908, "o", "\r\n"]
[324.247237, "o", "    __array_priority__ = 10000\r\n"]
[324.259566, "o", "\r\n"]
[324.271895, "o", "    def __class_getitem__(cls, unit_shape_dtype):\r\n"]
[324.284224, "o", "        \"\"\"Quantity Type Hints.\r\n"]
[324.296554, "o", "\r\n"]
[324.308883, "o", "        Unit-aware type hints are ``Annotated`` objects that encode the class,\r\n"]
[324.321212, "o", "        the unit, and possibly shape and dtype information, depending on the\r\n"]
[324.333541, "o", "        python and :mod:`numpy` versions.\r\n"]
[324.34587, "o", "\r\n"]
[324.3582, "o", "        Schematically, ``Annotated[cls[shape, dtype], unit]``\r\n"]
[324.370529, "o", "\r\n"]
[324.382858, "o", "        As a classmethod, the type is the class, ie ``Quantity``\r\n"]
[324.395187, "o", "        produces an ``Annotated[Quantity, ...]`` while a subclass\r\n"]
[324.407516, "o", "        like :class:`~astropy.coordinates.Angle` returns\r\n"]
[324.419845, "o", "        ``Annotated[Angle, ...]``.\r\n"]
[324.432175, "o", "\r\n"]
[324.444504, "o", "        Parameters\r\n"]
[324.456833, "o", "        ----------\r\n"]
[324.469162, "o", "        unit_shape_dtype : :class:`~astropy.units.UnitBase`, str, `~astropy.units.PhysicalType`, or tuple\r\n"]
[324.481491, "o", "            Unit specification, can be the physical type (ie str or class).\r\n"]
[324.49382, "o", "            If tuple, then the first element is the unit specification\r\n"]
[324.50615, "o", "            and all other elements are for `numpy.ndarray` type annotations.\r\n"]
[324.518479, "o", "            Whether they are included depends on the python and :mod:`numpy`\r\n"]
[324.530808, "o", "            versions.\r\n"]
[324.543137, "o", "\r\n"]
[324.555466, "o", "        Returns\r\n"]
[324.567796, "o", "        -------\r\n"]
[324.580125, "o", "        `typing.Annotated`, `astropy.units.Unit`, or `astropy.units.PhysicalType`\r\n"]
[324.592454, "o", "            Return type in this preference order:\r\n"]
[324.604783, "o", "            * `typing.Annotated`\r\n"]
[324.617112, "o", "            * `astropy.units.Unit` or `astropy.units.PhysicalType`\r\n"]
[324.629441, "o", "\r\n"]
[324.641771, "o", "        Raises\r\n"]
[324.6541, "o", "        ------\r\n"]
[324.666429, "o", "        TypeError\r\n"]
[324.678758, "o", "            If the unit/physical_type annotation is not Unit-like or\r\n"]
[324.691087, "o", "            PhysicalType-like.\r\n"]
[324.703416, "o", "\r\n"]
[324.715746, "o", "        Examples\r\n"]
[324.728075, "o", "        --------\r\n"]
[324.740404, "o", "        Create a unit-aware Quantity type annotation\r\n"]
[324.752733, "o", "\r\n"]
[324.765062, "o", "            >>> Quantity[Unit(\"s\")]\r\n"]
[324.777392, "o", "            Annotated[Quantity, Unit(\"s\")]\r\n"]
[324.789721, "o", "\r\n"]
[324.80205, "o", "        See Also\r\n"]
[324.814379, "o", "        --------\r\n"]
[324.826708, "o", "        `~astropy.units.quantity_input`\r\n"]
[324.839037, "o", "            Use annotations for unit checks on function arguments and results.\r\n"]
[324.851367, "o", "\r\n"]
[324.863696, "o", "        Notes\r\n"]
[324.876025, "o", "        -----\r\n"]
[324.888354, "o", "        |Quantity| types are also static-type compatible.\r\n"]
[324.900683, "o", "        \"\"\"\r\n"]
[324.913012, "o", "        from typing import Annotated\r\n"]
[324.925342, "o", "\r\n"]
[324.937671, "o", "        # process whether [unit] or [unit, shape, ptype]\r\n"]
[325.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[325.002, "i", "sed -n '400,1200p' astropy/units/quantity.py\r"]
[325.004, "o", "sed -n '400,1200p' astropy/units/quantity.py\r\n"]
[325.016, "o", "\u001b[?2004l\r\n"]
[325.026, "o", "        if isinstance(unit_shape_dtype, tuple):  # unit, shape, dtype\r\n"]
[325.036, "o", "            target = unit_shape_dtype[0]\r\n"]
[325.046, "o", "            shape_dtype = unit_shape_dtype[1:]\r\n"]
[325.056, "o", "        else:  # just unit\r\n"]
[325.066, "o", "            target = unit_shape_dtype\r\n"]
[325.076, "o", "            shape_dtype = ()\r\n"]
[325.086, "o", "\r\n"]
[325.096, "o", "        # Allowed unit/physical types. Errors if neither.\r\n"]
[325.106, "o", "        try:\r\n"]
[325.116, "o", "            unit = Unit(target)\r\n"]
[325.126, "o", "        except (TypeError, ValueError):\r\n"]
[325.136, "o", "            from astropy.units.physical import get_physical_type\r\n"]
[325.146, "o", "\r\n"]
[325.156, "o", "            try:\r\n"]
[325.166, "o", "                unit = get_physical_type(target)\r\n"]
[325.176, "o", "            except (TypeError, ValueError, KeyError):  # KeyError for Enum\r\n"]
[325.186, "o", "                raise TypeError(\r\n"]
[325.196, "o", "                    \"unit annotation is not a Unit or PhysicalType\"\r\n"]
[325.206, "o", "                ) from None\r\n"]
[325.216, "o", "\r\n"]
[325.226, "o", "        # Quantity does not (yet) properly extend the NumPy generics types,\r\n"]
[325.236, "o", "        # introduced in numpy v1.22+, instead just including the unit info as\r\n"]
[325.246, "o", "        # metadata using Annotated.\r\n"]
[325.256, "o", "        # TODO: ensure we do interact with NDArray.__class_getitem__.\r\n"]
[325.266, "o", "        return Annotated[cls, unit]\r\n"]
[325.276, "o", "\r\n"]
[325.286, "o", "    def __new__(\r\n"]
[325.296, "o", "        cls: type[Self],\r\n"]
[325.306, "o", "        value: QuantityLike,\r\n"]
[325.316, "o", "        unit=None,\r\n"]
[325.326, "o", "        dtype=np.inexact,\r\n"]
[325.336, "o", "        copy=True,\r\n"]
[325.346, "o", "        order=None,\r\n"]
[325.356, "o", "        subok=False,\r\n"]
[325.366, "o", "        ndmin=0,\r\n"]
[325.376, "o", "    ) -> Self:\r\n"]
[325.386, "o", "        if unit is not None:\r\n"]
[325.396, "o", "            # convert unit first, to avoid multiple string->unit conversions\r\n"]
[325.406, "o", "            unit = Unit(unit)\r\n"]
[325.416, "o", "\r\n"]
[325.426, "o", "        # inexact -> upcast to float dtype\r\n"]
[325.436, "o", "        float_default = dtype is np.inexact\r\n"]
[325.446, "o", "        if float_default:\r\n"]
[325.456, "o", "            dtype = None\r\n"]
[325.466, "o", "\r\n"]
[325.476, "o", "        # optimize speed for Quantity with no dtype given, copy=COPY_IF_NEEDED\r\n"]
[325.486, "o", "        if isinstance(value, Quantity):\r\n"]
[325.496, "o", "            if unit is not None and unit is not value.unit:\r\n"]
[325.506, "o", "                value = value.to(unit)\r\n"]
[325.516, "o", "                # the above already makes a copy (with float dtype)\r\n"]
[325.526, "o", "                copy = COPY_IF_NEEDED\r\n"]
[325.536, "o", "\r\n"]
[325.546, "o", "            if type(value) is not cls and not (subok and isinstance(value, cls)):\r\n"]
[325.556, "o", "                value = value.view(cls)\r\n"]
[325.566, "o", "\r\n"]
[325.576, "o", "            if float_default and value.dtype.kind in \"iu\":\r\n"]
[325.586, "o", "                dtype = float\r\n"]
[325.596, "o", "\r\n"]
[325.606, "o", "            return np.array(\r\n"]
[325.616, "o", "                value, dtype=dtype, copy=copy, order=order, subok=True, ndmin=ndmin\r\n"]
[325.626, "o", "            )\r\n"]
[325.636, "o", "\r\n"]
[325.646, "o", "        # Maybe str, or list/tuple of Quantity? If so, this may set value_unit.\r\n"]
[325.656, "o", "        # To ensure array remains fast, we short-circuit it.\r\n"]
[325.666, "o", "        value_unit = None\r\n"]
[325.676, "o", "        if not isinstance(value, np.ndarray):\r\n"]
[325.686, "o", "            if isinstance(value, str):\r\n"]
[325.696, "o", "                # The first part of the regex string matches any integer/float;\r\n"]
[325.706, "o", "                # the second parts adds possible trailing .+-, which will break\r\n"]
[325.716, "o", "                # the float function below and ensure things like 1.2.3deg\r\n"]
[325.726, "o", "                # will not work.\r\n"]
[325.736, "o", "                pattern = (\r\n"]
[325.746, "o", "                    r\"\\s*[+-]?\"\r\n"]
[325.756, "o", "                    r\"((\\d+\\.?\\d*)|(\\.\\d+)|([nN][aA][nN])|\"\r\n"]
[325.766, "o", "                    r\"([iI][nN][fF]([iI][nN][iI][tT][yY]){0,1}))\"\r\n"]
[325.776, "o", "                    r\"([eE][+-]?\\d+)?\"\r\n"]
[325.786, "o", "                    r\"[.+-]?\"\r\n"]
[325.796, "o", "                )\r\n"]
[325.806, "o", "\r\n"]
[325.816, "o", "                v = re.match(pattern, value)\r\n"]
[325.826, "o", "                unit_string = None\r\n"]
[325.836, "o", "                try:\r\n"]
[325.846, "o", "                    value = float(v.group())\r\n"]
[325.856, "o", "\r\n"]
[325.866, "o", "                except Exception:\r\n"]
[325.876, "o", "                    raise TypeError(\r\n"]
[325.886, "o", "                        f'Cannot parse \"{value}\" as a {cls.__name__}. It does not '\r\n"]
[325.896, "o", "                        \"start with a number.\"\r\n"]
[325.906, "o", "                    )\r\n"]
[325.916, "o", "\r\n"]
[325.926, "o", "                unit_string = v.string[v.end() :].strip()\r\n"]
[325.936, "o", "                if unit_string:\r\n"]
[325.946, "o", "                    value_unit = Unit(unit_string)\r\n"]
[325.956, "o", "                    if unit is None:\r\n"]
[325.966, "o", "                        unit = value_unit  # signal no conversion needed below.\r\n"]
[325.976, "o", "\r\n"]
[325.986, "o", "            elif isinstance(value, (list, tuple)) and len(value) > 0:\r\n"]
[325.996, "o", "                if all(isinstance(v, Quantity) for v in value):\r\n"]
[326.006, "o", "                    # If a list/tuple contains only quantities, stack them,\r\n"]
[326.016, "o", "                    # which also converts them to the same unit.\r\n"]
[326.026, "o", "                    value = np.stack(value)\r\n"]
[326.036, "o", "                    copy = False\r\n"]
[326.046, "o", "\r\n"]
[326.056, "o", "                elif (\r\n"]
[326.066, "o", "                    dtype is None\r\n"]
[326.076, "o", "                    and not hasattr(value, \"dtype\")\r\n"]
[326.086, "o", "                    and isinstance(unit, StructuredUnit)\r\n"]
[326.096, "o", "                ):\r\n"]
[326.106, "o", "                    # Special case for list/tuple of values and a structured unit:\r\n"]
[326.116, "o", "                    # ``np.array(value, dtype=None)`` would treat tuples as lower\r\n"]
[326.126, "o", "                    # levels of the array, rather than as elements of a structured\r\n"]
[326.136, "o", "                    # array, so we use the structure of the unit to help infer the\r\n"]
[326.146, "o", "                    # structured dtype of the value.\r\n"]
[326.156, "o", "                    dtype = unit._recursively_get_dtype(value)\r\n"]
[326.166, "o", "\r\n"]
[326.176, "o", "        using_default_unit = False\r\n"]
[326.186, "o", "        if value_unit is None:\r\n"]
[326.196, "o", "            # If the value has a `unit` attribute and if not None\r\n"]
[326.206, "o", "            # (for Columns with uninitialized unit), treat it like a quantity.\r\n"]
[326.216, "o", "            value_unit = getattr(value, \"unit\", None)\r\n"]
[326.226, "o", "            if value_unit is None:\r\n"]
[326.236, "o", "                # Default to dimensionless for no (initialized) unit attribute.\r\n"]
[326.246, "o", "                if unit is None:\r\n"]
[326.256, "o", "                    using_default_unit = True\r\n"]
[326.266, "o", "                    unit = cls._default_unit\r\n"]
[326.276, "o", "                value_unit = unit  # signal below that no conversion is needed\r\n"]
[326.286, "o", "            else:\r\n"]
[326.296, "o", "                try:\r\n"]
[326.306, "o", "                    value_unit = Unit(value_unit)\r\n"]
[326.316, "o", "                except Exception as exc:\r\n"]
[326.326, "o", "                    raise TypeError(\r\n"]
[326.336, "o", "                        f\"The unit attribute {value.unit!r} of the input could \"\r\n"]
[326.346, "o", "                        \"not be parsed as an astropy Unit.\"\r\n"]
[326.356, "o", "                    ) from exc\r\n"]
[326.366, "o", "\r\n"]
[326.376, "o", "                if unit is None:\r\n"]
[326.386, "o", "                    unit = value_unit\r\n"]
[326.396, "o", "                elif unit is not value_unit:\r\n"]
[326.406, "o", "                    copy = COPY_IF_NEEDED  # copy will be made in conversion at end\r\n"]
[326.416, "o", "\r\n"]
[326.426, "o", "        value = np.array(\r\n"]
[326.436, "o", "            value, dtype=dtype, copy=copy, order=order, subok=True, ndmin=ndmin\r\n"]
[326.446, "o", "        )\r\n"]
[326.456, "o", "\r\n"]
[326.466, "o", "        # For no-user-input unit, make sure the constructed unit matches the\r\n"]
[326.476, "o", "        # structure of the data.\r\n"]
[326.486, "o", "        if using_default_unit and value.dtype.names is not None:\r\n"]
[326.496, "o", "            unit = value_unit = _structured_unit_like_dtype(value_unit, value.dtype)\r\n"]
[326.506, "o", "\r\n"]
[326.516, "o", "        # check that array contains numbers or long int objects\r\n"]
[326.526, "o", "        if value.dtype.kind in \"OSU\" and not (\r\n"]
[326.536, "o", "            value.dtype.kind == \"O\" and isinstance(value.item(0), numbers.Number)\r\n"]
[326.546, "o", "        ):\r\n"]
[326.556, "o", "            raise TypeError(\"The value must be a valid Python or Numpy numeric type.\")\r\n"]
[326.566, "o", "\r\n"]
[326.576, "o", "        # by default, cast any integer, boolean, etc., to float\r\n"]
[326.586, "o", "        if float_default and value.dtype.kind in \"iuO\":\r\n"]
[326.596, "o", "            value = value.astype(float)\r\n"]
[326.606, "o", "\r\n"]
[326.616, "o", "        # if we allow subclasses, allow a class from the unit.\r\n"]
[326.626, "o", "        if subok:\r\n"]
[326.636, "o", "            qcls = getattr(unit, \"_quantity_class\", cls)\r\n"]
[326.646, "o", "            if issubclass(qcls, cls):\r\n"]
[326.656, "o", "                cls = qcls\r\n"]
[326.666, "o", "\r\n"]
[326.676, "o", "        value = value.view(cls)\r\n"]
[326.686, "o", "        value._set_unit(value_unit)\r\n"]
[326.696, "o", "        if unit is value_unit:\r\n"]
[326.706, "o", "            return value\r\n"]
[326.716, "o", "        else:\r\n"]
[326.726, "o", "            # here we had non-Quantity input that had a \"unit\" attribute\r\n"]
[326.736, "o", "            # with a unit different from the desired one.  So, convert.\r\n"]
[326.746, "o", "            return value.to(unit)\r\n"]
[326.756, "o", "\r\n"]
[326.766, "o", "    def __array_finalize__(self, obj):\r\n"]
[326.776, "o", "        # Check whether super().__array_finalize should be called\r\n"]
[326.786, "o", "        # (sadly, ndarray.__array_finalize__ is None; we cannot be sure\r\n"]
[326.796, "o", "        # what is above us).\r\n"]
[326.806, "o", "        super_array_finalize = super().__array_finalize__\r\n"]
[326.816, "o", "        if super_array_finalize is not None:\r\n"]
[326.826, "o", "            super_array_finalize(obj)\r\n"]
[326.836, "o", "\r\n"]
[326.846, "o", "        # If we're a new object or viewing an ndarray, nothing has to be done.\r\n"]
[326.856, "o", "        if obj is None or obj.__class__ is np.ndarray:\r\n"]
[326.866, "o", "            return\r\n"]
[326.876, "o", "\r\n"]
[326.886, "o", "        # Copy over the unit and possibly info.  Note that the only way the\r\n"]
[326.896, "o", "        # unit can already be set is if one enters via _new_view(), where the\r\n"]
[326.906, "o", "        # unit is often different from that of self, and where propagation of\r\n"]
[326.916, "o", "        # info is not always desirable.\r\n"]
[326.926, "o", "        if self._unit is None:\r\n"]
[326.936, "o", "            unit = getattr(obj, \"_unit\", None)\r\n"]
[326.946, "o", "            if unit is not None:\r\n"]
[326.956, "o", "                self._set_unit(unit)\r\n"]
[326.966, "o", "\r\n"]
[326.976, "o", "            # Copy info if the original had `info` defined.  Because of the way the\r\n"]
[326.986, "o", "            # DataInfo works, `'info' in obj.__dict__` is False until the\r\n"]
[326.996, "o", "            # `info` attribute is accessed or set.\r\n"]
[327.006, "o", "            if \"info\" in obj.__dict__:\r\n"]
[327.016, "o", "                self.info = obj.info\r\n"]
[327.026, "o", "\r\n"]
[327.036, "o", "    def __array_wrap__(self, obj, context=None, return_scalar=False):\r\n"]
[327.046, "o", "        if context is None:\r\n"]
[327.056, "o", "            # Methods like .squeeze() created a new `ndarray` and then call\r\n"]
[327.066, "o", "            # __array_wrap__ to turn the array into self's subclass.\r\n"]
[327.076, "o", "            return self._new_view(obj)\r\n"]
[327.086, "o", "\r\n"]
[327.096, "o", "        raise NotImplementedError(\r\n"]
[327.106, "o", "            \"__array_wrap__ should not be used with a context any more since all \"\r\n"]
[327.116, "o", "            \"use should go through array_function. Please raise an issue on \"\r\n"]
[327.126, "o", "            \"https://github.com/astropy/astropy\"\r\n"]
[327.136, "o", "        )\r\n"]
[327.146, "o", "\r\n"]
[327.156, "o", "    def __array_ufunc__(self, function, method, *inputs, **kwargs):\r\n"]
[327.166, "o", "        \"\"\"Wrap numpy ufuncs, taking care of units.\r\n"]
[327.176, "o", "\r\n"]
[327.186, "o", "        Parameters\r\n"]
[327.196, "o", "        ----------\r\n"]
[327.206, "o", "        function : callable\r\n"]
[327.216, "o", "            ufunc to wrap.\r\n"]
[327.226, "o", "        method : str\r\n"]
[327.236, "o", "            Ufunc method: ``__call__``, ``at``, ``reduce``, etc.\r\n"]
[327.246, "o", "        inputs : tuple\r\n"]
[327.256, "o", "            Input arrays.\r\n"]
[327.266, "o", "        kwargs : keyword arguments\r\n"]
[327.276, "o", "            As passed on, with ``out`` containing possible quantity output.\r\n"]
[327.286, "o", "\r\n"]
[327.296, "o", "        Returns\r\n"]
[327.306, "o", "        -------\r\n"]
[327.316, "o", "        result : `~astropy.units.Quantity` or `NotImplemented`\r\n"]
[327.326, "o", "            Results of the ufunc, with the unit set properly.\r\n"]
[327.336, "o", "        \"\"\"\r\n"]
[327.346, "o", "        # Determine required conversion functions -- to bring the unit of the\r\n"]
[327.356, "o", "        # input to that expected (e.g., radian for np.sin), or to get\r\n"]
[327.366, "o", "        # consistent units between two inputs (e.g., in np.add) --\r\n"]
[327.376, "o", "        # and the unit of the result (or tuple of units for nout > 1).\r\n"]
[327.386, "o", "        try:\r\n"]
[327.396, "o", "            converters, unit = converters_and_unit(function, method, *inputs)\r\n"]
[327.406, "o", "\r\n"]
[327.416, "o", "            out = kwargs.get(\"out\", None)\r\n"]
[327.426, "o", "            # Avoid loop back by turning any Quantity output into array views.\r\n"]
[327.436, "o", "            if out is not None:\r\n"]
[327.446, "o", "                # If pre-allocated output is used, check it is suitable.\r\n"]
[327.456, "o", "                # This also returns array view, to ensure we don't loop back.\r\n"]
[327.466, "o", "                if function.nout == 1:\r\n"]
[327.476, "o", "                    out = out[0]\r\n"]
[327.486, "o", "                out_array = check_output(out, unit, inputs, function=function)\r\n"]
[327.496, "o", "                # Ensure output argument remains a tuple.\r\n"]
[327.506, "o", "                kwargs[\"out\"] = (out_array,) if function.nout == 1 else out_array\r\n"]
[327.516, "o", "\r\n"]
[327.526, "o", "            if method == \"reduce\" and \"initial\" in kwargs and unit is not None:\r\n"]
[327.536, "o", "                # Special-case for initial argument for reductions like\r\n"]
[327.546, "o", "                # np.add.reduce.  This should be converted to the output unit as\r\n"]
[327.556, "o", "                # well, which is typically the same as the input unit (but can\r\n"]
[327.566, "o", "                # in principle be different: unitless for np.equal, radian\r\n"]
[327.576, "o", "                # for np.arctan2, though those are not necessarily useful!)\r\n"]
[327.586, "o", "                kwargs[\"initial\"] = self._to_own_unit(\r\n"]
[327.596, "o", "                    kwargs[\"initial\"], check_precision=False, unit=unit\r\n"]
[327.606, "o", "                )\r\n"]
[327.616, "o", "\r\n"]
[327.626, "o", "            # Same for inputs, but here also convert if necessary.\r\n"]
[327.636, "o", "            arrays = []\r\n"]
[327.646, "o", "            for input_, converter in zip(inputs, converters):\r\n"]
[327.656, "o", "                input_ = getattr(input_, \"value\", input_)\r\n"]
[327.666, "o", "                arrays.append(converter(input_) if converter else input_)\r\n"]
[327.676, "o", "\r\n"]
[327.686, "o", "            # Call our superclass's __array_ufunc__\r\n"]
[327.696, "o", "            result = super().__array_ufunc__(function, method, *arrays, **kwargs)\r\n"]
[327.706, "o", "            # If unit is None, a plain array is expected (e.g., comparisons), which\r\n"]
[327.716, "o", "            # means we're done.\r\n"]
[327.726, "o", "            # We're also done if the result was None (for method 'at') or\r\n"]
[327.736, "o", "            # NotImplemented, which can happen if other inputs/outputs override\r\n"]
[327.746, "o", "            # __array_ufunc__; hopefully, they can then deal with us.\r\n"]
[327.756, "o", "            if unit is None or result is None or result is NotImplemented:\r\n"]
[327.766, "o", "                return result\r\n"]
[327.776, "o", "\r\n"]
[327.786, "o", "            return self._result_as_quantity(result, unit, out)\r\n"]
[327.796, "o", "\r\n"]
[327.806, "o", "        except (TypeError, ValueError, AttributeError) as e:\r\n"]
[327.816, "o", "            out_normalized = kwargs.get(\"out\", ())\r\n"]
[327.826, "o", "            inputs_and_outputs = inputs + out_normalized\r\n"]
[327.836, "o", "            ignored_ufunc = (\r\n"]
[327.846, "o", "                None,\r\n"]
[327.856, "o", "                np.ndarray.__array_ufunc__,\r\n"]
[327.866, "o", "                type(self).__array_ufunc__,\r\n"]
[327.876, "o", "            )\r\n"]
[327.886, "o", "            if not all(\r\n"]
[327.896, "o", "                getattr(type(io), \"__array_ufunc__\", None) in ignored_ufunc\r\n"]
[327.906, "o", "                for io in inputs_and_outputs\r\n"]
[327.916, "o", "            ):\r\n"]
[327.926, "o", "                return NotImplemented\r\n"]
[327.936, "o", "            else:\r\n"]
[327.946, "o", "                raise e\r\n"]
[327.956, "o", "\r\n"]
[327.966, "o", "    def _result_as_quantity(self, result, unit, out):\r\n"]
[327.976, "o", "        \"\"\"Turn result into a quantity with the given unit.\r\n"]
[327.986, "o", "\r\n"]
[327.996, "o", "        If no output is given, it will take a view of the array as a quantity,\r\n"]
[328.006, "o", "        and set the unit.  If output is given, those should be quantity views\r\n"]
[328.016, "o", "        of the result arrays, and the function will just set the unit.\r\n"]
[328.026, "o", "\r\n"]
[328.036, "o", "        Parameters\r\n"]
[328.046, "o", "        ----------\r\n"]
[328.056, "o", "        result : ndarray or tuple thereof\r\n"]
[328.066, "o", "            Array(s) which need to be turned into quantity.\r\n"]
[328.076, "o", "        unit : `~astropy.units.Unit`\r\n"]
[328.086, "o", "            Unit for the quantities to be returned (or `None` if the result\r\n"]
[328.096, "o", "            should not be a quantity).  Should be tuple if result is a tuple.\r\n"]
[328.106, "o", "        out : `~astropy.units.Quantity` or None\r\n"]
[328.116, "o", "            Possible output quantity. Should be `None` or a tuple if result\r\n"]
[328.126, "o", "            is a tuple.\r\n"]
[328.136, "o", "\r\n"]
[328.146, "o", "        Returns\r\n"]
[328.156, "o", "        -------\r\n"]
[328.166, "o", "        out : `~astropy.units.Quantity`\r\n"]
[328.176, "o", "           With units set.\r\n"]
[328.186, "o", "        \"\"\"\r\n"]
[328.196, "o", "        if isinstance(result, (tuple, list)):\r\n"]
[328.206, "o", "            if out is None:\r\n"]
[328.216, "o", "                out = (None,) * len(result)\r\n"]
[328.226, "o", "            # Some np.linalg functions return namedtuple, which is handy to access\r\n"]
[328.236, "o", "            # elements by name, but cannot be directly initialized with an iterator.\r\n"]
[328.246, "o", "            result_cls = getattr(result, \"_make\", result.__class__)\r\n"]
[328.256, "o", "            return result_cls(\r\n"]
[328.266, "o", "                self._result_as_quantity(result_, unit_, out_)\r\n"]
[328.276, "o", "                for (result_, unit_, out_) in zip(result, unit, out)\r\n"]
[328.286, "o", "            )\r\n"]
[328.296, "o", "\r\n"]
[328.306, "o", "        if out is None:\r\n"]
[328.316, "o", "            # View the result array as a Quantity with the proper unit.\r\n"]
[328.326, "o", "            return (\r\n"]
[328.336, "o", "                result\r\n"]
[328.346, "o", "                if unit is None\r\n"]
[328.356, "o", "                else self._new_view(result, unit, propagate_info=False)\r\n"]
[328.366, "o", "            )\r\n"]
[328.376, "o", "\r\n"]
[328.386, "o", "        elif isinstance(out, Quantity):\r\n"]
[328.396, "o", "            # For given Quantity output, just set the unit. We know the unit\r\n"]
[328.406, "o", "            # is not None and the output is of the correct Quantity subclass,\r\n"]
[328.416, "o", "            # as it was passed through check_output.\r\n"]
[328.426, "o", "            # (We cannot do this unconditionally, though, since it is possible\r\n"]
[328.436, "o", "            # for out to be ndarray and the unit to be dimensionless.)\r\n"]
[328.446, "o", "            out._set_unit(unit)\r\n"]
[328.456, "o", "\r\n"]
[328.466, "o", "        return out\r\n"]
[328.476, "o", "\r\n"]
[328.486, "o", "    def __quantity_subclass__(self, unit):\r\n"]
[328.496, "o", "        \"\"\"\r\n"]
[328.506, "o", "        Overridden by subclasses to change what kind of view is\r\n"]
[328.516, "o", "        created based on the output unit of an operation.\r\n"]
[328.526, "o", "\r\n"]
[328.536, "o", "        Parameters\r\n"]
[328.546, "o", "        ----------\r\n"]
[328.556, "o", "        unit : UnitBase\r\n"]
[328.566, "o", "            The unit for which the appropriate class should be returned\r\n"]
[328.576, "o", "\r\n"]
[328.586, "o", "        Returns\r\n"]
[328.596, "o", "        -------\r\n"]
[328.606, "o", "        tuple :\r\n"]
[328.616, "o", "            - `~astropy.units.Quantity` subclass\r\n"]
[328.626, "o", "            - bool: True if subclasses of the given class are ok\r\n"]
[328.636, "o", "        \"\"\"\r\n"]
[328.646, "o", "        return Quantity, True\r\n"]
[328.656, "o", "\r\n"]
[328.666, "o", "    def _new_view(self, obj=None, unit=None, propagate_info=True):\r\n"]
[328.676, "o", "        \"\"\"Create a Quantity view of some array-like input, and set the unit.\r\n"]
[328.686, "o", "\r\n"]
[328.696, "o", "        By default, return a view of ``obj`` of the same class as ``self`` and\r\n"]
[328.706, "o", "        with the same unit.  Subclasses can override the type of class for a\r\n"]
[328.716, "o", "        given unit using ``__quantity_subclass__``, and can ensure properties\r\n"]
[328.726, "o", "        other than the unit are copied using ``__array_finalize__``.\r\n"]
[328.736, "o", "\r\n"]
[328.746, "o", "        If the given unit defines a ``_quantity_class`` of which ``self``\r\n"]
[328.756, "o", "        is not an instance, a view using this class is taken.\r\n"]
[328.766, "o", "\r\n"]
[328.776, "o", "        Parameters\r\n"]
[328.786, "o", "        ----------\r\n"]
[328.796, "o", "        obj : ndarray or scalar, optional\r\n"]
[328.806, "o", "            The array to create a view of.  If obj is a numpy or python scalar,\r\n"]
[328.816, "o", "            it will be converted to an array scalar.  By default, ``self``\r\n"]
[328.826, "o", "            is converted.\r\n"]
[328.836, "o", "\r\n"]
[328.846, "o", "        unit : unit-like, optional\r\n"]
[328.856, "o", "            The unit of the resulting object.  It is used to select a\r\n"]
[328.866, "o", "            subclass, and explicitly assigned to the view if given.\r\n"]
[328.876, "o", "            If not given, the subclass and unit will be that of ``self``.\r\n"]
[328.886, "o", "\r\n"]
[328.896, "o", "        propagate_info : bool, optional\r\n"]
[328.906, "o", "            Whether to transfer ``info`` if present.  Default: `True`, as\r\n"]
[328.916, "o", "            appropriate for, e.g., unit conversions or slicing, where the\r\n"]
[328.926, "o", "            nature of the object does not change.\r\n"]
[328.936, "o", "\r\n"]
[328.946, "o", "        Returns\r\n"]
[328.956, "o", "        -------\r\n"]
[328.966, "o", "        view : `~astropy.units.Quantity` subclass\r\n"]
[328.976, "o", "\r\n"]
[328.986, "o", "        \"\"\"\r\n"]
[328.996, "o", "        # Determine the unit and quantity subclass that we need for the view.\r\n"]
[329.006, "o", "        if unit is None:\r\n"]
[329.016, "o", "            unit = self.unit\r\n"]
[329.026, "o", "            quantity_subclass = self.__class__\r\n"]
[329.036, "o", "        elif unit is self.unit and self.__class__ is Quantity:\r\n"]
[329.046, "o", "            # The second part is because we should not presume what other\r\n"]
[329.056, "o", "            # classes want to do for the same unit.  E.g., Constant will\r\n"]
[329.066, "o", "            # always want to fall back to Quantity, and relies on going\r\n"]
[329.076, "o", "            # through `__quantity_subclass__`.\r\n"]
[329.086, "o", "            quantity_subclass = Quantity\r\n"]
[329.096, "o", "        else:\r\n"]
[329.106, "o", "            unit = Unit(unit)\r\n"]
[329.116, "o", "            quantity_subclass = getattr(unit, \"_quantity_class\", Quantity)\r\n"]
[329.126, "o", "            if isinstance(self, quantity_subclass):\r\n"]
[329.136, "o", "                quantity_subclass, subok = self.__quantity_subclass__(unit)\r\n"]
[329.146, "o", "                if subok:\r\n"]
[329.156, "o", "                    quantity_subclass = self.__class__\r\n"]
[329.166, "o", "\r\n"]
[329.176, "o", "        # We only want to propagate information from ``self`` to our new view,\r\n"]
[329.186, "o", "        # so obj should be a regular array.  By using ``np.array``, we also\r\n"]
[329.196, "o", "        # convert python and numpy scalars, which cannot be viewed as arrays\r\n"]
[329.206, "o", "        # and thus not as Quantity either, to zero-dimensional arrays.\r\n"]
[329.216, "o", "        # (These are turned back into scalar in `.value`)\r\n"]
[329.226, "o", "        # Note that for an ndarray input, the np.array call takes only double\r\n"]
[329.236, "o", "        # ``obj.__class is np.ndarray``. So, not worth special-casing.\r\n"]
[329.246, "o", "        if obj is None:\r\n"]
[329.256, "o", "            obj = self.view(np.ndarray)\r\n"]
[329.266, "o", "        else:\r\n"]
[329.276, "o", "            obj = np.array(obj, copy=COPY_IF_NEEDED, subok=True)\r\n"]
[329.286, "o", "\r\n"]
[329.296, "o", "        # Take the view, set the unit, and update possible other properties\r\n"]
[329.306, "o", "        # such as ``info``, ``wrap_angle`` in `Longitude`, etc.\r\n"]
[329.316, "o", "        view = obj.view(quantity_subclass)\r\n"]
[329.326, "o", "        view._set_unit(unit)\r\n"]
[329.336, "o", "        view.__array_finalize__(self)\r\n"]
[329.346, "o", "        if propagate_info and \"info\" in self.__dict__:\r\n"]
[329.356, "o", "            view.info = self.info\r\n"]
[329.366, "o", "        return view\r\n"]
[329.376, "o", "\r\n"]
[329.386, "o", "    def _set_unit(self, unit):\r\n"]
[329.396, "o", "        \"\"\"Set the unit.\r\n"]
[329.406, "o", "\r\n"]
[329.416, "o", "        This is used anywhere the unit is set or modified, i.e., in the\r\n"]
[329.426, "o", "        initializer, in ``__imul__`` and ``__itruediv__`` for in-place\r\n"]
[329.436, "o", "        multiplication and division by another unit, as well as in\r\n"]
[329.446, "o", "        ``__array_finalize__`` for wrapping up views.  For Quantity, it just\r\n"]
[329.456, "o", "        sets the unit, but subclasses can override it to check that, e.g.,\r\n"]
[329.466, "o", "        a unit is consistent.\r\n"]
[329.476, "o", "        \"\"\"\r\n"]
[329.486, "o", "        if not isinstance(unit, UnitBase):\r\n"]
[329.496, "o", "            if isinstance(self._unit, StructuredUnit) or isinstance(\r\n"]
[329.506, "o", "                unit, StructuredUnit\r\n"]
[329.516, "o", "            ):\r\n"]
[329.526, "o", "                unit = StructuredUnit(unit, self.dtype)\r\n"]
[329.536, "o", "            else:\r\n"]
[329.546, "o", "                # Trying to go through a string ensures that, e.g., Magnitudes with\r\n"]
[329.556, "o", "                # dimensionless physical unit become Quantity with units of mag.\r\n"]
[329.566, "o", "                unit = Unit(str(unit), parse_strict=\"silent\")\r\n"]
[329.576, "o", "                if not isinstance(unit, (UnitBase, StructuredUnit)):\r\n"]
[329.586, "o", "                    raise UnitTypeError(\r\n"]
[329.596, "o", "                        f\"{self.__class__.__name__} instances require normal units, \"\r\n"]
[329.606, "o", "                        f\"not {unit.__class__} instances.\"\r\n"]
[329.616, "o", "                    )\r\n"]
[329.626, "o", "\r\n"]
[329.636, "o", "        self._unit = unit\r\n"]
[329.646, "o", "\r\n"]
[329.656, "o", "    def __deepcopy__(self, memo):\r\n"]
[329.666, "o", "        # If we don't define this, ``copy.deepcopy(quantity)`` will\r\n"]
[329.676, "o", "        # return a bare Numpy array.\r\n"]
[329.686, "o", "        return self.copy()\r\n"]
[329.696, "o", "\r\n"]
[329.706, "o", "    def __reduce__(self):\r\n"]
[329.716, "o", "        # patch to pickle Quantity objects (ndarray subclasses), see\r\n"]
[329.726, "o", "        # http://www.mail-archive.com/numpy-discussion@scipy.org/msg02446.html\r\n"]
[329.736, "o", "\r\n"]
[329.746, "o", "        object_state = list(super().__reduce__())\r\n"]
[329.756, "o", "        object_state[2] = (object_state[2], self.__dict__)\r\n"]
[329.766, "o", "        return tuple(object_state)\r\n"]
[329.776, "o", "\r\n"]
[329.786, "o", "    def __setstate__(self, state):\r\n"]
[329.796, "o", "        # patch to unpickle Quantity objects (ndarray subclasses), see\r\n"]
[329.806, "o", "        # http://www.mail-archive.com/numpy-discussion@scipy.org/msg02446.html\r\n"]
[329.816, "o", "\r\n"]
[329.826, "o", "        nd_state, own_state = state\r\n"]
[329.836, "o", "        super().__setstate__(nd_state)\r\n"]
[329.846, "o", "        self.__dict__.update(own_state)\r\n"]
[329.856, "o", "\r\n"]
[329.866, "o", "    info = QuantityInfo()\r\n"]
[329.876, "o", "\r\n"]
[329.886, "o", "    def _to_value(self, unit, equivalencies=[]):\r\n"]
[329.896, "o", "        \"\"\"Helper method for to and to_value.\"\"\"\r\n"]
[329.906, "o", "        if equivalencies == []:\r\n"]
[329.916, "o", "            equivalencies = self._equivalencies\r\n"]
[329.926, "o", "        if not self.dtype.names or isinstance(self.unit, StructuredUnit):\r\n"]
[329.936, "o", "            # Standard path, let unit to do work.\r\n"]
[330.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[330.002, "i", "sed -n '1200,2200p' astropy/units/quantity.py\r"]
[330.004, "o", "sed -n '1200,2200p' astropy/units/quantity.py\r\n"]
[330.016, "o", "\u001b[?2004l\r\n"]
[330.026, "o", "    # behaviour, but instead of emitting a warning here, let it be done by\r\n"]
[330.036, "o", "    # other (which likely is a unit if this was a mistake).\r\n"]
[330.046, "o", "    def __rshift__(self, other):\r\n"]
[330.056, "o", "        return NotImplemented\r\n"]
[330.066, "o", "\r\n"]
[330.076, "o", "    def __irshift__(self, other):\r\n"]
[330.086, "o", "        return NotImplemented\r\n"]
[330.096, "o", "\r\n"]
[330.106, "o", "    # Arithmetic operations\r\n"]
[330.116, "o", "    def __mul__(self, other):\r\n"]
[330.126, "o", "        \"\"\"Multiplication between `Quantity` objects and other objects.\"\"\"\r\n"]
[330.136, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[330.146, "o", "            try:\r\n"]
[330.156, "o", "                return self._new_view(\r\n"]
[330.166, "o", "                    self.value.copy(), other * self.unit, propagate_info=False\r\n"]
[330.176, "o", "                )\r\n"]
[330.186, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[330.196, "o", "                return NotImplemented\r\n"]
[330.206, "o", "\r\n"]
[330.216, "o", "        return super().__mul__(other)\r\n"]
[330.226, "o", "\r\n"]
[330.236, "o", "    def __imul__(self, other):\r\n"]
[330.246, "o", "        \"\"\"In-place multiplication between `Quantity` objects and others.\"\"\"\r\n"]
[330.256, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[330.266, "o", "            self._set_unit(other * self.unit)\r\n"]
[330.276, "o", "            return self\r\n"]
[330.286, "o", "\r\n"]
[330.296, "o", "        return super().__imul__(other)\r\n"]
[330.306, "o", "\r\n"]
[330.316, "o", "    def __rmul__(self, other):\r\n"]
[330.326, "o", "        \"\"\"\r\n"]
[330.336, "o", "        Right Multiplication between `Quantity` objects and other objects.\r\n"]
[330.346, "o", "        \"\"\"\r\n"]
[330.356, "o", "        return self.__mul__(other)\r\n"]
[330.366, "o", "\r\n"]
[330.376, "o", "    def __truediv__(self, other):\r\n"]
[330.386, "o", "        \"\"\"Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[330.396, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[330.406, "o", "            try:\r\n"]
[330.416, "o", "                return self._new_view(\r\n"]
[330.426, "o", "                    self.value.copy(), self.unit / other, propagate_info=False\r\n"]
[330.436, "o", "                )\r\n"]
[330.446, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[330.456, "o", "                return NotImplemented\r\n"]
[330.466, "o", "\r\n"]
[330.476, "o", "        return super().__truediv__(other)\r\n"]
[330.486, "o", "\r\n"]
[330.496, "o", "    def __itruediv__(self, other):\r\n"]
[330.506, "o", "        \"\"\"Inplace division between `Quantity` objects and other objects.\"\"\"\r\n"]
[330.516, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[330.526, "o", "            self._set_unit(self.unit / other)\r\n"]
[330.536, "o", "            return self\r\n"]
[330.546, "o", "\r\n"]
[330.556, "o", "        return super().__itruediv__(other)\r\n"]
[330.566, "o", "\r\n"]
[330.576, "o", "    def __rtruediv__(self, other):\r\n"]
[330.586, "o", "        \"\"\"Right Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[330.596, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[330.606, "o", "            return self._new_view(\r\n"]
[330.616, "o", "                1.0 / self.value, other / self.unit, propagate_info=False\r\n"]
[330.626, "o", "            )\r\n"]
[330.636, "o", "\r\n"]
[330.646, "o", "        return super().__rtruediv__(other)\r\n"]
[330.656, "o", "\r\n"]
[330.666, "o", "    def __pow__(self, other):\r\n"]
[330.676, "o", "        if isinstance(other, Fraction):\r\n"]
[330.686, "o", "            # Avoid getting object arrays by raising the value to a Fraction.\r\n"]
[330.696, "o", "            return self._new_view(\r\n"]
[330.706, "o", "                self.value ** float(other), self.unit**other, propagate_info=False\r\n"]
[330.716, "o", "            )\r\n"]
[330.726, "o", "\r\n"]
[330.736, "o", "        return super().__pow__(other)\r\n"]
[330.746, "o", "\r\n"]
[330.756, "o", "    # other overrides of special functions\r\n"]
[330.766, "o", "    def __hash__(self):\r\n"]
[330.776, "o", "        return hash(self.value) ^ hash(self.unit)\r\n"]
[330.786, "o", "\r\n"]
[330.796, "o", "    def __iter__(self):\r\n"]
[330.806, "o", "        if self.isscalar:\r\n"]
[330.816, "o", "            raise TypeError(\r\n"]
[330.826, "o", "                f\"'{self.__class__.__name__}' object with a scalar value is not\"\r\n"]
[330.836, "o", "                \" iterable\"\r\n"]
[330.846, "o", "            )\r\n"]
[330.856, "o", "\r\n"]
[330.866, "o", "        # Otherwise return a generator\r\n"]
[330.876, "o", "        def quantity_iter():\r\n"]
[330.886, "o", "            for val in self.value:\r\n"]
[330.896, "o", "                yield self._new_view(val)\r\n"]
[330.906, "o", "\r\n"]
[330.916, "o", "        return quantity_iter()\r\n"]
[330.926, "o", "\r\n"]
[330.936, "o", "    def __getitem__(self, key):\r\n"]
[330.946, "o", "        if isinstance(key, str) and isinstance(self.unit, StructuredUnit):\r\n"]
[330.956, "o", "            return self._new_view(\r\n"]
[330.966, "o", "                self.view(np.ndarray)[key], self.unit[key], propagate_info=False\r\n"]
[330.976, "o", "            )\r\n"]
[330.986, "o", "\r\n"]
[330.996, "o", "        try:\r\n"]
[331.006, "o", "            out = super().__getitem__(key)\r\n"]
[331.016, "o", "        except IndexError:\r\n"]
[331.026, "o", "            # We want zero-dimensional Quantity objects to behave like scalars,\r\n"]
[331.036, "o", "            # so they should raise a TypeError rather than an IndexError.\r\n"]
[331.046, "o", "            if self.isscalar:\r\n"]
[331.056, "o", "                raise TypeError(\r\n"]
[331.066, "o", "                    f\"'{self.__class__.__name__}' object with a scalar value \"\r\n"]
[331.076, "o", "                    \"does not support indexing\"\r\n"]
[331.086, "o", "                )\r\n"]
[331.096, "o", "            else:\r\n"]
[331.106, "o", "                raise\r\n"]
[331.116, "o", "        # For single elements, ndarray.__getitem__ returns scalars; these\r\n"]
[331.126, "o", "        # need a new view as a Quantity.\r\n"]
[331.136, "o", "        if not isinstance(out, np.ndarray):\r\n"]
[331.146, "o", "            out = self._new_view(out)\r\n"]
[331.156, "o", "        return out\r\n"]
[331.166, "o", "\r\n"]
[331.176, "o", "    def __setitem__(self, i, value):\r\n"]
[331.186, "o", "        if isinstance(i, str):\r\n"]
[331.196, "o", "            # Indexing will cause a different unit, so by doing this in\r\n"]
[331.206, "o", "            # two steps we effectively try with the right unit.\r\n"]
[331.216, "o", "            self[i][...] = value\r\n"]
[331.226, "o", "            return\r\n"]
[331.236, "o", "\r\n"]
[331.246, "o", "        # update indices in info if the info property has been accessed\r\n"]
[331.256, "o", "        # (in which case 'info' in self.__dict__ is True; this is guaranteed\r\n"]
[331.266, "o", "        # to be the case if we're part of a table).\r\n"]
[331.276, "o", "        if not self.isscalar and \"info\" in self.__dict__:\r\n"]
[331.286, "o", "            self.info.adjust_indices(i, value, len(self))\r\n"]
[331.296, "o", "        self.view(np.ndarray).__setitem__(i, self._to_own_unit(value))\r\n"]
[331.306, "o", "\r\n"]
[331.316, "o", "    # __contains__ is OK\r\n"]
[331.326, "o", "\r\n"]
[331.336, "o", "    def __bool__(self):\r\n"]
[331.346, "o", "        \"\"\"This method raises ValueError, since truthiness of quantities is ambiguous,\r\n"]
[331.356, "o", "        especially for logarithmic units and temperatures. Use explicit comparisons.\r\n"]
[331.366, "o", "        \"\"\"\r\n"]
[331.376, "o", "        raise ValueError(\r\n"]
[331.386, "o", "            f\"{type(self).__name__} truthiness is ambiguous, especially for logarithmic units\"\r\n"]
[331.396, "o", "            \" and temperatures. Use explicit comparisons.\"\r\n"]
[331.406, "o", "        )\r\n"]
[331.416, "o", "\r\n"]
[331.426, "o", "    def __len__(self):\r\n"]
[331.436, "o", "        if self.isscalar:\r\n"]
[331.446, "o", "            raise TypeError(\r\n"]
[331.456, "o", "                f\"'{self.__class__.__name__}' object with a scalar value has no len()\"\r\n"]
[331.466, "o", "            )\r\n"]
[331.476, "o", "        else:\r\n"]
[331.486, "o", "            return len(self.value)\r\n"]
[331.496, "o", "\r\n"]
[331.506, "o", "    # Numerical types\r\n"]
[331.516, "o", "    def __float__(self):\r\n"]
[331.526, "o", "        try:\r\n"]
[331.536, "o", "            return float(self.to_value(dimensionless_unscaled))\r\n"]
[331.546, "o", "        except (UnitsError, TypeError):\r\n"]
[331.556, "o", "            raise TypeError(\r\n"]
[331.566, "o", "                \"only dimensionless scalar quantities can be \"\r\n"]
[331.576, "o", "                \"converted to Python scalars\"\r\n"]
[331.586, "o", "            )\r\n"]
[331.596, "o", "\r\n"]
[331.606, "o", "    def __int__(self):\r\n"]
[331.616, "o", "        try:\r\n"]
[331.626, "o", "            return int(self.to_value(dimensionless_unscaled))\r\n"]
[331.636, "o", "        except (UnitsError, TypeError):\r\n"]
[331.646, "o", "            raise TypeError(\r\n"]
[331.656, "o", "                \"only dimensionless scalar quantities can be \"\r\n"]
[331.666, "o", "                \"converted to Python scalars\"\r\n"]
[331.676, "o", "            )\r\n"]
[331.686, "o", "\r\n"]
[331.696, "o", "    def __index__(self):\r\n"]
[331.706, "o", "        # for indices, we do not want to mess around with scaling at all,\r\n"]
[331.716, "o", "        # so unlike for float, int, we insist here on unscaled dimensionless\r\n"]
[331.726, "o", "        try:\r\n"]
[331.736, "o", "            assert self.unit.is_unity()\r\n"]
[331.746, "o", "            return self.value.__index__()\r\n"]
[331.756, "o", "        except Exception:\r\n"]
[331.766, "o", "            raise TypeError(\r\n"]
[331.776, "o", "                \"only integer dimensionless scalar quantities \"\r\n"]
[331.786, "o", "                \"can be converted to a Python index\"\r\n"]
[331.796, "o", "            )\r\n"]
[331.806, "o", "\r\n"]
[331.816, "o", "    # TODO: we may want to add a hook for dimensionless quantities?\r\n"]
[331.826, "o", "    @property\r\n"]
[331.836, "o", "    def _unitstr(self):\r\n"]
[331.846, "o", "        if self.unit is None:\r\n"]
[331.856, "o", "            unitstr = _UNIT_NOT_INITIALISED\r\n"]
[331.866, "o", "        else:\r\n"]
[331.876, "o", "            unitstr = str(self.unit)\r\n"]
[331.886, "o", "\r\n"]
[331.896, "o", "        if unitstr:\r\n"]
[331.906, "o", "            unitstr = \" \" + unitstr\r\n"]
[331.916, "o", "\r\n"]
[331.926, "o", "        return unitstr\r\n"]
[331.936, "o", "\r\n"]
[331.946, "o", "    def to_string(\r\n"]
[331.956, "o", "        self, unit=None, precision=None, format=None, subfmt=None, *, formatter=None\r\n"]
[331.966, "o", "    ):\r\n"]
[331.976, "o", "        \"\"\"\r\n"]
[331.986, "o", "        Generate a string representation of the quantity and its unit.\r\n"]
[331.996, "o", "\r\n"]
[332.006, "o", "        The behavior of this function can be altered via the\r\n"]
[332.016, "o", "        `numpy.set_printoptions` function and its various keywords.  The\r\n"]
[332.026, "o", "        exception to this is the ``threshold`` keyword, which is controlled via\r\n"]
[332.036, "o", "        the ``[units.quantity]`` configuration item ``latex_array_threshold``.\r\n"]
[332.046, "o", "        This is treated separately because the numpy default of 1000 is too big\r\n"]
[332.056, "o", "        for most browsers to handle.\r\n"]
[332.066, "o", "\r\n"]
[332.076, "o", "        Parameters\r\n"]
[332.086, "o", "        ----------\r\n"]
[332.096, "o", "        unit : unit-like, optional\r\n"]
[332.106, "o", "            Specifies the unit.  If not provided,\r\n"]
[332.116, "o", "            the unit used to initialize the quantity will be used.\r\n"]
[332.126, "o", "\r\n"]
[332.136, "o", "        precision : number, optional\r\n"]
[332.146, "o", "            The level of decimal precision. If `None`, or not provided,\r\n"]
[332.156, "o", "            it will be determined from NumPy print options.\r\n"]
[332.166, "o", "\r\n"]
[332.176, "o", "        format : str, optional\r\n"]
[332.186, "o", "            The format of the result. If not provided, an unadorned\r\n"]
[332.196, "o", "            string is returned. Supported values are:\r\n"]
[332.206, "o", "\r\n"]
[332.216, "o", "            - 'latex': Return a LaTeX-formatted string\r\n"]
[332.226, "o", "\r\n"]
[332.236, "o", "            - 'latex_inline': Return a LaTeX-formatted string that uses\r\n"]
[332.246, "o", "              negative exponents instead of fractions\r\n"]
[332.256, "o", "\r\n"]
[332.266, "o", "        formatter : str, callable, dict, optional\r\n"]
[332.276, "o", "            The formatter to use for the value. If a string, it should be a\r\n"]
[332.286, "o", "            valid format specifier using Python's mini-language. If a callable,\r\n"]
[332.296, "o", "            it will be treated as the default formatter for all values and will\r\n"]
[332.306, "o", "            overwrite default Latex formatting for exponential notation and complex\r\n"]
[332.316, "o", "            numbers. If a dict, it should map a specific type to a callable to be\r\n"]
[332.326, "o", "            directly passed into `numpy.array2string`. If not provided, the default\r\n"]
[332.336, "o", "            formatter will be used.\r\n"]
[332.346, "o", "\r\n"]
[332.356, "o", "        subfmt : str, optional\r\n"]
[332.366, "o", "            Subformat of the result. For the moment, only used for\r\n"]
[332.376, "o", "            ``format='latex'`` and ``format='latex_inline'``. Supported\r\n"]
[332.386, "o", "            values are:\r\n"]
[332.396, "o", "\r\n"]
[332.406, "o", "            - 'inline': Use ``$ ... $`` as delimiters.\r\n"]
[332.416, "o", "\r\n"]
[332.426, "o", "            - 'display': Use ``$\\\\displaystyle ... $`` as delimiters.\r\n"]
[332.436, "o", "\r\n"]
[332.446, "o", "        Returns\r\n"]
[332.456, "o", "        -------\r\n"]
[332.466, "o", "        str\r\n"]
[332.476, "o", "            A string with the contents of this Quantity\r\n"]
[332.486, "o", "        \"\"\"\r\n"]
[332.496, "o", "        if unit is not None and unit != self.unit:\r\n"]
[332.506, "o", "            return self.to(unit).to_string(\r\n"]
[332.516, "o", "                unit=None,\r\n"]
[332.526, "o", "                precision=precision,\r\n"]
[332.536, "o", "                format=format,\r\n"]
[332.546, "o", "                subfmt=subfmt,\r\n"]
[332.556, "o", "                formatter=formatter,\r\n"]
[332.566, "o", "            )\r\n"]
[332.576, "o", "\r\n"]
[332.586, "o", "        if format is None and formatter is None and precision is None:\r\n"]
[332.596, "o", "            # Use default formatting settings\r\n"]
[332.606, "o", "            return f\"{self.value}{self._unitstr:s}\"\r\n"]
[332.616, "o", "\r\n"]
[332.626, "o", "        formats = {\r\n"]
[332.636, "o", "            None: None,\r\n"]
[332.646, "o", "            \"latex\": {\r\n"]
[332.656, "o", "                None: (\"$\", \"$\"),\r\n"]
[332.666, "o", "                \"inline\": (\"$\", \"$\"),\r\n"]
[332.676, "o", "                \"display\": (r\"$\\displaystyle \", r\"$\"),\r\n"]
[332.686, "o", "            },\r\n"]
[332.696, "o", "        }\r\n"]
[332.706, "o", "        formats[\"latex_inline\"] = formats[\"latex\"]\r\n"]
[332.716, "o", "\r\n"]
[332.726, "o", "        if format not in formats:\r\n"]
[332.736, "o", "            raise ValueError(f\"Unknown format '{format}'\")\r\n"]
[332.746, "o", "\r\n"]
[332.756, "o", "        format_spec = formatter if isinstance(formatter, str) else None\r\n"]
[332.766, "o", "\r\n"]
[332.776, "o", "        if format is None:\r\n"]
[332.786, "o", "            if format_spec is not None:\r\n"]
[332.796, "o", "\r\n"]
[332.806, "o", "                def formatter(value):\r\n"]
[332.816, "o", "                    return builtins.format(value, format_spec)\r\n"]
[332.826, "o", "\r\n"]
[332.836, "o", "            if callable(formatter):\r\n"]
[332.846, "o", "                formatter = {\"all\": formatter}\r\n"]
[332.856, "o", "\r\n"]
[332.866, "o", "            return (\r\n"]
[332.876, "o", "                np.array2string(\r\n"]
[332.886, "o", "                    self.value,\r\n"]
[332.896, "o", "                    precision=precision,\r\n"]
[332.906, "o", "                    floatmode=\"fixed\",\r\n"]
[332.916, "o", "                    formatter=formatter,\r\n"]
[332.926, "o", "                )\r\n"]
[332.936, "o", "                + self._unitstr\r\n"]
[332.946, "o", "            )\r\n"]
[332.956, "o", "\r\n"]
[332.966, "o", "        # else, for the moment we assume format=\"latex\" or \"latex_inline\".\r\n"]
[332.976, "o", "\r\n"]
[332.986, "o", "        # Set the precision if set, otherwise use numpy default\r\n"]
[332.996, "o", "        pops = np.get_printoptions()\r\n"]
[333.006, "o", "        if format_spec is None:\r\n"]
[333.016, "o", "            format_spec = (\r\n"]
[333.026, "o", "                f\".{precision if precision is not None else pops['precision']}g\"\r\n"]
[333.036, "o", "            )\r\n"]
[333.046, "o", "\r\n"]
[333.056, "o", "        # Use default formatters\r\n"]
[333.066, "o", "        if formatter is None or isinstance(formatter, str):\r\n"]
[333.076, "o", "            # Filter width and alignment operations for latex\r\n"]
[333.086, "o", "            # [[fill]align][sign][\"z\"][\"#\"][\"0\"][width][grouping_option][\".\" precision][type]\r\n"]
[333.096, "o", "            format_spec = re.sub(\r\n"]
[333.106, "o", "                r\"(.*?)([+\\- ]?)(\\d+)?(,)?(\\.\\d+)?([a-zA-Z%]+)?$\",\r\n"]
[333.116, "o", "                r\"\\2\\5\\6\",\r\n"]
[333.126, "o", "                format_spec,\r\n"]
[333.136, "o", "            )\r\n"]
[333.146, "o", "\r\n"]
[333.156, "o", "            if self.dtype.kind == \"c\":  # Complex default latex formatter\r\n"]
[333.166, "o", "                # Disallow sign operations for the imaginary part\r\n"]
[333.176, "o", "                imag_format_spec = re.sub(r\"[+\\- ]\", \"\", format_spec)\r\n"]
[333.186, "o", "\r\n"]
[333.196, "o", "                def formatter(value):\r\n"]
[333.206, "o", "                    return \"({}{}i)\".format(\r\n"]
[333.216, "o", "                        Latex.format_exponential_notation(\r\n"]
[333.226, "o", "                            value.real, format_spec=format_spec\r\n"]
[333.236, "o", "                        ),\r\n"]
[333.246, "o", "                        Latex.format_exponential_notation(\r\n"]
[333.256, "o", "                            value.imag, format_spec=\"+\" + imag_format_spec\r\n"]
[333.266, "o", "                        ),\r\n"]
[333.276, "o", "                    )\r\n"]
[333.286, "o", "\r\n"]
[333.296, "o", "            else:  # Float default latex formatter\r\n"]
[333.306, "o", "\r\n"]
[333.316, "o", "                def formatter(value):\r\n"]
[333.326, "o", "                    return Latex.format_exponential_notation(\r\n"]
[333.336, "o", "                        value, format_spec=format_spec\r\n"]
[333.346, "o", "                    )\r\n"]
[333.356, "o", "\r\n"]
[333.366, "o", "        if callable(formatter):\r\n"]
[333.376, "o", "            formatter = {\"all\": formatter}\r\n"]
[333.386, "o", "\r\n"]
[333.396, "o", "        # The view is needed for the scalar case - self.value might be float.\r\n"]
[333.406, "o", "        latex_value = np.array2string(\r\n"]
[333.416, "o", "            self.view(np.ndarray),\r\n"]
[333.426, "o", "            threshold=(\r\n"]
[333.436, "o", "                conf.latex_array_threshold\r\n"]
[333.446, "o", "                if conf.latex_array_threshold > -1\r\n"]
[333.456, "o", "                else pops[\"threshold\"]\r\n"]
[333.466, "o", "            ),\r\n"]
[333.476, "o", "            formatter=formatter,\r\n"]
[333.486, "o", "            max_line_width=np.inf,\r\n"]
[333.496, "o", "            separator=\",~\",\r\n"]
[333.506, "o", "        )\r\n"]
[333.516, "o", "\r\n"]
[333.526, "o", "        latex_value = latex_value.replace(\"...\", r\"\\dots\")\r\n"]
[333.536, "o", "\r\n"]
[333.546, "o", "        # Format unit\r\n"]
[333.556, "o", "        # [1:-1] strips the '$' on either side needed for math mode\r\n"]
[333.566, "o", "        if self.unit is None:\r\n"]
[333.576, "o", "            latex_unit = _UNIT_NOT_INITIALISED\r\n"]
[333.586, "o", "        elif format == \"latex\":\r\n"]
[333.596, "o", "            latex_unit = self.unit._repr_latex_()[1:-1]  # note this is unicode\r\n"]
[333.606, "o", "        elif format == \"latex_inline\":\r\n"]
[333.616, "o", "            latex_unit = self.unit.to_string(format=\"latex_inline\")[1:-1]\r\n"]
[333.626, "o", "\r\n"]
[333.636, "o", "        delimiter_left, delimiter_right = formats[format][subfmt]\r\n"]
[333.646, "o", "\r\n"]
[333.656, "o", "        # Add a space in front except for super-script units like degrees.\r\n"]
[333.666, "o", "        if not latex_unit.removeprefix(\"\\\\mathrm{\").startswith(\"{}^\"):\r\n"]
[333.676, "o", "            latex_unit = rf\" \\; {latex_unit}\"\r\n"]
[333.686, "o", "\r\n"]
[333.696, "o", "        return rf\"{delimiter_left}{latex_value}{latex_unit}{delimiter_right}\"\r\n"]
[333.706, "o", "\r\n"]
[333.716, "o", "    def __str__(self):\r\n"]
[333.726, "o", "        return self.to_string()\r\n"]
[333.736, "o", "\r\n"]
[333.746, "o", "    def __repr__(self):\r\n"]
[333.756, "o", "        prefixstr = \"<\" + self.__class__.__name__ + \" \"\r\n"]
[333.766, "o", "        arrstr = np.array2string(\r\n"]
[333.776, "o", "            self.view(np.ndarray), separator=\", \", prefix=prefixstr\r\n"]
[333.786, "o", "        )\r\n"]
[333.796, "o", "        return f\"{prefixstr}{arrstr}{self._unitstr:s}>\"\r\n"]
[333.806, "o", "\r\n"]
[333.816, "o", "    def _repr_latex_(self):\r\n"]
[333.826, "o", "        \"\"\"\r\n"]
[333.836, "o", "        Generate a latex representation of the quantity and its unit.\r\n"]
[333.846, "o", "\r\n"]
[333.856, "o", "        Returns\r\n"]
[333.866, "o", "        -------\r\n"]
[333.876, "o", "        lstr\r\n"]
[333.886, "o", "            A LaTeX string with the contents of this Quantity\r\n"]
[333.896, "o", "        \"\"\"\r\n"]
[333.906, "o", "        # NOTE: This should change to display format in a future release\r\n"]
[333.916, "o", "        return self.to_string(format=\"latex\", subfmt=\"inline\")\r\n"]
[333.926, "o", "\r\n"]
[333.936, "o", "    def __format__(self, format_spec):\r\n"]
[333.946, "o", "        try:\r\n"]
[333.956, "o", "            return self.to_string(format=format_spec)\r\n"]
[333.966, "o", "        except ValueError:\r\n"]
[333.976, "o", "            # We might have a unit format not implemented in `to_string()`.\r\n"]
[333.986, "o", "            if format_spec in Base.registry:\r\n"]
[333.996, "o", "                if self.unit is dimensionless_unscaled:\r\n"]
[334.006, "o", "                    return f\"{self.value}\"\r\n"]
[334.016, "o", "                else:\r\n"]
[334.026, "o", "                    return f\"{self.value} {format(self.unit, format_spec)}\"\r\n"]
[334.036, "o", "            # Can the value be formatted on its own?\r\n"]
[334.046, "o", "            try:\r\n"]
[334.056, "o", "                return f\"{format(self.value, format_spec)}{self._unitstr:s}\"\r\n"]
[334.066, "o", "            except ValueError:\r\n"]
[334.076, "o", "                # Format the whole thing as a single string.\r\n"]
[334.086, "o", "                return format(f\"{self.value}{self._unitstr:s}\", format_spec)\r\n"]
[334.096, "o", "\r\n"]
[334.106, "o", "    def decompose(self, bases=[]):\r\n"]
[334.116, "o", "        \"\"\"\r\n"]
[334.126, "o", "        Generates a new `Quantity` with the units\r\n"]
[334.136, "o", "        decomposed. Decomposed units have only irreducible units in\r\n"]
[334.146, "o", "        them (see `astropy.units.UnitBase.decompose`).\r\n"]
[334.156, "o", "\r\n"]
[334.166, "o", "        Parameters\r\n"]
[334.176, "o", "        ----------\r\n"]
[334.186, "o", "        bases : sequence of `~astropy.units.UnitBase`, optional\r\n"]
[334.196, "o", "            The bases to decompose into.  When not provided,\r\n"]
[334.206, "o", "            decomposes down to any irreducible units.  When provided,\r\n"]
[334.216, "o", "            the decomposed result will only contain the given units.\r\n"]
[334.226, "o", "            This will raises a `~astropy.units.UnitsError` if it's not possible\r\n"]
[334.236, "o", "            to do so.\r\n"]
[334.246, "o", "\r\n"]
[334.256, "o", "        Returns\r\n"]
[334.266, "o", "        -------\r\n"]
[334.276, "o", "        newq : `~astropy.units.Quantity`\r\n"]
[334.286, "o", "            A new object equal to this quantity with units decomposed.\r\n"]
[334.296, "o", "        \"\"\"\r\n"]
[334.306, "o", "        return self._decompose(False, bases=bases)\r\n"]
[334.316, "o", "\r\n"]
[334.326, "o", "    def _decompose(self, allowscaledunits=False, bases=[]):\r\n"]
[334.336, "o", "        \"\"\"\r\n"]
[334.346, "o", "        Generates a new `Quantity` with the units decomposed. Decomposed\r\n"]
[334.356, "o", "        units have only irreducible units in them (see\r\n"]
[334.366, "o", "        `astropy.units.UnitBase.decompose`).\r\n"]
[334.376, "o", "\r\n"]
[334.386, "o", "        Parameters\r\n"]
[334.396, "o", "        ----------\r\n"]
[334.406, "o", "        allowscaledunits : bool\r\n"]
[334.416, "o", "            If True, the resulting `Quantity` may have a scale factor\r\n"]
[334.426, "o", "            associated with it.  If False, any scaling in the unit will\r\n"]
[334.436, "o", "            be subsumed into the value of the resulting `Quantity`\r\n"]
[334.446, "o", "\r\n"]
[334.456, "o", "        bases : sequence of UnitBase, optional\r\n"]
[334.466, "o", "            The bases to decompose into.  When not provided,\r\n"]
[334.476, "o", "            decomposes down to any irreducible units.  When provided,\r\n"]
[334.486, "o", "            the decomposed result will only contain the given units.\r\n"]
[334.496, "o", "            This will raises a `~astropy.units.UnitsError` if it's not possible\r\n"]
[334.506, "o", "            to do so.\r\n"]
[334.516, "o", "\r\n"]
[334.526, "o", "        Returns\r\n"]
[334.536, "o", "        -------\r\n"]
[334.546, "o", "        newq : `~astropy.units.Quantity`\r\n"]
[334.556, "o", "            A new object equal to this quantity with units decomposed.\r\n"]
[334.566, "o", "\r\n"]
[334.576, "o", "        \"\"\"\r\n"]
[334.586, "o", "        new_unit = self.unit.decompose(bases=bases)\r\n"]
[334.596, "o", "\r\n"]
[334.606, "o", "        # Be careful here because self.value usually is a view of self;\r\n"]
[334.616, "o", "        # be sure that the original value is not being modified.\r\n"]
[334.626, "o", "        if not allowscaledunits and hasattr(new_unit, \"scale\"):\r\n"]
[334.636, "o", "            new_value = self.value * new_unit.scale\r\n"]
[334.646, "o", "            new_unit = new_unit / new_unit.scale\r\n"]
[334.656, "o", "            return self._new_view(new_value, new_unit)\r\n"]
[334.666, "o", "        else:\r\n"]
[334.676, "o", "            return self._new_view(self.copy(), new_unit)\r\n"]
[334.686, "o", "\r\n"]
[334.696, "o", "    # These functions need to be overridden to take into account the units\r\n"]
[334.706, "o", "    # Array conversion\r\n"]
[334.716, "o", "    # https://numpy.org/doc/stable/reference/arrays.ndarray.html#array-conversion\r\n"]
[334.726, "o", "\r\n"]
[334.736, "o", "    def item(self, *args):\r\n"]
[334.746, "o", "        \"\"\"Copy an element of an array to a scalar Quantity and return it.\r\n"]
[334.756, "o", "\r\n"]
[334.766, "o", "        Like :meth:`~numpy.ndarray.item` except that it always\r\n"]
[334.776, "o", "        returns a `Quantity`, not a Python scalar.\r\n"]
[334.786, "o", "\r\n"]
[334.796, "o", "        \"\"\"\r\n"]
[334.806, "o", "        return self._new_view(super().item(*args))\r\n"]
[334.816, "o", "\r\n"]
[334.826, "o", "    def tolist(self):\r\n"]
[334.836, "o", "        raise NotImplementedError(\r\n"]
[334.846, "o", "            \"cannot make a list of Quantities. Get list of values with\"\r\n"]
[334.856, "o", "            \" q.value.tolist().\"\r\n"]
[334.866, "o", "        )\r\n"]
[334.876, "o", "\r\n"]
[334.886, "o", "    def _to_own_unit(self, value, check_precision=True, *, unit=None):\r\n"]
[334.896, "o", "        \"\"\"Convert value to one's own unit (or that given).\r\n"]
[334.906, "o", "\r\n"]
[334.916, "o", "        Here, non-quantities are treated as dimensionless, and care is taken\r\n"]
[334.926, "o", "        for values of 0, infinity or nan, which are allowed to have any unit.\r\n"]
[334.936, "o", "\r\n"]
[335.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[335.002, "i", "cat asv.ci.conf.json\r"]
[335.004, "o", "cat asv.ci.conf.json\r\n"]
[335.3356, "o", "\u001b[?2004l\r\n"]
[335.6652, "o", " {\r\n"]
[335.9948, "o", "   \"version\": 1,\r\n"]
[336.3244, "o", "   \"project\": \"astropy\",\r\n"]
[336.654, "o", "   \"project_url\": \"http://www.astropy.org/\",\r\n"]
[336.9836, "o", "   \"repo\": \".\",\r\n"]
[337.3132, "o", "   \"install_command\": [\r\n"]
[337.6428, "o", "     \"pip install . matplotlib scipy\"\r\n"]
[337.9724, "o", "   ],\r\n"]
[338.302, "o", "   \"branches\": [\"main\"],\r\n"]
[338.6316, "o", "   \"show_commit_url\": \"http://github.com/astropy/astropy/commit/\",\r\n"]
[338.9612, "o", "   \"pythons\": [\"3.11\"],\r\n"]
[339.2908, "o", "   \"environment_type\": \"virtualenv\",\r\n"]
[339.6204, "o", "   \"benchmark_dir\": \"astropy-benchmarks/benchmarks\"\r\n"]
[340.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[340.002, "i", "sed -n '1,260p' astropy-benchmarks/benchmarks/units.py\r"]
[340.004, "o", "sed -n '1,260p' astropy-benchmarks/benchmarks/units.py\r\n"]
[340.026861, "o", "\u001b[?2004l\r\n"]
[340.047722, "o", "import copy\r\n"]
[340.068582, "o", "\r\n"]
[340.089443, "o", "import numpy as np\r\n"]
[340.110304, "o", "from astropy import units as u\r\n"]
[340.131165, "o", "\r\n"]
[340.152025, "o", "\r\n"]
[340.172886, "o", "# Unit tests\r\n"]
[340.193747, "o", "\r\n"]
[340.214608, "o", "\r\n"]
[340.235468, "o", "def time_unit_compose():\r\n"]
[340.256329, "o", "    u.Ry.compose()\r\n"]
[340.27719, "o", "\r\n"]
[340.298051, "o", "\r\n"]
[340.318911, "o", "def time_unit_to():\r\n"]
[340.339772, "o", "    u.m.to(u.pc)\r\n"]
[340.360633, "o", "\r\n"]
[340.381494, "o", "\r\n"]
[340.402354, "o", "def time_unit_parse():\r\n"]
[340.423215, "o", "    u.Unit(\"1e-07 kg m2 / s2\")\r\n"]
[340.444076, "o", "\r\n"]
[340.464937, "o", "\r\n"]
[340.485797, "o", "def time_simple_unit_parse():\r\n"]
[340.506658, "o", "    u.Unit(\"1 d\")\r\n"]
[340.527519, "o", "\r\n"]
[340.54838, "o", "\r\n"]
[340.569241, "o", "def time_very_simple_unit_parse():\r\n"]
[340.590101, "o", "    u.Unit(\"d\")\r\n"]
[340.610962, "o", "\r\n"]
[340.631823, "o", "\r\n"]
[340.652684, "o", "def mem_unit():\r\n"]
[340.673544, "o", "    return u.erg\r\n"]
[340.694405, "o", "\r\n"]
[340.715266, "o", "\r\n"]
[340.736127, "o", "def time_compose_to_bases():\r\n"]
[340.756987, "o", "    x = copy.copy(u.Ry)\r\n"]
[340.777848, "o", "    x.cgs\r\n"]
[340.798709, "o", "\r\n"]
[340.81957, "o", "\r\n"]
[340.84043, "o", "def time_compose_complex():\r\n"]
[340.861291, "o", "    # Composing a complex unit can be very inefficient\r\n"]
[340.882152, "o", "    (u.kg / u.s**3 * u.au**2.5 / u.yr**0.5 / u.sr**2).compose()\r\n"]
[340.903013, "o", "\r\n"]
[340.923873, "o", "\r\n"]
[340.944734, "o", "# Quantity tests\r\n"]
[340.965595, "o", "\r\n"]
[340.986456, "o", "a = np.arange(100000.0)\r\n"]
[341.007316, "o", "b1 = [1.0, 2.0, 3.0]\r\n"]
[341.028177, "o", "b2 = np.asarray(b1)\r\n"]
[341.049038, "o", "q0 = u.Quantity(1.0, u.s)\r\n"]
[341.069899, "o", "q1 = u.Quantity(a, u.m)\r\n"]
[341.090759, "o", "q2 = u.Quantity(a[:10000], u.deg)\r\n"]
[341.11162, "o", "\r\n"]
[341.132481, "o", "\r\n"]
[341.153342, "o", "def time_quantity_creation():\r\n"]
[341.174203, "o", "    u.Quantity(a, u.m)\r\n"]
[341.195063, "o", "\r\n"]
[341.215924, "o", "\r\n"]
[341.236785, "o", "def time_quantity_creation_nocopy():\r\n"]
[341.257646, "o", "    u.Quantity(a, u.m, copy=False)\r\n"]
[341.278506, "o", "\r\n"]
[341.299367, "o", "\r\n"]
[341.320228, "o", "def time_quantity_view():\r\n"]
[341.341089, "o", "    q1.view(u.Quantity)\r\n"]
[341.361949, "o", "\r\n"]
[341.38281, "o", "\r\n"]
[341.403671, "o", "def time_quantity_init_scalar():\r\n"]
[341.424532, "o", "    3.0 * u.m / u.s\r\n"]
[341.445392, "o", "\r\n"]
[341.466253, "o", "\r\n"]
[341.487114, "o", "def time_quantity_init_array():\r\n"]
[341.507975, "o", "    a * u.m / u.s\r\n"]
[341.528835, "o", "\r\n"]
[341.549696, "o", "\r\n"]
[341.570557, "o", "def time_quantity_init_small_list():\r\n"]
[341.591418, "o", "    \"\"\"\r\n"]
[341.612278, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[341.633139, "o", "    for small list.\r\n"]
[341.654, "o", "    \"\"\"\r\n"]
[341.674861, "o", "    b1 * u.m / u.s\r\n"]
[341.695722, "o", "\r\n"]
[341.716582, "o", "\r\n"]
[341.737443, "o", "def time_quantity_init_small_array():\r\n"]
[341.758304, "o", "    \"\"\"\r\n"]
[341.779165, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[341.800025, "o", "    for small array.\r\n"]
[341.820886, "o", "    \"\"\"\r\n"]
[341.841747, "o", "    b2 * u.m / u.s\r\n"]
[341.862608, "o", "\r\n"]
[341.883468, "o", "\r\n"]
[341.904329, "o", "def time_quantity_scalar_conversion():\r\n"]
[341.92519, "o", "    (3.0 * u.m / u.s).to(u.km / u.hour)\r\n"]
[341.946051, "o", "\r\n"]
[341.966911, "o", "\r\n"]
[341.987772, "o", "def time_quantity_array_conversion():\r\n"]
[342.008633, "o", "    (a * u.m / u.s).to(u.km / u.hour)\r\n"]
[342.029494, "o", "\r\n"]
[342.050354, "o", "\r\n"]
[342.071215, "o", "def time_quantity_times_unit():\r\n"]
[342.092076, "o", "    q1 * u.m\r\n"]
[342.112937, "o", "\r\n"]
[342.133797, "o", "\r\n"]
[342.154658, "o", "def time_quantity_times_quantity():\r\n"]
[342.175519, "o", "    q1 * q0\r\n"]
[342.19638, "o", "\r\n"]
[342.217241, "o", "\r\n"]
[342.238101, "o", "def time_quantity_ufunc_sin():\r\n"]
[342.258962, "o", "    np.sin(q2)\r\n"]
[342.279823, "o", "\r\n"]
[342.300684, "o", "\r\n"]
[342.321544, "o", "class TimeQuantityOpSmallArray:\r\n"]
[342.342405, "o", "    \"\"\"\r\n"]
[342.363266, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[342.384127, "o", "    for a small Numpy array.\r\n"]
[342.404987, "o", "    \"\"\"\r\n"]
[342.425848, "o", "\r\n"]
[342.446709, "o", "    def setup(self):\r\n"]
[342.46757, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[342.48843, "o", "        self.data = data * u.g\r\n"]
[342.509291, "o", "        self.out_sq = data * u.g**2\r\n"]
[342.530152, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[342.551013, "o", "\r\n"]
[342.571873, "o", "    def time_quantity_square(self):\r\n"]
[342.592734, "o", "        self.data**2\r\n"]
[342.613595, "o", "\r\n"]
[342.634456, "o", "    def time_quantity_np_square(self):\r\n"]
[342.655316, "o", "        np.power(self.data, 2)\r\n"]
[342.676177, "o", "\r\n"]
[342.697038, "o", "    def time_quantity_np_square_out(self):\r\n"]
[342.717899, "o", "        np.power(self.data, 2, out=self.out_sq)\r\n"]
[342.738759, "o", "\r\n"]
[342.75962, "o", "    def time_quantity_sqrt(self):\r\n"]
[342.780481, "o", "        self.data**0.5\r\n"]
[342.801342, "o", "\r\n"]
[342.822203, "o", "    def time_quantity_np_sqrt(self):\r\n"]
[342.843063, "o", "        np.sqrt(self.data)\r\n"]
[342.863924, "o", "\r\n"]
[342.884785, "o", "    def time_quantity_np_sqrt_out(self):\r\n"]
[342.905646, "o", "        np.sqrt(self.data, out=self.out_sqrt)\r\n"]
[342.926506, "o", "\r\n"]
[342.947367, "o", "\r\n"]
[342.968228, "o", "class TimeQuantityOpLargeArray(TimeQuantityOpSmallArray):\r\n"]
[342.989089, "o", "    \"\"\"\r\n"]
[343.009949, "o", "    Like :class:`TimeQuantityOpSmallArray` but for a large Numpy array.\r\n"]
[343.03081, "o", "    \"\"\"\r\n"]
[343.051671, "o", "\r\n"]
[343.072532, "o", "    def setup(self):\r\n"]
[343.093392, "o", "        data = np.arange(1e6) + 1\r\n"]
[343.114253, "o", "        self.data = data * u.g\r\n"]
[343.135114, "o", "        self.out_sq = data * u.g**2\r\n"]
[343.155975, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[343.176835, "o", "\r\n"]
[343.197696, "o", "\r\n"]
[343.218557, "o", "class TimeQuantityOpSmallArrayDiffUnit:\r\n"]
[343.239418, "o", "    \"\"\"\r\n"]
[343.260278, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[343.281139, "o", "    for small Numpy arrays with different units.\r\n"]
[343.302, "o", "    \"\"\"\r\n"]
[343.322861, "o", "\r\n"]
[343.343722, "o", "    def setup(self):\r\n"]
[343.364582, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[343.385443, "o", "        self.data = data * u.g\r\n"]
[343.406304, "o", "\r\n"]
[343.427165, "o", "        # A different but dimensionally compatible unit\r\n"]
[343.448025, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[343.468886, "o", "\r\n"]
[343.489747, "o", "    def time_quantity_equal(self):\r\n"]
[343.510608, "o", "        # Same as operator.eq\r\n"]
[343.531468, "o", "        self.data == self.data2\r\n"]
[343.552329, "o", "\r\n"]
[343.57319, "o", "    def time_quantity_np_equal(self):\r\n"]
[343.594051, "o", "        np.equal(self.data, self.data2)\r\n"]
[343.614911, "o", "\r\n"]
[343.635772, "o", "    def time_quantity_truediv(self):\r\n"]
[343.656633, "o", "        # Since benchmark is PY3 only, this is always true divide.\r\n"]
[343.677494, "o", "        # Same as operator.truediv\r\n"]
[343.698354, "o", "        self.data / self.data2\r\n"]
[343.719215, "o", "\r\n"]
[343.740076, "o", "    def time_quantity_np_truediv(self):\r\n"]
[343.760937, "o", "        np.true_divide(self.data, self.data2)\r\n"]
[343.781797, "o", "\r\n"]
[343.802658, "o", "    def time_quantity_mul(self):\r\n"]
[343.823519, "o", "        # Same as operator.mul\r\n"]
[343.84438, "o", "        self.data * self.data2\r\n"]
[343.865241, "o", "\r\n"]
[343.886101, "o", "    def time_quantity_np_multiply(self):\r\n"]
[343.906962, "o", "        np.multiply(self.data, self.data2)\r\n"]
[343.927823, "o", "\r\n"]
[343.948684, "o", "    def time_quantity_sub(self):\r\n"]
[343.969544, "o", "        # Same as operator.sub\r\n"]
[343.990405, "o", "        self.data - self.data2\r\n"]
[344.011266, "o", "\r\n"]
[344.032127, "o", "    def time_quantity_np_subtract(self):\r\n"]
[344.052987, "o", "        np.subtract(self.data, self.data2)\r\n"]
[344.073848, "o", "\r\n"]
[344.094709, "o", "    def time_quantity_add(self):\r\n"]
[344.11557, "o", "        # Same as operator.add\r\n"]
[344.13643, "o", "        self.data + self.data2\r\n"]
[344.157291, "o", "\r\n"]
[344.178152, "o", "    def time_quantity_np_add(self):\r\n"]
[344.199013, "o", "        np.add(self.data, self.data2)\r\n"]
[344.219873, "o", "\r\n"]
[344.240734, "o", "\r\n"]
[344.261595, "o", "class TimeQuantityOpSmallArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[344.282456, "o", "    \"\"\"\r\n"]
[344.303316, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[344.324177, "o", "    for small Numpy arrays with same units.\r\n"]
[344.345038, "o", "    \"\"\"\r\n"]
[344.365899, "o", "\r\n"]
[344.386759, "o", "    def setup(self):\r\n"]
[344.40762, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[344.428481, "o", "        self.data = data * u.g\r\n"]
[344.449342, "o", "        self.data2 = self.data.copy()\r\n"]
[344.470203, "o", "\r\n"]
[344.491063, "o", "\r\n"]
[344.511924, "o", "class TimeQuantityOpLargeArrayDiffUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[344.532785, "o", "    \"\"\"\r\n"]
[344.553646, "o", "    Like :class:`TimeQuantityOpSmallArrayDiffUnit` but for large Numpy arrays.\r\n"]
[344.574506, "o", "    \"\"\"\r\n"]
[344.595367, "o", "\r\n"]
[344.616228, "o", "    def setup(self):\r\n"]
[344.637089, "o", "        data = np.arange(1e6) + 1\r\n"]
[344.657949, "o", "        self.data = data * u.g\r\n"]
[344.67881, "o", "\r\n"]
[344.699671, "o", "        # A different but dimensionally compatible unit\r\n"]
[344.720532, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[344.741392, "o", "\r\n"]
[344.762253, "o", "\r\n"]
[344.783114, "o", "class TimeQuantityOpLargeArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[344.803975, "o", "    \"\"\"\r\n"]
[344.824835, "o", "    Like :class:`TimeQuantityOpSmallArraySameUnit` but for large Numpy arrays.\r\n"]
[344.845696, "o", "    \"\"\"\r\n"]
[344.866557, "o", "\r\n"]
[344.887418, "o", "    def setup(self):\r\n"]
[344.908278, "o", "        data = np.arange(1e6) + 1\r\n"]
[344.929139, "o", "        self.data = data * u.g\r\n"]
[345.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[345.002, "i", "asv dev -c asv.ci.conf.json -b \"units.time_quantity_init_small_list|units.time_quantity_creation_nocopy|units.time_\r"]
[345.004, "o", "asv dev -c asv.ci.conf.json -b \"units.time_quantity_init_small_list|units.time_quantity_creation_nocopy|units.time_\r\n"]
[345.9948, "o", "_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view\"\r\n"]
[346.9836, "o", "\u001b[?2004l\r\n"]
[347.9724, "o", "usage: asv [-h] [--verbose] [--config CONFIG] [--version]\r\n"]
[348.9612, "o", "           {help,quickstart,machine,setup,run,continuous,find,rm,publish,preview,profile,update,show,compare,check,gh-pages} ...\r\n"]
[350.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[350.002, "i", "asv profile -c asv.ci.conf.json units.time_quantity_times_unit\r"]
[350.004, "o", "asv profile -c asv.ci.conf.json units.time_quantity_times_unit\r\n"]
[351.242, "o", "\u001b[?2004l\r\n"]
[352.478, "o", "usage: asv [-h] [--verbose] [--config CONFIG] [--version]\r\n"]
[353.714, "o", "           {help,quickstart,machine,setup,run,continuous,find,rm,publish,preview,profile,update,show,compare,check,gh-pages} ...\r\n"]
[355.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[355.002, "i", "cat asv.ci.conf.json\r"]
[355.004, "o", "cat asv.ci.conf.json\r\n"]
[355.3356, "o", "\u001b[?2004l\r\n"]
[355.6652, "o", " {\r\n"]
[355.9948, "o", "   \"version\": 1,\r\n"]
[356.3244, "o", "   \"project\": \"astropy\",\r\n"]
[356.654, "o", "   \"project_url\": \"http://www.astropy.org/\",\r\n"]
[356.9836, "o", "   \"repo\": \".\",\r\n"]
[357.3132, "o", "   \"install_command\": [\r\n"]
[357.6428, "o", "     \"pip install . matplotlib scipy\"\r\n"]
[357.9724, "o", "   ],\r\n"]
[358.302, "o", "   \"branches\": [\"main\"],\r\n"]
[358.6316, "o", "   \"show_commit_url\": \"http://github.com/astropy/astropy/commit/\",\r\n"]
[358.9612, "o", "   \"pythons\": [\"3.11\"],\r\n"]
[359.2908, "o", "   \"environment_type\": \"virtualenv\",\r\n"]
[359.6204, "o", "   \"benchmark_dir\": \"astropy-benchmarks/benchmarks\"\r\n"]
[360.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[360.002, "i", "sed -n '1,260p' astropy-benchmarks/benchmarks/units.py\r"]
[360.004, "o", "sed -n '1,260p' astropy-benchmarks/benchmarks/units.py\r\n"]
[360.026861, "o", "\u001b[?2004l\r\n"]
[360.047722, "o", "import copy\r\n"]
[360.068582, "o", "\r\n"]
[360.089443, "o", "import numpy as np\r\n"]
[360.110304, "o", "from astropy import units as u\r\n"]
[360.131165, "o", "\r\n"]
[360.152025, "o", "\r\n"]
[360.172886, "o", "# Unit tests\r\n"]
[360.193747, "o", "\r\n"]
[360.214608, "o", "\r\n"]
[360.235468, "o", "def time_unit_compose():\r\n"]
[360.256329, "o", "    u.Ry.compose()\r\n"]
[360.27719, "o", "\r\n"]
[360.298051, "o", "\r\n"]
[360.318911, "o", "def time_unit_to():\r\n"]
[360.339772, "o", "    u.m.to(u.pc)\r\n"]
[360.360633, "o", "\r\n"]
[360.381494, "o", "\r\n"]
[360.402354, "o", "def time_unit_parse():\r\n"]
[360.423215, "o", "    u.Unit(\"1e-07 kg m2 / s2\")\r\n"]
[360.444076, "o", "\r\n"]
[360.464937, "o", "\r\n"]
[360.485797, "o", "def time_simple_unit_parse():\r\n"]
[360.506658, "o", "    u.Unit(\"1 d\")\r\n"]
[360.527519, "o", "\r\n"]
[360.54838, "o", "\r\n"]
[360.569241, "o", "def time_very_simple_unit_parse():\r\n"]
[360.590101, "o", "    u.Unit(\"d\")\r\n"]
[360.610962, "o", "\r\n"]
[360.631823, "o", "\r\n"]
[360.652684, "o", "def mem_unit():\r\n"]
[360.673544, "o", "    return u.erg\r\n"]
[360.694405, "o", "\r\n"]
[360.715266, "o", "\r\n"]
[360.736127, "o", "def time_compose_to_bases():\r\n"]
[360.756987, "o", "    x = copy.copy(u.Ry)\r\n"]
[360.777848, "o", "    x.cgs\r\n"]
[360.798709, "o", "\r\n"]
[360.81957, "o", "\r\n"]
[360.84043, "o", "def time_compose_complex():\r\n"]
[360.861291, "o", "    # Composing a complex unit can be very inefficient\r\n"]
[360.882152, "o", "    (u.kg / u.s**3 * u.au**2.5 / u.yr**0.5 / u.sr**2).compose()\r\n"]
[360.903013, "o", "\r\n"]
[360.923873, "o", "\r\n"]
[360.944734, "o", "# Quantity tests\r\n"]
[360.965595, "o", "\r\n"]
[360.986456, "o", "a = np.arange(100000.0)\r\n"]
[361.007316, "o", "b1 = [1.0, 2.0, 3.0]\r\n"]
[361.028177, "o", "b2 = np.asarray(b1)\r\n"]
[361.049038, "o", "q0 = u.Quantity(1.0, u.s)\r\n"]
[361.069899, "o", "q1 = u.Quantity(a, u.m)\r\n"]
[361.090759, "o", "q2 = u.Quantity(a[:10000], u.deg)\r\n"]
[361.11162, "o", "\r\n"]
[361.132481, "o", "\r\n"]
[361.153342, "o", "def time_quantity_creation():\r\n"]
[361.174203, "o", "    u.Quantity(a, u.m)\r\n"]
[361.195063, "o", "\r\n"]
[361.215924, "o", "\r\n"]
[361.236785, "o", "def time_quantity_creation_nocopy():\r\n"]
[361.257646, "o", "    u.Quantity(a, u.m, copy=False)\r\n"]
[361.278506, "o", "\r\n"]
[361.299367, "o", "\r\n"]
[361.320228, "o", "def time_quantity_view():\r\n"]
[361.341089, "o", "    q1.view(u.Quantity)\r\n"]
[361.361949, "o", "\r\n"]
[361.38281, "o", "\r\n"]
[361.403671, "o", "def time_quantity_init_scalar():\r\n"]
[361.424532, "o", "    3.0 * u.m / u.s\r\n"]
[361.445392, "o", "\r\n"]
[361.466253, "o", "\r\n"]
[361.487114, "o", "def time_quantity_init_array():\r\n"]
[361.507975, "o", "    a * u.m / u.s\r\n"]
[361.528835, "o", "\r\n"]
[361.549696, "o", "\r\n"]
[361.570557, "o", "def time_quantity_init_small_list():\r\n"]
[361.591418, "o", "    \"\"\"\r\n"]
[361.612278, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[361.633139, "o", "    for small list.\r\n"]
[361.654, "o", "    \"\"\"\r\n"]
[361.674861, "o", "    b1 * u.m / u.s\r\n"]
[361.695722, "o", "\r\n"]
[361.716582, "o", "\r\n"]
[361.737443, "o", "def time_quantity_init_small_array():\r\n"]
[361.758304, "o", "    \"\"\"\r\n"]
[361.779165, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[361.800025, "o", "    for small array.\r\n"]
[361.820886, "o", "    \"\"\"\r\n"]
[361.841747, "o", "    b2 * u.m / u.s\r\n"]
[361.862608, "o", "\r\n"]
[361.883468, "o", "\r\n"]
[361.904329, "o", "def time_quantity_scalar_conversion():\r\n"]
[361.92519, "o", "    (3.0 * u.m / u.s).to(u.km / u.hour)\r\n"]
[361.946051, "o", "\r\n"]
[361.966911, "o", "\r\n"]
[361.987772, "o", "def time_quantity_array_conversion():\r\n"]
[362.008633, "o", "    (a * u.m / u.s).to(u.km / u.hour)\r\n"]
[362.029494, "o", "\r\n"]
[362.050354, "o", "\r\n"]
[362.071215, "o", "def time_quantity_times_unit():\r\n"]
[362.092076, "o", "    q1 * u.m\r\n"]
[362.112937, "o", "\r\n"]
[362.133797, "o", "\r\n"]
[362.154658, "o", "def time_quantity_times_quantity():\r\n"]
[362.175519, "o", "    q1 * q0\r\n"]
[362.19638, "o", "\r\n"]
[362.217241, "o", "\r\n"]
[362.238101, "o", "def time_quantity_ufunc_sin():\r\n"]
[362.258962, "o", "    np.sin(q2)\r\n"]
[362.279823, "o", "\r\n"]
[362.300684, "o", "\r\n"]
[362.321544, "o", "class TimeQuantityOpSmallArray:\r\n"]
[362.342405, "o", "    \"\"\"\r\n"]
[362.363266, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[362.384127, "o", "    for a small Numpy array.\r\n"]
[362.404987, "o", "    \"\"\"\r\n"]
[362.425848, "o", "\r\n"]
[362.446709, "o", "    def setup(self):\r\n"]
[362.46757, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[362.48843, "o", "        self.data = data * u.g\r\n"]
[362.509291, "o", "        self.out_sq = data * u.g**2\r\n"]
[362.530152, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[362.551013, "o", "\r\n"]
[362.571873, "o", "    def time_quantity_square(self):\r\n"]
[362.592734, "o", "        self.data**2\r\n"]
[362.613595, "o", "\r\n"]
[362.634456, "o", "    def time_quantity_np_square(self):\r\n"]
[362.655316, "o", "        np.power(self.data, 2)\r\n"]
[362.676177, "o", "\r\n"]
[362.697038, "o", "    def time_quantity_np_square_out(self):\r\n"]
[362.717899, "o", "        np.power(self.data, 2, out=self.out_sq)\r\n"]
[362.738759, "o", "\r\n"]
[362.75962, "o", "    def time_quantity_sqrt(self):\r\n"]
[362.780481, "o", "        self.data**0.5\r\n"]
[362.801342, "o", "\r\n"]
[362.822203, "o", "    def time_quantity_np_sqrt(self):\r\n"]
[362.843063, "o", "        np.sqrt(self.data)\r\n"]
[362.863924, "o", "\r\n"]
[362.884785, "o", "    def time_quantity_np_sqrt_out(self):\r\n"]
[362.905646, "o", "        np.sqrt(self.data, out=self.out_sqrt)\r\n"]
[362.926506, "o", "\r\n"]
[362.947367, "o", "\r\n"]
[362.968228, "o", "class TimeQuantityOpLargeArray(TimeQuantityOpSmallArray):\r\n"]
[362.989089, "o", "    \"\"\"\r\n"]
[363.009949, "o", "    Like :class:`TimeQuantityOpSmallArray` but for a large Numpy array.\r\n"]
[363.03081, "o", "    \"\"\"\r\n"]
[363.051671, "o", "\r\n"]
[363.072532, "o", "    def setup(self):\r\n"]
[363.093392, "o", "        data = np.arange(1e6) + 1\r\n"]
[363.114253, "o", "        self.data = data * u.g\r\n"]
[363.135114, "o", "        self.out_sq = data * u.g**2\r\n"]
[363.155975, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[363.176835, "o", "\r\n"]
[363.197696, "o", "\r\n"]
[363.218557, "o", "class TimeQuantityOpSmallArrayDiffUnit:\r\n"]
[363.239418, "o", "    \"\"\"\r\n"]
[363.260278, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[363.281139, "o", "    for small Numpy arrays with different units.\r\n"]
[363.302, "o", "    \"\"\"\r\n"]
[363.322861, "o", "\r\n"]
[363.343722, "o", "    def setup(self):\r\n"]
[363.364582, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[363.385443, "o", "        self.data = data * u.g\r\n"]
[363.406304, "o", "\r\n"]
[363.427165, "o", "        # A different but dimensionally compatible unit\r\n"]
[363.448025, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[363.468886, "o", "\r\n"]
[363.489747, "o", "    def time_quantity_equal(self):\r\n"]
[363.510608, "o", "        # Same as operator.eq\r\n"]
[363.531468, "o", "        self.data == self.data2\r\n"]
[363.552329, "o", "\r\n"]
[363.57319, "o", "    def time_quantity_np_equal(self):\r\n"]
[363.594051, "o", "        np.equal(self.data, self.data2)\r\n"]
[363.614911, "o", "\r\n"]
[363.635772, "o", "    def time_quantity_truediv(self):\r\n"]
[363.656633, "o", "        # Since benchmark is PY3 only, this is always true divide.\r\n"]
[363.677494, "o", "        # Same as operator.truediv\r\n"]
[363.698354, "o", "        self.data / self.data2\r\n"]
[363.719215, "o", "\r\n"]
[363.740076, "o", "    def time_quantity_np_truediv(self):\r\n"]
[363.760937, "o", "        np.true_divide(self.data, self.data2)\r\n"]
[363.781797, "o", "\r\n"]
[363.802658, "o", "    def time_quantity_mul(self):\r\n"]
[363.823519, "o", "        # Same as operator.mul\r\n"]
[363.84438, "o", "        self.data * self.data2\r\n"]
[363.865241, "o", "\r\n"]
[363.886101, "o", "    def time_quantity_np_multiply(self):\r\n"]
[363.906962, "o", "        np.multiply(self.data, self.data2)\r\n"]
[363.927823, "o", "\r\n"]
[363.948684, "o", "    def time_quantity_sub(self):\r\n"]
[363.969544, "o", "        # Same as operator.sub\r\n"]
[363.990405, "o", "        self.data - self.data2\r\n"]
[364.011266, "o", "\r\n"]
[364.032127, "o", "    def time_quantity_np_subtract(self):\r\n"]
[364.052987, "o", "        np.subtract(self.data, self.data2)\r\n"]
[364.073848, "o", "\r\n"]
[364.094709, "o", "    def time_quantity_add(self):\r\n"]
[364.11557, "o", "        # Same as operator.add\r\n"]
[364.13643, "o", "        self.data + self.data2\r\n"]
[364.157291, "o", "\r\n"]
[364.178152, "o", "    def time_quantity_np_add(self):\r\n"]
[364.199013, "o", "        np.add(self.data, self.data2)\r\n"]
[364.219873, "o", "\r\n"]
[364.240734, "o", "\r\n"]
[364.261595, "o", "class TimeQuantityOpSmallArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[364.282456, "o", "    \"\"\"\r\n"]
[364.303316, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[364.324177, "o", "    for small Numpy arrays with same units.\r\n"]
[364.345038, "o", "    \"\"\"\r\n"]
[364.365899, "o", "\r\n"]
[364.386759, "o", "    def setup(self):\r\n"]
[364.40762, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[364.428481, "o", "        self.data = data * u.g\r\n"]
[364.449342, "o", "        self.data2 = self.data.copy()\r\n"]
[364.470203, "o", "\r\n"]
[364.491063, "o", "\r\n"]
[364.511924, "o", "class TimeQuantityOpLargeArrayDiffUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[364.532785, "o", "    \"\"\"\r\n"]
[364.553646, "o", "    Like :class:`TimeQuantityOpSmallArrayDiffUnit` but for large Numpy arrays.\r\n"]
[364.574506, "o", "    \"\"\"\r\n"]
[364.595367, "o", "\r\n"]
[364.616228, "o", "    def setup(self):\r\n"]
[364.637089, "o", "        data = np.arange(1e6) + 1\r\n"]
[364.657949, "o", "        self.data = data * u.g\r\n"]
[364.67881, "o", "\r\n"]
[364.699671, "o", "        # A different but dimensionally compatible unit\r\n"]
[364.720532, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[364.741392, "o", "\r\n"]
[364.762253, "o", "\r\n"]
[364.783114, "o", "class TimeQuantityOpLargeArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[364.803975, "o", "    \"\"\"\r\n"]
[364.824835, "o", "    Like :class:`TimeQuantityOpSmallArraySameUnit` but for large Numpy arrays.\r\n"]
[364.845696, "o", "    \"\"\"\r\n"]
[364.866557, "o", "\r\n"]
[364.887418, "o", "    def setup(self):\r\n"]
[364.908278, "o", "        data = np.arange(1e6) + 1\r\n"]
[364.929139, "o", "        self.data = data * u.g\r\n"]
[365.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[365.002, "i", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r"]
[365.004, "o", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r\n"]
[365.455455, "o", "reation_nocopy|units.time_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view\" --quick\r\n"]
[365.904909, "o", "\u001b[?2004l\r\n"]
[366.354364, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[366.803818, "o", "\u00b7 \u001b[0;32mRunning 6 total benchmarks (1 commits * 1 environments * 6 benchmarks)\u001b[0m\r\n"]
[367.253273, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[367.702727, "o", "[ 8.33%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_array_conversion\u001b[0m                                                                                                      1.28\u00b10ms\r\n"]
[368.152182, "o", "[16.67%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_creation_nocopy\u001b[0m                                                                                                        142\u00b10\u03bcs\r\n"]
[368.601636, "o", "[25.00%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_array\u001b[0m                                                                                                       350\u00b10\u03bcs\r\n"]
[369.051091, "o", "[33.33%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_list\u001b[0m                                                                                                        351\u00b10\u03bcs\r\n"]
[369.500545, "o", "[41.67%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_times_unit\u001b[0m                                                                                                             576\u00b10\u03bcs\r\n"]
[370.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[370.002, "i", "asv profile --config asv.ci.conf.json units.time_quantity_times_unit\r"]
[370.004, "o", "asv profile --config asv.ci.conf.json units.time_quantity_times_unit\r\n"]
[370.106898, "o", "\u001b[?2004l\r\n"]
[370.207796, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[370.308694, "o", "\u00b7\u00b7 \u001b[0;34mCreating virtualenv for virtualenv-py3.11\u001b[0m\r\n"]
[370.409592, "o", "\u00b7\u00b7 \u001b[0;34mInstalling requirements for virtualenv-py3.11\u001b[0m\u001b[1;30m.\u001b[0m\u001b[1;30m.\u001b[0m\u001b[1;30m.\u001b[0m\u001b[1;30m.\u001b[0m\r\n"]
[370.51049, "o", "\u00b7\u00b7 \u001b[0;31mError running /workspace/repo/env/2bc11cad084fa5bfe9c66b8a2af28d97/bin/python -m pip install -v --upgrade extension-helpers==1. (exit status 1)\u001b[0m\r\n"]
[370.611388, "o", "   STDOUT -------->\r\n"]
[370.712286, "o", "   Using pip 25.2 from /workspace/repo/env/2bc11cad084fa5bfe9c66b8a2af28d97/lib/python3.11/site-packages/pip (python 3.11)\r\n"]
[370.813184, "o", "   STDERR -------->\r\n"]
[370.914082, "o", "   ERROR: Invalid requirement: 'extension-helpers==1.': Expected end or semicolon (after version specifier)\r\n"]
[371.01498, "o", "       extension-helpers==1.\r\n"]
[371.115878, "o", "                        ~~~^\r\n"]
[371.216776, "o", "\r\n"]
[371.317673, "o", "\u00b7\u00b7 \u001b[0;31mFailure creating environment for virtualenv-py3.11\u001b[0m\r\n"]
[371.418571, "o", "Traceback (most recent call last):\r\n"]
[371.519469, "o", "  File \"/opt/conda/envs/asv_3.11/bin/asv\", line 7, in <module>\r\n"]
[371.620367, "o", "    sys.exit(main())\r\n"]
[371.721265, "o", "             ^^^^^^\r\n"]
[371.822163, "o", "  File \"/opt/conda/envs/asv_3.11/lib/python3.11/site-packages/asv/main.py\", line 28, in main\r\n"]
[371.923061, "o", "    result = args.func(args)\r\n"]
[372.023959, "o", "             ^^^^^^^^^^^^^^^\r\n"]
[372.124857, "o", "  File \"/opt/conda/envs/asv_3.11/lib/python3.11/site-packages/asv/commands/__init__.py\", line 48, in run_from_args\r\n"]
[372.225755, "o", "    return cls.run_from_conf_args(conf, args)\r\n"]
[372.326653, "o", "           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n"]
[372.427551, "o", "  File \"/opt/conda/envs/asv_3.11/lib/python3.11/site-packages/asv/commands/profiling.py\", line 84, in run_from_conf_args\r\n"]
[372.528449, "o", "    return cls.run(\r\n"]
[372.629347, "o", "           ^^^^^^^^\r\n"]
[372.730245, "o", "  File \"/opt/conda/envs/asv_3.11/lib/python3.11/site-packages/asv/commands/profiling.py\", line 177, in run\r\n"]
[372.831143, "o", "    benchmarks = Benchmarks.discover(conf, repo, environments,\r\n"]
[372.932041, "o", "                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n"]
[373.032939, "o", "  File \"/opt/conda/envs/asv_3.11/lib/python3.11/site-packages/asv/benchmarks.py\", line 131, in discover\r\n"]
[373.133837, "o", "    benchmarks = cls._disc_benchmarks(conf, repo, environments, commit_hash, check)\r\n"]
[373.234735, "o", "                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n"]
[373.335633, "o", "  File \"/opt/conda/envs/asv_3.11/lib/python3.11/site-packages/asv/benchmarks.py\", line 177, in _disc_benchmarks\r\n"]
[373.436531, "o", "    env.create()\r\n"]
[373.537429, "o", "  File \"/opt/conda/envs/asv_3.11/lib/python3.11/site-packages/asv/environment.py\", line 755, in create\r\n"]
[373.638327, "o", "    self._setup()\r\n"]
[373.739224, "o", "  File \"/opt/conda/envs/asv_3.11/lib/python3.11/site-packages/asv/plugins/virtualenv.py\", line 150, in _setup\r\n"]
[373.840122, "o", "    self._install_requirements()\r\n"]
[373.94102, "o", "  File \"/opt/conda/envs/asv_3.11/lib/python3.11/site-packages/asv/plugins/virtualenv.py\", line 171, in _install_requirements\r\n"]
[374.041918, "o", "    pip_call()\r\n"]
[374.142816, "o", "  File \"/opt/conda/envs/asv_3.11/lib/python3.11/site-packages/asv/plugins/virtualenv.py\", line 176, in _run_pip\r\n"]
[374.243714, "o", "    return self.run_executable('python', ['-m', 'pip'] + list(args), **kwargs)\r\n"]
[374.344612, "o", "           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n"]
[374.44551, "o", "  File \"/opt/conda/envs/asv_3.11/lib/python3.11/site-packages/asv/environment.py\", line 1007, in run_executable\r\n"]
[374.546408, "o", "    return util.check_output([exe] + args, **kwargs)\r\n"]
[374.647306, "o", "           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n"]
[374.748204, "o", "  File \"/opt/conda/envs/asv_3.11/lib/python3.11/site-packages/asv/util.py\", line 617, in check_output\r\n"]
[374.849102, "o", "    raise ProcessError(args, retcode, stdout, stderr)\r\n"]
[375.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[375.002, "i", "cat asv.ci.conf.json\r"]
[375.004, "o", "cat asv.ci.conf.json\r\n"]
[375.3356, "o", "\u001b[?2004l\r\n"]
[375.6652, "o", " {\r\n"]
[375.9948, "o", "   \"version\": 1,\r\n"]
[376.3244, "o", "   \"project\": \"astropy\",\r\n"]
[376.654, "o", "   \"project_url\": \"http://www.astropy.org/\",\r\n"]
[376.9836, "o", "   \"repo\": \".\",\r\n"]
[377.3132, "o", "   \"install_command\": [\r\n"]
[377.6428, "o", "     \"pip install . matplotlib scipy\"\r\n"]
[377.9724, "o", "   ],\r\n"]
[378.302, "o", "   \"branches\": [\"main\"],\r\n"]
[378.6316, "o", "   \"show_commit_url\": \"http://github.com/astropy/astropy/commit/\",\r\n"]
[378.9612, "o", "   \"pythons\": [\"3.11\"],\r\n"]
[379.2908, "o", "   \"environment_type\": \"virtualenv\",\r\n"]
[379.6204, "o", "   \"benchmark_dir\": \"astropy-benchmarks/benchmarks\"\r\n"]
[380.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[380.002, "i", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r"]
[380.004, "o", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r\n"]
[380.455455, "o", "reation_nocopy|units.time_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view\" --quick\r\n"]
[380.904909, "o", "\u001b[?2004l\r\n"]
[381.354364, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[381.803818, "o", "\u00b7 \u001b[0;32mRunning 6 total benchmarks (1 commits * 1 environments * 6 benchmarks)\u001b[0m\r\n"]
[382.253273, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[382.702727, "o", "[ 8.33%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_array_conversion\u001b[0m                                                                                                      1.03\u00b10ms\r\n"]
[383.152182, "o", "[16.67%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_creation_nocopy\u001b[0m                                                                                                        124\u00b10\u03bcs\r\n"]
[383.601636, "o", "[25.00%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_array\u001b[0m                                                                                                       264\u00b10\u03bcs\r\n"]
[384.051091, "o", "[33.33%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_list\u001b[0m                                                                                                        298\u00b10\u03bcs\r\n"]
[384.500545, "o", "[41.67%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_times_unit\u001b[0m                                                                                                             513\u00b10\u03bcs\r\n"]
[385.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[385.002, "i", "asv profile --config asv.ci.conf.json --python=same units.time_quantity_times_unit\r"]
[385.004, "o", "asv profile --config asv.ci.conf.json --python=same units.time_quantity_times_unit\r\n"]
[385.099283, "o", "\u001b[?2004l\r\n"]
[385.192566, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[385.285849, "o", "\u00b7 \u001b[0;32mProfile data does not already exist. Running profiler now.\u001b[0m\r\n"]
[385.379132, "o", "\u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[385.472415, "o", "\u00b7\u00b7\u00b7 \u001b[0;39mRunning (units.time_quantity_times_unit--)\u001b[0m.\r\n"]
[385.565698, "o", "\u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_times_unit\u001b[0m                                                                                                          31.7\u00b10.7\u03bcs\r\n"]
[385.658981, "o", "\r\n"]
[385.752264, "o", "Wed Oct  1 12:08:57 2025    /tmp/tmp_pdb7boe\r\n"]
[385.845547, "o", "\r\n"]
[385.93883, "o", "         54 function calls in 0.000 seconds\r\n"]
[386.032113, "o", "\r\n"]
[386.125396, "o", "   Ordered by: cumulative time\r\n"]
[386.218679, "o", "\r\n"]
[386.311962, "o", "   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\r\n"]
[386.405245, "o", "        1    0.000    0.000    0.000    0.000 {built-in method builtins.exec}\r\n"]
[386.498528, "o", "        1    0.000    0.000    0.000    0.000 _base.py:689(method_caller)\r\n"]
[386.591811, "o", "        1    0.000    0.000    0.000    0.000 units.py:98(time_quantity_times_unit)\r\n"]
[386.685094, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:1209(__mul__)\r\n"]
[386.778377, "o", "        1    0.000    0.000    0.000    0.000 core.py:869(__mul__)\r\n"]
[386.87166, "o", "        1    0.000    0.000    0.000    0.000 core.py:2335(__init__)\r\n"]
[386.964943, "o", "        1    0.000    0.000    0.000    0.000 core.py:2416(_expand_and_gather)\r\n"]
[387.058226, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:764(_new_view)\r\n"]
[387.151509, "o", "        2    0.000    0.000    0.000    0.000 {method 'view' of 'numpy.ndarray' objects}\r\n"]
[387.244792, "o", "        2    0.000    0.000    0.000    0.000 quantity.py:574(__array_finalize__)\r\n"]
[387.338075, "o", "        1    0.000    0.000    0.000    0.000 {method 'copy' of 'numpy.ndarray' objects}\r\n"]
[387.431358, "o", "        2    0.000    0.000    0.000    0.000 core.py:2417(add_unit)\r\n"]
[387.524642, "o", "        1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}\r\n"]
[387.617925, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:945(to_value)\r\n"]
[387.711208, "o", "        1    0.000    0.000    0.000    0.000 core.py:2451(<lambda>)\r\n"]
[387.804491, "o", "        1    0.000    0.000    0.000    0.000 utils.py:193(sanitize_scale)\r\n"]
[387.897774, "o", "        2    0.000    0.000    0.000    0.000 {built-in method builtins.getattr}\r\n"]
[387.991057, "o", "        1    0.000    0.000    0.000    0.000 core.py:2069(__call__)\r\n"]
[388.08434, "o", "        1    0.000    0.000    0.000    0.000 core.py:2454(<listcomp>)\r\n"]
[388.177623, "o", "        5    0.000    0.000    0.000    0.000 core.py:927(__hash__)\r\n"]
[388.270906, "o", "        1    0.000    0.000    0.000    0.000 {built-in method builtins.hasattr}\r\n"]
[388.364189, "o", "        7    0.000    0.000    0.000    0.000 {built-in method builtins.isinstance}\r\n"]
[388.457472, "o", "        1    0.000    0.000    0.000    0.000 core.py:1874(name)\r\n"]
[388.550755, "o", "        1    0.000    0.000    0.000    0.000 core.py:2450(<listcomp>)\r\n"]
[388.644038, "o", "        1    0.000    0.000    0.000    0.000 utils.py:328(resolve_fractions)\r\n"]
[388.737321, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:836(_set_unit)\r\n"]
[388.830604, "o", "        2    0.000    0.000    0.000    0.000 quantity.py:1009(unit)\r\n"]
[388.923887, "o", "        1    0.000    0.000    0.000    0.000 utils.py:181(is_effectively_unity)\r\n"]
[389.01717, "o", "        1    0.000    0.000    0.000    0.000 {built-in method builtins.len}\r\n"]
[389.110453, "o", "        1    0.000    0.000    0.000    0.000 {built-in method numpy.array}\r\n"]
[389.203736, "o", "        1    0.000    0.000    0.000    0.000 core.py:2453(<listcomp>)\r\n"]
[389.297019, "o", "        2    0.000    0.000    0.000    0.000 core.py:1752(is_unity)\r\n"]
[389.390302, "o", "        1    0.000    0.000    0.000    0.000 utils.py:288(sanitize_power)\r\n"]
[389.483585, "o", "        2    0.000    0.000    0.000    0.000 {function Quantity.__array_finalize__ at 0x7f269d8840e0}\r\n"]
[389.576868, "o", "        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}\r\n"]
[389.670151, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:746(__quantity_subclass__)\r\n"]
[389.763434, "o", "        1    0.000    0.000    0.000    0.000 {method 'items' of 'dict' objects}\r\n"]
[389.856717, "o", "\r\n"]
[390.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[390.002, "i", "cat asv.ci.conf.json\r"]
[390.004, "o", "cat asv.ci.conf.json\r\n"]
[390.3356, "o", "\u001b[?2004l\r\n"]
[390.6652, "o", " {\r\n"]
[390.9948, "o", "   \"version\": 1,\r\n"]
[391.3244, "o", "   \"project\": \"astropy\",\r\n"]
[391.654, "o", "   \"project_url\": \"http://www.astropy.org/\",\r\n"]
[391.9836, "o", "   \"repo\": \".\",\r\n"]
[392.3132, "o", "   \"install_command\": [\r\n"]
[392.6428, "o", "     \"pip install . matplotlib scipy\"\r\n"]
[392.9724, "o", "   ],\r\n"]
[393.302, "o", "   \"branches\": [\"main\"],\r\n"]
[393.6316, "o", "   \"show_commit_url\": \"http://github.com/astropy/astropy/commit/\",\r\n"]
[393.9612, "o", "   \"pythons\": [\"3.11\"],\r\n"]
[394.2908, "o", "   \"environment_type\": \"virtualenv\",\r\n"]
[394.6204, "o", "   \"benchmark_dir\": \"astropy-benchmarks/benchmarks\"\r\n"]
[395.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[395.002, "i", "sed -n '1,260p' astropy-benchmarks/benchmarks/units.py\r"]
[395.004, "o", "sed -n '1,260p' astropy-benchmarks/benchmarks/units.py\r\n"]
[395.026861, "o", "\u001b[?2004l\r\n"]
[395.047722, "o", "import copy\r\n"]
[395.068582, "o", "\r\n"]
[395.089443, "o", "import numpy as np\r\n"]
[395.110304, "o", "from astropy import units as u\r\n"]
[395.131165, "o", "\r\n"]
[395.152025, "o", "\r\n"]
[395.172886, "o", "# Unit tests\r\n"]
[395.193747, "o", "\r\n"]
[395.214608, "o", "\r\n"]
[395.235468, "o", "def time_unit_compose():\r\n"]
[395.256329, "o", "    u.Ry.compose()\r\n"]
[395.27719, "o", "\r\n"]
[395.298051, "o", "\r\n"]
[395.318911, "o", "def time_unit_to():\r\n"]
[395.339772, "o", "    u.m.to(u.pc)\r\n"]
[395.360633, "o", "\r\n"]
[395.381494, "o", "\r\n"]
[395.402354, "o", "def time_unit_parse():\r\n"]
[395.423215, "o", "    u.Unit(\"1e-07 kg m2 / s2\")\r\n"]
[395.444076, "o", "\r\n"]
[395.464937, "o", "\r\n"]
[395.485797, "o", "def time_simple_unit_parse():\r\n"]
[395.506658, "o", "    u.Unit(\"1 d\")\r\n"]
[395.527519, "o", "\r\n"]
[395.54838, "o", "\r\n"]
[395.569241, "o", "def time_very_simple_unit_parse():\r\n"]
[395.590101, "o", "    u.Unit(\"d\")\r\n"]
[395.610962, "o", "\r\n"]
[395.631823, "o", "\r\n"]
[395.652684, "o", "def mem_unit():\r\n"]
[395.673544, "o", "    return u.erg\r\n"]
[395.694405, "o", "\r\n"]
[395.715266, "o", "\r\n"]
[395.736127, "o", "def time_compose_to_bases():\r\n"]
[395.756987, "o", "    x = copy.copy(u.Ry)\r\n"]
[395.777848, "o", "    x.cgs\r\n"]
[395.798709, "o", "\r\n"]
[395.81957, "o", "\r\n"]
[395.84043, "o", "def time_compose_complex():\r\n"]
[395.861291, "o", "    # Composing a complex unit can be very inefficient\r\n"]
[395.882152, "o", "    (u.kg / u.s**3 * u.au**2.5 / u.yr**0.5 / u.sr**2).compose()\r\n"]
[395.903013, "o", "\r\n"]
[395.923873, "o", "\r\n"]
[395.944734, "o", "# Quantity tests\r\n"]
[395.965595, "o", "\r\n"]
[395.986456, "o", "a = np.arange(100000.0)\r\n"]
[396.007316, "o", "b1 = [1.0, 2.0, 3.0]\r\n"]
[396.028177, "o", "b2 = np.asarray(b1)\r\n"]
[396.049038, "o", "q0 = u.Quantity(1.0, u.s)\r\n"]
[396.069899, "o", "q1 = u.Quantity(a, u.m)\r\n"]
[396.090759, "o", "q2 = u.Quantity(a[:10000], u.deg)\r\n"]
[396.11162, "o", "\r\n"]
[396.132481, "o", "\r\n"]
[396.153342, "o", "def time_quantity_creation():\r\n"]
[396.174203, "o", "    u.Quantity(a, u.m)\r\n"]
[396.195063, "o", "\r\n"]
[396.215924, "o", "\r\n"]
[396.236785, "o", "def time_quantity_creation_nocopy():\r\n"]
[396.257646, "o", "    u.Quantity(a, u.m, copy=False)\r\n"]
[396.278506, "o", "\r\n"]
[396.299367, "o", "\r\n"]
[396.320228, "o", "def time_quantity_view():\r\n"]
[396.341089, "o", "    q1.view(u.Quantity)\r\n"]
[396.361949, "o", "\r\n"]
[396.38281, "o", "\r\n"]
[396.403671, "o", "def time_quantity_init_scalar():\r\n"]
[396.424532, "o", "    3.0 * u.m / u.s\r\n"]
[396.445392, "o", "\r\n"]
[396.466253, "o", "\r\n"]
[396.487114, "o", "def time_quantity_init_array():\r\n"]
[396.507975, "o", "    a * u.m / u.s\r\n"]
[396.528835, "o", "\r\n"]
[396.549696, "o", "\r\n"]
[396.570557, "o", "def time_quantity_init_small_list():\r\n"]
[396.591418, "o", "    \"\"\"\r\n"]
[396.612278, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[396.633139, "o", "    for small list.\r\n"]
[396.654, "o", "    \"\"\"\r\n"]
[396.674861, "o", "    b1 * u.m / u.s\r\n"]
[396.695722, "o", "\r\n"]
[396.716582, "o", "\r\n"]
[396.737443, "o", "def time_quantity_init_small_array():\r\n"]
[396.758304, "o", "    \"\"\"\r\n"]
[396.779165, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[396.800025, "o", "    for small array.\r\n"]
[396.820886, "o", "    \"\"\"\r\n"]
[396.841747, "o", "    b2 * u.m / u.s\r\n"]
[396.862608, "o", "\r\n"]
[396.883468, "o", "\r\n"]
[396.904329, "o", "def time_quantity_scalar_conversion():\r\n"]
[396.92519, "o", "    (3.0 * u.m / u.s).to(u.km / u.hour)\r\n"]
[396.946051, "o", "\r\n"]
[396.966911, "o", "\r\n"]
[396.987772, "o", "def time_quantity_array_conversion():\r\n"]
[397.008633, "o", "    (a * u.m / u.s).to(u.km / u.hour)\r\n"]
[397.029494, "o", "\r\n"]
[397.050354, "o", "\r\n"]
[397.071215, "o", "def time_quantity_times_unit():\r\n"]
[397.092076, "o", "    q1 * u.m\r\n"]
[397.112937, "o", "\r\n"]
[397.133797, "o", "\r\n"]
[397.154658, "o", "def time_quantity_times_quantity():\r\n"]
[397.175519, "o", "    q1 * q0\r\n"]
[397.19638, "o", "\r\n"]
[397.217241, "o", "\r\n"]
[397.238101, "o", "def time_quantity_ufunc_sin():\r\n"]
[397.258962, "o", "    np.sin(q2)\r\n"]
[397.279823, "o", "\r\n"]
[397.300684, "o", "\r\n"]
[397.321544, "o", "class TimeQuantityOpSmallArray:\r\n"]
[397.342405, "o", "    \"\"\"\r\n"]
[397.363266, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[397.384127, "o", "    for a small Numpy array.\r\n"]
[397.404987, "o", "    \"\"\"\r\n"]
[397.425848, "o", "\r\n"]
[397.446709, "o", "    def setup(self):\r\n"]
[397.46757, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[397.48843, "o", "        self.data = data * u.g\r\n"]
[397.509291, "o", "        self.out_sq = data * u.g**2\r\n"]
[397.530152, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[397.551013, "o", "\r\n"]
[397.571873, "o", "    def time_quantity_square(self):\r\n"]
[397.592734, "o", "        self.data**2\r\n"]
[397.613595, "o", "\r\n"]
[397.634456, "o", "    def time_quantity_np_square(self):\r\n"]
[397.655316, "o", "        np.power(self.data, 2)\r\n"]
[397.676177, "o", "\r\n"]
[397.697038, "o", "    def time_quantity_np_square_out(self):\r\n"]
[397.717899, "o", "        np.power(self.data, 2, out=self.out_sq)\r\n"]
[397.738759, "o", "\r\n"]
[397.75962, "o", "    def time_quantity_sqrt(self):\r\n"]
[397.780481, "o", "        self.data**0.5\r\n"]
[397.801342, "o", "\r\n"]
[397.822203, "o", "    def time_quantity_np_sqrt(self):\r\n"]
[397.843063, "o", "        np.sqrt(self.data)\r\n"]
[397.863924, "o", "\r\n"]
[397.884785, "o", "    def time_quantity_np_sqrt_out(self):\r\n"]
[397.905646, "o", "        np.sqrt(self.data, out=self.out_sqrt)\r\n"]
[397.926506, "o", "\r\n"]
[397.947367, "o", "\r\n"]
[397.968228, "o", "class TimeQuantityOpLargeArray(TimeQuantityOpSmallArray):\r\n"]
[397.989089, "o", "    \"\"\"\r\n"]
[398.009949, "o", "    Like :class:`TimeQuantityOpSmallArray` but for a large Numpy array.\r\n"]
[398.03081, "o", "    \"\"\"\r\n"]
[398.051671, "o", "\r\n"]
[398.072532, "o", "    def setup(self):\r\n"]
[398.093392, "o", "        data = np.arange(1e6) + 1\r\n"]
[398.114253, "o", "        self.data = data * u.g\r\n"]
[398.135114, "o", "        self.out_sq = data * u.g**2\r\n"]
[398.155975, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[398.176835, "o", "\r\n"]
[398.197696, "o", "\r\n"]
[398.218557, "o", "class TimeQuantityOpSmallArrayDiffUnit:\r\n"]
[398.239418, "o", "    \"\"\"\r\n"]
[398.260278, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[398.281139, "o", "    for small Numpy arrays with different units.\r\n"]
[398.302, "o", "    \"\"\"\r\n"]
[398.322861, "o", "\r\n"]
[398.343722, "o", "    def setup(self):\r\n"]
[398.364582, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[398.385443, "o", "        self.data = data * u.g\r\n"]
[398.406304, "o", "\r\n"]
[398.427165, "o", "        # A different but dimensionally compatible unit\r\n"]
[398.448025, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[398.468886, "o", "\r\n"]
[398.489747, "o", "    def time_quantity_equal(self):\r\n"]
[398.510608, "o", "        # Same as operator.eq\r\n"]
[398.531468, "o", "        self.data == self.data2\r\n"]
[398.552329, "o", "\r\n"]
[398.57319, "o", "    def time_quantity_np_equal(self):\r\n"]
[398.594051, "o", "        np.equal(self.data, self.data2)\r\n"]
[398.614911, "o", "\r\n"]
[398.635772, "o", "    def time_quantity_truediv(self):\r\n"]
[398.656633, "o", "        # Since benchmark is PY3 only, this is always true divide.\r\n"]
[398.677494, "o", "        # Same as operator.truediv\r\n"]
[398.698354, "o", "        self.data / self.data2\r\n"]
[398.719215, "o", "\r\n"]
[398.740076, "o", "    def time_quantity_np_truediv(self):\r\n"]
[398.760937, "o", "        np.true_divide(self.data, self.data2)\r\n"]
[398.781797, "o", "\r\n"]
[398.802658, "o", "    def time_quantity_mul(self):\r\n"]
[398.823519, "o", "        # Same as operator.mul\r\n"]
[398.84438, "o", "        self.data * self.data2\r\n"]
[398.865241, "o", "\r\n"]
[398.886101, "o", "    def time_quantity_np_multiply(self):\r\n"]
[398.906962, "o", "        np.multiply(self.data, self.data2)\r\n"]
[398.927823, "o", "\r\n"]
[398.948684, "o", "    def time_quantity_sub(self):\r\n"]
[398.969544, "o", "        # Same as operator.sub\r\n"]
[398.990405, "o", "        self.data - self.data2\r\n"]
[399.011266, "o", "\r\n"]
[399.032127, "o", "    def time_quantity_np_subtract(self):\r\n"]
[399.052987, "o", "        np.subtract(self.data, self.data2)\r\n"]
[399.073848, "o", "\r\n"]
[399.094709, "o", "    def time_quantity_add(self):\r\n"]
[399.11557, "o", "        # Same as operator.add\r\n"]
[399.13643, "o", "        self.data + self.data2\r\n"]
[399.157291, "o", "\r\n"]
[399.178152, "o", "    def time_quantity_np_add(self):\r\n"]
[399.199013, "o", "        np.add(self.data, self.data2)\r\n"]
[399.219873, "o", "\r\n"]
[399.240734, "o", "\r\n"]
[399.261595, "o", "class TimeQuantityOpSmallArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[399.282456, "o", "    \"\"\"\r\n"]
[399.303316, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[399.324177, "o", "    for small Numpy arrays with same units.\r\n"]
[399.345038, "o", "    \"\"\"\r\n"]
[399.365899, "o", "\r\n"]
[399.386759, "o", "    def setup(self):\r\n"]
[399.40762, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[399.428481, "o", "        self.data = data * u.g\r\n"]
[399.449342, "o", "        self.data2 = self.data.copy()\r\n"]
[399.470203, "o", "\r\n"]
[399.491063, "o", "\r\n"]
[399.511924, "o", "class TimeQuantityOpLargeArrayDiffUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[399.532785, "o", "    \"\"\"\r\n"]
[399.553646, "o", "    Like :class:`TimeQuantityOpSmallArrayDiffUnit` but for large Numpy arrays.\r\n"]
[399.574506, "o", "    \"\"\"\r\n"]
[399.595367, "o", "\r\n"]
[399.616228, "o", "    def setup(self):\r\n"]
[399.637089, "o", "        data = np.arange(1e6) + 1\r\n"]
[399.657949, "o", "        self.data = data * u.g\r\n"]
[399.67881, "o", "\r\n"]
[399.699671, "o", "        # A different but dimensionally compatible unit\r\n"]
[399.720532, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[399.741392, "o", "\r\n"]
[399.762253, "o", "\r\n"]
[399.783114, "o", "class TimeQuantityOpLargeArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[399.803975, "o", "    \"\"\"\r\n"]
[399.824835, "o", "    Like :class:`TimeQuantityOpSmallArraySameUnit` but for large Numpy arrays.\r\n"]
[399.845696, "o", "    \"\"\"\r\n"]
[399.866557, "o", "\r\n"]
[399.887418, "o", "    def setup(self):\r\n"]
[399.908278, "o", "        data = np.arange(1e6) + 1\r\n"]
[399.929139, "o", "        self.data = data * u.g\r\n"]
[400.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[400.002, "i", "sed -n '260,520p' astropy-benchmarks/benchmarks/units.py\r"]
[400.004, "o", "sed -n '260,520p' astropy-benchmarks/benchmarks/units.py\r\n"]
[400.006, "o", "\u001b[?2004l\r\n"]
[405.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[405.002, "i", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r"]
[405.004, "o", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r\n"]
[405.1605, "o", "reation_nocopy|units.time_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view|units.TimeQuanti\r\n"]
[405.315, "o", "ityOpLargeArraySameUnit.*|units.TimeQuantityOpLargeArrayDiffUnit.*\" --quick\r\n"]
[405.4695, "o", "\u001b[?2004l\r\n"]
[405.624, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[405.7785, "o", "\u00b7 \u001b[0;32mRunning 26 total benchmarks (1 commits * 1 environments * 26 benchmarks)\u001b[0m\r\n"]
[405.933, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[406.0875, "o", "[ 1.92%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_add\u001b[0m                                                                                  2.84\u00b10ms\r\n"]
[406.242, "o", "[ 3.85%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_equal\u001b[0m                                                                                2.55\u00b10ms\r\n"]
[406.3965, "o", "[ 5.77%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_mul\u001b[0m                                                                                  3.15\u00b10ms\r\n"]
[406.551, "o", "[ 7.69%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_add\u001b[0m                                                                               2.98\u00b10ms\r\n"]
[406.7055, "o", "[ 9.62%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_equal\u001b[0m                                                                             2.58\u00b10ms\r\n"]
[406.86, "o", "[11.54%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_multiply\u001b[0m                                                                          1.41\u00b10ms\r\n"]
[407.0145, "o", "[13.46%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_subtract\u001b[0m                                                                          2.93\u00b10ms\r\n"]
[407.169, "o", "[15.38%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_truediv\u001b[0m                                                                           2.84\u00b10ms\r\n"]
[407.3235, "o", "[17.31%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_sub\u001b[0m                                                                                  2.43\u00b10ms\r\n"]
[407.478, "o", "[19.23%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_truediv\u001b[0m                                                                              1.60\u00b10ms\r\n"]
[407.6325, "o", "[21.15%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_add\u001b[0m                                                                                  1.50\u00b10ms\r\n"]
[407.787, "o", "[23.08%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_equal\u001b[0m                                                                                1.30\u00b10ms\r\n"]
[407.9415, "o", "[25.00%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\u001b[0m                                                                                  1.78\u00b10ms\r\n"]
[408.096, "o", "[26.92%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_add\u001b[0m                                                                               1.56\u00b10ms\r\n"]
[408.2505, "o", "[28.85%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_equal\u001b[0m                                                                             1.34\u00b10ms\r\n"]
[408.405, "o", "[30.77%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_multiply\u001b[0m                                                                          1.29\u00b10ms\r\n"]
[408.5595, "o", "[32.69%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_subtract\u001b[0m                                                                          2.01\u00b10ms\r\n"]
[408.714, "o", "[34.62%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_truediv\u001b[0m                                                                           1.78\u00b10ms\r\n"]
[408.8685, "o", "[36.54%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_sub\u001b[0m                                                                                  1.34\u00b10ms\r\n"]
[409.023, "o", "[38.46%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_truediv\u001b[0m                                                                              1.62\u00b10ms\r\n"]
[409.1775, "o", "[40.38%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_array_conversion\u001b[0m                                                                                                      1.55\u00b10ms\r\n"]
[409.332, "o", "[42.31%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_creation_nocopy\u001b[0m                                                                                                        172\u00b10\u03bcs\r\n"]
[409.4865, "o", "[44.23%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_array\u001b[0m                                                                                                       319\u00b10\u03bcs\r\n"]
[409.641, "o", "[46.15%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_list\u001b[0m                                                                                                        304\u00b10\u03bcs\r\n"]
[409.7955, "o", "[48.08%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_times_unit\u001b[0m                                                                                                             607\u00b10\u03bcs\r\n"]
[410.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[410.002, "i", "asv profile --config asv.ci.conf.json --python=same units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\r"]
[410.004, "o", "asv profile --config asv.ci.conf.json --python=same units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\r\n"]
[410.080909, "o", "\u001b[?2004l\r\n"]
[410.155818, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[410.230727, "o", "\u00b7 \u001b[0;32mProfile data does not already exist. Running profiler now.\u001b[0m\r\n"]
[410.305636, "o", "\u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[410.380545, "o", "\u00b7\u00b7\u00b7 \u001b[0;39mRunning (units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul--)\u001b[0m.\r\n"]
[410.455455, "o", "\u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\u001b[0m                                                                                1.72\u00b10.2ms\r\n"]
[410.530364, "o", "\r\n"]
[410.605273, "o", "Wed Oct  1 12:10:56 2025    /tmp/tmp_ie5em11\r\n"]
[410.680182, "o", "\r\n"]
[410.755091, "o", "         86 function calls in 0.002 seconds\r\n"]
[410.83, "o", "\r\n"]
[410.904909, "o", "   Ordered by: cumulative time\r\n"]
[410.979818, "o", "\r\n"]
[411.054727, "o", "   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\r\n"]
[411.129636, "o", "        1    0.000    0.000    0.002    0.002 {built-in method builtins.exec}\r\n"]
[411.204545, "o", "        1    0.000    0.000    0.002    0.002 _base.py:689(method_caller)\r\n"]
[411.279455, "o", "        1    0.000    0.000    0.002    0.002 units.py:181(time_quantity_mul)\r\n"]
[411.354364, "o", "        1    0.000    0.000    0.002    0.002 quantity.py:1209(__mul__)\r\n"]
[411.429273, "o", "        1    0.000    0.000    0.002    0.002 quantity.py:613(__array_ufunc__)\r\n"]
[411.504182, "o", "        1    0.001    0.001    0.001    0.001 {function Quantity.__array_ufunc__ at 0x7f40167f0220}\r\n"]
[411.579091, "o", "        1    0.000    0.000    0.000    0.000 converters.py:141(converters_and_unit)\r\n"]
[411.654, "o", "        1    0.000    0.000    0.000    0.000 helpers.py:219(helper_multiplication)\r\n"]
[411.728909, "o", "        1    0.000    0.000    0.000    0.000 core.py:869(__mul__)\r\n"]
[411.803818, "o", "        1    0.000    0.000    0.000    0.000 core.py:2335(__init__)\r\n"]
[411.878727, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:694(_result_as_quantity)\r\n"]
[411.953636, "o", "        1    0.000    0.000    0.000    0.000 core.py:2416(_expand_and_gather)\r\n"]
[412.028545, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:764(_new_view)\r\n"]
[412.103455, "o", "        2    0.000    0.000    0.000    0.000 core.py:2279(is_unity)\r\n"]
[412.178364, "o", "        6    0.000    0.000    0.000    0.000 {built-in method builtins.getattr}\r\n"]
[412.253273, "o", "        3    0.000    0.000    0.000    0.000 {method 'view' of 'numpy.ndarray' objects}\r\n"]
[412.328182, "o", "        2    0.000    0.000    0.000    0.000 core.py:2484(is_unity)\r\n"]
[412.403091, "o", "        2    0.000    0.000    0.000    0.000 core.py:2417(add_unit)\r\n"]
[412.478, "o", "        2    0.000    0.000    0.000    0.000 quantity.py:574(__array_finalize__)\r\n"]
[412.552909, "o", "        2    0.000    0.000    0.000    0.000 quantity.py:945(to_value)\r\n"]
[412.627818, "o", "        1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}\r\n"]
[412.702727, "o", "        1    0.000    0.000    0.000    0.000 core.py:2069(__call__)\r\n"]
[412.777636, "o", "        1    0.000    0.000    0.000    0.000 core.py:2454(<listcomp>)\r\n"]
[412.852545, "o", "        2    0.000    0.000    0.000    0.000 core.py:2463(decompose)\r\n"]
[412.927455, "o", "        1    0.000    0.000    0.000    0.000 converters.py:178(<listcomp>)\r\n"]
[413.002364, "o", "        1    0.000    0.000    0.000    0.000 core.py:2451(<lambda>)\r\n"]
[413.077273, "o", "        8    0.000    0.000    0.000    0.000 {built-in method builtins.isinstance}\r\n"]
[413.152182, "o", "        1    0.000    0.000    0.000    0.000 utils.py:193(sanitize_scale)\r\n"]
[413.227091, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:836(_set_unit)\r\n"]
[413.302, "o", "        3    0.000    0.000    0.000    0.000 quantity.py:1009(unit)\r\n"]
[413.376909, "o", "        1    0.000    0.000    0.000    0.000 {built-in method builtins.any}\r\n"]
[413.451818, "o", "        1    0.000    0.000    0.000    0.000 core.py:2450(<listcomp>)\r\n"]
[413.526727, "o", "        5    0.000    0.000    0.000    0.000 {built-in method builtins.len}\r\n"]
[413.601636, "o", "        1    0.000    0.000    0.000    0.000 {built-in method numpy.array}\r\n"]
[413.676545, "o", "        1    0.000    0.000    0.000    0.000 utils.py:181(is_effectively_unity)\r\n"]
[413.751455, "o", "        1    0.000    0.000    0.000    0.000 utils.py:328(resolve_fractions)\r\n"]
[413.826364, "o", "        5    0.000    0.000    0.000    0.000 core.py:2282(__hash__)\r\n"]
[413.901273, "o", "        1    0.000    0.000    0.000    0.000 core.py:1874(name)\r\n"]
[413.976182, "o", "        1    0.000    0.000    0.000    0.000 {built-in method builtins.hasattr}\r\n"]
[414.051091, "o", "        3    0.000    0.000    0.000    0.000 converters.py:183(<genexpr>)\r\n"]
[414.126, "o", "        1    0.000    0.000    0.000    0.000 core.py:2453(<listcomp>)\r\n"]
[414.200909, "o", "        2    0.000    0.000    0.000    0.000 core.py:2402(bases)\r\n"]
[414.275818, "o", "        1    0.000    0.000    0.000    0.000 utils.py:288(sanitize_power)\r\n"]
[414.350727, "o", "        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}\r\n"]
[414.425636, "o", "        2    0.000    0.000    0.000    0.000 {function Quantity.__array_finalize__ at 0x7f40167f00e0}\r\n"]
[414.500545, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:746(__quantity_subclass__)\r\n"]
[414.575455, "o", "        2    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}\r\n"]
[414.650364, "o", "        2    0.000    0.000    0.000    0.000 helpers.py:31(_d)\r\n"]
[414.725273, "o", "        1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}\r\n"]
[414.800182, "o", "        1    0.000    0.000    0.000    0.000 {method 'items' of 'dict' objects}\r\n"]
[414.875091, "o", "\r\n"]
[415.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[415.002, "i", "sed -n '1120,1260p' astropy/units/quantity.py\r"]
[415.004, "o", "sed -n '1120,1260p' astropy/units/quantity.py\r\n"]
[415.040817, "o", "\u001b[?2004l\r\n"]
[415.075634, "o", "\r\n"]
[415.110451, "o", "        value = get_virtual_unit_attribute()\r\n"]
[415.145268, "o", "\r\n"]
[415.180085, "o", "        if value is None:\r\n"]
[415.214901, "o", "            raise AttributeError(\r\n"]
[415.249718, "o", "                f\"{self.__class__.__name__} instance has no attribute '{attr}'\"\r\n"]
[415.284535, "o", "            )\r\n"]
[415.319352, "o", "        else:\r\n"]
[415.354169, "o", "            return value\r\n"]
[415.388986, "o", "\r\n"]
[415.423803, "o", "    # Equality needs to be handled explicitly as ndarray.__eq__ gives\r\n"]
[415.45862, "o", "    # DeprecationWarnings on any error, which is distracting, and does not\r\n"]
[415.493437, "o", "    # deal well with structured arrays (nor does the ufunc).\r\n"]
[415.528254, "o", "    def __eq__(self, other):\r\n"]
[415.56307, "o", "        try:\r\n"]
[415.597887, "o", "            other_value = self._to_own_unit(other)\r\n"]
[415.632704, "o", "        except UnitsError:\r\n"]
[415.667521, "o", "            return False\r\n"]
[415.702338, "o", "        except Exception:\r\n"]
[415.737155, "o", "            return NotImplemented\r\n"]
[415.771972, "o", "        return self.value.__eq__(other_value)\r\n"]
[415.806789, "o", "\r\n"]
[415.841606, "o", "    def __ne__(self, other):\r\n"]
[415.876423, "o", "        try:\r\n"]
[415.911239, "o", "            other_value = self._to_own_unit(other)\r\n"]
[415.946056, "o", "        except UnitsError:\r\n"]
[415.980873, "o", "            return True\r\n"]
[416.01569, "o", "        except Exception:\r\n"]
[416.050507, "o", "            return NotImplemented\r\n"]
[416.085324, "o", "        return self.value.__ne__(other_value)\r\n"]
[416.120141, "o", "\r\n"]
[416.154958, "o", "    # Unit conversion operator (<<).\r\n"]
[416.189775, "o", "    def __lshift__(self, other):\r\n"]
[416.224592, "o", "        try:\r\n"]
[416.259408, "o", "            other = Unit(other, parse_strict=\"silent\")\r\n"]
[416.294225, "o", "        except UnitTypeError:\r\n"]
[416.329042, "o", "            return NotImplemented\r\n"]
[416.363859, "o", "\r\n"]
[416.398676, "o", "        return self.__class__(self, other, copy=False, subok=True)\r\n"]
[416.433493, "o", "\r\n"]
[416.46831, "o", "    def __ilshift__(self, other):\r\n"]
[416.503127, "o", "        try:\r\n"]
[416.537944, "o", "            other = Unit(other, parse_strict=\"silent\")\r\n"]
[416.572761, "o", "        except UnitTypeError:\r\n"]
[416.607577, "o", "            return NotImplemented  # try other.__rlshift__(self)\r\n"]
[416.642394, "o", "\r\n"]
[416.677211, "o", "        try:\r\n"]
[416.712028, "o", "            factor = self.unit._to(other)\r\n"]
[416.746845, "o", "        except UnitConversionError:  # incompatible, or requires an Equivalency\r\n"]
[416.781662, "o", "            return NotImplemented\r\n"]
[416.816479, "o", "        except AttributeError:  # StructuredUnit does not have `_to`\r\n"]
[416.851296, "o", "            # In principle, in-place might be possible.\r\n"]
[416.886113, "o", "            return NotImplemented\r\n"]
[416.92093, "o", "\r\n"]
[416.955746, "o", "        view = self.view(np.ndarray)\r\n"]
[416.990563, "o", "        try:\r\n"]
[417.02538, "o", "            view *= factor  # operates on view\r\n"]
[417.060197, "o", "        except TypeError:\r\n"]
[417.095014, "o", "            # The error is `numpy.core._exceptions._UFuncOutputCastingError`,\r\n"]
[417.129831, "o", "            # which inherits from `TypeError`.\r\n"]
[417.164648, "o", "            return NotImplemented\r\n"]
[417.199465, "o", "\r\n"]
[417.234282, "o", "        self._set_unit(other)\r\n"]
[417.269099, "o", "        return self\r\n"]
[417.303915, "o", "\r\n"]
[417.338732, "o", "    def __rlshift__(self, other):\r\n"]
[417.373549, "o", "        if not self.isscalar:\r\n"]
[417.408366, "o", "            return NotImplemented\r\n"]
[417.443183, "o", "        return Unit(self).__rlshift__(other)\r\n"]
[417.478, "o", "\r\n"]
[417.512817, "o", "    # Give warning for other >> self, since probably other << self was meant.\r\n"]
[417.547634, "o", "    def __rrshift__(self, other):\r\n"]
[417.582451, "o", "        warnings.warn(\r\n"]
[417.617268, "o", "            \">> is not implemented. Did you mean to convert \"\r\n"]
[417.652085, "o", "            \"something to this quantity as a unit using '<<'?\",\r\n"]
[417.686901, "o", "            AstropyWarning,\r\n"]
[417.721718, "o", "        )\r\n"]
[417.756535, "o", "        return NotImplemented\r\n"]
[417.791352, "o", "\r\n"]
[417.826169, "o", "    # Also define __rshift__ and __irshift__ so we override default ndarray\r\n"]
[417.860986, "o", "    # behaviour, but instead of emitting a warning here, let it be done by\r\n"]
[417.895803, "o", "    # other (which likely is a unit if this was a mistake).\r\n"]
[417.93062, "o", "    def __rshift__(self, other):\r\n"]
[417.965437, "o", "        return NotImplemented\r\n"]
[418.000254, "o", "\r\n"]
[418.03507, "o", "    def __irshift__(self, other):\r\n"]
[418.069887, "o", "        return NotImplemented\r\n"]
[418.104704, "o", "\r\n"]
[418.139521, "o", "    # Arithmetic operations\r\n"]
[418.174338, "o", "    def __mul__(self, other):\r\n"]
[418.209155, "o", "        \"\"\"Multiplication between `Quantity` objects and other objects.\"\"\"\r\n"]
[418.243972, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[418.278789, "o", "            try:\r\n"]
[418.313606, "o", "                return self._new_view(\r\n"]
[418.348423, "o", "                    self.value.copy(), other * self.unit, propagate_info=False\r\n"]
[418.383239, "o", "                )\r\n"]
[418.418056, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[418.452873, "o", "                return NotImplemented\r\n"]
[418.48769, "o", "\r\n"]
[418.522507, "o", "        return super().__mul__(other)\r\n"]
[418.557324, "o", "\r\n"]
[418.592141, "o", "    def __imul__(self, other):\r\n"]
[418.626958, "o", "        \"\"\"In-place multiplication between `Quantity` objects and others.\"\"\"\r\n"]
[418.661775, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[418.696592, "o", "            self._set_unit(other * self.unit)\r\n"]
[418.731408, "o", "            return self\r\n"]
[418.766225, "o", "\r\n"]
[418.801042, "o", "        return super().__imul__(other)\r\n"]
[418.835859, "o", "\r\n"]
[418.870676, "o", "    def __rmul__(self, other):\r\n"]
[418.905493, "o", "        \"\"\"\r\n"]
[418.94031, "o", "        Right Multiplication between `Quantity` objects and other objects.\r\n"]
[418.975127, "o", "        \"\"\"\r\n"]
[419.009944, "o", "        return self.__mul__(other)\r\n"]
[419.044761, "o", "\r\n"]
[419.079577, "o", "    def __truediv__(self, other):\r\n"]
[419.114394, "o", "        \"\"\"Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[419.149211, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[419.184028, "o", "            try:\r\n"]
[419.218845, "o", "                return self._new_view(\r\n"]
[419.253662, "o", "                    self.value.copy(), self.unit / other, propagate_info=False\r\n"]
[419.288479, "o", "                )\r\n"]
[419.323296, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[419.358113, "o", "                return NotImplemented\r\n"]
[419.39293, "o", "\r\n"]
[419.427746, "o", "        return super().__truediv__(other)\r\n"]
[419.462563, "o", "\r\n"]
[419.49738, "o", "    def __itruediv__(self, other):\r\n"]
[419.532197, "o", "        \"\"\"Inplace division between `Quantity` objects and other objects.\"\"\"\r\n"]
[419.567014, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[419.601831, "o", "            self._set_unit(self.unit / other)\r\n"]
[419.636648, "o", "            return self\r\n"]
[419.671465, "o", "\r\n"]
[419.706282, "o", "        return super().__itruediv__(other)\r\n"]
[419.741099, "o", "\r\n"]
[419.775915, "o", "    def __rtruediv__(self, other):\r\n"]
[419.810732, "o", "        \"\"\"Right Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[419.845549, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[419.880366, "o", "            return self._new_view(\r\n"]
[419.915183, "o", "                1.0 / self.value, other / self.unit, propagate_info=False\r\n"]
[420.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[420.002, "i", "sed -n '2320,2480p' astropy/units/core.py\r"]
[420.004, "o", "sed -n '2320,2480p' astropy/units/core.py\r\n"]
[420.036519, "o", "\u001b[?2004l\r\n"]
[420.067037, "o", "    Parameters\r\n"]
[420.097556, "o", "    ----------\r\n"]
[420.128074, "o", "    scale : number\r\n"]
[420.158593, "o", "        A scaling factor for the unit.\r\n"]
[420.189111, "o", "\r\n"]
[420.21963, "o", "    bases : sequence of `UnitBase`\r\n"]
[420.250148, "o", "        A sequence of units this unit is composed of.\r\n"]
[420.280667, "o", "\r\n"]
[420.311185, "o", "    powers : sequence of numbers\r\n"]
[420.341704, "o", "        A sequence of powers (in parallel with ``bases``) for each\r\n"]
[420.372222, "o", "        of the base units.\r\n"]
[420.402741, "o", "    \"\"\"\r\n"]
[420.433259, "o", "\r\n"]
[420.463778, "o", "    _decomposed_cache = None\r\n"]
[420.494296, "o", "\r\n"]
[420.524815, "o", "    def __init__(\r\n"]
[420.555333, "o", "        self,\r\n"]
[420.585852, "o", "        scale,\r\n"]
[420.61637, "o", "        bases,\r\n"]
[420.646889, "o", "        powers,\r\n"]
[420.677407, "o", "        decompose=False,\r\n"]
[420.707926, "o", "        decompose_bases=set(),\r\n"]
[420.738444, "o", "        _error_check=True,\r\n"]
[420.768963, "o", "    ):\r\n"]
[420.799481, "o", "        # There are many cases internal to astropy.units where we\r\n"]
[420.83, "o", "        # already know that all the bases are Unit objects, and the\r\n"]
[420.860519, "o", "        # powers have been validated.  In those cases, we can skip the\r\n"]
[420.891037, "o", "        # error checking for performance reasons.  When the private\r\n"]
[420.921556, "o", "        # kwarg `_error_check` is False, the error checking is turned\r\n"]
[420.952074, "o", "        # off.\r\n"]
[420.982593, "o", "        if _error_check:\r\n"]
[421.013111, "o", "            for base in bases:\r\n"]
[421.04363, "o", "                if not isinstance(base, UnitBase):\r\n"]
[421.074148, "o", "                    raise TypeError(\"bases must be sequence of UnitBase instances\")\r\n"]
[421.104667, "o", "            powers = [validate_power(p) for p in powers]\r\n"]
[421.135185, "o", "\r\n"]
[421.165704, "o", "        if not decompose and len(bases) == 1 and powers[0] >= 0:\r\n"]
[421.196222, "o", "            # Short-cut; with one unit there's nothing to expand and gather,\r\n"]
[421.226741, "o", "            # as that has happened already when creating the unit.  But do only\r\n"]
[421.257259, "o", "            # positive powers, since for negative powers we need to re-sort.\r\n"]
[421.287778, "o", "            unit = bases[0]\r\n"]
[421.318296, "o", "            power = powers[0]\r\n"]
[421.348815, "o", "            if power == 1:\r\n"]
[421.379333, "o", "                scale *= unit.scale\r\n"]
[421.409852, "o", "                self._bases = unit.bases\r\n"]
[421.44037, "o", "                self._powers = unit.powers\r\n"]
[421.470889, "o", "            elif power == 0:\r\n"]
[421.501407, "o", "                self._bases = []\r\n"]
[421.531926, "o", "                self._powers = []\r\n"]
[421.562444, "o", "            else:\r\n"]
[421.592963, "o", "                scale *= unit.scale**power\r\n"]
[421.623481, "o", "                self._bases = unit.bases\r\n"]
[421.654, "o", "                self._powers = [\r\n"]
[421.684519, "o", "                    sanitize_power(operator.mul(*resolve_fractions(p, power)))\r\n"]
[421.715037, "o", "                    for p in unit.powers\r\n"]
[421.745556, "o", "                ]\r\n"]
[421.776074, "o", "\r\n"]
[421.806593, "o", "            self._scale = sanitize_scale(scale)\r\n"]
[421.837111, "o", "        else:\r\n"]
[421.86763, "o", "            # Regular case: use inputs as preliminary scale, bases, and powers,\r\n"]
[421.898148, "o", "            # then \"expand and gather\" identical bases, sanitize the scale, &c.\r\n"]
[421.928667, "o", "            self._scale = scale\r\n"]
[421.959185, "o", "            self._bases = bases\r\n"]
[421.989704, "o", "            self._powers = powers\r\n"]
[422.020222, "o", "            self._expand_and_gather(decompose=decompose, bases=decompose_bases)\r\n"]
[422.050741, "o", "\r\n"]
[422.081259, "o", "    def __repr__(self):\r\n"]
[422.111778, "o", "        if len(self._bases):\r\n"]
[422.142296, "o", "            return super().__repr__()\r\n"]
[422.172815, "o", "        else:\r\n"]
[422.203333, "o", "            if self._scale != 1.0:\r\n"]
[422.233852, "o", "                return f\"Unit(dimensionless with a scale of {self._scale})\"\r\n"]
[422.26437, "o", "            else:\r\n"]
[422.294889, "o", "                return \"Unit(dimensionless)\"\r\n"]
[422.325407, "o", "\r\n"]
[422.355926, "o", "    @property\r\n"]
[422.386444, "o", "    def scale(self):\r\n"]
[422.416963, "o", "        \"\"\"\r\n"]
[422.447481, "o", "        Return the scale of the composite unit.\r\n"]
[422.478, "o", "        \"\"\"\r\n"]
[422.508519, "o", "        return self._scale\r\n"]
[422.539037, "o", "\r\n"]
[422.569556, "o", "    @property\r\n"]
[422.600074, "o", "    def bases(self):\r\n"]
[422.630593, "o", "        \"\"\"\r\n"]
[422.661111, "o", "        Return the bases of the composite unit.\r\n"]
[422.69163, "o", "        \"\"\"\r\n"]
[422.722148, "o", "        return self._bases\r\n"]
[422.752667, "o", "\r\n"]
[422.783185, "o", "    @property\r\n"]
[422.813704, "o", "    def powers(self):\r\n"]
[422.844222, "o", "        \"\"\"\r\n"]
[422.874741, "o", "        Return the powers of the composite unit.\r\n"]
[422.905259, "o", "        \"\"\"\r\n"]
[422.935778, "o", "        return self._powers\r\n"]
[422.966296, "o", "\r\n"]
[422.996815, "o", "    def _expand_and_gather(self, decompose=False, bases=set()):\r\n"]
[423.027333, "o", "        def add_unit(unit, power, scale):\r\n"]
[423.057852, "o", "            if bases and unit not in bases:\r\n"]
[423.08837, "o", "                for base in bases:\r\n"]
[423.118889, "o", "                    try:\r\n"]
[423.149407, "o", "                        scale *= unit._to(base) ** power\r\n"]
[423.179926, "o", "                    except UnitsError:\r\n"]
[423.210444, "o", "                        pass\r\n"]
[423.240963, "o", "                    else:\r\n"]
[423.271481, "o", "                        unit = base\r\n"]
[423.302, "o", "                        break\r\n"]
[423.332519, "o", "\r\n"]
[423.363037, "o", "            if unit in new_parts:\r\n"]
[423.393556, "o", "                a, b = resolve_fractions(new_parts[unit], power)\r\n"]
[423.424074, "o", "                new_parts[unit] = a + b\r\n"]
[423.454593, "o", "            else:\r\n"]
[423.485111, "o", "                new_parts[unit] = power\r\n"]
[423.51563, "o", "            return scale\r\n"]
[423.546148, "o", "\r\n"]
[423.576667, "o", "        new_parts = {}\r\n"]
[423.607185, "o", "        scale = self._scale\r\n"]
[423.637704, "o", "\r\n"]
[423.668222, "o", "        for b, p in zip(self._bases, self._powers):\r\n"]
[423.698741, "o", "            if decompose and b not in bases:\r\n"]
[423.729259, "o", "                b = b.decompose(bases=bases)\r\n"]
[423.759778, "o", "\r\n"]
[423.790296, "o", "            if isinstance(b, CompositeUnit):\r\n"]
[423.820815, "o", "                scale *= b._scale**p\r\n"]
[423.851333, "o", "                for b_sub, p_sub in zip(b._bases, b._powers):\r\n"]
[423.881852, "o", "                    a, b = resolve_fractions(p_sub, p)\r\n"]
[423.91237, "o", "                    scale = add_unit(b_sub, a * b, scale)\r\n"]
[423.942889, "o", "            else:\r\n"]
[423.973407, "o", "                scale = add_unit(b, p, scale)\r\n"]
[424.003926, "o", "\r\n"]
[424.034444, "o", "        new_parts = [x for x in new_parts.items() if x[1] != 0]\r\n"]
[424.064963, "o", "        new_parts.sort(key=lambda x: (-x[1], getattr(x[0], \"name\", \"\")))\r\n"]
[424.095481, "o", "\r\n"]
[424.126, "o", "        self._bases = [x[0] for x in new_parts]\r\n"]
[424.156519, "o", "        self._powers = [sanitize_power(x[1]) for x in new_parts]\r\n"]
[424.187037, "o", "        self._scale = sanitize_scale(scale)\r\n"]
[424.217556, "o", "\r\n"]
[424.248074, "o", "    def __copy__(self):\r\n"]
[424.278593, "o", "        \"\"\"\r\n"]
[424.309111, "o", "        For compatibility with python copy module.\r\n"]
[424.33963, "o", "        \"\"\"\r\n"]
[424.370148, "o", "        return CompositeUnit(self._scale, self._bases[:], self._powers[:])\r\n"]
[424.400667, "o", "\r\n"]
[424.431185, "o", "    def decompose(self, bases=set()):\r\n"]
[424.461704, "o", "        if len(bases) == 0 and self._decomposed_cache is not None:\r\n"]
[424.492222, "o", "            return self._decomposed_cache\r\n"]
[424.522741, "o", "\r\n"]
[424.553259, "o", "        for base in self.bases:\r\n"]
[424.583778, "o", "            if not isinstance(base, IrreducibleUnit) or (\r\n"]
[424.614296, "o", "                len(bases) and base not in bases\r\n"]
[424.644815, "o", "            ):\r\n"]
[424.675333, "o", "                break\r\n"]
[424.705852, "o", "        else:\r\n"]
[424.73637, "o", "            if len(bases) == 0:\r\n"]
[424.766889, "o", "                self._decomposed_cache = self\r\n"]
[424.797407, "o", "            return self\r\n"]
[424.827926, "o", "\r\n"]
[424.858444, "o", "        x = CompositeUnit(\r\n"]
[424.888963, "o", "            self.scale, self.bases, self.powers, decompose=True, decompose_bases=bases\r\n"]
[424.919481, "o", "        )\r\n"]
[425.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[425.002, "i", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r"]
[425.004, "o", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r\n"]
[425.1605, "o", "reation_nocopy|units.time_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view|units.TimeQuanti\r\n"]
[425.315, "o", "ityOpLargeArraySameUnit.*|units.TimeQuantityOpLargeArrayDiffUnit.*\" --quick\r\n"]
[425.4695, "o", "\u001b[?2004l\r\n"]
[425.624, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[425.7785, "o", "\u00b7 \u001b[0;32mRunning 26 total benchmarks (1 commits * 1 environments * 26 benchmarks)\u001b[0m\r\n"]
[425.933, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[426.0875, "o", "[ 1.92%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_add\u001b[0m                                                                                  2.23\u00b10ms\r\n"]
[426.242, "o", "[ 3.85%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_equal\u001b[0m                                                                                2.14\u00b10ms\r\n"]
[426.3965, "o", "[ 5.77%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_mul\u001b[0m                                                                                  1.44\u00b10ms\r\n"]
[426.551, "o", "[ 7.69%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_add\u001b[0m                                                                               2.07\u00b10ms\r\n"]
[426.7055, "o", "[ 9.62%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_equal\u001b[0m                                                                             2.46\u00b10ms\r\n"]
[426.86, "o", "[11.54%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_multiply\u001b[0m                                                                          1.40\u00b10ms\r\n"]
[427.0145, "o", "[13.46%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_subtract\u001b[0m                                                                          2.31\u00b10ms\r\n"]
[427.169, "o", "[15.38%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_truediv\u001b[0m                                                                           1.28\u00b10ms\r\n"]
[427.3235, "o", "[17.31%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_sub\u001b[0m                                                                                  2.08\u00b10ms\r\n"]
[427.478, "o", "[19.23%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_truediv\u001b[0m                                                                              1.31\u00b10ms\r\n"]
[427.6325, "o", "[21.15%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_add\u001b[0m                                                                                  1.38\u00b10ms\r\n"]
[427.787, "o", "[23.08%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_equal\u001b[0m                                                                                1.03\u00b10ms\r\n"]
[427.9415, "o", "[25.00%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\u001b[0m                                                                                  1.30\u00b10ms\r\n"]
[428.096, "o", "[26.92%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_add\u001b[0m                                                                               1.41\u00b10ms\r\n"]
[428.2505, "o", "[28.85%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_equal\u001b[0m                                                                             1.15\u00b10ms\r\n"]
[428.405, "o", "[30.77%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_multiply\u001b[0m                                                                          1.48\u00b10ms\r\n"]
[428.5595, "o", "[32.69%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_subtract\u001b[0m                                                                          1.26\u00b10ms\r\n"]
[428.714, "o", "[34.62%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_truediv\u001b[0m                                                                           1.51\u00b10ms\r\n"]
[428.8685, "o", "[36.54%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_sub\u001b[0m                                                                                  1.34\u00b10ms\r\n"]
[429.023, "o", "[38.46%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_truediv\u001b[0m                                                                              1.49\u00b10ms\r\n"]
[429.1775, "o", "[40.38%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_array_conversion\u001b[0m                                                                                                      1.12\u00b10ms\r\n"]
[429.332, "o", "[42.31%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_creation_nocopy\u001b[0m                                                                                                        130\u00b10\u03bcs\r\n"]
[429.4865, "o", "[44.23%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_array\u001b[0m                                                                                                       272\u00b10\u03bcs\r\n"]
[429.641, "o", "[46.15%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_list\u001b[0m                                                                                                        288\u00b10\u03bcs\r\n"]
[429.7955, "o", "[48.08%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_times_unit\u001b[0m                                                                                                             513\u00b10\u03bcs\r\n"]
[430.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[430.002, "i", "asv profile --config asv.ci.conf.json --python=same units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\r"]
[430.004, "o", "asv profile --config asv.ci.conf.json --python=same units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\r\n"]
[430.080909, "o", "\u001b[?2004l\r\n"]
[430.155818, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[430.230727, "o", "\u00b7 \u001b[0;32mProfile data does not already exist. Running profiler now.\u001b[0m\r\n"]
[430.305636, "o", "\u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[430.380545, "o", "\u00b7\u00b7\u00b7 \u001b[0;39mRunning (units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul--)\u001b[0m.\r\n"]
[430.455455, "o", "\u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\u001b[0m                                                                                1.36\u00b10.1ms\r\n"]
[430.530364, "o", "\r\n"]
[430.605273, "o", "Wed Oct  1 12:12:44 2025    /tmp/tmpir0qualc\r\n"]
[430.680182, "o", "\r\n"]
[430.755091, "o", "         86 function calls in 0.002 seconds\r\n"]
[430.83, "o", "\r\n"]
[430.904909, "o", "   Ordered by: cumulative time\r\n"]
[430.979818, "o", "\r\n"]
[431.054727, "o", "   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\r\n"]
[431.129636, "o", "        1    0.000    0.000    0.002    0.002 {built-in method builtins.exec}\r\n"]
[431.204545, "o", "        1    0.000    0.000    0.002    0.002 _base.py:689(method_caller)\r\n"]
[431.279455, "o", "        1    0.000    0.000    0.002    0.002 units.py:181(time_quantity_mul)\r\n"]
[431.354364, "o", "        1    0.000    0.000    0.002    0.002 quantity.py:1209(__mul__)\r\n"]
[431.429273, "o", "        1    0.000    0.000    0.002    0.002 quantity.py:613(__array_ufunc__)\r\n"]
[431.504182, "o", "        1    0.001    0.001    0.001    0.001 {function Quantity.__array_ufunc__ at 0x7f9b7b118220}\r\n"]
[431.579091, "o", "        1    0.000    0.000    0.000    0.000 converters.py:141(converters_and_unit)\r\n"]
[431.654, "o", "        1    0.000    0.000    0.000    0.000 helpers.py:219(helper_multiplication)\r\n"]
[431.728909, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:694(_result_as_quantity)\r\n"]
[431.803818, "o", "        1    0.000    0.000    0.000    0.000 core.py:869(__mul__)\r\n"]
[431.878727, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:764(_new_view)\r\n"]
[431.953636, "o", "        1    0.000    0.000    0.000    0.000 core.py:2335(__init__)\r\n"]
[432.028545, "o", "        1    0.000    0.000    0.000    0.000 core.py:2416(_expand_and_gather)\r\n"]
[432.103455, "o", "        3    0.000    0.000    0.000    0.000 {method 'view' of 'numpy.ndarray' objects}\r\n"]
[432.178364, "o", "        2    0.000    0.000    0.000    0.000 quantity.py:574(__array_finalize__)\r\n"]
[432.253273, "o", "        2    0.000    0.000    0.000    0.000 core.py:2279(is_unity)\r\n"]
[432.328182, "o", "        1    0.000    0.000    0.000    0.000 core.py:2069(__call__)\r\n"]
[432.403091, "o", "        6    0.000    0.000    0.000    0.000 {built-in method builtins.getattr}\r\n"]
[432.478, "o", "        2    0.000    0.000    0.000    0.000 core.py:2484(is_unity)\r\n"]
[432.552909, "o", "        1    0.000    0.000    0.000    0.000 converters.py:178(<listcomp>)\r\n"]
[432.627818, "o", "        2    0.000    0.000    0.000    0.000 core.py:2417(add_unit)\r\n"]
[432.702727, "o", "        2    0.000    0.000    0.000    0.000 quantity.py:945(to_value)\r\n"]
[432.777636, "o", "        1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}\r\n"]
[432.852545, "o", "        1    0.000    0.000    0.000    0.000 utils.py:193(sanitize_scale)\r\n"]
[432.927455, "o", "        8    0.000    0.000    0.000    0.000 {built-in method builtins.isinstance}\r\n"]
[433.002364, "o", "        2    0.000    0.000    0.000    0.000 core.py:2463(decompose)\r\n"]
[433.077273, "o", "        1    0.000    0.000    0.000    0.000 core.py:2454(<listcomp>)\r\n"]
[433.152182, "o", "        1    0.000    0.000    0.000    0.000 core.py:2451(<lambda>)\r\n"]
[433.227091, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:836(_set_unit)\r\n"]
[433.302, "o", "        1    0.000    0.000    0.000    0.000 {built-in method builtins.any}\r\n"]
[433.376909, "o", "        1    0.000    0.000    0.000    0.000 core.py:2450(<listcomp>)\r\n"]
[433.451818, "o", "        3    0.000    0.000    0.000    0.000 quantity.py:1009(unit)\r\n"]
[433.526727, "o", "        1    0.000    0.000    0.000    0.000 {built-in method numpy.array}\r\n"]
[433.601636, "o", "        1    0.000    0.000    0.000    0.000 utils.py:181(is_effectively_unity)\r\n"]
[433.676545, "o", "        5    0.000    0.000    0.000    0.000 {built-in method builtins.len}\r\n"]
[433.751455, "o", "        1    0.000    0.000    0.000    0.000 utils.py:328(resolve_fractions)\r\n"]
[433.826364, "o", "        1    0.000    0.000    0.000    0.000 {built-in method builtins.hasattr}\r\n"]
[433.901273, "o", "        5    0.000    0.000    0.000    0.000 core.py:2282(__hash__)\r\n"]
[433.976182, "o", "        1    0.000    0.000    0.000    0.000 core.py:1874(name)\r\n"]
[434.051091, "o", "        3    0.000    0.000    0.000    0.000 converters.py:183(<genexpr>)\r\n"]
[434.126, "o", "        1    0.000    0.000    0.000    0.000 core.py:2453(<listcomp>)\r\n"]
[434.200909, "o", "        2    0.000    0.000    0.000    0.000 core.py:2402(bases)\r\n"]
[434.275818, "o", "        2    0.000    0.000    0.000    0.000 {function Quantity.__array_finalize__ at 0x7f9b7b1180e0}\r\n"]
[434.350727, "o", "        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}\r\n"]
[434.425636, "o", "        1    0.000    0.000    0.000    0.000 {method 'items' of 'dict' objects}\r\n"]
[434.500545, "o", "        2    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}\r\n"]
[434.575455, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:746(__quantity_subclass__)\r\n"]
[434.650364, "o", "        1    0.000    0.000    0.000    0.000 utils.py:288(sanitize_power)\r\n"]
[434.725273, "o", "        1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}\r\n"]
[434.800182, "o", "        2    0.000    0.000    0.000    0.000 helpers.py:31(_d)\r\n"]
[434.875091, "o", "\r\n"]
[435.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[435.002, "i", "grep -n \"def __mul__\" astropy/units/quantity.py\r"]
[435.004, "o", "grep -n \"def __mul__\" astropy/units/quantity.py\r\n"]
[437.478, "o", "\u001b[?2004l\r\n"]
[440.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[440.002, "i", "sed -n '1120,1300p' astropy/units/quantity.py\r"]
[440.004, "o", "sed -n '1120,1300p' astropy/units/quantity.py\r\n"]
[440.033165, "o", "\u001b[?2004l\r\n"]
[440.06033, "o", "\r\n"]
[440.087495, "o", "        value = get_virtual_unit_attribute()\r\n"]
[440.114659, "o", "\r\n"]
[440.141824, "o", "        if value is None:\r\n"]
[440.168989, "o", "            raise AttributeError(\r\n"]
[440.196154, "o", "                f\"{self.__class__.__name__} instance has no attribute '{attr}'\"\r\n"]
[440.223319, "o", "            )\r\n"]
[440.250484, "o", "        else:\r\n"]
[440.277648, "o", "            return value\r\n"]
[440.304813, "o", "\r\n"]
[440.331978, "o", "    # Equality needs to be handled explicitly as ndarray.__eq__ gives\r\n"]
[440.359143, "o", "    # DeprecationWarnings on any error, which is distracting, and does not\r\n"]
[440.386308, "o", "    # deal well with structured arrays (nor does the ufunc).\r\n"]
[440.413473, "o", "    def __eq__(self, other):\r\n"]
[440.440637, "o", "        try:\r\n"]
[440.467802, "o", "            other_value = self._to_own_unit(other)\r\n"]
[440.494967, "o", "        except UnitsError:\r\n"]
[440.522132, "o", "            return False\r\n"]
[440.549297, "o", "        except Exception:\r\n"]
[440.576462, "o", "            return NotImplemented\r\n"]
[440.603626, "o", "        return self.value.__eq__(other_value)\r\n"]
[440.630791, "o", "\r\n"]
[440.657956, "o", "    def __ne__(self, other):\r\n"]
[440.685121, "o", "        try:\r\n"]
[440.712286, "o", "            other_value = self._to_own_unit(other)\r\n"]
[440.739451, "o", "        except UnitsError:\r\n"]
[440.766615, "o", "            return True\r\n"]
[440.79378, "o", "        except Exception:\r\n"]
[440.820945, "o", "            return NotImplemented\r\n"]
[440.84811, "o", "        return self.value.__ne__(other_value)\r\n"]
[440.875275, "o", "\r\n"]
[440.90244, "o", "    # Unit conversion operator (<<).\r\n"]
[440.929604, "o", "    def __lshift__(self, other):\r\n"]
[440.956769, "o", "        try:\r\n"]
[440.983934, "o", "            other = Unit(other, parse_strict=\"silent\")\r\n"]
[441.011099, "o", "        except UnitTypeError:\r\n"]
[441.038264, "o", "            return NotImplemented\r\n"]
[441.065429, "o", "\r\n"]
[441.092593, "o", "        return self.__class__(self, other, copy=False, subok=True)\r\n"]
[441.119758, "o", "\r\n"]
[441.146923, "o", "    def __ilshift__(self, other):\r\n"]
[441.174088, "o", "        try:\r\n"]
[441.201253, "o", "            other = Unit(other, parse_strict=\"silent\")\r\n"]
[441.228418, "o", "        except UnitTypeError:\r\n"]
[441.255582, "o", "            return NotImplemented  # try other.__rlshift__(self)\r\n"]
[441.282747, "o", "\r\n"]
[441.309912, "o", "        try:\r\n"]
[441.337077, "o", "            factor = self.unit._to(other)\r\n"]
[441.364242, "o", "        except UnitConversionError:  # incompatible, or requires an Equivalency\r\n"]
[441.391407, "o", "            return NotImplemented\r\n"]
[441.418571, "o", "        except AttributeError:  # StructuredUnit does not have `_to`\r\n"]
[441.445736, "o", "            # In principle, in-place might be possible.\r\n"]
[441.472901, "o", "            return NotImplemented\r\n"]
[441.500066, "o", "\r\n"]
[441.527231, "o", "        view = self.view(np.ndarray)\r\n"]
[441.554396, "o", "        try:\r\n"]
[441.58156, "o", "            view *= factor  # operates on view\r\n"]
[441.608725, "o", "        except TypeError:\r\n"]
[441.63589, "o", "            # The error is `numpy.core._exceptions._UFuncOutputCastingError`,\r\n"]
[441.663055, "o", "            # which inherits from `TypeError`.\r\n"]
[441.69022, "o", "            return NotImplemented\r\n"]
[441.717385, "o", "\r\n"]
[441.744549, "o", "        self._set_unit(other)\r\n"]
[441.771714, "o", "        return self\r\n"]
[441.798879, "o", "\r\n"]
[441.826044, "o", "    def __rlshift__(self, other):\r\n"]
[441.853209, "o", "        if not self.isscalar:\r\n"]
[441.880374, "o", "            return NotImplemented\r\n"]
[441.907538, "o", "        return Unit(self).__rlshift__(other)\r\n"]
[441.934703, "o", "\r\n"]
[441.961868, "o", "    # Give warning for other >> self, since probably other << self was meant.\r\n"]
[441.989033, "o", "    def __rrshift__(self, other):\r\n"]
[442.016198, "o", "        warnings.warn(\r\n"]
[442.043363, "o", "            \">> is not implemented. Did you mean to convert \"\r\n"]
[442.070527, "o", "            \"something to this quantity as a unit using '<<'?\",\r\n"]
[442.097692, "o", "            AstropyWarning,\r\n"]
[442.124857, "o", "        )\r\n"]
[442.152022, "o", "        return NotImplemented\r\n"]
[442.179187, "o", "\r\n"]
[442.206352, "o", "    # Also define __rshift__ and __irshift__ so we override default ndarray\r\n"]
[442.233516, "o", "    # behaviour, but instead of emitting a warning here, let it be done by\r\n"]
[442.260681, "o", "    # other (which likely is a unit if this was a mistake).\r\n"]
[442.287846, "o", "    def __rshift__(self, other):\r\n"]
[442.315011, "o", "        return NotImplemented\r\n"]
[442.342176, "o", "\r\n"]
[442.369341, "o", "    def __irshift__(self, other):\r\n"]
[442.396505, "o", "        return NotImplemented\r\n"]
[442.42367, "o", "\r\n"]
[442.450835, "o", "    # Arithmetic operations\r\n"]
[442.478, "o", "    def __mul__(self, other):\r\n"]
[442.505165, "o", "        \"\"\"Multiplication between `Quantity` objects and other objects.\"\"\"\r\n"]
[442.53233, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[442.559495, "o", "            try:\r\n"]
[442.586659, "o", "                return self._new_view(\r\n"]
[442.613824, "o", "                    self.value.copy(), other * self.unit, propagate_info=False\r\n"]
[442.640989, "o", "                )\r\n"]
[442.668154, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[442.695319, "o", "                return NotImplemented\r\n"]
[442.722484, "o", "\r\n"]
[442.749648, "o", "        return super().__mul__(other)\r\n"]
[442.776813, "o", "\r\n"]
[442.803978, "o", "    def __imul__(self, other):\r\n"]
[442.831143, "o", "        \"\"\"In-place multiplication between `Quantity` objects and others.\"\"\"\r\n"]
[442.858308, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[442.885473, "o", "            self._set_unit(other * self.unit)\r\n"]
[442.912637, "o", "            return self\r\n"]
[442.939802, "o", "\r\n"]
[442.966967, "o", "        return super().__imul__(other)\r\n"]
[442.994132, "o", "\r\n"]
[443.021297, "o", "    def __rmul__(self, other):\r\n"]
[443.048462, "o", "        \"\"\"\r\n"]
[443.075626, "o", "        Right Multiplication between `Quantity` objects and other objects.\r\n"]
[443.102791, "o", "        \"\"\"\r\n"]
[443.129956, "o", "        return self.__mul__(other)\r\n"]
[443.157121, "o", "\r\n"]
[443.184286, "o", "    def __truediv__(self, other):\r\n"]
[443.211451, "o", "        \"\"\"Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[443.238615, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[443.26578, "o", "            try:\r\n"]
[443.292945, "o", "                return self._new_view(\r\n"]
[443.32011, "o", "                    self.value.copy(), self.unit / other, propagate_info=False\r\n"]
[443.347275, "o", "                )\r\n"]
[443.37444, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[443.401604, "o", "                return NotImplemented\r\n"]
[443.428769, "o", "\r\n"]
[443.455934, "o", "        return super().__truediv__(other)\r\n"]
[443.483099, "o", "\r\n"]
[443.510264, "o", "    def __itruediv__(self, other):\r\n"]
[443.537429, "o", "        \"\"\"Inplace division between `Quantity` objects and other objects.\"\"\"\r\n"]
[443.564593, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[443.591758, "o", "            self._set_unit(self.unit / other)\r\n"]
[443.618923, "o", "            return self\r\n"]
[443.646088, "o", "\r\n"]
[443.673253, "o", "        return super().__itruediv__(other)\r\n"]
[443.700418, "o", "\r\n"]
[443.727582, "o", "    def __rtruediv__(self, other):\r\n"]
[443.754747, "o", "        \"\"\"Right Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[443.781912, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[443.809077, "o", "            return self._new_view(\r\n"]
[443.836242, "o", "                1.0 / self.value, other / self.unit, propagate_info=False\r\n"]
[443.863407, "o", "            )\r\n"]
[443.890571, "o", "\r\n"]
[443.917736, "o", "        return super().__rtruediv__(other)\r\n"]
[443.944901, "o", "\r\n"]
[443.972066, "o", "    def __pow__(self, other):\r\n"]
[443.999231, "o", "        if isinstance(other, Fraction):\r\n"]
[444.026396, "o", "            # Avoid getting object arrays by raising the value to a Fraction.\r\n"]
[444.05356, "o", "            return self._new_view(\r\n"]
[444.080725, "o", "                self.value ** float(other), self.unit**other, propagate_info=False\r\n"]
[444.10789, "o", "            )\r\n"]
[444.135055, "o", "\r\n"]
[444.16222, "o", "        return super().__pow__(other)\r\n"]
[444.189385, "o", "\r\n"]
[444.216549, "o", "    # other overrides of special functions\r\n"]
[444.243714, "o", "    def __hash__(self):\r\n"]
[444.270879, "o", "        return hash(self.value) ^ hash(self.unit)\r\n"]
[444.298044, "o", "\r\n"]
[444.325209, "o", "    def __iter__(self):\r\n"]
[444.352374, "o", "        if self.isscalar:\r\n"]
[444.379538, "o", "            raise TypeError(\r\n"]
[444.406703, "o", "                f\"'{self.__class__.__name__}' object with a scalar value is not\"\r\n"]
[444.433868, "o", "                \" iterable\"\r\n"]
[444.461033, "o", "            )\r\n"]
[444.488198, "o", "\r\n"]
[444.515363, "o", "        # Otherwise return a generator\r\n"]
[444.542527, "o", "        def quantity_iter():\r\n"]
[444.569692, "o", "            for val in self.value:\r\n"]
[444.596857, "o", "                yield self._new_view(val)\r\n"]
[444.624022, "o", "\r\n"]
[444.651187, "o", "        return quantity_iter()\r\n"]
[444.678352, "o", "\r\n"]
[444.705516, "o", "    def __getitem__(self, key):\r\n"]
[444.732681, "o", "        if isinstance(key, str) and isinstance(self.unit, StructuredUnit):\r\n"]
[444.759846, "o", "            return self._new_view(\r\n"]
[444.787011, "o", "                self.view(np.ndarray)[key], self.unit[key], propagate_info=False\r\n"]
[444.814176, "o", "            )\r\n"]
[444.841341, "o", "\r\n"]
[444.868505, "o", "        try:\r\n"]
[444.89567, "o", "            out = super().__getitem__(key)\r\n"]
[444.922835, "o", "        except IndexError:\r\n"]
[445.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[445.002, "i", "grep -n \"def _new_view\" astropy/units/quantity.py\r"]
[445.004, "o", "grep -n \"def _new_view\" astropy/units/quantity.py\r\n"]
[447.478, "o", "\u001b[?2004l\r\n"]
[450.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[450.002, "i", "sed -n '700,820p' astropy/units/quantity.py\r"]
[450.004, "o", "sed -n '700,820p' astropy/units/quantity.py\r\n"]
[450.046525, "o", "\u001b[?2004l\r\n"]
[450.087049, "o", "\r\n"]
[450.127574, "o", "        Parameters\r\n"]
[450.168098, "o", "        ----------\r\n"]
[450.208623, "o", "        result : ndarray or tuple thereof\r\n"]
[450.249148, "o", "            Array(s) which need to be turned into quantity.\r\n"]
[450.289672, "o", "        unit : `~astropy.units.Unit`\r\n"]
[450.330197, "o", "            Unit for the quantities to be returned (or `None` if the result\r\n"]
[450.370721, "o", "            should not be a quantity).  Should be tuple if result is a tuple.\r\n"]
[450.411246, "o", "        out : `~astropy.units.Quantity` or None\r\n"]
[450.45177, "o", "            Possible output quantity. Should be `None` or a tuple if result\r\n"]
[450.492295, "o", "            is a tuple.\r\n"]
[450.53282, "o", "\r\n"]
[450.573344, "o", "        Returns\r\n"]
[450.613869, "o", "        -------\r\n"]
[450.654393, "o", "        out : `~astropy.units.Quantity`\r\n"]
[450.694918, "o", "           With units set.\r\n"]
[450.735443, "o", "        \"\"\"\r\n"]
[450.775967, "o", "        if isinstance(result, (tuple, list)):\r\n"]
[450.816492, "o", "            if out is None:\r\n"]
[450.857016, "o", "                out = (None,) * len(result)\r\n"]
[450.897541, "o", "            # Some np.linalg functions return namedtuple, which is handy to access\r\n"]
[450.938066, "o", "            # elements by name, but cannot be directly initialized with an iterator.\r\n"]
[450.97859, "o", "            result_cls = getattr(result, \"_make\", result.__class__)\r\n"]
[451.019115, "o", "            return result_cls(\r\n"]
[451.059639, "o", "                self._result_as_quantity(result_, unit_, out_)\r\n"]
[451.100164, "o", "                for (result_, unit_, out_) in zip(result, unit, out)\r\n"]
[451.140689, "o", "            )\r\n"]
[451.181213, "o", "\r\n"]
[451.221738, "o", "        if out is None:\r\n"]
[451.262262, "o", "            # View the result array as a Quantity with the proper unit.\r\n"]
[451.302787, "o", "            return (\r\n"]
[451.343311, "o", "                result\r\n"]
[451.383836, "o", "                if unit is None\r\n"]
[451.424361, "o", "                else self._new_view(result, unit, propagate_info=False)\r\n"]
[451.464885, "o", "            )\r\n"]
[451.50541, "o", "\r\n"]
[451.545934, "o", "        elif isinstance(out, Quantity):\r\n"]
[451.586459, "o", "            # For given Quantity output, just set the unit. We know the unit\r\n"]
[451.626984, "o", "            # is not None and the output is of the correct Quantity subclass,\r\n"]
[451.667508, "o", "            # as it was passed through check_output.\r\n"]
[451.708033, "o", "            # (We cannot do this unconditionally, though, since it is possible\r\n"]
[451.748557, "o", "            # for out to be ndarray and the unit to be dimensionless.)\r\n"]
[451.789082, "o", "            out._set_unit(unit)\r\n"]
[451.829607, "o", "\r\n"]
[451.870131, "o", "        return out\r\n"]
[451.910656, "o", "\r\n"]
[451.95118, "o", "    def __quantity_subclass__(self, unit):\r\n"]
[451.991705, "o", "        \"\"\"\r\n"]
[452.03223, "o", "        Overridden by subclasses to change what kind of view is\r\n"]
[452.072754, "o", "        created based on the output unit of an operation.\r\n"]
[452.113279, "o", "\r\n"]
[452.153803, "o", "        Parameters\r\n"]
[452.194328, "o", "        ----------\r\n"]
[452.234852, "o", "        unit : UnitBase\r\n"]
[452.275377, "o", "            The unit for which the appropriate class should be returned\r\n"]
[452.315902, "o", "\r\n"]
[452.356426, "o", "        Returns\r\n"]
[452.396951, "o", "        -------\r\n"]
[452.437475, "o", "        tuple :\r\n"]
[452.478, "o", "            - `~astropy.units.Quantity` subclass\r\n"]
[452.518525, "o", "            - bool: True if subclasses of the given class are ok\r\n"]
[452.559049, "o", "        \"\"\"\r\n"]
[452.599574, "o", "        return Quantity, True\r\n"]
[452.640098, "o", "\r\n"]
[452.680623, "o", "    def _new_view(self, obj=None, unit=None, propagate_info=True):\r\n"]
[452.721148, "o", "        \"\"\"Create a Quantity view of some array-like input, and set the unit.\r\n"]
[452.761672, "o", "\r\n"]
[452.802197, "o", "        By default, return a view of ``obj`` of the same class as ``self`` and\r\n"]
[452.842721, "o", "        with the same unit.  Subclasses can override the type of class for a\r\n"]
[452.883246, "o", "        given unit using ``__quantity_subclass__``, and can ensure properties\r\n"]
[452.92377, "o", "        other than the unit are copied using ``__array_finalize__``.\r\n"]
[452.964295, "o", "\r\n"]
[453.00482, "o", "        If the given unit defines a ``_quantity_class`` of which ``self``\r\n"]
[453.045344, "o", "        is not an instance, a view using this class is taken.\r\n"]
[453.085869, "o", "\r\n"]
[453.126393, "o", "        Parameters\r\n"]
[453.166918, "o", "        ----------\r\n"]
[453.207443, "o", "        obj : ndarray or scalar, optional\r\n"]
[453.247967, "o", "            The array to create a view of.  If obj is a numpy or python scalar,\r\n"]
[453.288492, "o", "            it will be converted to an array scalar.  By default, ``self``\r\n"]
[453.329016, "o", "            is converted.\r\n"]
[453.369541, "o", "\r\n"]
[453.410066, "o", "        unit : unit-like, optional\r\n"]
[453.45059, "o", "            The unit of the resulting object.  It is used to select a\r\n"]
[453.491115, "o", "            subclass, and explicitly assigned to the view if given.\r\n"]
[453.531639, "o", "            If not given, the subclass and unit will be that of ``self``.\r\n"]
[453.572164, "o", "\r\n"]
[453.612689, "o", "        propagate_info : bool, optional\r\n"]
[453.653213, "o", "            Whether to transfer ``info`` if present.  Default: `True`, as\r\n"]
[453.693738, "o", "            appropriate for, e.g., unit conversions or slicing, where the\r\n"]
[453.734262, "o", "            nature of the object does not change.\r\n"]
[453.774787, "o", "\r\n"]
[453.815311, "o", "        Returns\r\n"]
[453.855836, "o", "        -------\r\n"]
[453.896361, "o", "        view : `~astropy.units.Quantity` subclass\r\n"]
[453.936885, "o", "\r\n"]
[453.97741, "o", "        \"\"\"\r\n"]
[454.017934, "o", "        # Determine the unit and quantity subclass that we need for the view.\r\n"]
[454.058459, "o", "        if unit is None:\r\n"]
[454.098984, "o", "            unit = self.unit\r\n"]
[454.139508, "o", "            quantity_subclass = self.__class__\r\n"]
[454.180033, "o", "        elif unit is self.unit and self.__class__ is Quantity:\r\n"]
[454.220557, "o", "            # The second part is because we should not presume what other\r\n"]
[454.261082, "o", "            # classes want to do for the same unit.  E.g., Constant will\r\n"]
[454.301607, "o", "            # always want to fall back to Quantity, and relies on going\r\n"]
[454.342131, "o", "            # through `__quantity_subclass__`.\r\n"]
[454.382656, "o", "            quantity_subclass = Quantity\r\n"]
[454.42318, "o", "        else:\r\n"]
[454.463705, "o", "            unit = Unit(unit)\r\n"]
[454.50423, "o", "            quantity_subclass = getattr(unit, \"_quantity_class\", Quantity)\r\n"]
[454.544754, "o", "            if isinstance(self, quantity_subclass):\r\n"]
[454.585279, "o", "                quantity_subclass, subok = self.__quantity_subclass__(unit)\r\n"]
[454.625803, "o", "                if subok:\r\n"]
[454.666328, "o", "                    quantity_subclass = self.__class__\r\n"]
[454.706852, "o", "\r\n"]
[454.747377, "o", "        # We only want to propagate information from ``self`` to our new view,\r\n"]
[454.787902, "o", "        # so obj should be a regular array.  By using ``np.array``, we also\r\n"]
[454.828426, "o", "        # convert python and numpy scalars, which cannot be viewed as arrays\r\n"]
[454.868951, "o", "        # and thus not as Quantity either, to zero-dimensional arrays.\r\n"]
[454.909475, "o", "        # (These are turned back into scalar in `.value`)\r\n"]
[455.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[455.002, "i", "grep -n \"class CompositeUnit\" astropy/units/core.py\r"]
[455.004, "o", "grep -n \"class CompositeUnit\" astropy/units/core.py\r\n"]
[457.478, "o", "\u001b[?2004l\r\n"]
[460.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[460.002, "i", "sed -n '2320,2480p' astropy/units/core.py\r"]
[460.004, "o", "sed -n '2320,2480p' astropy/units/core.py\r\n"]
[460.036519, "o", "\u001b[?2004l\r\n"]
[460.067037, "o", "    Parameters\r\n"]
[460.097556, "o", "    ----------\r\n"]
[460.128074, "o", "    scale : number\r\n"]
[460.158593, "o", "        A scaling factor for the unit.\r\n"]
[460.189111, "o", "\r\n"]
[460.21963, "o", "    bases : sequence of `UnitBase`\r\n"]
[460.250148, "o", "        A sequence of units this unit is composed of.\r\n"]
[460.280667, "o", "\r\n"]
[460.311185, "o", "    powers : sequence of numbers\r\n"]
[460.341704, "o", "        A sequence of powers (in parallel with ``bases``) for each\r\n"]
[460.372222, "o", "        of the base units.\r\n"]
[460.402741, "o", "    \"\"\"\r\n"]
[460.433259, "o", "\r\n"]
[460.463778, "o", "    _decomposed_cache = None\r\n"]
[460.494296, "o", "\r\n"]
[460.524815, "o", "    def __init__(\r\n"]
[460.555333, "o", "        self,\r\n"]
[460.585852, "o", "        scale,\r\n"]
[460.61637, "o", "        bases,\r\n"]
[460.646889, "o", "        powers,\r\n"]
[460.677407, "o", "        decompose=False,\r\n"]
[460.707926, "o", "        decompose_bases=set(),\r\n"]
[460.738444, "o", "        _error_check=True,\r\n"]
[460.768963, "o", "    ):\r\n"]
[460.799481, "o", "        # There are many cases internal to astropy.units where we\r\n"]
[460.83, "o", "        # already know that all the bases are Unit objects, and the\r\n"]
[460.860519, "o", "        # powers have been validated.  In those cases, we can skip the\r\n"]
[460.891037, "o", "        # error checking for performance reasons.  When the private\r\n"]
[460.921556, "o", "        # kwarg `_error_check` is False, the error checking is turned\r\n"]
[460.952074, "o", "        # off.\r\n"]
[460.982593, "o", "        if _error_check:\r\n"]
[461.013111, "o", "            for base in bases:\r\n"]
[461.04363, "o", "                if not isinstance(base, UnitBase):\r\n"]
[461.074148, "o", "                    raise TypeError(\"bases must be sequence of UnitBase instances\")\r\n"]
[461.104667, "o", "            powers = [validate_power(p) for p in powers]\r\n"]
[461.135185, "o", "\r\n"]
[461.165704, "o", "        if not decompose and len(bases) == 1 and powers[0] >= 0:\r\n"]
[461.196222, "o", "            # Short-cut; with one unit there's nothing to expand and gather,\r\n"]
[461.226741, "o", "            # as that has happened already when creating the unit.  But do only\r\n"]
[461.257259, "o", "            # positive powers, since for negative powers we need to re-sort.\r\n"]
[461.287778, "o", "            unit = bases[0]\r\n"]
[461.318296, "o", "            power = powers[0]\r\n"]
[461.348815, "o", "            if power == 1:\r\n"]
[461.379333, "o", "                scale *= unit.scale\r\n"]
[461.409852, "o", "                self._bases = unit.bases\r\n"]
[461.44037, "o", "                self._powers = unit.powers\r\n"]
[461.470889, "o", "            elif power == 0:\r\n"]
[461.501407, "o", "                self._bases = []\r\n"]
[461.531926, "o", "                self._powers = []\r\n"]
[461.562444, "o", "            else:\r\n"]
[461.592963, "o", "                scale *= unit.scale**power\r\n"]
[461.623481, "o", "                self._bases = unit.bases\r\n"]
[461.654, "o", "                self._powers = [\r\n"]
[461.684519, "o", "                    sanitize_power(operator.mul(*resolve_fractions(p, power)))\r\n"]
[461.715037, "o", "                    for p in unit.powers\r\n"]
[461.745556, "o", "                ]\r\n"]
[461.776074, "o", "\r\n"]
[461.806593, "o", "            self._scale = sanitize_scale(scale)\r\n"]
[461.837111, "o", "        else:\r\n"]
[461.86763, "o", "            # Regular case: use inputs as preliminary scale, bases, and powers,\r\n"]
[461.898148, "o", "            # then \"expand and gather\" identical bases, sanitize the scale, &c.\r\n"]
[461.928667, "o", "            self._scale = scale\r\n"]
[461.959185, "o", "            self._bases = bases\r\n"]
[461.989704, "o", "            self._powers = powers\r\n"]
[462.020222, "o", "            self._expand_and_gather(decompose=decompose, bases=decompose_bases)\r\n"]
[462.050741, "o", "\r\n"]
[462.081259, "o", "    def __repr__(self):\r\n"]
[462.111778, "o", "        if len(self._bases):\r\n"]
[462.142296, "o", "            return super().__repr__()\r\n"]
[462.172815, "o", "        else:\r\n"]
[462.203333, "o", "            if self._scale != 1.0:\r\n"]
[462.233852, "o", "                return f\"Unit(dimensionless with a scale of {self._scale})\"\r\n"]
[462.26437, "o", "            else:\r\n"]
[462.294889, "o", "                return \"Unit(dimensionless)\"\r\n"]
[462.325407, "o", "\r\n"]
[462.355926, "o", "    @property\r\n"]
[462.386444, "o", "    def scale(self):\r\n"]
[462.416963, "o", "        \"\"\"\r\n"]
[462.447481, "o", "        Return the scale of the composite unit.\r\n"]
[462.478, "o", "        \"\"\"\r\n"]
[462.508519, "o", "        return self._scale\r\n"]
[462.539037, "o", "\r\n"]
[462.569556, "o", "    @property\r\n"]
[462.600074, "o", "    def bases(self):\r\n"]
[462.630593, "o", "        \"\"\"\r\n"]
[462.661111, "o", "        Return the bases of the composite unit.\r\n"]
[462.69163, "o", "        \"\"\"\r\n"]
[462.722148, "o", "        return self._bases\r\n"]
[462.752667, "o", "\r\n"]
[462.783185, "o", "    @property\r\n"]
[462.813704, "o", "    def powers(self):\r\n"]
[462.844222, "o", "        \"\"\"\r\n"]
[462.874741, "o", "        Return the powers of the composite unit.\r\n"]
[462.905259, "o", "        \"\"\"\r\n"]
[462.935778, "o", "        return self._powers\r\n"]
[462.966296, "o", "\r\n"]
[462.996815, "o", "    def _expand_and_gather(self, decompose=False, bases=set()):\r\n"]
[463.027333, "o", "        def add_unit(unit, power, scale):\r\n"]
[463.057852, "o", "            if bases and unit not in bases:\r\n"]
[463.08837, "o", "                for base in bases:\r\n"]
[463.118889, "o", "                    try:\r\n"]
[463.149407, "o", "                        scale *= unit._to(base) ** power\r\n"]
[463.179926, "o", "                    except UnitsError:\r\n"]
[463.210444, "o", "                        pass\r\n"]
[463.240963, "o", "                    else:\r\n"]
[463.271481, "o", "                        unit = base\r\n"]
[463.302, "o", "                        break\r\n"]
[463.332519, "o", "\r\n"]
[463.363037, "o", "            if unit in new_parts:\r\n"]
[463.393556, "o", "                a, b = resolve_fractions(new_parts[unit], power)\r\n"]
[463.424074, "o", "                new_parts[unit] = a + b\r\n"]
[463.454593, "o", "            else:\r\n"]
[463.485111, "o", "                new_parts[unit] = power\r\n"]
[463.51563, "o", "            return scale\r\n"]
[463.546148, "o", "\r\n"]
[463.576667, "o", "        new_parts = {}\r\n"]
[463.607185, "o", "        scale = self._scale\r\n"]
[463.637704, "o", "\r\n"]
[463.668222, "o", "        for b, p in zip(self._bases, self._powers):\r\n"]
[463.698741, "o", "            if decompose and b not in bases:\r\n"]
[463.729259, "o", "                b = b.decompose(bases=bases)\r\n"]
[463.759778, "o", "\r\n"]
[463.790296, "o", "            if isinstance(b, CompositeUnit):\r\n"]
[463.820815, "o", "                scale *= b._scale**p\r\n"]
[463.851333, "o", "                for b_sub, p_sub in zip(b._bases, b._powers):\r\n"]
[463.881852, "o", "                    a, b = resolve_fractions(p_sub, p)\r\n"]
[463.91237, "o", "                    scale = add_unit(b_sub, a * b, scale)\r\n"]
[463.942889, "o", "            else:\r\n"]
[463.973407, "o", "                scale = add_unit(b, p, scale)\r\n"]
[464.003926, "o", "\r\n"]
[464.034444, "o", "        new_parts = [x for x in new_parts.items() if x[1] != 0]\r\n"]
[464.064963, "o", "        new_parts.sort(key=lambda x: (-x[1], getattr(x[0], \"name\", \"\")))\r\n"]
[464.095481, "o", "\r\n"]
[464.126, "o", "        self._bases = [x[0] for x in new_parts]\r\n"]
[464.156519, "o", "        self._powers = [sanitize_power(x[1]) for x in new_parts]\r\n"]
[464.187037, "o", "        self._scale = sanitize_scale(scale)\r\n"]
[464.217556, "o", "\r\n"]
[464.248074, "o", "    def __copy__(self):\r\n"]
[464.278593, "o", "        \"\"\"\r\n"]
[464.309111, "o", "        For compatibility with python copy module.\r\n"]
[464.33963, "o", "        \"\"\"\r\n"]
[464.370148, "o", "        return CompositeUnit(self._scale, self._bases[:], self._powers[:])\r\n"]
[464.400667, "o", "\r\n"]
[464.431185, "o", "    def decompose(self, bases=set()):\r\n"]
[464.461704, "o", "        if len(bases) == 0 and self._decomposed_cache is not None:\r\n"]
[464.492222, "o", "            return self._decomposed_cache\r\n"]
[464.522741, "o", "\r\n"]
[464.553259, "o", "        for base in self.bases:\r\n"]
[464.583778, "o", "            if not isinstance(base, IrreducibleUnit) or (\r\n"]
[464.614296, "o", "                len(bases) and base not in bases\r\n"]
[464.644815, "o", "            ):\r\n"]
[464.675333, "o", "                break\r\n"]
[464.705852, "o", "        else:\r\n"]
[464.73637, "o", "            if len(bases) == 0:\r\n"]
[464.766889, "o", "                self._decomposed_cache = self\r\n"]
[464.797407, "o", "            return self\r\n"]
[464.827926, "o", "\r\n"]
[464.858444, "o", "        x = CompositeUnit(\r\n"]
[464.888963, "o", "            self.scale, self.bases, self.powers, decompose=True, decompose_bases=bases\r\n"]
[464.919481, "o", "        )\r\n"]
[465.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[465.002, "i", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r"]
[465.004, "o", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r\n"]
[465.1605, "o", "reation_nocopy|units.time_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view|units.TimeQuanti\r\n"]
[465.315, "o", "ityOpLargeArraySameUnit.*|units.TimeQuantityOpLargeArrayDiffUnit.*\" --quick\r\n"]
[465.4695, "o", "\u001b[?2004l\r\n"]
[465.624, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[465.7785, "o", "\u00b7 \u001b[0;32mRunning 26 total benchmarks (1 commits * 1 environments * 26 benchmarks)\u001b[0m\r\n"]
[465.933, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[466.0875, "o", "[ 1.92%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_add\u001b[0m                                                                                  3.40\u00b10ms\r\n"]
[466.242, "o", "[ 3.85%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_equal\u001b[0m                                                                                2.38\u00b10ms\r\n"]
[466.3965, "o", "[ 5.77%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_mul\u001b[0m                                                                                  1.40\u00b10ms\r\n"]
[466.551, "o", "[ 7.69%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_add\u001b[0m                                                                               2.42\u00b10ms\r\n"]
[466.7055, "o", "[ 9.62%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_equal\u001b[0m                                                                             2.46\u00b10ms\r\n"]
[466.86, "o", "[11.54%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_multiply\u001b[0m                                                                          1.44\u00b10ms\r\n"]
[467.0145, "o", "[13.46%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_subtract\u001b[0m                                                                          3.81\u00b10ms\r\n"]
[467.169, "o", "[15.38%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_truediv\u001b[0m                                                                           1.54\u00b10ms\r\n"]
[467.3235, "o", "[17.31%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_sub\u001b[0m                                                                                  3.54\u00b10ms\r\n"]
[467.478, "o", "[19.23%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_truediv\u001b[0m                                                                              1.76\u00b10ms\r\n"]
[467.6325, "o", "[21.15%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_add\u001b[0m                                                                                  1.71\u00b10ms\r\n"]
[467.787, "o", "[23.08%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_equal\u001b[0m                                                                                1.28\u00b10ms\r\n"]
[467.9415, "o", "[25.00%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\u001b[0m                                                                                  1.74\u00b10ms\r\n"]
[468.096, "o", "[26.92%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_add\u001b[0m                                                                               1.70\u00b10ms\r\n"]
[468.2505, "o", "[28.85%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_equal\u001b[0m                                                                             1.27\u00b10ms\r\n"]
[468.405, "o", "[30.77%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_multiply\u001b[0m                                                                          2.49\u00b10ms\r\n"]
[468.5595, "o", "[32.69%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_subtract\u001b[0m                                                                          2.05\u00b10ms\r\n"]
[468.714, "o", "[34.62%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_truediv\u001b[0m                                                                           3.04\u00b10ms\r\n"]
[468.8685, "o", "[36.54%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_sub\u001b[0m                                                                                  2.38\u00b10ms\r\n"]
[469.023, "o", "[38.46%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_truediv\u001b[0m                                                                              4.11\u00b10ms\r\n"]
[469.1775, "o", "[40.38%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_array_conversion\u001b[0m                                                                                                      1.36\u00b10ms\r\n"]
[469.332, "o", "[42.31%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_creation_nocopy\u001b[0m                                                                                                        147\u00b10\u03bcs\r\n"]
[469.4865, "o", "[44.23%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_array\u001b[0m                                                                                                       343\u00b10\u03bcs\r\n"]
[469.641, "o", "[46.15%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_list\u001b[0m                                                                                                        330\u00b10\u03bcs\r\n"]
[469.7955, "o", "[48.08%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_times_unit\u001b[0m                                                                                                             635\u00b10\u03bcs\r\n"]
[470.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[470.002, "i", "asv profile --config asv.ci.conf.json --python=same units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\r"]
[470.004, "o", "asv profile --config asv.ci.conf.json --python=same units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\r\n"]
[470.080909, "o", "\u001b[?2004l\r\n"]
[470.155818, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[470.230727, "o", "\u00b7 \u001b[0;32mProfile data does not already exist. Running profiler now.\u001b[0m\r\n"]
[470.305636, "o", "\u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[470.380545, "o", "\u00b7\u00b7\u00b7 \u001b[0;39mRunning (units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul--)\u001b[0m.\r\n"]
[470.455455, "o", "\u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\u001b[0m                                                                                1.41\u00b10.4ms\r\n"]
[470.530364, "o", "\r\n"]
[470.605273, "o", "Wed Oct  1 12:15:22 2025    /tmp/tmpu815eijl\r\n"]
[470.680182, "o", "\r\n"]
[470.755091, "o", "         86 function calls in 0.002 seconds\r\n"]
[470.83, "o", "\r\n"]
[470.904909, "o", "   Ordered by: cumulative time\r\n"]
[470.979818, "o", "\r\n"]
[471.054727, "o", "   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\r\n"]
[471.129636, "o", "        1    0.000    0.000    0.002    0.002 {built-in method builtins.exec}\r\n"]
[471.204545, "o", "        1    0.000    0.000    0.002    0.002 _base.py:689(method_caller)\r\n"]
[471.279455, "o", "        1    0.000    0.000    0.002    0.002 units.py:181(time_quantity_mul)\r\n"]
[471.354364, "o", "        1    0.000    0.000    0.002    0.002 quantity.py:1209(__mul__)\r\n"]
[471.429273, "o", "        1    0.000    0.000    0.002    0.002 quantity.py:613(__array_ufunc__)\r\n"]
[471.504182, "o", "        1    0.002    0.002    0.002    0.002 {function Quantity.__array_ufunc__ at 0x7fc08de20220}\r\n"]
[471.579091, "o", "        1    0.000    0.000    0.000    0.000 converters.py:141(converters_and_unit)\r\n"]
[471.654, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:694(_result_as_quantity)\r\n"]
[471.728909, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:764(_new_view)\r\n"]
[471.803818, "o", "        1    0.000    0.000    0.000    0.000 helpers.py:219(helper_multiplication)\r\n"]
[471.878727, "o", "        1    0.000    0.000    0.000    0.000 core.py:869(__mul__)\r\n"]
[471.953636, "o", "        1    0.000    0.000    0.000    0.000 core.py:2335(__init__)\r\n"]
[472.028545, "o", "        1    0.000    0.000    0.000    0.000 core.py:2416(_expand_and_gather)\r\n"]
[472.103455, "o", "        3    0.000    0.000    0.000    0.000 {method 'view' of 'numpy.ndarray' objects}\r\n"]
[472.178364, "o", "        6    0.000    0.000    0.000    0.000 {built-in method builtins.getattr}\r\n"]
[472.253273, "o", "        2    0.000    0.000    0.000    0.000 quantity.py:574(__array_finalize__)\r\n"]
[472.328182, "o", "        1    0.000    0.000    0.000    0.000 converters.py:178(<listcomp>)\r\n"]
[472.403091, "o", "        2    0.000    0.000    0.000    0.000 core.py:2279(is_unity)\r\n"]
[472.478, "o", "        2    0.000    0.000    0.000    0.000 core.py:2484(is_unity)\r\n"]
[472.552909, "o", "        2    0.000    0.000    0.000    0.000 quantity.py:945(to_value)\r\n"]
[472.627818, "o", "        2    0.000    0.000    0.000    0.000 core.py:2417(add_unit)\r\n"]
[472.702727, "o", "        1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}\r\n"]
[472.777636, "o", "        1    0.000    0.000    0.000    0.000 core.py:2069(__call__)\r\n"]
[472.852545, "o", "        2    0.000    0.000    0.000    0.000 core.py:2463(decompose)\r\n"]
[472.927455, "o", "        8    0.000    0.000    0.000    0.000 {built-in method builtins.isinstance}\r\n"]
[473.002364, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:836(_set_unit)\r\n"]
[473.077273, "o", "        1    0.000    0.000    0.000    0.000 utils.py:193(sanitize_scale)\r\n"]
[473.152182, "o", "        1    0.000    0.000    0.000    0.000 core.py:2451(<lambda>)\r\n"]
[473.227091, "o", "        1    0.000    0.000    0.000    0.000 core.py:2454(<listcomp>)\r\n"]
[473.302, "o", "        3    0.000    0.000    0.000    0.000 quantity.py:1009(unit)\r\n"]
[473.376909, "o", "        1    0.000    0.000    0.000    0.000 {built-in method builtins.any}\r\n"]
[473.451818, "o", "        1    0.000    0.000    0.000    0.000 {built-in method numpy.array}\r\n"]
[473.526727, "o", "        5    0.000    0.000    0.000    0.000 {built-in method builtins.len}\r\n"]
[473.601636, "o", "        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}\r\n"]
[473.676545, "o", "        1    0.000    0.000    0.000    0.000 core.py:2450(<listcomp>)\r\n"]
[473.751455, "o", "        1    0.000    0.000    0.000    0.000 utils.py:181(is_effectively_unity)\r\n"]
[473.826364, "o", "        1    0.000    0.000    0.000    0.000 utils.py:328(resolve_fractions)\r\n"]
[473.901273, "o", "        5    0.000    0.000    0.000    0.000 core.py:2282(__hash__)\r\n"]
[473.976182, "o", "        1    0.000    0.000    0.000    0.000 core.py:1874(name)\r\n"]
[474.051091, "o", "        1    0.000    0.000    0.000    0.000 {built-in method builtins.hasattr}\r\n"]
[474.126, "o", "        3    0.000    0.000    0.000    0.000 converters.py:183(<genexpr>)\r\n"]
[474.200909, "o", "        2    0.000    0.000    0.000    0.000 core.py:2402(bases)\r\n"]
[474.275818, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:746(__quantity_subclass__)\r\n"]
[474.350727, "o", "        2    0.000    0.000    0.000    0.000 {function Quantity.__array_finalize__ at 0x7fc08de200e0}\r\n"]
[474.425636, "o", "        2    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}\r\n"]
[474.500545, "o", "        1    0.000    0.000    0.000    0.000 utils.py:288(sanitize_power)\r\n"]
[474.575455, "o", "        1    0.000    0.000    0.000    0.000 core.py:2453(<listcomp>)\r\n"]
[474.650364, "o", "        1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}\r\n"]
[474.725273, "o", "        1    0.000    0.000    0.000    0.000 {method 'items' of 'dict' objects}\r\n"]
[474.800182, "o", "        2    0.000    0.000    0.000    0.000 helpers.py:31(_d)\r\n"]
[474.875091, "o", "\r\n"]
[475.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[475.002, "i", "grep -n \"def __mul__\" astropy/units/quantity.py\r"]
[475.004, "o", "grep -n \"def __mul__\" astropy/units/quantity.py\r\n"]
[477.478, "o", "\u001b[?2004l\r\n"]
[480.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[480.002, "i", "sed -n '1120,1300p' astropy/units/quantity.py\r"]
[480.004, "o", "sed -n '1120,1300p' astropy/units/quantity.py\r\n"]
[480.033165, "o", "\u001b[?2004l\r\n"]
[480.06033, "o", "\r\n"]
[480.087495, "o", "        value = get_virtual_unit_attribute()\r\n"]
[480.114659, "o", "\r\n"]
[480.141824, "o", "        if value is None:\r\n"]
[480.168989, "o", "            raise AttributeError(\r\n"]
[480.196154, "o", "                f\"{self.__class__.__name__} instance has no attribute '{attr}'\"\r\n"]
[480.223319, "o", "            )\r\n"]
[480.250484, "o", "        else:\r\n"]
[480.277648, "o", "            return value\r\n"]
[480.304813, "o", "\r\n"]
[480.331978, "o", "    # Equality needs to be handled explicitly as ndarray.__eq__ gives\r\n"]
[480.359143, "o", "    # DeprecationWarnings on any error, which is distracting, and does not\r\n"]
[480.386308, "o", "    # deal well with structured arrays (nor does the ufunc).\r\n"]
[480.413473, "o", "    def __eq__(self, other):\r\n"]
[480.440637, "o", "        try:\r\n"]
[480.467802, "o", "            other_value = self._to_own_unit(other)\r\n"]
[480.494967, "o", "        except UnitsError:\r\n"]
[480.522132, "o", "            return False\r\n"]
[480.549297, "o", "        except Exception:\r\n"]
[480.576462, "o", "            return NotImplemented\r\n"]
[480.603626, "o", "        return self.value.__eq__(other_value)\r\n"]
[480.630791, "o", "\r\n"]
[480.657956, "o", "    def __ne__(self, other):\r\n"]
[480.685121, "o", "        try:\r\n"]
[480.712286, "o", "            other_value = self._to_own_unit(other)\r\n"]
[480.739451, "o", "        except UnitsError:\r\n"]
[480.766615, "o", "            return True\r\n"]
[480.79378, "o", "        except Exception:\r\n"]
[480.820945, "o", "            return NotImplemented\r\n"]
[480.84811, "o", "        return self.value.__ne__(other_value)\r\n"]
[480.875275, "o", "\r\n"]
[480.90244, "o", "    # Unit conversion operator (<<).\r\n"]
[480.929604, "o", "    def __lshift__(self, other):\r\n"]
[480.956769, "o", "        try:\r\n"]
[480.983934, "o", "            other = Unit(other, parse_strict=\"silent\")\r\n"]
[481.011099, "o", "        except UnitTypeError:\r\n"]
[481.038264, "o", "            return NotImplemented\r\n"]
[481.065429, "o", "\r\n"]
[481.092593, "o", "        return self.__class__(self, other, copy=False, subok=True)\r\n"]
[481.119758, "o", "\r\n"]
[481.146923, "o", "    def __ilshift__(self, other):\r\n"]
[481.174088, "o", "        try:\r\n"]
[481.201253, "o", "            other = Unit(other, parse_strict=\"silent\")\r\n"]
[481.228418, "o", "        except UnitTypeError:\r\n"]
[481.255582, "o", "            return NotImplemented  # try other.__rlshift__(self)\r\n"]
[481.282747, "o", "\r\n"]
[481.309912, "o", "        try:\r\n"]
[481.337077, "o", "            factor = self.unit._to(other)\r\n"]
[481.364242, "o", "        except UnitConversionError:  # incompatible, or requires an Equivalency\r\n"]
[481.391407, "o", "            return NotImplemented\r\n"]
[481.418571, "o", "        except AttributeError:  # StructuredUnit does not have `_to`\r\n"]
[481.445736, "o", "            # In principle, in-place might be possible.\r\n"]
[481.472901, "o", "            return NotImplemented\r\n"]
[481.500066, "o", "\r\n"]
[481.527231, "o", "        view = self.view(np.ndarray)\r\n"]
[481.554396, "o", "        try:\r\n"]
[481.58156, "o", "            view *= factor  # operates on view\r\n"]
[481.608725, "o", "        except TypeError:\r\n"]
[481.63589, "o", "            # The error is `numpy.core._exceptions._UFuncOutputCastingError`,\r\n"]
[481.663055, "o", "            # which inherits from `TypeError`.\r\n"]
[481.69022, "o", "            return NotImplemented\r\n"]
[481.717385, "o", "\r\n"]
[481.744549, "o", "        self._set_unit(other)\r\n"]
[481.771714, "o", "        return self\r\n"]
[481.798879, "o", "\r\n"]
[481.826044, "o", "    def __rlshift__(self, other):\r\n"]
[481.853209, "o", "        if not self.isscalar:\r\n"]
[481.880374, "o", "            return NotImplemented\r\n"]
[481.907538, "o", "        return Unit(self).__rlshift__(other)\r\n"]
[481.934703, "o", "\r\n"]
[481.961868, "o", "    # Give warning for other >> self, since probably other << self was meant.\r\n"]
[481.989033, "o", "    def __rrshift__(self, other):\r\n"]
[482.016198, "o", "        warnings.warn(\r\n"]
[482.043363, "o", "            \">> is not implemented. Did you mean to convert \"\r\n"]
[482.070527, "o", "            \"something to this quantity as a unit using '<<'?\",\r\n"]
[482.097692, "o", "            AstropyWarning,\r\n"]
[482.124857, "o", "        )\r\n"]
[482.152022, "o", "        return NotImplemented\r\n"]
[482.179187, "o", "\r\n"]
[482.206352, "o", "    # Also define __rshift__ and __irshift__ so we override default ndarray\r\n"]
[482.233516, "o", "    # behaviour, but instead of emitting a warning here, let it be done by\r\n"]
[482.260681, "o", "    # other (which likely is a unit if this was a mistake).\r\n"]
[482.287846, "o", "    def __rshift__(self, other):\r\n"]
[482.315011, "o", "        return NotImplemented\r\n"]
[482.342176, "o", "\r\n"]
[482.369341, "o", "    def __irshift__(self, other):\r\n"]
[482.396505, "o", "        return NotImplemented\r\n"]
[482.42367, "o", "\r\n"]
[482.450835, "o", "    # Arithmetic operations\r\n"]
[482.478, "o", "    def __mul__(self, other):\r\n"]
[482.505165, "o", "        \"\"\"Multiplication between `Quantity` objects and other objects.\"\"\"\r\n"]
[482.53233, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[482.559495, "o", "            try:\r\n"]
[482.586659, "o", "                return self._new_view(\r\n"]
[482.613824, "o", "                    self.value.copy(), other * self.unit, propagate_info=False\r\n"]
[482.640989, "o", "                )\r\n"]
[482.668154, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[482.695319, "o", "                return NotImplemented\r\n"]
[482.722484, "o", "\r\n"]
[482.749648, "o", "        return super().__mul__(other)\r\n"]
[482.776813, "o", "\r\n"]
[482.803978, "o", "    def __imul__(self, other):\r\n"]
[482.831143, "o", "        \"\"\"In-place multiplication between `Quantity` objects and others.\"\"\"\r\n"]
[482.858308, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[482.885473, "o", "            self._set_unit(other * self.unit)\r\n"]
[482.912637, "o", "            return self\r\n"]
[482.939802, "o", "\r\n"]
[482.966967, "o", "        return super().__imul__(other)\r\n"]
[482.994132, "o", "\r\n"]
[483.021297, "o", "    def __rmul__(self, other):\r\n"]
[483.048462, "o", "        \"\"\"\r\n"]
[483.075626, "o", "        Right Multiplication between `Quantity` objects and other objects.\r\n"]
[483.102791, "o", "        \"\"\"\r\n"]
[483.129956, "o", "        return self.__mul__(other)\r\n"]
[483.157121, "o", "\r\n"]
[483.184286, "o", "    def __truediv__(self, other):\r\n"]
[483.211451, "o", "        \"\"\"Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[483.238615, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[483.26578, "o", "            try:\r\n"]
[483.292945, "o", "                return self._new_view(\r\n"]
[483.32011, "o", "                    self.value.copy(), self.unit / other, propagate_info=False\r\n"]
[483.347275, "o", "                )\r\n"]
[483.37444, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[483.401604, "o", "                return NotImplemented\r\n"]
[483.428769, "o", "\r\n"]
[483.455934, "o", "        return super().__truediv__(other)\r\n"]
[483.483099, "o", "\r\n"]
[483.510264, "o", "    def __itruediv__(self, other):\r\n"]
[483.537429, "o", "        \"\"\"Inplace division between `Quantity` objects and other objects.\"\"\"\r\n"]
[483.564593, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[483.591758, "o", "            self._set_unit(self.unit / other)\r\n"]
[483.618923, "o", "            return self\r\n"]
[483.646088, "o", "\r\n"]
[483.673253, "o", "        return super().__itruediv__(other)\r\n"]
[483.700418, "o", "\r\n"]
[483.727582, "o", "    def __rtruediv__(self, other):\r\n"]
[483.754747, "o", "        \"\"\"Right Division between `Quantity` objects and other objects.\"\"\"\r\n"]
[483.781912, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[483.809077, "o", "            return self._new_view(\r\n"]
[483.836242, "o", "                1.0 / self.value, other / self.unit, propagate_info=False\r\n"]
[483.863407, "o", "            )\r\n"]
[483.890571, "o", "\r\n"]
[483.917736, "o", "        return super().__rtruediv__(other)\r\n"]
[483.944901, "o", "\r\n"]
[483.972066, "o", "    def __pow__(self, other):\r\n"]
[483.999231, "o", "        if isinstance(other, Fraction):\r\n"]
[484.026396, "o", "            # Avoid getting object arrays by raising the value to a Fraction.\r\n"]
[484.05356, "o", "            return self._new_view(\r\n"]
[484.080725, "o", "                self.value ** float(other), self.unit**other, propagate_info=False\r\n"]
[484.10789, "o", "            )\r\n"]
[484.135055, "o", "\r\n"]
[484.16222, "o", "        return super().__pow__(other)\r\n"]
[484.189385, "o", "\r\n"]
[484.216549, "o", "    # other overrides of special functions\r\n"]
[484.243714, "o", "    def __hash__(self):\r\n"]
[484.270879, "o", "        return hash(self.value) ^ hash(self.unit)\r\n"]
[484.298044, "o", "\r\n"]
[484.325209, "o", "    def __iter__(self):\r\n"]
[484.352374, "o", "        if self.isscalar:\r\n"]
[484.379538, "o", "            raise TypeError(\r\n"]
[484.406703, "o", "                f\"'{self.__class__.__name__}' object with a scalar value is not\"\r\n"]
[484.433868, "o", "                \" iterable\"\r\n"]
[484.461033, "o", "            )\r\n"]
[484.488198, "o", "\r\n"]
[484.515363, "o", "        # Otherwise return a generator\r\n"]
[484.542527, "o", "        def quantity_iter():\r\n"]
[484.569692, "o", "            for val in self.value:\r\n"]
[484.596857, "o", "                yield self._new_view(val)\r\n"]
[484.624022, "o", "\r\n"]
[484.651187, "o", "        return quantity_iter()\r\n"]
[484.678352, "o", "\r\n"]
[484.705516, "o", "    def __getitem__(self, key):\r\n"]
[484.732681, "o", "        if isinstance(key, str) and isinstance(self.unit, StructuredUnit):\r\n"]
[484.759846, "o", "            return self._new_view(\r\n"]
[484.787011, "o", "                self.view(np.ndarray)[key], self.unit[key], propagate_info=False\r\n"]
[484.814176, "o", "            )\r\n"]
[484.841341, "o", "\r\n"]
[484.868505, "o", "        try:\r\n"]
[484.89567, "o", "            out = super().__getitem__(key)\r\n"]
[484.922835, "o", "        except IndexError:\r\n"]
[485.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[485.002, "i", "grep -n \"class CompositeUnit\" astropy/units/core.py\r"]
[485.004, "o", "grep -n \"class CompositeUnit\" astropy/units/core.py\r\n"]
[487.478, "o", "\u001b[?2004l\r\n"]
[490.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[490.002, "i", "sed -n '2320,2480p' astropy/units/core.py\r"]
[490.004, "o", "sed -n '2320,2480p' astropy/units/core.py\r\n"]
[490.036519, "o", "\u001b[?2004l\r\n"]
[490.067037, "o", "    Parameters\r\n"]
[490.097556, "o", "    ----------\r\n"]
[490.128074, "o", "    scale : number\r\n"]
[490.158593, "o", "        A scaling factor for the unit.\r\n"]
[490.189111, "o", "\r\n"]
[490.21963, "o", "    bases : sequence of `UnitBase`\r\n"]
[490.250148, "o", "        A sequence of units this unit is composed of.\r\n"]
[490.280667, "o", "\r\n"]
[490.311185, "o", "    powers : sequence of numbers\r\n"]
[490.341704, "o", "        A sequence of powers (in parallel with ``bases``) for each\r\n"]
[490.372222, "o", "        of the base units.\r\n"]
[490.402741, "o", "    \"\"\"\r\n"]
[490.433259, "o", "\r\n"]
[490.463778, "o", "    _decomposed_cache = None\r\n"]
[490.494296, "o", "\r\n"]
[490.524815, "o", "    def __init__(\r\n"]
[490.555333, "o", "        self,\r\n"]
[490.585852, "o", "        scale,\r\n"]
[490.61637, "o", "        bases,\r\n"]
[490.646889, "o", "        powers,\r\n"]
[490.677407, "o", "        decompose=False,\r\n"]
[490.707926, "o", "        decompose_bases=set(),\r\n"]
[490.738444, "o", "        _error_check=True,\r\n"]
[490.768963, "o", "    ):\r\n"]
[490.799481, "o", "        # There are many cases internal to astropy.units where we\r\n"]
[490.83, "o", "        # already know that all the bases are Unit objects, and the\r\n"]
[490.860519, "o", "        # powers have been validated.  In those cases, we can skip the\r\n"]
[490.891037, "o", "        # error checking for performance reasons.  When the private\r\n"]
[490.921556, "o", "        # kwarg `_error_check` is False, the error checking is turned\r\n"]
[490.952074, "o", "        # off.\r\n"]
[490.982593, "o", "        if _error_check:\r\n"]
[491.013111, "o", "            for base in bases:\r\n"]
[491.04363, "o", "                if not isinstance(base, UnitBase):\r\n"]
[491.074148, "o", "                    raise TypeError(\"bases must be sequence of UnitBase instances\")\r\n"]
[491.104667, "o", "            powers = [validate_power(p) for p in powers]\r\n"]
[491.135185, "o", "\r\n"]
[491.165704, "o", "        if not decompose and len(bases) == 1 and powers[0] >= 0:\r\n"]
[491.196222, "o", "            # Short-cut; with one unit there's nothing to expand and gather,\r\n"]
[491.226741, "o", "            # as that has happened already when creating the unit.  But do only\r\n"]
[491.257259, "o", "            # positive powers, since for negative powers we need to re-sort.\r\n"]
[491.287778, "o", "            unit = bases[0]\r\n"]
[491.318296, "o", "            power = powers[0]\r\n"]
[491.348815, "o", "            if power == 1:\r\n"]
[491.379333, "o", "                scale *= unit.scale\r\n"]
[491.409852, "o", "                self._bases = unit.bases\r\n"]
[491.44037, "o", "                self._powers = unit.powers\r\n"]
[491.470889, "o", "            elif power == 0:\r\n"]
[491.501407, "o", "                self._bases = []\r\n"]
[491.531926, "o", "                self._powers = []\r\n"]
[491.562444, "o", "            else:\r\n"]
[491.592963, "o", "                scale *= unit.scale**power\r\n"]
[491.623481, "o", "                self._bases = unit.bases\r\n"]
[491.654, "o", "                self._powers = [\r\n"]
[491.684519, "o", "                    sanitize_power(operator.mul(*resolve_fractions(p, power)))\r\n"]
[491.715037, "o", "                    for p in unit.powers\r\n"]
[491.745556, "o", "                ]\r\n"]
[491.776074, "o", "\r\n"]
[491.806593, "o", "            self._scale = sanitize_scale(scale)\r\n"]
[491.837111, "o", "        else:\r\n"]
[491.86763, "o", "            # Regular case: use inputs as preliminary scale, bases, and powers,\r\n"]
[491.898148, "o", "            # then \"expand and gather\" identical bases, sanitize the scale, &c.\r\n"]
[491.928667, "o", "            self._scale = scale\r\n"]
[491.959185, "o", "            self._bases = bases\r\n"]
[491.989704, "o", "            self._powers = powers\r\n"]
[492.020222, "o", "            self._expand_and_gather(decompose=decompose, bases=decompose_bases)\r\n"]
[492.050741, "o", "\r\n"]
[492.081259, "o", "    def __repr__(self):\r\n"]
[492.111778, "o", "        if len(self._bases):\r\n"]
[492.142296, "o", "            return super().__repr__()\r\n"]
[492.172815, "o", "        else:\r\n"]
[492.203333, "o", "            if self._scale != 1.0:\r\n"]
[492.233852, "o", "                return f\"Unit(dimensionless with a scale of {self._scale})\"\r\n"]
[492.26437, "o", "            else:\r\n"]
[492.294889, "o", "                return \"Unit(dimensionless)\"\r\n"]
[492.325407, "o", "\r\n"]
[492.355926, "o", "    @property\r\n"]
[492.386444, "o", "    def scale(self):\r\n"]
[492.416963, "o", "        \"\"\"\r\n"]
[492.447481, "o", "        Return the scale of the composite unit.\r\n"]
[492.478, "o", "        \"\"\"\r\n"]
[492.508519, "o", "        return self._scale\r\n"]
[492.539037, "o", "\r\n"]
[492.569556, "o", "    @property\r\n"]
[492.600074, "o", "    def bases(self):\r\n"]
[492.630593, "o", "        \"\"\"\r\n"]
[492.661111, "o", "        Return the bases of the composite unit.\r\n"]
[492.69163, "o", "        \"\"\"\r\n"]
[492.722148, "o", "        return self._bases\r\n"]
[492.752667, "o", "\r\n"]
[492.783185, "o", "    @property\r\n"]
[492.813704, "o", "    def powers(self):\r\n"]
[492.844222, "o", "        \"\"\"\r\n"]
[492.874741, "o", "        Return the powers of the composite unit.\r\n"]
[492.905259, "o", "        \"\"\"\r\n"]
[492.935778, "o", "        return self._powers\r\n"]
[492.966296, "o", "\r\n"]
[492.996815, "o", "    def _expand_and_gather(self, decompose=False, bases=set()):\r\n"]
[493.027333, "o", "        def add_unit(unit, power, scale):\r\n"]
[493.057852, "o", "            if bases and unit not in bases:\r\n"]
[493.08837, "o", "                for base in bases:\r\n"]
[493.118889, "o", "                    try:\r\n"]
[493.149407, "o", "                        scale *= unit._to(base) ** power\r\n"]
[493.179926, "o", "                    except UnitsError:\r\n"]
[493.210444, "o", "                        pass\r\n"]
[493.240963, "o", "                    else:\r\n"]
[493.271481, "o", "                        unit = base\r\n"]
[493.302, "o", "                        break\r\n"]
[493.332519, "o", "\r\n"]
[493.363037, "o", "            if unit in new_parts:\r\n"]
[493.393556, "o", "                a, b = resolve_fractions(new_parts[unit], power)\r\n"]
[493.424074, "o", "                new_parts[unit] = a + b\r\n"]
[493.454593, "o", "            else:\r\n"]
[493.485111, "o", "                new_parts[unit] = power\r\n"]
[493.51563, "o", "            return scale\r\n"]
[493.546148, "o", "\r\n"]
[493.576667, "o", "        new_parts = {}\r\n"]
[493.607185, "o", "        scale = self._scale\r\n"]
[493.637704, "o", "\r\n"]
[493.668222, "o", "        for b, p in zip(self._bases, self._powers):\r\n"]
[493.698741, "o", "            if decompose and b not in bases:\r\n"]
[493.729259, "o", "                b = b.decompose(bases=bases)\r\n"]
[493.759778, "o", "\r\n"]
[493.790296, "o", "            if isinstance(b, CompositeUnit):\r\n"]
[493.820815, "o", "                scale *= b._scale**p\r\n"]
[493.851333, "o", "                for b_sub, p_sub in zip(b._bases, b._powers):\r\n"]
[493.881852, "o", "                    a, b = resolve_fractions(p_sub, p)\r\n"]
[493.91237, "o", "                    scale = add_unit(b_sub, a * b, scale)\r\n"]
[493.942889, "o", "            else:\r\n"]
[493.973407, "o", "                scale = add_unit(b, p, scale)\r\n"]
[494.003926, "o", "\r\n"]
[494.034444, "o", "        new_parts = [x for x in new_parts.items() if x[1] != 0]\r\n"]
[494.064963, "o", "        new_parts.sort(key=lambda x: (-x[1], getattr(x[0], \"name\", \"\")))\r\n"]
[494.095481, "o", "\r\n"]
[494.126, "o", "        self._bases = [x[0] for x in new_parts]\r\n"]
[494.156519, "o", "        self._powers = [sanitize_power(x[1]) for x in new_parts]\r\n"]
[494.187037, "o", "        self._scale = sanitize_scale(scale)\r\n"]
[494.217556, "o", "\r\n"]
[494.248074, "o", "    def __copy__(self):\r\n"]
[494.278593, "o", "        \"\"\"\r\n"]
[494.309111, "o", "        For compatibility with python copy module.\r\n"]
[494.33963, "o", "        \"\"\"\r\n"]
[494.370148, "o", "        return CompositeUnit(self._scale, self._bases[:], self._powers[:])\r\n"]
[494.400667, "o", "\r\n"]
[494.431185, "o", "    def decompose(self, bases=set()):\r\n"]
[494.461704, "o", "        if len(bases) == 0 and self._decomposed_cache is not None:\r\n"]
[494.492222, "o", "            return self._decomposed_cache\r\n"]
[494.522741, "o", "\r\n"]
[494.553259, "o", "        for base in self.bases:\r\n"]
[494.583778, "o", "            if not isinstance(base, IrreducibleUnit) or (\r\n"]
[494.614296, "o", "                len(bases) and base not in bases\r\n"]
[494.644815, "o", "            ):\r\n"]
[494.675333, "o", "                break\r\n"]
[494.705852, "o", "        else:\r\n"]
[494.73637, "o", "            if len(bases) == 0:\r\n"]
[494.766889, "o", "                self._decomposed_cache = self\r\n"]
[494.797407, "o", "            return self\r\n"]
[494.827926, "o", "\r\n"]
[494.858444, "o", "        x = CompositeUnit(\r\n"]
[494.888963, "o", "            self.scale, self.bases, self.powers, decompose=True, decompose_bases=bases\r\n"]
[494.919481, "o", "        )\r\n"]
[495.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[495.002, "i", "asv profile --config asv.ci.conf.json --python=same units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\r"]
[495.004, "o", "asv profile --config asv.ci.conf.json --python=same units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\r\n"]
[495.080909, "o", "\u001b[?2004l\r\n"]
[495.155818, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[495.230727, "o", "\u00b7 \u001b[0;32mProfile data does not already exist. Running profiler now.\u001b[0m\r\n"]
[495.305636, "o", "\u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[495.380545, "o", "\u00b7\u00b7\u00b7 \u001b[0;39mRunning (units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul--)\u001b[0m.\r\n"]
[495.455455, "o", "\u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\u001b[0m                                                                                1.40\u00b10.1ms\r\n"]
[495.530364, "o", "\r\n"]
[495.605273, "o", "Wed Oct  1 12:17:17 2025    /tmp/tmpw70p84sv\r\n"]
[495.680182, "o", "\r\n"]
[495.755091, "o", "         86 function calls in 0.002 seconds\r\n"]
[495.83, "o", "\r\n"]
[495.904909, "o", "   Ordered by: cumulative time\r\n"]
[495.979818, "o", "\r\n"]
[496.054727, "o", "   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\r\n"]
[496.129636, "o", "        1    0.000    0.000    0.002    0.002 {built-in method builtins.exec}\r\n"]
[496.204545, "o", "        1    0.000    0.000    0.002    0.002 _base.py:689(method_caller)\r\n"]
[496.279455, "o", "        1    0.000    0.000    0.002    0.002 units.py:181(time_quantity_mul)\r\n"]
[496.354364, "o", "        1    0.000    0.000    0.002    0.002 quantity.py:1209(__mul__)\r\n"]
[496.429273, "o", "        1    0.000    0.000    0.002    0.002 quantity.py:613(__array_ufunc__)\r\n"]
[496.504182, "o", "        1    0.001    0.001    0.001    0.001 {function Quantity.__array_ufunc__ at 0x7fb521f50220}\r\n"]
[496.579091, "o", "        1    0.000    0.000    0.000    0.000 converters.py:141(converters_and_unit)\r\n"]
[496.654, "o", "        1    0.000    0.000    0.000    0.000 helpers.py:219(helper_multiplication)\r\n"]
[496.728909, "o", "        1    0.000    0.000    0.000    0.000 core.py:869(__mul__)\r\n"]
[496.803818, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:694(_result_as_quantity)\r\n"]
[496.878727, "o", "        1    0.000    0.000    0.000    0.000 core.py:2335(__init__)\r\n"]
[496.953636, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:764(_new_view)\r\n"]
[497.028545, "o", "        1    0.000    0.000    0.000    0.000 core.py:2416(_expand_and_gather)\r\n"]
[497.103455, "o", "        6    0.000    0.000    0.000    0.000 {built-in method builtins.getattr}\r\n"]
[497.178364, "o", "        2    0.000    0.000    0.000    0.000 core.py:2279(is_unity)\r\n"]
[497.253273, "o", "        3    0.000    0.000    0.000    0.000 {method 'view' of 'numpy.ndarray' objects}\r\n"]
[497.328182, "o", "        2    0.000    0.000    0.000    0.000 core.py:2484(is_unity)\r\n"]
[497.403091, "o", "        2    0.000    0.000    0.000    0.000 core.py:2417(add_unit)\r\n"]
[497.478, "o", "        2    0.000    0.000    0.000    0.000 quantity.py:574(__array_finalize__)\r\n"]
[497.552909, "o", "        1    0.000    0.000    0.000    0.000 converters.py:178(<listcomp>)\r\n"]
[497.627818, "o", "        2    0.000    0.000    0.000    0.000 quantity.py:945(to_value)\r\n"]
[497.702727, "o", "        2    0.000    0.000    0.000    0.000 core.py:2463(decompose)\r\n"]
[497.777636, "o", "        1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}\r\n"]
[497.852545, "o", "        1    0.000    0.000    0.000    0.000 core.py:2069(__call__)\r\n"]
[497.927455, "o", "        8    0.000    0.000    0.000    0.000 {built-in method builtins.isinstance}\r\n"]
[498.002364, "o", "        1    0.000    0.000    0.000    0.000 utils.py:193(sanitize_scale)\r\n"]
[498.077273, "o", "        1    0.000    0.000    0.000    0.000 core.py:2451(<lambda>)\r\n"]
[498.152182, "o", "        1    0.000    0.000    0.000    0.000 core.py:2454(<listcomp>)\r\n"]
[498.227091, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:836(_set_unit)\r\n"]
[498.302, "o", "        1    0.000    0.000    0.000    0.000 {built-in method builtins.any}\r\n"]
[498.376909, "o", "        1    0.000    0.000    0.000    0.000 utils.py:328(resolve_fractions)\r\n"]
[498.451818, "o", "        5    0.000    0.000    0.000    0.000 {built-in method builtins.len}\r\n"]
[498.526727, "o", "        1    0.000    0.000    0.000    0.000 {built-in method numpy.array}\r\n"]
[498.601636, "o", "        1    0.000    0.000    0.000    0.000 utils.py:181(is_effectively_unity)\r\n"]
[498.676545, "o", "        3    0.000    0.000    0.000    0.000 quantity.py:1009(unit)\r\n"]
[498.751455, "o", "        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}\r\n"]
[498.826364, "o", "        5    0.000    0.000    0.000    0.000 core.py:2282(__hash__)\r\n"]
[498.901273, "o", "        1    0.000    0.000    0.000    0.000 core.py:1874(name)\r\n"]
[498.976182, "o", "        1    0.000    0.000    0.000    0.000 core.py:2450(<listcomp>)\r\n"]
[499.051091, "o", "        2    0.000    0.000    0.000    0.000 core.py:2402(bases)\r\n"]
[499.126, "o", "        3    0.000    0.000    0.000    0.000 converters.py:183(<genexpr>)\r\n"]
[499.200909, "o", "        1    0.000    0.000    0.000    0.000 {built-in method builtins.hasattr}\r\n"]
[499.275818, "o", "        2    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}\r\n"]
[499.350727, "o", "        2    0.000    0.000    0.000    0.000 {function Quantity.__array_finalize__ at 0x7fb521f500e0}\r\n"]
[499.425636, "o", "        1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}\r\n"]
[499.500545, "o", "        1    0.000    0.000    0.000    0.000 core.py:2453(<listcomp>)\r\n"]
[499.575455, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:746(__quantity_subclass__)\r\n"]
[499.650364, "o", "        1    0.000    0.000    0.000    0.000 utils.py:288(sanitize_power)\r\n"]
[499.725273, "o", "        2    0.000    0.000    0.000    0.000 helpers.py:31(_d)\r\n"]
[499.800182, "o", "        1    0.000    0.000    0.000    0.000 {method 'items' of 'dict' objects}\r\n"]
[499.875091, "o", "\r\n"]
[500.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[500.002, "i", "applypatch << 'PATCH'\r"]
[500.004, "o", "applypatch << 'PATCH'\r\n"]
[500.123714, "o", "\u001b[?2004l\r\n"]
[500.241429, "o", "\u001b[?2004h> *** Begin Patch\r\n"]
[500.359143, "o", "\u001b[?2004l\r\n"]
[500.476857, "o", "\u001b[?2004h> *** Update File: astropy/units/core.py\r\n"]
[500.594571, "o", "\u001b[?2004l\r\n"]
[500.712286, "o", "\u001b[?2004h> @@\r\n"]
[500.83, "o", "\u001b[?2004l\r\n"]
[500.947714, "o", "\u001b[?2004h> -        new_parts = [x for x in new_parts.items() if x[1] != 0]\r\n"]
[501.065429, "o", "\u001b[?2004l\r\n"]
[501.183143, "o", "\u001b[?2004h> -        new_parts.sort(key=lambda x: (-x[1], getattr(x[0], \"name\", \"\")))\r\n"]
[501.300857, "o", "\u001b[?2004l\r\n"]
[501.418571, "o", "\u001b[?2004h> +        # Collect the unit parts that remain after combination. In the most\r\n"]
[501.536286, "o", "\u001b[?2004l\r\n"]
[501.654, "o", "\u001b[?2004h> +        # common cases, the number of parts is 0 or 1 (e.g., pure scale or a\r\n"]
[501.771714, "o", "\u001b[?2004l\r\n"]
[501.889429, "o", "\u001b[?2004h> +        # single base unit). Avoid an unnecessary sort in those cases to\r\n"]
[502.007143, "o", "\u001b[?2004l\r\n"]
[502.124857, "o", "\u001b[?2004h> +        # reduce overhead in hot paths (e.g., large array operations where\r\n"]
[502.242571, "o", "\u001b[?2004l\r\n"]
[502.360286, "o", "\u001b[?2004h> +        # units are combined once per operation).\r\n"]
[502.478, "o", "\u001b[?2004l\r\n"]
[502.595714, "o", "\u001b[?2004h> +        new_parts = [x for x in new_parts.items() if x[1] != 0]\r\n"]
[502.713429, "o", "\u001b[?2004l\r\n"]
[502.831143, "o", "\u001b[?2004h> +        if len(new_parts) > 1:\r\n"]
[502.948857, "o", "\u001b[?2004l\r\n"]
[503.066571, "o", "\u001b[?2004h> +            new_parts.sort(key=lambda x: (-x[1], getattr(x[0], \"name\", \"\")))\r\n"]
[503.184286, "o", "\u001b[?2004l\r\n"]
[503.302, "o", "\u001b[?2004h> @@\r\n"]
[503.419714, "o", "\u001b[?2004l\r\n"]
[503.537429, "o", "\u001b[?2004h> -        self._scale = sanitize_scale(scale)\r\n"]
[503.655143, "o", "\u001b[?2004l\r\n"]
[503.772857, "o", "\u001b[?2004h> +        # Fast-path: if the combined scale is exactly unity, avoid the\r\n"]
[503.890571, "o", "\u001b[?2004l\r\n"]
[504.008286, "o", "\u001b[?2004h> +        # additional checks in sanitize_scale.\r\n"]
[504.126, "o", "\u001b[?2004l\r\n"]
[504.243714, "o", "\u001b[?2004h> +        self._scale = 1.0 if scale == 1 or scale == 1.0 else sanitize_scale(scale)\r\n"]
[504.361429, "o", "\u001b[?2004l\r\n"]
[504.479143, "o", "\u001b[?2004h> *** End Patch\r\n"]
[504.596857, "o", "\u001b[?2004l\r\n"]
[504.714571, "o", "\u001b[?2004h> PATCH\r\n"]
[504.832286, "o", "\u001b[?2004l\r\n"]
[505.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[505.002, "i", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r"]
[505.004, "o", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r\n"]
[505.1605, "o", "reation_nocopy|units.time_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view|units.TimeQuanti\r\n"]
[505.315, "o", "ityOpLargeArraySameUnit.*|units.TimeQuantityOpLargeArrayDiffUnit.*\" --quick\r\n"]
[505.4695, "o", "\u001b[?2004l\r\n"]
[505.624, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[505.7785, "o", "\u00b7 \u001b[0;32mRunning 26 total benchmarks (1 commits * 1 environments * 26 benchmarks)\u001b[0m\r\n"]
[505.933, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[506.0875, "o", "[ 1.92%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_add\u001b[0m                                                                                  2.83\u00b10ms\r\n"]
[506.242, "o", "[ 3.85%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_equal\u001b[0m                                                                                2.61\u00b10ms\r\n"]
[506.3965, "o", "[ 5.77%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_mul\u001b[0m                                                                                  1.85\u00b10ms\r\n"]
[506.551, "o", "[ 7.69%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_add\u001b[0m                                                                               2.70\u00b10ms\r\n"]
[506.7055, "o", "[ 9.62%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_equal\u001b[0m                                                                             2.22\u00b10ms\r\n"]
[506.86, "o", "[11.54%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_multiply\u001b[0m                                                                          1.48\u00b10ms\r\n"]
[507.0145, "o", "[13.46%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_subtract\u001b[0m                                                                          2.26\u00b10ms\r\n"]
[507.169, "o", "[15.38%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_truediv\u001b[0m                                                                           1.59\u00b10ms\r\n"]
[507.3235, "o", "[17.31%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_sub\u001b[0m                                                                                  2.18\u00b10ms\r\n"]
[507.478, "o", "[19.23%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_truediv\u001b[0m                                                                              1.50\u00b10ms\r\n"]
[507.6325, "o", "[21.15%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_add\u001b[0m                                                                                  1.28\u00b10ms\r\n"]
[507.787, "o", "[23.08%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_equal\u001b[0m                                                                                1.11\u00b10ms\r\n"]
[507.9415, "o", "[25.00%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\u001b[0m                                                                                  1.89\u00b10ms\r\n"]
[508.096, "o", "[26.92%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_add\u001b[0m                                                                               1.81\u00b10ms\r\n"]
[508.2505, "o", "[28.85%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_equal\u001b[0m                                                                             1.52\u00b10ms\r\n"]
[508.405, "o", "[30.77%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_multiply\u001b[0m                                                                          2.12\u00b10ms\r\n"]
[508.5595, "o", "[32.69%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_subtract\u001b[0m                                                                          1.57\u00b10ms\r\n"]
[508.714, "o", "[34.62%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_truediv\u001b[0m                                                                           1.60\u00b10ms\r\n"]
[508.8685, "o", "[36.54%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_sub\u001b[0m                                                                                  1.28\u00b10ms\r\n"]
[509.023, "o", "[38.46%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_truediv\u001b[0m                                                                              1.64\u00b10ms\r\n"]
[509.1775, "o", "[40.38%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_array_conversion\u001b[0m                                                                                                      1.13\u00b10ms\r\n"]
[509.332, "o", "[42.31%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_creation_nocopy\u001b[0m                                                                                                        129\u00b10\u03bcs\r\n"]
[509.4865, "o", "[44.23%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_array\u001b[0m                                                                                                       322\u00b10\u03bcs\r\n"]
[509.641, "o", "[46.15%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_list\u001b[0m                                                                                                        309\u00b10\u03bcs\r\n"]
[509.7955, "o", "[48.08%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_times_unit\u001b[0m                                                                                                             509\u00b10\u03bcs\r\n"]
[510.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[510.002, "i", "asv profile --config asv.ci.conf.json --python=same units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\r"]
[510.004, "o", "asv profile --config asv.ci.conf.json --python=same units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\r\n"]
[510.080909, "o", "\u001b[?2004l\r\n"]
[510.155818, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[510.230727, "o", "\u00b7 \u001b[0;32mProfile data does not already exist. Running profiler now.\u001b[0m\r\n"]
[510.305636, "o", "\u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[510.380545, "o", "\u00b7\u00b7\u00b7 \u001b[0;39mRunning (units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul--)\u001b[0m.\r\n"]
[510.455455, "o", "\u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\u001b[0m                                                                                1.85\u00b10.4ms\r\n"]
[510.530364, "o", "\r\n"]
[510.605273, "o", "Wed Oct  1 12:18:23 2025    /tmp/tmp46vm_y0i\r\n"]
[510.680182, "o", "\r\n"]
[510.755091, "o", "         86 function calls in 0.003 seconds\r\n"]
[510.83, "o", "\r\n"]
[510.904909, "o", "   Ordered by: cumulative time\r\n"]
[510.979818, "o", "\r\n"]
[511.054727, "o", "   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\r\n"]
[511.129636, "o", "        1    0.000    0.000    0.003    0.003 {built-in method builtins.exec}\r\n"]
[511.204545, "o", "        1    0.000    0.000    0.003    0.003 _base.py:689(method_caller)\r\n"]
[511.279455, "o", "        1    0.000    0.000    0.003    0.003 units.py:181(time_quantity_mul)\r\n"]
[511.354364, "o", "        1    0.000    0.000    0.003    0.003 quantity.py:1209(__mul__)\r\n"]
[511.429273, "o", "        1    0.000    0.000    0.003    0.003 quantity.py:613(__array_ufunc__)\r\n"]
[511.504182, "o", "        1    0.002    0.002    0.002    0.002 {function Quantity.__array_ufunc__ at 0x7fc0f5014220}\r\n"]
[511.579091, "o", "        1    0.000    0.000    0.000    0.000 converters.py:141(converters_and_unit)\r\n"]
[511.654, "o", "        1    0.000    0.000    0.000    0.000 helpers.py:219(helper_multiplication)\r\n"]
[511.728909, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:694(_result_as_quantity)\r\n"]
[511.803818, "o", "        1    0.000    0.000    0.000    0.000 core.py:869(__mul__)\r\n"]
[511.878727, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:764(_new_view)\r\n"]
[511.953636, "o", "        1    0.000    0.000    0.000    0.000 core.py:2335(__init__)\r\n"]
[512.028545, "o", "        1    0.000    0.000    0.000    0.000 core.py:2416(_expand_and_gather)\r\n"]
[512.103455, "o", "        6    0.000    0.000    0.000    0.000 {built-in method builtins.getattr}\r\n"]
[512.178364, "o", "        3    0.000    0.000    0.000    0.000 {method 'view' of 'numpy.ndarray' objects}\r\n"]
[512.253273, "o", "        2    0.000    0.000    0.000    0.000 core.py:2279(is_unity)\r\n"]
[512.328182, "o", "        2    0.000    0.000    0.000    0.000 core.py:2484(is_unity)\r\n"]
[512.403091, "o", "        2    0.000    0.000    0.000    0.000 quantity.py:574(__array_finalize__)\r\n"]
[512.478, "o", "        1    0.000    0.000    0.000    0.000 core.py:2069(__call__)\r\n"]
[512.552909, "o", "        2    0.000    0.000    0.000    0.000 core.py:2417(add_unit)\r\n"]
[512.627818, "o", "        2    0.000    0.000    0.000    0.000 quantity.py:945(to_value)\r\n"]
[512.702727, "o", "        1    0.000    0.000    0.000    0.000 converters.py:178(<listcomp>)\r\n"]
[512.777636, "o", "        2    0.000    0.000    0.000    0.000 core.py:2463(decompose)\r\n"]
[512.852545, "o", "        1    0.000    0.000    0.000    0.000 utils.py:193(sanitize_scale)\r\n"]
[512.927455, "o", "        8    0.000    0.000    0.000    0.000 {built-in method builtins.isinstance}\r\n"]
[513.002364, "o", "        1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}\r\n"]
[513.077273, "o", "        1    0.000    0.000    0.000    0.000 core.py:2451(<lambda>)\r\n"]
[513.152182, "o", "        1    0.000    0.000    0.000    0.000 core.py:2454(<listcomp>)\r\n"]
[513.227091, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:836(_set_unit)\r\n"]
[513.302, "o", "        1    0.000    0.000    0.000    0.000 core.py:2450(<listcomp>)\r\n"]
[513.376909, "o", "        1    0.000    0.000    0.000    0.000 {built-in method numpy.array}\r\n"]
[513.451818, "o", "        3    0.000    0.000    0.000    0.000 quantity.py:1009(unit)\r\n"]
[513.526727, "o", "        1    0.000    0.000    0.000    0.000 utils.py:181(is_effectively_unity)\r\n"]
[513.601636, "o", "        1    0.000    0.000    0.000    0.000 {built-in method builtins.any}\r\n"]
[513.676545, "o", "        5    0.000    0.000    0.000    0.000 {built-in method builtins.len}\r\n"]
[513.751455, "o", "        1    0.000    0.000    0.000    0.000 utils.py:328(resolve_fractions)\r\n"]
[513.826364, "o", "        5    0.000    0.000    0.000    0.000 core.py:2282(__hash__)\r\n"]
[513.901273, "o", "        1    0.000    0.000    0.000    0.000 {built-in method builtins.hasattr}\r\n"]
[513.976182, "o", "        1    0.000    0.000    0.000    0.000 core.py:1874(name)\r\n"]
[514.051091, "o", "        2    0.000    0.000    0.000    0.000 core.py:2402(bases)\r\n"]
[514.126, "o", "        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}\r\n"]
[514.200909, "o", "        3    0.000    0.000    0.000    0.000 converters.py:183(<genexpr>)\r\n"]
[514.275818, "o", "        1    0.000    0.000    0.000    0.000 core.py:2453(<listcomp>)\r\n"]
[514.350727, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:746(__quantity_subclass__)\r\n"]
[514.425636, "o", "        2    0.000    0.000    0.000    0.000 {function Quantity.__array_finalize__ at 0x7fc0f50140e0}\r\n"]
[514.500545, "o", "        2    0.000    0.000    0.000    0.000 helpers.py:31(_d)\r\n"]
[514.575455, "o", "        1    0.000    0.000    0.000    0.000 utils.py:288(sanitize_power)\r\n"]
[514.650364, "o", "        2    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}\r\n"]
[514.725273, "o", "        1    0.000    0.000    0.000    0.000 {method 'items' of 'dict' objects}\r\n"]
[514.800182, "o", "        1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}\r\n"]
[514.875091, "o", "\r\n"]
[515.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[515.002, "i", "applypatch << 'PATCH'\r"]
[515.004, "o", "applypatch << 'PATCH'\r\n"]
[515.182571, "o", "\u001b[?2004l\r\n"]
[515.359143, "o", "\u001b[?2004h> *** Begin Patch\r\n"]
[515.535714, "o", "\u001b[?2004l\r\n"]
[515.712286, "o", "\u001b[?2004h> *** Update File: astropy/units/core.py\r\n"]
[515.888857, "o", "\u001b[?2004l\r\n"]
[516.065429, "o", "\u001b[?2004h> @@\r\n"]
[516.242, "o", "\u001b[?2004l\r\n"]
[516.418571, "o", "\u001b[?2004h> -        self._bases = [x[0] for x in new_parts]\r\n"]
[516.595143, "o", "\u001b[?2004l\r\n"]
[516.771714, "o", "\u001b[?2004h> -        self._powers = [sanitize_power(x[1]) for x in new_parts]\r\n"]
[516.948286, "o", "\u001b[?2004l\r\n"]
[517.124857, "o", "\u001b[?2004h> +        # Extract bases and powers. Avoid calling sanitize_power for the\r\n"]
[517.301429, "o", "\u001b[?2004l\r\n"]
[517.478, "o", "\u001b[?2004h> +        # common case of integer powers to reduce overhead on hot paths.\r\n"]
[517.654571, "o", "\u001b[?2004l\r\n"]
[517.831143, "o", "\u001b[?2004h> +        self._bases = [x[0] for x in new_parts]\r\n"]
[518.007714, "o", "\u001b[?2004l\r\n"]
[518.184286, "o", "\u001b[?2004h> +        self._powers = [\r\n"]
[518.360857, "o", "\u001b[?2004l\r\n"]
[518.537429, "o", "\u001b[?2004h> +            (p if isinstance(p, int) else sanitize_power(p)) for _, p in new_parts\r\n"]
[518.714, "o", "\u001b[?2004l\r\n"]
[518.890571, "o", "\u001b[?2004h> +        ]\r\n"]
[519.067143, "o", "\u001b[?2004l\r\n"]
[519.243714, "o", "\u001b[?2004h> *** End Patch\r\n"]
[519.420286, "o", "\u001b[?2004l\r\n"]
[519.596857, "o", "\u001b[?2004h> PATCH\r\n"]
[519.773429, "o", "\u001b[?2004l\r\n"]
[520.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[520.002, "i", "cat asv.ci.conf.json\r"]
[520.004, "o", "cat asv.ci.conf.json\r\n"]
[520.3356, "o", "\u001b[?2004l\r\n"]
[520.6652, "o", " {\r\n"]
[520.9948, "o", "   \"version\": 1,\r\n"]
[521.3244, "o", "   \"project\": \"astropy\",\r\n"]
[521.654, "o", "   \"project_url\": \"http://www.astropy.org/\",\r\n"]
[521.9836, "o", "   \"repo\": \".\",\r\n"]
[522.3132, "o", "   \"install_command\": [\r\n"]
[522.6428, "o", "     \"pip install . matplotlib scipy\"\r\n"]
[522.9724, "o", "   ],\r\n"]
[523.302, "o", "   \"branches\": [\"main\"],\r\n"]
[523.6316, "o", "   \"show_commit_url\": \"http://github.com/astropy/astropy/commit/\",\r\n"]
[523.9612, "o", "   \"pythons\": [\"3.11\"],\r\n"]
[524.2908, "o", "   \"environment_type\": \"virtualenv\",\r\n"]
[524.6204, "o", "   \"benchmark_dir\": \"astropy-benchmarks/benchmarks\"\r\n"]
[525.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[525.002, "i", "grep -R \"compose\" -n astropy-benchmarks/benchmarks || true\r"]
[525.004, "o", "grep -R \"compose\" -n astropy-benchmarks/benchmarks || true\r\n"]
[525.712286, "o", "\u001b[?2004l\r\n"]
[526.418571, "o", "\u001b[35m\u001b[Kastropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K10\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[Kdef time_unit_\u001b[01;31m\u001b[Kcompose\u001b[m\u001b[K():\r\n"]
[527.124857, "o", "\u001b[35m\u001b[Kastropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K11\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    u.Ry.\u001b[01;31m\u001b[Kcompose\u001b[m\u001b[K()\r\n"]
[527.831143, "o", "\u001b[35m\u001b[Kastropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K34\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[Kdef time_\u001b[01;31m\u001b[Kcompose\u001b[m\u001b[K_to_bases():\r\n"]
[528.537429, "o", "\u001b[35m\u001b[Kastropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K39\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[Kdef time_\u001b[01;31m\u001b[Kcompose\u001b[m\u001b[K_complex():\r\n"]
[529.243714, "o", "\u001b[35m\u001b[Kastropy-benchmarks/benchmarks/units.py\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[32m\u001b[K41\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    (u.kg / u.s**3 * u.au**2.5 / u.yr**0.5 / u.sr**2).\u001b[01;31m\u001b[Kcompose\u001b[m\u001b[K()\r\n"]
[530.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[530.002, "i", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r"]
[530.004, "o", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r\n"]
[530.151412, "o", "reation_nocopy|units.time_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view|units.TimeQuanti\r\n"]
[530.296824, "o", "ityOpLargeArraySameUnit.*|units.TimeQuantityOpLargeArrayDiffUnit.*|units.time_unit_compose.*|units.time_compose_to_bases.*\" --quick\r\n"]
[530.442235, "o", "\u001b[?2004l\r\n"]
[530.587647, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[530.733059, "o", "\u00b7 \u001b[0;32mRunning 28 total benchmarks (1 commits * 1 environments * 28 benchmarks)\u001b[0m\r\n"]
[530.878471, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[531.023882, "o", "[ 1.79%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_add\u001b[0m                                                                                  2.14\u00b10ms\r\n"]
[531.169294, "o", "[ 3.57%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_equal\u001b[0m                                                                                2.01\u00b10ms\r\n"]
[531.314706, "o", "[ 5.36%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_mul\u001b[0m                                                                                  1.71\u00b10ms\r\n"]
[531.460118, "o", "[ 7.14%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_add\u001b[0m                                                                               2.96\u00b10ms\r\n"]
[531.605529, "o", "[ 8.93%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_equal\u001b[0m                                                                             2.31\u00b10ms\r\n"]
[531.750941, "o", "[10.71%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_multiply\u001b[0m                                                                          1.44\u00b10ms\r\n"]
[531.896353, "o", "[12.50%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_subtract\u001b[0m                                                                          2.90\u00b10ms\r\n"]
[532.041765, "o", "[14.29%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_truediv\u001b[0m                                                                           1.75\u00b10ms\r\n"]
[532.187176, "o", "[16.07%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_sub\u001b[0m                                                                                  2.35\u00b10ms\r\n"]
[532.332588, "o", "[17.86%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_truediv\u001b[0m                                                                              1.37\u00b10ms\r\n"]
[532.478, "o", "[19.64%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_add\u001b[0m                                                                                  1.33\u00b10ms\r\n"]
[532.623412, "o", "[21.43%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_equal\u001b[0m                                                                                1.14\u00b10ms\r\n"]
[532.768824, "o", "[23.21%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\u001b[0m                                                                                  1.80\u00b10ms\r\n"]
[532.914235, "o", "[25.00%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_add\u001b[0m                                                                               1.56\u00b10ms\r\n"]
[533.059647, "o", "[26.79%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_equal\u001b[0m                                                                             1.21\u00b10ms\r\n"]
[533.205059, "o", "[28.57%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_multiply\u001b[0m                                                                          1.42\u00b10ms\r\n"]
[533.350471, "o", "[30.36%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_subtract\u001b[0m                                                                          1.44\u00b10ms\r\n"]
[533.495882, "o", "[32.14%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_truediv\u001b[0m                                                                           1.56\u00b10ms\r\n"]
[533.641294, "o", "[33.93%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_sub\u001b[0m                                                                                  1.49\u00b10ms\r\n"]
[533.786706, "o", "[35.71%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_truediv\u001b[0m                                                                              1.38\u00b10ms\r\n"]
[533.932118, "o", "[37.50%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_compose_to_bases\u001b[0m                                                                                                               2.16\u00b10ms\r\n"]
[534.077529, "o", "[39.29%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_array_conversion\u001b[0m                                                                                                      1.11\u00b10ms\r\n"]
[534.222941, "o", "[41.07%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_creation_nocopy\u001b[0m                                                                                                        129\u00b10\u03bcs\r\n"]
[534.368353, "o", "[42.86%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_array\u001b[0m                                                                                                       296\u00b10\u03bcs\r\n"]
[534.513765, "o", "[44.64%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_list\u001b[0m                                                                                                        314\u00b10\u03bcs\r\n"]
[534.659176, "o", "[46.43%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_times_unit\u001b[0m                                                                                                             563\u00b10\u03bcs\r\n"]
[534.804588, "o", "[48.21%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_view\u001b[0m                                                                                                                  88.8\u00b10\u03bcs\r\n"]
[535.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[535.002, "i", "asv profile --config asv.ci.conf.json --python=same units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\r"]
[535.004, "o", "asv profile --config asv.ci.conf.json --python=same units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\r\n"]
[535.080909, "o", "\u001b[?2004l\r\n"]
[535.155818, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[535.230727, "o", "\u00b7 \u001b[0;32mProfile data does not already exist. Running profiler now.\u001b[0m\r\n"]
[535.305636, "o", "\u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[535.380545, "o", "\u00b7\u00b7\u00b7 \u001b[0;39mRunning (units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul--)\u001b[0m.\r\n"]
[535.455455, "o", "\u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\u001b[0m                                                                                1.63\u00b10.1ms\r\n"]
[535.530364, "o", "\r\n"]
[535.605273, "o", "Wed Oct  1 12:21:03 2025    /tmp/tmp5jqzouvd\r\n"]
[535.680182, "o", "\r\n"]
[535.755091, "o", "         86 function calls in 0.002 seconds\r\n"]
[535.83, "o", "\r\n"]
[535.904909, "o", "   Ordered by: cumulative time\r\n"]
[535.979818, "o", "\r\n"]
[536.054727, "o", "   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\r\n"]
[536.129636, "o", "        1    0.000    0.000    0.002    0.002 {built-in method builtins.exec}\r\n"]
[536.204545, "o", "        1    0.000    0.000    0.002    0.002 _base.py:689(method_caller)\r\n"]
[536.279455, "o", "        1    0.000    0.000    0.002    0.002 units.py:181(time_quantity_mul)\r\n"]
[536.354364, "o", "        1    0.000    0.000    0.002    0.002 quantity.py:1209(__mul__)\r\n"]
[536.429273, "o", "        1    0.000    0.000    0.002    0.002 quantity.py:613(__array_ufunc__)\r\n"]
[536.504182, "o", "        1    0.001    0.001    0.001    0.001 {function Quantity.__array_ufunc__ at 0x7f552dcdc220}\r\n"]
[536.579091, "o", "        1    0.000    0.000    0.000    0.000 converters.py:141(converters_and_unit)\r\n"]
[536.654, "o", "        1    0.000    0.000    0.000    0.000 helpers.py:219(helper_multiplication)\r\n"]
[536.728909, "o", "        1    0.000    0.000    0.000    0.000 core.py:869(__mul__)\r\n"]
[536.803818, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:694(_result_as_quantity)\r\n"]
[536.878727, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:764(_new_view)\r\n"]
[536.953636, "o", "        1    0.000    0.000    0.000    0.000 core.py:2335(__init__)\r\n"]
[537.028545, "o", "        1    0.000    0.000    0.000    0.000 core.py:2416(_expand_and_gather)\r\n"]
[537.103455, "o", "        6    0.000    0.000    0.000    0.000 {built-in method builtins.getattr}\r\n"]
[537.178364, "o", "        2    0.000    0.000    0.000    0.000 core.py:2279(is_unity)\r\n"]
[537.253273, "o", "        1    0.000    0.000    0.000    0.000 core.py:2069(__call__)\r\n"]
[537.328182, "o", "        3    0.000    0.000    0.000    0.000 {method 'view' of 'numpy.ndarray' objects}\r\n"]
[537.403091, "o", "        2    0.000    0.000    0.000    0.000 core.py:2417(add_unit)\r\n"]
[537.478, "o", "        2    0.000    0.000    0.000    0.000 core.py:2484(is_unity)\r\n"]
[537.552909, "o", "        2    0.000    0.000    0.000    0.000 quantity.py:574(__array_finalize__)\r\n"]
[537.627818, "o", "        2    0.000    0.000    0.000    0.000 quantity.py:945(to_value)\r\n"]
[537.702727, "o", "        2    0.000    0.000    0.000    0.000 core.py:2463(decompose)\r\n"]
[537.777636, "o", "        1    0.000    0.000    0.000    0.000 converters.py:178(<listcomp>)\r\n"]
[537.852545, "o", "        1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}\r\n"]
[537.927455, "o", "        1    0.000    0.000    0.000    0.000 utils.py:193(sanitize_scale)\r\n"]
[538.002364, "o", "        8    0.000    0.000    0.000    0.000 {built-in method builtins.isinstance}\r\n"]
[538.077273, "o", "        1    0.000    0.000    0.000    0.000 core.py:2451(<lambda>)\r\n"]
[538.152182, "o", "        1    0.000    0.000    0.000    0.000 core.py:2454(<listcomp>)\r\n"]
[538.227091, "o", "        1    0.000    0.000    0.000    0.000 {built-in method builtins.any}\r\n"]
[538.302, "o", "        1    0.000    0.000    0.000    0.000 core.py:2450(<listcomp>)\r\n"]
[538.376909, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:836(_set_unit)\r\n"]
[538.451818, "o", "        5    0.000    0.000    0.000    0.000 {built-in method builtins.len}\r\n"]
[538.526727, "o", "        1    0.000    0.000    0.000    0.000 utils.py:328(resolve_fractions)\r\n"]
[538.601636, "o", "        3    0.000    0.000    0.000    0.000 quantity.py:1009(unit)\r\n"]
[538.676545, "o", "        5    0.000    0.000    0.000    0.000 core.py:2282(__hash__)\r\n"]
[538.751455, "o", "        1    0.000    0.000    0.000    0.000 utils.py:181(is_effectively_unity)\r\n"]
[538.826364, "o", "        1    0.000    0.000    0.000    0.000 {built-in method numpy.array}\r\n"]
[538.901273, "o", "        1    0.000    0.000    0.000    0.000 core.py:1874(name)\r\n"]
[538.976182, "o", "        3    0.000    0.000    0.000    0.000 converters.py:183(<genexpr>)\r\n"]
[539.051091, "o", "        1    0.000    0.000    0.000    0.000 {built-in method builtins.hasattr}\r\n"]
[539.126, "o", "        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}\r\n"]
[539.200909, "o", "        2    0.000    0.000    0.000    0.000 core.py:2402(bases)\r\n"]
[539.275818, "o", "        1    0.000    0.000    0.000    0.000 {method 'items' of 'dict' objects}\r\n"]
[539.350727, "o", "        1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}\r\n"]
[539.425636, "o", "        2    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}\r\n"]
[539.500545, "o", "        1    0.000    0.000    0.000    0.000 utils.py:288(sanitize_power)\r\n"]
[539.575455, "o", "        2    0.000    0.000    0.000    0.000 {function Quantity.__array_finalize__ at 0x7f552dcdc0e0}\r\n"]
[539.650364, "o", "        1    0.000    0.000    0.000    0.000 core.py:2453(<listcomp>)\r\n"]
[539.725273, "o", "        2    0.000    0.000    0.000    0.000 helpers.py:31(_d)\r\n"]
[539.800182, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:746(__quantity_subclass__)\r\n"]
[539.875091, "o", "\r\n"]
[540.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[540.002, "i", "sed -n '1,260p' astropy-benchmarks/benchmarks/units.py\r"]
[540.004, "o", "sed -n '1,260p' astropy-benchmarks/benchmarks/units.py\r\n"]
[540.026861, "o", "\u001b[?2004l\r\n"]
[540.047722, "o", "import copy\r\n"]
[540.068582, "o", "\r\n"]
[540.089443, "o", "import numpy as np\r\n"]
[540.110304, "o", "from astropy import units as u\r\n"]
[540.131165, "o", "\r\n"]
[540.152025, "o", "\r\n"]
[540.172886, "o", "# Unit tests\r\n"]
[540.193747, "o", "\r\n"]
[540.214608, "o", "\r\n"]
[540.235468, "o", "def time_unit_compose():\r\n"]
[540.256329, "o", "    u.Ry.compose()\r\n"]
[540.27719, "o", "\r\n"]
[540.298051, "o", "\r\n"]
[540.318911, "o", "def time_unit_to():\r\n"]
[540.339772, "o", "    u.m.to(u.pc)\r\n"]
[540.360633, "o", "\r\n"]
[540.381494, "o", "\r\n"]
[540.402354, "o", "def time_unit_parse():\r\n"]
[540.423215, "o", "    u.Unit(\"1e-07 kg m2 / s2\")\r\n"]
[540.444076, "o", "\r\n"]
[540.464937, "o", "\r\n"]
[540.485797, "o", "def time_simple_unit_parse():\r\n"]
[540.506658, "o", "    u.Unit(\"1 d\")\r\n"]
[540.527519, "o", "\r\n"]
[540.54838, "o", "\r\n"]
[540.569241, "o", "def time_very_simple_unit_parse():\r\n"]
[540.590101, "o", "    u.Unit(\"d\")\r\n"]
[540.610962, "o", "\r\n"]
[540.631823, "o", "\r\n"]
[540.652684, "o", "def mem_unit():\r\n"]
[540.673544, "o", "    return u.erg\r\n"]
[540.694405, "o", "\r\n"]
[540.715266, "o", "\r\n"]
[540.736127, "o", "def time_compose_to_bases():\r\n"]
[540.756987, "o", "    x = copy.copy(u.Ry)\r\n"]
[540.777848, "o", "    x.cgs\r\n"]
[540.798709, "o", "\r\n"]
[540.81957, "o", "\r\n"]
[540.84043, "o", "def time_compose_complex():\r\n"]
[540.861291, "o", "    # Composing a complex unit can be very inefficient\r\n"]
[540.882152, "o", "    (u.kg / u.s**3 * u.au**2.5 / u.yr**0.5 / u.sr**2).compose()\r\n"]
[540.903013, "o", "\r\n"]
[540.923873, "o", "\r\n"]
[540.944734, "o", "# Quantity tests\r\n"]
[540.965595, "o", "\r\n"]
[540.986456, "o", "a = np.arange(100000.0)\r\n"]
[541.007316, "o", "b1 = [1.0, 2.0, 3.0]\r\n"]
[541.028177, "o", "b2 = np.asarray(b1)\r\n"]
[541.049038, "o", "q0 = u.Quantity(1.0, u.s)\r\n"]
[541.069899, "o", "q1 = u.Quantity(a, u.m)\r\n"]
[541.090759, "o", "q2 = u.Quantity(a[:10000], u.deg)\r\n"]
[541.11162, "o", "\r\n"]
[541.132481, "o", "\r\n"]
[541.153342, "o", "def time_quantity_creation():\r\n"]
[541.174203, "o", "    u.Quantity(a, u.m)\r\n"]
[541.195063, "o", "\r\n"]
[541.215924, "o", "\r\n"]
[541.236785, "o", "def time_quantity_creation_nocopy():\r\n"]
[541.257646, "o", "    u.Quantity(a, u.m, copy=False)\r\n"]
[541.278506, "o", "\r\n"]
[541.299367, "o", "\r\n"]
[541.320228, "o", "def time_quantity_view():\r\n"]
[541.341089, "o", "    q1.view(u.Quantity)\r\n"]
[541.361949, "o", "\r\n"]
[541.38281, "o", "\r\n"]
[541.403671, "o", "def time_quantity_init_scalar():\r\n"]
[541.424532, "o", "    3.0 * u.m / u.s\r\n"]
[541.445392, "o", "\r\n"]
[541.466253, "o", "\r\n"]
[541.487114, "o", "def time_quantity_init_array():\r\n"]
[541.507975, "o", "    a * u.m / u.s\r\n"]
[541.528835, "o", "\r\n"]
[541.549696, "o", "\r\n"]
[541.570557, "o", "def time_quantity_init_small_list():\r\n"]
[541.591418, "o", "    \"\"\"\r\n"]
[541.612278, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[541.633139, "o", "    for small list.\r\n"]
[541.654, "o", "    \"\"\"\r\n"]
[541.674861, "o", "    b1 * u.m / u.s\r\n"]
[541.695722, "o", "\r\n"]
[541.716582, "o", "\r\n"]
[541.737443, "o", "def time_quantity_init_small_array():\r\n"]
[541.758304, "o", "    \"\"\"\r\n"]
[541.779165, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[541.800025, "o", "    for small array.\r\n"]
[541.820886, "o", "    \"\"\"\r\n"]
[541.841747, "o", "    b2 * u.m / u.s\r\n"]
[541.862608, "o", "\r\n"]
[541.883468, "o", "\r\n"]
[541.904329, "o", "def time_quantity_scalar_conversion():\r\n"]
[541.92519, "o", "    (3.0 * u.m / u.s).to(u.km / u.hour)\r\n"]
[541.946051, "o", "\r\n"]
[541.966911, "o", "\r\n"]
[541.987772, "o", "def time_quantity_array_conversion():\r\n"]
[542.008633, "o", "    (a * u.m / u.s).to(u.km / u.hour)\r\n"]
[542.029494, "o", "\r\n"]
[542.050354, "o", "\r\n"]
[542.071215, "o", "def time_quantity_times_unit():\r\n"]
[542.092076, "o", "    q1 * u.m\r\n"]
[542.112937, "o", "\r\n"]
[542.133797, "o", "\r\n"]
[542.154658, "o", "def time_quantity_times_quantity():\r\n"]
[542.175519, "o", "    q1 * q0\r\n"]
[542.19638, "o", "\r\n"]
[542.217241, "o", "\r\n"]
[542.238101, "o", "def time_quantity_ufunc_sin():\r\n"]
[542.258962, "o", "    np.sin(q2)\r\n"]
[542.279823, "o", "\r\n"]
[542.300684, "o", "\r\n"]
[542.321544, "o", "class TimeQuantityOpSmallArray:\r\n"]
[542.342405, "o", "    \"\"\"\r\n"]
[542.363266, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[542.384127, "o", "    for a small Numpy array.\r\n"]
[542.404987, "o", "    \"\"\"\r\n"]
[542.425848, "o", "\r\n"]
[542.446709, "o", "    def setup(self):\r\n"]
[542.46757, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[542.48843, "o", "        self.data = data * u.g\r\n"]
[542.509291, "o", "        self.out_sq = data * u.g**2\r\n"]
[542.530152, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[542.551013, "o", "\r\n"]
[542.571873, "o", "    def time_quantity_square(self):\r\n"]
[542.592734, "o", "        self.data**2\r\n"]
[542.613595, "o", "\r\n"]
[542.634456, "o", "    def time_quantity_np_square(self):\r\n"]
[542.655316, "o", "        np.power(self.data, 2)\r\n"]
[542.676177, "o", "\r\n"]
[542.697038, "o", "    def time_quantity_np_square_out(self):\r\n"]
[542.717899, "o", "        np.power(self.data, 2, out=self.out_sq)\r\n"]
[542.738759, "o", "\r\n"]
[542.75962, "o", "    def time_quantity_sqrt(self):\r\n"]
[542.780481, "o", "        self.data**0.5\r\n"]
[542.801342, "o", "\r\n"]
[542.822203, "o", "    def time_quantity_np_sqrt(self):\r\n"]
[542.843063, "o", "        np.sqrt(self.data)\r\n"]
[542.863924, "o", "\r\n"]
[542.884785, "o", "    def time_quantity_np_sqrt_out(self):\r\n"]
[542.905646, "o", "        np.sqrt(self.data, out=self.out_sqrt)\r\n"]
[542.926506, "o", "\r\n"]
[542.947367, "o", "\r\n"]
[542.968228, "o", "class TimeQuantityOpLargeArray(TimeQuantityOpSmallArray):\r\n"]
[542.989089, "o", "    \"\"\"\r\n"]
[543.009949, "o", "    Like :class:`TimeQuantityOpSmallArray` but for a large Numpy array.\r\n"]
[543.03081, "o", "    \"\"\"\r\n"]
[543.051671, "o", "\r\n"]
[543.072532, "o", "    def setup(self):\r\n"]
[543.093392, "o", "        data = np.arange(1e6) + 1\r\n"]
[543.114253, "o", "        self.data = data * u.g\r\n"]
[543.135114, "o", "        self.out_sq = data * u.g**2\r\n"]
[543.155975, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[543.176835, "o", "\r\n"]
[543.197696, "o", "\r\n"]
[543.218557, "o", "class TimeQuantityOpSmallArrayDiffUnit:\r\n"]
[543.239418, "o", "    \"\"\"\r\n"]
[543.260278, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[543.281139, "o", "    for small Numpy arrays with different units.\r\n"]
[543.302, "o", "    \"\"\"\r\n"]
[543.322861, "o", "\r\n"]
[543.343722, "o", "    def setup(self):\r\n"]
[543.364582, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[543.385443, "o", "        self.data = data * u.g\r\n"]
[543.406304, "o", "\r\n"]
[543.427165, "o", "        # A different but dimensionally compatible unit\r\n"]
[543.448025, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[543.468886, "o", "\r\n"]
[543.489747, "o", "    def time_quantity_equal(self):\r\n"]
[543.510608, "o", "        # Same as operator.eq\r\n"]
[543.531468, "o", "        self.data == self.data2\r\n"]
[543.552329, "o", "\r\n"]
[543.57319, "o", "    def time_quantity_np_equal(self):\r\n"]
[543.594051, "o", "        np.equal(self.data, self.data2)\r\n"]
[543.614911, "o", "\r\n"]
[543.635772, "o", "    def time_quantity_truediv(self):\r\n"]
[543.656633, "o", "        # Since benchmark is PY3 only, this is always true divide.\r\n"]
[543.677494, "o", "        # Same as operator.truediv\r\n"]
[543.698354, "o", "        self.data / self.data2\r\n"]
[543.719215, "o", "\r\n"]
[543.740076, "o", "    def time_quantity_np_truediv(self):\r\n"]
[543.760937, "o", "        np.true_divide(self.data, self.data2)\r\n"]
[543.781797, "o", "\r\n"]
[543.802658, "o", "    def time_quantity_mul(self):\r\n"]
[543.823519, "o", "        # Same as operator.mul\r\n"]
[543.84438, "o", "        self.data * self.data2\r\n"]
[543.865241, "o", "\r\n"]
[543.886101, "o", "    def time_quantity_np_multiply(self):\r\n"]
[543.906962, "o", "        np.multiply(self.data, self.data2)\r\n"]
[543.927823, "o", "\r\n"]
[543.948684, "o", "    def time_quantity_sub(self):\r\n"]
[543.969544, "o", "        # Same as operator.sub\r\n"]
[543.990405, "o", "        self.data - self.data2\r\n"]
[544.011266, "o", "\r\n"]
[544.032127, "o", "    def time_quantity_np_subtract(self):\r\n"]
[544.052987, "o", "        np.subtract(self.data, self.data2)\r\n"]
[544.073848, "o", "\r\n"]
[544.094709, "o", "    def time_quantity_add(self):\r\n"]
[544.11557, "o", "        # Same as operator.add\r\n"]
[544.13643, "o", "        self.data + self.data2\r\n"]
[544.157291, "o", "\r\n"]
[544.178152, "o", "    def time_quantity_np_add(self):\r\n"]
[544.199013, "o", "        np.add(self.data, self.data2)\r\n"]
[544.219873, "o", "\r\n"]
[544.240734, "o", "\r\n"]
[544.261595, "o", "class TimeQuantityOpSmallArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[544.282456, "o", "    \"\"\"\r\n"]
[544.303316, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[544.324177, "o", "    for small Numpy arrays with same units.\r\n"]
[544.345038, "o", "    \"\"\"\r\n"]
[544.365899, "o", "\r\n"]
[544.386759, "o", "    def setup(self):\r\n"]
[544.40762, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[544.428481, "o", "        self.data = data * u.g\r\n"]
[544.449342, "o", "        self.data2 = self.data.copy()\r\n"]
[544.470203, "o", "\r\n"]
[544.491063, "o", "\r\n"]
[544.511924, "o", "class TimeQuantityOpLargeArrayDiffUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[544.532785, "o", "    \"\"\"\r\n"]
[544.553646, "o", "    Like :class:`TimeQuantityOpSmallArrayDiffUnit` but for large Numpy arrays.\r\n"]
[544.574506, "o", "    \"\"\"\r\n"]
[544.595367, "o", "\r\n"]
[544.616228, "o", "    def setup(self):\r\n"]
[544.637089, "o", "        data = np.arange(1e6) + 1\r\n"]
[544.657949, "o", "        self.data = data * u.g\r\n"]
[544.67881, "o", "\r\n"]
[544.699671, "o", "        # A different but dimensionally compatible unit\r\n"]
[544.720532, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[544.741392, "o", "\r\n"]
[544.762253, "o", "\r\n"]
[544.783114, "o", "class TimeQuantityOpLargeArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[544.803975, "o", "    \"\"\"\r\n"]
[544.824835, "o", "    Like :class:`TimeQuantityOpSmallArraySameUnit` but for large Numpy arrays.\r\n"]
[544.845696, "o", "    \"\"\"\r\n"]
[544.866557, "o", "\r\n"]
[544.887418, "o", "    def setup(self):\r\n"]
[544.908278, "o", "        data = np.arange(1e6) + 1\r\n"]
[544.929139, "o", "        self.data = data * u.g\r\n"]
[545.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[545.002, "i", "sed -n '260,520p' astropy-benchmarks/benchmarks/units.py\r"]
[545.004, "o", "sed -n '260,520p' astropy-benchmarks/benchmarks/units.py\r\n"]
[545.006, "o", "\u001b[?2004l\r\n"]
[550.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[550.002, "i", "grep -n \"compose\" -n astropy-benchmarks/benchmarks/units.py || true\r"]
[550.004, "o", "grep -n \"compose\" -n astropy-benchmarks/benchmarks/units.py || true\r\n"]
[550.83, "o", "\u001b[?2004l\r\n"]
[551.654, "o", "\u001b[32m\u001b[K10\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[Kdef time_unit_\u001b[01;31m\u001b[Kcompose\u001b[m\u001b[K():\r\n"]
[552.478, "o", "\u001b[32m\u001b[K11\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    u.Ry.\u001b[01;31m\u001b[Kcompose\u001b[m\u001b[K()\r\n"]
[553.302, "o", "\u001b[32m\u001b[K34\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[Kdef time_\u001b[01;31m\u001b[Kcompose\u001b[m\u001b[K_to_bases():\r\n"]
[554.126, "o", "\u001b[32m\u001b[K39\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[Kdef time_\u001b[01;31m\u001b[Kcompose\u001b[m\u001b[K_complex():\r\n"]
[555.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[555.002, "i", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r"]
[555.004, "o", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r\n"]
[555.1605, "o", "reation_nocopy|units.time_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view|units.TimeQuanti\r\n"]
[555.315, "o", "ityOpLargeArraySameUnit.*|units.TimeQuantityOpLargeArrayDiffUnit.*\" --quick\r\n"]
[555.4695, "o", "\u001b[?2004l\r\n"]
[555.624, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[555.7785, "o", "\u00b7 \u001b[0;32mRunning 26 total benchmarks (1 commits * 1 environments * 26 benchmarks)\u001b[0m\r\n"]
[555.933, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[556.0875, "o", "[ 1.92%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_add\u001b[0m                                                                                  2.31\u00b10ms\r\n"]
[556.242, "o", "[ 3.85%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_equal\u001b[0m                                                                                2.20\u00b10ms\r\n"]
[556.3965, "o", "[ 5.77%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_mul\u001b[0m                                                                                  1.40\u00b10ms\r\n"]
[556.551, "o", "[ 7.69%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_add\u001b[0m                                                                               2.21\u00b10ms\r\n"]
[556.7055, "o", "[ 9.62%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_equal\u001b[0m                                                                             2.09\u00b10ms\r\n"]
[556.86, "o", "[11.54%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_multiply\u001b[0m                                                                          1.88\u00b10ms\r\n"]
[557.0145, "o", "[13.46%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_subtract\u001b[0m                                                                          2.63\u00b10ms\r\n"]
[557.169, "o", "[15.38%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_truediv\u001b[0m                                                                           1.51\u00b10ms\r\n"]
[557.3235, "o", "[17.31%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_sub\u001b[0m                                                                                  2.38\u00b10ms\r\n"]
[557.478, "o", "[19.23%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_truediv\u001b[0m                                                                              1.44\u00b10ms\r\n"]
[557.6325, "o", "[21.15%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_add\u001b[0m                                                                                  1.37\u00b10ms\r\n"]
[557.787, "o", "[23.08%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_equal\u001b[0m                                                                                1.20\u00b10ms\r\n"]
[557.9415, "o", "[25.00%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\u001b[0m                                                                                  1.52\u00b10ms\r\n"]
[558.096, "o", "[26.92%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_add\u001b[0m                                                                               1.37\u00b10ms\r\n"]
[558.2505, "o", "[28.85%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_equal\u001b[0m                                                                             1.18\u00b10ms\r\n"]
[558.405, "o", "[30.77%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_multiply\u001b[0m                                                                          1.38\u00b10ms\r\n"]
[558.5595, "o", "[32.69%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_subtract\u001b[0m                                                                          1.28\u00b10ms\r\n"]
[558.714, "o", "[34.62%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_truediv\u001b[0m                                                                           1.39\u00b10ms\r\n"]
[558.8685, "o", "[36.54%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_sub\u001b[0m                                                                                  1.78\u00b10ms\r\n"]
[559.023, "o", "[38.46%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_truediv\u001b[0m                                                                              1.75\u00b10ms\r\n"]
[559.1775, "o", "[40.38%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_array_conversion\u001b[0m                                                                                                      1.19\u00b10ms\r\n"]
[559.332, "o", "[42.31%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_creation_nocopy\u001b[0m                                                                                                        138\u00b10\u03bcs\r\n"]
[559.4865, "o", "[44.23%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_array\u001b[0m                                                                                                       339\u00b10\u03bcs\r\n"]
[559.641, "o", "[46.15%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_list\u001b[0m                                                                                                        341\u00b10\u03bcs\r\n"]
[559.7955, "o", "[48.08%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_times_unit\u001b[0m                                                                                                             691\u00b10\u03bcs\r\n"]
[560.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[560.002, "i", "grep -n \"def __mul__\" astropy/units/quantity.py\r"]
[560.004, "o", "grep -n \"def __mul__\" astropy/units/quantity.py\r\n"]
[562.478, "o", "\u001b[?2004l\r\n"]
[565.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[565.002, "i", "sed -n '1180,1235p' astropy/units/quantity.py\r"]
[565.004, "o", "sed -n '1180,1235p' astropy/units/quantity.py\r\n"]
[565.092737, "o", "\u001b[?2004l\r\n"]
[565.179474, "o", "            return NotImplemented\r\n"]
[565.266211, "o", "\r\n"]
[565.352947, "o", "        self._set_unit(other)\r\n"]
[565.439684, "o", "        return self\r\n"]
[565.526421, "o", "\r\n"]
[565.613158, "o", "    def __rlshift__(self, other):\r\n"]
[565.699895, "o", "        if not self.isscalar:\r\n"]
[565.786632, "o", "            return NotImplemented\r\n"]
[565.873368, "o", "        return Unit(self).__rlshift__(other)\r\n"]
[565.960105, "o", "\r\n"]
[566.046842, "o", "    # Give warning for other >> self, since probably other << self was meant.\r\n"]
[566.133579, "o", "    def __rrshift__(self, other):\r\n"]
[566.220316, "o", "        warnings.warn(\r\n"]
[566.307053, "o", "            \">> is not implemented. Did you mean to convert \"\r\n"]
[566.393789, "o", "            \"something to this quantity as a unit using '<<'?\",\r\n"]
[566.480526, "o", "            AstropyWarning,\r\n"]
[566.567263, "o", "        )\r\n"]
[566.654, "o", "        return NotImplemented\r\n"]
[566.740737, "o", "\r\n"]
[566.827474, "o", "    # Also define __rshift__ and __irshift__ so we override default ndarray\r\n"]
[566.914211, "o", "    # behaviour, but instead of emitting a warning here, let it be done by\r\n"]
[567.000947, "o", "    # other (which likely is a unit if this was a mistake).\r\n"]
[567.087684, "o", "    def __rshift__(self, other):\r\n"]
[567.174421, "o", "        return NotImplemented\r\n"]
[567.261158, "o", "\r\n"]
[567.347895, "o", "    def __irshift__(self, other):\r\n"]
[567.434632, "o", "        return NotImplemented\r\n"]
[567.521368, "o", "\r\n"]
[567.608105, "o", "    # Arithmetic operations\r\n"]
[567.694842, "o", "    def __mul__(self, other):\r\n"]
[567.781579, "o", "        \"\"\"Multiplication between `Quantity` objects and other objects.\"\"\"\r\n"]
[567.868316, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[567.955053, "o", "            try:\r\n"]
[568.041789, "o", "                return self._new_view(\r\n"]
[568.128526, "o", "                    self.value.copy(), other * self.unit, propagate_info=False\r\n"]
[568.215263, "o", "                )\r\n"]
[568.302, "o", "            except UnitsError:  # let other try to deal with it\r\n"]
[568.388737, "o", "                return NotImplemented\r\n"]
[568.475474, "o", "\r\n"]
[568.562211, "o", "        return super().__mul__(other)\r\n"]
[568.648947, "o", "\r\n"]
[568.735684, "o", "    def __imul__(self, other):\r\n"]
[568.822421, "o", "        \"\"\"In-place multiplication between `Quantity` objects and others.\"\"\"\r\n"]
[568.909158, "o", "        if isinstance(other, (UnitBase, str)):\r\n"]
[568.995895, "o", "            self._set_unit(other * self.unit)\r\n"]
[569.082632, "o", "            return self\r\n"]
[569.169368, "o", "\r\n"]
[569.256105, "o", "        return super().__imul__(other)\r\n"]
[569.342842, "o", "\r\n"]
[569.429579, "o", "    def __rmul__(self, other):\r\n"]
[569.516316, "o", "        \"\"\"\r\n"]
[569.603053, "o", "        Right Multiplication between `Quantity` objects and other objects.\r\n"]
[569.689789, "o", "        \"\"\"\r\n"]
[569.776526, "o", "        return self.__mul__(other)\r\n"]
[569.863263, "o", "\r\n"]
[570.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[570.002, "i", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r"]
[570.004, "o", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r\n"]
[570.1605, "o", "reation_nocopy|units.time_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view|units.TimeQuanti\r\n"]
[570.315, "o", "ityOpLargeArraySameUnit.*|units.TimeQuantityOpLargeArrayDiffUnit.*\" --quick\r\n"]
[570.4695, "o", "\u001b[?2004l\r\n"]
[570.624, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[570.7785, "o", "\u00b7 \u001b[0;32mRunning 26 total benchmarks (1 commits * 1 environments * 26 benchmarks)\u001b[0m\r\n"]
[570.933, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[571.0875, "o", "[ 1.92%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_add\u001b[0m                                                                                  2.84\u00b10ms\r\n"]
[571.242, "o", "[ 3.85%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_equal\u001b[0m                                                                                2.42\u00b10ms\r\n"]
[571.3965, "o", "[ 5.77%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_mul\u001b[0m                                                                                  1.87\u00b10ms\r\n"]
[571.551, "o", "[ 7.69%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_add\u001b[0m                                                                               2.98\u00b10ms\r\n"]
[571.7055, "o", "[ 9.62%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_equal\u001b[0m                                                                             2.76\u00b10ms\r\n"]
[571.86, "o", "[11.54%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_multiply\u001b[0m                                                                          1.72\u00b10ms\r\n"]
[572.0145, "o", "[13.46%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_subtract\u001b[0m                                                                          2.38\u00b10ms\r\n"]
[572.169, "o", "[15.38%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_truediv\u001b[0m                                                                           1.55\u00b10ms\r\n"]
[572.3235, "o", "[17.31%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_sub\u001b[0m                                                                                  2.53\u00b10ms\r\n"]
[572.478, "o", "[19.23%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_truediv\u001b[0m                                                                              1.65\u00b10ms\r\n"]
[572.6325, "o", "[21.15%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_add\u001b[0m                                                                                  1.36\u00b10ms\r\n"]
[572.787, "o", "[23.08%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_equal\u001b[0m                                                                                1.45\u00b10ms\r\n"]
[572.9415, "o", "[25.00%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\u001b[0m                                                                                  1.84\u00b10ms\r\n"]
[573.096, "o", "[26.92%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_add\u001b[0m                                                                               1.80\u00b10ms\r\n"]
[573.2505, "o", "[28.85%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_equal\u001b[0m                                                                             1.91\u00b10ms\r\n"]
[573.405, "o", "[30.77%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_multiply\u001b[0m                                                                          1.95\u00b10ms\r\n"]
[573.5595, "o", "[32.69%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_subtract\u001b[0m                                                                          3.40\u00b10ms\r\n"]
[573.714, "o", "[34.62%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_truediv\u001b[0m                                                                           1.93\u00b10ms\r\n"]
[573.8685, "o", "[36.54%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_sub\u001b[0m                                                                                  1.89\u00b10ms\r\n"]
[574.023, "o", "[38.46%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_truediv\u001b[0m                                                                              1.40\u00b10ms\r\n"]
[574.1775, "o", "[40.38%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_array_conversion\u001b[0m                                                                                                      1.24\u00b10ms\r\n"]
[574.332, "o", "[42.31%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_creation_nocopy\u001b[0m                                                                                                        133\u00b10\u03bcs\r\n"]
[574.4865, "o", "[44.23%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_array\u001b[0m                                                                                                       312\u00b10\u03bcs\r\n"]
[574.641, "o", "[46.15%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_list\u001b[0m                                                                                                        302\u00b10\u03bcs\r\n"]
[574.7955, "o", "[48.08%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_times_unit\u001b[0m                                                                                                             575\u00b10\u03bcs\r\n"]
[575.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[575.002, "i", "asv show --config asv.ci.conf.json\r"]
[575.004, "o", "asv show --config asv.ci.conf.json\r\n"]
[576.654, "o", "\u001b[?2004l\r\n"]
[578.302, "o", "Commits with results:\r\n"]
[580.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[580.002, "i", "asv profile --config asv.ci.conf.json --python=same units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\r"]
[580.004, "o", "asv profile --config asv.ci.conf.json --python=same units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\r\n"]
[580.080909, "o", "\u001b[?2004l\r\n"]
[580.155818, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[580.230727, "o", "\u00b7 \u001b[0;32mProfile data does not already exist. Running profiler now.\u001b[0m\r\n"]
[580.305636, "o", "\u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[580.380545, "o", "\u00b7\u00b7\u00b7 \u001b[0;39mRunning (units.TimeQuantityOpLargeArraySameUnit.time_quantity_mul--)\u001b[0m.\r\n"]
[580.455455, "o", "\u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\u001b[0m                                                                               1.28\u00b10.04ms\r\n"]
[580.530364, "o", "\r\n"]
[580.605273, "o", "Wed Oct  1 12:25:02 2025    /tmp/tmpfutvpxk0\r\n"]
[580.680182, "o", "\r\n"]
[580.755091, "o", "         86 function calls in 0.002 seconds\r\n"]
[580.83, "o", "\r\n"]
[580.904909, "o", "   Ordered by: cumulative time\r\n"]
[580.979818, "o", "\r\n"]
[581.054727, "o", "   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\r\n"]
[581.129636, "o", "        1    0.000    0.000    0.002    0.002 {built-in method builtins.exec}\r\n"]
[581.204545, "o", "        1    0.000    0.000    0.001    0.001 _base.py:689(method_caller)\r\n"]
[581.279455, "o", "        1    0.000    0.000    0.001    0.001 units.py:181(time_quantity_mul)\r\n"]
[581.354364, "o", "        1    0.000    0.000    0.001    0.001 quantity.py:1209(__mul__)\r\n"]
[581.429273, "o", "        1    0.000    0.000    0.001    0.001 quantity.py:613(__array_ufunc__)\r\n"]
[581.504182, "o", "        1    0.001    0.001    0.001    0.001 {function Quantity.__array_ufunc__ at 0x7ffa02f44220}\r\n"]
[581.579091, "o", "        1    0.000    0.000    0.000    0.000 converters.py:141(converters_and_unit)\r\n"]
[581.654, "o", "        1    0.000    0.000    0.000    0.000 helpers.py:219(helper_multiplication)\r\n"]
[581.728909, "o", "        1    0.000    0.000    0.000    0.000 core.py:869(__mul__)\r\n"]
[581.803818, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:694(_result_as_quantity)\r\n"]
[581.878727, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:764(_new_view)\r\n"]
[581.953636, "o", "        1    0.000    0.000    0.000    0.000 core.py:2335(__init__)\r\n"]
[582.028545, "o", "        1    0.000    0.000    0.000    0.000 core.py:2416(_expand_and_gather)\r\n"]
[582.103455, "o", "        3    0.000    0.000    0.000    0.000 {method 'view' of 'numpy.ndarray' objects}\r\n"]
[582.178364, "o", "        6    0.000    0.000    0.000    0.000 {built-in method builtins.getattr}\r\n"]
[582.253273, "o", "        2    0.000    0.000    0.000    0.000 core.py:2279(is_unity)\r\n"]
[582.328182, "o", "        1    0.000    0.000    0.000    0.000 core.py:2069(__call__)\r\n"]
[582.403091, "o", "        2    0.000    0.000    0.000    0.000 core.py:2417(add_unit)\r\n"]
[582.478, "o", "        2    0.000    0.000    0.000    0.000 core.py:2484(is_unity)\r\n"]
[582.552909, "o", "        2    0.000    0.000    0.000    0.000 quantity.py:574(__array_finalize__)\r\n"]
[582.627818, "o", "        1    0.000    0.000    0.000    0.000 converters.py:178(<listcomp>)\r\n"]
[582.702727, "o", "        2    0.000    0.000    0.000    0.000 quantity.py:945(to_value)\r\n"]
[582.777636, "o", "        1    0.000    0.000    0.000    0.000 {method 'sort' of 'list' objects}\r\n"]
[582.852545, "o", "        8    0.000    0.000    0.000    0.000 {built-in method builtins.isinstance}\r\n"]
[582.927455, "o", "        2    0.000    0.000    0.000    0.000 core.py:2463(decompose)\r\n"]
[583.002364, "o", "        1    0.000    0.000    0.000    0.000 utils.py:193(sanitize_scale)\r\n"]
[583.077273, "o", "        1    0.000    0.000    0.000    0.000 core.py:2450(<listcomp>)\r\n"]
[583.152182, "o", "        1    0.000    0.000    0.000    0.000 core.py:2454(<listcomp>)\r\n"]
[583.227091, "o", "        1    0.000    0.000    0.000    0.000 core.py:2451(<lambda>)\r\n"]
[583.302, "o", "        1    0.000    0.000    0.000    0.000 {built-in method builtins.any}\r\n"]
[583.376909, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:836(_set_unit)\r\n"]
[583.451818, "o", "        5    0.000    0.000    0.000    0.000 core.py:2282(__hash__)\r\n"]
[583.526727, "o", "        1    0.000    0.000    0.000    0.000 {built-in method numpy.array}\r\n"]
[583.601636, "o", "        5    0.000    0.000    0.000    0.000 {built-in method builtins.len}\r\n"]
[583.676545, "o", "        3    0.000    0.000    0.000    0.000 quantity.py:1009(unit)\r\n"]
[583.751455, "o", "        1    0.000    0.000    0.000    0.000 utils.py:328(resolve_fractions)\r\n"]
[583.826364, "o", "        1    0.000    0.000    0.000    0.000 utils.py:181(is_effectively_unity)\r\n"]
[583.901273, "o", "        3    0.000    0.000    0.000    0.000 converters.py:183(<genexpr>)\r\n"]
[583.976182, "o", "        1    0.000    0.000    0.000    0.000 core.py:1874(name)\r\n"]
[584.051091, "o", "        1    0.000    0.000    0.000    0.000 {built-in method builtins.hasattr}\r\n"]
[584.126, "o", "        2    0.000    0.000    0.000    0.000 core.py:2402(bases)\r\n"]
[584.200909, "o", "        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}\r\n"]
[584.275818, "o", "        2    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}\r\n"]
[584.350727, "o", "        1    0.000    0.000    0.000    0.000 utils.py:288(sanitize_power)\r\n"]
[584.425636, "o", "        1    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}\r\n"]
[584.500545, "o", "        1    0.000    0.000    0.000    0.000 core.py:2453(<listcomp>)\r\n"]
[584.575455, "o", "        2    0.000    0.000    0.000    0.000 helpers.py:31(_d)\r\n"]
[584.650364, "o", "        2    0.000    0.000    0.000    0.000 {function Quantity.__array_finalize__ at 0x7ffa02f440e0}\r\n"]
[584.725273, "o", "        1    0.000    0.000    0.000    0.000 {method 'items' of 'dict' objects}\r\n"]
[584.800182, "o", "        1    0.000    0.000    0.000    0.000 quantity.py:746(__quantity_subclass__)\r\n"]
[584.875091, "o", "\r\n"]
[585.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[585.002, "i", "applypatch << 'PATCH'\r"]
[585.004, "o", "applypatch << 'PATCH'\r\n"]
[585.113478, "o", "\u001b[?2004l\r\n"]
[585.220957, "o", "\u001b[?2004h> *** Begin Patch\r\n"]
[585.328435, "o", "\u001b[?2004l\r\n"]
[585.435913, "o", "\u001b[?2004h> *** Update File: astropy/units/core.py\r\n"]
[585.543391, "o", "\u001b[?2004l\r\n"]
[585.65087, "o", "\u001b[?2004h> @@\r\n"]
[585.758348, "o", "\u001b[?2004l\r\n"]
[585.865826, "o", "\u001b[?2004h> -        # Extract bases and powers. Avoid calling sanitize_power for the\r\n"]
[585.973304, "o", "\u001b[?2004l\r\n"]
[586.080783, "o", "\u001b[?2004h> -        # common case of integer powers to reduce overhead on hot paths.\r\n"]
[586.188261, "o", "\u001b[?2004l\r\n"]
[586.295739, "o", "\u001b[?2004h> -        self._bases = [x[0] for x in new_parts]\r\n"]
[586.403217, "o", "\u001b[?2004l\r\n"]
[586.510696, "o", "\u001b[?2004h> -        self._powers = [\r\n"]
[586.618174, "o", "\u001b[?2004l\r\n"]
[586.725652, "o", "\u001b[?2004h> -            (p if isinstance(p, int) else sanitize_power(p)) for _, p in new_parts\r\n"]
[586.83313, "o", "\u001b[?2004l\r\n"]
[586.940609, "o", "\u001b[?2004h> -        ]\r\n"]
[587.048087, "o", "\u001b[?2004l\r\n"]
[587.155565, "o", "\u001b[?2004h> +        # Extract bases and powers. Avoid calling sanitize_power for the\r\n"]
[587.263043, "o", "\u001b[?2004l\r\n"]
[587.370522, "o", "\u001b[?2004h> +        # common case of integer powers to reduce overhead on hot paths.\r\n"]
[587.478, "o", "\u001b[?2004l\r\n"]
[587.585478, "o", "\u001b[?2004h> +        # Be careful not to treat booleans as powers (bool is a subclass of int);\r\n"]
[587.692957, "o", "\u001b[?2004l\r\n"]
[587.800435, "o", "\u001b[?2004h> +        # also include NumPy integer types.\r\n"]
[587.907913, "o", "\u001b[?2004l\r\n"]
[588.015391, "o", "\u001b[?2004h> +        self._bases = [x[0] for x in new_parts]\r\n"]
[588.12287, "o", "\u001b[?2004l\r\n"]
[588.230348, "o", "\u001b[?2004h> +        self._powers = []\r\n"]
[588.337826, "o", "\u001b[?2004l\r\n"]
[588.445304, "o", "\u001b[?2004h> +        for _, p in new_parts:\r\n"]
[588.552783, "o", "\u001b[?2004l\r\n"]
[588.660261, "o", "\u001b[?2004h> +            if (isinstance(p, (int, np.integer)) and not isinstance(p, (bool, np.bool_))):\r\n"]
[588.767739, "o", "\u001b[?2004l\r\n"]
[588.875217, "o", "\u001b[?2004h> +                self._powers.append(p)\r\n"]
[588.982696, "o", "\u001b[?2004l\r\n"]
[589.090174, "o", "\u001b[?2004h> +            else:\r\n"]
[589.197652, "o", "\u001b[?2004l\r\n"]
[589.30513, "o", "\u001b[?2004h> +                self._powers.append(sanitize_power(p))\r\n"]
[589.412609, "o", "\u001b[?2004l\r\n"]
[589.520087, "o", "\u001b[?2004h> *** End Patch\r\n"]
[589.627565, "o", "\u001b[?2004l\r\n"]
[589.735043, "o", "\u001b[?2004h> PATCH\r\n"]
[589.842522, "o", "\u001b[?2004l\r\n"]
[590.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[590.002, "i", "sed -n '1,260p' astropy-benchmarks/benchmarks/units.py\r"]
[590.004, "o", "sed -n '1,260p' astropy-benchmarks/benchmarks/units.py\r\n"]
[590.026861, "o", "\u001b[?2004l\r\n"]
[590.047722, "o", "import copy\r\n"]
[590.068582, "o", "\r\n"]
[590.089443, "o", "import numpy as np\r\n"]
[590.110304, "o", "from astropy import units as u\r\n"]
[590.131165, "o", "\r\n"]
[590.152025, "o", "\r\n"]
[590.172886, "o", "# Unit tests\r\n"]
[590.193747, "o", "\r\n"]
[590.214608, "o", "\r\n"]
[590.235468, "o", "def time_unit_compose():\r\n"]
[590.256329, "o", "    u.Ry.compose()\r\n"]
[590.27719, "o", "\r\n"]
[590.298051, "o", "\r\n"]
[590.318911, "o", "def time_unit_to():\r\n"]
[590.339772, "o", "    u.m.to(u.pc)\r\n"]
[590.360633, "o", "\r\n"]
[590.381494, "o", "\r\n"]
[590.402354, "o", "def time_unit_parse():\r\n"]
[590.423215, "o", "    u.Unit(\"1e-07 kg m2 / s2\")\r\n"]
[590.444076, "o", "\r\n"]
[590.464937, "o", "\r\n"]
[590.485797, "o", "def time_simple_unit_parse():\r\n"]
[590.506658, "o", "    u.Unit(\"1 d\")\r\n"]
[590.527519, "o", "\r\n"]
[590.54838, "o", "\r\n"]
[590.569241, "o", "def time_very_simple_unit_parse():\r\n"]
[590.590101, "o", "    u.Unit(\"d\")\r\n"]
[590.610962, "o", "\r\n"]
[590.631823, "o", "\r\n"]
[590.652684, "o", "def mem_unit():\r\n"]
[590.673544, "o", "    return u.erg\r\n"]
[590.694405, "o", "\r\n"]
[590.715266, "o", "\r\n"]
[590.736127, "o", "def time_compose_to_bases():\r\n"]
[590.756987, "o", "    x = copy.copy(u.Ry)\r\n"]
[590.777848, "o", "    x.cgs\r\n"]
[590.798709, "o", "\r\n"]
[590.81957, "o", "\r\n"]
[590.84043, "o", "def time_compose_complex():\r\n"]
[590.861291, "o", "    # Composing a complex unit can be very inefficient\r\n"]
[590.882152, "o", "    (u.kg / u.s**3 * u.au**2.5 / u.yr**0.5 / u.sr**2).compose()\r\n"]
[590.903013, "o", "\r\n"]
[590.923873, "o", "\r\n"]
[590.944734, "o", "# Quantity tests\r\n"]
[590.965595, "o", "\r\n"]
[590.986456, "o", "a = np.arange(100000.0)\r\n"]
[591.007316, "o", "b1 = [1.0, 2.0, 3.0]\r\n"]
[591.028177, "o", "b2 = np.asarray(b1)\r\n"]
[591.049038, "o", "q0 = u.Quantity(1.0, u.s)\r\n"]
[591.069899, "o", "q1 = u.Quantity(a, u.m)\r\n"]
[591.090759, "o", "q2 = u.Quantity(a[:10000], u.deg)\r\n"]
[591.11162, "o", "\r\n"]
[591.132481, "o", "\r\n"]
[591.153342, "o", "def time_quantity_creation():\r\n"]
[591.174203, "o", "    u.Quantity(a, u.m)\r\n"]
[591.195063, "o", "\r\n"]
[591.215924, "o", "\r\n"]
[591.236785, "o", "def time_quantity_creation_nocopy():\r\n"]
[591.257646, "o", "    u.Quantity(a, u.m, copy=False)\r\n"]
[591.278506, "o", "\r\n"]
[591.299367, "o", "\r\n"]
[591.320228, "o", "def time_quantity_view():\r\n"]
[591.341089, "o", "    q1.view(u.Quantity)\r\n"]
[591.361949, "o", "\r\n"]
[591.38281, "o", "\r\n"]
[591.403671, "o", "def time_quantity_init_scalar():\r\n"]
[591.424532, "o", "    3.0 * u.m / u.s\r\n"]
[591.445392, "o", "\r\n"]
[591.466253, "o", "\r\n"]
[591.487114, "o", "def time_quantity_init_array():\r\n"]
[591.507975, "o", "    a * u.m / u.s\r\n"]
[591.528835, "o", "\r\n"]
[591.549696, "o", "\r\n"]
[591.570557, "o", "def time_quantity_init_small_list():\r\n"]
[591.591418, "o", "    \"\"\"\r\n"]
[591.612278, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[591.633139, "o", "    for small list.\r\n"]
[591.654, "o", "    \"\"\"\r\n"]
[591.674861, "o", "    b1 * u.m / u.s\r\n"]
[591.695722, "o", "\r\n"]
[591.716582, "o", "\r\n"]
[591.737443, "o", "def time_quantity_init_small_array():\r\n"]
[591.758304, "o", "    \"\"\"\r\n"]
[591.779165, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[591.800025, "o", "    for small array.\r\n"]
[591.820886, "o", "    \"\"\"\r\n"]
[591.841747, "o", "    b2 * u.m / u.s\r\n"]
[591.862608, "o", "\r\n"]
[591.883468, "o", "\r\n"]
[591.904329, "o", "def time_quantity_scalar_conversion():\r\n"]
[591.92519, "o", "    (3.0 * u.m / u.s).to(u.km / u.hour)\r\n"]
[591.946051, "o", "\r\n"]
[591.966911, "o", "\r\n"]
[591.987772, "o", "def time_quantity_array_conversion():\r\n"]
[592.008633, "o", "    (a * u.m / u.s).to(u.km / u.hour)\r\n"]
[592.029494, "o", "\r\n"]
[592.050354, "o", "\r\n"]
[592.071215, "o", "def time_quantity_times_unit():\r\n"]
[592.092076, "o", "    q1 * u.m\r\n"]
[592.112937, "o", "\r\n"]
[592.133797, "o", "\r\n"]
[592.154658, "o", "def time_quantity_times_quantity():\r\n"]
[592.175519, "o", "    q1 * q0\r\n"]
[592.19638, "o", "\r\n"]
[592.217241, "o", "\r\n"]
[592.238101, "o", "def time_quantity_ufunc_sin():\r\n"]
[592.258962, "o", "    np.sin(q2)\r\n"]
[592.279823, "o", "\r\n"]
[592.300684, "o", "\r\n"]
[592.321544, "o", "class TimeQuantityOpSmallArray:\r\n"]
[592.342405, "o", "    \"\"\"\r\n"]
[592.363266, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[592.384127, "o", "    for a small Numpy array.\r\n"]
[592.404987, "o", "    \"\"\"\r\n"]
[592.425848, "o", "\r\n"]
[592.446709, "o", "    def setup(self):\r\n"]
[592.46757, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[592.48843, "o", "        self.data = data * u.g\r\n"]
[592.509291, "o", "        self.out_sq = data * u.g**2\r\n"]
[592.530152, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[592.551013, "o", "\r\n"]
[592.571873, "o", "    def time_quantity_square(self):\r\n"]
[592.592734, "o", "        self.data**2\r\n"]
[592.613595, "o", "\r\n"]
[592.634456, "o", "    def time_quantity_np_square(self):\r\n"]
[592.655316, "o", "        np.power(self.data, 2)\r\n"]
[592.676177, "o", "\r\n"]
[592.697038, "o", "    def time_quantity_np_square_out(self):\r\n"]
[592.717899, "o", "        np.power(self.data, 2, out=self.out_sq)\r\n"]
[592.738759, "o", "\r\n"]
[592.75962, "o", "    def time_quantity_sqrt(self):\r\n"]
[592.780481, "o", "        self.data**0.5\r\n"]
[592.801342, "o", "\r\n"]
[592.822203, "o", "    def time_quantity_np_sqrt(self):\r\n"]
[592.843063, "o", "        np.sqrt(self.data)\r\n"]
[592.863924, "o", "\r\n"]
[592.884785, "o", "    def time_quantity_np_sqrt_out(self):\r\n"]
[592.905646, "o", "        np.sqrt(self.data, out=self.out_sqrt)\r\n"]
[592.926506, "o", "\r\n"]
[592.947367, "o", "\r\n"]
[592.968228, "o", "class TimeQuantityOpLargeArray(TimeQuantityOpSmallArray):\r\n"]
[592.989089, "o", "    \"\"\"\r\n"]
[593.009949, "o", "    Like :class:`TimeQuantityOpSmallArray` but for a large Numpy array.\r\n"]
[593.03081, "o", "    \"\"\"\r\n"]
[593.051671, "o", "\r\n"]
[593.072532, "o", "    def setup(self):\r\n"]
[593.093392, "o", "        data = np.arange(1e6) + 1\r\n"]
[593.114253, "o", "        self.data = data * u.g\r\n"]
[593.135114, "o", "        self.out_sq = data * u.g**2\r\n"]
[593.155975, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[593.176835, "o", "\r\n"]
[593.197696, "o", "\r\n"]
[593.218557, "o", "class TimeQuantityOpSmallArrayDiffUnit:\r\n"]
[593.239418, "o", "    \"\"\"\r\n"]
[593.260278, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[593.281139, "o", "    for small Numpy arrays with different units.\r\n"]
[593.302, "o", "    \"\"\"\r\n"]
[593.322861, "o", "\r\n"]
[593.343722, "o", "    def setup(self):\r\n"]
[593.364582, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[593.385443, "o", "        self.data = data * u.g\r\n"]
[593.406304, "o", "\r\n"]
[593.427165, "o", "        # A different but dimensionally compatible unit\r\n"]
[593.448025, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[593.468886, "o", "\r\n"]
[593.489747, "o", "    def time_quantity_equal(self):\r\n"]
[593.510608, "o", "        # Same as operator.eq\r\n"]
[593.531468, "o", "        self.data == self.data2\r\n"]
[593.552329, "o", "\r\n"]
[593.57319, "o", "    def time_quantity_np_equal(self):\r\n"]
[593.594051, "o", "        np.equal(self.data, self.data2)\r\n"]
[593.614911, "o", "\r\n"]
[593.635772, "o", "    def time_quantity_truediv(self):\r\n"]
[593.656633, "o", "        # Since benchmark is PY3 only, this is always true divide.\r\n"]
[593.677494, "o", "        # Same as operator.truediv\r\n"]
[593.698354, "o", "        self.data / self.data2\r\n"]
[593.719215, "o", "\r\n"]
[593.740076, "o", "    def time_quantity_np_truediv(self):\r\n"]
[593.760937, "o", "        np.true_divide(self.data, self.data2)\r\n"]
[593.781797, "o", "\r\n"]
[593.802658, "o", "    def time_quantity_mul(self):\r\n"]
[593.823519, "o", "        # Same as operator.mul\r\n"]
[593.84438, "o", "        self.data * self.data2\r\n"]
[593.865241, "o", "\r\n"]
[593.886101, "o", "    def time_quantity_np_multiply(self):\r\n"]
[593.906962, "o", "        np.multiply(self.data, self.data2)\r\n"]
[593.927823, "o", "\r\n"]
[593.948684, "o", "    def time_quantity_sub(self):\r\n"]
[593.969544, "o", "        # Same as operator.sub\r\n"]
[593.990405, "o", "        self.data - self.data2\r\n"]
[594.011266, "o", "\r\n"]
[594.032127, "o", "    def time_quantity_np_subtract(self):\r\n"]
[594.052987, "o", "        np.subtract(self.data, self.data2)\r\n"]
[594.073848, "o", "\r\n"]
[594.094709, "o", "    def time_quantity_add(self):\r\n"]
[594.11557, "o", "        # Same as operator.add\r\n"]
[594.13643, "o", "        self.data + self.data2\r\n"]
[594.157291, "o", "\r\n"]
[594.178152, "o", "    def time_quantity_np_add(self):\r\n"]
[594.199013, "o", "        np.add(self.data, self.data2)\r\n"]
[594.219873, "o", "\r\n"]
[594.240734, "o", "\r\n"]
[594.261595, "o", "class TimeQuantityOpSmallArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[594.282456, "o", "    \"\"\"\r\n"]
[594.303316, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[594.324177, "o", "    for small Numpy arrays with same units.\r\n"]
[594.345038, "o", "    \"\"\"\r\n"]
[594.365899, "o", "\r\n"]
[594.386759, "o", "    def setup(self):\r\n"]
[594.40762, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[594.428481, "o", "        self.data = data * u.g\r\n"]
[594.449342, "o", "        self.data2 = self.data.copy()\r\n"]
[594.470203, "o", "\r\n"]
[594.491063, "o", "\r\n"]
[594.511924, "o", "class TimeQuantityOpLargeArrayDiffUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[594.532785, "o", "    \"\"\"\r\n"]
[594.553646, "o", "    Like :class:`TimeQuantityOpSmallArrayDiffUnit` but for large Numpy arrays.\r\n"]
[594.574506, "o", "    \"\"\"\r\n"]
[594.595367, "o", "\r\n"]
[594.616228, "o", "    def setup(self):\r\n"]
[594.637089, "o", "        data = np.arange(1e6) + 1\r\n"]
[594.657949, "o", "        self.data = data * u.g\r\n"]
[594.67881, "o", "\r\n"]
[594.699671, "o", "        # A different but dimensionally compatible unit\r\n"]
[594.720532, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[594.741392, "o", "\r\n"]
[594.762253, "o", "\r\n"]
[594.783114, "o", "class TimeQuantityOpLargeArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[594.803975, "o", "    \"\"\"\r\n"]
[594.824835, "o", "    Like :class:`TimeQuantityOpSmallArraySameUnit` but for large Numpy arrays.\r\n"]
[594.845696, "o", "    \"\"\"\r\n"]
[594.866557, "o", "\r\n"]
[594.887418, "o", "    def setup(self):\r\n"]
[594.908278, "o", "        data = np.arange(1e6) + 1\r\n"]
[594.929139, "o", "        self.data = data * u.g\r\n"]
[595.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[595.002, "i", "sed -n '260,520p' astropy-benchmarks/benchmarks/units.py\r"]
[595.004, "o", "sed -n '260,520p' astropy-benchmarks/benchmarks/units.py\r\n"]
[595.006, "o", "\u001b[?2004l\r\n"]
[600.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[600.002, "i", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r"]
[600.004, "o", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r\n"]
[600.1605, "o", "reation_nocopy|units.time_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view|units.TimeQuanti\r\n"]
[600.315, "o", "ityOpLargeArraySameUnit.*|units.TimeQuantityOpLargeArrayDiffUnit.*\" --quick\r\n"]
[600.4695, "o", "\u001b[?2004l\r\n"]
[600.624, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[600.7785, "o", "\u00b7 \u001b[0;32mRunning 26 total benchmarks (1 commits * 1 environments * 26 benchmarks)\u001b[0m\r\n"]
[600.933, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[601.0875, "o", "[ 1.92%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_add\u001b[0m                                                                                  2.32\u00b10ms\r\n"]
[601.242, "o", "[ 3.85%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_equal\u001b[0m                                                                                2.00\u00b10ms\r\n"]
[601.3965, "o", "[ 5.77%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_mul\u001b[0m                                                                                  1.33\u00b10ms\r\n"]
[601.551, "o", "[ 7.69%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_add\u001b[0m                                                                               2.15\u00b10ms\r\n"]
[601.7055, "o", "[ 9.62%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_equal\u001b[0m                                                                             2.14\u00b10ms\r\n"]
[601.86, "o", "[11.54%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_multiply\u001b[0m                                                                          1.34\u00b10ms\r\n"]
[602.0145, "o", "[13.46%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_subtract\u001b[0m                                                                          2.35\u00b10ms\r\n"]
[602.169, "o", "[15.38%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_truediv\u001b[0m                                                                           1.75\u00b10ms\r\n"]
[602.3235, "o", "[17.31%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_sub\u001b[0m                                                                                  2.27\u00b10ms\r\n"]
[602.478, "o", "[19.23%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_truediv\u001b[0m                                                                              1.42\u00b10ms\r\n"]
[602.6325, "o", "[21.15%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_add\u001b[0m                                                                                  1.28\u00b10ms\r\n"]
[602.787, "o", "[23.08%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_equal\u001b[0m                                                                                 975\u00b10\u03bcs\r\n"]
[602.9415, "o", "[25.00%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\u001b[0m                                                                                  1.32\u00b10ms\r\n"]
[603.096, "o", "[26.92%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_add\u001b[0m                                                                               1.17\u00b10ms\r\n"]
[603.2505, "o", "[28.85%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_equal\u001b[0m                                                                             1.09\u00b10ms\r\n"]
[603.405, "o", "[30.77%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_multiply\u001b[0m                                                                          1.34\u00b10ms\r\n"]
[603.5595, "o", "[32.69%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_subtract\u001b[0m                                                                          1.19\u00b10ms\r\n"]
[603.714, "o", "[34.62%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_truediv\u001b[0m                                                                           1.59\u00b10ms\r\n"]
[603.8685, "o", "[36.54%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_sub\u001b[0m                                                                                  2.09\u00b10ms\r\n"]
[604.023, "o", "[38.46%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_truediv\u001b[0m                                                                              1.77\u00b10ms\r\n"]
[604.1775, "o", "[40.38%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_array_conversion\u001b[0m                                                                                                      1.28\u00b10ms\r\n"]
[604.332, "o", "[42.31%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_creation_nocopy\u001b[0m                                                                                                        152\u00b10\u03bcs\r\n"]
[604.4865, "o", "[44.23%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_array\u001b[0m                                                                                                       486\u00b10\u03bcs\r\n"]
[604.641, "o", "[46.15%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_list\u001b[0m                                                                                                        329\u00b10\u03bcs\r\n"]
[604.7955, "o", "[48.08%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_times_unit\u001b[0m                                                                                                             546\u00b10\u03bcs\r\n"]
[605.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[605.002, "i", "asv show --config asv.ci.conf.json\r"]
[605.004, "o", "asv show --config asv.ci.conf.json\r\n"]
[606.654, "o", "\u001b[?2004l\r\n"]
[608.302, "o", "Commits with results:\r\n"]
[610.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[610.002, "i", "sed -n '1,240p' astropy-benchmarks/benchmarks/units.py\r"]
[610.004, "o", "sed -n '1,240p' astropy-benchmarks/benchmarks/units.py\r\n"]
[610.026861, "o", "\u001b[?2004l\r\n"]
[610.047722, "o", "import copy\r\n"]
[610.068582, "o", "\r\n"]
[610.089443, "o", "import numpy as np\r\n"]
[610.110304, "o", "from astropy import units as u\r\n"]
[610.131165, "o", "\r\n"]
[610.152025, "o", "\r\n"]
[610.172886, "o", "# Unit tests\r\n"]
[610.193747, "o", "\r\n"]
[610.214608, "o", "\r\n"]
[610.235468, "o", "def time_unit_compose():\r\n"]
[610.256329, "o", "    u.Ry.compose()\r\n"]
[610.27719, "o", "\r\n"]
[610.298051, "o", "\r\n"]
[610.318911, "o", "def time_unit_to():\r\n"]
[610.339772, "o", "    u.m.to(u.pc)\r\n"]
[610.360633, "o", "\r\n"]
[610.381494, "o", "\r\n"]
[610.402354, "o", "def time_unit_parse():\r\n"]
[610.423215, "o", "    u.Unit(\"1e-07 kg m2 / s2\")\r\n"]
[610.444076, "o", "\r\n"]
[610.464937, "o", "\r\n"]
[610.485797, "o", "def time_simple_unit_parse():\r\n"]
[610.506658, "o", "    u.Unit(\"1 d\")\r\n"]
[610.527519, "o", "\r\n"]
[610.54838, "o", "\r\n"]
[610.569241, "o", "def time_very_simple_unit_parse():\r\n"]
[610.590101, "o", "    u.Unit(\"d\")\r\n"]
[610.610962, "o", "\r\n"]
[610.631823, "o", "\r\n"]
[610.652684, "o", "def mem_unit():\r\n"]
[610.673544, "o", "    return u.erg\r\n"]
[610.694405, "o", "\r\n"]
[610.715266, "o", "\r\n"]
[610.736127, "o", "def time_compose_to_bases():\r\n"]
[610.756987, "o", "    x = copy.copy(u.Ry)\r\n"]
[610.777848, "o", "    x.cgs\r\n"]
[610.798709, "o", "\r\n"]
[610.81957, "o", "\r\n"]
[610.84043, "o", "def time_compose_complex():\r\n"]
[610.861291, "o", "    # Composing a complex unit can be very inefficient\r\n"]
[610.882152, "o", "    (u.kg / u.s**3 * u.au**2.5 / u.yr**0.5 / u.sr**2).compose()\r\n"]
[610.903013, "o", "\r\n"]
[610.923873, "o", "\r\n"]
[610.944734, "o", "# Quantity tests\r\n"]
[610.965595, "o", "\r\n"]
[610.986456, "o", "a = np.arange(100000.0)\r\n"]
[611.007316, "o", "b1 = [1.0, 2.0, 3.0]\r\n"]
[611.028177, "o", "b2 = np.asarray(b1)\r\n"]
[611.049038, "o", "q0 = u.Quantity(1.0, u.s)\r\n"]
[611.069899, "o", "q1 = u.Quantity(a, u.m)\r\n"]
[611.090759, "o", "q2 = u.Quantity(a[:10000], u.deg)\r\n"]
[611.11162, "o", "\r\n"]
[611.132481, "o", "\r\n"]
[611.153342, "o", "def time_quantity_creation():\r\n"]
[611.174203, "o", "    u.Quantity(a, u.m)\r\n"]
[611.195063, "o", "\r\n"]
[611.215924, "o", "\r\n"]
[611.236785, "o", "def time_quantity_creation_nocopy():\r\n"]
[611.257646, "o", "    u.Quantity(a, u.m, copy=False)\r\n"]
[611.278506, "o", "\r\n"]
[611.299367, "o", "\r\n"]
[611.320228, "o", "def time_quantity_view():\r\n"]
[611.341089, "o", "    q1.view(u.Quantity)\r\n"]
[611.361949, "o", "\r\n"]
[611.38281, "o", "\r\n"]
[611.403671, "o", "def time_quantity_init_scalar():\r\n"]
[611.424532, "o", "    3.0 * u.m / u.s\r\n"]
[611.445392, "o", "\r\n"]
[611.466253, "o", "\r\n"]
[611.487114, "o", "def time_quantity_init_array():\r\n"]
[611.507975, "o", "    a * u.m / u.s\r\n"]
[611.528835, "o", "\r\n"]
[611.549696, "o", "\r\n"]
[611.570557, "o", "def time_quantity_init_small_list():\r\n"]
[611.591418, "o", "    \"\"\"\r\n"]
[611.612278, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[611.633139, "o", "    for small list.\r\n"]
[611.654, "o", "    \"\"\"\r\n"]
[611.674861, "o", "    b1 * u.m / u.s\r\n"]
[611.695722, "o", "\r\n"]
[611.716582, "o", "\r\n"]
[611.737443, "o", "def time_quantity_init_small_array():\r\n"]
[611.758304, "o", "    \"\"\"\r\n"]
[611.779165, "o", "    https://github.com/astropy/astropy/issues/7546 reported high overhead\r\n"]
[611.800025, "o", "    for small array.\r\n"]
[611.820886, "o", "    \"\"\"\r\n"]
[611.841747, "o", "    b2 * u.m / u.s\r\n"]
[611.862608, "o", "\r\n"]
[611.883468, "o", "\r\n"]
[611.904329, "o", "def time_quantity_scalar_conversion():\r\n"]
[611.92519, "o", "    (3.0 * u.m / u.s).to(u.km / u.hour)\r\n"]
[611.946051, "o", "\r\n"]
[611.966911, "o", "\r\n"]
[611.987772, "o", "def time_quantity_array_conversion():\r\n"]
[612.008633, "o", "    (a * u.m / u.s).to(u.km / u.hour)\r\n"]
[612.029494, "o", "\r\n"]
[612.050354, "o", "\r\n"]
[612.071215, "o", "def time_quantity_times_unit():\r\n"]
[612.092076, "o", "    q1 * u.m\r\n"]
[612.112937, "o", "\r\n"]
[612.133797, "o", "\r\n"]
[612.154658, "o", "def time_quantity_times_quantity():\r\n"]
[612.175519, "o", "    q1 * q0\r\n"]
[612.19638, "o", "\r\n"]
[612.217241, "o", "\r\n"]
[612.238101, "o", "def time_quantity_ufunc_sin():\r\n"]
[612.258962, "o", "    np.sin(q2)\r\n"]
[612.279823, "o", "\r\n"]
[612.300684, "o", "\r\n"]
[612.321544, "o", "class TimeQuantityOpSmallArray:\r\n"]
[612.342405, "o", "    \"\"\"\r\n"]
[612.363266, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[612.384127, "o", "    for a small Numpy array.\r\n"]
[612.404987, "o", "    \"\"\"\r\n"]
[612.425848, "o", "\r\n"]
[612.446709, "o", "    def setup(self):\r\n"]
[612.46757, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[612.48843, "o", "        self.data = data * u.g\r\n"]
[612.509291, "o", "        self.out_sq = data * u.g**2\r\n"]
[612.530152, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[612.551013, "o", "\r\n"]
[612.571873, "o", "    def time_quantity_square(self):\r\n"]
[612.592734, "o", "        self.data**2\r\n"]
[612.613595, "o", "\r\n"]
[612.634456, "o", "    def time_quantity_np_square(self):\r\n"]
[612.655316, "o", "        np.power(self.data, 2)\r\n"]
[612.676177, "o", "\r\n"]
[612.697038, "o", "    def time_quantity_np_square_out(self):\r\n"]
[612.717899, "o", "        np.power(self.data, 2, out=self.out_sq)\r\n"]
[612.738759, "o", "\r\n"]
[612.75962, "o", "    def time_quantity_sqrt(self):\r\n"]
[612.780481, "o", "        self.data**0.5\r\n"]
[612.801342, "o", "\r\n"]
[612.822203, "o", "    def time_quantity_np_sqrt(self):\r\n"]
[612.843063, "o", "        np.sqrt(self.data)\r\n"]
[612.863924, "o", "\r\n"]
[612.884785, "o", "    def time_quantity_np_sqrt_out(self):\r\n"]
[612.905646, "o", "        np.sqrt(self.data, out=self.out_sqrt)\r\n"]
[612.926506, "o", "\r\n"]
[612.947367, "o", "\r\n"]
[612.968228, "o", "class TimeQuantityOpLargeArray(TimeQuantityOpSmallArray):\r\n"]
[612.989089, "o", "    \"\"\"\r\n"]
[613.009949, "o", "    Like :class:`TimeQuantityOpSmallArray` but for a large Numpy array.\r\n"]
[613.03081, "o", "    \"\"\"\r\n"]
[613.051671, "o", "\r\n"]
[613.072532, "o", "    def setup(self):\r\n"]
[613.093392, "o", "        data = np.arange(1e6) + 1\r\n"]
[613.114253, "o", "        self.data = data * u.g\r\n"]
[613.135114, "o", "        self.out_sq = data * u.g**2\r\n"]
[613.155975, "o", "        self.out_sqrt = data * u.g**0.5\r\n"]
[613.176835, "o", "\r\n"]
[613.197696, "o", "\r\n"]
[613.218557, "o", "class TimeQuantityOpSmallArrayDiffUnit:\r\n"]
[613.239418, "o", "    \"\"\"\r\n"]
[613.260278, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[613.281139, "o", "    for small Numpy arrays with different units.\r\n"]
[613.302, "o", "    \"\"\"\r\n"]
[613.322861, "o", "\r\n"]
[613.343722, "o", "    def setup(self):\r\n"]
[613.364582, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[613.385443, "o", "        self.data = data * u.g\r\n"]
[613.406304, "o", "\r\n"]
[613.427165, "o", "        # A different but dimensionally compatible unit\r\n"]
[613.448025, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[613.468886, "o", "\r\n"]
[613.489747, "o", "    def time_quantity_equal(self):\r\n"]
[613.510608, "o", "        # Same as operator.eq\r\n"]
[613.531468, "o", "        self.data == self.data2\r\n"]
[613.552329, "o", "\r\n"]
[613.57319, "o", "    def time_quantity_np_equal(self):\r\n"]
[613.594051, "o", "        np.equal(self.data, self.data2)\r\n"]
[613.614911, "o", "\r\n"]
[613.635772, "o", "    def time_quantity_truediv(self):\r\n"]
[613.656633, "o", "        # Since benchmark is PY3 only, this is always true divide.\r\n"]
[613.677494, "o", "        # Same as operator.truediv\r\n"]
[613.698354, "o", "        self.data / self.data2\r\n"]
[613.719215, "o", "\r\n"]
[613.740076, "o", "    def time_quantity_np_truediv(self):\r\n"]
[613.760937, "o", "        np.true_divide(self.data, self.data2)\r\n"]
[613.781797, "o", "\r\n"]
[613.802658, "o", "    def time_quantity_mul(self):\r\n"]
[613.823519, "o", "        # Same as operator.mul\r\n"]
[613.84438, "o", "        self.data * self.data2\r\n"]
[613.865241, "o", "\r\n"]
[613.886101, "o", "    def time_quantity_np_multiply(self):\r\n"]
[613.906962, "o", "        np.multiply(self.data, self.data2)\r\n"]
[613.927823, "o", "\r\n"]
[613.948684, "o", "    def time_quantity_sub(self):\r\n"]
[613.969544, "o", "        # Same as operator.sub\r\n"]
[613.990405, "o", "        self.data - self.data2\r\n"]
[614.011266, "o", "\r\n"]
[614.032127, "o", "    def time_quantity_np_subtract(self):\r\n"]
[614.052987, "o", "        np.subtract(self.data, self.data2)\r\n"]
[614.073848, "o", "\r\n"]
[614.094709, "o", "    def time_quantity_add(self):\r\n"]
[614.11557, "o", "        # Same as operator.add\r\n"]
[614.13643, "o", "        self.data + self.data2\r\n"]
[614.157291, "o", "\r\n"]
[614.178152, "o", "    def time_quantity_np_add(self):\r\n"]
[614.199013, "o", "        np.add(self.data, self.data2)\r\n"]
[614.219873, "o", "\r\n"]
[614.240734, "o", "\r\n"]
[614.261595, "o", "class TimeQuantityOpSmallArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[614.282456, "o", "    \"\"\"\r\n"]
[614.303316, "o", "    Operator benchmarks from https://github.com/astropy/astropy/issues/7546\r\n"]
[614.324177, "o", "    for small Numpy arrays with same units.\r\n"]
[614.345038, "o", "    \"\"\"\r\n"]
[614.365899, "o", "\r\n"]
[614.386759, "o", "    def setup(self):\r\n"]
[614.40762, "o", "        data = np.array([1.0, 2.0, 3.0])\r\n"]
[614.428481, "o", "        self.data = data * u.g\r\n"]
[614.449342, "o", "        self.data2 = self.data.copy()\r\n"]
[614.470203, "o", "\r\n"]
[614.491063, "o", "\r\n"]
[614.511924, "o", "class TimeQuantityOpLargeArrayDiffUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[614.532785, "o", "    \"\"\"\r\n"]
[614.553646, "o", "    Like :class:`TimeQuantityOpSmallArrayDiffUnit` but for large Numpy arrays.\r\n"]
[614.574506, "o", "    \"\"\"\r\n"]
[614.595367, "o", "\r\n"]
[614.616228, "o", "    def setup(self):\r\n"]
[614.637089, "o", "        data = np.arange(1e6) + 1\r\n"]
[614.657949, "o", "        self.data = data * u.g\r\n"]
[614.67881, "o", "\r\n"]
[614.699671, "o", "        # A different but dimensionally compatible unit\r\n"]
[614.720532, "o", "        self.data2 = 0.001 * data * u.kg\r\n"]
[614.741392, "o", "\r\n"]
[614.762253, "o", "\r\n"]
[614.783114, "o", "class TimeQuantityOpLargeArraySameUnit(TimeQuantityOpSmallArrayDiffUnit):\r\n"]
[614.803975, "o", "    \"\"\"\r\n"]
[614.824835, "o", "    Like :class:`TimeQuantityOpSmallArraySameUnit` but for large Numpy arrays.\r\n"]
[614.845696, "o", "    \"\"\"\r\n"]
[614.866557, "o", "\r\n"]
[614.887418, "o", "    def setup(self):\r\n"]
[614.908278, "o", "        data = np.arange(1e6) + 1\r\n"]
[614.929139, "o", "        self.data = data * u.g\r\n"]
[615.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[615.002, "i", "sed -n '240,520p' astropy-benchmarks/benchmarks/units.py\r"]
[615.004, "o", "sed -n '240,520p' astropy-benchmarks/benchmarks/units.py\r\n"]
[615.006, "o", "\u001b[?2004l\r\n"]
[620.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[620.002, "i", "grep -n \"def __new__\" astropy/units/quantity.py\r"]
[620.004, "o", "grep -n \"def __new__\" astropy/units/quantity.py\r\n"]
[622.478, "o", "\u001b[?2004l\r\n"]
[625.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[625.002, "i", "sed -n '1,220p' astropy/units/quantity.py\r"]
[625.004, "o", "sed -n '1,220p' astropy/units/quantity.py\r\n"]
[625.028371, "o", "\u001b[?2004l\r\n"]
[625.050742, "o", "# Licensed under a 3-clause BSD style license - see LICENSE.rst\r\n"]
[625.073113, "o", "\"\"\"\r\n"]
[625.095484, "o", "This module defines the `Quantity` object, which represents a number with some\r\n"]
[625.117855, "o", "associated units. `Quantity` objects support operations like ordinary numbers,\r\n"]
[625.140226, "o", "but will deal with unit conversions internally.\r\n"]
[625.162597, "o", "\"\"\"\r\n"]
[625.184968, "o", "\r\n"]
[625.207339, "o", "from __future__ import annotations\r\n"]
[625.22971, "o", "\r\n"]
[625.252081, "o", "import builtins\r\n"]
[625.274452, "o", "import numbers\r\n"]
[625.296824, "o", "import operator\r\n"]
[625.319195, "o", "import re\r\n"]
[625.341566, "o", "import warnings\r\n"]
[625.363937, "o", "from fractions import Fraction\r\n"]
[625.386308, "o", "from typing import TYPE_CHECKING\r\n"]
[625.408679, "o", "\r\n"]
[625.43105, "o", "import numpy as np\r\n"]
[625.453421, "o", "\r\n"]
[625.475792, "o", "from astropy import config as _config\r\n"]
[625.498163, "o", "from astropy.utils.compat.numpycompat import COPY_IF_NEEDED, NUMPY_LT_2_0\r\n"]
[625.520534, "o", "from astropy.utils.data_info import ParentDtypeInfo\r\n"]
[625.542905, "o", "from astropy.utils.exceptions import AstropyWarning\r\n"]
[625.565276, "o", "\r\n"]
[625.587647, "o", "from .core import (\r\n"]
[625.610018, "o", "    Unit,\r\n"]
[625.632389, "o", "    UnitBase,\r\n"]
[625.65476, "o", "    UnitConversionError,\r\n"]
[625.677131, "o", "    UnitsError,\r\n"]
[625.699502, "o", "    UnitTypeError,\r\n"]
[625.721873, "o", "    dimensionless_unscaled,\r\n"]
[625.744244, "o", "    get_current_unit_registry,\r\n"]
[625.766615, "o", ")\r\n"]
[625.788986, "o", "from .format import Base, Latex\r\n"]
[625.811357, "o", "from .quantity_helper import can_have_arbitrary_unit, check_output, converters_and_unit\r\n"]
[625.833729, "o", "from .quantity_helper.function_helpers import (\r\n"]
[625.8561, "o", "    DISPATCHED_FUNCTIONS,\r\n"]
[625.878471, "o", "    FUNCTION_HELPERS,\r\n"]
[625.900842, "o", "    SUBCLASS_SAFE_FUNCTIONS,\r\n"]
[625.923213, "o", "    UNSUPPORTED_FUNCTIONS,\r\n"]
[625.945584, "o", ")\r\n"]
[625.967955, "o", "from .structured import StructuredUnit, _structured_unit_like_dtype\r\n"]
[625.990326, "o", "from .utils import is_effectively_unity\r\n"]
[626.012697, "o", "\r\n"]
[626.035068, "o", "if TYPE_CHECKING:\r\n"]
[626.057439, "o", "    from typing_extensions import Self\r\n"]
[626.07981, "o", "\r\n"]
[626.102181, "o", "    from .typing import QuantityLike\r\n"]
[626.124552, "o", "\r\n"]
[626.146923, "o", "__all__ = [\r\n"]
[626.169294, "o", "    \"Quantity\",\r\n"]
[626.191665, "o", "    \"SpecificTypeQuantity\",\r\n"]
[626.214036, "o", "    \"QuantityInfoBase\",\r\n"]
[626.236407, "o", "    \"QuantityInfo\",\r\n"]
[626.258778, "o", "    \"allclose\",\r\n"]
[626.281149, "o", "    \"isclose\",\r\n"]
[626.30352, "o", "]\r\n"]
[626.325891, "o", "\r\n"]
[626.348262, "o", "\r\n"]
[626.370633, "o", "# We don't want to run doctests in the docstrings we inherit from Numpy\r\n"]
[626.393005, "o", "__doctest_skip__ = [\"Quantity.*\"]\r\n"]
[626.415376, "o", "\r\n"]
[626.437747, "o", "_UNIT_NOT_INITIALISED = \"(Unit not initialised)\"\r\n"]
[626.460118, "o", "_UFUNCS_FILTER_WARNINGS = {np.arcsin, np.arccos, np.arccosh, np.arctanh}\r\n"]
[626.482489, "o", "\r\n"]
[626.50486, "o", "\r\n"]
[626.527231, "o", "class Conf(_config.ConfigNamespace):\r\n"]
[626.549602, "o", "    \"\"\"\r\n"]
[626.571973, "o", "    Configuration parameters for Quantity.\r\n"]
[626.594344, "o", "    \"\"\"\r\n"]
[626.616715, "o", "\r\n"]
[626.639086, "o", "    latex_array_threshold = _config.ConfigItem(\r\n"]
[626.661457, "o", "        100,\r\n"]
[626.683828, "o", "        \"The maximum size an array Quantity can be before its LaTeX \"\r\n"]
[626.706199, "o", "        'representation for IPython gets \"summarized\" (meaning only the first '\r\n"]
[626.72857, "o", "        'and last few elements are shown with \"...\" between). Setting this to a '\r\n"]
[626.750941, "o", "        \"negative number means that the value will instead be whatever numpy \"\r\n"]
[626.773312, "o", "        \"gets from get_printoptions.\",\r\n"]
[626.795683, "o", "    )\r\n"]
[626.818054, "o", "\r\n"]
[626.840425, "o", "\r\n"]
[626.862796, "o", "conf = Conf()\r\n"]
[626.885167, "o", "\r\n"]
[626.907538, "o", "\r\n"]
[626.92991, "o", "class QuantityIterator:\r\n"]
[626.952281, "o", "    \"\"\"\r\n"]
[626.974652, "o", "    Flat iterator object to iterate over Quantities.\r\n"]
[626.997023, "o", "\r\n"]
[627.019394, "o", "    A `QuantityIterator` iterator is returned by ``q.flat`` for any Quantity\r\n"]
[627.041765, "o", "    ``q``.  It allows iterating over the array as if it were a 1-D array,\r\n"]
[627.064136, "o", "    either in a for-loop or by calling its `next` method.\r\n"]
[627.086507, "o", "\r\n"]
[627.108878, "o", "    Iteration is done in C-contiguous style, with the last index varying the\r\n"]
[627.131249, "o", "    fastest. The iterator can also be indexed using basic slicing or\r\n"]
[627.15362, "o", "    advanced indexing.\r\n"]
[627.175991, "o", "\r\n"]
[627.198362, "o", "    See Also\r\n"]
[627.220733, "o", "    --------\r\n"]
[627.243104, "o", "    Quantity.flatten : Returns a flattened copy of an array.\r\n"]
[627.265475, "o", "\r\n"]
[627.287846, "o", "    Notes\r\n"]
[627.310217, "o", "    -----\r\n"]
[627.332588, "o", "    `QuantityIterator` is inspired by `~numpy.ma.core.MaskedIterator`.  It\r\n"]
[627.354959, "o", "    is not exported by the `~astropy.units` module.  Instead of\r\n"]
[627.37733, "o", "    instantiating a `QuantityIterator` directly, use `Quantity.flat`.\r\n"]
[627.399701, "o", "    \"\"\"\r\n"]
[627.422072, "o", "\r\n"]
[627.444443, "o", "    def __init__(self, q):\r\n"]
[627.466814, "o", "        self._quantity = q\r\n"]
[627.489186, "o", "        self._dataiter = q.view(np.ndarray).flat\r\n"]
[627.511557, "o", "\r\n"]
[627.533928, "o", "    def __iter__(self):\r\n"]
[627.556299, "o", "        return self\r\n"]
[627.57867, "o", "\r\n"]
[627.601041, "o", "    def __getitem__(self, indx):\r\n"]
[627.623412, "o", "        out = self._dataiter.__getitem__(indx)\r\n"]
[627.645783, "o", "        # For single elements, ndarray.flat.__getitem__ returns scalars; these\r\n"]
[627.668154, "o", "        # need a new view as a Quantity.\r\n"]
[627.690525, "o", "        if isinstance(out, type(self._quantity)):\r\n"]
[627.712896, "o", "            return out\r\n"]
[627.735267, "o", "        else:\r\n"]
[627.757638, "o", "            return self._quantity._new_view(out)\r\n"]
[627.780009, "o", "\r\n"]
[627.80238, "o", "    def __setitem__(self, index, value):\r\n"]
[627.824751, "o", "        self._dataiter[index] = self._quantity._to_own_unit(value)\r\n"]
[627.847122, "o", "\r\n"]
[627.869493, "o", "    def __next__(self):\r\n"]
[627.891864, "o", "        \"\"\"\r\n"]
[627.914235, "o", "        Return the next value, or raise StopIteration.\r\n"]
[627.936606, "o", "        \"\"\"\r\n"]
[627.958977, "o", "        out = next(self._dataiter)\r\n"]
[627.981348, "o", "        # ndarray.flat._dataiter returns scalars, so need a view as a Quantity.\r\n"]
[628.003719, "o", "        return self._quantity._new_view(out)\r\n"]
[628.02609, "o", "\r\n"]
[628.048462, "o", "    next = __next__\r\n"]
[628.070833, "o", "\r\n"]
[628.093204, "o", "    def __len__(self):\r\n"]
[628.115575, "o", "        return len(self._dataiter)\r\n"]
[628.137946, "o", "\r\n"]
[628.160317, "o", "    # Properties and methods to match `numpy.ndarray.flatiter`\r\n"]
[628.182688, "o", "\r\n"]
[628.205059, "o", "    @property\r\n"]
[628.22743, "o", "    def base(self):\r\n"]
[628.249801, "o", "        \"\"\"A reference to the array that is iterated over.\"\"\"\r\n"]
[628.272172, "o", "        return self._quantity\r\n"]
[628.294543, "o", "\r\n"]
[628.316914, "o", "    @property\r\n"]
[628.339285, "o", "    def coords(self):\r\n"]
[628.361656, "o", "        \"\"\"An N-dimensional tuple of current coordinates.\"\"\"\r\n"]
[628.384027, "o", "        return self._dataiter.coords\r\n"]
[628.406398, "o", "\r\n"]
[628.428769, "o", "    @property\r\n"]
[628.45114, "o", "    def index(self):\r\n"]
[628.473511, "o", "        \"\"\"Current flat index into the array.\"\"\"\r\n"]
[628.495882, "o", "        return self._dataiter.index\r\n"]
[628.518253, "o", "\r\n"]
[628.540624, "o", "    def copy(self):\r\n"]
[628.562995, "o", "        \"\"\"Get a copy of the iterator as a 1-D array.\"\"\"\r\n"]
[628.585367, "o", "        return self._quantity.flatten()\r\n"]
[628.607738, "o", "\r\n"]
[628.630109, "o", "\r\n"]
[628.65248, "o", "class QuantityInfoBase(ParentDtypeInfo):\r\n"]
[628.674851, "o", "    # This is on a base class rather than QuantityInfo directly, so that\r\n"]
[628.697222, "o", "    # it can be used for EarthLocationInfo yet make clear that that class\r\n"]
[628.719593, "o", "    # should not be considered a typical Quantity subclass by Table.\r\n"]
[628.741964, "o", "    attrs_from_parent = {\"dtype\", \"unit\"}  # dtype and unit taken from parent\r\n"]
[628.764335, "o", "    _supports_indexing = True\r\n"]
[628.786706, "o", "\r\n"]
[628.809077, "o", "    @staticmethod\r\n"]
[628.831448, "o", "    def default_format(val):\r\n"]
[628.853819, "o", "        return f\"{val.value}\"\r\n"]
[628.87619, "o", "\r\n"]
[628.898561, "o", "    @staticmethod\r\n"]
[628.920932, "o", "    def possible_string_format_functions(format_):\r\n"]
[628.943303, "o", "        \"\"\"Iterate through possible string-derived format functions.\r\n"]
[628.965674, "o", "\r\n"]
[628.988045, "o", "        A string can either be a format specifier for the format built-in,\r\n"]
[629.010416, "o", "        a new-style format string, or an old-style format string.\r\n"]
[629.032787, "o", "\r\n"]
[629.055158, "o", "        This method is overridden in order to suppress printing the unit\r\n"]
[629.077529, "o", "        in each row since it is already at the top in the column header.\r\n"]
[629.0999, "o", "        \"\"\"\r\n"]
[629.122271, "o", "        yield lambda format_, val: format(val.value, format_)\r\n"]
[629.144643, "o", "        yield lambda format_, val: format_.format(val.value)\r\n"]
[629.167014, "o", "        yield lambda format_, val: format_ % val.value\r\n"]
[629.189385, "o", "\r\n"]
[629.211756, "o", "\r\n"]
[629.234127, "o", "class QuantityInfo(QuantityInfoBase):\r\n"]
[629.256498, "o", "    \"\"\"\r\n"]
[629.278869, "o", "    Container for meta information like name, description, format.  This is\r\n"]
[629.30124, "o", "    required when the object is used as a mixin column within a table, but can\r\n"]
[629.323611, "o", "    be used as a general way to store meta information.\r\n"]
[629.345982, "o", "    \"\"\"\r\n"]
[629.368353, "o", "\r\n"]
[629.390724, "o", "    _represent_as_dict_attrs = (\"value\", \"unit\")\r\n"]
[629.413095, "o", "    _construct_from_dict_args = [\"value\"]\r\n"]
[629.435466, "o", "    _represent_as_dict_primary_data = \"value\"\r\n"]
[629.457837, "o", "\r\n"]
[629.480208, "o", "    def new_like(self, cols, length, metadata_conflicts=\"warn\", name=None):\r\n"]
[629.502579, "o", "        \"\"\"\r\n"]
[629.52495, "o", "        Return a new Quantity instance which is consistent with the\r\n"]
[629.547321, "o", "        input ``cols`` and has ``length`` rows.\r\n"]
[629.569692, "o", "\r\n"]
[629.592063, "o", "        This is intended for creating an empty column object whose elements can\r\n"]
[629.614434, "o", "        be set in-place for table operations like join or vstack.\r\n"]
[629.636805, "o", "\r\n"]
[629.659176, "o", "        Parameters\r\n"]
[629.681548, "o", "        ----------\r\n"]
[629.703919, "o", "        cols : list\r\n"]
[629.72629, "o", "            List of input columns\r\n"]
[629.748661, "o", "        length : int\r\n"]
[629.771032, "o", "            Length of the output column object\r\n"]
[629.793403, "o", "        metadata_conflicts : str ('warn'|'error'|'silent')\r\n"]
[629.815774, "o", "            How to handle metadata conflicts\r\n"]
[629.838145, "o", "        name : str\r\n"]
[629.860516, "o", "            Output column name\r\n"]
[629.882887, "o", "\r\n"]
[629.905258, "o", "        Returns\r\n"]
[629.927629, "o", "        -------\r\n"]
[630.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[630.002, "i", "sed -n '220,560p' astropy/units/quantity.py\r"]
[630.004, "o", "sed -n '220,560p' astropy/units/quantity.py\r\n"]
[630.020456, "o", "\u001b[?2004l\r\n"]
[630.034912, "o", "        col : `~astropy.units.Quantity` (or subclass)\r\n"]
[630.049368, "o", "            Empty instance of this class consistent with ``cols``\r\n"]
[630.063825, "o", "\r\n"]
[630.078281, "o", "        \"\"\"\r\n"]
[630.092737, "o", "        # Get merged info attributes like shape, dtype, format, description, etc.\r\n"]
[630.107193, "o", "        attrs = self.merge_cols_attributes(\r\n"]
[630.121649, "o", "            cols, metadata_conflicts, name, (\"meta\", \"format\", \"description\")\r\n"]
[630.136105, "o", "        )\r\n"]
[630.150561, "o", "\r\n"]
[630.165018, "o", "        # Make an empty quantity using the unit of the last one.\r\n"]
[630.179474, "o", "        shape = (length,) + attrs.pop(\"shape\")\r\n"]
[630.19393, "o", "        dtype = attrs.pop(\"dtype\")\r\n"]
[630.208386, "o", "        # Use zeros so we do not get problems for Quantity subclasses such\r\n"]
[630.222842, "o", "        # as Longitude and Latitude, which cannot take arbitrary values.\r\n"]
[630.237298, "o", "        data = np.zeros(shape=shape, dtype=dtype)\r\n"]
[630.251754, "o", "        # Get arguments needed to reconstruct class\r\n"]
[630.266211, "o", "        map = {\r\n"]
[630.280667, "o", "            key: (data if key == \"value\" else getattr(cols[-1], key))\r\n"]
[630.295123, "o", "            for key in self._represent_as_dict_attrs\r\n"]
[630.309579, "o", "        }\r\n"]
[630.324035, "o", "        map[\"copy\"] = COPY_IF_NEEDED\r\n"]
[630.338491, "o", "        out = self._construct_from_dict(map)\r\n"]
[630.352947, "o", "\r\n"]
[630.367404, "o", "        # Set remaining info attributes\r\n"]
[630.38186, "o", "        for attr, value in attrs.items():\r\n"]
[630.396316, "o", "            setattr(out.info, attr, value)\r\n"]
[630.410772, "o", "\r\n"]
[630.425228, "o", "        return out\r\n"]
[630.439684, "o", "\r\n"]
[630.45414, "o", "    def get_sortable_arrays(self):\r\n"]
[630.468596, "o", "        \"\"\"\r\n"]
[630.483053, "o", "        Return a list of arrays which can be lexically sorted to represent\r\n"]
[630.497509, "o", "        the order of the parent column.\r\n"]
[630.511965, "o", "\r\n"]
[630.526421, "o", "        For Quantity this is just the quantity itself.\r\n"]
[630.540877, "o", "\r\n"]
[630.555333, "o", "\r\n"]
[630.569789, "o", "        Returns\r\n"]
[630.584246, "o", "        -------\r\n"]
[630.598702, "o", "        arrays : list of ndarray\r\n"]
[630.613158, "o", "        \"\"\"\r\n"]
[630.627614, "o", "        return [self._parent]\r\n"]
[630.64207, "o", "\r\n"]
[630.656526, "o", "\r\n"]
[630.670982, "o", "class Quantity(np.ndarray):\r\n"]
[630.685439, "o", "    \"\"\"A `~astropy.units.Quantity` represents a number with some associated unit.\r\n"]
[630.699895, "o", "\r\n"]
[630.714351, "o", "    See also: https://docs.astropy.org/en/stable/units/quantity.html\r\n"]
[630.728807, "o", "\r\n"]
[630.743263, "o", "    Parameters\r\n"]
[630.757719, "o", "    ----------\r\n"]
[630.772175, "o", "    value : number, `~numpy.ndarray`, `~astropy.units.Quantity` (sequence), or str\r\n"]
[630.786632, "o", "        The numerical value of this quantity in the units given by unit.  If a\r\n"]
[630.801088, "o", "        `Quantity` or sequence of them (or any other valid object with a\r\n"]
[630.815544, "o", "        ``unit`` attribute), creates a new `Quantity` object, converting to\r\n"]
[630.83, "o", "        `unit` units as needed.  If a string, it is converted to a number or\r\n"]
[630.844456, "o", "        `Quantity`, depending on whether a unit is present.\r\n"]
[630.858912, "o", "\r\n"]
[630.873368, "o", "    unit : unit-like\r\n"]
[630.887825, "o", "        An object that represents the unit associated with the input value.\r\n"]
[630.902281, "o", "        Must be an `~astropy.units.UnitBase` object or a string parseable by\r\n"]
[630.916737, "o", "        the :mod:`~astropy.units` package.\r\n"]
[630.931193, "o", "\r\n"]
[630.945649, "o", "    dtype : ~numpy.dtype, optional\r\n"]
[630.960105, "o", "        The dtype of the resulting Numpy array or scalar that will\r\n"]
[630.974561, "o", "        hold the value.  If not provided, it is determined from the input,\r\n"]
[630.989018, "o", "        except that any integer and (non-Quantity) object inputs are converted\r\n"]
[631.003474, "o", "        to float by default.\r\n"]
[631.01793, "o", "        If `None`, the normal `numpy.dtype` introspection is used, e.g.\r\n"]
[631.032386, "o", "        preventing upcasting of integers.\r\n"]
[631.046842, "o", "\r\n"]
[631.061298, "o", "    copy : bool, optional\r\n"]
[631.075754, "o", "        If `True` (default), then the value is copied.  Otherwise, a copy will\r\n"]
[631.090211, "o", "        only be made if ``__array__`` returns a copy, if value is a nested\r\n"]
[631.104667, "o", "        sequence, or if a copy is needed to satisfy an explicitly given\r\n"]
[631.119123, "o", "        ``dtype``.  (The `False` option is intended mostly for internal use,\r\n"]
[631.133579, "o", "        to speed up initialization where a copy is known to have been made.\r\n"]
[631.148035, "o", "        Use with care.)\r\n"]
[631.162491, "o", "\r\n"]
[631.176947, "o", "    order : {'C', 'F', 'A'}, optional\r\n"]
[631.191404, "o", "        Specify the order of the array.  As in `~numpy.array`.  This parameter\r\n"]
[631.20586, "o", "        is ignored if the input is a `Quantity` and ``copy=False``.\r\n"]
[631.220316, "o", "\r\n"]
[631.234772, "o", "    subok : bool, optional\r\n"]
[631.249228, "o", "        If `False` (default), the returned array will be forced to be a\r\n"]
[631.263684, "o", "        `Quantity`.  Otherwise, `Quantity` subclasses will be passed through,\r\n"]
[631.27814, "o", "        or a subclass appropriate for the unit will be used (such as\r\n"]
[631.292596, "o", "        `~astropy.units.Dex` for ``u.dex(u.AA)``).\r\n"]
[631.307053, "o", "\r\n"]
[631.321509, "o", "    ndmin : int, optional\r\n"]
[631.335965, "o", "        Specifies the minimum number of dimensions that the resulting array\r\n"]
[631.350421, "o", "        should have.  Ones will be prepended to the shape as needed to meet\r\n"]
[631.364877, "o", "        this requirement.  This parameter is ignored if the input is a\r\n"]
[631.379333, "o", "        `Quantity` and ``copy=False``.\r\n"]
[631.393789, "o", "\r\n"]
[631.408246, "o", "    Raises\r\n"]
[631.422702, "o", "    ------\r\n"]
[631.437158, "o", "    TypeError\r\n"]
[631.451614, "o", "        If the value provided is not a Python numeric type.\r\n"]
[631.46607, "o", "    TypeError\r\n"]
[631.480526, "o", "        If the unit provided is not either a :class:`~astropy.units.Unit`\r\n"]
[631.494982, "o", "        object or a parseable string unit.\r\n"]
[631.509439, "o", "\r\n"]
[631.523895, "o", "    Notes\r\n"]
[631.538351, "o", "    -----\r\n"]
[631.552807, "o", "    Quantities can also be created by multiplying a number or array with a\r\n"]
[631.567263, "o", "    :class:`~astropy.units.Unit`. See https://docs.astropy.org/en/latest/units/\r\n"]
[631.581719, "o", "\r\n"]
[631.596175, "o", "    Unless the ``dtype`` argument is explicitly specified, integer\r\n"]
[631.610632, "o", "    or (non-Quantity) object inputs are converted to `float` by default.\r\n"]
[631.625088, "o", "    \"\"\"\r\n"]
[631.639544, "o", "\r\n"]
[631.654, "o", "    # Need to set a class-level default for _equivalencies, or\r\n"]
[631.668456, "o", "    # Constants can not initialize properly\r\n"]
[631.682912, "o", "    _equivalencies = []\r\n"]
[631.697368, "o", "\r\n"]
[631.711825, "o", "    # Default unit for initialization; can be overridden by subclasses,\r\n"]
[631.726281, "o", "    # possibly to `None` to indicate there is no default unit.\r\n"]
[631.740737, "o", "    _default_unit = dimensionless_unscaled\r\n"]
[631.755193, "o", "\r\n"]
[631.769649, "o", "    # Ensures views have an undefined unit.\r\n"]
[631.784105, "o", "    _unit = None\r\n"]
[631.798561, "o", "\r\n"]
[631.813018, "o", "    __array_priority__ = 10000\r\n"]
[631.827474, "o", "\r\n"]
[631.84193, "o", "    def __class_getitem__(cls, unit_shape_dtype):\r\n"]
[631.856386, "o", "        \"\"\"Quantity Type Hints.\r\n"]
[631.870842, "o", "\r\n"]
[631.885298, "o", "        Unit-aware type hints are ``Annotated`` objects that encode the class,\r\n"]
[631.899754, "o", "        the unit, and possibly shape and dtype information, depending on the\r\n"]
[631.914211, "o", "        python and :mod:`numpy` versions.\r\n"]
[631.928667, "o", "\r\n"]
[631.943123, "o", "        Schematically, ``Annotated[cls[shape, dtype], unit]``\r\n"]
[631.957579, "o", "\r\n"]
[631.972035, "o", "        As a classmethod, the type is the class, ie ``Quantity``\r\n"]
[631.986491, "o", "        produces an ``Annotated[Quantity, ...]`` while a subclass\r\n"]
[632.000947, "o", "        like :class:`~astropy.coordinates.Angle` returns\r\n"]
[632.015404, "o", "        ``Annotated[Angle, ...]``.\r\n"]
[632.02986, "o", "\r\n"]
[632.044316, "o", "        Parameters\r\n"]
[632.058772, "o", "        ----------\r\n"]
[632.073228, "o", "        unit_shape_dtype : :class:`~astropy.units.UnitBase`, str, `~astropy.units.PhysicalType`, or tuple\r\n"]
[632.087684, "o", "            Unit specification, can be the physical type (ie str or class).\r\n"]
[632.10214, "o", "            If tuple, then the first element is the unit specification\r\n"]
[632.116596, "o", "            and all other elements are for `numpy.ndarray` type annotations.\r\n"]
[632.131053, "o", "            Whether they are included depends on the python and :mod:`numpy`\r\n"]
[632.145509, "o", "            versions.\r\n"]
[632.159965, "o", "\r\n"]
[632.174421, "o", "        Returns\r\n"]
[632.188877, "o", "        -------\r\n"]
[632.203333, "o", "        `typing.Annotated`, `astropy.units.Unit`, or `astropy.units.PhysicalType`\r\n"]
[632.217789, "o", "            Return type in this preference order:\r\n"]
[632.232246, "o", "            * `typing.Annotated`\r\n"]
[632.246702, "o", "            * `astropy.units.Unit` or `astropy.units.PhysicalType`\r\n"]
[632.261158, "o", "\r\n"]
[632.275614, "o", "        Raises\r\n"]
[632.29007, "o", "        ------\r\n"]
[632.304526, "o", "        TypeError\r\n"]
[632.318982, "o", "            If the unit/physical_type annotation is not Unit-like or\r\n"]
[632.333439, "o", "            PhysicalType-like.\r\n"]
[632.347895, "o", "\r\n"]
[632.362351, "o", "        Examples\r\n"]
[632.376807, "o", "        --------\r\n"]
[632.391263, "o", "        Create a unit-aware Quantity type annotation\r\n"]
[632.405719, "o", "\r\n"]
[632.420175, "o", "            >>> Quantity[Unit(\"s\")]\r\n"]
[632.434632, "o", "            Annotated[Quantity, Unit(\"s\")]\r\n"]
[632.449088, "o", "\r\n"]
[632.463544, "o", "        See Also\r\n"]
[632.478, "o", "        --------\r\n"]
[632.492456, "o", "        `~astropy.units.quantity_input`\r\n"]
[632.506912, "o", "            Use annotations for unit checks on function arguments and results.\r\n"]
[632.521368, "o", "\r\n"]
[632.535825, "o", "        Notes\r\n"]
[632.550281, "o", "        -----\r\n"]
[632.564737, "o", "        |Quantity| types are also static-type compatible.\r\n"]
[632.579193, "o", "        \"\"\"\r\n"]
[632.593649, "o", "        from typing import Annotated\r\n"]
[632.608105, "o", "\r\n"]
[632.622561, "o", "        # process whether [unit] or [unit, shape, ptype]\r\n"]
[632.637018, "o", "        if isinstance(unit_shape_dtype, tuple):  # unit, shape, dtype\r\n"]
[632.651474, "o", "            target = unit_shape_dtype[0]\r\n"]
[632.66593, "o", "            shape_dtype = unit_shape_dtype[1:]\r\n"]
[632.680386, "o", "        else:  # just unit\r\n"]
[632.694842, "o", "            target = unit_shape_dtype\r\n"]
[632.709298, "o", "            shape_dtype = ()\r\n"]
[632.723754, "o", "\r\n"]
[632.738211, "o", "        # Allowed unit/physical types. Errors if neither.\r\n"]
[632.752667, "o", "        try:\r\n"]
[632.767123, "o", "            unit = Unit(target)\r\n"]
[632.781579, "o", "        except (TypeError, ValueError):\r\n"]
[632.796035, "o", "            from astropy.units.physical import get_physical_type\r\n"]
[632.810491, "o", "\r\n"]
[632.824947, "o", "            try:\r\n"]
[632.839404, "o", "                unit = get_physical_type(target)\r\n"]
[632.85386, "o", "            except (TypeError, ValueError, KeyError):  # KeyError for Enum\r\n"]
[632.868316, "o", "                raise TypeError(\r\n"]
[632.882772, "o", "                    \"unit annotation is not a Unit or PhysicalType\"\r\n"]
[632.897228, "o", "                ) from None\r\n"]
[632.911684, "o", "\r\n"]
[632.92614, "o", "        # Quantity does not (yet) properly extend the NumPy generics types,\r\n"]
[632.940596, "o", "        # introduced in numpy v1.22+, instead just including the unit info as\r\n"]
[632.955053, "o", "        # metadata using Annotated.\r\n"]
[632.969509, "o", "        # TODO: ensure we do interact with NDArray.__class_getitem__.\r\n"]
[632.983965, "o", "        return Annotated[cls, unit]\r\n"]
[632.998421, "o", "\r\n"]
[633.012877, "o", "    def __new__(\r\n"]
[633.027333, "o", "        cls: type[Self],\r\n"]
[633.041789, "o", "        value: QuantityLike,\r\n"]
[633.056246, "o", "        unit=None,\r\n"]
[633.070702, "o", "        dtype=np.inexact,\r\n"]
[633.085158, "o", "        copy=True,\r\n"]
[633.099614, "o", "        order=None,\r\n"]
[633.11407, "o", "        subok=False,\r\n"]
[633.128526, "o", "        ndmin=0,\r\n"]
[633.142982, "o", "    ) -> Self:\r\n"]
[633.157439, "o", "        if unit is not None:\r\n"]
[633.171895, "o", "            # convert unit first, to avoid multiple string->unit conversions\r\n"]
[633.186351, "o", "            unit = Unit(unit)\r\n"]
[633.200807, "o", "\r\n"]
[633.215263, "o", "        # inexact -> upcast to float dtype\r\n"]
[633.229719, "o", "        float_default = dtype is np.inexact\r\n"]
[633.244175, "o", "        if float_default:\r\n"]
[633.258632, "o", "            dtype = None\r\n"]
[633.273088, "o", "\r\n"]
[633.287544, "o", "        # optimize speed for Quantity with no dtype given, copy=COPY_IF_NEEDED\r\n"]
[633.302, "o", "        if isinstance(value, Quantity):\r\n"]
[633.316456, "o", "            if unit is not None and unit is not value.unit:\r\n"]
[633.330912, "o", "                value = value.to(unit)\r\n"]
[633.345368, "o", "                # the above already makes a copy (with float dtype)\r\n"]
[633.359825, "o", "                copy = COPY_IF_NEEDED\r\n"]
[633.374281, "o", "\r\n"]
[633.388737, "o", "            if type(value) is not cls and not (subok and isinstance(value, cls)):\r\n"]
[633.403193, "o", "                value = value.view(cls)\r\n"]
[633.417649, "o", "\r\n"]
[633.432105, "o", "            if float_default and value.dtype.kind in \"iu\":\r\n"]
[633.446561, "o", "                dtype = float\r\n"]
[633.461018, "o", "\r\n"]
[633.475474, "o", "            return np.array(\r\n"]
[633.48993, "o", "                value, dtype=dtype, copy=copy, order=order, subok=True, ndmin=ndmin\r\n"]
[633.504386, "o", "            )\r\n"]
[633.518842, "o", "\r\n"]
[633.533298, "o", "        # Maybe str, or list/tuple of Quantity? If so, this may set value_unit.\r\n"]
[633.547754, "o", "        # To ensure array remains fast, we short-circuit it.\r\n"]
[633.562211, "o", "        value_unit = None\r\n"]
[633.576667, "o", "        if not isinstance(value, np.ndarray):\r\n"]
[633.591123, "o", "            if isinstance(value, str):\r\n"]
[633.605579, "o", "                # The first part of the regex string matches any integer/float;\r\n"]
[633.620035, "o", "                # the second parts adds possible trailing .+-, which will break\r\n"]
[633.634491, "o", "                # the float function below and ensure things like 1.2.3deg\r\n"]
[633.648947, "o", "                # will not work.\r\n"]
[633.663404, "o", "                pattern = (\r\n"]
[633.67786, "o", "                    r\"\\s*[+-]?\"\r\n"]
[633.692316, "o", "                    r\"((\\d+\\.?\\d*)|(\\.\\d+)|([nN][aA][nN])|\"\r\n"]
[633.706772, "o", "                    r\"([iI][nN][fF]([iI][nN][iI][tT][yY]){0,1}))\"\r\n"]
[633.721228, "o", "                    r\"([eE][+-]?\\d+)?\"\r\n"]
[633.735684, "o", "                    r\"[.+-]?\"\r\n"]
[633.75014, "o", "                )\r\n"]
[633.764596, "o", "\r\n"]
[633.779053, "o", "                v = re.match(pattern, value)\r\n"]
[633.793509, "o", "                unit_string = None\r\n"]
[633.807965, "o", "                try:\r\n"]
[633.822421, "o", "                    value = float(v.group())\r\n"]
[633.836877, "o", "\r\n"]
[633.851333, "o", "                except Exception:\r\n"]
[633.865789, "o", "                    raise TypeError(\r\n"]
[633.880246, "o", "                        f'Cannot parse \"{value}\" as a {cls.__name__}. It does not '\r\n"]
[633.894702, "o", "                        \"start with a number.\"\r\n"]
[633.909158, "o", "                    )\r\n"]
[633.923614, "o", "\r\n"]
[633.93807, "o", "                unit_string = v.string[v.end() :].strip()\r\n"]
[633.952526, "o", "                if unit_string:\r\n"]
[633.966982, "o", "                    value_unit = Unit(unit_string)\r\n"]
[633.981439, "o", "                    if unit is None:\r\n"]
[633.995895, "o", "                        unit = value_unit  # signal no conversion needed below.\r\n"]
[634.010351, "o", "\r\n"]
[634.024807, "o", "            elif isinstance(value, (list, tuple)) and len(value) > 0:\r\n"]
[634.039263, "o", "                if all(isinstance(v, Quantity) for v in value):\r\n"]
[634.053719, "o", "                    # If a list/tuple contains only quantities, stack them,\r\n"]
[634.068175, "o", "                    # which also converts them to the same unit.\r\n"]
[634.082632, "o", "                    value = np.stack(value)\r\n"]
[634.097088, "o", "                    copy = False\r\n"]
[634.111544, "o", "\r\n"]
[634.126, "o", "                elif (\r\n"]
[634.140456, "o", "                    dtype is None\r\n"]
[634.154912, "o", "                    and not hasattr(value, \"dtype\")\r\n"]
[634.169368, "o", "                    and isinstance(unit, StructuredUnit)\r\n"]
[634.183825, "o", "                ):\r\n"]
[634.198281, "o", "                    # Special case for list/tuple of values and a structured unit:\r\n"]
[634.212737, "o", "                    # ``np.array(value, dtype=None)`` would treat tuples as lower\r\n"]
[634.227193, "o", "                    # levels of the array, rather than as elements of a structured\r\n"]
[634.241649, "o", "                    # array, so we use the structure of the unit to help infer the\r\n"]
[634.256105, "o", "                    # structured dtype of the value.\r\n"]
[634.270561, "o", "                    dtype = unit._recursively_get_dtype(value)\r\n"]
[634.285018, "o", "\r\n"]
[634.299474, "o", "        using_default_unit = False\r\n"]
[634.31393, "o", "        if value_unit is None:\r\n"]
[634.328386, "o", "            # If the value has a `unit` attribute and if not None\r\n"]
[634.342842, "o", "            # (for Columns with uninitialized unit), treat it like a quantity.\r\n"]
[634.357298, "o", "            value_unit = getattr(value, \"unit\", None)\r\n"]
[634.371754, "o", "            if value_unit is None:\r\n"]
[634.386211, "o", "                # Default to dimensionless for no (initialized) unit attribute.\r\n"]
[634.400667, "o", "                if unit is None:\r\n"]
[634.415123, "o", "                    using_default_unit = True\r\n"]
[634.429579, "o", "                    unit = cls._default_unit\r\n"]
[634.444035, "o", "                value_unit = unit  # signal below that no conversion is needed\r\n"]
[634.458491, "o", "            else:\r\n"]
[634.472947, "o", "                try:\r\n"]
[634.487404, "o", "                    value_unit = Unit(value_unit)\r\n"]
[634.50186, "o", "                except Exception as exc:\r\n"]
[634.516316, "o", "                    raise TypeError(\r\n"]
[634.530772, "o", "                        f\"The unit attribute {value.unit!r} of the input could \"\r\n"]
[634.545228, "o", "                        \"not be parsed as an astropy Unit.\"\r\n"]
[634.559684, "o", "                    ) from exc\r\n"]
[634.57414, "o", "\r\n"]
[634.588596, "o", "                if unit is None:\r\n"]
[634.603053, "o", "                    unit = value_unit\r\n"]
[634.617509, "o", "                elif unit is not value_unit:\r\n"]
[634.631965, "o", "                    copy = COPY_IF_NEEDED  # copy will be made in conversion at end\r\n"]
[634.646421, "o", "\r\n"]
[634.660877, "o", "        value = np.array(\r\n"]
[634.675333, "o", "            value, dtype=dtype, copy=copy, order=order, subok=True, ndmin=ndmin\r\n"]
[634.689789, "o", "        )\r\n"]
[634.704246, "o", "\r\n"]
[634.718702, "o", "        # For no-user-input unit, make sure the constructed unit matches the\r\n"]
[634.733158, "o", "        # structure of the data.\r\n"]
[634.747614, "o", "        if using_default_unit and value.dtype.names is not None:\r\n"]
[634.76207, "o", "            unit = value_unit = _structured_unit_like_dtype(value_unit, value.dtype)\r\n"]
[634.776526, "o", "\r\n"]
[634.790982, "o", "        # check that array contains numbers or long int objects\r\n"]
[634.805439, "o", "        if value.dtype.kind in \"OSU\" and not (\r\n"]
[634.819895, "o", "            value.dtype.kind == \"O\" and isinstance(value.item(0), numbers.Number)\r\n"]
[634.834351, "o", "        ):\r\n"]
[634.848807, "o", "            raise TypeError(\"The value must be a valid Python or Numpy numeric type.\")\r\n"]
[634.863263, "o", "\r\n"]
[634.877719, "o", "        # by default, cast any integer, boolean, etc., to float\r\n"]
[634.892175, "o", "        if float_default and value.dtype.kind in \"iuO\":\r\n"]
[634.906632, "o", "            value = value.astype(float)\r\n"]
[634.921088, "o", "\r\n"]
[634.935544, "o", "        # if we allow subclasses, allow a class from the unit.\r\n"]
[635.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[635.002, "i", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r"]
[635.004, "o", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r\n"]
[635.455455, "o", "reation_nocopy|units.time_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view\" --quick\r\n"]
[635.904909, "o", "\u001b[?2004l\r\n"]
[636.354364, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[636.803818, "o", "\u00b7 \u001b[0;32mRunning 6 total benchmarks (1 commits * 1 environments * 6 benchmarks)\u001b[0m\r\n"]
[637.253273, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[637.702727, "o", "[ 8.33%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_array_conversion\u001b[0m                                                                                                      1.25\u00b10ms\r\n"]
[638.152182, "o", "[16.67%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_creation_nocopy\u001b[0m                                                                                                        124\u00b10\u03bcs\r\n"]
[638.601636, "o", "[25.00%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_array\u001b[0m                                                                                                       295\u00b10\u03bcs\r\n"]
[639.051091, "o", "[33.33%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_list\u001b[0m                                                                                                        306\u00b10\u03bcs\r\n"]
[639.500545, "o", "[41.67%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_times_unit\u001b[0m                                                                                                             606\u00b10\u03bcs\r\n"]
[640.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[640.002, "i", "sed -n '720,820p' astropy/units/quantity.py\r"]
[640.004, "o", "sed -n '720,820p' astropy/units/quantity.py\r\n"]
[640.054471, "o", "\u001b[?2004l\r\n"]
[640.102941, "o", "            # Some np.linalg functions return namedtuple, which is handy to access\r\n"]
[640.151412, "o", "            # elements by name, but cannot be directly initialized with an iterator.\r\n"]
[640.199882, "o", "            result_cls = getattr(result, \"_make\", result.__class__)\r\n"]
[640.248353, "o", "            return result_cls(\r\n"]
[640.296824, "o", "                self._result_as_quantity(result_, unit_, out_)\r\n"]
[640.345294, "o", "                for (result_, unit_, out_) in zip(result, unit, out)\r\n"]
[640.393765, "o", "            )\r\n"]
[640.442235, "o", "\r\n"]
[640.490706, "o", "        if out is None:\r\n"]
[640.539176, "o", "            # View the result array as a Quantity with the proper unit.\r\n"]
[640.587647, "o", "            return (\r\n"]
[640.636118, "o", "                result\r\n"]
[640.684588, "o", "                if unit is None\r\n"]
[640.733059, "o", "                else self._new_view(result, unit, propagate_info=False)\r\n"]
[640.781529, "o", "            )\r\n"]
[640.83, "o", "\r\n"]
[640.878471, "o", "        elif isinstance(out, Quantity):\r\n"]
[640.926941, "o", "            # For given Quantity output, just set the unit. We know the unit\r\n"]
[640.975412, "o", "            # is not None and the output is of the correct Quantity subclass,\r\n"]
[641.023882, "o", "            # as it was passed through check_output.\r\n"]
[641.072353, "o", "            # (We cannot do this unconditionally, though, since it is possible\r\n"]
[641.120824, "o", "            # for out to be ndarray and the unit to be dimensionless.)\r\n"]
[641.169294, "o", "            out._set_unit(unit)\r\n"]
[641.217765, "o", "\r\n"]
[641.266235, "o", "        return out\r\n"]
[641.314706, "o", "\r\n"]
[641.363176, "o", "    def __quantity_subclass__(self, unit):\r\n"]
[641.411647, "o", "        \"\"\"\r\n"]
[641.460118, "o", "        Overridden by subclasses to change what kind of view is\r\n"]
[641.508588, "o", "        created based on the output unit of an operation.\r\n"]
[641.557059, "o", "\r\n"]
[641.605529, "o", "        Parameters\r\n"]
[641.654, "o", "        ----------\r\n"]
[641.702471, "o", "        unit : UnitBase\r\n"]
[641.750941, "o", "            The unit for which the appropriate class should be returned\r\n"]
[641.799412, "o", "\r\n"]
[641.847882, "o", "        Returns\r\n"]
[641.896353, "o", "        -------\r\n"]
[641.944824, "o", "        tuple :\r\n"]
[641.993294, "o", "            - `~astropy.units.Quantity` subclass\r\n"]
[642.041765, "o", "            - bool: True if subclasses of the given class are ok\r\n"]
[642.090235, "o", "        \"\"\"\r\n"]
[642.138706, "o", "        return Quantity, True\r\n"]
[642.187176, "o", "\r\n"]
[642.235647, "o", "    def _new_view(self, obj=None, unit=None, propagate_info=True):\r\n"]
[642.284118, "o", "        \"\"\"Create a Quantity view of some array-like input, and set the unit.\r\n"]
[642.332588, "o", "\r\n"]
[642.381059, "o", "        By default, return a view of ``obj`` of the same class as ``self`` and\r\n"]
[642.429529, "o", "        with the same unit.  Subclasses can override the type of class for a\r\n"]
[642.478, "o", "        given unit using ``__quantity_subclass__``, and can ensure properties\r\n"]
[642.526471, "o", "        other than the unit are copied using ``__array_finalize__``.\r\n"]
[642.574941, "o", "\r\n"]
[642.623412, "o", "        If the given unit defines a ``_quantity_class`` of which ``self``\r\n"]
[642.671882, "o", "        is not an instance, a view using this class is taken.\r\n"]
[642.720353, "o", "\r\n"]
[642.768824, "o", "        Parameters\r\n"]
[642.817294, "o", "        ----------\r\n"]
[642.865765, "o", "        obj : ndarray or scalar, optional\r\n"]
[642.914235, "o", "            The array to create a view of.  If obj is a numpy or python scalar,\r\n"]
[642.962706, "o", "            it will be converted to an array scalar.  By default, ``self``\r\n"]
[643.011176, "o", "            is converted.\r\n"]
[643.059647, "o", "\r\n"]
[643.108118, "o", "        unit : unit-like, optional\r\n"]
[643.156588, "o", "            The unit of the resulting object.  It is used to select a\r\n"]
[643.205059, "o", "            subclass, and explicitly assigned to the view if given.\r\n"]
[643.253529, "o", "            If not given, the subclass and unit will be that of ``self``.\r\n"]
[643.302, "o", "\r\n"]
[643.350471, "o", "        propagate_info : bool, optional\r\n"]
[643.398941, "o", "            Whether to transfer ``info`` if present.  Default: `True`, as\r\n"]
[643.447412, "o", "            appropriate for, e.g., unit conversions or slicing, where the\r\n"]
[643.495882, "o", "            nature of the object does not change.\r\n"]
[643.544353, "o", "\r\n"]
[643.592824, "o", "        Returns\r\n"]
[643.641294, "o", "        -------\r\n"]
[643.689765, "o", "        view : `~astropy.units.Quantity` subclass\r\n"]
[643.738235, "o", "\r\n"]
[643.786706, "o", "        \"\"\"\r\n"]
[643.835176, "o", "        # Determine the unit and quantity subclass that we need for the view.\r\n"]
[643.883647, "o", "        if unit is None:\r\n"]
[643.932118, "o", "            unit = self.unit\r\n"]
[643.980588, "o", "            quantity_subclass = self.__class__\r\n"]
[644.029059, "o", "        elif unit is self.unit and self.__class__ is Quantity:\r\n"]
[644.077529, "o", "            # The second part is because we should not presume what other\r\n"]
[644.126, "o", "            # classes want to do for the same unit.  E.g., Constant will\r\n"]
[644.174471, "o", "            # always want to fall back to Quantity, and relies on going\r\n"]
[644.222941, "o", "            # through `__quantity_subclass__`.\r\n"]
[644.271412, "o", "            quantity_subclass = Quantity\r\n"]
[644.319882, "o", "        else:\r\n"]
[644.368353, "o", "            unit = Unit(unit)\r\n"]
[644.416824, "o", "            quantity_subclass = getattr(unit, \"_quantity_class\", Quantity)\r\n"]
[644.465294, "o", "            if isinstance(self, quantity_subclass):\r\n"]
[644.513765, "o", "                quantity_subclass, subok = self.__quantity_subclass__(unit)\r\n"]
[644.562235, "o", "                if subok:\r\n"]
[644.610706, "o", "                    quantity_subclass = self.__class__\r\n"]
[644.659176, "o", "\r\n"]
[644.707647, "o", "        # We only want to propagate information from ``self`` to our new view,\r\n"]
[644.756118, "o", "        # so obj should be a regular array.  By using ``np.array``, we also\r\n"]
[644.804588, "o", "        # convert python and numpy scalars, which cannot be viewed as arrays\r\n"]
[644.853059, "o", "        # and thus not as Quantity either, to zero-dimensional arrays.\r\n"]
[644.901529, "o", "        # (These are turned back into scalar in `.value`)\r\n"]
[645.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[645.002, "i", "sed -n '820,920p' astropy/units/quantity.py\r"]
[645.004, "o", "sed -n '820,920p' astropy/units/quantity.py\r\n"]
[645.054471, "o", "\u001b[?2004l\r\n"]
[645.102941, "o", "        # Note that for an ndarray input, the np.array call takes only double\r\n"]
[645.151412, "o", "        # ``obj.__class is np.ndarray``. So, not worth special-casing.\r\n"]
[645.199882, "o", "        if obj is None:\r\n"]
[645.248353, "o", "            obj = self.view(np.ndarray)\r\n"]
[645.296824, "o", "        else:\r\n"]
[645.345294, "o", "            obj = np.array(obj, copy=COPY_IF_NEEDED, subok=True)\r\n"]
[645.393765, "o", "\r\n"]
[645.442235, "o", "        # Take the view, set the unit, and update possible other properties\r\n"]
[645.490706, "o", "        # such as ``info``, ``wrap_angle`` in `Longitude`, etc.\r\n"]
[645.539176, "o", "        view = obj.view(quantity_subclass)\r\n"]
[645.587647, "o", "        view._set_unit(unit)\r\n"]
[645.636118, "o", "        view.__array_finalize__(self)\r\n"]
[645.684588, "o", "        if propagate_info and \"info\" in self.__dict__:\r\n"]
[645.733059, "o", "            view.info = self.info\r\n"]
[645.781529, "o", "        return view\r\n"]
[645.83, "o", "\r\n"]
[645.878471, "o", "    def _set_unit(self, unit):\r\n"]
[645.926941, "o", "        \"\"\"Set the unit.\r\n"]
[645.975412, "o", "\r\n"]
[646.023882, "o", "        This is used anywhere the unit is set or modified, i.e., in the\r\n"]
[646.072353, "o", "        initializer, in ``__imul__`` and ``__itruediv__`` for in-place\r\n"]
[646.120824, "o", "        multiplication and division by another unit, as well as in\r\n"]
[646.169294, "o", "        ``__array_finalize__`` for wrapping up views.  For Quantity, it just\r\n"]
[646.217765, "o", "        sets the unit, but subclasses can override it to check that, e.g.,\r\n"]
[646.266235, "o", "        a unit is consistent.\r\n"]
[646.314706, "o", "        \"\"\"\r\n"]
[646.363176, "o", "        if not isinstance(unit, UnitBase):\r\n"]
[646.411647, "o", "            if isinstance(self._unit, StructuredUnit) or isinstance(\r\n"]
[646.460118, "o", "                unit, StructuredUnit\r\n"]
[646.508588, "o", "            ):\r\n"]
[646.557059, "o", "                unit = StructuredUnit(unit, self.dtype)\r\n"]
[646.605529, "o", "            else:\r\n"]
[646.654, "o", "                # Trying to go through a string ensures that, e.g., Magnitudes with\r\n"]
[646.702471, "o", "                # dimensionless physical unit become Quantity with units of mag.\r\n"]
[646.750941, "o", "                unit = Unit(str(unit), parse_strict=\"silent\")\r\n"]
[646.799412, "o", "                if not isinstance(unit, (UnitBase, StructuredUnit)):\r\n"]
[646.847882, "o", "                    raise UnitTypeError(\r\n"]
[646.896353, "o", "                        f\"{self.__class__.__name__} instances require normal units, \"\r\n"]
[646.944824, "o", "                        f\"not {unit.__class__} instances.\"\r\n"]
[646.993294, "o", "                    )\r\n"]
[647.041765, "o", "\r\n"]
[647.090235, "o", "        self._unit = unit\r\n"]
[647.138706, "o", "\r\n"]
[647.187176, "o", "    def __deepcopy__(self, memo):\r\n"]
[647.235647, "o", "        # If we don't define this, ``copy.deepcopy(quantity)`` will\r\n"]
[647.284118, "o", "        # return a bare Numpy array.\r\n"]
[647.332588, "o", "        return self.copy()\r\n"]
[647.381059, "o", "\r\n"]
[647.429529, "o", "    def __reduce__(self):\r\n"]
[647.478, "o", "        # patch to pickle Quantity objects (ndarray subclasses), see\r\n"]
[647.526471, "o", "        # http://www.mail-archive.com/numpy-discussion@scipy.org/msg02446.html\r\n"]
[647.574941, "o", "\r\n"]
[647.623412, "o", "        object_state = list(super().__reduce__())\r\n"]
[647.671882, "o", "        object_state[2] = (object_state[2], self.__dict__)\r\n"]
[647.720353, "o", "        return tuple(object_state)\r\n"]
[647.768824, "o", "\r\n"]
[647.817294, "o", "    def __setstate__(self, state):\r\n"]
[647.865765, "o", "        # patch to unpickle Quantity objects (ndarray subclasses), see\r\n"]
[647.914235, "o", "        # http://www.mail-archive.com/numpy-discussion@scipy.org/msg02446.html\r\n"]
[647.962706, "o", "\r\n"]
[648.011176, "o", "        nd_state, own_state = state\r\n"]
[648.059647, "o", "        super().__setstate__(nd_state)\r\n"]
[648.108118, "o", "        self.__dict__.update(own_state)\r\n"]
[648.156588, "o", "\r\n"]
[648.205059, "o", "    info = QuantityInfo()\r\n"]
[648.253529, "o", "\r\n"]
[648.302, "o", "    def _to_value(self, unit, equivalencies=[]):\r\n"]
[648.350471, "o", "        \"\"\"Helper method for to and to_value.\"\"\"\r\n"]
[648.398941, "o", "        if equivalencies == []:\r\n"]
[648.447412, "o", "            equivalencies = self._equivalencies\r\n"]
[648.495882, "o", "        if not self.dtype.names or isinstance(self.unit, StructuredUnit):\r\n"]
[648.544353, "o", "            # Standard path, let unit to do work.\r\n"]
[648.592824, "o", "            return self.unit.to(\r\n"]
[648.641294, "o", "                unit, self.view(np.ndarray), equivalencies=equivalencies\r\n"]
[648.689765, "o", "            )\r\n"]
[648.738235, "o", "\r\n"]
[648.786706, "o", "        else:\r\n"]
[648.835176, "o", "            # The .to() method of a simple unit cannot convert a structured\r\n"]
[648.883647, "o", "            # dtype, so we work around it, by recursing.\r\n"]
[648.932118, "o", "            # TODO: deprecate this?\r\n"]
[648.980588, "o", "            # Convert simple to Structured on initialization?\r\n"]
[649.029059, "o", "            result = np.empty_like(self.view(np.ndarray))\r\n"]
[649.077529, "o", "            for name in self.dtype.names:\r\n"]
[649.126, "o", "                result[name] = self[name]._to_value(unit, equivalencies)\r\n"]
[649.174471, "o", "            return result\r\n"]
[649.222941, "o", "\r\n"]
[649.271412, "o", "    def to(self, unit, equivalencies=[], copy=True):\r\n"]
[649.319882, "o", "        \"\"\"\r\n"]
[649.368353, "o", "        Return a new `~astropy.units.Quantity` object with the specified unit.\r\n"]
[649.416824, "o", "\r\n"]
[649.465294, "o", "        Parameters\r\n"]
[649.513765, "o", "        ----------\r\n"]
[649.562235, "o", "        unit : unit-like\r\n"]
[649.610706, "o", "            An object that represents the unit to convert to. Must be\r\n"]
[649.659176, "o", "            an `~astropy.units.UnitBase` object or a string parseable\r\n"]
[649.707647, "o", "            by the `~astropy.units` package.\r\n"]
[649.756118, "o", "\r\n"]
[649.804588, "o", "        equivalencies : list of tuple\r\n"]
[649.853059, "o", "            A list of equivalence pairs to try if the units are not\r\n"]
[649.901529, "o", "            directly convertible.  See :ref:`astropy:unit_equivalencies`.\r\n"]
[650.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[650.002, "i", "sed -n '920,980p' astropy/units/quantity.py\r"]
[650.004, "o", "sed -n '920,980p' astropy/units/quantity.py\r\n"]
[650.085742, "o", "\u001b[?2004l\r\n"]
[650.165484, "o", "            If not provided or ``[]``, class default equivalencies will be used\r\n"]
[650.245226, "o", "            (none for `~astropy.units.Quantity`, but may be set for subclasses)\r\n"]
[650.324968, "o", "            If `None`, no equivalencies will be applied at all, not even any\r\n"]
[650.40471, "o", "            set globally or within a context.\r\n"]
[650.484452, "o", "\r\n"]
[650.564194, "o", "        copy : bool, optional\r\n"]
[650.643935, "o", "            If `True` (default), then the value is copied.  Otherwise, a copy\r\n"]
[650.723677, "o", "            will only be made if necessary.\r\n"]
[650.803419, "o", "\r\n"]
[650.883161, "o", "        See Also\r\n"]
[650.962903, "o", "        --------\r\n"]
[651.042645, "o", "        to_value : get the numerical value in a given unit.\r\n"]
[651.122387, "o", "        \"\"\"\r\n"]
[651.202129, "o", "        # We don't use `to_value` below since we always want to make a copy\r\n"]
[651.281871, "o", "        # and don't want to slow down this method (esp. the scalar case).\r\n"]
[651.361613, "o", "        unit = Unit(unit)\r\n"]
[651.441355, "o", "        if copy:\r\n"]
[651.521097, "o", "            # Avoid using to_value to ensure that we make a copy. We also\r\n"]
[651.600839, "o", "            # don't want to slow down this method (esp. the scalar case).\r\n"]
[651.680581, "o", "            value = self._to_value(unit, equivalencies)\r\n"]
[651.760323, "o", "        else:\r\n"]
[651.840065, "o", "            # to_value only copies if necessary\r\n"]
[651.919806, "o", "            value = self.to_value(unit, equivalencies)\r\n"]
[651.999548, "o", "        return self._new_view(value, unit)\r\n"]
[652.07929, "o", "\r\n"]
[652.159032, "o", "    def to_value(self, unit=None, equivalencies=[]):\r\n"]
[652.238774, "o", "        \"\"\"\r\n"]
[652.318516, "o", "        The numerical value, possibly in a different unit.\r\n"]
[652.398258, "o", "\r\n"]
[652.478, "o", "        Parameters\r\n"]
[652.557742, "o", "        ----------\r\n"]
[652.637484, "o", "        unit : unit-like, optional\r\n"]
[652.717226, "o", "            The unit in which the value should be given. If not given or `None`,\r\n"]
[652.796968, "o", "            use the current unit.\r\n"]
[652.87671, "o", "\r\n"]
[652.956452, "o", "        equivalencies : list of tuple, optional\r\n"]
[653.036194, "o", "            A list of equivalence pairs to try if the units are not directly\r\n"]
[653.115935, "o", "            convertible (see :ref:`astropy:unit_equivalencies`). If not provided\r\n"]
[653.195677, "o", "            or ``[]``, class default equivalencies will be used (none for\r\n"]
[653.275419, "o", "            `~astropy.units.Quantity`, but may be set for subclasses).\r\n"]
[653.355161, "o", "            If `None`, no equivalencies will be applied at all, not even any\r\n"]
[653.434903, "o", "            set globally or within a context.\r\n"]
[653.514645, "o", "\r\n"]
[653.594387, "o", "        Returns\r\n"]
[653.674129, "o", "        -------\r\n"]
[653.753871, "o", "        value : ndarray or scalar\r\n"]
[653.833613, "o", "            The value in the units specified. For arrays, this will be a view\r\n"]
[653.913355, "o", "            of the data if no unit conversion was necessary.\r\n"]
[653.993097, "o", "\r\n"]
[654.072839, "o", "        See Also\r\n"]
[654.152581, "o", "        --------\r\n"]
[654.232323, "o", "        to : Get a new instance in a different unit.\r\n"]
[654.312065, "o", "        \"\"\"\r\n"]
[654.391806, "o", "        if unit is None or unit is self.unit:\r\n"]
[654.471548, "o", "            value = self.view(np.ndarray)\r\n"]
[654.55129, "o", "        elif not self.dtype.names:\r\n"]
[654.631032, "o", "            # For non-structured, we attempt a short-cut, where we just get\r\n"]
[654.710774, "o", "            # the scale.  If that is 1, we do not have to do anything.\r\n"]
[654.790516, "o", "            unit = Unit(unit)\r\n"]
[654.870258, "o", "            # We want a view if the unit does not change.  One could check\r\n"]
[655.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[655.002, "i", "sed -n '980,1080p' astropy/units/quantity.py\r"]
[655.004, "o", "sed -n '980,1080p' astropy/units/quantity.py\r\n"]
[655.054471, "o", "\u001b[?2004l\r\n"]
[655.102941, "o", "            # with \"==\", but that calculates the scale that we need anyway.\r\n"]
[655.151412, "o", "            # TODO: would be better for `unit.to` to have an in-place flag.\r\n"]
[655.199882, "o", "            try:\r\n"]
[655.248353, "o", "                scale = self.unit._to(unit)\r\n"]
[655.296824, "o", "            except Exception:\r\n"]
[655.345294, "o", "                # Short-cut failed; try default (maybe equivalencies help).\r\n"]
[655.393765, "o", "                value = self._to_value(unit, equivalencies)\r\n"]
[655.442235, "o", "            else:\r\n"]
[655.490706, "o", "                value = self.view(np.ndarray)\r\n"]
[655.539176, "o", "                if not is_effectively_unity(scale):\r\n"]
[655.587647, "o", "                    # not in-place!\r\n"]
[655.636118, "o", "                    value = value * scale\r\n"]
[655.684588, "o", "        else:\r\n"]
[655.733059, "o", "            # For structured arrays, we go the default route.\r\n"]
[655.781529, "o", "            value = self._to_value(unit, equivalencies)\r\n"]
[655.83, "o", "\r\n"]
[655.878471, "o", "        # Index with empty tuple to decay array scalars in to numpy scalars.\r\n"]
[655.926941, "o", "        return value if value.shape else value[()]\r\n"]
[655.975412, "o", "\r\n"]
[656.023882, "o", "    value = property(\r\n"]
[656.072353, "o", "        to_value,\r\n"]
[656.120824, "o", "        doc=\"\"\"The numerical value of this instance.\r\n"]
[656.169294, "o", "\r\n"]
[656.217765, "o", "    See also\r\n"]
[656.266235, "o", "    --------\r\n"]
[656.314706, "o", "    to_value : Get the numerical value in a given unit.\r\n"]
[656.363176, "o", "    \"\"\",\r\n"]
[656.411647, "o", "    )\r\n"]
[656.460118, "o", "\r\n"]
[656.508588, "o", "    @property\r\n"]
[656.557059, "o", "    def unit(self):\r\n"]
[656.605529, "o", "        \"\"\"\r\n"]
[656.654, "o", "        A `~astropy.units.UnitBase` object representing the unit of this\r\n"]
[656.702471, "o", "        quantity.\r\n"]
[656.750941, "o", "        \"\"\"\r\n"]
[656.799412, "o", "        return self._unit\r\n"]
[656.847882, "o", "\r\n"]
[656.896353, "o", "    @property\r\n"]
[656.944824, "o", "    def equivalencies(self):\r\n"]
[656.993294, "o", "        \"\"\"\r\n"]
[657.041765, "o", "        A list of equivalencies that will be applied by default during\r\n"]
[657.090235, "o", "        unit conversions.\r\n"]
[657.138706, "o", "        \"\"\"\r\n"]
[657.187176, "o", "        return self._equivalencies\r\n"]
[657.235647, "o", "\r\n"]
[657.284118, "o", "    def _recursively_apply(self, func):\r\n"]
[657.332588, "o", "        \"\"\"Apply function recursively to every field.\r\n"]
[657.381059, "o", "\r\n"]
[657.429529, "o", "        Returns a copy with the result.\r\n"]
[657.478, "o", "        \"\"\"\r\n"]
[657.526471, "o", "        result = np.empty_like(self)\r\n"]
[657.574941, "o", "        result_value = result.view(np.ndarray)\r\n"]
[657.623412, "o", "        result_unit = ()\r\n"]
[657.671882, "o", "        for name in self.dtype.names:\r\n"]
[657.720353, "o", "            part = func(self[name])\r\n"]
[657.768824, "o", "            result_value[name] = part.value\r\n"]
[657.817294, "o", "            result_unit += (part.unit,)\r\n"]
[657.865765, "o", "\r\n"]
[657.914235, "o", "        result._set_unit(result_unit)\r\n"]
[657.962706, "o", "        return result\r\n"]
[658.011176, "o", "\r\n"]
[658.059647, "o", "    @property\r\n"]
[658.108118, "o", "    def si(self):\r\n"]
[658.156588, "o", "        \"\"\"\r\n"]
[658.205059, "o", "        Returns a copy of the current `Quantity` instance with SI units. The\r\n"]
[658.253529, "o", "        value of the resulting object will be scaled.\r\n"]
[658.302, "o", "        \"\"\"\r\n"]
[658.350471, "o", "        if self.dtype.names:\r\n"]
[658.398941, "o", "            return self._recursively_apply(operator.attrgetter(\"si\"))\r\n"]
[658.447412, "o", "        si_unit = self.unit.si\r\n"]
[658.495882, "o", "        return self._new_view(self.value * si_unit.scale, si_unit / si_unit.scale)\r\n"]
[658.544353, "o", "\r\n"]
[658.592824, "o", "    @property\r\n"]
[658.641294, "o", "    def cgs(self):\r\n"]
[658.689765, "o", "        \"\"\"\r\n"]
[658.738235, "o", "        Returns a copy of the current `Quantity` instance with CGS units. The\r\n"]
[658.786706, "o", "        value of the resulting object will be scaled.\r\n"]
[658.835176, "o", "        \"\"\"\r\n"]
[658.883647, "o", "        if self.dtype.names:\r\n"]
[658.932118, "o", "            return self._recursively_apply(operator.attrgetter(\"cgs\"))\r\n"]
[658.980588, "o", "        cgs_unit = self.unit.cgs\r\n"]
[659.029059, "o", "        return self._new_view(self.value * cgs_unit.scale, cgs_unit / cgs_unit.scale)\r\n"]
[659.077529, "o", "\r\n"]
[659.126, "o", "    @property\r\n"]
[659.174471, "o", "    def isscalar(self):\r\n"]
[659.222941, "o", "        \"\"\"\r\n"]
[659.271412, "o", "        True if the `value` of this quantity is a scalar, or False if it\r\n"]
[659.319882, "o", "        is an array-like object.\r\n"]
[659.368353, "o", "\r\n"]
[659.416824, "o", "        .. note::\r\n"]
[659.465294, "o", "            This is subtly different from `numpy.isscalar` in that\r\n"]
[659.513765, "o", "            `numpy.isscalar` returns False for a zero-dimensional array\r\n"]
[659.562235, "o", "            (e.g. ``np.array(1)``), while this is True for quantities,\r\n"]
[659.610706, "o", "            since quantities cannot represent true numpy scalars.\r\n"]
[659.659176, "o", "        \"\"\"\r\n"]
[659.707647, "o", "        return not self.shape\r\n"]
[659.756118, "o", "\r\n"]
[659.804588, "o", "    # This flag controls whether convenience conversion members, such\r\n"]
[659.853059, "o", "    # as `q.m` equivalent to `q.to_value(u.m)` are available.  This is\r\n"]
[659.901529, "o", "    # not turned on on Quantity itself, but is on some subclasses of\r\n"]
[660.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[660.002, "i", "sed -n '1080,1180p' astropy/units/quantity.py\r"]
[660.004, "o", "sed -n '1080,1180p' astropy/units/quantity.py\r\n"]
[660.054471, "o", "\u001b[?2004l\r\n"]
[660.102941, "o", "    # Quantity, such as `astropy.coordinates.Angle`.\r\n"]
[660.151412, "o", "    _include_easy_conversion_members = False\r\n"]
[660.199882, "o", "\r\n"]
[660.248353, "o", "    def __dir__(self):\r\n"]
[660.296824, "o", "        \"\"\"\r\n"]
[660.345294, "o", "        Quantities are able to directly convert to other units that\r\n"]
[660.393765, "o", "        have the same physical type.  This function is implemented in\r\n"]
[660.442235, "o", "        order to make autocompletion still work correctly in IPython.\r\n"]
[660.490706, "o", "        \"\"\"\r\n"]
[660.539176, "o", "        if not self._include_easy_conversion_members:\r\n"]
[660.587647, "o", "            return super().__dir__()\r\n"]
[660.636118, "o", "\r\n"]
[660.684588, "o", "        dir_values = set(super().__dir__())\r\n"]
[660.733059, "o", "        equivalencies = Unit._normalize_equivalencies(self.equivalencies)\r\n"]
[660.781529, "o", "        for equivalent in self.unit._get_units_with_same_physical_type(equivalencies):\r\n"]
[660.83, "o", "            dir_values.update(equivalent.names)\r\n"]
[660.878471, "o", "        return sorted(dir_values)\r\n"]
[660.926941, "o", "\r\n"]
[660.975412, "o", "    def __getattr__(self, attr):\r\n"]
[661.023882, "o", "        \"\"\"\r\n"]
[661.072353, "o", "        Quantities are able to directly convert to other units that\r\n"]
[661.120824, "o", "        have the same physical type.\r\n"]
[661.169294, "o", "        \"\"\"\r\n"]
[661.217765, "o", "        if not self._include_easy_conversion_members:\r\n"]
[661.266235, "o", "            raise AttributeError(\r\n"]
[661.314706, "o", "                f\"'{self.__class__.__name__}' object has no '{attr}' member\"\r\n"]
[661.363176, "o", "            )\r\n"]
[661.411647, "o", "\r\n"]
[661.460118, "o", "        def get_virtual_unit_attribute():\r\n"]
[661.508588, "o", "            registry = get_current_unit_registry().registry\r\n"]
[661.557059, "o", "            to_unit = registry.get(attr, None)\r\n"]
[661.605529, "o", "            if to_unit is None:\r\n"]
[661.654, "o", "                return None\r\n"]
[661.702471, "o", "\r\n"]
[661.750941, "o", "            try:\r\n"]
[661.799412, "o", "                return self.unit.to(\r\n"]
[661.847882, "o", "                    to_unit, self.value, equivalencies=self.equivalencies\r\n"]
[661.896353, "o", "                )\r\n"]
[661.944824, "o", "            except UnitsError:\r\n"]
[661.993294, "o", "                return None\r\n"]
[662.041765, "o", "\r\n"]
[662.090235, "o", "        value = get_virtual_unit_attribute()\r\n"]
[662.138706, "o", "\r\n"]
[662.187176, "o", "        if value is None:\r\n"]
[662.235647, "o", "            raise AttributeError(\r\n"]
[662.284118, "o", "                f\"{self.__class__.__name__} instance has no attribute '{attr}'\"\r\n"]
[662.332588, "o", "            )\r\n"]
[662.381059, "o", "        else:\r\n"]
[662.429529, "o", "            return value\r\n"]
[662.478, "o", "\r\n"]
[662.526471, "o", "    # Equality needs to be handled explicitly as ndarray.__eq__ gives\r\n"]
[662.574941, "o", "    # DeprecationWarnings on any error, which is distracting, and does not\r\n"]
[662.623412, "o", "    # deal well with structured arrays (nor does the ufunc).\r\n"]
[662.671882, "o", "    def __eq__(self, other):\r\n"]
[662.720353, "o", "        try:\r\n"]
[662.768824, "o", "            other_value = self._to_own_unit(other)\r\n"]
[662.817294, "o", "        except UnitsError:\r\n"]
[662.865765, "o", "            return False\r\n"]
[662.914235, "o", "        except Exception:\r\n"]
[662.962706, "o", "            return NotImplemented\r\n"]
[663.011176, "o", "        return self.value.__eq__(other_value)\r\n"]
[663.059647, "o", "\r\n"]
[663.108118, "o", "    def __ne__(self, other):\r\n"]
[663.156588, "o", "        try:\r\n"]
[663.205059, "o", "            other_value = self._to_own_unit(other)\r\n"]
[663.253529, "o", "        except UnitsError:\r\n"]
[663.302, "o", "            return True\r\n"]
[663.350471, "o", "        except Exception:\r\n"]
[663.398941, "o", "            return NotImplemented\r\n"]
[663.447412, "o", "        return self.value.__ne__(other_value)\r\n"]
[663.495882, "o", "\r\n"]
[663.544353, "o", "    # Unit conversion operator (<<).\r\n"]
[663.592824, "o", "    def __lshift__(self, other):\r\n"]
[663.641294, "o", "        try:\r\n"]
[663.689765, "o", "            other = Unit(other, parse_strict=\"silent\")\r\n"]
[663.738235, "o", "        except UnitTypeError:\r\n"]
[663.786706, "o", "            return NotImplemented\r\n"]
[663.835176, "o", "\r\n"]
[663.883647, "o", "        return self.__class__(self, other, copy=False, subok=True)\r\n"]
[663.932118, "o", "\r\n"]
[663.980588, "o", "    def __ilshift__(self, other):\r\n"]
[664.029059, "o", "        try:\r\n"]
[664.077529, "o", "            other = Unit(other, parse_strict=\"silent\")\r\n"]
[664.126, "o", "        except UnitTypeError:\r\n"]
[664.174471, "o", "            return NotImplemented  # try other.__rlshift__(self)\r\n"]
[664.222941, "o", "\r\n"]
[664.271412, "o", "        try:\r\n"]
[664.319882, "o", "            factor = self.unit._to(other)\r\n"]
[664.368353, "o", "        except UnitConversionError:  # incompatible, or requires an Equivalency\r\n"]
[664.416824, "o", "            return NotImplemented\r\n"]
[664.465294, "o", "        except AttributeError:  # StructuredUnit does not have `_to`\r\n"]
[664.513765, "o", "            # In principle, in-place might be possible.\r\n"]
[664.562235, "o", "            return NotImplemented\r\n"]
[664.610706, "o", "\r\n"]
[664.659176, "o", "        view = self.view(np.ndarray)\r\n"]
[664.707647, "o", "        try:\r\n"]
[664.756118, "o", "            view *= factor  # operates on view\r\n"]
[664.804588, "o", "        except TypeError:\r\n"]
[664.853059, "o", "            # The error is `numpy.core._exceptions._UFuncOutputCastingError`,\r\n"]
[664.901529, "o", "            # which inherits from `TypeError`.\r\n"]
[665.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[665.002, "i", "applypatch << 'PATCH'\r"]
[665.004, "o", "applypatch << 'PATCH'\r\n"]
[665.136105, "o", "\u001b[?2004l\r\n"]
[665.266211, "o", "\u001b[?2004h> *** Begin Patch\r\n"]
[665.396316, "o", "\u001b[?2004l\r\n"]
[665.526421, "o", "\u001b[?2004h> *** Update File: astropy/units/quantity.py\r\n"]
[665.656526, "o", "\u001b[?2004l\r\n"]
[665.786632, "o", "\u001b[?2004h> @@\r\n"]
[665.916737, "o", "\u001b[?2004l\r\n"]
[666.046842, "o", "\u001b[?2004h> -        if unit is None or unit is self.unit:\r\n"]
[666.176947, "o", "\u001b[?2004l\r\n"]
[666.307053, "o", "\u001b[?2004h> -            value = self.view(np.ndarray)\r\n"]
[666.437158, "o", "\u001b[?2004l\r\n"]
[666.567263, "o", "\u001b[?2004h> -        elif not self.dtype.names:\r\n"]
[666.697368, "o", "\u001b[?2004l\r\n"]
[666.827474, "o", "\u001b[?2004h> -            # For non-structured, we attempt a short-cut, where we just get\r\n"]
[666.957579, "o", "\u001b[?2004l\r\n"]
[667.087684, "o", "\u001b[?2004h> -            # the scale.  If that is 1, we do not have to do anything.\r\n"]
[667.217789, "o", "\u001b[?2004l\r\n"]
[667.347895, "o", "\u001b[?2004h> -            unit = Unit(unit)\r\n"]
[667.478, "o", "\u001b[?2004l\r\n"]
[667.608105, "o", "\u001b[?2004h> +        if unit is None or unit is self.unit:\r\n"]
[667.738211, "o", "\u001b[?2004l\r\n"]
[667.868316, "o", "\u001b[?2004h> +            # Fast-path: exact same unit or unspecified target unit -> view\r\n"]
[667.998421, "o", "\u001b[?2004l\r\n"]
[668.128526, "o", "\u001b[?2004h> +            value = self.view(np.ndarray)\r\n"]
[668.258632, "o", "\u001b[?2004l\r\n"]
[668.388737, "o", "\u001b[?2004h> +        elif not self.dtype.names:\r\n"]
[668.518842, "o", "\u001b[?2004l\r\n"]
[668.648947, "o", "\u001b[?2004h> +            # For non-structured, attempt a short-cut by checking scale only.\r\n"]
[668.779053, "o", "\u001b[?2004l\r\n"]
[668.909158, "o", "\u001b[?2004h> +            # Avoid constructing a new Unit if one was already provided.\r\n"]
[669.039263, "o", "\u001b[?2004l\r\n"]
[669.169368, "o", "\u001b[?2004h> +            unit = unit if isinstance(unit, UnitBase) else Unit(unit)\r\n"]
[669.299474, "o", "\u001b[?2004l\r\n"]
[669.429579, "o", "\u001b[?2004h> *** End Patch\r\n"]
[669.559684, "o", "\u001b[?2004l\r\n"]
[669.689789, "o", "\u001b[?2004h> PATCH\r\n"]
[669.819895, "o", "\u001b[?2004l\r\n"]
[670.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[670.002, "i", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r"]
[670.004, "o", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r\n"]
[670.455455, "o", "reation_nocopy|units.time_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view\" --quick\r\n"]
[670.904909, "o", "\u001b[?2004l\r\n"]
[671.354364, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[671.803818, "o", "\u00b7 \u001b[0;32mRunning 6 total benchmarks (1 commits * 1 environments * 6 benchmarks)\u001b[0m\r\n"]
[672.253273, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[672.702727, "o", "[ 8.33%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_array_conversion\u001b[0m                                                                                                      1.16\u00b10ms\r\n"]
[673.152182, "o", "[16.67%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_creation_nocopy\u001b[0m                                                                                                        132\u00b10\u03bcs\r\n"]
[673.601636, "o", "[25.00%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_array\u001b[0m                                                                                                       311\u00b10\u03bcs\r\n"]
[674.051091, "o", "[33.33%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_list\u001b[0m                                                                                                        369\u00b10\u03bcs\r\n"]
[674.500545, "o", "[41.67%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_times_unit\u001b[0m                                                                                                             566\u00b10\u03bcs\r\n"]
[675.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[675.002, "i", "grep -n \"new_parts = \\[x for x in new_parts.items() if x\\[1\\] != 0\\]\" -n astropy/units/core.py\r"]
[675.004, "o", "grep -n \"new_parts = \\[x for x in new_parts.items() if x\\[1\\] != 0\\]\" -n astropy/units/core.py\r\n"]
[677.478, "o", "\u001b[?2004l\r\n"]
[680.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[680.002, "i", "sed -n '2400,2480p' astropy/units/core.py\r"]
[680.004, "o", "sed -n '2400,2480p' astropy/units/core.py\r\n"]
[680.066293, "o", "\u001b[?2004l\r\n"]
[680.126585, "o", "        return self._scale\r\n"]
[680.186878, "o", "\r\n"]
[680.247171, "o", "    @property\r\n"]
[680.307463, "o", "    def bases(self):\r\n"]
[680.367756, "o", "        \"\"\"\r\n"]
[680.428049, "o", "        Return the bases of the composite unit.\r\n"]
[680.488341, "o", "        \"\"\"\r\n"]
[680.548634, "o", "        return self._bases\r\n"]
[680.608927, "o", "\r\n"]
[680.66922, "o", "    @property\r\n"]
[680.729512, "o", "    def powers(self):\r\n"]
[680.789805, "o", "        \"\"\"\r\n"]
[680.850098, "o", "        Return the powers of the composite unit.\r\n"]
[680.91039, "o", "        \"\"\"\r\n"]
[680.970683, "o", "        return self._powers\r\n"]
[681.030976, "o", "\r\n"]
[681.091268, "o", "    def _expand_and_gather(self, decompose=False, bases=set()):\r\n"]
[681.151561, "o", "        def add_unit(unit, power, scale):\r\n"]
[681.211854, "o", "            if bases and unit not in bases:\r\n"]
[681.272146, "o", "                for base in bases:\r\n"]
[681.332439, "o", "                    try:\r\n"]
[681.392732, "o", "                        scale *= unit._to(base) ** power\r\n"]
[681.453024, "o", "                    except UnitsError:\r\n"]
[681.513317, "o", "                        pass\r\n"]
[681.57361, "o", "                    else:\r\n"]
[681.633902, "o", "                        unit = base\r\n"]
[681.694195, "o", "                        break\r\n"]
[681.754488, "o", "\r\n"]
[681.81478, "o", "            if unit in new_parts:\r\n"]
[681.875073, "o", "                a, b = resolve_fractions(new_parts[unit], power)\r\n"]
[681.935366, "o", "                new_parts[unit] = a + b\r\n"]
[681.995659, "o", "            else:\r\n"]
[682.055951, "o", "                new_parts[unit] = power\r\n"]
[682.116244, "o", "            return scale\r\n"]
[682.176537, "o", "\r\n"]
[682.236829, "o", "        new_parts = {}\r\n"]
[682.297122, "o", "        scale = self._scale\r\n"]
[682.357415, "o", "\r\n"]
[682.417707, "o", "        for b, p in zip(self._bases, self._powers):\r\n"]
[682.478, "o", "            if decompose and b not in bases:\r\n"]
[682.538293, "o", "                b = b.decompose(bases=bases)\r\n"]
[682.598585, "o", "\r\n"]
[682.658878, "o", "            if isinstance(b, CompositeUnit):\r\n"]
[682.719171, "o", "                scale *= b._scale**p\r\n"]
[682.779463, "o", "                for b_sub, p_sub in zip(b._bases, b._powers):\r\n"]
[682.839756, "o", "                    a, b = resolve_fractions(p_sub, p)\r\n"]
[682.900049, "o", "                    scale = add_unit(b_sub, a * b, scale)\r\n"]
[682.960341, "o", "            else:\r\n"]
[683.020634, "o", "                scale = add_unit(b, p, scale)\r\n"]
[683.080927, "o", "\r\n"]
[683.14122, "o", "        new_parts = [x for x in new_parts.items() if x[1] != 0]\r\n"]
[683.201512, "o", "        new_parts.sort(key=lambda x: (-x[1], getattr(x[0], \"name\", \"\")))\r\n"]
[683.261805, "o", "\r\n"]
[683.322098, "o", "        self._bases = [x[0] for x in new_parts]\r\n"]
[683.38239, "o", "        self._powers = [sanitize_power(x[1]) for x in new_parts]\r\n"]
[683.442683, "o", "        self._scale = sanitize_scale(scale)\r\n"]
[683.502976, "o", "\r\n"]
[683.563268, "o", "    def __copy__(self):\r\n"]
[683.623561, "o", "        \"\"\"\r\n"]
[683.683854, "o", "        For compatibility with python copy module.\r\n"]
[683.744146, "o", "        \"\"\"\r\n"]
[683.804439, "o", "        return CompositeUnit(self._scale, self._bases[:], self._powers[:])\r\n"]
[683.864732, "o", "\r\n"]
[683.925024, "o", "    def decompose(self, bases=set()):\r\n"]
[683.985317, "o", "        if len(bases) == 0 and self._decomposed_cache is not None:\r\n"]
[684.04561, "o", "            return self._decomposed_cache\r\n"]
[684.105902, "o", "\r\n"]
[684.166195, "o", "        for base in self.bases:\r\n"]
[684.226488, "o", "            if not isinstance(base, IrreducibleUnit) or (\r\n"]
[684.28678, "o", "                len(bases) and base not in bases\r\n"]
[684.347073, "o", "            ):\r\n"]
[684.407366, "o", "                break\r\n"]
[684.467659, "o", "        else:\r\n"]
[684.527951, "o", "            if len(bases) == 0:\r\n"]
[684.588244, "o", "                self._decomposed_cache = self\r\n"]
[684.648537, "o", "            return self\r\n"]
[684.708829, "o", "\r\n"]
[684.769122, "o", "        x = CompositeUnit(\r\n"]
[684.829415, "o", "            self.scale, self.bases, self.powers, decompose=True, decompose_bases=bases\r\n"]
[684.889707, "o", "        )\r\n"]
[685.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[685.002, "i", "python - << 'PY'\r"]
[685.004, "o", "python - << 'PY'\r\n"]
[685.115867, "o", "\u001b[?2004l\r\n"]
[685.225733, "o", "\u001b[?2004h> from pathlib import Path\r\n"]
[685.3356, "o", "\u001b[?2004l\r\n"]
[685.445467, "o", "\u001b[?2004h> p = Path('astropy/units/core.py')\r\n"]
[685.555333, "o", "\u001b[?2004l\r\n"]
[685.6652, "o", "\u001b[?2004h> s = p.read_text()\r\n"]
[685.775067, "o", "\u001b[?2004l\r\n"]
[685.884933, "o", "\u001b[?2004h> # 1) Conditional sort for new_parts and fast-path scale==1\r\n"]
[685.9948, "o", "\u001b[?2004l\r\n"]
[686.104667, "o", "\u001b[?2004h> s = s.replace(\r\n"]
[686.214533, "o", "\u001b[?2004l\r\n"]
[686.3244, "o", "\u001b[?2004h>     'new_parts = [x for x in new_parts.items() if x[1] != 0]\\n        new_parts.sort(key=lambda x: (-x[1], getattr(x[0], \"name\", \"\")))',\r\n"]
[686.434267, "o", "\u001b[?2004l\r\n"]
[686.544133, "o", "\u001b[?2004h>     'new_parts = [x for x in new_parts.items() if x[1] != 0]\\n        if len(new_parts) > 1:\\n            new_parts.sort(key=lambda x: (-x[1], getattr(x[0], \"n\r\n"]
[686.654, "o", "name\", \"\")))'\r\n"]
[686.763867, "o", "\u001b[?2004l\r\n"]
[686.873733, "o", "\u001b[?2004h> )\r\n"]
[686.9836, "o", "\u001b[?2004l\r\n"]
[687.093467, "o", "\u001b[?2004h> s = s.replace(\r\n"]
[687.203333, "o", "\u001b[?2004l\r\n"]
[687.3132, "o", "\u001b[?2004h>     'self._scale = sanitize_scale(scale)',\r\n"]
[687.423067, "o", "\u001b[?2004l\r\n"]
[687.532933, "o", "\u001b[?2004h>     'self._scale = 1.0 if (scale == 1 or scale == 1.0) else sanitize_scale(scale)'\r\n"]
[687.6428, "o", "\u001b[?2004l\r\n"]
[687.752667, "o", "\u001b[?2004h> )\r\n"]
[687.862533, "o", "\u001b[?2004l\r\n"]
[687.9724, "o", "\u001b[?2004h> # 2) Avoid sanitize_power for integer powers (exclude bool, include numpy ints)\r\n"]
[688.082267, "o", "\u001b[?2004l\r\n"]
[688.192133, "o", "\u001b[?2004h> s = s.replace(\r\n"]
[688.302, "o", "\u001b[?2004l\r\n"]
[688.411867, "o", "\u001b[?2004h>     'self._bases = [x[0] for x in new_parts]\\n        self._powers = [sanitize_power(x[1]) for x in new_parts]',\r\n"]
[688.521733, "o", "\u001b[?2004l\r\n"]
[688.6316, "o", "\u001b[?2004h>     'self._bases = [x[0] for x in new_parts]\\n        self._powers = []\\n        for _, p in new_parts:\\n            try:\\n                import numpy as _np\\\r\n"]
[688.741467, "o", "\\n            except Exception:\\n                _np = None\\n            if ((isinstance(p, int) and not isinstance(p, bool)) or (_np is not None and isinstance(\r\n"]
[688.851333, "o", "(p, _np.integer))):\\n                self._powers.append(p)\\n            else:\\n                self._powers.append(sanitize_power(p))'\r\n"]
[688.9612, "o", "\u001b[?2004l\r\n"]
[689.071067, "o", "\u001b[?2004h> )\r\n"]
[689.180933, "o", "\u001b[?2004l\r\n"]
[689.2908, "o", "\u001b[?2004h> p.write_text(s)\r\n"]
[689.400667, "o", "\u001b[?2004l\r\n"]
[689.510533, "o", "\u001b[?2004h> print('patched core.py')\r\n"]
[689.6204, "o", "\u001b[?2004l\r\n"]
[689.730267, "o", "\u001b[?2004h> PY\r\n"]
[689.840133, "o", "\u001b[?2004l\r\n"]
[690.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[690.002, "i", "sed -n '2400,2480p' astropy/units/core.py\r"]
[690.004, "o", "sed -n '2400,2480p' astropy/units/core.py\r\n"]
[690.066293, "o", "\u001b[?2004l\r\n"]
[690.126585, "o", "        return self._scale\r\n"]
[690.186878, "o", "\r\n"]
[690.247171, "o", "    @property\r\n"]
[690.307463, "o", "    def bases(self):\r\n"]
[690.367756, "o", "        \"\"\"\r\n"]
[690.428049, "o", "        Return the bases of the composite unit.\r\n"]
[690.488341, "o", "        \"\"\"\r\n"]
[690.548634, "o", "        return self._bases\r\n"]
[690.608927, "o", "\r\n"]
[690.66922, "o", "    @property\r\n"]
[690.729512, "o", "    def powers(self):\r\n"]
[690.789805, "o", "        \"\"\"\r\n"]
[690.850098, "o", "        Return the powers of the composite unit.\r\n"]
[690.91039, "o", "        \"\"\"\r\n"]
[690.970683, "o", "        return self._powers\r\n"]
[691.030976, "o", "\r\n"]
[691.091268, "o", "    def _expand_and_gather(self, decompose=False, bases=set()):\r\n"]
[691.151561, "o", "        def add_unit(unit, power, scale):\r\n"]
[691.211854, "o", "            if bases and unit not in bases:\r\n"]
[691.272146, "o", "                for base in bases:\r\n"]
[691.332439, "o", "                    try:\r\n"]
[691.392732, "o", "                        scale *= unit._to(base) ** power\r\n"]
[691.453024, "o", "                    except UnitsError:\r\n"]
[691.513317, "o", "                        pass\r\n"]
[691.57361, "o", "                    else:\r\n"]
[691.633902, "o", "                        unit = base\r\n"]
[691.694195, "o", "                        break\r\n"]
[691.754488, "o", "\r\n"]
[691.81478, "o", "            if unit in new_parts:\r\n"]
[691.875073, "o", "                a, b = resolve_fractions(new_parts[unit], power)\r\n"]
[691.935366, "o", "                new_parts[unit] = a + b\r\n"]
[691.995659, "o", "            else:\r\n"]
[692.055951, "o", "                new_parts[unit] = power\r\n"]
[692.116244, "o", "            return scale\r\n"]
[692.176537, "o", "\r\n"]
[692.236829, "o", "        new_parts = {}\r\n"]
[692.297122, "o", "        scale = self._scale\r\n"]
[692.357415, "o", "\r\n"]
[692.417707, "o", "        for b, p in zip(self._bases, self._powers):\r\n"]
[692.478, "o", "            if decompose and b not in bases:\r\n"]
[692.538293, "o", "                b = b.decompose(bases=bases)\r\n"]
[692.598585, "o", "\r\n"]
[692.658878, "o", "            if isinstance(b, CompositeUnit):\r\n"]
[692.719171, "o", "                scale *= b._scale**p\r\n"]
[692.779463, "o", "                for b_sub, p_sub in zip(b._bases, b._powers):\r\n"]
[692.839756, "o", "                    a, b = resolve_fractions(p_sub, p)\r\n"]
[692.900049, "o", "                    scale = add_unit(b_sub, a * b, scale)\r\n"]
[692.960341, "o", "            else:\r\n"]
[693.020634, "o", "                scale = add_unit(b, p, scale)\r\n"]
[693.080927, "o", "\r\n"]
[693.14122, "o", "        new_parts = [x for x in new_parts.items() if x[1] != 0]\r\n"]
[693.201512, "o", "        if len(new_parts) > 1:\r\n"]
[693.261805, "o", "            new_parts.sort(key=lambda x: (-x[1], getattr(x[0], \"name\", \"\")))\r\n"]
[693.322098, "o", "\r\n"]
[693.38239, "o", "        self._bases = [x[0] for x in new_parts]\r\n"]
[693.442683, "o", "        self._powers = []\r\n"]
[693.502976, "o", "        for _, p in new_parts:\r\n"]
[693.563268, "o", "            try:\r\n"]
[693.623561, "o", "                import numpy as _np\r\n"]
[693.683854, "o", "            except Exception:\r\n"]
[693.744146, "o", "                _np = None\r\n"]
[693.804439, "o", "            if ((isinstance(p, int) and not isinstance(p, bool)) or (_np is not None and isinstance(p, _np.integer))):\r\n"]
[693.864732, "o", "                self._powers.append(p)\r\n"]
[693.925024, "o", "            else:\r\n"]
[693.985317, "o", "                self._powers.append(sanitize_power(p))\r\n"]
[694.04561, "o", "        self._scale = 1.0 if (scale == 1 or scale == 1.0) else sanitize_scale(scale)\r\n"]
[694.105902, "o", "\r\n"]
[694.166195, "o", "    def __copy__(self):\r\n"]
[694.226488, "o", "        \"\"\"\r\n"]
[694.28678, "o", "        For compatibility with python copy module.\r\n"]
[694.347073, "o", "        \"\"\"\r\n"]
[694.407366, "o", "        return CompositeUnit(self._scale, self._bases[:], self._powers[:])\r\n"]
[694.467659, "o", "\r\n"]
[694.527951, "o", "    def decompose(self, bases=set()):\r\n"]
[694.588244, "o", "        if len(bases) == 0 and self._decomposed_cache is not None:\r\n"]
[694.648537, "o", "            return self._decomposed_cache\r\n"]
[694.708829, "o", "\r\n"]
[694.769122, "o", "        for base in self.bases:\r\n"]
[694.829415, "o", "            if not isinstance(base, IrreducibleUnit) or (\r\n"]
[694.889707, "o", "                len(bases) and base not in bases\r\n"]
[695.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[695.002, "i", "python - << 'PY'\r"]
[695.004, "o", "python - << 'PY'\r\n"]
[695.230727, "o", "\u001b[?2004l\r\n"]
[695.455455, "o", "\u001b[?2004h> from pathlib import Path\r\n"]
[695.680182, "o", "\u001b[?2004l\r\n"]
[695.904909, "o", "\u001b[?2004h> p = Path('astropy/units/quantity.py')\r\n"]
[696.129636, "o", "\u001b[?2004l\r\n"]
[696.354364, "o", "\u001b[?2004h> s = p.read_text()\r\n"]
[696.579091, "o", "\u001b[?2004l\r\n"]
[696.803818, "o", "\u001b[?2004h> s = s.replace(\r\n"]
[697.028545, "o", "\u001b[?2004l\r\n"]
[697.253273, "o", "\u001b[?2004h>     'unit = Unit(unit)\\n            # We want a view if the unit does not change.  One could check',\r\n"]
[697.478, "o", "\u001b[?2004l\r\n"]
[697.702727, "o", "\u001b[?2004h>     'unit = unit if isinstance(unit, UnitBase) else Unit(unit)\\n            # We want a view if the unit does not change.  One could check'\r\n"]
[697.927455, "o", "\u001b[?2004l\r\n"]
[698.152182, "o", "\u001b[?2004h> )\r\n"]
[698.376909, "o", "\u001b[?2004l\r\n"]
[698.601636, "o", "\u001b[?2004h> p.write_text(s)\r\n"]
[698.826364, "o", "\u001b[?2004l\r\n"]
[699.051091, "o", "\u001b[?2004h> print('patched quantity.py')\r\n"]
[699.275818, "o", "\u001b[?2004l\r\n"]
[699.500545, "o", "\u001b[?2004h> PY\r\n"]
[699.725273, "o", "\u001b[?2004l\r\n"]
[700.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[700.002, "i", "git status --porcelain\r"]
[700.004, "o", "git status --porcelain\r\n"]
[701.242, "o", "\u001b[?2004l\r\n"]
[702.478, "o", " M astropy/units/core.py\r\n"]
[703.714, "o", " M astropy/units/quantity.py\r\n"]
[705.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[705.002, "i", "git add -A && git commit -m \"Optimize units.CompositeUnit init: skip sort when <=1 part, fast-path scale==1, avoid \r"]
[705.004, "o", "git add -A && git commit -m \"Optimize units.CompositeUnit init: skip sort when <=1 part, fast-path scale==1, avoid \r\n"]
[705.1708, "o", " sanitize_power for ints; optimize Quantity.to_value to avoid Unit() when already UnitBase\"\r\n"]
[705.3356, "o", "\u001b[?2004l\r\n"]
[705.5004, "o", "warning: adding embedded git repository: astropy-benchmarks\r\n"]
[705.6652, "o", "\u001b[33mhint: You've added another git repository inside your current repository.\u001b[m\r\n"]
[705.83, "o", "\u001b[33mhint: Clones of the outer repository will not contain the contents of\u001b[m\r\n"]
[705.9948, "o", "\u001b[33mhint: the embedded repository and will not know how to obtain it.\u001b[m\r\n"]
[706.1596, "o", "\u001b[33mhint: If you meant to add a submodule, use:\u001b[m\r\n"]
[706.3244, "o", "\u001b[33mhint:\u001b[m\r\n"]
[706.4892, "o", "\u001b[33mhint: \tgit submodule add <url> astropy-benchmarks\u001b[m\r\n"]
[706.654, "o", "\u001b[33mhint:\u001b[m\r\n"]
[706.8188, "o", "\u001b[33mhint: If you added this path by mistake, you can remove it from the\u001b[m\r\n"]
[706.9836, "o", "\u001b[33mhint: index with:\u001b[m\r\n"]
[707.1484, "o", "\u001b[33mhint:\u001b[m\r\n"]
[707.3132, "o", "\u001b[33mhint: \tgit rm --cached astropy-benchmarks\u001b[m\r\n"]
[707.478, "o", "\u001b[33mhint:\u001b[m\r\n"]
[707.6428, "o", "\u001b[33mhint: See \"git help submodule\" for more information.\u001b[m\r\n"]
[707.8076, "o", "\u001b[33mhint: Disable this message with \"git config set advice.addEmbeddedRepo false\"\u001b[m\r\n"]
[707.9724, "o", "Author identity unknown\r\n"]
[708.1372, "o", "\r\n"]
[708.302, "o", "*** Please tell me who you are.\r\n"]
[708.4668, "o", "\r\n"]
[708.6316, "o", "Run\r\n"]
[708.7964, "o", "\r\n"]
[708.9612, "o", "  git config --global user.email \"you@example.com\"\r\n"]
[709.126, "o", "  git config --global user.name \"Your Name\"\r\n"]
[709.2908, "o", "\r\n"]
[709.4556, "o", "to set your account's default identity.\r\n"]
[709.6204, "o", "Omit --global to set the identity only in this repository.\r\n"]
[709.7852, "o", "\r\n"]
[710.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[710.002, "i", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r"]
[710.004, "o", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r\n"]
[710.1605, "o", "reation_nocopy|units.time_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view|units.TimeQuanti\r\n"]
[710.315, "o", "ityOpLargeArraySameUnit.*|units.TimeQuantityOpLargeArrayDiffUnit.*\" --quick\r\n"]
[710.4695, "o", "\u001b[?2004l\r\n"]
[710.624, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[710.7785, "o", "\u00b7 \u001b[0;32mRunning 26 total benchmarks (1 commits * 1 environments * 26 benchmarks)\u001b[0m\r\n"]
[710.933, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[711.0875, "o", "[ 1.92%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_add\u001b[0m                                                                                  2.36\u00b10ms\r\n"]
[711.242, "o", "[ 3.85%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_equal\u001b[0m                                                                                2.13\u00b10ms\r\n"]
[711.3965, "o", "[ 5.77%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_mul\u001b[0m                                                                                  2.11\u00b10ms\r\n"]
[711.551, "o", "[ 7.69%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_add\u001b[0m                                                                               2.29\u00b10ms\r\n"]
[711.7055, "o", "[ 9.62%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_equal\u001b[0m                                                                             2.36\u00b10ms\r\n"]
[711.86, "o", "[11.54%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_multiply\u001b[0m                                                                          1.84\u00b10ms\r\n"]
[712.0145, "o", "[13.46%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_subtract\u001b[0m                                                                          2.71\u00b10ms\r\n"]
[712.169, "o", "[15.38%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_np_truediv\u001b[0m                                                                           2.57\u00b10ms\r\n"]
[712.3235, "o", "[17.31%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_sub\u001b[0m                                                                                  2.50\u00b10ms\r\n"]
[712.478, "o", "[19.23%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArrayDiffUnit.time_quantity_truediv\u001b[0m                                                                              1.54\u00b10ms\r\n"]
[712.6325, "o", "[21.15%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_add\u001b[0m                                                                                  1.52\u00b10ms\r\n"]
[712.787, "o", "[23.08%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_equal\u001b[0m                                                                                1.12\u00b10ms\r\n"]
[712.9415, "o", "[25.00%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_mul\u001b[0m                                                                                  1.37\u00b10ms\r\n"]
[713.096, "o", "[26.92%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_add\u001b[0m                                                                               1.96\u00b10ms\r\n"]
[713.2505, "o", "[28.85%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_equal\u001b[0m                                                                             1.43\u00b10ms\r\n"]
[713.405, "o", "[30.77%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_multiply\u001b[0m                                                                          2.81\u00b10ms\r\n"]
[713.5595, "o", "[32.69%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_subtract\u001b[0m                                                                          1.73\u00b10ms\r\n"]
[713.714, "o", "[34.62%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_np_truediv\u001b[0m                                                                           1.58\u00b10ms\r\n"]
[713.8685, "o", "[36.54%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_sub\u001b[0m                                                                                  1.27\u00b10ms\r\n"]
[714.023, "o", "[38.46%] \u00b7\u00b7\u00b7 \u001b[0;39munits.TimeQuantityOpLargeArraySameUnit.time_quantity_truediv\u001b[0m                                                                              1.36\u00b10ms\r\n"]
[714.1775, "o", "[40.38%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_array_conversion\u001b[0m                                                                                                      1.09\u00b10ms\r\n"]
[714.332, "o", "[42.31%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_creation_nocopy\u001b[0m                                                                                                        105\u00b10\u03bcs\r\n"]
[714.4865, "o", "[44.23%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_array\u001b[0m                                                                                                       291\u00b10\u03bcs\r\n"]
[714.641, "o", "[46.15%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_list\u001b[0m                                                                                                        336\u00b10\u03bcs\r\n"]
[714.7955, "o", "[48.08%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_times_unit\u001b[0m                                                                                                             556\u00b10\u03bcs\r\n"]
[715.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[715.002, "i", "git config user.email \"devnull@example.com\"\r"]
[715.004, "o", "git config user.email \"devnull@example.com\"\r\n"]
[715.006, "o", "\u001b[?2004l\r\n"]
[720.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[720.002, "i", "git config user.name \"ASV Optimizer\"\r"]
[720.004, "o", "git config user.name \"ASV Optimizer\"\r\n"]
[720.006, "o", "\u001b[?2004l\r\n"]
[725.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[725.002, "i", "git add -A\r"]
[725.004, "o", "git add -A\r\n"]
[725.006, "o", "\u001b[?2004l\r\n"]
[730.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[730.002, "i", "git commit -m \"Optimize CompositeUnit init: skip sort for <=1 part, fast-path scale==1, avoid sanitize_power for in\r"]
[730.004, "o", "git commit -m \"Optimize CompositeUnit init: skip sort for <=1 part, fast-path scale==1, avoid sanitize_power for in\r\n"]
[730.9948, "o", "nts; optimize Quantity.to_value to avoid Unit() when already UnitBase\"\r\n"]
[731.9836, "o", "\u001b[?2004l\r\n"]
[732.9724, "o", "[main 90545e515] Optimize CompositeUnit init: skip sort for <=1 part, fast-path scale==1, avoid sanitize_power for ints; optimize Quantity.to_value to avoid Unit() when already UnitBase\r\n"]
[733.9612, "o", " 3 files changed, 16 insertions(+), 5 deletions(-)\r\n"]
[735.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[735.002, "i", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r"]
[735.004, "o", "asv run --config asv.ci.conf.json --python=same --bench=\"units.time_quantity_init_small_list|units.time_quantity_cr\r\n"]
[735.455455, "o", "reation_nocopy|units.time_quantity_init_small_array|units.time_quantity_times_unit|units.time_quantity_array_conversion|units.time_quantity_view\" --quick\r\n"]
[735.904909, "o", "\u001b[?2004l\r\n"]
[736.354364, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[736.803818, "o", "\u00b7 \u001b[0;32mRunning 6 total benchmarks (1 commits * 1 environments * 6 benchmarks)\u001b[0m\r\n"]
[737.253273, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.11_bin_python3.11\u001b[0m\r\n"]
[737.702727, "o", "[ 8.33%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_array_conversion\u001b[0m                                                                                                      1.09\u00b10ms\r\n"]
[738.152182, "o", "[16.67%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_creation_nocopy\u001b[0m                                                                                                        132\u00b10\u03bcs\r\n"]
[738.601636, "o", "[25.00%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_array\u001b[0m                                                                                                       289\u00b10\u03bcs\r\n"]
[739.051091, "o", "[33.33%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_init_small_list\u001b[0m                                                                                                        297\u00b10\u03bcs\r\n"]
[739.500545, "o", "[41.67%] \u00b7\u00b7\u00b7 \u001b[0;39munits.time_quantity_times_unit\u001b[0m                                                                                                             549\u00b10\u03bcs\r\n"]
[740.0, "o", "(asv_3.11) root@52adc14744e5:/workspace/repo# "]
[740.002, "i", "\u001b[?2004l\r"]
[740.004, "o", "\u001b[?2004l\r\n"]
[742.478, "o", "\r\n"]
