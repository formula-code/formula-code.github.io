import{c as p}from"./CBhUi2SX.js";import{M as bt,m as We,a as Ye,O as Ht,F as be,b as Ze}from"./z10Dua7R.js";import{P as Ae}from"./CGTDZSBk.js";import{a as Je,R as Qe}from"./BA1yty_9.js";import{l as Ce}from"./BY--hmdE.js";var it={},Dt=p&&p.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tr=p&&p.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],f;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(d){f={error:d}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(f)throw f.error}}return i},er=p&&p.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(it,"__esModule",{value:!0});var ue=bt,rr=We,jt;(function(t){var e=new Map([["autoOP",!0],["fnOP",!0],["movesupsub",!0],["subsupOK",!0],["texprimestyle",!0],["useHeight",!0],["variantForm",!0],["withDelims",!0],["mathaccent",!0],["open",!0],["close",!0]]);function r(S){return String.fromCodePoint(parseInt(S,16))}t.createEntity=r;function n(S){return S.childNodes}t.getChildren=n;function a(S){return S.getText()}t.getText=a;function i(S,F){var j,U;try{for(var z=Dt(F),J=z.next();!J.done;J=z.next()){var Q=J.value;S.appendChild(Q)}}catch(rt){j={error:rt}}finally{try{J&&!J.done&&(U=z.return)&&U.call(z)}finally{if(j)throw j.error}}}t.appendChildren=i;function f(S,F,j){S.attributes.set(F,j)}t.setAttribute=f;function d(S,F,j){S.setProperty(F,j)}t.setProperty=d;function m(S,F){var j,U;try{for(var z=Dt(Object.keys(F)),J=z.next();!J.done;J=z.next()){var Q=J.value,rt=F[Q];Q==="texClass"?(S.texClass=rt,S.setProperty(Q,rt)):Q==="movablelimits"?(S.setProperty("movablelimits",rt),(S.isKind("mo")||S.isKind("mstyle"))&&S.attributes.set("movablelimits",rt)):Q==="inferred"||(e.has(Q)?S.setProperty(Q,rt):S.attributes.set(Q,rt))}}catch(pt){j={error:pt}}finally{try{J&&!J.done&&(U=z.return)&&U.call(z)}finally{if(j)throw j.error}}}t.setProperties=m;function s(S,F){return S.getProperty(F)}t.getProperty=s;function o(S,F){return S.attributes.get(F)}t.getAttribute=o;function u(S){for(var F=[],j=1;j<arguments.length;j++)F[j-1]=arguments[j];S.removeProperty.apply(S,er([],tr(F),!1))}t.removeProperties=u;function l(S,F){return S.childNodes[F]}t.getChildAt=l;function c(S,F,j){var U=S.childNodes;U[F]=j,j&&(j.parent=S)}t.setChild=c;function h(S,F){for(var j=S.childNodes,U=0;U<j.length;U++)c(F,U,j[U])}t.copyChildren=h;function y(S,F){F.attributes=S.attributes,m(F,S.getAllProperties())}t.copyAttributes=y;function C(S,F){return S.isKind(F)}t.isType=C;function P(S){return S.isEmbellished}t.isEmbellished=P;function x(S){return S.texClass}t.getTexClass=x;function N(S){return S.coreMO()}t.getCoreMO=N;function X(S){return S instanceof ue.AbstractMmlNode||S instanceof ue.AbstractMmlEmptyNode}t.isNode=X;function H(S){return S.isInferred}t.isInferred=H;function Y(S){var F,j;if(!C(S,"mo"))return null;var U=S,z=U.getForms();try{for(var J=Dt(z),Q=J.next();!Q.done;Q=J.next()){var rt=Q.value,pt=rr.MmlMo.OPTABLE[rt][U.getText()];if(pt)return pt}}catch(Bt){F={error:Bt}}finally{try{Q&&!Q.done&&(j=J.return)&&j.call(J)}finally{if(F)throw F.error}}return null}t.getForm=Y})(jt||(jt={}));it.default=jt;var Et={},wt={},lt={};Object.defineProperty(lt,"__esModule",{value:!0});var nr=function(){function t(e,r){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];this.id=e,this.message=t.processString(r,n)}return t.processString=function(e,r){for(var n=e.split(t.pattern),a=1,i=n.length;a<i;a+=2){var f=n[a].charAt(0);if(f>="0"&&f<="9")n[a]=r[parseInt(n[a],10)-1],typeof n[a]=="number"&&(n[a]=n[a].toString());else if(f==="{")if(f=n[a].substr(1),f>="0"&&f<="9")n[a]=r[parseInt(n[a].substr(1,n[a].length-2),10)-1],typeof n[a]=="number"&&(n[a]=n[a].toString());else{var d=n[a].match(/^\{([a-z]+):%(\d+)\|(.*)\}$/);d&&(n[a]="%"+n[a])}n[a]==null&&(n[a]="???")}return n.join("")},t.pattern=/%(\d+|\{\d+\}|\{[a-z]+:\%\d+(?:\|(?:%\{\d+\}|%.|[^\}])*)+\}|.)/g,t}();lt.default=nr;var Mt={},It={};Object.defineProperty(It,"__esModule",{value:!0});It.asyncLoad=void 0;var se=Je;function ar(t){return se.mathjax.asyncLoad?new Promise(function(e,r){var n=se.mathjax.asyncLoad(t);n instanceof Promise?n.then(function(a){return e(a)}).catch(function(a){return r(a)}):e(n)}):Promise.reject("Can't load '".concat(t,"': No asyncLoad method specified"))}It.asyncLoad=ar;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.numeric=t.translate=t.remove=t.add=t.entities=t.options=void 0;var e=Qe,r=It;t.options={loadMissingEntities:!0},t.entities={ApplyFunction:"⁡",Backslash:"∖",Because:"∵",Breve:"˘",Cap:"⋒",CenterDot:"·",CircleDot:"⊙",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",Congruent:"≡",ContourIntegral:"∮",Coproduct:"∐",Cross:"⨯",Cup:"⋓",CupCap:"≍",Dagger:"‡",Del:"∇",Delta:"Δ",Diamond:"⋄",DifferentialD:"ⅆ",DotEqual:"≐",DoubleDot:"¨",DoubleRightTee:"⊨",DoubleVerticalBar:"∥",DownArrow:"↓",DownLeftVector:"↽",DownRightVector:"⇁",DownTee:"⊤",Downarrow:"⇓",Element:"∈",EqualTilde:"≂",Equilibrium:"⇌",Exists:"∃",ExponentialE:"ⅇ",FilledVerySmallSquare:"▪",ForAll:"∀",Gamma:"Γ",Gg:"⋙",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Hacek:"ˇ",Hat:"^",HumpDownHump:"≎",HumpEqual:"≏",Im:"ℑ",ImaginaryI:"ⅈ",Integral:"∫",Intersection:"⋂",InvisibleComma:"⁣",InvisibleTimes:"⁢",Lambda:"Λ",Larr:"↞",LeftAngleBracket:"⟨",LeftArrow:"←",LeftArrowRightArrow:"⇆",LeftCeiling:"⌈",LeftDownVector:"⇃",LeftFloor:"⌊",LeftRightArrow:"↔",LeftTee:"⊣",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpVector:"↿",LeftVector:"↼",Leftarrow:"⇐",Leftrightarrow:"⇔",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",LessSlantEqual:"⩽",LessTilde:"≲",Ll:"⋘",Lleftarrow:"⇚",LongLeftArrow:"⟵",LongLeftRightArrow:"⟷",LongRightArrow:"⟶",Longleftarrow:"⟸",Longleftrightarrow:"⟺",Longrightarrow:"⟹",Lsh:"↰",MinusPlus:"∓",NestedGreaterGreater:"≫",NestedLessLess:"≪",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotPrecedes:"⊀",NotPrecedesSlantEqual:"⋠",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsSlantEqual:"⋡",NotSupersetEqual:"⊉",NotTilde:"≁",NotVerticalBar:"∤",Omega:"Ω",OverBar:"‾",OverBrace:"⏞",PartialD:"∂",Phi:"Φ",Pi:"Π",PlusMinus:"±",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",Product:"∏",Proportional:"∝",Psi:"Ψ",Rarr:"↠",Re:"ℜ",ReverseEquilibrium:"⇋",RightAngleBracket:"⟩",RightArrow:"→",RightArrowLeftArrow:"⇄",RightCeiling:"⌉",RightDownVector:"⇂",RightFloor:"⌋",RightTee:"⊢",RightTeeArrow:"↦",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpVector:"↾",RightVector:"⇀",Rightarrow:"⇒",Rrightarrow:"⇛",Rsh:"↱",Sigma:"Σ",SmallCircle:"∘",Sqrt:"√",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",Star:"⋆",Subset:"⋐",SubsetEqual:"⊆",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",SuchThat:"∋",Sum:"∑",Superset:"⊃",SupersetEqual:"⊇",Supset:"⋑",Therefore:"∴",Theta:"Θ",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",UnderBar:"_",UnderBrace:"⏟",Union:"⋃",UnionPlus:"⊎",UpArrow:"↑",UpDownArrow:"↕",UpTee:"⊥",Uparrow:"⇑",Updownarrow:"⇕",Upsilon:"Υ",Vdash:"⊩",Vee:"⋁",VerticalBar:"∣",VerticalTilde:"≀",Vvdash:"⊪",Wedge:"⋀",Xi:"Ξ",amp:"&",acute:"´",aleph:"ℵ",alpha:"α",amalg:"⨿",and:"∧",ang:"∠",angmsd:"∡",angsph:"∢",ape:"≊",backprime:"‵",backsim:"∽",backsimeq:"⋍",beta:"β",beth:"ℶ",between:"≬",bigcirc:"◯",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",blacklozenge:"⧫",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",bowtie:"⋈",boxdl:"┐",boxdr:"┌",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxur:"└",bsol:"\\",bull:"•",cap:"∩",check:"✓",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledR:"®",circledS:"Ⓢ",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",clubs:"♣",colon:":",comp:"∁",ctdot:"⋯",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cup:"∪",curarr:"↷",curlyvee:"⋎",curlywedge:"⋏",dagger:"†",daleth:"ℸ",ddarr:"⇊",deg:"°",delta:"δ",digamma:"ϝ",div:"÷",divideontimes:"⋇",dot:"˙",doteqdot:"≑",dotplus:"∔",dotsquare:"⊡",dtdot:"⋱",ecir:"≖",efDot:"≒",egs:"⪖",ell:"ℓ",els:"⪕",empty:"∅",epsi:"ε",epsiv:"ϵ",erDot:"≓",eta:"η",eth:"ð",flat:"♭",fork:"⋔",frown:"⌢",gEl:"⪌",gamma:"γ",gap:"⪆",gimel:"ℷ",gnE:"≩",gnap:"⪊",gne:"⪈",gnsim:"⋧",gt:">",gtdot:"⋗",harrw:"↭",hbar:"ℏ",hellip:"…",hookleftarrow:"↩",hookrightarrow:"↪",imath:"ı",infin:"∞",intcal:"⊺",iota:"ι",jmath:"ȷ",kappa:"κ",kappav:"ϰ",lEg:"⪋",lambda:"λ",lap:"⪅",larrlp:"↫",larrtl:"↢",lbrace:"{",lbrack:"[",le:"≤",leftleftarrows:"⇇",leftthreetimes:"⋋",lessdot:"⋖",lmoust:"⎰",lnE:"≨",lnap:"⪉",lne:"⪇",lnsim:"⋦",longmapsto:"⟼",looparrowright:"↬",lowast:"∗",loz:"◊",lt:"<",ltimes:"⋉",ltri:"◃",macr:"¯",malt:"✠",mho:"℧",mu:"μ",multimap:"⊸",nLeftarrow:"⇍",nLeftrightarrow:"⇎",nRightarrow:"⇏",nVDash:"⊯",nVdash:"⊮",natur:"♮",nearr:"↗",nharr:"↮",nlarr:"↚",not:"¬",nrarr:"↛",nu:"ν",nvDash:"⊭",nvdash:"⊬",nwarr:"↖",omega:"ω",omicron:"ο",or:"∨",osol:"⊘",period:".",phi:"φ",phiv:"ϕ",pi:"π",piv:"ϖ",prap:"⪷",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",prime:"′",psi:"ψ",quot:'"',rarrtl:"↣",rbrace:"}",rbrack:"]",rho:"ρ",rhov:"ϱ",rightrightarrows:"⇉",rightthreetimes:"⋌",ring:"˚",rmoust:"⎱",rtimes:"⋊",rtri:"▹",scap:"⪸",scnE:"⪶",scnap:"⪺",scnsim:"⋩",sdot:"⋅",searr:"↘",sect:"§",sharp:"♯",sigma:"σ",sigmav:"ς",simne:"≆",smile:"⌣",spades:"♠",sub:"⊂",subE:"⫅",subnE:"⫋",subne:"⊊",supE:"⫆",supnE:"⫌",supne:"⊋",swarr:"↙",tau:"τ",theta:"θ",thetav:"ϑ",tilde:"˜",times:"×",triangle:"▵",triangleq:"≜",upsi:"υ",upuparrows:"⇈",veebar:"⊻",vellip:"⋮",weierp:"℘",xi:"ξ",yen:"¥",zeta:"ζ",zigrarr:"⇝",nbsp:" ",rsquo:"’",lsquo:"‘"};var n={};function a(s,o){Object.assign(t.entities,s),n[o]=!0}t.add=a;function i(s){delete t.entities[s]}t.remove=i;function f(s){return s.replace(/&([a-z][a-z0-9]*|#(?:[0-9]+|x[0-9a-f]+));/ig,d)}t.translate=f;function d(s,o){if(o.charAt(0)==="#")return m(o.slice(1));if(t.entities[o])return t.entities[o];if(t.options.loadMissingEntities){var u=o.match(/^[a-zA-Z](fr|scr|opf)$/)?RegExp.$1:o.charAt(0).toLowerCase();n[u]||(n[u]=!0,(0,e.retryAfter)((0,r.asyncLoad)("./util/entities/"+u+".js")))}return s}function m(s){var o=s.charAt(0)==="x"?parseInt(s.slice(1),16):parseInt(s);return String.fromCodePoint(o)}t.numeric=m})(Mt);var le;function Ct(){if(le)return wt;le=1;var t=p&&p.__read||function(s,o){var u=typeof Symbol=="function"&&s[Symbol.iterator];if(!u)return s;var l=u.call(s),c,h=[],y;try{for(;(o===void 0||o-- >0)&&!(c=l.next()).done;)h.push(c.value)}catch(C){y={error:C}}finally{try{c&&!c.done&&(u=l.return)&&u.call(l)}finally{if(y)throw y.error}}return h},e=p&&p.__values||function(s){var o=typeof Symbol=="function"&&Symbol.iterator,u=o&&s[o],l=0;if(u)return u.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&l>=s.length&&(s=void 0),{value:s&&s[l++],done:!s}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},r=p&&p.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(wt,"__esModule",{value:!0});var n=bt,a=r(it),i=r(Kt()),f=r(lt),d=Mt,m;return function(s){var o=7.2,u=72,l={em:function(v){return v},ex:function(v){return v*.43},pt:function(v){return v/10},pc:function(v){return v*1.2},px:function(v){return v*o/u},in:function(v){return v*o},cm:function(v){return v*o/2.54},mm:function(v){return v*o/25.4},mu:function(v){return v/18}},c="([-+]?([.,]\\d+|\\d+([.,]\\d*)?))",h="(pt|em|ex|mu|px|mm|cm|in|pc)",y=RegExp("^\\s*"+c+"\\s*"+h+"\\s*$"),C=RegExp("^\\s*"+c+"\\s*"+h+" ?");function P(v,g){g===void 0&&(g=!1);var E=v.match(g?C:y);return E?x([E[1].replace(/,/,"."),E[4],E[0].length]):[null,null,0]}s.matchDimen=P;function x(v){var g=t(v,3),E=g[0],I=g[1],w=g[2];if(I!=="mu")return[E,I,w];var B=X(l[I](parseFloat(E||"1")));return[B.slice(0,-2),"em",w]}function N(v){var g=t(P(v),2),E=g[0],I=g[1],w=parseFloat(E||"1"),B=l[I];return B?B(w):0}s.dimen2em=N;function X(v){return Math.abs(v)<6e-4?"0em":v.toFixed(3).replace(/\.?0+$/,"")+"em"}s.Em=X;function H(){for(var v=[],g=0;g<arguments.length;g++)v[g]=arguments[g];return v.map(function(E){return X(E)}).join(" ")}s.cols=H;function Y(v,g,E,I,w,B){w===void 0&&(w=""),B===void 0&&(B="");var O=v.nodeFactory,M=O.create("node","mrow",[],{open:g,close:I,texClass:n.TEXCLASS.INNER}),D;if(w)D=new i.default("\\"+w+"l"+g,v.parser.stack.env,v).mml();else{var G=O.create("text",g);D=O.create("node","mo",[],{fence:!0,stretchy:!0,symmetric:!0,texClass:n.TEXCLASS.OPEN},G)}if(a.default.appendChildren(M,[D,E]),w)D=new i.default("\\"+w+"r"+I,v.parser.stack.env,v).mml();else{var nt=O.create("text",I);D=O.create("node","mo",[],{fence:!0,stretchy:!0,symmetric:!0,texClass:n.TEXCLASS.CLOSE},nt)}return B&&D.attributes.set("mathcolor",B),a.default.appendChildren(M,[D]),M}s.fenced=Y;function S(v,g,E,I){var w=v.nodeFactory.create("node","mrow",[],{open:g,close:I,texClass:n.TEXCLASS.ORD});return g&&a.default.appendChildren(w,[F(v,g,"l")]),a.default.isType(E,"mrow")?a.default.appendChildren(w,a.default.getChildren(E)):a.default.appendChildren(w,[E]),I&&a.default.appendChildren(w,[F(v,I,"r")]),w}s.fixedFence=S;function F(v,g,E){(g==="{"||g==="}")&&(g="\\"+g);var I="{\\bigg"+E+" "+g+"}",w="{\\big"+E+" "+g+"}";return new i.default("\\mathchoice"+I+w+w+w,{},v).mml()}s.mathPalette=F;function j(v,g){for(var E=0,I=g.length;E<I;E++){var w=g[E];if(w&&!a.default.isType(w,"mspace")&&(!a.default.isType(w,"TeXAtom")||a.default.getChildren(w)[0]&&a.default.getChildren(a.default.getChildren(w)[0]).length)){if(a.default.isEmbellished(w)||a.default.isType(w,"TeXAtom")&&a.default.getTexClass(w)===n.TEXCLASS.REL){var B=v.nodeFactory.create("node","mi");g.unshift(B)}break}}}s.fixInitialMO=j;function U(v,g,E,I){if(v.configuration.options.internalMath)return v.configuration.options.internalMath(v,g,E,I);var w=I||v.stack.env.font,B=w?{mathvariant:w}:{},O=[],M=0,D=0,G,nt,tt="",mt=0;if(g.match(/\\?[${}\\]|\\\(|\\(eq)?ref\s*\{/)){for(;M<g.length;)if(G=g.charAt(M++),G==="$")tt==="$"&&mt===0?(nt=v.create("node","TeXAtom",[new i.default(g.slice(D,M-1),{},v.configuration).mml()]),O.push(nt),tt="",D=M):tt===""&&(D<M-1&&O.push(z(v,g.slice(D,M-1),B)),tt="$",D=M);else if(G==="{"&&tt!=="")mt++;else if(G==="}")if(tt==="}"&&mt===0){var ze=new i.default(g.slice(D,M),{},v.configuration).mml();nt=v.create("node","TeXAtom",[ze],B),O.push(nt),tt="",D=M}else tt!==""&&mt&&mt--;else if(G==="\\")if(tt===""&&g.substr(M).match(/^(eq)?ref\s*\{/)){var $e=RegExp["$&"].length;D<M-1&&O.push(z(v,g.slice(D,M-1),B)),tt="}",D=M-1,M+=$e}else G=g.charAt(M++),G==="("&&tt===""?(D<M-2&&O.push(z(v,g.slice(D,M-2),B)),tt=")",D=M):G===")"&&tt===")"&&mt===0?(nt=v.create("node","TeXAtom",[new i.default(g.slice(D,M-2),{},v.configuration).mml()]),O.push(nt),tt="",D=M):G.match(/[${}\\]/)&&tt===""&&(M--,g=g.substr(0,M-1)+g.substr(M));if(tt!=="")throw new f.default("MathNotTerminated","Math not terminated in text box")}return D<g.length&&O.push(z(v,g.slice(D),B)),E!=null?O=[v.create("node","mstyle",O,{displaystyle:!1,scriptlevel:E})]:O.length>1&&(O=[v.create("node","mrow",O)]),O}s.internalMath=U;function z(v,g,E){g=g.replace(/^\s+/,d.entities.nbsp).replace(/\s+$/,d.entities.nbsp);var I=v.create("text",g);return v.create("node","mtext",[],E,I)}s.internalText=z;function J(v,g,E,I,w){if(s.checkMovableLimits(g),a.default.isType(g,"munderover")&&a.default.isEmbellished(g)){a.default.setProperties(a.default.getCoreMO(g),{lspace:0,rspace:0});var B=v.create("node","mo",[],{rspace:0});g=v.create("node","mrow",[B,g])}var O=v.create("node","munderover",[g]);a.default.setChild(O,I==="over"?O.over:O.under,E);var M=O;return w&&(M=v.create("node","TeXAtom",[O],{texClass:n.TEXCLASS.OP,movesupsub:!0})),a.default.setProperty(M,"subsupOK",!0),M}s.underOver=J;function Q(v){var g=a.default.isType(v,"mo")?a.default.getForm(v):null;(a.default.getProperty(v,"movablelimits")||g&&g[3]&&g[3].movablelimits)&&a.default.setProperties(v,{movablelimits:!1})}s.checkMovableLimits=Q;function rt(v){if(typeof v!="string")return v;var g=v.trim();return g.match(/\\$/)&&v.match(/ $/)&&(g+=" "),g}s.trimSpaces=rt;function pt(v,g){return g=s.trimSpaces(g||""),g==="t"?v.arraydef.align="baseline 1":g==="b"?v.arraydef.align="baseline -1":g==="c"?v.arraydef.align="axis":g&&(v.arraydef.align=g),v}s.setArrayAlign=pt;function Bt(v,g,E){for(var I="",w="",B=0;B<E.length;){var O=E.charAt(B++);if(O==="\\")I+=O+E.charAt(B++);else if(O==="#")if(O=E.charAt(B++),O==="#")I+=O;else{if(!O.match(/[1-9]/)||parseInt(O,10)>g.length)throw new f.default("IllegalMacroParam","Illegal macro parameter reference");w=Pt(v,Pt(v,w,I),g[parseInt(O,10)-1]),I=""}else I+=O}return Pt(v,w,I)}s.substituteArgs=Bt;function Pt(v,g,E){if(E.match(/^[a-z]/i)&&g.match(/(^|[^\\])(\\\\)*\\[a-z]+$/i)&&(g+=" "),g.length+E.length>v.configuration.options.maxBuffer)throw new f.default("MaxBufferSize","MathJax internal buffer size exceeded; is there a recursive macro call?");return g+E}s.addArgs=Pt;function qe(v,g){if(g===void 0&&(g=!0),!(++v.macroCount<=v.configuration.options.maxMacros))throw g?new f.default("MaxMacroSub1","MathJax maximum macro substitution count exceeded; is here a recursive macro call?"):new f.default("MaxMacroSub2","MathJax maximum substitution count exceeded; is there a recursive latex environment?")}s.checkMaxMacros=qe;function Xe(v){if(v.stack.global.eqnenv)throw new f.default("ErroneousNestingEq","Erroneous nesting of equation structures");v.stack.global.eqnenv=!0}s.checkEqnEnv=Xe;function Ve(v,g){var E=v.copy(),I=g.configuration;return E.walkTree(function(w){var B,O;I.addNode(w.kind,w);var M=(w.getProperty("in-lists")||"").split(/,/);try{for(var D=e(M),G=D.next();!G.done;G=D.next()){var nt=G.value;nt&&I.addNode(nt,w)}}catch(tt){B={error:tt}}finally{try{G&&!G.done&&(O=D.return)&&O.call(D)}finally{if(B)throw B.error}}}),E}s.copyNode=Ve;function Ge(v,g,E){return E}s.MmlFilterAttribute=Ge;function He(v){var g=v.stack.env.font;return g?{mathvariant:g}:{}}s.getFontDef=He;function Ue(v,g,E){var I,w;g===void 0&&(g=null),E===void 0&&(E=!1);var B=Ke(v);if(g)try{for(var O=e(Object.keys(B)),M=O.next();!M.done;M=O.next()){var D=M.value;if(!g.hasOwnProperty(D)){if(E)throw new f.default("InvalidOption","Invalid option: %1",D);delete B[D]}}}catch(G){I={error:G}}finally{try{M&&!M.done&&(w=O.return)&&w.call(O)}finally{if(I)throw I.error}}return B}s.keyvalOptions=Ue;function Ke(v){for(var g,E,I={},w=v,B,O,M;w;)g=t(oe(w,["=",","]),3),O=g[0],B=g[1],w=g[2],B==="="?(E=t(oe(w,[","]),3),M=E[0],B=E[1],w=E[2],M=M==="false"||M==="true"?JSON.parse(M):M,I[O]=M):O&&(I[O]=!0);return I}function ie(v,g){for(;g>0;)v=v.trim().slice(1,-1),g--;return v.trim()}function oe(v,g){for(var E=v.length,I=0,w="",B=0,O=0,M=!0,D=!1;B<E;){var G=v[B++];switch(G){case" ":break;case"{":M?O++:(D=!1,O>I&&(O=I)),I++;break;case"}":I&&I--,(M||D)&&(O--,D=!0),M=!1;break;default:if(!I&&g.indexOf(G)!==-1)return[D?"true":ie(w,O),G,v.slice(B)];M=!1,D=!1}w+=G}if(I)throw new f.default("ExtraOpenMissingClose","Extra open brace or missing close brace");return[D?"true":ie(w,O),"",v.slice(B)]}}(m||(m={})),wt.default=m,wt}var Ut={},ir=p&&p.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ce=p&&p.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],f;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(d){f={error:d}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(f)throw f.error}}return i},or=p&&p.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},ur=p&&p.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ut,"__esModule",{value:!0});var sr=ur(it),lr=function(){function t(e,r,n){this._factory=e,this._env=r,this.global={},this.stack=[],this.global={isInner:n},this.stack=[this._factory.create("start",this.global)],r&&(this.stack[0].env=r),this.env=this.stack[0].env}return Object.defineProperty(t.prototype,"env",{get:function(){return this._env},set:function(e){this._env=e},enumerable:!1,configurable:!0}),t.prototype.Push=function(){for(var e,r,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];try{for(var i=ir(n),f=i.next();!f.done;f=i.next()){var d=f.value;if(d){var m=sr.default.isNode(d)?this._factory.create("mml",d):d;m.global=this.global;var s=ce(this.stack.length?this.Top().checkItem(m):[null,!0],2),o=s[0],u=s[1];if(u){if(o){this.Pop(),this.Push.apply(this,or([],ce(o),!1));continue}this.stack.push(m),m.env?(m.copyEnv&&Object.assign(m.env,this.env),this.env=m.env):m.env=this.env}}}}catch(l){e={error:l}}finally{try{f&&!f.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.prototype.Pop=function(){var e=this.stack.pop();return e.isOpen||delete e.env,this.env=this.stack.length?this.Top().env:{},e},t.prototype.Top=function(e){return e===void 0&&(e=1),this.stack.length<e?null:this.stack[this.stack.length-e]},t.prototype.Prev=function(e){var r=this.Top();return e?r.First:r.Pop()},t.prototype.toString=function(){return`stack[
  `+this.stack.join(`
  `)+`
]`},t}();Ut.default=lr;var fe;function Kt(){if(fe)return Et;fe=1;var t=p&&p.__values||function(s){var o=typeof Symbol=="function"&&Symbol.iterator,u=o&&s[o],l=0;if(u)return u.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&l>=s.length&&(s=void 0),{value:s&&s[l++],done:!s}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")},e=p&&p.__read||function(s,o){var u=typeof Symbol=="function"&&s[Symbol.iterator];if(!u)return s;var l=u.call(s),c,h=[],y;try{for(;(o===void 0||o-- >0)&&!(c=l.next()).done;)h.push(c.value)}catch(C){y={error:C}}finally{try{c&&!c.done&&(u=l.return)&&u.call(l)}finally{if(y)throw y.error}}return h},r=p&&p.__spreadArray||function(s,o,u){if(u||arguments.length===2)for(var l=0,c=o.length,h;l<c;l++)(h||!(l in o))&&(h||(h=Array.prototype.slice.call(o,0,l)),h[l]=o[l]);return s.concat(h||Array.prototype.slice.call(o))},n=p&&p.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Et,"__esModule",{value:!0});var a=n(Ct()),i=n(Ut),f=n(lt),d=bt,m=function(){function s(o,u,l){var c,h;this._string=o,this.configuration=l,this.macroCount=0,this.i=0,this.currentCS="";var y=u.hasOwnProperty("isInner"),C=u.isInner;delete u.isInner;var P;if(u){P={};try{for(var x=t(Object.keys(u)),N=x.next();!N.done;N=x.next()){var X=N.value;P[X]=u[X]}}catch(H){c={error:H}}finally{try{N&&!N.done&&(h=x.return)&&h.call(x)}finally{if(c)throw c.error}}}this.configuration.pushParser(this),this.stack=new i.default(this.itemFactory,P,y?C:!0),this.Parse(),this.Push(this.itemFactory.create("stop"))}return Object.defineProperty(s.prototype,"options",{get:function(){return this.configuration.options},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"itemFactory",{get:function(){return this.configuration.itemFactory},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"tags",{get:function(){return this.configuration.tags},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"string",{get:function(){return this._string},set:function(o){this._string=o},enumerable:!1,configurable:!0}),s.prototype.parse=function(o,u){return this.configuration.handlers.get(o).parse(u)},s.prototype.lookup=function(o,u){return this.configuration.handlers.get(o).lookup(u)},s.prototype.contains=function(o,u){return this.configuration.handlers.get(o).contains(u)},s.prototype.toString=function(){var o,u,l="";try{for(var c=t(Array.from(this.configuration.handlers.keys())),h=c.next();!h.done;h=c.next()){var y=h.value;l+=y+": "+this.configuration.handlers.get(y)+`
`}}catch(C){o={error:C}}finally{try{h&&!h.done&&(u=c.return)&&u.call(c)}finally{if(o)throw o.error}}return l},s.prototype.Parse=function(){for(var o;this.i<this.string.length;)o=this.getCodePoint(),this.i+=o.length,this.parse("character",[this,o])},s.prototype.Push=function(o){o instanceof d.AbstractMmlNode&&o.isInferred?this.PushAll(o.childNodes):this.stack.Push(o)},s.prototype.PushAll=function(o){var u,l;try{for(var c=t(o),h=c.next();!h.done;h=c.next()){var y=h.value;this.stack.Push(y)}}catch(C){u={error:C}}finally{try{h&&!h.done&&(l=c.return)&&l.call(c)}finally{if(u)throw u.error}}},s.prototype.mml=function(){if(!this.stack.Top().isKind("mml"))return null;var o=this.stack.Top().First;return this.configuration.popParser(),o},s.prototype.convertDelimiter=function(o){var u=this.lookup("delimiter",o);return u?u.char:null},s.prototype.getCodePoint=function(){var o=this.string.codePointAt(this.i);return o===void 0?"":String.fromCodePoint(o)},s.prototype.nextIsSpace=function(){return!!this.string.charAt(this.i).match(/\s/)},s.prototype.GetNext=function(){for(;this.nextIsSpace();)this.i++;return this.getCodePoint()},s.prototype.GetCS=function(){var o=this.string.slice(this.i).match(/^(([a-z]+) ?|[\uD800-\uDBFF].|.)/i);return o?(this.i+=o[0].length,o[2]||o[1]):(this.i++," ")},s.prototype.GetArgument=function(o,u){switch(this.GetNext()){case"":if(!u)throw new f.default("MissingArgFor","Missing argument for %1",this.currentCS);return null;case"}":if(!u)throw new f.default("ExtraCloseMissingOpen","Extra close brace or missing open brace");return null;case"\\":return this.i++,"\\"+this.GetCS();case"{":for(var l=++this.i,c=1;this.i<this.string.length;)switch(this.string.charAt(this.i++)){case"\\":this.i++;break;case"{":c++;break;case"}":if(--c===0)return this.string.slice(l,this.i-1);break}throw new f.default("MissingCloseBrace","Missing close brace")}var h=this.getCodePoint();return this.i+=h.length,h},s.prototype.GetBrackets=function(o,u){if(this.GetNext()!=="[")return u;for(var l=++this.i,c=0;this.i<this.string.length;)switch(this.string.charAt(this.i++)){case"{":c++;break;case"\\":this.i++;break;case"}":if(c--<=0)throw new f.default("ExtraCloseLooking","Extra close brace while looking for %1","']'");break;case"]":if(c===0)return this.string.slice(l,this.i-1);break}throw new f.default("MissingCloseBracket","Could not find closing ']' for argument to %1",this.currentCS)},s.prototype.GetDelimiter=function(o,u){var l=this.GetNext();if(this.i+=l.length,this.i<=this.string.length&&(l==="\\"?l+=this.GetCS():l==="{"&&u&&(this.i--,l=this.GetArgument(o).trim()),this.contains("delimiter",l)))return this.convertDelimiter(l);throw new f.default("MissingOrUnrecognizedDelim","Missing or unrecognized delimiter for %1",this.currentCS)},s.prototype.GetDimen=function(o){if(this.GetNext()==="{"){var u=this.GetArgument(o),l=e(a.default.matchDimen(u),2),c=l[0],h=l[1];if(c)return c+h}else{var u=this.string.slice(this.i),y=e(a.default.matchDimen(u,!0),3),c=y[0],h=y[1],C=y[2];if(c)return this.i+=C,c+h}throw new f.default("MissingDimOrUnits","Missing dimension or its units for %1",this.currentCS)},s.prototype.GetUpTo=function(o,u){for(;this.nextIsSpace();)this.i++;for(var l=this.i,c=0;this.i<this.string.length;){var h=this.i,y=this.GetNext();switch(this.i+=y.length,y){case"\\":y+=this.GetCS();break;case"{":c++;break;case"}":if(c===0)throw new f.default("ExtraCloseLooking","Extra close brace while looking for %1",u);c--;break}if(c===0&&y===u)return this.string.slice(l,h)}throw new f.default("TokenNotFoundForCommand","Could not find %1 for %2",u,this.currentCS)},s.prototype.ParseArg=function(o){return new s(this.GetArgument(o),this.stack.env,this.configuration).mml()},s.prototype.ParseUpTo=function(o,u){return new s(this.GetUpTo(o,u),this.stack.env,this.configuration).mml()},s.prototype.GetDelimiterArg=function(o){var u=a.default.trimSpaces(this.GetArgument(o));if(u==="")return null;if(this.contains("delimiter",u))return u;throw new f.default("MissingOrUnrecognizedDelim","Missing or unrecognized delimiter for %1",this.currentCS)},s.prototype.GetStar=function(){var o=this.GetNext()==="*";return o&&this.i++,o},s.prototype.create=function(o){for(var u,l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];return(u=this.configuration.nodeFactory).create.apply(u,r([o],e(l),!1))},s}();return Et.default=m,Et}var Se={},zt={},ht={},cr=p&&p.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qt=p&&p.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],f;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(d){f={error:d}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(f)throw f.error}}return i},he=p&&p.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},fr=p&&p.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hr=p&&p.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ht,"__esModule",{value:!0});ht.BaseItem=ht.MmlStack=void 0;var de=hr(lt),Te=function(){function t(e){this._nodes=e}return Object.defineProperty(t.prototype,"nodes",{get:function(){return this._nodes},enumerable:!1,configurable:!0}),t.prototype.Push=function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];(e=this._nodes).push.apply(e,he([],qt(r),!1))},t.prototype.Pop=function(){return this._nodes.pop()},Object.defineProperty(t.prototype,"First",{get:function(){return this._nodes[this.Size()-1]},set:function(e){this._nodes[this.Size()-1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Last",{get:function(){return this._nodes[0]},set:function(e){this._nodes[0]=e},enumerable:!1,configurable:!0}),t.prototype.Peek=function(e){return e==null&&(e=1),this._nodes.slice(this.Size()-e)},t.prototype.Size=function(){return this._nodes.length},t.prototype.Clear=function(){this._nodes=[]},t.prototype.toMml=function(e,r){return e===void 0&&(e=!0),this._nodes.length===1&&!r?this.First:this.create("node",e?"inferredMrow":"mrow",this._nodes,{})},t.prototype.create=function(e){for(var r,n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return(r=this.factory.configuration.nodeFactory).create.apply(r,he([e],qt(n),!1))},t}();ht.MmlStack=Te;var dr=function(t){cr(e,t);function e(r){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];var i=t.call(this,n)||this;return i.factory=r,i.global={},i._properties={},i.isOpen&&(i._env={}),i}return Object.defineProperty(e.prototype,"kind",{get:function(){return"base"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"env",{get:function(){return this._env},set:function(r){this._env=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"copyEnv",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.getProperty=function(r){return this._properties[r]},e.prototype.setProperty=function(r,n){return this._properties[r]=n,this},Object.defineProperty(e.prototype,"isOpen",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClose",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFinal",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.isKind=function(r){return r===this.kind},e.prototype.checkItem=function(r){if(r.isKind("over")&&this.isOpen&&(r.setProperty("num",this.toMml(!1)),this.Clear()),r.isKind("cell")&&this.isOpen){if(r.getProperty("linebreak"))return e.fail;throw new de.default("Misplaced","Misplaced %1",r.getName())}if(r.isClose&&this.getErrors(r.kind)){var n=qt(this.getErrors(r.kind),2),a=n[0],i=n[1];throw new de.default(a,i,r.getName())}return r.isFinal?(this.Push(r.First),e.fail):e.success},e.prototype.clearEnv=function(){var r,n;try{for(var a=fr(Object.keys(this.env)),i=a.next();!i.done;i=a.next()){var f=i.value;delete this.env[f]}}catch(d){r={error:d}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.setProperties=function(r){return Object.assign(this._properties,r),this},e.prototype.getName=function(){return this.getProperty("name")},e.prototype.toString=function(){return this.kind+"["+this.nodes.join("; ")+"]"},e.prototype.getErrors=function(r){var n=this.constructor;return(n.errors||{})[r]||e.errors[r]},e.fail=[null,!1],e.success=[null,!0],e.errors={end:["MissingBeginExtraEnd","Missing \\begin{%1} or extra \\end{%1}"],close:["ExtraCloseMissingOpen","Extra close brace or missing open brace"],right:["MissingLeftExtraRight","Missing \\left or extra \\right"],middle:["ExtraMiddle","Extra \\middle"]},e}(Te);ht.BaseItem=dr;var Pe=p&&p.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nt;Object.defineProperty(zt,"__esModule",{value:!0});var pr=ht,mr=Ye,pe=function(t){Pe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(pr.BaseItem),vr=function(t){Pe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.defaultKind="dummy",r.configuration=null,r}return e.DefaultStackItems=(Nt={},Nt[pe.prototype.kind]=pe,Nt),e}(mr.AbstractFactory);zt.default=vr;var xt={},gr=p&&p.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],f;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(d){f={error:d}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(f)throw f.error}}return i},yr=p&&p.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},br=p&&p.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xt,"__esModule",{value:!0});xt.NodeFactory=void 0;var Ar=br(it),Cr=function(){function t(){this.mmlFactory=null,this.factory={node:t.createNode,token:t.createToken,text:t.createText,error:t.createError}}return t.createNode=function(e,r,n,a,i){n===void 0&&(n=[]),a===void 0&&(a={});var f=e.mmlFactory.create(r);return f.setChildren(n),i&&f.appendChild(i),Ar.default.setProperties(f,a),f},t.createToken=function(e,r,n,a){n===void 0&&(n={}),a===void 0&&(a="");var i=e.create("text",a);return e.create("node",r,[],n,i)},t.createText=function(e,r){return r==null?null:e.mmlFactory.create("text").setText(r)},t.createError=function(e,r){var n=e.create("text",r),a=e.create("node","mtext",[],{},n),i=e.create("node","merror",[a],{"data-mjx-error":r});return i},t.prototype.setMmlFactory=function(e){this.mmlFactory=e},t.prototype.set=function(e,r){this.factory[e]=r},t.prototype.setCreators=function(e){for(var r in e)this.set(r,e[r])},t.prototype.create=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=this.factory[e]||this.factory.node,i=a.apply(void 0,yr([this,r[0]],gr(r.slice(1)),!1));return e==="node"&&this.configuration.addNode(r[0],i),i},t.prototype.get=function(e){return this.factory[e]},t}();xt.NodeFactory=Cr;var Sr=p&&p.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],f;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(d){f={error:d}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(f)throw f.error}}return i},Tr=p&&p.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},me=p&&p.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ee=p&&p.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Se,"__esModule",{value:!0});var Pr=Ee(zt),Er=xt,ve=Ee(it),ge=Ht,wr=function(){function t(e,r){r===void 0&&(r=[]),this.options={},this.packageData=new Map,this.parsers=[],this.root=null,this.nodeLists={},this.error=!1,this.handlers=e.handlers,this.nodeFactory=new Er.NodeFactory,this.nodeFactory.configuration=this,this.nodeFactory.setCreators(e.nodes),this.itemFactory=new Pr.default(e.items),this.itemFactory.configuration=this,ge.defaultOptions.apply(void 0,Tr([this.options],Sr(r),!1)),(0,ge.defaultOptions)(this.options,e.options)}return t.prototype.pushParser=function(e){this.parsers.unshift(e)},t.prototype.popParser=function(){this.parsers.shift()},Object.defineProperty(t.prototype,"parser",{get:function(){return this.parsers[0]},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.parsers=[],this.root=null,this.nodeLists={},this.error=!1,this.tags.resetTag()},t.prototype.addNode=function(e,r){var n=this.nodeLists[e];if(n||(n=this.nodeLists[e]=[]),n.push(r),r.kind!==e){var a=ve.default.getProperty(r,"in-lists")||"",i=(a?a.split(/,/):[]).concat(e).join(",");ve.default.setProperty(r,"in-lists",i)}},t.prototype.getList=function(e){var r,n,a=this.nodeLists[e]||[],i=[];try{for(var f=me(a),d=f.next();!d.done;d=f.next()){var m=d.value;this.inTree(m)&&i.push(m)}}catch(s){r={error:s}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}return this.nodeLists[e]=i,i},t.prototype.removeFromList=function(e,r){var n,a,i=this.nodeLists[e]||[];try{for(var f=me(r),d=f.next();!d.done;d=f.next()){var m=d.value,s=i.indexOf(m);s>=0&&i.splice(s,1)}}catch(o){n={error:o}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(n)throw n.error}}},t.prototype.inTree=function(e){for(;e&&e!==this.root;)e=e.parent;return!!e},t}();Se.default=wr;var Lt={};(function(t){var e=p&&p.__extends||function(){var o=function(u,l){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var y in h)Object.prototype.hasOwnProperty.call(h,y)&&(c[y]=h[y])},o(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");o(u,l);function c(){this.constructor=u}u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}}(),r=p&&p.__values||function(o){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&o[u],c=0;if(l)return l.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&c>=o.length&&(o=void 0),{value:o&&o[c++],done:!o}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},n=p&&p.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.TagsFactory=t.AllTags=t.NoTags=t.AbstractTags=t.TagInfo=t.Label=void 0;var a=n(Kt()),i=function(){function o(u,l){u===void 0&&(u="???"),l===void 0&&(l=""),this.tag=u,this.id=l}return o}();t.Label=i;var f=function(){function o(u,l,c,h,y,C,P,x){u===void 0&&(u=""),l===void 0&&(l=!1),c===void 0&&(c=!1),h===void 0&&(h=null),y===void 0&&(y=""),C===void 0&&(C=""),P===void 0&&(P=!1),x===void 0&&(x=""),this.env=u,this.taggable=l,this.defaultTags=c,this.tag=h,this.tagId=y,this.tagFormat=C,this.noTag=P,this.labelId=x}return o}();t.TagInfo=f;var d=function(){function o(){this.counter=0,this.allCounter=0,this.configuration=null,this.ids={},this.allIds={},this.labels={},this.allLabels={},this.redo=!1,this.refUpdate=!1,this.currentTag=new f,this.history=[],this.stack=[],this.enTag=function(u,l){var c=this.configuration.nodeFactory,h=c.create("node","mtd",[u]),y=c.create("node","mlabeledtr",[l,h]),C=c.create("node","mtable",[y],{side:this.configuration.options.tagSide,minlabelspacing:this.configuration.options.tagIndent,displaystyle:!0});return C}}return o.prototype.start=function(u,l,c){this.currentTag&&this.stack.push(this.currentTag),this.currentTag=new f(u,l,c)},Object.defineProperty(o.prototype,"env",{get:function(){return this.currentTag.env},enumerable:!1,configurable:!0}),o.prototype.end=function(){this.history.push(this.currentTag),this.currentTag=this.stack.pop()},o.prototype.tag=function(u,l){this.currentTag.tag=u,this.currentTag.tagFormat=l?u:this.formatTag(u),this.currentTag.noTag=!1},o.prototype.notag=function(){this.tag("",!0),this.currentTag.noTag=!0},Object.defineProperty(o.prototype,"noTag",{get:function(){return this.currentTag.noTag},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"label",{get:function(){return this.currentTag.labelId},set:function(u){this.currentTag.labelId=u},enumerable:!1,configurable:!0}),o.prototype.formatUrl=function(u,l){return l+"#"+encodeURIComponent(u)},o.prototype.formatTag=function(u){return"("+u+")"},o.prototype.formatId=function(u){return"mjx-eqn:"+u.replace(/\s/g,"_")},o.prototype.formatNumber=function(u){return u.toString()},o.prototype.autoTag=function(){this.currentTag.tag==null&&(this.counter++,this.tag(this.formatNumber(this.counter),!1))},o.prototype.clearTag=function(){this.label="",this.tag(null,!0),this.currentTag.tagId=""},o.prototype.getTag=function(u){if(u===void 0&&(u=!1),u)return this.autoTag(),this.makeTag();var l=this.currentTag;return l.taggable&&!l.noTag&&(l.defaultTags&&this.autoTag(),l.tag)?this.makeTag():null},o.prototype.resetTag=function(){this.history=[],this.redo=!1,this.refUpdate=!1,this.clearTag()},o.prototype.reset=function(u){u===void 0&&(u=0),this.resetTag(),this.counter=this.allCounter=u,this.allLabels={},this.allIds={}},o.prototype.startEquation=function(u){this.history=[],this.stack=[],this.clearTag(),this.currentTag=new f("",void 0,void 0),this.labels={},this.ids={},this.counter=this.allCounter,this.redo=!1;var l=u.inputData.recompile;l&&(this.refUpdate=!0,this.counter=l.counter)},o.prototype.finishEquation=function(u){this.redo&&(u.inputData.recompile={state:u.state(),counter:this.allCounter}),this.refUpdate||(this.allCounter=this.counter),Object.assign(this.allIds,this.ids),Object.assign(this.allLabels,this.labels)},o.prototype.finalize=function(u,l){if(!l.display||this.currentTag.env||this.currentTag.tag==null)return u;var c=this.makeTag(),h=this.enTag(u,c);return h},o.prototype.makeId=function(){this.currentTag.tagId=this.formatId(this.configuration.options.useLabelIds?this.label||this.currentTag.tag:this.currentTag.tag)},o.prototype.makeTag=function(){this.makeId(),this.label&&(this.labels[this.label]=new i(this.currentTag.tag,this.currentTag.tagId));var u=new a.default("\\text{"+this.currentTag.tagFormat+"}",{},this.configuration).mml();return this.configuration.nodeFactory.create("node","mtd",[u],{id:this.currentTag.tagId})},o}();t.AbstractTags=d;var m=function(o){e(u,o);function u(){return o!==null&&o.apply(this,arguments)||this}return u.prototype.autoTag=function(){},u.prototype.getTag=function(){return this.currentTag.tag?o.prototype.getTag.call(this):null},u}(d);t.NoTags=m;var s=function(o){e(u,o);function u(){return o!==null&&o.apply(this,arguments)||this}return u.prototype.finalize=function(l,c){if(!c.display||this.history.find(function(y){return y.taggable}))return l;var h=this.getTag(!0);return this.enTag(l,h)},u}(d);t.AllTags=s,function(o){var u=new Map([["none",m],["all",s]]),l="none";o.OPTIONS={tags:l,tagSide:"right",tagIndent:"0.8em",useLabelIds:!0,ignoreDuplicateLabels:!1},o.add=function(c,h){u.set(c,h)},o.addTags=function(c){var h,y;try{for(var C=r(Object.keys(c)),P=C.next();!P.done;P=C.next()){var x=P.value;o.add(x,c[x])}}catch(N){h={error:N}}finally{try{P&&!P.done&&(y=C.return)&&y.call(C)}finally{if(h)throw h.error}}},o.create=function(c){var h=u.get(c)||u.get(l);if(!h)throw Error("Unknown tags class");return new h},o.setDefault=function(c){l=c},o.getDefault=function(){return o.create(l)}}(t.TagsFactory||(t.TagsFactory={}))})(Lt);var we={},St={};(function(t){var e=p&&p.__values||function(m){var s=typeof Symbol=="function"&&Symbol.iterator,o=s&&m[s],u=0;if(o)return o.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&u>=m.length&&(m=void 0),{value:m&&m[u++],done:!m}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},r=p&&p.__read||function(m,s){var o=typeof Symbol=="function"&&m[Symbol.iterator];if(!o)return m;var u=o.call(m),l,c=[],h;try{for(;(s===void 0||s-- >0)&&!(l=u.next()).done;)c.push(l.value)}catch(y){h={error:y}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(h)throw h.error}}return c};Object.defineProperty(t,"__esModule",{value:!0}),t.SubHandlers=t.SubHandler=t.MapHandler=void 0;var n=Ae,a=be,i;(function(m){var s=new Map;m.register=function(o){s.set(o.name,o)},m.getMap=function(o){return s.get(o)}})(i=t.MapHandler||(t.MapHandler={}));var f=function(){function m(){this._configuration=new n.PrioritizedList,this._fallback=new a.FunctionList}return m.prototype.add=function(s,o,u){var l,c;u===void 0&&(u=n.PrioritizedList.DEFAULTPRIORITY);try{for(var h=e(s.slice().reverse()),y=h.next();!y.done;y=h.next()){var C=y.value,P=i.getMap(C);if(!P){this.warn("Configuration "+C+" not found! Omitted.");return}this._configuration.add(P,u)}}catch(x){l={error:x}}finally{try{y&&!y.done&&(c=h.return)&&c.call(h)}finally{if(l)throw l.error}}o&&this._fallback.add(o,u)},m.prototype.parse=function(s){var o,u;try{for(var l=e(this._configuration),c=l.next();!c.done;c=l.next()){var h=c.value.item,y=h.parse(s);if(y)return y}}catch(N){o={error:N}}finally{try{c&&!c.done&&(u=l.return)&&u.call(l)}finally{if(o)throw o.error}}var C=r(s,2),P=C[0],x=C[1];Array.from(this._fallback)[0].item(P,x)},m.prototype.lookup=function(s){var o=this.applicable(s);return o?o.lookup(s):null},m.prototype.contains=function(s){return!!this.applicable(s)},m.prototype.toString=function(){var s,o,u=[];try{for(var l=e(this._configuration),c=l.next();!c.done;c=l.next()){var h=c.value.item;u.push(h.name)}}catch(y){s={error:y}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(s)throw s.error}}return u.join(", ")},m.prototype.applicable=function(s){var o,u;try{for(var l=e(this._configuration),c=l.next();!c.done;c=l.next()){var h=c.value.item;if(h.contains(s))return h}}catch(y){o={error:y}}finally{try{c&&!c.done&&(u=l.return)&&u.call(l)}finally{if(o)throw o.error}}return null},m.prototype.retrieve=function(s){var o,u;try{for(var l=e(this._configuration),c=l.next();!c.done;c=l.next()){var h=c.value.item;if(h.name===s)return h}}catch(y){o={error:y}}finally{try{c&&!c.done&&(u=l.return)&&u.call(l)}finally{if(o)throw o.error}}return null},m.prototype.warn=function(s){console.log("TexParser Warning: "+s)},m}();t.SubHandler=f;var d=function(){function m(){this.map=new Map}return m.prototype.add=function(s,o,u){var l,c;u===void 0&&(u=n.PrioritizedList.DEFAULTPRIORITY);try{for(var h=e(Object.keys(s)),y=h.next();!y.done;y=h.next()){var C=y.value,P=C,x=this.get(P);x||(x=new f,this.set(P,x)),x.add(s[P],o[P],u)}}catch(N){l={error:N}}finally{try{y&&!y.done&&(c=h.return)&&c.call(h)}finally{if(l)throw l.error}}},m.prototype.set=function(s,o){this.map.set(s,o)},m.prototype.get=function(s){return this.map.get(s)},m.prototype.retrieve=function(s){var o,u;try{for(var l=e(this.map.values()),c=l.next();!c.done;c=l.next()){var h=c.value,y=h.retrieve(s);if(y)return y}}catch(C){o={error:C}}finally{try{c&&!c.done&&(u=l.return)&&u.call(l)}finally{if(o)throw o.error}}return null},m.prototype.keys=function(){return this.map.keys()},m}();t.SubHandlers=d})(St);(function(t){var e=p&&p.__values||function(u){var l=typeof Symbol=="function"&&Symbol.iterator,c=l&&u[l],h=0;if(c)return c.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&h>=u.length&&(u=void 0),{value:u&&u[h++],done:!u}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},r=p&&p.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var h=c.call(u),y,C=[],P;try{for(;(l===void 0||l-- >0)&&!(y=h.next()).done;)C.push(y.value)}catch(x){P={error:x}}finally{try{y&&!y.done&&(c=h.return)&&c.call(h)}finally{if(P)throw P.error}}return C};Object.defineProperty(t,"__esModule",{value:!0}),t.ParserConfiguration=t.ConfigurationHandler=t.Configuration=void 0;var n=Ht,a=St,i=be,f=Ae,d=Lt,m=function(){function u(l,c,h,y,C,P,x,N,X,H,Y,S,F){c===void 0&&(c={}),h===void 0&&(h={}),y===void 0&&(y={}),C===void 0&&(C={}),P===void 0&&(P={}),x===void 0&&(x={}),N===void 0&&(N=[]),X===void 0&&(X=[]),H===void 0&&(H=null),Y===void 0&&(Y=null),this.name=l,this.handler=c,this.fallback=h,this.items=y,this.tags=C,this.options=P,this.nodes=x,this.preprocessors=N,this.postprocessors=X,this.initMethod=H,this.configMethod=Y,this.priority=S,this.parser=F,this.handler=Object.assign({character:[],delimiter:[],macro:[],environment:[]},c)}return u.makeProcessor=function(l,c){return Array.isArray(l)?l:[l,c]},u._create=function(l,c){var h=this;c===void 0&&(c={});var y=c.priority||f.PrioritizedList.DEFAULTPRIORITY,C=c.init?this.makeProcessor(c.init,y):null,P=c.config?this.makeProcessor(c.config,y):null,x=(c.preprocessors||[]).map(function(H){return h.makeProcessor(H,y)}),N=(c.postprocessors||[]).map(function(H){return h.makeProcessor(H,y)}),X=c.parser||"tex";return new u(l,c.handler||{},c.fallback||{},c.items||{},c.tags||{},c.options||{},c.nodes||{},x,N,C,P,y,X)},u.create=function(l,c){c===void 0&&(c={});var h=u._create(l,c);return s.set(l,h),h},u.local=function(l){return l===void 0&&(l={}),u._create("",l)},Object.defineProperty(u.prototype,"init",{get:function(){return this.initMethod?this.initMethod[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"config",{get:function(){return this.configMethod?this.configMethod[0]:null},enumerable:!1,configurable:!0}),u}();t.Configuration=m;var s;(function(u){var l=new Map;u.set=function(c,h){l.set(c,h)},u.get=function(c){return l.get(c)},u.keys=function(){return l.keys()}})(s=t.ConfigurationHandler||(t.ConfigurationHandler={}));var o=function(){function u(l,c){var h,y,C,P;c===void 0&&(c=["tex"]),this.initMethod=new i.FunctionList,this.configMethod=new i.FunctionList,this.configurations=new f.PrioritizedList,this.parsers=[],this.handlers=new a.SubHandlers,this.items={},this.tags={},this.options={},this.nodes={},this.parsers=c;try{for(var x=e(l.slice().reverse()),N=x.next();!N.done;N=x.next()){var X=N.value;this.addPackage(X)}}catch(U){h={error:U}}finally{try{N&&!N.done&&(y=x.return)&&y.call(x)}finally{if(h)throw h.error}}try{for(var H=e(this.configurations),Y=H.next();!Y.done;Y=H.next()){var S=Y.value,F=S.item,j=S.priority;this.append(F,j)}}catch(U){C={error:U}}finally{try{Y&&!Y.done&&(P=H.return)&&P.call(H)}finally{if(C)throw C.error}}}return u.prototype.init=function(){this.initMethod.execute(this)},u.prototype.config=function(l){var c,h;this.configMethod.execute(this,l);try{for(var y=e(this.configurations),C=y.next();!C.done;C=y.next()){var P=C.value;this.addFilters(l,P.item)}}catch(x){c={error:x}}finally{try{C&&!C.done&&(h=y.return)&&h.call(y)}finally{if(c)throw c.error}}},u.prototype.addPackage=function(l){var c=typeof l=="string"?l:l[0],h=this.getPackage(c);h&&this.configurations.add(h,typeof l=="string"?h.priority:l[1])},u.prototype.add=function(l,c,h){var y,C;h===void 0&&(h={});var P=this.getPackage(l);this.append(P),this.configurations.add(P,P.priority),this.init();var x=c.parseOptions;x.nodeFactory.setCreators(P.nodes);try{for(var N=e(Object.keys(P.items)),X=N.next();!X.done;X=N.next()){var H=X.value;x.itemFactory.setNodeClass(H,P.items[H])}}catch(Y){y={error:Y}}finally{try{X&&!X.done&&(C=N.return)&&C.call(N)}finally{if(y)throw y.error}}d.TagsFactory.addTags(P.tags),(0,n.defaultOptions)(x.options,P.options),(0,n.userOptions)(x.options,h),this.addFilters(c,P),P.config&&P.config(this,c)},u.prototype.getPackage=function(l){var c=s.get(l);if(c&&this.parsers.indexOf(c.parser)<0)throw Error("Package ".concat(l," doesn't target the proper parser"));return c},u.prototype.append=function(l,c){c=c||l.priority,l.initMethod&&this.initMethod.add(l.initMethod[0],l.initMethod[1]),l.configMethod&&this.configMethod.add(l.configMethod[0],l.configMethod[1]),this.handlers.add(l.handler,l.fallback,c),Object.assign(this.items,l.items),Object.assign(this.tags,l.tags),(0,n.defaultOptions)(this.options,l.options),Object.assign(this.nodes,l.nodes)},u.prototype.addFilters=function(l,c){var h,y,C,P;try{for(var x=e(c.preprocessors),N=x.next();!N.done;N=x.next()){var X=r(N.value,2),H=X[0],Y=X[1];l.preFilters.add(H,Y)}}catch(z){h={error:z}}finally{try{N&&!N.done&&(y=x.return)&&y.call(x)}finally{if(h)throw h.error}}try{for(var S=e(c.postprocessors),F=S.next();!F.done;F=S.next()){var j=r(F.value,2),U=j[0],Y=j[1];l.postFilters.add(U,Y)}}catch(z){C={error:z}}finally{try{F&&!F.done&&(P=S.return)&&P.call(S)}finally{if(C)throw C.error}}},u}();t.ParserConfiguration=o})(we);var ft={},$={},vt={};Object.defineProperty(vt,"__esModule",{value:!0});vt.Macro=vt.Symbol=void 0;var Or=function(){function t(e,r,n){this._symbol=e,this._char=r,this._attributes=n}return Object.defineProperty(t.prototype,"symbol",{get:function(){return this._symbol},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"char",{get:function(){return this._char},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){return this._attributes},enumerable:!1,configurable:!0}),t}();vt.Symbol=Or;var Mr=function(){function t(e,r,n){n===void 0&&(n=[]),this._symbol=e,this._func=r,this._args=n}return Object.defineProperty(t.prototype,"symbol",{get:function(){return this._symbol},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"func",{get:function(){return this._func},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"args",{get:function(){return this._args},enumerable:!1,configurable:!0}),t}();vt.Macro=Mr;var dt=p&&p.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ot=p&&p.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],f;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(d){f={error:d}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(f)throw f.error}}return i},Oe=p&&p.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Me=p&&p.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty($,"__esModule",{value:!0});$.EnvironmentMap=$.CommandMap=$.MacroMap=$.DelimiterMap=$.CharacterMap=$.AbstractParseMap=$.RegExpMap=$.AbstractSymbolMap=$.parseResult=void 0;var Ie=vt,Ir=St;function Tt(t){return t===void 0?!0:t}$.parseResult=Tt;var $t=function(){function t(e,r){this._name=e,this._parser=r,Ir.MapHandler.register(this)}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t.prototype.parserFor=function(e){return this.contains(e)?this.parser:null},t.prototype.parse=function(e){var r=ot(e,2),n=r[0],a=r[1],i=this.parserFor(a),f=this.lookup(a);return i&&f?Tt(i(n,f)):null},Object.defineProperty(t.prototype,"parser",{get:function(){return this._parser},set:function(e){this._parser=e},enumerable:!1,configurable:!0}),t}();$.AbstractSymbolMap=$t;var xr=function(t){dt(e,t);function e(r,n,a){var i=t.call(this,r,n)||this;return i._regExp=a,i}return e.prototype.contains=function(r){return this._regExp.test(r)},e.prototype.lookup=function(r){return this.contains(r)?r:null},e}($t);$.RegExpMap=xr;var Wt=function(t){dt(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.map=new Map,r}return e.prototype.lookup=function(r){return this.map.get(r)},e.prototype.contains=function(r){return this.map.has(r)},e.prototype.add=function(r,n){this.map.set(r,n)},e.prototype.remove=function(r){this.map.delete(r)},e}($t);$.AbstractParseMap=Wt;var xe=function(t){dt(e,t);function e(r,n,a){var i,f,d=t.call(this,r,n)||this;try{for(var m=Oe(Object.keys(a)),s=m.next();!s.done;s=m.next()){var o=s.value,u=a[o],l=ot(typeof u=="string"?[u,null]:u,2),c=l[0],h=l[1],y=new Ie.Symbol(o,c,h);d.add(o,y)}}catch(C){i={error:C}}finally{try{s&&!s.done&&(f=m.return)&&f.call(m)}finally{if(i)throw i.error}}return d}return e}(Wt);$.CharacterMap=xe;var Lr=function(t){dt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.parse=function(r){var n=ot(r,2),a=n[0],i=n[1];return t.prototype.parse.call(this,[a,"\\"+i])},e}(xe);$.DelimiterMap=Lr;var Yt=function(t){dt(e,t);function e(r,n,a){var i,f,d=t.call(this,r,null)||this;try{for(var m=Oe(Object.keys(n)),s=m.next();!s.done;s=m.next()){var o=s.value,u=n[o],l=ot(typeof u=="string"?[u]:u),c=l[0],h=l.slice(1),y=new Ie.Macro(o,a[c],h);d.add(o,y)}}catch(C){i={error:C}}finally{try{s&&!s.done&&(f=m.return)&&f.call(m)}finally{if(i)throw i.error}}return d}return e.prototype.parserFor=function(r){var n=this.lookup(r);return n?n.func:null},e.prototype.parse=function(r){var n=ot(r,2),a=n[0],i=n[1],f=this.lookup(i),d=this.parserFor(i);return!f||!d?null:Tt(d.apply(void 0,Me([a,f.symbol],ot(f.args),!1)))},e}(Wt);$.MacroMap=Yt;var _r=function(t){dt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.parse=function(r){var n=ot(r,2),a=n[0],i=n[1],f=this.lookup(i),d=this.parserFor(i);if(!f||!d)return null;var m=a.currentCS;a.currentCS="\\"+i;var s=d.apply(void 0,Me([a,"\\"+f.symbol],ot(f.args),!1));return a.currentCS=m,Tt(s)},e}(Yt);$.CommandMap=_r;var kr=function(t){dt(e,t);function e(r,n,a,i){var f=t.call(this,r,a,i)||this;return f.parser=n,f}return e.prototype.parse=function(r){var n=ot(r,2),a=n[0],i=n[1],f=this.lookup(i),d=this.parserFor(i);return!f||!d?null:Tt(this.parser(a,f.symbol,d,f.args))},e}(Yt);$.EnvironmentMap=kr;var _={},K=p&&p.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ot=p&&p.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],f;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(d){f={error:d}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(f)throw f.error}}return i},Xt=p&&p.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},Zt=p&&p.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_,"__esModule",{value:!0});_.EquationItem=_.EqnArrayItem=_.ArrayItem=_.DotsItem=_.NonscriptItem=_.NotItem=_.FnItem=_.MmlItem=_.CellItem=_.PositionItem=_.StyleItem=_.EndItem=_.BeginItem=_.RightItem=_.Middle=_.LeftItem=_.OverItem=_.SubsupItem=_.PrimeItem=_.CloseItem=_.OpenItem=_.StopItem=_.StartItem=void 0;var Fr=St,Br=Mt,gt=bt,st=Zt(lt),ut=Zt(Ct()),R=Zt(it),q=ht,Dr=function(t){K(e,t);function e(r,n){var a=t.call(this,r)||this;return a.global=n,a}return Object.defineProperty(e.prototype,"kind",{get:function(){return"start"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(r){if(r.isKind("stop")){var n=this.toMml();return this.global.isInner||(n=this.factory.configuration.tags.finalize(n,this.env)),[[this.factory.create("mml",n)],!0]}return t.prototype.checkItem.call(this,r)},e}(q.BaseItem);_.StartItem=Dr;var Nr=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"stop"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(q.BaseItem);_.StopItem=Nr;var Rr=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"open"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(r){if(r.isKind("close")){var n=this.toMml(),a=this.create("node","TeXAtom",[n]);return[[this.factory.create("mml",a)],!0]}return t.prototype.checkItem.call(this,r)},e.errors=Object.assign(Object.create(q.BaseItem.errors),{stop:["ExtraOpenMissingClose","Extra open brace or missing close brace"]}),e}(q.BaseItem);_.OpenItem=Rr;var jr=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"close"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(q.BaseItem);_.CloseItem=jr;var qr=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"prime"},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(r){var n=Ot(this.Peek(2),2),a=n[0],i=n[1];if(!R.default.isType(a,"msubsup")||R.default.isType(a,"msup")){var f=this.create("node","msup",[a,i]);return[[f,r],!0]}return R.default.setChild(a,a.sup,i),[[a,r],!0]},e}(q.BaseItem);_.PrimeItem=qr;var Xr=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"subsup"},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(r){if(r.isKind("open")||r.isKind("left"))return q.BaseItem.success;var n=this.First,a=this.getProperty("position");if(r.isKind("mml")){if(this.getProperty("primes"))if(a!==2)R.default.setChild(n,2,this.getProperty("primes"));else{R.default.setProperty(this.getProperty("primes"),"variantForm",!0);var i=this.create("node","mrow",[this.getProperty("primes"),r.First]);r.First=i}R.default.setChild(n,a,r.First),this.getProperty("movesupsub")!=null&&R.default.setProperty(n,"movesupsub",this.getProperty("movesupsub"));var f=this.factory.create("mml",n);return[[f],!0]}if(t.prototype.checkItem.call(this,r)[1]){var d=this.getErrors(["","sub","sup"][a]);throw new(st.default.bind.apply(st.default,Xt([void 0,d[0],d[1]],Ot(d.splice(2)),!1)))}return null},e.errors=Object.assign(Object.create(q.BaseItem.errors),{stop:["MissingScript","Missing superscript or subscript argument"],sup:["MissingOpenForSup","Missing open brace for superscript"],sub:["MissingOpenForSub","Missing open brace for subscript"]}),e}(q.BaseItem);_.SubsupItem=Xr;var Vr=function(t){K(e,t);function e(r){var n=t.call(this,r)||this;return n.setProperty("name","\\over"),n}return Object.defineProperty(e.prototype,"kind",{get:function(){return"over"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(r){if(r.isKind("over"))throw new st.default("AmbiguousUseOf","Ambiguous use of %1",r.getName());if(r.isClose){var n=this.create("node","mfrac",[this.getProperty("num"),this.toMml(!1)]);return this.getProperty("thickness")!=null&&R.default.setAttribute(n,"linethickness",this.getProperty("thickness")),(this.getProperty("open")||this.getProperty("close"))&&(R.default.setProperty(n,"withDelims",!0),n=ut.default.fixedFence(this.factory.configuration,this.getProperty("open"),n,this.getProperty("close"))),[[this.factory.create("mml",n),r],!0]}return t.prototype.checkItem.call(this,r)},e.prototype.toString=function(){return"over["+this.getProperty("num")+" / "+this.nodes.join("; ")+"]"},e}(q.BaseItem);_.OverItem=Vr;var Gr=function(t){K(e,t);function e(r,n){var a=t.call(this,r)||this;return a.setProperty("delim",n),a}return Object.defineProperty(e.prototype,"kind",{get:function(){return"left"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(r){if(r.isKind("right"))return[[this.factory.create("mml",ut.default.fenced(this.factory.configuration,this.getProperty("delim"),this.toMml(),r.getProperty("delim"),"",r.getProperty("color")))],!0];if(r.isKind("middle")){var n={stretchy:!0};return r.getProperty("color")&&(n.mathcolor=r.getProperty("color")),this.Push(this.create("node","TeXAtom",[],{texClass:gt.TEXCLASS.CLOSE}),this.create("token","mo",n,r.getProperty("delim")),this.create("node","TeXAtom",[],{texClass:gt.TEXCLASS.OPEN})),this.env={},[[this],!0]}return t.prototype.checkItem.call(this,r)},e.errors=Object.assign(Object.create(q.BaseItem.errors),{stop:["ExtraLeftMissingRight","Extra \\left or missing \\right"]}),e}(q.BaseItem);_.LeftItem=Gr;var Hr=function(t){K(e,t);function e(r,n,a){var i=t.call(this,r)||this;return i.setProperty("delim",n),a&&i.setProperty("color",a),i}return Object.defineProperty(e.prototype,"kind",{get:function(){return"middle"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(q.BaseItem);_.Middle=Hr;var Ur=function(t){K(e,t);function e(r,n,a){var i=t.call(this,r)||this;return i.setProperty("delim",n),a&&i.setProperty("color",a),i}return Object.defineProperty(e.prototype,"kind",{get:function(){return"right"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(q.BaseItem);_.RightItem=Ur;var Kr=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"begin"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(r){if(r.isKind("end")){if(r.getName()!==this.getName())throw new st.default("EnvBadEnd","\\begin{%1} ended with \\end{%2}",this.getName(),r.getName());return this.getProperty("end")?q.BaseItem.fail:[[this.factory.create("mml",this.toMml())],!0]}if(r.isKind("stop"))throw new st.default("EnvMissingEnd","Missing \\end{%1}",this.getName());return t.prototype.checkItem.call(this,r)},e}(q.BaseItem);_.BeginItem=Kr;var zr=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"end"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(q.BaseItem);_.EndItem=zr;var $r=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"style"},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(r){if(!r.isClose)return t.prototype.checkItem.call(this,r);var n=this.create("node","mstyle",this.nodes,this.getProperty("styles"));return[[this.factory.create("mml",n),r],!0]},e}(q.BaseItem);_.StyleItem=$r;var Wr=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"position"},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(r){if(r.isClose)throw new st.default("MissingBoxFor","Missing box for %1",this.getName());if(r.isFinal){var n=r.toMml();switch(this.getProperty("move")){case"vertical":return n=this.create("node","mpadded",[n],{height:this.getProperty("dh"),depth:this.getProperty("dd"),voffset:this.getProperty("dh")}),[[this.factory.create("mml",n)],!0];case"horizontal":return[[this.factory.create("mml",this.getProperty("left")),r,this.factory.create("mml",this.getProperty("right"))],!0]}}return t.prototype.checkItem.call(this,r)},e}(q.BaseItem);_.PositionItem=Wr;var Yr=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"cell"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(q.BaseItem);_.CellItem=Yr;var Zr=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"isFinal",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kind",{get:function(){return"mml"},enumerable:!1,configurable:!0}),e}(q.BaseItem);_.MmlItem=Zr;var Jr=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"fn"},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(r){var n=this.First;if(n){if(r.isOpen)return q.BaseItem.success;if(!r.isKind("fn")){var a=r.First;if(!r.isKind("mml")||!a)return[[n,r],!0];if(R.default.isType(a,"mstyle")&&a.childNodes.length&&R.default.isType(a.childNodes[0].childNodes[0],"mspace")||R.default.isType(a,"mspace"))return[[n,r],!0];R.default.isEmbellished(a)&&(a=R.default.getCoreMO(a));var i=R.default.getForm(a);if(i!=null&&[0,0,1,1,0,1,1,0,0,0][i[2]])return[[n,r],!0]}var f=this.create("token","mo",{texClass:gt.TEXCLASS.NONE},Br.entities.ApplyFunction);return[[n,f,r],!0]}return t.prototype.checkItem.apply(this,arguments)},e}(q.BaseItem);_.FnItem=Jr;var Qr=function(t){K(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.remap=Fr.MapHandler.getMap("not_remap"),r}return Object.defineProperty(e.prototype,"kind",{get:function(){return"not"},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(r){var n,a,i;if(r.isKind("open")||r.isKind("left"))return q.BaseItem.success;if(r.isKind("mml")&&(R.default.isType(r.First,"mo")||R.default.isType(r.First,"mi")||R.default.isType(r.First,"mtext"))&&(n=r.First,a=R.default.getText(n),a.length===1&&!R.default.getProperty(n,"movesupsub")&&R.default.getChildren(n).length===1))return this.remap.contains(a)?(i=this.create("text",this.remap.lookup(a).char),R.default.setChild(n,0,i)):(i=this.create("text","̸"),R.default.appendChildren(n,[i])),[[r],!0];i=this.create("text","⧸");var f=this.create("node","mtext",[],{},i),d=this.create("node","mpadded",[f],{width:0});return n=this.create("node","TeXAtom",[d],{texClass:gt.TEXCLASS.REL}),[[n,r],!0]},e}(q.BaseItem);_.NotItem=Qr;var tn=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"nonscript"},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(r){if(r.isKind("mml")&&r.Size()===1){var n=r.First;if(n.isKind("mstyle")&&n.notParent&&(n=R.default.getChildren(R.default.getChildren(n)[0])[0]),n.isKind("mspace")){if(n!==r.First){var a=this.create("node","mrow",[r.Pop()]);r.Push(a)}this.factory.configuration.addNode("nonscript",r.First)}}return[[r],!0]},e}(q.BaseItem);_.NonscriptItem=tn;var en=function(t){K(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"dots"},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(r){if(r.isKind("open")||r.isKind("left"))return q.BaseItem.success;var n=this.getProperty("ldots"),a=r.First;if(r.isKind("mml")&&R.default.isEmbellished(a)){var i=R.default.getTexClass(R.default.getCoreMO(a));(i===gt.TEXCLASS.BIN||i===gt.TEXCLASS.REL)&&(n=this.getProperty("cdots"))}return[[n,r],!0]},e}(q.BaseItem);_.DotsItem=en;var Le=function(t){K(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.table=[],r.row=[],r.frame=[],r.hfill=[],r.arraydef={},r.dashed=!1,r}return Object.defineProperty(e.prototype,"kind",{get:function(){return"array"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"copyEnv",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(r){if(r.isClose&&!r.isKind("over")){if(r.getProperty("isEntry"))return this.EndEntry(),this.clearEnv(),q.BaseItem.fail;if(r.getProperty("isCR"))return this.EndEntry(),this.EndRow(),this.clearEnv(),q.BaseItem.fail;this.EndTable(),this.clearEnv();var n=this.factory.create("mml",this.createMml());if(this.getProperty("requireClose")){if(r.isKind("close"))return[[n],!0];throw new st.default("MissingCloseBrace","Missing close brace")}return[[n,r],!0]}return t.prototype.checkItem.call(this,r)},e.prototype.createMml=function(){var r=this.arraydef.scriptlevel;delete this.arraydef.scriptlevel;var n=this.create("node","mtable",this.table,this.arraydef);return r&&n.setProperty("scriptlevel",r),this.frame.length===4?R.default.setAttribute(n,"frame",this.dashed?"dashed":"solid"):this.frame.length&&(this.arraydef.rowlines&&(this.arraydef.rowlines=this.arraydef.rowlines.replace(/none( none)+$/,"none")),R.default.setAttribute(n,"frame",""),n=this.create("node","menclose",[n],{notation:this.frame.join(" ")}),((this.arraydef.columnlines||"none")!=="none"||(this.arraydef.rowlines||"none")!=="none")&&R.default.setAttribute(n,"data-padding",0)),(this.getProperty("open")||this.getProperty("close"))&&(n=ut.default.fenced(this.factory.configuration,this.getProperty("open"),n,this.getProperty("close"))),n},e.prototype.EndEntry=function(){var r=this.create("node","mtd",this.nodes);this.hfill.length&&(this.hfill[0]===0&&R.default.setAttribute(r,"columnalign","right"),this.hfill[this.hfill.length-1]===this.Size()&&R.default.setAttribute(r,"columnalign",R.default.getAttribute(r,"columnalign")?"center":"left")),this.row.push(r),this.Clear(),this.hfill=[]},e.prototype.EndRow=function(){var r;this.getProperty("isNumbered")&&this.row.length===3?(this.row.unshift(this.row.pop()),r=this.create("node","mlabeledtr",this.row)):r=this.create("node","mtr",this.row),this.table.push(r),this.row=[]},e.prototype.EndTable=function(){(this.Size()||this.row.length)&&(this.EndEntry(),this.EndRow()),this.checkLines()},e.prototype.checkLines=function(){if(this.arraydef.rowlines){var r=this.arraydef.rowlines.split(/ /);r.length===this.table.length?(this.frame.push("bottom"),r.pop(),this.arraydef.rowlines=r.join(" ")):r.length<this.table.length-1&&(this.arraydef.rowlines+=" none")}if(this.getProperty("rowspacing")){for(var n=this.arraydef.rowspacing.split(/ /);n.length<this.table.length;)n.push(this.getProperty("rowspacing")+"em");this.arraydef.rowspacing=n.join(" ")}},e.prototype.addRowSpacing=function(r){if(this.arraydef.rowspacing){var n=this.arraydef.rowspacing.split(/ /);if(!this.getProperty("rowspacing")){var a=ut.default.dimen2em(n[0]);this.setProperty("rowspacing",a)}for(var i=this.getProperty("rowspacing");n.length<this.table.length;)n.push(ut.default.Em(i));n[this.table.length-1]=ut.default.Em(Math.max(0,i+ut.default.dimen2em(r))),this.arraydef.rowspacing=n.join(" ")}},e}(q.BaseItem);_.ArrayItem=Le;var rn=function(t){K(e,t);function e(r){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];var i=t.call(this,r)||this;return i.maxrow=0,i.factory.configuration.tags.start(n[0],n[2],n[1]),i}return Object.defineProperty(e.prototype,"kind",{get:function(){return"eqnarray"},enumerable:!1,configurable:!0}),e.prototype.EndEntry=function(){this.row.length&&ut.default.fixInitialMO(this.factory.configuration,this.nodes);var r=this.create("node","mtd",this.nodes);this.row.push(r),this.Clear()},e.prototype.EndRow=function(){this.row.length>this.maxrow&&(this.maxrow=this.row.length);var r="mtr",n=this.factory.configuration.tags.getTag();n&&(this.row=[n].concat(this.row),r="mlabeledtr"),this.factory.configuration.tags.clearTag();var a=this.create("node",r,this.row);this.table.push(a),this.row=[]},e.prototype.EndTable=function(){t.prototype.EndTable.call(this),this.factory.configuration.tags.end(),this.extendArray("columnalign",this.maxrow),this.extendArray("columnwidth",this.maxrow),this.extendArray("columnspacing",this.maxrow-1)},e.prototype.extendArray=function(r,n){if(this.arraydef[r]){var a=this.arraydef[r].split(/ /),i=Xt([],Ot(a),!1);if(i.length>1){for(;i.length<n;)i.push.apply(i,Xt([],Ot(a),!1));this.arraydef[r]=i.slice(0,n).join(" ")}}},e}(Le);_.EqnArrayItem=rn;var nn=function(t){K(e,t);function e(r){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];var i=t.call(this,r)||this;return i.factory.configuration.tags.start("equation",!0,n[0]),i}return Object.defineProperty(e.prototype,"kind",{get:function(){return"equation"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(r){if(r.isKind("end")){var n=this.toMml(),a=this.factory.configuration.tags.getTag();return this.factory.configuration.tags.end(),[[a?this.factory.configuration.tags.enTag(n,a):n,r],!0]}if(r.isKind("stop"))throw new st.default("EnvMissingEnd","Missing \\end{%1}",this.getName());return t.prototype.checkItem.call(this,r)},e}(q.BaseItem);_.EquationItem=nn;var _t={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TexConstant=void 0,function(e){e.Variant={NORMAL:"normal",BOLD:"bold",ITALIC:"italic",BOLDITALIC:"bold-italic",DOUBLESTRUCK:"double-struck",FRAKTUR:"fraktur",BOLDFRAKTUR:"bold-fraktur",SCRIPT:"script",BOLDSCRIPT:"bold-script",SANSSERIF:"sans-serif",BOLDSANSSERIF:"bold-sans-serif",SANSSERIFITALIC:"sans-serif-italic",SANSSERIFBOLDITALIC:"sans-serif-bold-italic",MONOSPACE:"monospace",INITIAL:"inital",TAILED:"tailed",LOOPED:"looped",STRETCHED:"stretched",CALLIGRAPHIC:"-tex-calligraphic",BOLDCALLIGRAPHIC:"-tex-bold-calligraphic",OLDSTYLE:"-tex-oldstyle",BOLDOLDSTYLE:"-tex-bold-oldstyle",MATHITALIC:"-tex-mathit"},e.Form={PREFIX:"prefix",INFIX:"infix",POSTFIX:"postfix"},e.LineBreak={AUTO:"auto",NEWLINE:"newline",NOBREAK:"nobreak",GOODBREAK:"goodbreak",BADBREAK:"badbreak"},e.LineBreakStyle={BEFORE:"before",AFTER:"after",DUPLICATE:"duplicate",INFIXLINBREAKSTYLE:"infixlinebreakstyle"},e.IndentAlign={LEFT:"left",CENTER:"center",RIGHT:"right",AUTO:"auto",ID:"id",INDENTALIGN:"indentalign"},e.IndentShift={INDENTSHIFT:"indentshift"},e.LineThickness={THIN:"thin",MEDIUM:"medium",THICK:"thick"},e.Notation={LONGDIV:"longdiv",ACTUARIAL:"actuarial",PHASORANGLE:"phasorangle",RADICAL:"radical",BOX:"box",ROUNDEDBOX:"roundedbox",CIRCLE:"circle",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",UPDIAGONALSTRIKE:"updiagonalstrike",DOWNDIAGONALSTRIKE:"downdiagonalstrike",VERTICALSTRIKE:"verticalstrike",HORIZONTALSTRIKE:"horizontalstrike",NORTHEASTARROW:"northeastarrow",MADRUWB:"madruwb",UPDIAGONALARROW:"updiagonalarrow"},e.Align={TOP:"top",BOTTOM:"bottom",CENTER:"center",BASELINE:"baseline",AXIS:"axis",LEFT:"left",RIGHT:"right"},e.Lines={NONE:"none",SOLID:"solid",DASHED:"dashed"},e.Side={LEFT:"left",RIGHT:"right",LEFTOVERLAP:"leftoverlap",RIGHTOVERLAP:"rightoverlap"},e.Width={AUTO:"auto",FIT:"fit"},e.Actiontype={TOGGLE:"toggle",STATUSLINE:"statusline",TOOLTIP:"tooltip",INPUT:"input"},e.Overflow={LINBREAK:"linebreak",SCROLL:"scroll",ELIDE:"elide",TRUNCATE:"truncate",SCALE:"scale"},e.Unit={EM:"em",EX:"ex",PX:"px",IN:"in",CM:"cm",MM:"mm",PT:"pt",PC:"pc"}}(t.TexConstant||(t.TexConstant={}))})(_t);var Jt={},yt=p&&p.__assign||function(){return yt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},yt.apply(this,arguments)},an=p&&p.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),on=p&&p.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),un=p&&p.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&an(e,t,r);return on(e,t),e},Qt=p&&p.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],f;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(d){f={error:d}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(f)throw f.error}}return i},kt=p&&p.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jt,"__esModule",{value:!0});var te=un(_),A=kt(it),Z=kt(lt),Ft=kt(Kt()),ee=_t,W=kt(Ct()),At=bt,_e=Lt,ke=Ce,Vt=Mt,sn=Ht,T={},ln=1.2/.85,cn={fontfamily:1,fontsize:1,fontweight:1,fontstyle:1,color:1,background:1,id:1,class:1,href:1,style:1};T.Open=function(t,e){t.Push(t.itemFactory.create("open"))};T.Close=function(t,e){t.Push(t.itemFactory.create("close"))};T.Tilde=function(t,e){t.Push(t.create("token","mtext",{},Vt.entities.nbsp))};T.Space=function(t,e){};T.Superscript=function(t,e){var r;t.GetNext().match(/\d/)&&(t.string=t.string.substr(0,t.i+1)+" "+t.string.substr(t.i+1));var n,a,i=t.stack.Top();i.isKind("prime")?(r=Qt(i.Peek(2),2),a=r[0],n=r[1],t.stack.Pop()):(a=t.stack.Prev(),a||(a=t.create("token","mi",{},"")));var f=A.default.getProperty(a,"movesupsub"),d=A.default.isType(a,"msubsup")?a.sup:a.over;if(A.default.isType(a,"msubsup")&&!A.default.isType(a,"msup")&&A.default.getChildAt(a,a.sup)||A.default.isType(a,"munderover")&&!A.default.isType(a,"mover")&&A.default.getChildAt(a,a.over)&&!A.default.getProperty(a,"subsupOK"))throw new Z.default("DoubleExponent","Double exponent: use braces to clarify");(!A.default.isType(a,"msubsup")||A.default.isType(a,"msup"))&&(f?((!A.default.isType(a,"munderover")||A.default.isType(a,"mover")||A.default.getChildAt(a,a.over))&&(a=t.create("node","munderover",[a],{movesupsub:!0})),d=a.over):(a=t.create("node","msubsup",[a]),d=a.sup)),t.Push(t.itemFactory.create("subsup",a).setProperties({position:d,primes:n,movesupsub:f}))};T.Subscript=function(t,e){var r;t.GetNext().match(/\d/)&&(t.string=t.string.substr(0,t.i+1)+" "+t.string.substr(t.i+1));var n,a,i=t.stack.Top();i.isKind("prime")?(r=Qt(i.Peek(2),2),a=r[0],n=r[1],t.stack.Pop()):(a=t.stack.Prev(),a||(a=t.create("token","mi",{},"")));var f=A.default.getProperty(a,"movesupsub"),d=A.default.isType(a,"msubsup")?a.sub:a.under;if(A.default.isType(a,"msubsup")&&!A.default.isType(a,"msup")&&A.default.getChildAt(a,a.sub)||A.default.isType(a,"munderover")&&!A.default.isType(a,"mover")&&A.default.getChildAt(a,a.under)&&!A.default.getProperty(a,"subsupOK"))throw new Z.default("DoubleSubscripts","Double subscripts: use braces to clarify");(!A.default.isType(a,"msubsup")||A.default.isType(a,"msup"))&&(f?((!A.default.isType(a,"munderover")||A.default.isType(a,"mover")||A.default.getChildAt(a,a.under))&&(a=t.create("node","munderover",[a],{movesupsub:!0})),d=a.under):(a=t.create("node","msubsup",[a]),d=a.sub)),t.Push(t.itemFactory.create("subsup",a).setProperties({position:d,primes:n,movesupsub:f}))};T.Prime=function(t,e){var r=t.stack.Prev();if(r||(r=t.create("node","mi")),A.default.isType(r,"msubsup")&&!A.default.isType(r,"msup")&&A.default.getChildAt(r,r.sup))throw new Z.default("DoubleExponentPrime","Prime causes double exponent: use braces to clarify");var n="";t.i--;do n+=Vt.entities.prime,t.i++,e=t.GetNext();while(e==="'"||e===Vt.entities.rsquo);n=["","′","″","‴","⁗"][n.length]||n;var a=t.create("token","mo",{variantForm:!0},n);t.Push(t.itemFactory.create("prime",r,a))};T.Comment=function(t,e){for(;t.i<t.string.length&&t.string.charAt(t.i)!==`
`;)t.i++};T.Hash=function(t,e){throw new Z.default("CantUseHash1","You can't use 'macro parameter character #' in math mode")};T.MathFont=function(t,e,r){var n=t.GetArgument(e),a=new Ft.default(n,yt(yt({},t.stack.env),{font:r,multiLetterIdentifiers:/^[a-zA-Z]+/,noAutoOP:!0}),t.configuration).mml();t.Push(t.create("node","TeXAtom",[a]))};T.SetFont=function(t,e,r){t.stack.env.font=r};T.SetStyle=function(t,e,r,n,a){t.stack.env.style=r,t.stack.env.level=a,t.Push(t.itemFactory.create("style").setProperty("styles",{displaystyle:n,scriptlevel:a}))};T.SetSize=function(t,e,r){t.stack.env.size=r,t.Push(t.itemFactory.create("style").setProperty("styles",{mathsize:(0,ke.em)(r)}))};T.Spacer=function(t,e,r){var n=t.create("node","mspace",[],{width:(0,ke.em)(r)}),a=t.create("node","mstyle",[n],{scriptlevel:0});t.Push(a)};T.LeftRight=function(t,e){var r=e.substr(1);t.Push(t.itemFactory.create(r,t.GetDelimiter(e),t.stack.env.color))};T.NamedFn=function(t,e,r){r||(r=e.substr(1));var n=t.create("token","mi",{texClass:At.TEXCLASS.OP},r);t.Push(t.itemFactory.create("fn",n))};T.NamedOp=function(t,e,r){r||(r=e.substr(1)),r=r.replace(/&thinsp;/," ");var n=t.create("token","mo",{movablelimits:!0,movesupsub:!0,form:ee.TexConstant.Form.PREFIX,texClass:At.TEXCLASS.OP},r);t.Push(n)};T.Limits=function(t,e,r){var n=t.stack.Prev(!0);if(!n||A.default.getTexClass(A.default.getCoreMO(n))!==At.TEXCLASS.OP&&A.default.getProperty(n,"movesupsub")==null)throw new Z.default("MisplacedLimits","%1 is allowed only on operators",t.currentCS);var a=t.stack.Top(),i;A.default.isType(n,"munderover")&&!r?(i=t.create("node","msubsup"),A.default.copyChildren(n,i),n=a.Last=i):A.default.isType(n,"msubsup")&&r&&(i=t.create("node","munderover"),A.default.copyChildren(n,i),n=a.Last=i),A.default.setProperty(n,"movesupsub",!!r),A.default.setProperties(A.default.getCoreMO(n),{movablelimits:!1}),(A.default.getAttribute(n,"movablelimits")||A.default.getProperty(n,"movablelimits"))&&A.default.setProperties(n,{movablelimits:!1})};T.Over=function(t,e,r,n){var a=t.itemFactory.create("over").setProperty("name",t.currentCS);r||n?(a.setProperty("open",r),a.setProperty("close",n)):e.match(/withdelims$/)&&(a.setProperty("open",t.GetDelimiter(e)),a.setProperty("close",t.GetDelimiter(e))),e.match(/^\\above/)?a.setProperty("thickness",t.GetDimen(e)):(e.match(/^\\atop/)||r||n)&&a.setProperty("thickness",0),t.Push(a)};T.Frac=function(t,e){var r=t.ParseArg(e),n=t.ParseArg(e),a=t.create("node","mfrac",[r,n]);t.Push(a)};T.Sqrt=function(t,e){var r=t.GetBrackets(e),n=t.GetArgument(e);n==="\\frac"&&(n+="{"+t.GetArgument(n)+"}{"+t.GetArgument(n)+"}");var a=new Ft.default(n,t.stack.env,t.configuration).mml();r?a=t.create("node","mroot",[a,Fe(t,r)]):a=t.create("node","msqrt",[a]),t.Push(a)};function Fe(t,e){var r=t.stack.env,n=r.inRoot;r.inRoot=!0;var a=new Ft.default(e,r,t.configuration),i=a.mml(),f=a.stack.global;if(f.leftRoot||f.upRoot){var d={};f.leftRoot&&(d.width=f.leftRoot),f.upRoot&&(d.voffset=f.upRoot,d.height=f.upRoot),i=t.create("node","mpadded",[i],d)}return r.inRoot=n,i}T.Root=function(t,e){var r=t.GetUpTo(e,"\\of"),n=t.ParseArg(e),a=t.create("node","mroot",[n,Fe(t,r)]);t.Push(a)};T.MoveRoot=function(t,e,r){if(!t.stack.env.inRoot)throw new Z.default("MisplacedMoveRoot","%1 can appear only within a root",t.currentCS);if(t.stack.global[r])throw new Z.default("MultipleMoveRoot","Multiple use of %1",t.currentCS);var n=t.GetArgument(e);if(!n.match(/-?[0-9]+/))throw new Z.default("IntegerArg","The argument to %1 must be an integer",t.currentCS);n=parseInt(n,10)/15+"em",n.substr(0,1)!=="-"&&(n="+"+n),t.stack.global[r]=n};T.Accent=function(t,e,r,n){var a=t.ParseArg(e),i=yt(yt({},W.default.getFontDef(t)),{accent:!0,mathaccent:!0}),f=A.default.createEntity(r),d=t.create("token","mo",i,f),m=d;A.default.setAttribute(m,"stretchy",!!n);var s=A.default.isEmbellished(a)?A.default.getCoreMO(a):a;(A.default.isType(s,"mo")||A.default.getProperty(s,"movablelimits"))&&A.default.setProperties(s,{movablelimits:!1});var o=t.create("node","munderover");A.default.setChild(o,0,a),A.default.setChild(o,1,null),A.default.setChild(o,2,m);var u=t.create("node","TeXAtom",[o]);t.Push(u)};T.UnderOver=function(t,e,r,n){var a=A.default.createEntity(r),i=t.create("token","mo",{stretchy:!0,accent:!0},a),f=e.charAt(1)==="o"?"over":"under",d=t.ParseArg(e);t.Push(W.default.underOver(t,d,i,f,n))};T.Overset=function(t,e){var r=t.ParseArg(e),n=t.ParseArg(e);W.default.checkMovableLimits(n),r.isKind("mo")&&A.default.setAttribute(r,"accent",!1);var a=t.create("node","mover",[n,r]);t.Push(a)};T.Underset=function(t,e){var r=t.ParseArg(e),n=t.ParseArg(e);W.default.checkMovableLimits(n),r.isKind("mo")&&A.default.setAttribute(r,"accent",!1);var a=t.create("node","munder",[n,r],{accentunder:!1});t.Push(a)};T.Overunderset=function(t,e){var r=t.ParseArg(e),n=t.ParseArg(e),a=t.ParseArg(e);W.default.checkMovableLimits(a),r.isKind("mo")&&A.default.setAttribute(r,"accent",!1),n.isKind("mo")&&A.default.setAttribute(n,"accent",!1);var i=t.create("node","munderover",[a,n,r],{accent:!1,accentunder:!1});t.Push(i)};T.TeXAtom=function(t,e,r){var n={texClass:r},a,i,f;if(r===At.TEXCLASS.OP){n.movesupsub=n.movablelimits=!0;var d=t.GetArgument(e),m=d.match(/^\s*\\rm\s+([a-zA-Z0-9 ]+)$/);m?(n.mathvariant=ee.TexConstant.Variant.NORMAL,i=t.create("token","mi",n,m[1])):(f=new Ft.default(d,t.stack.env,t.configuration).mml(),i=t.create("node","TeXAtom",[f],n)),a=t.itemFactory.create("fn",i)}else f=t.ParseArg(e),a=t.create("node","TeXAtom",[f],n);t.Push(a)};T.MmlToken=function(t,e){var r=t.GetArgument(e),n=t.GetBrackets(e,"").replace(/^\s+/,""),a=t.GetArgument(e),i={},f=[],d;try{d=t.create("node",r)}catch{d=null}if(!d||!d.isToken)throw new Z.default("NotMathMLToken","%1 is not a token element",r);for(;n!=="";){var m=n.match(/^([a-z]+)\s*=\s*('[^']*'|"[^"]*"|[^ ,]*)\s*,?\s*/i);if(!m)throw new Z.default("InvalidMathMLAttr","Invalid MathML attribute: %1",n);if(!d.attributes.hasDefault(m[1])&&!cn[m[1]])throw new Z.default("UnknownAttrForElement","%1 is not a recognized attribute for %2",m[1],r);var s=W.default.MmlFilterAttribute(t,m[1],m[2].replace(/^(['"])(.*)\1$/,"$2"));s&&(s.toLowerCase()==="true"?s=!0:s.toLowerCase()==="false"&&(s=!1),i[m[1]]=s,f.push(m[1])),n=n.substr(m[0].length)}f.length&&(i["mjx-keep-attrs"]=f.join(" "));var o=t.create("text",a);d.appendChild(o),A.default.setProperties(d,i),t.Push(d)};T.Strut=function(t,e){var r=t.create("node","mrow"),n=t.create("node","mpadded",[r],{height:"8.6pt",depth:"3pt",width:0});t.Push(n)};T.Phantom=function(t,e,r,n){var a=t.create("node","mphantom",[t.ParseArg(e)]);(r||n)&&(a=t.create("node","mpadded",[a]),n&&(A.default.setAttribute(a,"height",0),A.default.setAttribute(a,"depth",0)),r&&A.default.setAttribute(a,"width",0));var i=t.create("node","TeXAtom",[a]);t.Push(i)};T.Smash=function(t,e){var r=W.default.trimSpaces(t.GetBrackets(e,"")),n=t.create("node","mpadded",[t.ParseArg(e)]);switch(r){case"b":A.default.setAttribute(n,"depth",0);break;case"t":A.default.setAttribute(n,"height",0);break;default:A.default.setAttribute(n,"height",0),A.default.setAttribute(n,"depth",0)}var a=t.create("node","TeXAtom",[n]);t.Push(a)};T.Lap=function(t,e){var r=t.create("node","mpadded",[t.ParseArg(e)],{width:0});e==="\\llap"&&A.default.setAttribute(r,"lspace","-1width");var n=t.create("node","TeXAtom",[r]);t.Push(n)};T.RaiseLower=function(t,e){var r=t.GetDimen(e),n=t.itemFactory.create("position").setProperties({name:t.currentCS,move:"vertical"});r.charAt(0)==="-"&&(r=r.slice(1),e=e.substr(1)==="raise"?"\\lower":"\\raise"),e==="\\lower"?(n.setProperty("dh","-"+r),n.setProperty("dd","+"+r)):(n.setProperty("dh","+"+r),n.setProperty("dd","-"+r)),t.Push(n)};T.MoveLeftRight=function(t,e){var r=t.GetDimen(e),n=r.charAt(0)==="-"?r.slice(1):"-"+r;if(e==="\\moveleft"){var a=r;r=n,n=a}t.Push(t.itemFactory.create("position").setProperties({name:t.currentCS,move:"horizontal",left:t.create("node","mspace",[],{width:r}),right:t.create("node","mspace",[],{width:n})}))};T.Hskip=function(t,e){var r=t.create("node","mspace",[],{width:t.GetDimen(e)});t.Push(r)};T.Nonscript=function(t,e){t.Push(t.itemFactory.create("nonscript"))};T.Rule=function(t,e,r){var n=t.GetDimen(e),a=t.GetDimen(e),i=t.GetDimen(e),f={width:n,height:a,depth:i};r!=="blank"&&(f.mathbackground=t.stack.env.color||"black");var d=t.create("node","mspace",[],f);t.Push(d)};T.rule=function(t,e){var r=t.GetBrackets(e),n=t.GetDimen(e),a=t.GetDimen(e),i=t.create("node","mspace",[],{width:n,height:a,mathbackground:t.stack.env.color||"black"});r&&(i=t.create("node","mpadded",[i],{voffset:r}),r.match(/^\-/)?(A.default.setAttribute(i,"height",r),A.default.setAttribute(i,"depth","+"+r.substr(1))):A.default.setAttribute(i,"height","+"+r)),t.Push(i)};T.MakeBig=function(t,e,r,n){n*=ln;var a=String(n).replace(/(\.\d\d\d).+/,"$1")+"em",i=t.GetDelimiter(e,!0),f=t.create("token","mo",{minsize:a,maxsize:a,fence:!0,stretchy:!0,symmetric:!0},i),d=t.create("node","TeXAtom",[f],{texClass:r});t.Push(d)};T.BuildRel=function(t,e){var r=t.ParseUpTo(e,"\\over"),n=t.ParseArg(e),a=t.create("node","munderover");A.default.setChild(a,0,n),A.default.setChild(a,1,null),A.default.setChild(a,2,r);var i=t.create("node","TeXAtom",[a],{texClass:At.TEXCLASS.REL});t.Push(i)};T.HBox=function(t,e,r,n){t.PushAll(W.default.internalMath(t,t.GetArgument(e),r,n))};T.FBox=function(t,e){var r=W.default.internalMath(t,t.GetArgument(e)),n=t.create("node","menclose",r,{notation:"box"});t.Push(n)};T.FrameBox=function(t,e){var r=t.GetBrackets(e),n=t.GetBrackets(e)||"c",a=W.default.internalMath(t,t.GetArgument(e));r&&(a=[t.create("node","mpadded",a,{width:r,"data-align":(0,sn.lookup)(n,{l:"left",r:"right"},"center")})]);var i=t.create("node","TeXAtom",[t.create("node","menclose",a,{notation:"box"})],{texClass:At.TEXCLASS.ORD});t.Push(i)};T.Not=function(t,e){t.Push(t.itemFactory.create("not"))};T.Dots=function(t,e){var r=A.default.createEntity("2026"),n=A.default.createEntity("22EF"),a=t.create("token","mo",{stretchy:!1},r),i=t.create("token","mo",{stretchy:!1},n);t.Push(t.itemFactory.create("dots").setProperties({ldots:a,cdots:i}))};T.Matrix=function(t,e,r,n,a,i,f,d,m,s){var o=t.GetNext();if(o==="")throw new Z.default("MissingArgFor","Missing argument for %1",t.currentCS);o==="{"?t.i++:(t.string=o+"}"+t.string.slice(t.i+1),t.i=0);var u=t.itemFactory.create("array").setProperty("requireClose",!0);u.arraydef={rowspacing:f||"4pt",columnspacing:i||"1em"},m&&u.setProperty("isCases",!0),s&&(u.setProperty("isNumbered",!0),u.arraydef.side=s),(r||n)&&(u.setProperty("open",r),u.setProperty("close",n)),d==="D"&&(u.arraydef.displaystyle=!0),a!=null&&(u.arraydef.columnalign=a),t.Push(u)};T.Entry=function(t,e){t.Push(t.itemFactory.create("cell").setProperties({isEntry:!0,name:e}));var r=t.stack.Top(),n=r.getProperty("casesEnv"),a=r.getProperty("isCases");if(!(!a&&!n)){for(var i=t.string,f=0,d=-1,m=t.i,s=i.length,o=n?new RegExp("^\\\\end\\s*\\{".concat(n.replace(/\*/,"\\*"),"\\}")):null;m<s;){var u=i.charAt(m);if(u==="{")f++,m++;else if(u==="}")f===0?s=0:(f--,f===0&&d<0&&(d=m-t.i),m++);else{if(u==="&"&&f===0)throw new Z.default("ExtraAlignTab","Extra alignment tab in \\cases text");if(u==="\\"){var l=i.substr(m);l.match(/^((\\cr)[^a-zA-Z]|\\\\)/)||o&&l.match(o)?s=0:m+=2}else m++}}var c=i.substr(t.i,m-t.i);if(!c.match(/^\s*\\text[^a-zA-Z]/)||d!==c.replace(/\s+$/,"").length-1){var h=W.default.internalMath(t,W.default.trimSpaces(c),0);t.PushAll(h),t.i=m}}};T.Cr=function(t,e){t.Push(t.itemFactory.create("cell").setProperties({isCR:!0,name:e}))};T.CrLaTeX=function(t,e,r){r===void 0&&(r=!1);var n;if(!r&&(t.string.charAt(t.i)==="*"&&t.i++,t.string.charAt(t.i)==="[")){var a=t.GetBrackets(e,""),i=Qt(W.default.matchDimen(a),2),f=i[0],d=i[1];if(a&&!f)throw new Z.default("BracketMustBeDimension","Bracket argument to %1 must be a dimension",t.currentCS);n=f+d}t.Push(t.itemFactory.create("cell").setProperties({isCR:!0,name:e,linebreak:!0}));var m=t.stack.Top(),s;m instanceof te.ArrayItem?n&&m.addRowSpacing(n):(n&&(s=t.create("node","mspace",[],{depth:n}),t.Push(s)),s=t.create("node","mspace",[],{linebreak:ee.TexConstant.LineBreak.NEWLINE}),t.Push(s))};T.HLine=function(t,e,r){r==null&&(r="solid");var n=t.stack.Top();if(!(n instanceof te.ArrayItem)||n.Size())throw new Z.default("Misplaced","Misplaced %1",t.currentCS);if(!n.table.length)n.frame.push("top");else{for(var a=n.arraydef.rowlines?n.arraydef.rowlines.split(/ /):[];a.length<n.table.length;)a.push("none");a[n.table.length-1]=r,n.arraydef.rowlines=a.join(" ")}};T.HFill=function(t,e){var r=t.stack.Top();if(r instanceof te.ArrayItem)r.hfill.push(r.Size());else throw new Z.default("UnsupportedHFill","Unsupported use of %1",t.currentCS)};T.BeginEnd=function(t,e){var r=t.GetArgument(e);if(r.match(/\\/i))throw new Z.default("InvalidEnv","Invalid environment name '%1'",r);var n=t.configuration.handlers.get("environment").lookup(r);if(n&&e==="\\end"){if(!n.args[0]){var a=t.itemFactory.create("end").setProperty("name",r);t.Push(a);return}t.stack.env.closing=r}W.default.checkMaxMacros(t,!1),t.parse("environment",[t,r])};T.Array=function(t,e,r,n,a,i,f,d,m){a||(a=t.GetArgument("\\begin{"+e.getName()+"}"));var s=("c"+a).replace(/[^clr|:]/g,"").replace(/[^|:]([|:])+/g,"$1");a=a.replace(/[^clr]/g,"").split("").join(" "),a=a.replace(/l/g,"left").replace(/r/g,"right").replace(/c/g,"center");var o=t.itemFactory.create("array");return o.arraydef={columnalign:a,columnspacing:i||"1em",rowspacing:f||"4pt"},s.match(/[|:]/)&&(s.charAt(0).match(/[|:]/)&&(o.frame.push("left"),o.dashed=s.charAt(0)===":"),s.charAt(s.length-1).match(/[|:]/)&&o.frame.push("right"),s=s.substr(1,s.length-2),o.arraydef.columnlines=s.split("").join(" ").replace(/[^|: ]/g,"none").replace(/\|/g,"solid").replace(/:/g,"dashed")),r&&o.setProperty("open",t.convertDelimiter(r)),n&&o.setProperty("close",t.convertDelimiter(n)),(d||"").charAt(1)==="'"&&(o.arraydef["data-cramped"]=!0,d=d.charAt(0)),d==="D"?o.arraydef.displaystyle=!0:d&&(o.arraydef.displaystyle=!1),d==="S"&&(o.arraydef.scriptlevel=1),m&&(o.arraydef.useHeight=!1),t.Push(e),o};T.AlignedArray=function(t,e){var r=t.GetBrackets("\\begin{"+e.getName()+"}"),n=T.Array(t,e);return W.default.setArrayAlign(n,r)};T.Equation=function(t,e,r){return t.Push(e),W.default.checkEqnEnv(t),t.itemFactory.create("equation",r).setProperty("name",e.getName())};T.EqnArray=function(t,e,r,n,a,i){t.Push(e),n&&W.default.checkEqnEnv(t),a=a.replace(/[^clr]/g,"").split("").join(" "),a=a.replace(/l/g,"left").replace(/r/g,"right").replace(/c/g,"center");var f=t.itemFactory.create("eqnarray",e.getName(),r,n,t.stack.global);return f.arraydef={displaystyle:!0,columnalign:a,columnspacing:i||"1em",rowspacing:"3pt",side:t.options.tagSide,minlabelspacing:t.options.tagIndent},f};T.HandleNoTag=function(t,e){t.tags.notag()};T.HandleLabel=function(t,e){var r=t.GetArgument(e);if(r!==""&&!t.tags.refUpdate){if(t.tags.label)throw new Z.default("MultipleCommand","Multiple %1",t.currentCS);if(t.tags.label=r,(t.tags.allLabels[r]||t.tags.labels[r])&&!t.options.ignoreDuplicateLabels)throw new Z.default("MultipleLabel","Label '%1' multiply defined",r);t.tags.labels[r]=new _e.Label}};T.HandleRef=function(t,e,r){var n=t.GetArgument(e),a=t.tags.allLabels[n]||t.tags.labels[n];a||(t.tags.refUpdate||(t.tags.redo=!0),a=new _e.Label);var i=a.tag;r&&(i=t.tags.formatTag(i));var f=t.create("node","mrow",W.default.internalMath(t,i),{href:t.tags.formatUrl(a.id,t.options.baseURL),class:"MathJax_ref"});t.Push(f)};T.Macro=function(t,e,r,n,a){if(n){var i=[];if(a!=null){var f=t.GetBrackets(e);i.push(f??a)}for(var d=i.length;d<n;d++)i.push(t.GetArgument(e));r=W.default.substituteArgs(t,i,r)}t.string=W.default.addArgs(t,r,t.string.slice(t.i)),t.i=0,W.default.checkMaxMacros(t)};T.MathChoice=function(t,e){var r=t.ParseArg(e),n=t.ParseArg(e),a=t.ParseArg(e),i=t.ParseArg(e);t.Push(t.create("node","MathChoice",[r,n,a,i]))};Jt.default=T;var re={},fn=p&&p.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],f;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(d){f={error:d}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(f)throw f.error}}return i},hn=p&&p.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},Be=p&&p.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(re,"__esModule",{value:!0});var dn=Be(it),Rt=_t,ye=Be(Ct()),Gt;(function(t){function e(s,o){var u=ye.default.getFontDef(s),l=s.stack.env;l.multiLetterIdentifiers&&l.font!==""&&(o=s.string.substr(s.i-1).match(l.multiLetterIdentifiers)[0],s.i+=o.length-1,u.mathvariant===Rt.TexConstant.Variant.NORMAL&&l.noAutoOP&&o.length>1&&(u.autoOP=!1));var c=s.create("token","mi",u,o);s.Push(c)}t.variable=e;function r(s,o){var u,l=s.configuration.options.digits,c=s.string.slice(s.i-1).match(l),h=ye.default.getFontDef(s);c?(u=s.create("token","mn",h,c[0].replace(/[{}]/g,"")),s.i+=c[0].length-1):u=s.create("token","mo",h,o),s.Push(u)}t.digit=r;function n(s,o){var u=s.GetCS();s.parse("macro",[s,u])}t.controlSequence=n;function a(s,o){var u=o.attributes||{mathvariant:Rt.TexConstant.Variant.ITALIC},l=s.create("token","mi",u,o.char);s.Push(l)}t.mathchar0mi=a;function i(s,o){var u=o.attributes||{};u.stretchy=!1;var l=s.create("token","mo",u,o.char);dn.default.setProperty(l,"fixStretchy",!0),s.configuration.addNode("fixStretchy",l),s.Push(l)}t.mathchar0mo=i;function f(s,o){var u=o.attributes||{mathvariant:Rt.TexConstant.Variant.NORMAL};s.stack.env.font&&(u.mathvariant=s.stack.env.font);var l=s.create("token","mi",u,o.char);s.Push(l)}t.mathchar7=f;function d(s,o){var u=o.attributes||{};u=Object.assign({fence:!1,stretchy:!1},u);var l=s.create("token","mo",u,o.char);s.Push(l)}t.delimiter=d;function m(s,o,u,l){var c=l[0],h=s.itemFactory.create("begin").setProperties({name:o,end:c});h=u.apply(void 0,hn([s,h],fn(l.slice(1)),!1)),s.Push(h)}t.environment=m})(Gt||(Gt={}));re.default=Gt;var pn=p&&p.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),mn=p&&p.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vn=p&&p.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&pn(e,t,r);return mn(e,t),e},ne=p&&p.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},at=vn($),b=_t,ae=ne(Jt),ct=ne(re),gn=ne(Ct()),L=bt,et=Ce;new at.RegExpMap("letter",ct.default.variable,/[a-z]/i);new at.RegExpMap("digit",ct.default.digit,/[0-9.,]/);new at.RegExpMap("command",ct.default.controlSequence,/^\\/);new at.MacroMap("special",{"{":"Open","}":"Close","~":"Tilde","^":"Superscript",_:"Subscript"," ":"Space","	":"Space","\r":"Space","\n":"Space","'":"Prime","%":"Comment","&":"Entry","#":"Hash"," ":"Space","’":"Prime"},ae.default);new at.CharacterMap("mathchar0mi",ct.default.mathchar0mi,{alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ϵ",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigma:"σ",tau:"τ",upsilon:"υ",phi:"ϕ",chi:"χ",psi:"ψ",omega:"ω",varepsilon:"ε",vartheta:"ϑ",varpi:"ϖ",varrho:"ϱ",varsigma:"ς",varphi:"φ",S:["§",{mathvariant:b.TexConstant.Variant.NORMAL}],aleph:["ℵ",{mathvariant:b.TexConstant.Variant.NORMAL}],hbar:["ℏ",{variantForm:!0}],imath:"ı",jmath:"ȷ",ell:"ℓ",wp:["℘",{mathvariant:b.TexConstant.Variant.NORMAL}],Re:["ℜ",{mathvariant:b.TexConstant.Variant.NORMAL}],Im:["ℑ",{mathvariant:b.TexConstant.Variant.NORMAL}],partial:["∂",{mathvariant:b.TexConstant.Variant.ITALIC}],infty:["∞",{mathvariant:b.TexConstant.Variant.NORMAL}],prime:["′",{variantForm:!0}],emptyset:["∅",{mathvariant:b.TexConstant.Variant.NORMAL}],nabla:["∇",{mathvariant:b.TexConstant.Variant.NORMAL}],top:["⊤",{mathvariant:b.TexConstant.Variant.NORMAL}],bot:["⊥",{mathvariant:b.TexConstant.Variant.NORMAL}],angle:["∠",{mathvariant:b.TexConstant.Variant.NORMAL}],triangle:["△",{mathvariant:b.TexConstant.Variant.NORMAL}],backslash:["∖",{mathvariant:b.TexConstant.Variant.NORMAL}],forall:["∀",{mathvariant:b.TexConstant.Variant.NORMAL}],exists:["∃",{mathvariant:b.TexConstant.Variant.NORMAL}],neg:["¬",{mathvariant:b.TexConstant.Variant.NORMAL}],lnot:["¬",{mathvariant:b.TexConstant.Variant.NORMAL}],flat:["♭",{mathvariant:b.TexConstant.Variant.NORMAL}],natural:["♮",{mathvariant:b.TexConstant.Variant.NORMAL}],sharp:["♯",{mathvariant:b.TexConstant.Variant.NORMAL}],clubsuit:["♣",{mathvariant:b.TexConstant.Variant.NORMAL}],diamondsuit:["♢",{mathvariant:b.TexConstant.Variant.NORMAL}],heartsuit:["♡",{mathvariant:b.TexConstant.Variant.NORMAL}],spadesuit:["♠",{mathvariant:b.TexConstant.Variant.NORMAL}]});new at.CharacterMap("mathchar0mo",ct.default.mathchar0mo,{surd:"√",coprod:["∐",{texClass:L.TEXCLASS.OP,movesupsub:!0}],bigvee:["⋁",{texClass:L.TEXCLASS.OP,movesupsub:!0}],bigwedge:["⋀",{texClass:L.TEXCLASS.OP,movesupsub:!0}],biguplus:["⨄",{texClass:L.TEXCLASS.OP,movesupsub:!0}],bigcap:["⋂",{texClass:L.TEXCLASS.OP,movesupsub:!0}],bigcup:["⋃",{texClass:L.TEXCLASS.OP,movesupsub:!0}],int:["∫",{texClass:L.TEXCLASS.OP}],intop:["∫",{texClass:L.TEXCLASS.OP,movesupsub:!0,movablelimits:!0}],iint:["∬",{texClass:L.TEXCLASS.OP}],iiint:["∭",{texClass:L.TEXCLASS.OP}],prod:["∏",{texClass:L.TEXCLASS.OP,movesupsub:!0}],sum:["∑",{texClass:L.TEXCLASS.OP,movesupsub:!0}],bigotimes:["⨂",{texClass:L.TEXCLASS.OP,movesupsub:!0}],bigoplus:["⨁",{texClass:L.TEXCLASS.OP,movesupsub:!0}],bigodot:["⨀",{texClass:L.TEXCLASS.OP,movesupsub:!0}],oint:["∮",{texClass:L.TEXCLASS.OP}],bigsqcup:["⨆",{texClass:L.TEXCLASS.OP,movesupsub:!0}],smallint:["∫",{largeop:!1}],triangleleft:"◃",triangleright:"▹",bigtriangleup:"△",bigtriangledown:"▽",wedge:"∧",land:"∧",vee:"∨",lor:"∨",cap:"∩",cup:"∪",ddagger:"‡",dagger:"†",sqcap:"⊓",sqcup:"⊔",uplus:"⊎",amalg:"⨿",diamond:"⋄",bullet:"∙",wr:"≀",div:"÷",divsymbol:"÷",odot:["⊙",{largeop:!1}],oslash:["⊘",{largeop:!1}],otimes:["⊗",{largeop:!1}],ominus:["⊖",{largeop:!1}],oplus:["⊕",{largeop:!1}],mp:"∓",pm:"±",circ:"∘",bigcirc:"◯",setminus:"∖",cdot:"⋅",ast:"∗",times:"×",star:"⋆",propto:"∝",sqsubseteq:"⊑",sqsupseteq:"⊒",parallel:"∥",mid:"∣",dashv:"⊣",vdash:"⊢",leq:"≤",le:"≤",geq:"≥",ge:"≥",lt:"<",gt:">",succ:"≻",prec:"≺",approx:"≈",succeq:"⪰",preceq:"⪯",supset:"⊃",subset:"⊂",supseteq:"⊇",subseteq:"⊆",in:"∈",ni:"∋",notin:"∉",owns:"∋",gg:"≫",ll:"≪",sim:"∼",simeq:"≃",perp:"⊥",equiv:"≡",asymp:"≍",smile:"⌣",frown:"⌢",ne:"≠",neq:"≠",cong:"≅",doteq:"≐",bowtie:"⋈",models:"⊨",notChar:"⧸",Leftrightarrow:"⇔",Leftarrow:"⇐",Rightarrow:"⇒",leftrightarrow:"↔",leftarrow:"←",gets:"←",rightarrow:"→",to:["→",{accent:!1}],mapsto:"↦",leftharpoonup:"↼",leftharpoondown:"↽",rightharpoonup:"⇀",rightharpoondown:"⇁",nearrow:"↗",searrow:"↘",nwarrow:"↖",swarrow:"↙",rightleftharpoons:"⇌",hookrightarrow:"↪",hookleftarrow:"↩",longleftarrow:"⟵",Longleftarrow:"⟸",longrightarrow:"⟶",Longrightarrow:"⟹",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",ldots:"…",cdots:"⋯",vdots:"⋮",ddots:"⋱",dotsc:"…",dotsb:"⋯",dotsm:"⋯",dotsi:"⋯",dotso:"…",ldotp:[".",{texClass:L.TEXCLASS.PUNCT}],cdotp:["⋅",{texClass:L.TEXCLASS.PUNCT}],colon:[":",{texClass:L.TEXCLASS.PUNCT}]});new at.CharacterMap("mathchar7",ct.default.mathchar7,{Gamma:"Γ",Delta:"Δ",Theta:"Θ",Lambda:"Λ",Xi:"Ξ",Pi:"Π",Sigma:"Σ",Upsilon:"Υ",Phi:"Φ",Psi:"Ψ",Omega:"Ω",_:"_","#":"#",$:"$","%":"%","&":"&",And:"&"});new at.DelimiterMap("delimiter",ct.default.delimiter,{"(":"(",")":")","[":"[","]":"]","<":"⟨",">":"⟩","\\lt":"⟨","\\gt":"⟩","/":"/","|":["|",{texClass:L.TEXCLASS.ORD}],".":"","\\\\":"\\","\\lmoustache":"⎰","\\rmoustache":"⎱","\\lgroup":"⟮","\\rgroup":"⟯","\\arrowvert":"⏐","\\Arrowvert":"‖","\\bracevert":"⎪","\\Vert":["‖",{texClass:L.TEXCLASS.ORD}],"\\|":["‖",{texClass:L.TEXCLASS.ORD}],"\\vert":["|",{texClass:L.TEXCLASS.ORD}],"\\uparrow":"↑","\\downarrow":"↓","\\updownarrow":"↕","\\Uparrow":"⇑","\\Downarrow":"⇓","\\Updownarrow":"⇕","\\backslash":"\\","\\rangle":"⟩","\\langle":"⟨","\\rbrace":"}","\\lbrace":"{","\\}":"}","\\{":"{","\\rceil":"⌉","\\lceil":"⌈","\\rfloor":"⌋","\\lfloor":"⌊","\\lbrack":"[","\\rbrack":"]"});new at.CommandMap("macros",{displaystyle:["SetStyle","D",!0,0],textstyle:["SetStyle","T",!1,0],scriptstyle:["SetStyle","S",!1,1],scriptscriptstyle:["SetStyle","SS",!1,2],rm:["SetFont",b.TexConstant.Variant.NORMAL],mit:["SetFont",b.TexConstant.Variant.ITALIC],oldstyle:["SetFont",b.TexConstant.Variant.OLDSTYLE],cal:["SetFont",b.TexConstant.Variant.CALLIGRAPHIC],it:["SetFont",b.TexConstant.Variant.MATHITALIC],bf:["SetFont",b.TexConstant.Variant.BOLD],bbFont:["SetFont",b.TexConstant.Variant.DOUBLESTRUCK],scr:["SetFont",b.TexConstant.Variant.SCRIPT],frak:["SetFont",b.TexConstant.Variant.FRAKTUR],sf:["SetFont",b.TexConstant.Variant.SANSSERIF],tt:["SetFont",b.TexConstant.Variant.MONOSPACE],mathrm:["MathFont",b.TexConstant.Variant.NORMAL],mathup:["MathFont",b.TexConstant.Variant.NORMAL],mathnormal:["MathFont",""],mathbf:["MathFont",b.TexConstant.Variant.BOLD],mathbfup:["MathFont",b.TexConstant.Variant.BOLD],mathit:["MathFont",b.TexConstant.Variant.MATHITALIC],mathbfit:["MathFont",b.TexConstant.Variant.BOLDITALIC],mathbb:["MathFont",b.TexConstant.Variant.DOUBLESTRUCK],Bbb:["MathFont",b.TexConstant.Variant.DOUBLESTRUCK],mathfrak:["MathFont",b.TexConstant.Variant.FRAKTUR],mathbffrak:["MathFont",b.TexConstant.Variant.BOLDFRAKTUR],mathscr:["MathFont",b.TexConstant.Variant.SCRIPT],mathbfscr:["MathFont",b.TexConstant.Variant.BOLDSCRIPT],mathsf:["MathFont",b.TexConstant.Variant.SANSSERIF],mathsfup:["MathFont",b.TexConstant.Variant.SANSSERIF],mathbfsf:["MathFont",b.TexConstant.Variant.BOLDSANSSERIF],mathbfsfup:["MathFont",b.TexConstant.Variant.BOLDSANSSERIF],mathsfit:["MathFont",b.TexConstant.Variant.SANSSERIFITALIC],mathbfsfit:["MathFont",b.TexConstant.Variant.SANSSERIFBOLDITALIC],mathtt:["MathFont",b.TexConstant.Variant.MONOSPACE],mathcal:["MathFont",b.TexConstant.Variant.CALLIGRAPHIC],mathbfcal:["MathFont",b.TexConstant.Variant.BOLDCALLIGRAPHIC],symrm:["MathFont",b.TexConstant.Variant.NORMAL],symup:["MathFont",b.TexConstant.Variant.NORMAL],symnormal:["MathFont",""],symbf:["MathFont",b.TexConstant.Variant.BOLD],symbfup:["MathFont",b.TexConstant.Variant.BOLD],symit:["MathFont",b.TexConstant.Variant.ITALIC],symbfit:["MathFont",b.TexConstant.Variant.BOLDITALIC],symbb:["MathFont",b.TexConstant.Variant.DOUBLESTRUCK],symfrak:["MathFont",b.TexConstant.Variant.FRAKTUR],symbffrak:["MathFont",b.TexConstant.Variant.BOLDFRAKTUR],symscr:["MathFont",b.TexConstant.Variant.SCRIPT],symbfscr:["MathFont",b.TexConstant.Variant.BOLDSCRIPT],symsf:["MathFont",b.TexConstant.Variant.SANSSERIF],symsfup:["MathFont",b.TexConstant.Variant.SANSSERIF],symbfsf:["MathFont",b.TexConstant.Variant.BOLDSANSSERIF],symbfsfup:["MathFont",b.TexConstant.Variant.BOLDSANSSERIF],symsfit:["MathFont",b.TexConstant.Variant.SANSSERIFITALIC],symbfsfit:["MathFont",b.TexConstant.Variant.SANSSERIFBOLDITALIC],symtt:["MathFont",b.TexConstant.Variant.MONOSPACE],symcal:["MathFont",b.TexConstant.Variant.CALLIGRAPHIC],symbfcal:["MathFont",b.TexConstant.Variant.BOLDCALLIGRAPHIC],textrm:["HBox",null,b.TexConstant.Variant.NORMAL],textup:["HBox",null,b.TexConstant.Variant.NORMAL],textnormal:["HBox"],textit:["HBox",null,b.TexConstant.Variant.ITALIC],textbf:["HBox",null,b.TexConstant.Variant.BOLD],textsf:["HBox",null,b.TexConstant.Variant.SANSSERIF],texttt:["HBox",null,b.TexConstant.Variant.MONOSPACE],tiny:["SetSize",.5],Tiny:["SetSize",.6],scriptsize:["SetSize",.7],small:["SetSize",.85],normalsize:["SetSize",1],large:["SetSize",1.2],Large:["SetSize",1.44],LARGE:["SetSize",1.73],huge:["SetSize",2.07],Huge:["SetSize",2.49],arcsin:"NamedFn",arccos:"NamedFn",arctan:"NamedFn",arg:"NamedFn",cos:"NamedFn",cosh:"NamedFn",cot:"NamedFn",coth:"NamedFn",csc:"NamedFn",deg:"NamedFn",det:"NamedOp",dim:"NamedFn",exp:"NamedFn",gcd:"NamedOp",hom:"NamedFn",inf:"NamedOp",ker:"NamedFn",lg:"NamedFn",lim:"NamedOp",liminf:["NamedOp","lim&thinsp;inf"],limsup:["NamedOp","lim&thinsp;sup"],ln:"NamedFn",log:"NamedFn",max:"NamedOp",min:"NamedOp",Pr:"NamedOp",sec:"NamedFn",sin:"NamedFn",sinh:"NamedFn",sup:"NamedOp",tan:"NamedFn",tanh:"NamedFn",limits:["Limits",1],nolimits:["Limits",0],overline:["UnderOver","2015"],underline:["UnderOver","2015"],overbrace:["UnderOver","23DE",1],underbrace:["UnderOver","23DF",1],overparen:["UnderOver","23DC"],underparen:["UnderOver","23DD"],overrightarrow:["UnderOver","2192"],underrightarrow:["UnderOver","2192"],overleftarrow:["UnderOver","2190"],underleftarrow:["UnderOver","2190"],overleftrightarrow:["UnderOver","2194"],underleftrightarrow:["UnderOver","2194"],overset:"Overset",underset:"Underset",overunderset:"Overunderset",stackrel:["Macro","\\mathrel{\\mathop{#2}\\limits^{#1}}",2],stackbin:["Macro","\\mathbin{\\mathop{#2}\\limits^{#1}}",2],over:"Over",overwithdelims:"Over",atop:"Over",atopwithdelims:"Over",above:"Over",abovewithdelims:"Over",brace:["Over","{","}"],brack:["Over","[","]"],choose:["Over","(",")"],frac:"Frac",sqrt:"Sqrt",root:"Root",uproot:["MoveRoot","upRoot"],leftroot:["MoveRoot","leftRoot"],left:"LeftRight",right:"LeftRight",middle:"LeftRight",llap:"Lap",rlap:"Lap",raise:"RaiseLower",lower:"RaiseLower",moveleft:"MoveLeftRight",moveright:"MoveLeftRight",",":["Spacer",et.MATHSPACE.thinmathspace],":":["Spacer",et.MATHSPACE.mediummathspace],">":["Spacer",et.MATHSPACE.mediummathspace],";":["Spacer",et.MATHSPACE.thickmathspace],"!":["Spacer",et.MATHSPACE.negativethinmathspace],enspace:["Spacer",.5],quad:["Spacer",1],qquad:["Spacer",2],thinspace:["Spacer",et.MATHSPACE.thinmathspace],negthinspace:["Spacer",et.MATHSPACE.negativethinmathspace],hskip:"Hskip",hspace:"Hskip",kern:"Hskip",mskip:"Hskip",mspace:"Hskip",mkern:"Hskip",rule:"rule",Rule:["Rule"],Space:["Rule","blank"],nonscript:"Nonscript",big:["MakeBig",L.TEXCLASS.ORD,.85],Big:["MakeBig",L.TEXCLASS.ORD,1.15],bigg:["MakeBig",L.TEXCLASS.ORD,1.45],Bigg:["MakeBig",L.TEXCLASS.ORD,1.75],bigl:["MakeBig",L.TEXCLASS.OPEN,.85],Bigl:["MakeBig",L.TEXCLASS.OPEN,1.15],biggl:["MakeBig",L.TEXCLASS.OPEN,1.45],Biggl:["MakeBig",L.TEXCLASS.OPEN,1.75],bigr:["MakeBig",L.TEXCLASS.CLOSE,.85],Bigr:["MakeBig",L.TEXCLASS.CLOSE,1.15],biggr:["MakeBig",L.TEXCLASS.CLOSE,1.45],Biggr:["MakeBig",L.TEXCLASS.CLOSE,1.75],bigm:["MakeBig",L.TEXCLASS.REL,.85],Bigm:["MakeBig",L.TEXCLASS.REL,1.15],biggm:["MakeBig",L.TEXCLASS.REL,1.45],Biggm:["MakeBig",L.TEXCLASS.REL,1.75],mathord:["TeXAtom",L.TEXCLASS.ORD],mathop:["TeXAtom",L.TEXCLASS.OP],mathopen:["TeXAtom",L.TEXCLASS.OPEN],mathclose:["TeXAtom",L.TEXCLASS.CLOSE],mathbin:["TeXAtom",L.TEXCLASS.BIN],mathrel:["TeXAtom",L.TEXCLASS.REL],mathpunct:["TeXAtom",L.TEXCLASS.PUNCT],mathinner:["TeXAtom",L.TEXCLASS.INNER],vcenter:["TeXAtom",L.TEXCLASS.VCENTER],buildrel:"BuildRel",hbox:["HBox",0],text:"HBox",mbox:["HBox",0],fbox:"FBox",boxed:["Macro","\\fbox{$\\displaystyle{#1}$}",1],framebox:"FrameBox",strut:"Strut",mathstrut:["Macro","\\vphantom{(}"],phantom:"Phantom",vphantom:["Phantom",1,0],hphantom:["Phantom",0,1],smash:"Smash",acute:["Accent","00B4"],grave:["Accent","0060"],ddot:["Accent","00A8"],tilde:["Accent","007E"],bar:["Accent","00AF"],breve:["Accent","02D8"],check:["Accent","02C7"],hat:["Accent","005E"],vec:["Accent","2192"],dot:["Accent","02D9"],widetilde:["Accent","007E",1],widehat:["Accent","005E",1],matrix:"Matrix",array:"Matrix",pmatrix:["Matrix","(",")"],cases:["Matrix","{","","left left",null,".1em",null,!0],eqalign:["Matrix",null,null,"right left",(0,et.em)(et.MATHSPACE.thickmathspace),".5em","D"],displaylines:["Matrix",null,null,"center",null,".5em","D"],cr:"Cr","\\":"CrLaTeX",newline:["CrLaTeX",!0],hline:["HLine","solid"],hdashline:["HLine","dashed"],eqalignno:["Matrix",null,null,"right left",(0,et.em)(et.MATHSPACE.thickmathspace),".5em","D",null,"right"],leqalignno:["Matrix",null,null,"right left",(0,et.em)(et.MATHSPACE.thickmathspace),".5em","D",null,"left"],hfill:"HFill",hfil:"HFill",hfilll:"HFill",bmod:["Macro",'\\mmlToken{mo}[lspace="thickmathspace" rspace="thickmathspace"]{mod}'],pmod:["Macro","\\pod{\\mmlToken{mi}{mod}\\kern 6mu #1}",1],mod:["Macro","\\mathchoice{\\kern18mu}{\\kern12mu}{\\kern12mu}{\\kern12mu}\\mmlToken{mi}{mod}\\,\\,#1",1],pod:["Macro","\\mathchoice{\\kern18mu}{\\kern8mu}{\\kern8mu}{\\kern8mu}(#1)",1],iff:["Macro","\\;\\Longleftrightarrow\\;"],skew:["Macro","{{#2{#3\\mkern#1mu}\\mkern-#1mu}{}}",3],pmb:["Macro","\\rlap{#1}\\kern1px{#1}",1],TeX:["Macro","T\\kern-.14em\\lower.5ex{E}\\kern-.115em X"],LaTeX:["Macro","L\\kern-.325em\\raise.21em{\\scriptstyle{A}}\\kern-.17em\\TeX"]," ":["Macro","\\text{ }"],not:"Not",dots:"Dots",space:"Tilde"," ":"Tilde",begin:"BeginEnd",end:"BeginEnd",label:"HandleLabel",ref:"HandleRef",nonumber:"HandleNoTag",mathchoice:"MathChoice",mmlToken:"MmlToken"},ae.default);new at.EnvironmentMap("environment",ct.default.environment,{array:["AlignedArray"],equation:["Equation",null,!0],eqnarray:["EqnArray",null,!0,!0,"rcl",gn.default.cols(0,et.MATHSPACE.thickmathspace),".5em"]},ae.default);new at.CharacterMap("not_remap",null,{"←":"↚","→":"↛","↔":"↮","⇐":"⇍","⇒":"⇏","⇔":"⇎","∈":"∉","∋":"∌","∣":"∤","∥":"∦","∼":"≁","~":"≁","≃":"≄","≅":"≇","≈":"≉","≍":"≭","=":"≠","≡":"≢","<":"≮",">":"≯","≤":"≰","≥":"≱","≲":"≴","≳":"≵","≶":"≸","≷":"≹","≺":"⊀","≻":"⊁","⊂":"⊄","⊃":"⊅","⊆":"⊈","⊇":"⊉","⊢":"⊬","⊨":"⊭","⊩":"⊮","⊫":"⊯","≼":"⋠","≽":"⋡","⊑":"⋢","⊒":"⋣","⊲":"⋪","⊳":"⋫","⊴":"⋬","⊵":"⋭","∃":"∄"});var yn=p&&p.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bn=p&&p.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),An=p&&p.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Cn=p&&p.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&bn(e,t,r);return An(e,t),e},Sn=p&&p.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},De=p&&p.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},V;Object.defineProperty(ft,"__esModule",{value:!0});ft.BaseConfiguration=ft.BaseTags=ft.Other=void 0;var Tn=we,Pn=St,Ne=De(lt),En=De(it),wn=$,k=Cn(_),On=Lt,Mn=Ze;new wn.CharacterMap("remap",null,{"-":"−","*":"∗","`":"‘"});function Re(t,e){var r=t.stack.env.font,n=r?{mathvariant:t.stack.env.font}:{},a=Pn.MapHandler.getMap("remap").lookup(e),i=(0,Mn.getRange)(e),f=i?i[3]:"mo",d=t.create("token",f,n,a?a.char:e);i[4]&&d.attributes.set("mathvariant",i[4]),f==="mo"&&(En.default.setProperty(d,"fixStretchy",!0),t.configuration.addNode("fixStretchy",d)),t.Push(d)}ft.Other=Re;function In(t,e){throw new Ne.default("UndefinedControlSequence","Undefined control sequence %1","\\"+e)}function xn(t,e){throw new Ne.default("UnknownEnv","Unknown environment '%1'",e)}function Ln(t){var e,r,n=t.data;try{for(var a=Sn(n.getList("nonscript")),i=a.next();!i.done;i=a.next()){var f=i.value;if(f.attributes.get("scriptlevel")>0){var d=f.parent;if(d.childNodes.splice(d.childIndex(f),1),n.removeFromList(f.kind,[f]),f.isKind("mrow")){var m=f.childNodes[0];n.removeFromList("mstyle",[m]),n.removeFromList("mspace",m.childNodes[0].childNodes)}}else f.isKind("mrow")&&(f.parent.replaceChild(f.childNodes[0],f),n.removeFromList("mrow",[f]))}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}}var je=function(t){yn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(On.AbstractTags);ft.BaseTags=je;ft.BaseConfiguration=Tn.Configuration.create("base",{handler:{character:["command","special","letter","digit"],delimiter:["delimiter"],macro:["delimiter","macros","mathchar0mi","mathchar0mo","mathchar7"],environment:["environment"]},fallback:{character:Re,macro:In,environment:xn},items:(V={},V[k.StartItem.prototype.kind]=k.StartItem,V[k.StopItem.prototype.kind]=k.StopItem,V[k.OpenItem.prototype.kind]=k.OpenItem,V[k.CloseItem.prototype.kind]=k.CloseItem,V[k.PrimeItem.prototype.kind]=k.PrimeItem,V[k.SubsupItem.prototype.kind]=k.SubsupItem,V[k.OverItem.prototype.kind]=k.OverItem,V[k.LeftItem.prototype.kind]=k.LeftItem,V[k.Middle.prototype.kind]=k.Middle,V[k.RightItem.prototype.kind]=k.RightItem,V[k.BeginItem.prototype.kind]=k.BeginItem,V[k.EndItem.prototype.kind]=k.EndItem,V[k.StyleItem.prototype.kind]=k.StyleItem,V[k.PositionItem.prototype.kind]=k.PositionItem,V[k.CellItem.prototype.kind]=k.CellItem,V[k.MmlItem.prototype.kind]=k.MmlItem,V[k.FnItem.prototype.kind]=k.FnItem,V[k.NotItem.prototype.kind]=k.NotItem,V[k.NonscriptItem.prototype.kind]=k.NonscriptItem,V[k.DotsItem.prototype.kind]=k.DotsItem,V[k.ArrayItem.prototype.kind]=k.ArrayItem,V[k.EqnArrayItem.prototype.kind]=k.EqnArrayItem,V[k.EquationItem.prototype.kind]=k.EquationItem,V),options:{maxMacros:1e3,baseURL:typeof document>"u"||document.getElementsByTagName("base").length===0?"":String(document.location).replace(/#.*$/,"")},tags:{base:je},postprocessors:[[Ln,-4]]});export{Jt as B,we as C,Mt as E,it as N,Se as P,$ as S,lt as T,vt as _,Lt as a,Ct as b,_t as c,_ as d,re as e,ft as f,xt as g,ht as h,Ut as i,Kt as r};
