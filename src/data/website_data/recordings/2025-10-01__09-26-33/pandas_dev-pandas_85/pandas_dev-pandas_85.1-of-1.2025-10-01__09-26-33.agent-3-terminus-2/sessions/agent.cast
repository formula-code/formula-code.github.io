{"version": 2, "width": 160, "height": 40, "timestamp": 1762995220, "env": {"SHELL": "/bin/bash", "TERM": "screen"}}
[0.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[0.002, "i", "asciinema rec --stdin /logs/agent.cast\r"]
[0.004, "o", "asciinema rec --stdin /logs/agent.cast\r\n"]
[1.242, "o", "\u001b[?2004l\r\n"]
[2.478, "o", "\u001b[0;31masciinema: /logs/agent.cast already exists, aborting\u001b[0m\r\n"]
[3.714, "o", "\u001b[0;31masciinema: use --overwrite option if you want to overwrite existing recording\u001b[0m\r\n"]
[5.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[5.002, "i", "clear\r"]
[5.004, "o", "clear\r\n"]
[7.478, "o", "\u001b[?2004l\r\n"]
[10.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[10.002, "i", "ls -la\r"]
[10.004, "o", "ls -la\r\n"]
[10.136105, "o", "\u001b[?2004l\r\n"]
[10.266211, "o", "total 216\r\n"]
[10.396316, "o", "drwxr-xr-x 1 root root  4096 Oct  1 14:14 \u001b[0m\u001b[01;34m.\u001b[0m\r\n"]
[10.526421, "o", "drwxr-xr-x 1 root root  4096 Sep 15 17:16 \u001b[01;34m..\u001b[0m\r\n"]
[10.656526, "o", "drwxr-xr-x 2 root root  4096 Sep 13 21:48 \u001b[01;34m.circleci\u001b[0m\r\n"]
[10.786632, "o", "-rw-r--r-- 1 root root  1021 Sep 13 21:48 .devcontainer.json\r\n"]
[10.916737, "o", "drwxr-xr-x 1 root root  4096 Oct  1 14:07 \u001b[01;34m.git\u001b[0m\r\n"]
[11.046842, "o", "-rw-r--r-- 1 root root  1670 Sep 13 21:48 .gitattributes\r\n"]
[11.176947, "o", "drwxr-xr-x 1 root root  4096 Sep 13 21:48 \u001b[01;34m.github\u001b[0m\r\n"]
[11.307053, "o", "-rw-r--r-- 1 root root  1919 Sep 13 21:48 .gitignore\r\n"]
[11.437158, "o", "-rw-r--r-- 1 root root  2296 Sep 13 21:48 .gitpod.yml\r\n"]
[11.567263, "o", "-rw-r--r-- 1 root root 10674 Sep 13 21:48 .pre-commit-config.yaml\r\n"]
[11.697368, "o", "-rw-r--r-- 1 root root  2284 Sep 13 21:48 AUTHORS.md\r\n"]
[11.827474, "o", "-rw-r--r-- 1 root root  1541 Sep 13 21:47 CITATION.cff\r\n"]
[11.957579, "o", "-rw-r--r-- 1 root root   455 Sep 13 21:48 Dockerfile\r\n"]
[12.087684, "o", "-rw-r--r-- 1 root root  1634 Sep 13 21:48 LICENSE\r\n"]
[12.217789, "o", "drwxr-xr-x 1 root root  4096 Sep 13 21:48 \u001b[01;34mLICENSES\u001b[0m\r\n"]
[12.347895, "o", "-rw-r--r-- 1 root root  1335 Sep 13 21:48 MANIFEST.in\r\n"]
[12.478, "o", "-rw-r--r-- 1 root root 11670 Sep 13 21:48 README.md\r\n"]
[12.608105, "o", "drwxr-xr-x 1 root root  4096 Sep 13 21:48 \u001b[01;34masv_bench\u001b[0m\r\n"]
[12.738211, "o", "drwxr-xr-x 1 root root  4096 Sep 13 21:49 \u001b[01;34mbuild\u001b[0m\r\n"]
[12.868316, "o", "drwxr-xr-x 1 root root  4096 Sep 13 21:48 \u001b[01;34mci\u001b[0m\r\n"]
[12.998421, "o", "-rw-r--r-- 1 root root   256 Sep 13 21:47 codecov.yml\r\n"]
[13.128526, "o", "drwxr-xr-x 1 root root  4096 Sep 13 21:48 \u001b[01;34mdoc\u001b[0m\r\n"]
[13.258632, "o", "-rw-r--r-- 1 root root  2612 Sep 13 21:48 environment.yml\r\n"]
[13.388737, "o", "-rw-r--r-- 1 root root   866 Sep 13 21:47 generate_pxi.py\r\n"]
[13.518842, "o", "-rw-r--r-- 1 root root  1715 Sep 13 21:47 generate_version.py\r\n"]
[13.648947, "o", "drwxr-xr-x 2 root root  4096 Sep 13 21:47 \u001b[01;34mgitpod\u001b[0m\r\n"]
[13.779053, "o", "-rw-r--r-- 1 root root  1646 Sep 13 21:48 meson.build\r\n"]
[13.909158, "o", "drwxr-xr-x 1 root root  4096 Sep 13 21:48 \u001b[01;34mpandas\u001b[0m\r\n"]
[14.039263, "o", "-rw-r--r-- 1 root root 21652 Sep 13 21:48 pyproject.toml\r\n"]
[14.169368, "o", "-rw-r--r-- 1 root root  4307 Sep 13 21:47 pyright_reportGeneralTypeIssues.json\r\n"]
[14.299474, "o", "-rw-r--r-- 1 root root  1398 Sep 13 21:48 requirements-dev.txt\r\n"]
[14.429579, "o", "drwxr-xr-x 1 root root  4096 Sep 13 21:48 \u001b[01;34mscripts\u001b[0m\r\n"]
[14.559684, "o", "-rwxr-xr-x 1 root root 21960 Sep 13 21:48 \u001b[01;32msetup.py\u001b[0m\r\n"]
[14.689789, "o", "drwxr-xr-x 3 root root  4096 Sep 13 21:47 \u001b[01;34mtooling\u001b[0m\r\n"]
[14.819895, "o", "drwxr-xr-x 2 root root  4096 Sep 13 21:47 \u001b[01;34mtypings\u001b[0m\r\n"]
[15.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[15.002, "i", "ls -la asv_bench/\r"]
[15.004, "o", "ls -la asv_bench/\r\n"]
[15.83, "o", "\u001b[?2004l\r\n"]
[16.654, "o", "total 24\r\n"]
[17.478, "o", "drwxr-xr-x 1 root root 4096 Sep 13 21:48 \u001b[0m\u001b[01;34m.\u001b[0m\r\n"]
[18.302, "o", "drwxr-xr-x 1 root root 4096 Oct  1 14:14 \u001b[01;34m..\u001b[0m\r\n"]
[19.126, "o", "-rw-r--r-- 1 root root 5194 Sep 13 21:48 asv.conf.json\r\n"]
[20.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[20.002, "i", "ls -la asv_bench/benchmarks/\r"]
[20.004, "o", "ls -la asv_bench/benchmarks/\r\n"]
[20.113478, "o", "\u001b[?2004l\r\n"]
[20.220957, "o", "total 376\r\n"]
[20.328435, "o", "drwxr-xr-x 1 root root  4096 Sep 13 21:48 \u001b[0m\u001b[01;34m.\u001b[0m\r\n"]
[20.435913, "o", "drwxr-xr-x 1 root root  4096 Sep 13 21:48 \u001b[01;34m..\u001b[0m\r\n"]
[20.543391, "o", "-rw-r--r-- 1 root root    25 Sep 13 21:47 __init__.py\r\n"]
[20.65087, "o", "-rw-r--r-- 1 root root  6160 Sep 13 21:47 algorithms.py\r\n"]
[20.758348, "o", "drwxr-xr-x 2 root root  4096 Sep 13 21:47 \u001b[01;34malgos\u001b[0m\r\n"]
[20.865826, "o", "-rw-r--r-- 1 root root 12498 Sep 13 21:47 arithmetic.py\r\n"]
[20.973304, "o", "-rw-r--r-- 1 root root  4282 Sep 13 21:47 array.py\r\n"]
[21.080783, "o", "-rw-r--r-- 1 root root  1414 Sep 13 21:47 attrs_caching.py\r\n"]
[21.188261, "o", "-rw-r--r-- 1 root root   739 Sep 13 21:47 boolean.py\r\n"]
[21.295739, "o", "-rw-r--r-- 1 root root  9776 Sep 13 21:47 categoricals.py\r\n"]
[21.403217, "o", "-rw-r--r-- 1 root root  3462 Sep 13 21:47 ctors.py\r\n"]
[21.510696, "o", "-rw-r--r-- 1 root root  3559 Sep 13 21:47 dtypes.py\r\n"]
[21.618174, "o", "-rw-r--r-- 1 root root  1988 Sep 13 21:47 eval.py\r\n"]
[21.725652, "o", "-rw-r--r-- 1 root root   379 Sep 13 21:47 finalize.py\r\n"]
[21.83313, "o", "-rw-r--r-- 1 root root  5142 Sep 13 21:47 frame_ctor.py\r\n"]
[21.940609, "o", "-rw-r--r-- 1 root root 24291 Sep 13 21:48 frame_methods.py\r\n"]
[22.048087, "o", "-rw-r--r-- 1 root root  8150 Sep 13 21:48 gil.py\r\n"]
[22.155565, "o", "-rw-r--r-- 1 root root 33302 Sep 13 21:48 groupby.py\r\n"]
[22.263043, "o", "-rw-r--r-- 1 root root  2393 Sep 13 21:47 hash_functions.py\r\n"]
[22.370522, "o", "-rw-r--r-- 1 root root  2274 Sep 13 21:47 index_cached_properties.py\r\n"]
[22.478, "o", "-rw-r--r-- 1 root root  7138 Sep 13 21:47 index_object.py\r\n"]
[22.585478, "o", "-rw-r--r-- 1 root root 16983 Sep 13 21:48 indexing.py\r\n"]
[22.692957, "o", "-rw-r--r-- 1 root root  5952 Sep 13 21:48 indexing_engines.py\r\n"]
[22.800435, "o", "-rw-r--r-- 1 root root  8662 Sep 13 21:47 inference.py\r\n"]
[22.907913, "o", "drwxr-xr-x 1 root root  4096 Sep 13 21:48 \u001b[01;34mio\u001b[0m\r\n"]
[23.015391, "o", "-rw-r--r-- 1 root root 18607 Sep 13 21:47 join_merge.py\r\n"]
[23.12287, "o", "-rw-r--r-- 1 root root  2445 Sep 13 21:47 libs.py\r\n"]
[23.230348, "o", "-rw-r--r-- 1 root root 12356 Sep 13 21:47 multiindex_object.py\r\n"]
[23.337826, "o", "-rw-r--r-- 1 root root   624 Sep 13 21:47 package.py\r\n"]
[23.445304, "o", "-rw-r--r-- 1 root root  1740 Sep 13 21:47 pandas_vb_common.py\r\n"]
[23.552783, "o", "-rw-r--r-- 1 root root  2909 Sep 13 21:47 period.py\r\n"]
[23.660261, "o", "-rw-r--r-- 1 root root  4554 Sep 13 21:47 plotting.py\r\n"]
[23.767739, "o", "-rw-r--r-- 1 root root  4948 Sep 13 21:47 reindex.py\r\n"]
[23.875217, "o", "-rw-r--r-- 1 root root  2103 Sep 13 21:47 replace.py\r\n"]
[23.982696, "o", "-rw-r--r-- 1 root root  9973 Sep 13 21:47 reshape.py\r\n"]
[24.090174, "o", "-rw-r--r-- 1 root root 11474 Sep 13 21:48 rolling.py\r\n"]
[24.197652, "o", "-rw-r--r-- 1 root root 10571 Sep 13 21:48 series_methods.py\r\n"]
[24.30513, "o", "-rw-r--r-- 1 root root  6817 Sep 13 21:47 sparse.py\r\n"]
[24.412609, "o", "-rw-r--r-- 1 root root  4685 Sep 13 21:47 stat_ops.py\r\n"]
[24.520087, "o", "-rw-r--r-- 1 root root  3535 Sep 13 21:47 strftime.py\r\n"]
[24.627565, "o", "-rw-r--r-- 1 root root  7996 Sep 13 21:48 strings.py\r\n"]
[24.735043, "o", "-rw-r--r-- 1 root root  1528 Sep 13 21:47 timedelta.py\r\n"]
[24.842522, "o", "-rw-r--r-- 1 root root  8565 Sep 13 21:47 timeseries.py\r\n"]
[25.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[25.002, "i", "find . -name \"asv_benchmarks.txt\" -type f\r"]
[25.004, "o", "find . -name \"asv_benchmarks.txt\" -type f\r\n"]
[25.006, "o", "\u001b[?2004l\r\n"]
[30.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[30.002, "i", "cat asv_bench/benchmarks/categoricals.py\r"]
[30.004, "o", "cat asv_bench/benchmarks/categoricals.py\r\n"]
[30.020627, "o", "\u001b[?2004l\r\n"]
[30.035254, "o", "import string\r\n"]
[30.049882, "o", "import sys\r\n"]
[30.064509, "o", "import warnings\r\n"]
[30.079136, "o", "\r\n"]
[30.093763, "o", "import numpy as np\r\n"]
[30.108391, "o", "\r\n"]
[30.123018, "o", "import pandas as pd\r\n"]
[30.137645, "o", "\r\n"]
[30.152272, "o", "try:\r\n"]
[30.166899, "o", "    from pandas.api.types import union_categoricals\r\n"]
[30.181527, "o", "except ImportError:\r\n"]
[30.196154, "o", "    try:\r\n"]
[30.210781, "o", "        from pandas.types.concat import union_categoricals\r\n"]
[30.225408, "o", "    except ImportError:\r\n"]
[30.240036, "o", "        pass\r\n"]
[30.254663, "o", "\r\n"]
[30.26929, "o", "\r\n"]
[30.283917, "o", "class Constructor:\r\n"]
[30.298544, "o", "    def setup(self):\r\n"]
[30.313172, "o", "        N = 10**5\r\n"]
[30.327799, "o", "        self.categories = list(\"abcde\")\r\n"]
[30.342426, "o", "        self.cat_idx = pd.Index(self.categories)\r\n"]
[30.357053, "o", "        self.values = np.tile(self.categories, N)\r\n"]
[30.37168, "o", "        self.codes = np.tile(range(len(self.categories)), N)\r\n"]
[30.386308, "o", "\r\n"]
[30.400935, "o", "        self.datetimes = pd.Series(\r\n"]
[30.415562, "o", "            pd.date_range(\"1995-01-01 00:00:00\", periods=N // 10, freq=\"s\")\r\n"]
[30.430189, "o", "        )\r\n"]
[30.444817, "o", "        self.datetimes_with_nat = self.datetimes.copy()\r\n"]
[30.459444, "o", "        self.datetimes_with_nat.iloc[-1] = pd.NaT\r\n"]
[30.474071, "o", "\r\n"]
[30.488698, "o", "        self.values_some_nan = list(np.tile(self.categories + [np.nan], N))\r\n"]
[30.503325, "o", "        self.values_all_nan = [np.nan] * len(self.values)\r\n"]
[30.517953, "o", "        self.values_all_int8 = np.ones(N, \"int8\")\r\n"]
[30.53258, "o", "        self.categorical = pd.Categorical(self.values, self.categories)\r\n"]
[30.547207, "o", "        self.series = pd.Series(self.categorical)\r\n"]
[30.561834, "o", "        self.intervals = pd.interval_range(0, 1, periods=N // 10)\r\n"]
[30.576462, "o", "\r\n"]
[30.591089, "o", "    def time_regular(self):\r\n"]
[30.605716, "o", "        pd.Categorical(self.values, self.categories)\r\n"]
[30.620343, "o", "\r\n"]
[30.63497, "o", "    def time_fastpath(self):\r\n"]
[30.649598, "o", "        dtype = pd.CategoricalDtype(categories=self.cat_idx)\r\n"]
[30.664225, "o", "        pd.Categorical._simple_new(self.codes, dtype)\r\n"]
[30.678852, "o", "\r\n"]
[30.693479, "o", "    def time_datetimes(self):\r\n"]
[30.708107, "o", "        pd.Categorical(self.datetimes)\r\n"]
[30.722734, "o", "\r\n"]
[30.737361, "o", "    def time_interval(self):\r\n"]
[30.751988, "o", "        pd.Categorical(self.datetimes, categories=self.datetimes)\r\n"]
[30.766615, "o", "\r\n"]
[30.781243, "o", "    def time_datetimes_with_nat(self):\r\n"]
[30.79587, "o", "        pd.Categorical(self.datetimes_with_nat)\r\n"]
[30.810497, "o", "\r\n"]
[30.825124, "o", "    def time_with_nan(self):\r\n"]
[30.839751, "o", "        pd.Categorical(self.values_some_nan)\r\n"]
[30.854379, "o", "\r\n"]
[30.869006, "o", "    def time_all_nan(self):\r\n"]
[30.883633, "o", "        pd.Categorical(self.values_all_nan)\r\n"]
[30.89826, "o", "\r\n"]
[30.912888, "o", "    def time_from_codes_all_int8(self):\r\n"]
[30.927515, "o", "        pd.Categorical.from_codes(self.values_all_int8, self.categories)\r\n"]
[30.942142, "o", "\r\n"]
[30.956769, "o", "    def time_existing_categorical(self):\r\n"]
[30.971396, "o", "        pd.Categorical(self.categorical)\r\n"]
[30.986024, "o", "\r\n"]
[31.000651, "o", "    def time_existing_series(self):\r\n"]
[31.015278, "o", "        pd.Categorical(self.series)\r\n"]
[31.029905, "o", "\r\n"]
[31.044533, "o", "\r\n"]
[31.05916, "o", "class AsType:\r\n"]
[31.073787, "o", "    def setup(self):\r\n"]
[31.088414, "o", "        N = 10**5\r\n"]
[31.103041, "o", "\r\n"]
[31.117669, "o", "        random_pick = np.random.default_rng().choice\r\n"]
[31.132296, "o", "\r\n"]
[31.146923, "o", "        categories = {\r\n"]
[31.16155, "o", "            \"str\": list(string.ascii_letters),\r\n"]
[31.176178, "o", "            \"int\": np.random.randint(2**16, size=154),\r\n"]
[31.190805, "o", "            \"float\": sys.maxsize * np.random.random((38,)),\r\n"]
[31.205432, "o", "            \"timestamp\": [\r\n"]
[31.220059, "o", "                pd.Timestamp(x, unit=\"s\") for x in np.random.randint(2**18, size=578)\r\n"]
[31.234686, "o", "            ],\r\n"]
[31.249314, "o", "        }\r\n"]
[31.263941, "o", "\r\n"]
[31.278568, "o", "        self.df = pd.DataFrame(\r\n"]
[31.293195, "o", "            {col: random_pick(cats, N) for col, cats in categories.items()}\r\n"]
[31.307822, "o", "        )\r\n"]
[31.32245, "o", "\r\n"]
[31.337077, "o", "        for col in (\"int\", \"float\", \"timestamp\"):\r\n"]
[31.351704, "o", "            self.df[f\"{col}_as_str\"] = self.df[col].astype(str)\r\n"]
[31.366331, "o", "\r\n"]
[31.380959, "o", "        for col in self.df.columns:\r\n"]
[31.395586, "o", "            self.df[col] = self.df[col].astype(\"category\")\r\n"]
[31.410213, "o", "\r\n"]
[31.42484, "o", "    def astype_str(self):\r\n"]
[31.439467, "o", "        [self.df[col].astype(\"str\") for col in \"int float timestamp\".split()]\r\n"]
[31.454095, "o", "\r\n"]
[31.468722, "o", "    def astype_int(self):\r\n"]
[31.483349, "o", "        [self.df[col].astype(\"int\") for col in \"int_as_str timestamp\".split()]\r\n"]
[31.497976, "o", "\r\n"]
[31.512604, "o", "    def astype_float(self):\r\n"]
[31.527231, "o", "        [\r\n"]
[31.541858, "o", "            self.df[col].astype(\"float\")\r\n"]
[31.556485, "o", "            for col in \"float_as_str int int_as_str timestamp\".split()\r\n"]
[31.571112, "o", "        ]\r\n"]
[31.58574, "o", "\r\n"]
[31.600367, "o", "    def astype_datetime(self):\r\n"]
[31.614994, "o", "        self.df[\"float\"].astype(pd.DatetimeTZDtype(tz=\"US/Pacific\"))\r\n"]
[31.629621, "o", "\r\n"]
[31.644249, "o", "\r\n"]
[31.658876, "o", "class Concat:\r\n"]
[31.673503, "o", "    def setup(self):\r\n"]
[31.68813, "o", "        N = 10**5\r\n"]
[31.702757, "o", "        self.s = pd.Series(list(\"aabbcd\") * N).astype(\"category\")\r\n"]
[31.717385, "o", "\r\n"]
[31.732012, "o", "        self.a = pd.Categorical(list(\"aabbcd\") * N)\r\n"]
[31.746639, "o", "        self.b = pd.Categorical(list(\"bbcdjk\") * N)\r\n"]
[31.761266, "o", "\r\n"]
[31.775893, "o", "        self.idx_a = pd.CategoricalIndex(range(N), range(N))\r\n"]
[31.790521, "o", "        self.idx_b = pd.CategoricalIndex(range(N + 1), range(N + 1))\r\n"]
[31.805148, "o", "        self.df_a = pd.DataFrame(range(N), columns=[\"a\"], index=self.idx_a)\r\n"]
[31.819775, "o", "        self.df_b = pd.DataFrame(range(N + 1), columns=[\"a\"], index=self.idx_b)\r\n"]
[31.834402, "o", "\r\n"]
[31.84903, "o", "    def time_concat(self):\r\n"]
[31.863657, "o", "        pd.concat([self.s, self.s])\r\n"]
[31.878284, "o", "\r\n"]
[31.892911, "o", "    def time_union(self):\r\n"]
[31.907538, "o", "        union_categoricals([self.a, self.b])\r\n"]
[31.922166, "o", "\r\n"]
[31.936793, "o", "    def time_append_overlapping_index(self):\r\n"]
[31.95142, "o", "        self.idx_a.append(self.idx_a)\r\n"]
[31.966047, "o", "\r\n"]
[31.980675, "o", "    def time_append_non_overlapping_index(self):\r\n"]
[31.995302, "o", "        self.idx_a.append(self.idx_b)\r\n"]
[32.009929, "o", "\r\n"]
[32.024556, "o", "    def time_concat_overlapping_index(self):\r\n"]
[32.039183, "o", "        pd.concat([self.df_a, self.df_a])\r\n"]
[32.053811, "o", "\r\n"]
[32.068438, "o", "    def time_concat_non_overlapping_index(self):\r\n"]
[32.083065, "o", "        pd.concat([self.df_a, self.df_b])\r\n"]
[32.097692, "o", "\r\n"]
[32.11232, "o", "\r\n"]
[32.126947, "o", "class ValueCounts:\r\n"]
[32.141574, "o", "    params = [True, False]\r\n"]
[32.156201, "o", "    param_names = [\"dropna\"]\r\n"]
[32.170828, "o", "\r\n"]
[32.185456, "o", "    def setup(self, dropna):\r\n"]
[32.200083, "o", "        n = 5 * 10**5\r\n"]
[32.21471, "o", "        arr = [f\"s{i:04d}\" for i in np.random.randint(0, n // 10, size=n)]\r\n"]
[32.229337, "o", "        self.ts = pd.Series(arr).astype(\"category\")\r\n"]
[32.243964, "o", "\r\n"]
[32.258592, "o", "    def time_value_counts(self, dropna):\r\n"]
[32.273219, "o", "        self.ts.value_counts(dropna=dropna)\r\n"]
[32.287846, "o", "\r\n"]
[32.302473, "o", "\r\n"]
[32.317101, "o", "class Repr:\r\n"]
[32.331728, "o", "    def setup(self):\r\n"]
[32.346355, "o", "        self.sel = pd.Series([\"s1234\"]).astype(\"category\")\r\n"]
[32.360982, "o", "\r\n"]
[32.375609, "o", "    def time_rendering(self):\r\n"]
[32.390237, "o", "        str(self.sel)\r\n"]
[32.404864, "o", "\r\n"]
[32.419491, "o", "\r\n"]
[32.434118, "o", "class SetCategories:\r\n"]
[32.448746, "o", "    def setup(self):\r\n"]
[32.463373, "o", "        n = 5 * 10**5\r\n"]
[32.478, "o", "        arr = [f\"s{i:04d}\" for i in np.random.randint(0, n // 10, size=n)]\r\n"]
[32.492627, "o", "        self.ts = pd.Series(arr).astype(\"category\")\r\n"]
[32.507254, "o", "\r\n"]
[32.521882, "o", "    def time_set_categories(self):\r\n"]
[32.536509, "o", "        self.ts.cat.set_categories(self.ts.cat.categories[::2])\r\n"]
[32.551136, "o", "\r\n"]
[32.565763, "o", "\r\n"]
[32.580391, "o", "class RemoveCategories:\r\n"]
[32.595018, "o", "    def setup(self):\r\n"]
[32.609645, "o", "        n = 5 * 10**5\r\n"]
[32.624272, "o", "        arr = [f\"s{i:04d}\" for i in np.random.randint(0, n // 10, size=n)]\r\n"]
[32.638899, "o", "        self.ts = pd.Series(arr).astype(\"category\")\r\n"]
[32.653527, "o", "\r\n"]
[32.668154, "o", "    def time_remove_categories(self):\r\n"]
[32.682781, "o", "        self.ts.cat.remove_categories(self.ts.cat.categories[::2])\r\n"]
[32.697408, "o", "\r\n"]
[32.712036, "o", "\r\n"]
[32.726663, "o", "class Rank:\r\n"]
[32.74129, "o", "    def setup(self):\r\n"]
[32.755917, "o", "        N = 10**5\r\n"]
[32.770544, "o", "        ncats = 15\r\n"]
[32.785172, "o", "\r\n"]
[32.799799, "o", "        self.s_str = pd.Series(np.random.randint(0, ncats, size=N).astype(str))\r\n"]
[32.814426, "o", "        self.s_str_cat = pd.Series(self.s_str, dtype=\"category\")\r\n"]
[32.829053, "o", "        with warnings.catch_warnings(record=True):\r\n"]
[32.84368, "o", "            str_cat_type = pd.CategoricalDtype(set(self.s_str), ordered=True)\r\n"]
[32.858308, "o", "            self.s_str_cat_ordered = self.s_str.astype(str_cat_type)\r\n"]
[32.872935, "o", "\r\n"]
[32.887562, "o", "        self.s_int = pd.Series(np.random.randint(0, ncats, size=N))\r\n"]
[32.902189, "o", "        self.s_int_cat = pd.Series(self.s_int, dtype=\"category\")\r\n"]
[32.916817, "o", "        with warnings.catch_warnings(record=True):\r\n"]
[32.931444, "o", "            int_cat_type = pd.CategoricalDtype(set(self.s_int), ordered=True)\r\n"]
[32.946071, "o", "            self.s_int_cat_ordered = self.s_int.astype(int_cat_type)\r\n"]
[32.960698, "o", "\r\n"]
[32.975325, "o", "    def time_rank_string(self):\r\n"]
[32.989953, "o", "        self.s_str.rank()\r\n"]
[33.00458, "o", "\r\n"]
[33.019207, "o", "    def time_rank_string_cat(self):\r\n"]
[33.033834, "o", "        self.s_str_cat.rank()\r\n"]
[33.048462, "o", "\r\n"]
[33.063089, "o", "    def time_rank_string_cat_ordered(self):\r\n"]
[33.077716, "o", "        self.s_str_cat_ordered.rank()\r\n"]
[33.092343, "o", "\r\n"]
[33.10697, "o", "    def time_rank_int(self):\r\n"]
[33.121598, "o", "        self.s_int.rank()\r\n"]
[33.136225, "o", "\r\n"]
[33.150852, "o", "    def time_rank_int_cat(self):\r\n"]
[33.165479, "o", "        self.s_int_cat.rank()\r\n"]
[33.180107, "o", "\r\n"]
[33.194734, "o", "    def time_rank_int_cat_ordered(self):\r\n"]
[33.209361, "o", "        self.s_int_cat_ordered.rank()\r\n"]
[33.223988, "o", "\r\n"]
[33.238615, "o", "\r\n"]
[33.253243, "o", "class IsMonotonic:\r\n"]
[33.26787, "o", "    def setup(self):\r\n"]
[33.282497, "o", "        N = 1000\r\n"]
[33.297124, "o", "        self.c = pd.CategoricalIndex(list(\"a\" * N + \"b\" * N + \"c\" * N))\r\n"]
[33.311751, "o", "        self.s = pd.Series(self.c)\r\n"]
[33.326379, "o", "\r\n"]
[33.341006, "o", "    def time_categorical_index_is_monotonic_increasing(self):\r\n"]
[33.355633, "o", "        self.c.is_monotonic_increasing\r\n"]
[33.37026, "o", "\r\n"]
[33.384888, "o", "    def time_categorical_index_is_monotonic_decreasing(self):\r\n"]
[33.399515, "o", "        self.c.is_monotonic_decreasing\r\n"]
[33.414142, "o", "\r\n"]
[33.428769, "o", "    def time_categorical_series_is_monotonic_increasing(self):\r\n"]
[33.443396, "o", "        self.s.is_monotonic_increasing\r\n"]
[33.458024, "o", "\r\n"]
[33.472651, "o", "    def time_categorical_series_is_monotonic_decreasing(self):\r\n"]
[33.487278, "o", "        self.s.is_monotonic_decreasing\r\n"]
[33.501905, "o", "\r\n"]
[33.516533, "o", "\r\n"]
[33.53116, "o", "class Contains:\r\n"]
[33.545787, "o", "    def setup(self):\r\n"]
[33.560414, "o", "        N = 10**5\r\n"]
[33.575041, "o", "        self.ci = pd.CategoricalIndex(np.arange(N))\r\n"]
[33.589669, "o", "        self.c = self.ci.values\r\n"]
[33.604296, "o", "        self.key = self.ci.categories[0]\r\n"]
[33.618923, "o", "\r\n"]
[33.63355, "o", "    def time_categorical_index_contains(self):\r\n"]
[33.648178, "o", "        self.key in self.ci\r\n"]
[33.662805, "o", "\r\n"]
[33.677432, "o", "    def time_categorical_contains(self):\r\n"]
[33.692059, "o", "        self.key in self.c\r\n"]
[33.706686, "o", "\r\n"]
[33.721314, "o", "\r\n"]
[33.735941, "o", "class CategoricalSlicing:\r\n"]
[33.750568, "o", "    params = [\"monotonic_incr\", \"monotonic_decr\", \"non_monotonic\"]\r\n"]
[33.765195, "o", "    param_names = [\"index\"]\r\n"]
[33.779822, "o", "\r\n"]
[33.79445, "o", "    def setup(self, index):\r\n"]
[33.809077, "o", "        N = 10**6\r\n"]
[33.823704, "o", "        categories = [\"a\", \"b\", \"c\"]\r\n"]
[33.838331, "o", "        if index == \"monotonic_incr\":\r\n"]
[33.852959, "o", "            codes = np.repeat([0, 1, 2], N)\r\n"]
[33.867586, "o", "        elif index == \"monotonic_decr\":\r\n"]
[33.882213, "o", "            codes = np.repeat([2, 1, 0], N)\r\n"]
[33.89684, "o", "        elif index == \"non_monotonic\":\r\n"]
[33.911467, "o", "            codes = np.tile([0, 1, 2], N)\r\n"]
[33.926095, "o", "        else:\r\n"]
[33.940722, "o", "            raise ValueError(f\"Invalid index param: {index}\")\r\n"]
[33.955349, "o", "\r\n"]
[33.969976, "o", "        self.data = pd.Categorical.from_codes(codes, categories=categories)\r\n"]
[33.984604, "o", "        self.scalar = 10000\r\n"]
[33.999231, "o", "        self.list = list(range(10000))\r\n"]
[34.013858, "o", "        self.cat_scalar = \"b\"\r\n"]
[34.028485, "o", "\r\n"]
[34.043112, "o", "    def time_getitem_scalar(self, index):\r\n"]
[34.05774, "o", "        self.data[self.scalar]\r\n"]
[34.072367, "o", "\r\n"]
[34.086994, "o", "    def time_getitem_slice(self, index):\r\n"]
[34.101621, "o", "        self.data[: self.scalar]\r\n"]
[34.116249, "o", "\r\n"]
[34.130876, "o", "    def time_getitem_list_like(self, index):\r\n"]
[34.145503, "o", "        self.data[[self.scalar]]\r\n"]
[34.16013, "o", "\r\n"]
[34.174757, "o", "    def time_getitem_list(self, index):\r\n"]
[34.189385, "o", "        self.data[self.list]\r\n"]
[34.204012, "o", "\r\n"]
[34.218639, "o", "    def time_getitem_bool_array(self, index):\r\n"]
[34.233266, "o", "        self.data[self.data == self.cat_scalar]\r\n"]
[34.247893, "o", "\r\n"]
[34.262521, "o", "\r\n"]
[34.277148, "o", "class Indexing:\r\n"]
[34.291775, "o", "    def setup(self):\r\n"]
[34.306402, "o", "        N = 10**5\r\n"]
[34.32103, "o", "        self.index = pd.CategoricalIndex(range(N), range(N))\r\n"]
[34.335657, "o", "        self.series = pd.Series(range(N), index=self.index).sort_index()\r\n"]
[34.350284, "o", "        self.category = self.index[500]\r\n"]
[34.364911, "o", "\r\n"]
[34.379538, "o", "    def time_get_loc(self):\r\n"]
[34.394166, "o", "        self.index.get_loc(self.category)\r\n"]
[34.408793, "o", "\r\n"]
[34.42342, "o", "    def time_shallow_copy(self):\r\n"]
[34.438047, "o", "        self.index._view()\r\n"]
[34.452675, "o", "\r\n"]
[34.467302, "o", "    def time_align(self):\r\n"]
[34.481929, "o", "        pd.DataFrame({\"a\": self.series, \"b\": self.series[:500]})\r\n"]
[34.496556, "o", "\r\n"]
[34.511183, "o", "    def time_intersection(self):\r\n"]
[34.525811, "o", "        self.index[:750].intersection(self.index[250:])\r\n"]
[34.540438, "o", "\r\n"]
[34.555065, "o", "    def time_unique(self):\r\n"]
[34.569692, "o", "        self.index.unique()\r\n"]
[34.58432, "o", "\r\n"]
[34.598947, "o", "    def time_reindex(self):\r\n"]
[34.613574, "o", "        self.index.reindex(self.index[:500])\r\n"]
[34.628201, "o", "\r\n"]
[34.642828, "o", "    def time_reindex_missing(self):\r\n"]
[34.657456, "o", "        self.index.reindex([\"a\", \"b\", \"c\", \"d\"])\r\n"]
[34.672083, "o", "\r\n"]
[34.68671, "o", "    def time_sort_values(self):\r\n"]
[34.701337, "o", "        self.index.sort_values(ascending=False)\r\n"]
[34.715964, "o", "\r\n"]
[34.730592, "o", "\r\n"]
[34.745219, "o", "class SearchSorted:\r\n"]
[34.759846, "o", "    def setup(self):\r\n"]
[34.774473, "o", "        N = 10**5\r\n"]
[34.789101, "o", "        self.ci = pd.CategoricalIndex(np.arange(N)).sort_values()\r\n"]
[34.803728, "o", "        self.c = self.ci.values\r\n"]
[34.818355, "o", "        self.key = self.ci.categories[1]\r\n"]
[34.832982, "o", "\r\n"]
[34.847609, "o", "    def time_categorical_index_contains(self):\r\n"]
[34.862237, "o", "        self.ci.searchsorted(self.key)\r\n"]
[34.876864, "o", "\r\n"]
[34.891491, "o", "    def time_categorical_contains(self):\r\n"]
[34.906118, "o", "        self.c.searchsorted(self.key)\r\n"]
[34.920746, "o", "\r\n"]
[34.935373, "o", "\r\n"]
[35.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[35.002, "i", "asv run --python=same --bench=\"categoricals.CategoricalSlicing.*\"\r"]
[35.004, "o", "asv run --python=same --bench=\"categoricals.CategoricalSlicing.*\"\r\n"]
[37.478, "o", "\u001b[?2004l\r\n"]
[40.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[40.002, "i", "asv run --python=same --config=asv_bench/asv.conf.json --bench=\"categoricals.CategoricalSlicing.*\"\r"]
[40.004, "o", "asv run --python=same --config=asv_bench/asv.conf.json --bench=\"categoricals.CategoricalSlicing.*\"\r\n"]
[42.478, "o", "\u001b[?2004l\r\n"]
[45.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[45.002, "i", "ls -la asv_bench/\r"]
[45.004, "o", "ls -la asv_bench/\r\n"]
[45.83, "o", "\u001b[?2004l\r\n"]
[46.654, "o", "total 24\r\n"]
[47.478, "o", "drwxr-xr-x 1 root root 4096 Sep 13 21:48 \u001b[0m\u001b[01;34m.\u001b[0m\r\n"]
[48.302, "o", "drwxr-xr-x 1 root root 4096 Oct  1 14:14 \u001b[01;34m..\u001b[0m\r\n"]
[49.126, "o", "-rw-r--r-- 1 root root 5194 Sep 13 21:48 asv.conf.json\r\n"]
[50.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[50.002, "i", "cd asv_bench\r"]
[50.004, "o", "cd asv_bench\r\n"]
[50.006, "o", "\u001b[?2004l\r\n"]
[55.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo/asv_bench# "]
[55.002, "i", "asv run --python=same --bench=\"categoricals.CategoricalSlicing.*\"\r"]
[55.004, "o", "asv run --python=same --bench=\"categoricals.CategoricalSlicing.*\"\r\n"]
[55.10488, "o", "\u001b[?2004l\r\n"]
[55.20376, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[55.30264, "o", "\u00b7 \u001b[0;32mRunning 5 total benchmarks (1 commits * 1 environments * 5 benchmarks)\u001b[0m\r\n"]
[55.40152, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.10_bin_python3.10\u001b[0m\r\n"]
[55.5004, "o", "[10.00%] \u00b7\u00b7\u00b7 \u001b[0;39mRunning (categoricals.CategoricalSlicing.time_getitem_bool_array--)\u001b[0m.....\r\n"]
[55.59928, "o", "[60.00%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.CategoricalSlicing.time_getitem_bool_array\u001b[0m                                                                                         ok\r\n"]
[55.69816, "o", "[60.00%] \u00b7\u00b7\u00b7 \u001b[0;39m================ =============\u001b[0m\r\n"]
[55.79704, "o", "                  index                    \r\n"]
[55.89592, "o", "             ---------------- -------------\r\n"]
[55.9948, "o", "              monotonic_incr   1.01\u00b10.01ms \r\n"]
[56.09368, "o", "              monotonic_decr   1.02\u00b10.01ms \r\n"]
[56.19256, "o", "              non_monotonic     10.0\u00b10.2ms \r\n"]
[56.29144, "o", "             ================ =============\r\n"]
[56.39032, "o", "\r\n"]
[56.4892, "o", "[70.00%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.CategoricalSlicing.time_getitem_list\u001b[0m                                                                                               ok\r\n"]
[56.58808, "o", "[70.00%] \u00b7\u00b7\u00b7 \u001b[0;39m================ =============\u001b[0m\r\n"]
[56.68696, "o", "                  index                    \r\n"]
[56.78584, "o", "             ---------------- -------------\r\n"]
[56.88472, "o", "              monotonic_incr   1.79\u00b10.01ms \r\n"]
[56.9836, "o", "              monotonic_decr   1.77\u00b10.02ms \r\n"]
[57.08248, "o", "              non_monotonic    1.78\u00b10.01ms \r\n"]
[57.18136, "o", "             ================ =============\r\n"]
[57.28024, "o", "\r\n"]
[57.37912, "o", "[80.00%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.CategoricalSlicing.time_getitem_list_like\u001b[0m                                                                                          ok\r\n"]
[57.478, "o", "[80.00%] \u00b7\u00b7\u00b7 \u001b[0;39m================ =============\u001b[0m\r\n"]
[57.57688, "o", "                  index                    \r\n"]
[57.67576, "o", "             ---------------- -------------\r\n"]
[57.77464, "o", "              monotonic_incr   40.9\u00b10.09\u03bcs \r\n"]
[57.87352, "o", "              monotonic_decr    40.3\u00b10.5\u03bcs \r\n"]
[57.9724, "o", "              non_monotonic     40.8\u00b10.7\u03bcs \r\n"]
[58.07128, "o", "             ================ =============\r\n"]
[58.17016, "o", "\r\n"]
[58.26904, "o", "[90.00%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.CategoricalSlicing.time_getitem_scalar\u001b[0m                                                                                             ok\r\n"]
[58.36792, "o", "[90.00%] \u00b7\u00b7\u00b7 \u001b[0;39m================ =============\u001b[0m\r\n"]
[58.4668, "o", "                  index                    \r\n"]
[58.56568, "o", "             ---------------- -------------\r\n"]
[58.66456, "o", "              monotonic_incr     1.25\u00b10\u03bcs  \r\n"]
[58.76344, "o", "              monotonic_decr     1.24\u00b10\u03bcs  \r\n"]
[58.86232, "o", "              non_monotonic    1.25\u00b10.01\u03bcs \r\n"]
[58.9612, "o", "             ================ =============\r\n"]
[59.06008, "o", "\r\n"]
[59.15896, "o", "[100.00%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.CategoricalSlicing.time_getitem_slice\u001b[0m                                                                                              ok\r\n"]
[59.25784, "o", "[100.00%] \u00b7\u00b7\u00b7 \u001b[0;39m================ =============\u001b[0m\r\n"]
[59.35672, "o", "                   index                    \r\n"]
[59.4556, "o", "              ---------------- -------------\r\n"]
[59.55448, "o", "               monotonic_incr   1.91\u00b10.01\u03bcs \r\n"]
[59.65336, "o", "               monotonic_decr   1.91\u00b10.02\u03bcs \r\n"]
[59.75224, "o", "               non_monotonic    1.90\u00b10.01\u03bcs \r\n"]
[59.85112, "o", "              ================ =============\r\n"]
[60.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo/asv_bench# "]
[60.002, "i", "asv profile --python=same categoricals.CategoricalSlicing.time_getitem_bool_array\r"]
[60.004, "o", "asv profile --python=same categoricals.CategoricalSlicing.time_getitem_bool_array\r\n"]
[61.654, "o", "\u001b[?2004l\r\n"]
[63.302, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[65.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo/asv_bench# "]
[65.002, "i", "asv profile --python=same \"categoricals.CategoricalSlicing.time_getitem_bool_array(non_monotonic)\"\r"]
[65.004, "o", "asv profile --python=same \"categoricals.CategoricalSlicing.time_getitem_bool_array(non_monotonic)\"\r\n"]
[66.654, "o", "\u001b[?2004l\r\n"]
[68.302, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[70.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo/asv_bench# "]
[70.002, "i", "cd ..\r"]
[70.004, "o", "cd ..\r\n"]
[70.006, "o", "\u001b[?2004l\r\n"]
[75.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[75.002, "i", "find pandas -name \"*.py\" | grep -i categorical | head -10\r"]
[75.004, "o", "find pandas -name \"*.py\" | grep -i categorical | head -10\r\n"]
[75.455455, "o", "\u001b[?2004l\r\n"]
[75.904909, "o", "pandas/tests/io/pytables/test_categorical.py\r\n"]
[76.354364, "o", "pandas/tests/io/parser/dtypes/test_categorical.py\r\n"]
[76.803818, "o", "pandas/tests/groupby/test_categorical.py\r\n"]
[77.253273, "o", "pandas/tests/indexing/test_categorical.py\r\n"]
[77.702727, "o", "pandas/tests/arrays/categorical/test_dtypes.py\r\n"]
[78.152182, "o", "pandas/tests/arrays/categorical/test_take.py\r\n"]
[78.601636, "o", "pandas/tests/arrays/categorical/test_algos.py\r\n"]
[79.051091, "o", "pandas/tests/arrays/categorical/test_repr.py\r\n"]
[79.500545, "o", "pandas/tests/arrays/categorical/test_operators.py\r\n"]
[80.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[80.002, "i", "ls -la pandas/core/ | grep -i categorical\r"]
[80.004, "o", "ls -la pandas/core/ | grep -i categorical\r\n"]
[80.006, "o", "\u001b[?2004l\r\n"]
[85.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[85.002, "i", "ls -la pandas/arrays/ | grep -i categorical\r"]
[85.004, "o", "ls -la pandas/arrays/ | grep -i categorical\r\n"]
[85.006, "o", "\u001b[?2004l\r\n"]
[90.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[90.002, "i", "ls -la pandas/arrays/\r"]
[90.004, "o", "ls -la pandas/arrays/\r\n"]
[90.9948, "o", "\u001b[?2004l\r\n"]
[91.9836, "o", "total 12\r\n"]
[92.9724, "o", "drwxr-xr-x 2 root root 4096 Sep 13 21:47 \u001b[0m\u001b[01;34m.\u001b[0m\r\n"]
[93.9612, "o", "drwxr-xr-x 1 root root 4096 Sep 13 21:48 \u001b[01;34m..\u001b[0m\r\n"]
[95.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[95.002, "i", "find pandas -name \"*.py\" -exec grep -l \"class Categorical\" {} \\;\r"]
[95.004, "o", "find pandas -name \"*.py\" -exec grep -l \"class Categorical\" {} \\;\r\n"]
[95.712286, "o", "\u001b[?2004l\r\n"]
[96.418571, "o", "pandas/core/accessor.py\r\n"]
[97.124857, "o", "pandas/core/dtypes/dtypes.py\r\n"]
[97.831143, "o", "pandas/core/arrays/categorical.py\r\n"]
[98.537429, "o", "pandas/core/indexes/category.py\r\n"]
[99.243714, "o", "pandas/core/interchange/dataframe_protocol.py\r\n"]
[100.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[100.002, "i", "wc -l pandas/core/arrays/categorical.py\r"]
[100.004, "o", "wc -l pandas/core/arrays/categorical.py\r\n"]
[102.478, "o", "\u001b[?2004l\r\n"]
[105.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[105.002, "i", "grep -n \"def __getitem__\" pandas/core/arrays/categorical.py\r"]
[105.004, "o", "grep -n \"def __getitem__\" pandas/core/arrays/categorical.py\r\n"]
[105.006, "o", "\u001b[?2004l\r\n"]
[110.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[110.002, "i", "grep -n \"def .*getitem\\|def take\\|def _take\" pandas/core/arrays/categorical.py\r"]
[110.004, "o", "grep -n \"def .*getitem\\|def take\\|def _take\" pandas/core/arrays/categorical.py\r\n"]
[110.006, "o", "\u001b[?2004l\r\n"]
[115.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[115.002, "i", "grep -n \"def \" pandas/core/arrays/categorical.py | head -20\r"]
[115.004, "o", "grep -n \"def \" pandas/core/arrays/categorical.py | head -20\r\n"]
[115.241429, "o", "\u001b[?2004l\r\n"]
[115.476857, "o", "123:def _cat_compare_op(op):\r\n"]
[115.712286, "o", "128:    def func(self, other):\r\n"]
[115.947714, "o", "196:def contains(cat, key, container) -> bool:\r\n"]
[116.183143, "o", "378:    def _simple_new(  # type: ignore[override]\r\n"]
[116.418571, "o", "386:    def __init__(\r\n"]
[116.654, "o", "496:    def dtype(self) -> CategoricalDtype:\r\n"]
[116.889429, "o", "512:    def _internal_fill_value(self) -> int:\r\n"]
[117.124857, "o", "519:    def _from_sequence(\r\n"]
[117.360286, "o", "525:    def _from_scalars(cls, scalars, *, dtype: DtypeObj) -> Self:\r\n"]
[117.595714, "o", "541:    def astype(self, dtype: npt.DTypeLike, copy: bool = ...) -> np.ndarray: ...\r\n"]
[117.831143, "o", "544:    def astype(self, dtype: ExtensionDtype, copy: bool = ...) -> ExtensionArray: ...\r\n"]
[118.066571, "o", "547:    def astype(self, dtype: AstypeArg, copy: bool = ...) -> ArrayLike: ...\r\n"]
[118.302, "o", "549:    def astype(self, dtype: AstypeArg, copy: bool = True) -> ArrayLike:\r\n"]
[118.537429, "o", "610:    def _from_inferred_categories(\r\n"]
[118.772857, "o", "679:    def from_codes(\r\n"]
[119.008286, "o", "751:    def categories(self) -> Index:\r\n"]
[119.243714, "o", "809:    def ordered(self) -> Ordered:\r\n"]
[119.479143, "o", "849:    def codes(self) -> np.ndarray:\r\n"]
[119.714571, "o", "886:    def _set_categories(self, categories, fastpath: bool = False) -> None:\r\n"]
[120.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[120.002, "i", "grep -n \"def \" pandas/core/arrays/categorical.py | grep -E \"take|get|index|slice\"\r"]
[120.004, "o", "grep -n \"def \" pandas/core/arrays/categorical.py | grep -E \"take|get|index|slice\"\r\n"]
[120.624, "o", "\u001b[?2004l\r\n"]
[121.242, "o", "1862:    def _internal_\u001b[01;31m\u001b[Kget\u001b[m\u001b[K_values(self) -> ArrayLike:\r\n"]
[121.86, "o", "2220:    def _\u001b[01;31m\u001b[Kget\u001b[m\u001b[K_repr_footer(self) -> str:\r\n"]
[122.478, "o", "2249:    def _\u001b[01;31m\u001b[Kget\u001b[m\u001b[K_values_repr(self) -> str:\r\n"]
[123.096, "o", "2330:    def _reverse_\u001b[01;31m\u001b[Kindex\u001b[m\u001b[Ker(self) -> dict[Hashable, npt.NDArray[np.intp]]:\r\n"]
[123.714, "o", "2735:    def _str_\u001b[01;31m\u001b[Kget\u001b[m\u001b[K_dummies(self, sep: str = \"|\"):\r\n"]
[124.332, "o", "2949:    def _delegate_property_\u001b[01;31m\u001b[Kget\u001b[m\u001b[K(self, name: str):\r\n"]
[125.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[125.002, "i", "grep -n \"class Categorical\" pandas/core/arrays/categorical.py\r"]
[125.004, "o", "grep -n \"class Categorical\" pandas/core/arrays/categorical.py\r\n"]
[126.654, "o", "\u001b[?2004l\r\n"]
[128.302, "o", "\u001b[32m\u001b[K249\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K\u001b[01;31m\u001b[Kclass Categorical\u001b[m\u001b[K(NDArrayBackedExtensionArray, PandasObject, ObjectStringArrayMixin):  # type: ignore[misc]\r\n"]
[130.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[130.002, "i", "find pandas -name \"*.py\" -exec grep -l \"class NDArrayBackedExtensionArray\" {} \\;\r"]
[130.004, "o", "find pandas -name \"*.py\" -exec grep -l \"class NDArrayBackedExtensionArray\" {} \\;\r\n"]
[132.478, "o", "\u001b[?2004l\r\n"]
[135.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[135.002, "i", "grep -n \"def __getitem__\\|def _getitem\" pandas/core/arrays/_mixins.py\r"]
[135.004, "o", "grep -n \"def __getitem__\\|def _getitem\" pandas/core/arrays/_mixins.py\r\n"]
[136.242, "o", "\u001b[?2004l\r\n"]
[137.478, "o", "\u001b[32m\u001b[K269\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef __getitem__\u001b[m\u001b[K(self, key: ScalarIndexer) -> Any: ...\r\n"]
[138.714, "o", "\u001b[32m\u001b[K272\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef __getitem__\u001b[m\u001b[K(\r\n"]
[140.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[140.002, "i", "sed -n '260,290p' pandas/core/arrays/_mixins.py\r"]
[140.004, "o", "sed -n '260,290p' pandas/core/arrays/_mixins.py\r\n"]
[140.1605, "o", "\u001b[?2004l\r\n"]
[140.315, "o", "    def __setitem__(self, key, value) -> None:\r\n"]
[140.4695, "o", "        key = check_array_indexer(self, key)\r\n"]
[140.624, "o", "        value = self._validate_setitem_value(value)\r\n"]
[140.7785, "o", "        self._ndarray[key] = value\r\n"]
[140.933, "o", "\r\n"]
[141.0875, "o", "    def _validate_setitem_value(self, value):\r\n"]
[141.242, "o", "        return value\r\n"]
[141.3965, "o", "\r\n"]
[141.551, "o", "    @overload\r\n"]
[141.7055, "o", "    def __getitem__(self, key: ScalarIndexer) -> Any: ...\r\n"]
[141.86, "o", "\r\n"]
[142.0145, "o", "    @overload\r\n"]
[142.169, "o", "    def __getitem__(\r\n"]
[142.3235, "o", "        self,\r\n"]
[142.478, "o", "        key: SequenceIndexer | PositionalIndexerTuple,\r\n"]
[142.6325, "o", "    ) -> Self: ...\r\n"]
[142.787, "o", "\r\n"]
[142.9415, "o", "    def __getitem__(\r\n"]
[143.096, "o", "        self,\r\n"]
[143.2505, "o", "        key: PositionalIndexer2D,\r\n"]
[143.405, "o", "    ) -> Self | Any:\r\n"]
[143.5595, "o", "        if lib.is_integer(key):\r\n"]
[143.714, "o", "            # fast-path\r\n"]
[143.8685, "o", "            result = self._ndarray[key]\r\n"]
[144.023, "o", "            if self.ndim == 1:\r\n"]
[144.1775, "o", "                return self._box_func(result)\r\n"]
[144.332, "o", "            return self._from_backing_data(result)\r\n"]
[144.4865, "o", "\r\n"]
[144.641, "o", "        # error: Incompatible types in assignment (expression has type \"ExtensionArray\",\r\n"]
[144.7955, "o", "        # variable has type \"Union[int, slice, ndarray]\")\r\n"]
[145.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[145.002, "i", "sed -n '275,320p' pandas/core/arrays/_mixins.py\r"]
[145.004, "o", "sed -n '275,320p' pandas/core/arrays/_mixins.py\r\n"]
[145.111191, "o", "\u001b[?2004l\r\n"]
[145.216383, "o", "    ) -> Self: ...\r\n"]
[145.321574, "o", "\r\n"]
[145.426766, "o", "    def __getitem__(\r\n"]
[145.531957, "o", "        self,\r\n"]
[145.637149, "o", "        key: PositionalIndexer2D,\r\n"]
[145.74234, "o", "    ) -> Self | Any:\r\n"]
[145.847532, "o", "        if lib.is_integer(key):\r\n"]
[145.952723, "o", "            # fast-path\r\n"]
[146.057915, "o", "            result = self._ndarray[key]\r\n"]
[146.163106, "o", "            if self.ndim == 1:\r\n"]
[146.268298, "o", "                return self._box_func(result)\r\n"]
[146.373489, "o", "            return self._from_backing_data(result)\r\n"]
[146.478681, "o", "\r\n"]
[146.583872, "o", "        # error: Incompatible types in assignment (expression has type \"ExtensionArray\",\r\n"]
[146.689064, "o", "        # variable has type \"Union[int, slice, ndarray]\")\r\n"]
[146.794255, "o", "        key = extract_array(key, extract_numpy=True)  # type: ignore[assignment]\r\n"]
[146.899447, "o", "        key = check_array_indexer(self, key)\r\n"]
[147.004638, "o", "        result = self._ndarray[key]\r\n"]
[147.10983, "o", "        if lib.is_scalar(result):\r\n"]
[147.215021, "o", "            return self._box_func(result)\r\n"]
[147.320213, "o", "\r\n"]
[147.425404, "o", "        result = self._from_backing_data(result)\r\n"]
[147.530596, "o", "        return result\r\n"]
[147.635787, "o", "\r\n"]
[147.740979, "o", "    def _pad_or_backfill(\r\n"]
[147.84617, "o", "        self,\r\n"]
[147.951362, "o", "        *,\r\n"]
[148.056553, "o", "        method: FillnaOptions,\r\n"]
[148.161745, "o", "        limit: int | None = None,\r\n"]
[148.266936, "o", "        limit_area: Literal[\"inside\", \"outside\"] | None = None,\r\n"]
[148.372128, "o", "        copy: bool = True,\r\n"]
[148.477319, "o", "    ) -> Self:\r\n"]
[148.582511, "o", "        mask = self.isna()\r\n"]
[148.687702, "o", "        if mask.any():\r\n"]
[148.792894, "o", "            # (for now) when self.ndim == 2, we assume axis=0\r\n"]
[148.898085, "o", "            func = missing.get_fill_func(method, ndim=self.ndim)\r\n"]
[149.003277, "o", "\r\n"]
[149.108468, "o", "            npvalues = self._ndarray.T\r\n"]
[149.21366, "o", "            if copy:\r\n"]
[149.318851, "o", "                npvalues = npvalues.copy()\r\n"]
[149.424043, "o", "            func(npvalues, limit=limit, limit_area=limit_area, mask=mask.T)\r\n"]
[149.529234, "o", "            npvalues = npvalues.T\r\n"]
[149.634426, "o", "\r\n"]
[149.739617, "o", "            if copy:\r\n"]
[149.844809, "o", "                new_values = self._from_backing_data(npvalues)\r\n"]
[150.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[150.002, "i", "find pandas -name \"*.py\" -exec grep -l \"def check_array_indexer\" {} \\;\r"]
[150.004, "o", "find pandas -name \"*.py\" -exec grep -l \"def check_array_indexer\" {} \\;\r\n"]
[152.478, "o", "\u001b[?2004l\r\n"]
[155.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[155.002, "i", "grep -n \"def check_array_indexer\" pandas/core/indexers/utils.py\r"]
[155.004, "o", "grep -n \"def check_array_indexer\" pandas/core/indexers/utils.py\r\n"]
[157.478, "o", "\u001b[?2004l\r\n"]
[160.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[160.002, "i", "sed -n '420,480p' pandas/core/indexers/utils.py\r"]
[160.004, "o", "sed -n '420,480p' pandas/core/indexers/utils.py\r\n"]
[160.085742, "o", "\u001b[?2004l\r\n"]
[160.165484, "o", "def check_array_indexer(array: AnyArrayLike, indexer: Any) -> Any:\r\n"]
[160.245226, "o", "    \"\"\"\r\n"]
[160.324968, "o", "    Check if `indexer` is a valid array indexer for `array`.\r\n"]
[160.40471, "o", "\r\n"]
[160.484452, "o", "    For a boolean mask, `array` and `indexer` are checked to have the same\r\n"]
[160.564194, "o", "    length. The dtype is validated, and if it is an integer or boolean\r\n"]
[160.643935, "o", "    ExtensionArray, it is checked if there are missing values present, and\r\n"]
[160.723677, "o", "    it is converted to the appropriate numpy array. Other dtypes will raise\r\n"]
[160.803419, "o", "    an error.\r\n"]
[160.883161, "o", "\r\n"]
[160.962903, "o", "    Non-array indexers (integer, slice, Ellipsis, tuples, ..) are passed\r\n"]
[161.042645, "o", "    through as is.\r\n"]
[161.122387, "o", "\r\n"]
[161.202129, "o", "    Parameters\r\n"]
[161.281871, "o", "    ----------\r\n"]
[161.361613, "o", "    array : array-like\r\n"]
[161.441355, "o", "        The array that is being indexed (only used for the length).\r\n"]
[161.521097, "o", "    indexer : array-like or list-like\r\n"]
[161.600839, "o", "        The array-like that's used to index. List-like input that is not yet\r\n"]
[161.680581, "o", "        a numpy array or an ExtensionArray is converted to one. Other input\r\n"]
[161.760323, "o", "        types are passed through as is.\r\n"]
[161.840065, "o", "\r\n"]
[161.919806, "o", "    Returns\r\n"]
[161.999548, "o", "    -------\r\n"]
[162.07929, "o", "    numpy.ndarray\r\n"]
[162.159032, "o", "        The validated indexer as a numpy array that can be used to index.\r\n"]
[162.238774, "o", "\r\n"]
[162.318516, "o", "    Raises\r\n"]
[162.398258, "o", "    ------\r\n"]
[162.478, "o", "    IndexError\r\n"]
[162.557742, "o", "        When the lengths don't match.\r\n"]
[162.637484, "o", "    ValueError\r\n"]
[162.717226, "o", "        When `indexer` cannot be converted to a numpy ndarray to index\r\n"]
[162.796968, "o", "        (e.g. presence of missing values).\r\n"]
[162.87671, "o", "\r\n"]
[162.956452, "o", "    See Also\r\n"]
[163.036194, "o", "    --------\r\n"]
[163.115935, "o", "    api.types.is_bool_dtype : Check if `key` is of boolean dtype.\r\n"]
[163.195677, "o", "\r\n"]
[163.275419, "o", "    Examples\r\n"]
[163.355161, "o", "    --------\r\n"]
[163.434903, "o", "    When checking a boolean mask, a boolean ndarray is returned when the\r\n"]
[163.514645, "o", "    arguments are all valid.\r\n"]
[163.594387, "o", "\r\n"]
[163.674129, "o", "    >>> mask = pd.array([True, False])\r\n"]
[163.753871, "o", "    >>> arr = pd.array([1, 2])\r\n"]
[163.833613, "o", "    >>> pd.api.indexers.check_array_indexer(arr, mask)\r\n"]
[163.913355, "o", "    array([ True, False])\r\n"]
[163.993097, "o", "\r\n"]
[164.072839, "o", "    An IndexError is raised when the lengths don't match.\r\n"]
[164.152581, "o", "\r\n"]
[164.232323, "o", "    >>> mask = pd.array([True, False, True])\r\n"]
[164.312065, "o", "    >>> pd.api.indexers.check_array_indexer(arr, mask)\r\n"]
[164.391806, "o", "    Traceback (most recent call last):\r\n"]
[164.471548, "o", "    ...\r\n"]
[164.55129, "o", "    IndexError: Boolean index has wrong length: 3 instead of 2.\r\n"]
[164.631032, "o", "\r\n"]
[164.710774, "o", "    NA values in a boolean array are treated as False.\r\n"]
[164.790516, "o", "\r\n"]
[164.870258, "o", "    >>> mask = pd.array([True, pd.NA])\r\n"]
[165.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[165.002, "i", "sed -n '480,540p' pandas/core/indexers/utils.py\r"]
[165.004, "o", "sed -n '480,540p' pandas/core/indexers/utils.py\r\n"]
[165.085742, "o", "\u001b[?2004l\r\n"]
[165.165484, "o", "    >>> pd.api.indexers.check_array_indexer(arr, mask)\r\n"]
[165.245226, "o", "    array([ True, False])\r\n"]
[165.324968, "o", "\r\n"]
[165.40471, "o", "    A numpy boolean mask will get passed through (if the length is correct):\r\n"]
[165.484452, "o", "\r\n"]
[165.564194, "o", "    >>> mask = np.array([True, False])\r\n"]
[165.643935, "o", "    >>> pd.api.indexers.check_array_indexer(arr, mask)\r\n"]
[165.723677, "o", "    array([ True, False])\r\n"]
[165.803419, "o", "\r\n"]
[165.883161, "o", "    Similarly for integer indexers, an integer ndarray is returned when it is\r\n"]
[165.962903, "o", "    a valid indexer, otherwise an error is  (for integer indexers, a matching\r\n"]
[166.042645, "o", "    length is not required):\r\n"]
[166.122387, "o", "\r\n"]
[166.202129, "o", "    >>> indexer = pd.array([0, 2], dtype=\"Int64\")\r\n"]
[166.281871, "o", "    >>> arr = pd.array([1, 2, 3])\r\n"]
[166.361613, "o", "    >>> pd.api.indexers.check_array_indexer(arr, indexer)\r\n"]
[166.441355, "o", "    array([0, 2])\r\n"]
[166.521097, "o", "\r\n"]
[166.600839, "o", "    >>> indexer = pd.array([0, pd.NA], dtype=\"Int64\")\r\n"]
[166.680581, "o", "    >>> pd.api.indexers.check_array_indexer(arr, indexer)\r\n"]
[166.760323, "o", "    Traceback (most recent call last):\r\n"]
[166.840065, "o", "    ...\r\n"]
[166.919806, "o", "    ValueError: Cannot index with an integer indexer containing NA values\r\n"]
[166.999548, "o", "\r\n"]
[167.07929, "o", "    For non-integer/boolean dtypes, an appropriate error is raised:\r\n"]
[167.159032, "o", "\r\n"]
[167.238774, "o", "    >>> indexer = np.array([0.0, 2.0], dtype=\"float64\")\r\n"]
[167.318516, "o", "    >>> pd.api.indexers.check_array_indexer(arr, indexer)\r\n"]
[167.398258, "o", "    Traceback (most recent call last):\r\n"]
[167.478, "o", "    ...\r\n"]
[167.557742, "o", "    IndexError: arrays used as indices must be of integer or boolean type\r\n"]
[167.637484, "o", "    \"\"\"\r\n"]
[167.717226, "o", "    from pandas.core.construction import array as pd_array\r\n"]
[167.796968, "o", "\r\n"]
[167.87671, "o", "    # whatever is not an array-like is returned as-is (possible valid array\r\n"]
[167.956452, "o", "    # indexers that are not array-like: integer, slice, Ellipsis, None)\r\n"]
[168.036194, "o", "    # In this context, tuples are not considered as array-like, as they have\r\n"]
[168.115935, "o", "    # a specific meaning in indexing (multi-dimensional indexing)\r\n"]
[168.195677, "o", "    if is_list_like(indexer):\r\n"]
[168.275419, "o", "        if isinstance(indexer, tuple):\r\n"]
[168.355161, "o", "            return indexer\r\n"]
[168.434903, "o", "    else:\r\n"]
[168.514645, "o", "        return indexer\r\n"]
[168.594387, "o", "\r\n"]
[168.674129, "o", "    # convert list-likes to array\r\n"]
[168.753871, "o", "    if not is_array_like(indexer):\r\n"]
[168.833613, "o", "        indexer = pd_array(indexer)\r\n"]
[168.913355, "o", "        if len(indexer) == 0:\r\n"]
[168.993097, "o", "            # empty list is converted to float array by pd.array\r\n"]
[169.072839, "o", "            indexer = np.array([], dtype=np.intp)\r\n"]
[169.152581, "o", "\r\n"]
[169.232323, "o", "    dtype = indexer.dtype\r\n"]
[169.312065, "o", "    if is_bool_dtype(dtype):\r\n"]
[169.391806, "o", "        if isinstance(dtype, ExtensionDtype):\r\n"]
[169.471548, "o", "            indexer = indexer.to_numpy(dtype=bool, na_value=False)\r\n"]
[169.55129, "o", "        else:\r\n"]
[169.631032, "o", "            indexer = np.asarray(indexer, dtype=bool)\r\n"]
[169.710774, "o", "\r\n"]
[169.790516, "o", "        # GH26658\r\n"]
[169.870258, "o", "        if len(indexer) != len(array):\r\n"]
[170.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[170.002, "i", "sed -n '540,580p' pandas/core/indexers/utils.py\r"]
[170.004, "o", "sed -n '540,580p' pandas/core/indexers/utils.py\r\n"]
[170.315, "o", "\u001b[?2004l\r\n"]
[170.624, "o", "            raise IndexError(\r\n"]
[170.933, "o", "                f\"Boolean index has wrong length: \"\r\n"]
[171.242, "o", "                f\"{len(indexer)} instead of {len(array)}\"\r\n"]
[171.551, "o", "            )\r\n"]
[171.86, "o", "    elif is_integer_dtype(dtype):\r\n"]
[172.169, "o", "        try:\r\n"]
[172.478, "o", "            indexer = np.asarray(indexer, dtype=np.intp)\r\n"]
[172.787, "o", "        except ValueError as err:\r\n"]
[173.096, "o", "            raise ValueError(\r\n"]
[173.405, "o", "                \"Cannot index with an integer indexer containing NA values\"\r\n"]
[173.714, "o", "            ) from err\r\n"]
[174.023, "o", "    else:\r\n"]
[174.332, "o", "        raise IndexError(\"arrays used as indices must be of integer or boolean type\")\r\n"]
[174.641, "o", "\r\n"]
[175.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[175.002, "i", "cat > test_categorical_performance.py << 'EOF'\r"]
[175.004, "o", "cat > test_categorical_performance.py << 'EOF'\r\n"]
[175.073726, "o", "\u001b[?2004l\r\n"]
[175.141452, "o", "\u001b[?2004h> import numpy as np\r\n"]
[175.209178, "o", "\u001b[?2004l\r\n"]
[175.276904, "o", "\u001b[?2004h> import pandas as pd\r\n"]
[175.34463, "o", "\u001b[?2004l\r\n"]
[175.412356, "o", "\u001b[?2004h> import time\r\n"]
[175.480082, "o", "\u001b[?2004l\r\n"]
[175.547808, "o", "\u001b[?2004h> \r\n"]
[175.615534, "o", "\u001b[?2004l\r\n"]
[175.68326, "o", "\u001b[?2004h> # Reproduce the benchmark setup\r\n"]
[175.750986, "o", "\u001b[?2004l\r\n"]
[175.818712, "o", "\u001b[?2004h> N = 10**6\r\n"]
[175.886438, "o", "\u001b[?2004l\r\n"]
[175.954164, "o", "\u001b[?2004h> categories = [\"a\", \"b\", \"c\"]\r\n"]
[176.02189, "o", "\u001b[?2004l\r\n"]
[176.089616, "o", "\u001b[?2004h> \r\n"]
[176.157342, "o", "\u001b[?2004l\r\n"]
[176.225068, "o", "\u001b[?2004h> # Non-monotonic case (worst performance)\r\n"]
[176.292795, "o", "\u001b[?2004l\r\n"]
[176.360521, "o", "\u001b[?2004h> codes_non_monotonic = np.tile([0, 1, 2], N)\r\n"]
[176.428247, "o", "\u001b[?2004l\r\n"]
[176.495973, "o", "\u001b[?2004h> data_non_monotonic = pd.Categorical.from_codes(codes_non_monotonic, categories=categories)\r\n"]
[176.563699, "o", "\u001b[?2004l\r\n"]
[176.631425, "o", "\u001b[?2004h> cat_scalar = \"b\"\r\n"]
[176.699151, "o", "\u001b[?2004l\r\n"]
[176.766877, "o", "\u001b[?2004h> \r\n"]
[176.834603, "o", "\u001b[?2004l\r\n"]
[176.902329, "o", "\u001b[?2004h> # Monotonic increasing case (good performance)\r\n"]
[176.970055, "o", "\u001b[?2004l\r\n"]
[177.037781, "o", "\u001b[?2004h> codes_monotonic = np.repeat([0, 1, 2], N)\r\n"]
[177.105507, "o", "\u001b[?2004l\r\n"]
[177.173233, "o", "\u001b[?2004h> data_monotonic = pd.Categorical.from_codes(codes_monotonic, categories=categories)\r\n"]
[177.240959, "o", "\u001b[?2004l\r\n"]
[177.308685, "o", "\u001b[?2004h> \r\n"]
[177.376411, "o", "\u001b[?2004l\r\n"]
[177.444137, "o", "\u001b[?2004h> print(\"Testing boolean array indexing performance...\")\r\n"]
[177.511863, "o", "\u001b[?2004l\r\n"]
[177.579589, "o", "\u001b[?2004h> print(f\"Data length: {len(data_non_monotonic)}\")\r\n"]
[177.647315, "o", "\u001b[?2004l\r\n"]
[177.715041, "o", "\u001b[?2004h> \r\n"]
[177.782767, "o", "\u001b[?2004l\r\n"]
[177.850493, "o", "\u001b[?2004h> # Test non-monotonic\r\n"]
[177.918219, "o", "\u001b[?2004l\r\n"]
[177.985945, "o", "\u001b[?2004h> start = time.time()\r\n"]
[178.053671, "o", "\u001b[?2004l\r\n"]
[178.121397, "o", "\u001b[?2004h> mask = data_non_monotonic == cat_scalar\r\n"]
[178.189123, "o", "\u001b[?2004l\r\n"]
[178.256849, "o", "\u001b[?2004h> result = data_non_monotonic[mask]\r\n"]
[178.324575, "o", "\u001b[?2004l\r\n"]
[178.392301, "o", "\u001b[?2004h> end = time.time()\r\n"]
[178.460027, "o", "\u001b[?2004l\r\n"]
[178.527753, "o", "\u001b[?2004h> print(f\"Non-monotonic time: {(end - start) * 1000:.2f} ms\")\r\n"]
[178.595479, "o", "\u001b[?2004l\r\n"]
[178.663205, "o", "\u001b[?2004h> print(f\"Result length: {len(result)}\")\r\n"]
[178.730932, "o", "\u001b[?2004l\r\n"]
[178.798658, "o", "\u001b[?2004h> \r\n"]
[178.866384, "o", "\u001b[?2004l\r\n"]
[178.93411, "o", "\u001b[?2004h> # Test monotonic\r\n"]
[179.001836, "o", "\u001b[?2004l\r\n"]
[179.069562, "o", "\u001b[?2004h> start = time.time()\r\n"]
[179.137288, "o", "\u001b[?2004l\r\n"]
[179.205014, "o", "\u001b[?2004h> mask = data_monotonic == cat_scalar\r\n"]
[179.27274, "o", "\u001b[?2004l\r\n"]
[179.340466, "o", "\u001b[?2004h> result = data_monotonic[mask]\r\n"]
[179.408192, "o", "\u001b[?2004l\r\n"]
[179.475918, "o", "\u001b[?2004h> end = time.time()\r\n"]
[179.543644, "o", "\u001b[?2004l\r\n"]
[179.61137, "o", "\u001b[?2004h> print(f\"Monotonic time: {(end - start) * 1000:.2f} ms\")\r\n"]
[179.679096, "o", "\u001b[?2004l\r\n"]
[179.746822, "o", "\u001b[?2004h> print(f\"Result length: {len(result)}\")\r\n"]
[179.814548, "o", "\u001b[?2004l\r\n"]
[179.882274, "o", "\u001b[?2004h> EOF\r\n"]
[180.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[180.002, "i", "python test_categorical_performance.py\r"]
[180.004, "o", "python test_categorical_performance.py\r\n"]
[180.455455, "o", "\u001b[?2004l\r\n"]
[180.904909, "o", "+ /opt/conda/envs/asv_3.10/bin/ninja\r\n"]
[181.354364, "o", "\r\n"]
[181.803818, "o", "[0/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[182.253273, "o", "[1/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[182.702727, "o", "Testing boolean array indexing performance...\r\n"]
[183.152182, "o", "Data length: 3000000\r\n"]
[183.601636, "o", "Non-monotonic time: 9.68 ms\r\n"]
[184.051091, "o", "Result length: 1000000\r\n"]
[184.500545, "o", "Monotonic time: 2.04 ms\r\n"]
[185.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[185.002, "i", "cat > test_categorical_detailed.py << 'EOF'\r"]
[185.004, "o", "cat > test_categorical_detailed.py << 'EOF'\r\n"]
[185.049752, "o", "\u001b[?2004l\r\n"]
[185.093504, "o", "\u001b[?2004h> import numpy as np\r\n"]
[185.137257, "o", "\u001b[?2004l\r\n"]
[185.181009, "o", "\u001b[?2004h> import pandas as pd\r\n"]
[185.224761, "o", "\u001b[?2004l\r\n"]
[185.268513, "o", "\u001b[?2004h> import time\r\n"]
[185.312265, "o", "\u001b[?2004l\r\n"]
[185.356018, "o", "\u001b[?2004h> \r\n"]
[185.39977, "o", "\u001b[?2004l\r\n"]
[185.443522, "o", "\u001b[?2004h> # Reproduce the benchmark setup\r\n"]
[185.487274, "o", "\u001b[?2004l\r\n"]
[185.531027, "o", "\u001b[?2004h> N = 10**6\r\n"]
[185.574779, "o", "\u001b[?2004l\r\n"]
[185.618531, "o", "\u001b[?2004h> categories = [\"a\", \"b\", \"c\"]\r\n"]
[185.662283, "o", "\u001b[?2004l\r\n"]
[185.706035, "o", "\u001b[?2004h> \r\n"]
[185.749788, "o", "\u001b[?2004l\r\n"]
[185.79354, "o", "\u001b[?2004h> # Non-monotonic case (worst performance)\r\n"]
[185.837292, "o", "\u001b[?2004l\r\n"]
[185.881044, "o", "\u001b[?2004h> codes_non_monotonic = np.tile([0, 1, 2], N)\r\n"]
[185.924796, "o", "\u001b[?2004l\r\n"]
[185.968549, "o", "\u001b[?2004h> data_non_monotonic = pd.Categorical.from_codes(codes_non_monotonic, categories=categories)\r\n"]
[186.012301, "o", "\u001b[?2004l\r\n"]
[186.056053, "o", "\u001b[?2004h> cat_scalar = \"b\"\r\n"]
[186.099805, "o", "\u001b[?2004l\r\n"]
[186.143558, "o", "\u001b[?2004h> \r\n"]
[186.18731, "o", "\u001b[?2004l\r\n"]
[186.231062, "o", "\u001b[?2004h> # Monotonic increasing case (good performance)\r\n"]
[186.274814, "o", "\u001b[?2004l\r\n"]
[186.318566, "o", "\u001b[?2004h> codes_monotonic = np.repeat([0, 1, 2], N)\r\n"]
[186.362319, "o", "\u001b[?2004l\r\n"]
[186.406071, "o", "\u001b[?2004h> data_monotonic = pd.Categorical.from_codes(codes_monotonic, categories=categories)\r\n"]
[186.449823, "o", "\u001b[?2004l\r\n"]
[186.493575, "o", "\u001b[?2004h> \r\n"]
[186.537327, "o", "\u001b[?2004l\r\n"]
[186.58108, "o", "\u001b[?2004h> print(\"Detailed performance analysis...\")\r\n"]
[186.624832, "o", "\u001b[?2004l\r\n"]
[186.668584, "o", "\u001b[?2004h> print(f\"Data length: {len(data_non_monotonic)}\")\r\n"]
[186.712336, "o", "\u001b[?2004l\r\n"]
[186.756088, "o", "\u001b[?2004h> \r\n"]
[186.799841, "o", "\u001b[?2004l\r\n"]
[186.843593, "o", "\u001b[?2004h> # Test comparison operation only\r\n"]
[186.887345, "o", "\u001b[?2004l\r\n"]
[186.931097, "o", "\u001b[?2004h> print(\"\\n=== Comparison operation (==) ===\")\r\n"]
[186.97485, "o", "\u001b[?2004l\r\n"]
[187.018602, "o", "\u001b[?2004h> start = time.time()\r\n"]
[187.062354, "o", "\u001b[?2004l\r\n"]
[187.106106, "o", "\u001b[?2004h> mask_non_monotonic = data_non_monotonic == cat_scalar\r\n"]
[187.149858, "o", "\u001b[?2004l\r\n"]
[187.193611, "o", "\u001b[?2004h> end = time.time()\r\n"]
[187.237363, "o", "\u001b[?2004l\r\n"]
[187.281115, "o", "\u001b[?2004h> print(f\"Non-monotonic comparison: {(end - start) * 1000:.2f} ms\")\r\n"]
[187.324867, "o", "\u001b[?2004l\r\n"]
[187.368619, "o", "\u001b[?2004h> \r\n"]
[187.412372, "o", "\u001b[?2004l\r\n"]
[187.456124, "o", "\u001b[?2004h> start = time.time()\r\n"]
[187.499876, "o", "\u001b[?2004l\r\n"]
[187.543628, "o", "\u001b[?2004h> mask_monotonic = data_monotonic == cat_scalar\r\n"]
[187.587381, "o", "\u001b[?2004l\r\n"]
[187.631133, "o", "\u001b[?2004h> end = time.time()\r\n"]
[187.674885, "o", "\u001b[?2004l\r\n"]
[187.718637, "o", "\u001b[?2004h> print(f\"Monotonic comparison: {(end - start) * 1000:.2f} ms\")\r\n"]
[187.762389, "o", "\u001b[?2004l\r\n"]
[187.806142, "o", "\u001b[?2004h> \r\n"]
[187.849894, "o", "\u001b[?2004l\r\n"]
[187.893646, "o", "\u001b[?2004h> # Test indexing operation only (using pre-computed masks)\r\n"]
[187.937398, "o", "\u001b[?2004l\r\n"]
[187.98115, "o", "\u001b[?2004h> print(\"\\n=== Indexing operation ([]) ===\")\r\n"]
[188.024903, "o", "\u001b[?2004l\r\n"]
[188.068655, "o", "\u001b[?2004h> start = time.time()\r\n"]
[188.112407, "o", "\u001b[?2004l\r\n"]
[188.156159, "o", "\u001b[?2004h> result_non_monotonic = data_non_monotonic[mask_non_monotonic]\r\n"]
[188.199912, "o", "\u001b[?2004l\r\n"]
[188.243664, "o", "\u001b[?2004h> end = time.time()\r\n"]
[188.287416, "o", "\u001b[?2004l\r\n"]
[188.331168, "o", "\u001b[?2004h> print(f\"Non-monotonic indexing: {(end - start) * 1000:.2f} ms\")\r\n"]
[188.37492, "o", "\u001b[?2004l\r\n"]
[188.418673, "o", "\u001b[?2004h> \r\n"]
[188.462425, "o", "\u001b[?2004l\r\n"]
[188.506177, "o", "\u001b[?2004h> start = time.time()\r\n"]
[188.549929, "o", "\u001b[?2004l\r\n"]
[188.593681, "o", "\u001b[?2004h> result_monotonic = data_monotonic[mask_monotonic]\r\n"]
[188.637434, "o", "\u001b[?2004l\r\n"]
[188.681186, "o", "\u001b[?2004h> end = time.time()\r\n"]
[188.724938, "o", "\u001b[?2004l\r\n"]
[188.76869, "o", "\u001b[?2004h> print(f\"Monotonic indexing: {(end - start) * 1000:.2f} ms\")\r\n"]
[188.812442, "o", "\u001b[?2004l\r\n"]
[188.856195, "o", "\u001b[?2004h> \r\n"]
[188.899947, "o", "\u001b[?2004l\r\n"]
[188.943699, "o", "\u001b[?2004h> # Test complete operation\r\n"]
[188.987451, "o", "\u001b[?2004l\r\n"]
[189.031204, "o", "\u001b[?2004h> print(\"\\n=== Complete operation (== + []) ===\")\r\n"]
[189.074956, "o", "\u001b[?2004l\r\n"]
[189.118708, "o", "\u001b[?2004h> start = time.time()\r\n"]
[189.16246, "o", "\u001b[?2004l\r\n"]
[189.206212, "o", "\u001b[?2004h> result_non_monotonic = data_non_monotonic[data_non_monotonic == cat_scalar]\r\n"]
[189.249965, "o", "\u001b[?2004l\r\n"]
[189.293717, "o", "\u001b[?2004h> end = time.time()\r\n"]
[189.337469, "o", "\u001b[?2004l\r\n"]
[189.381221, "o", "\u001b[?2004h> print(f\"Non-monotonic total: {(end - start) * 1000:.2f} ms\")\r\n"]
[189.424973, "o", "\u001b[?2004l\r\n"]
[189.468726, "o", "\u001b[?2004h> \r\n"]
[189.512478, "o", "\u001b[?2004l\r\n"]
[189.55623, "o", "\u001b[?2004h> start = time.time()\r\n"]
[189.599982, "o", "\u001b[?2004l\r\n"]
[189.643735, "o", "\u001b[?2004h> result_monotonic = data_monotonic[data_monotonic == cat_scalar]\r\n"]
[189.687487, "o", "\u001b[?2004l\r\n"]
[189.731239, "o", "\u001b[?2004h> end = time.time()\r\n"]
[189.774991, "o", "\u001b[?2004l\r\n"]
[189.818743, "o", "\u001b[?2004h> print(f\"Monotonic total: {(end - start) * 1000:.2f} ms\")\r\n"]
[189.862496, "o", "\u001b[?2004l\r\n"]
[189.906248, "o", "\u001b[?2004h> EOF\r\n"]
[190.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[190.002, "i", "python test_categorical_detailed.py\r"]
[190.004, "o", "python test_categorical_detailed.py\r\n"]
[190.266211, "o", "\u001b[?2004l\r\n"]
[190.526421, "o", "+ /opt/conda/envs/asv_3.10/bin/ninja\r\n"]
[190.786632, "o", "\r\n"]
[191.046842, "o", "[0/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[191.307053, "o", "[1/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[191.567263, "o", "Detailed performance analysis...\r\n"]
[191.827474, "o", "Data length: 3000000\r\n"]
[192.087684, "o", "\r\n"]
[192.347895, "o", "=== Comparison operation (==) ===\r\n"]
[192.608105, "o", "Non-monotonic comparison: 0.97 ms\r\n"]
[192.868316, "o", "Monotonic comparison: 0.87 ms\r\n"]
[193.128526, "o", "\r\n"]
[193.388737, "o", "=== Indexing operation ([]) ===\r\n"]
[193.648947, "o", "Non-monotonic indexing: 8.73 ms\r\n"]
[193.909158, "o", "Monotonic indexing: 1.12 ms\r\n"]
[194.169368, "o", "\r\n"]
[194.429579, "o", "=== Complete operation (== + []) ===\r\n"]
[194.689789, "o", "Non-monotonic total: 9.63 ms\r\n"]
[195.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[195.002, "i", "cat > test_codes_analysis.py << 'EOF'\r"]
[195.004, "o", "cat > test_codes_analysis.py << 'EOF'\r\n"]
[195.062828, "o", "\u001b[?2004l\r\n"]
[195.119655, "o", "\u001b[?2004h> import numpy as np\r\n"]
[195.176483, "o", "\u001b[?2004l\r\n"]
[195.23331, "o", "\u001b[?2004h> import pandas as pd\r\n"]
[195.290138, "o", "\u001b[?2004l\r\n"]
[195.346966, "o", "\u001b[?2004h> import time\r\n"]
[195.403793, "o", "\u001b[?2004l\r\n"]
[195.460621, "o", "\u001b[?2004h> \r\n"]
[195.517448, "o", "\u001b[?2004l\r\n"]
[195.574276, "o", "\u001b[?2004h> # Reproduce the benchmark setup\r\n"]
[195.631103, "o", "\u001b[?2004l\r\n"]
[195.687931, "o", "\u001b[?2004h> N = 10**6\r\n"]
[195.744759, "o", "\u001b[?2004l\r\n"]
[195.801586, "o", "\u001b[?2004h> categories = [\"a\", \"b\", \"c\"]\r\n"]
[195.858414, "o", "\u001b[?2004l\r\n"]
[195.915241, "o", "\u001b[?2004h> \r\n"]
[195.972069, "o", "\u001b[?2004l\r\n"]
[196.028897, "o", "\u001b[?2004h> # Non-monotonic case\r\n"]
[196.085724, "o", "\u001b[?2004l\r\n"]
[196.142552, "o", "\u001b[?2004h> codes_non_monotonic = np.tile([0, 1, 2], N)\r\n"]
[196.199379, "o", "\u001b[?2004l\r\n"]
[196.256207, "o", "\u001b[?2004h> data_non_monotonic = pd.Categorical.from_codes(codes_non_monotonic, categories=categories)\r\n"]
[196.313034, "o", "\u001b[?2004l\r\n"]
[196.369862, "o", "\u001b[?2004h> \r\n"]
[196.42669, "o", "\u001b[?2004l\r\n"]
[196.483517, "o", "\u001b[?2004h> # Monotonic case\r\n"]
[196.540345, "o", "\u001b[?2004l\r\n"]
[196.597172, "o", "\u001b[?2004h> codes_monotonic = np.repeat([0, 1, 2], N)\r\n"]
[196.654, "o", "\u001b[?2004l\r\n"]
[196.710828, "o", "\u001b[?2004h> data_monotonic = pd.Categorical.from_codes(codes_monotonic, categories=categories)\r\n"]
[196.767655, "o", "\u001b[?2004l\r\n"]
[196.824483, "o", "\u001b[?2004h> \r\n"]
[196.88131, "o", "\u001b[?2004l\r\n"]
[196.938138, "o", "\u001b[?2004h> print(\"Analyzing underlying codes array...\")\r\n"]
[196.994966, "o", "\u001b[?2004l\r\n"]
[197.051793, "o", "\u001b[?2004h> print(f\"Non-monotonic codes pattern: {codes_non_monotonic[:12]}\")\r\n"]
[197.108621, "o", "\u001b[?2004l\r\n"]
[197.165448, "o", "\u001b[?2004h> print(f\"Monotonic codes pattern: {codes_monotonic[:12]}\")\r\n"]
[197.222276, "o", "\u001b[?2004l\r\n"]
[197.279103, "o", "\u001b[?2004h> \r\n"]
[197.335931, "o", "\u001b[?2004l\r\n"]
[197.392759, "o", "\u001b[?2004h> # Test indexing on the codes directly\r\n"]
[197.449586, "o", "\u001b[?2004l\r\n"]
[197.506414, "o", "\u001b[?2004h> cat_scalar = \"b\"  # This corresponds to code 1\r\n"]
[197.563241, "o", "\u001b[?2004l\r\n"]
[197.620069, "o", "\u001b[?2004h> mask_non_monotonic = data_non_monotonic == cat_scalar\r\n"]
[197.676897, "o", "\u001b[?2004l\r\n"]
[197.733724, "o", "\u001b[?2004h> mask_monotonic = data_monotonic == cat_scalar\r\n"]
[197.790552, "o", "\u001b[?2004l\r\n"]
[197.847379, "o", "\u001b[?2004h> \r\n"]
[197.904207, "o", "\u001b[?2004l\r\n"]
[197.961034, "o", "\u001b[?2004h> print(f\"\\nMask pattern (first 12 elements):\")\r\n"]
[198.017862, "o", "\u001b[?2004l\r\n"]
[198.07469, "o", "\u001b[?2004h> print(f\"Non-monotonic mask: {mask_non_monotonic[:12].values}\")\r\n"]
[198.131517, "o", "\u001b[?2004l\r\n"]
[198.188345, "o", "\u001b[?2004h> print(f\"Monotonic mask: {mask_monotonic[:12].values}\")\r\n"]
[198.245172, "o", "\u001b[?2004l\r\n"]
[198.302, "o", "\u001b[?2004h> \r\n"]
[198.358828, "o", "\u001b[?2004l\r\n"]
[198.415655, "o", "\u001b[?2004h> # Test direct numpy boolean indexing on codes\r\n"]
[198.472483, "o", "\u001b[?2004l\r\n"]
[198.52931, "o", "\u001b[?2004h> print(\"\\n=== Direct numpy indexing on codes ===\")\r\n"]
[198.586138, "o", "\u001b[?2004l\r\n"]
[198.642966, "o", "\u001b[?2004h> start = time.time()\r\n"]
[198.699793, "o", "\u001b[?2004l\r\n"]
[198.756621, "o", "\u001b[?2004h> result_codes_non_monotonic = codes_non_monotonic[mask_non_monotonic]\r\n"]
[198.813448, "o", "\u001b[?2004l\r\n"]
[198.870276, "o", "\u001b[?2004h> end = time.time()\r\n"]
[198.927103, "o", "\u001b[?2004l\r\n"]
[198.983931, "o", "\u001b[?2004h> print(f\"Non-monotonic codes indexing: {(end - start) * 1000:.2f} ms\")\r\n"]
[199.040759, "o", "\u001b[?2004l\r\n"]
[199.097586, "o", "\u001b[?2004h> \r\n"]
[199.154414, "o", "\u001b[?2004l\r\n"]
[199.211241, "o", "\u001b[?2004h> start = time.time()\r\n"]
[199.268069, "o", "\u001b[?2004l\r\n"]
[199.324897, "o", "\u001b[?2004h> result_codes_monotonic = codes_monotonic[mask_monotonic]\r\n"]
[199.381724, "o", "\u001b[?2004l\r\n"]
[199.438552, "o", "\u001b[?2004h> end = time.time()\r\n"]
[199.495379, "o", "\u001b[?2004l\r\n"]
[199.552207, "o", "\u001b[?2004h> print(f\"Monotonic codes indexing: {(end - start) * 1000:.2f} ms\")\r\n"]
[199.609034, "o", "\u001b[?2004l\r\n"]
[199.665862, "o", "\u001b[?2004h> \r\n"]
[199.72269, "o", "\u001b[?2004l\r\n"]
[199.779517, "o", "\u001b[?2004h> print(f\"\\nResult lengths: non-monotonic={len(result_codes_non_monotonic)}, monotonic={len(result_codes_monotonic)}\")\r\n"]
[199.836345, "o", "\u001b[?2004l\r\n"]
[199.893172, "o", "\u001b[?2004h> EOF\r\n"]
[200.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[200.002, "i", "python test_codes_analysis.py\r"]
[200.004, "o", "python test_codes_analysis.py\r\n"]
[200.359143, "o", "\u001b[?2004l\r\n"]
[200.712286, "o", "+ /opt/conda/envs/asv_3.10/bin/ninja\r\n"]
[201.065429, "o", "\r\n"]
[201.418571, "o", "[0/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[201.771714, "o", "[1/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[202.124857, "o", "Analyzing underlying codes array...\r\n"]
[202.478, "o", "Non-monotonic codes pattern: [0 1 2 0 1 2 0 1 2 0 1 2]\r\n"]
[202.831143, "o", "Monotonic codes pattern: [0 0 0 0 0 0 0 0 0 0 0 0]\r\n"]
[203.184286, "o", "\r\n"]
[203.537429, "o", "Mask pattern (first 12 elements):\r\n"]
[203.890571, "o", "Traceback (most recent call last):\r\n"]
[204.243714, "o", "  File \"/workspace/repo/test_codes_analysis.py\", line 27, in <module>\r\n"]
[204.596857, "o", "    print(f\"Non-monotonic mask: {mask_non_monotonic[:12].values}\")\r\n"]
[205.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[205.002, "i", "sed -i 's/mask_non_monotonic\\[:12\\]\\.values/mask_non_monotonic[:12]/' test_codes_analysis.py\r"]
[205.004, "o", "sed -i 's/mask_non_monotonic\\[:12\\]\\.values/mask_non_monotonic[:12]/' test_codes_analysis.py\r\n"]
[205.006, "o", "\u001b[?2004l\r\n"]
[210.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[210.002, "i", "sed -i 's/mask_monotonic\\[:12\\]\\.values/mask_monotonic[:12]/' test_codes_analysis.py\r"]
[210.004, "o", "sed -i 's/mask_monotonic\\[:12\\]\\.values/mask_monotonic[:12]/' test_codes_analysis.py\r\n"]
[210.006, "o", "\u001b[?2004l\r\n"]
[215.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[215.002, "i", "python test_codes_analysis.py\r"]
[215.004, "o", "python test_codes_analysis.py\r\n"]
[215.280667, "o", "\u001b[?2004l\r\n"]
[215.555333, "o", "+ /opt/conda/envs/asv_3.10/bin/ninja\r\n"]
[215.83, "o", "\r\n"]
[216.104667, "o", "[0/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[216.379333, "o", "[1/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[216.654, "o", "Analyzing underlying codes array...\r\n"]
[216.928667, "o", "Non-monotonic codes pattern: [0 1 2 0 1 2 0 1 2 0 1 2]\r\n"]
[217.203333, "o", "Monotonic codes pattern: [0 0 0 0 0 0 0 0 0 0 0 0]\r\n"]
[217.478, "o", "\r\n"]
[217.752667, "o", "Mask pattern (first 12 elements):\r\n"]
[218.027333, "o", "Non-monotonic mask: [False  True False False  True False False  True False False  True False]\r\n"]
[218.302, "o", "Monotonic mask: [False False False False False False False False False False False False]\r\n"]
[218.576667, "o", "\r\n"]
[218.851333, "o", "=== Direct numpy indexing on codes ===\r\n"]
[219.126, "o", "Non-monotonic codes indexing: 8.88 ms\r\n"]
[219.400667, "o", "Monotonic codes indexing: 2.70 ms\r\n"]
[219.675333, "o", "\r\n"]
[220.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[220.002, "i", "cat > test_optimization_ideas.py << 'EOF'\r"]
[220.004, "o", "cat > test_optimization_ideas.py << 'EOF'\r\n"]
[220.055939, "o", "\u001b[?2004l\r\n"]
[220.105879, "o", "\u001b[?2004h> import numpy as np\r\n"]
[220.155818, "o", "\u001b[?2004l\r\n"]
[220.205758, "o", "\u001b[?2004h> import pandas as pd\r\n"]
[220.255697, "o", "\u001b[?2004l\r\n"]
[220.305636, "o", "\u001b[?2004h> import time\r\n"]
[220.355576, "o", "\u001b[?2004l\r\n"]
[220.405515, "o", "\u001b[?2004h> \r\n"]
[220.455455, "o", "\u001b[?2004l\r\n"]
[220.505394, "o", "\u001b[?2004h> # Test different optimization approaches\r\n"]
[220.555333, "o", "\u001b[?2004l\r\n"]
[220.605273, "o", "\u001b[?2004h> N = 10**6\r\n"]
[220.655212, "o", "\u001b[?2004l\r\n"]
[220.705152, "o", "\u001b[?2004h> categories = [\"a\", \"b\", \"c\"]\r\n"]
[220.755091, "o", "\u001b[?2004l\r\n"]
[220.80503, "o", "\u001b[?2004h> cat_scalar = \"b\"  # code = 1\r\n"]
[220.85497, "o", "\u001b[?2004l\r\n"]
[220.904909, "o", "\u001b[?2004h> \r\n"]
[220.954848, "o", "\u001b[?2004l\r\n"]
[221.004788, "o", "\u001b[?2004h> # Non-monotonic case (worst performance)\r\n"]
[221.054727, "o", "\u001b[?2004l\r\n"]
[221.104667, "o", "\u001b[?2004h> codes_non_monotonic = np.tile([0, 1, 2], N)\r\n"]
[221.154606, "o", "\u001b[?2004l\r\n"]
[221.204545, "o", "\u001b[?2004h> data_non_monotonic = pd.Categorical.from_codes(codes_non_monotonic, categories=categories)\r\n"]
[221.254485, "o", "\u001b[?2004l\r\n"]
[221.304424, "o", "\u001b[?2004h> \r\n"]
[221.354364, "o", "\u001b[?2004l\r\n"]
[221.404303, "o", "\u001b[?2004h> print(\"Testing optimization approaches...\")\r\n"]
[221.454242, "o", "\u001b[?2004l\r\n"]
[221.504182, "o", "\u001b[?2004h> \r\n"]
[221.554121, "o", "\u001b[?2004l\r\n"]
[221.604061, "o", "\u001b[?2004h> # Current approach (baseline)\r\n"]
[221.654, "o", "\u001b[?2004l\r\n"]
[221.703939, "o", "\u001b[?2004h> print(\"\\n=== Current approach (baseline) ===\")\r\n"]
[221.753879, "o", "\u001b[?2004l\r\n"]
[221.803818, "o", "\u001b[?2004h> start = time.time()\r\n"]
[221.853758, "o", "\u001b[?2004l\r\n"]
[221.903697, "o", "\u001b[?2004h> result_current = data_non_monotonic[data_non_monotonic == cat_scalar]\r\n"]
[221.953636, "o", "\u001b[?2004l\r\n"]
[222.003576, "o", "\u001b[?2004h> end = time.time()\r\n"]
[222.053515, "o", "\u001b[?2004l\r\n"]
[222.103455, "o", "\u001b[?2004h> print(f\"Current approach: {(end - start) * 1000:.2f} ms\")\r\n"]
[222.153394, "o", "\u001b[?2004l\r\n"]
[222.203333, "o", "\u001b[?2004h> print(f\"Result length: {len(result_current)}\")\r\n"]
[222.253273, "o", "\u001b[?2004l\r\n"]
[222.303212, "o", "\u001b[?2004h> \r\n"]
[222.353152, "o", "\u001b[?2004l\r\n"]
[222.403091, "o", "\u001b[?2004h> # Optimization idea 1: Use codes directly for comparison\r\n"]
[222.45303, "o", "\u001b[?2004l\r\n"]
[222.50297, "o", "\u001b[?2004h> print(\"\\n=== Optimization 1: Direct codes comparison ===\")\r\n"]
[222.552909, "o", "\u001b[?2004l\r\n"]
[222.602848, "o", "\u001b[?2004h> start = time.time()\r\n"]
[222.652788, "o", "\u001b[?2004l\r\n"]
[222.702727, "o", "\u001b[?2004h> cat_code = data_non_monotonic.categories.get_loc(cat_scalar)\r\n"]
[222.752667, "o", "\u001b[?2004l\r\n"]
[222.802606, "o", "\u001b[?2004h> mask = data_non_monotonic.codes == cat_code\r\n"]
[222.852545, "o", "\u001b[?2004l\r\n"]
[222.902485, "o", "\u001b[?2004h> result_opt1 = data_non_monotonic[mask]\r\n"]
[222.952424, "o", "\u001b[?2004l\r\n"]
[223.002364, "o", "\u001b[?2004h> end = time.time()\r\n"]
[223.052303, "o", "\u001b[?2004l\r\n"]
[223.102242, "o", "\u001b[?2004h> print(f\"Direct codes comparison: {(end - start) * 1000:.2f} ms\")\r\n"]
[223.152182, "o", "\u001b[?2004l\r\n"]
[223.202121, "o", "\u001b[?2004h> print(f\"Result length: {len(result_opt1)}\")\r\n"]
[223.252061, "o", "\u001b[?2004l\r\n"]
[223.302, "o", "\u001b[?2004h> \r\n"]
[223.351939, "o", "\u001b[?2004l\r\n"]
[223.401879, "o", "\u001b[?2004h> # Optimization idea 2: Use numpy.where to get indices\r\n"]
[223.451818, "o", "\u001b[?2004l\r\n"]
[223.501758, "o", "\u001b[?2004h> print(\"\\n=== Optimization 2: Using numpy.where ===\")\r\n"]
[223.551697, "o", "\u001b[?2004l\r\n"]
[223.601636, "o", "\u001b[?2004h> start = time.time()\r\n"]
[223.651576, "o", "\u001b[?2004l\r\n"]
[223.701515, "o", "\u001b[?2004h> cat_code = data_non_monotonic.categories.get_loc(cat_scalar)\r\n"]
[223.751455, "o", "\u001b[?2004l\r\n"]
[223.801394, "o", "\u001b[?2004h> indices = np.where(data_non_monotonic.codes == cat_code)[0]\r\n"]
[223.851333, "o", "\u001b[?2004l\r\n"]
[223.901273, "o", "\u001b[?2004h> result_codes = data_non_monotonic.codes[indices]\r\n"]
[223.951212, "o", "\u001b[?2004l\r\n"]
[224.001152, "o", "\u001b[?2004h> result_opt2 = pd.Categorical.from_codes(result_codes, categories=categories)\r\n"]
[224.051091, "o", "\u001b[?2004l\r\n"]
[224.10103, "o", "\u001b[?2004h> end = time.time()\r\n"]
[224.15097, "o", "\u001b[?2004l\r\n"]
[224.200909, "o", "\u001b[?2004h> print(f\"Numpy.where approach: {(end - start) * 1000:.2f} ms\")\r\n"]
[224.250848, "o", "\u001b[?2004l\r\n"]
[224.300788, "o", "\u001b[?2004h> print(f\"Result length: {len(result_opt2)}\")\r\n"]
[224.350727, "o", "\u001b[?2004l\r\n"]
[224.400667, "o", "\u001b[?2004h> \r\n"]
[224.450606, "o", "\u001b[?2004l\r\n"]
[224.500545, "o", "\u001b[?2004h> # Verify results are the same\r\n"]
[224.550485, "o", "\u001b[?2004l\r\n"]
[224.600424, "o", "\u001b[?2004h> print(\"\\n=== Verification ===\")\r\n"]
[224.650364, "o", "\u001b[?2004l\r\n"]
[224.700303, "o", "\u001b[?2004h> print(f\"Current == Opt1: {(result_current == result_opt1).all()}\")\r\n"]
[224.750242, "o", "\u001b[?2004l\r\n"]
[224.800182, "o", "\u001b[?2004h> print(f\"Current == Opt2: {(result_current == result_opt2).all()}\")\r\n"]
[224.850121, "o", "\u001b[?2004l\r\n"]
[224.900061, "o", "\u001b[?2004h> EOF\r\n"]
[225.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[225.002, "i", "python test_optimization_ideas.py\r"]
[225.004, "o", "python test_optimization_ideas.py\r\n"]
[225.230727, "o", "\u001b[?2004l\r\n"]
[225.455455, "o", "+ /opt/conda/envs/asv_3.10/bin/ninja\r\n"]
[225.680182, "o", "\r\n"]
[225.904909, "o", "[0/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[226.129636, "o", "[1/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[226.354364, "o", "Testing optimization approaches...\r\n"]
[226.579091, "o", "\r\n"]
[226.803818, "o", "=== Current approach (baseline) ===\r\n"]
[227.028545, "o", "Current approach: 9.69 ms\r\n"]
[227.253273, "o", "Result length: 1000000\r\n"]
[227.478, "o", "\r\n"]
[227.702727, "o", "=== Optimization 1: Direct codes comparison ===\r\n"]
[227.927455, "o", "Direct codes comparison: 9.23 ms\r\n"]
[228.152182, "o", "Result length: 1000000\r\n"]
[228.376909, "o", "\r\n"]
[228.601636, "o", "=== Optimization 2: Using numpy.where ===\r\n"]
[228.826364, "o", "Numpy.where approach: 4.52 ms\r\n"]
[229.051091, "o", "Result length: 1000000\r\n"]
[229.275818, "o", "\r\n"]
[229.500545, "o", "=== Verification ===\r\n"]
[229.725273, "o", "Current == Opt1: True\r\n"]
[230.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[230.002, "i", "grep -n \"def __getitem__\" pandas/core/arrays/_mixins.py -A 20\r"]
[230.004, "o", "grep -n \"def __getitem__\" pandas/core/arrays/_mixins.py -A 20\r\n"]
[230.1708, "o", "\u001b[?2004l\r\n"]
[230.3356, "o", "\u001b[32m\u001b[K269\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef __getitem__\u001b[m\u001b[K(self, key: ScalarIndexer) -> Any: ...\r\n"]
[230.5004, "o", "\u001b[32m\u001b[K270\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K\r\n"]
[230.6652, "o", "\u001b[32m\u001b[K271\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K    @overload\r\n"]
[230.83, "o", "\u001b[32m\u001b[K272\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef __getitem__\u001b[m\u001b[K(\r\n"]
[230.9948, "o", "\u001b[32m\u001b[K273\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K        self,\r\n"]
[231.1596, "o", "\u001b[32m\u001b[K274\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K        key: SequenceIndexer | PositionalIndexerTuple,\r\n"]
[231.3244, "o", "\u001b[32m\u001b[K275\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K    ) -> Self: ...\r\n"]
[231.4892, "o", "\u001b[32m\u001b[K276\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K\r\n"]
[231.654, "o", "\u001b[32m\u001b[K277\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef __getitem__\u001b[m\u001b[K(\r\n"]
[231.8188, "o", "\u001b[32m\u001b[K278\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K        self,\r\n"]
[231.9836, "o", "\u001b[32m\u001b[K279\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K        key: PositionalIndexer2D,\r\n"]
[232.1484, "o", "\u001b[32m\u001b[K280\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K    ) -> Self | Any:\r\n"]
[232.3132, "o", "\u001b[32m\u001b[K281\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K        if lib.is_integer(key):\r\n"]
[232.478, "o", "\u001b[32m\u001b[K282\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K            # fast-path\r\n"]
[232.6428, "o", "\u001b[32m\u001b[K283\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K            result = self._ndarray[key]\r\n"]
[232.8076, "o", "\u001b[32m\u001b[K284\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K            if self.ndim == 1:\r\n"]
[232.9724, "o", "\u001b[32m\u001b[K285\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K                return self._box_func(result)\r\n"]
[233.1372, "o", "\u001b[32m\u001b[K286\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K            return self._from_backing_data(result)\r\n"]
[233.302, "o", "\u001b[32m\u001b[K287\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K\r\n"]
[233.4668, "o", "\u001b[32m\u001b[K288\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K        # error: Incompatible types in assignment (expression has type \"ExtensionArray\",\r\n"]
[233.6316, "o", "\u001b[32m\u001b[K289\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K        # variable has type \"Union[int, slice, ndarray]\")\r\n"]
[233.7964, "o", "\u001b[32m\u001b[K290\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K        key = extract_array(key, extract_numpy=True)  # type: ignore[assignment]\r\n"]
[233.9612, "o", "\u001b[32m\u001b[K291\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K        key = check_array_indexer(self, key)\r\n"]
[234.126, "o", "\u001b[32m\u001b[K292\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K        result = self._ndarray[key]\r\n"]
[234.2908, "o", "\u001b[32m\u001b[K293\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K        if lib.is_scalar(result):\r\n"]
[234.4556, "o", "\u001b[32m\u001b[K294\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K            return self._box_func(result)\r\n"]
[234.6204, "o", "\u001b[32m\u001b[K295\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K\r\n"]
[234.7852, "o", "\u001b[32m\u001b[K296\u001b[m\u001b[K\u001b[36m\u001b[K-\u001b[m\u001b[K        result = self._from_backing_data(result)\r\n"]
[235.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[235.002, "i", "grep -n \"def __getitem__\" pandas/core/arrays/categorical.py\r"]
[235.004, "o", "grep -n \"def __getitem__\" pandas/core/arrays/categorical.py\r\n"]
[235.006, "o", "\u001b[?2004l\r\n"]
[240.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[240.002, "i", "grep -n \"def \" pandas/core/arrays/categorical.py | tail -10\r"]
[240.004, "o", "grep -n \"def \" pandas/core/arrays/categorical.py | tail -10\r\n"]
[240.455455, "o", "\u001b[?2004l\r\n"]
[240.904909, "o", "2945:    def _validate(data) -> None:\r\n"]
[241.354364, "o", "2949:    def _delegate_property_get(self, name: str):\r\n"]
[241.803818, "o", "2954:    def _delegate_property_set(self, name: str, new_values) -> None:  # type: ignore[override]\r\n"]
[242.253273, "o", "2958:    def codes(self) -> Series:\r\n"]
[242.702727, "o", "2977:    def _delegate_method(self, name: str, *args, **kwargs):\r\n"]
[243.152182, "o", "2989:def _get_codes_for_values(\r\n"]
[243.601636, "o", "3002:def recode_for_categories(\r\n"]
[244.051091, "o", "3045:def factorize_from_iterable(values) -> tuple[np.ndarray, Index]:\r\n"]
[244.500545, "o", "3072:        # as values but its codes are by def [0, ..., len(n_categories) - 1]\r\n"]
[245.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[245.002, "i", "grep -n \"def __\" pandas/core/arrays/categorical.py\r"]
[245.004, "o", "grep -n \"def __\" pandas/core/arrays/categorical.py\r\n"]
[245.555333, "o", "\u001b[?2004l\r\n"]
[246.104667, "o", "\u001b[32m\u001b[K386\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef __\u001b[m\u001b[Kinit__(\r\n"]
[246.654, "o", "\u001b[32m\u001b[K1638\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef __\u001b[m\u001b[Karray__(\r\n"]
[247.203333, "o", "\u001b[32m\u001b[K1677\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef __\u001b[m\u001b[Karray_ufunc__(self, ufunc: np.ufunc, method: str, *inputs, **kwargs):\r\n"]
[247.752667, "o", "\u001b[32m\u001b[K1706\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef __\u001b[m\u001b[Ksetstate__(self, state) -> None:\r\n"]
[248.302, "o", "\u001b[32m\u001b[K2166\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef __\u001b[m\u001b[Kiter__(self) -> Iterator:\r\n"]
[248.851333, "o", "\u001b[32m\u001b[K2175\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef __\u001b[m\u001b[Kcontains__(self, key) -> bool:\r\n"]
[249.400667, "o", "\u001b[32m\u001b[K2268\u001b[m\u001b[K\u001b[36m\u001b[K:\u001b[m\u001b[K    \u001b[01;31m\u001b[Kdef __\u001b[m\u001b[Krepr__(self) -> str:\r\n"]
[250.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[250.002, "i", "cp pandas/core/arrays/categorical.py pandas/core/arrays/categorical.py.backup\r"]
[250.004, "o", "cp pandas/core/arrays/categorical.py pandas/core/arrays/categorical.py.backup\r\n"]
[250.006, "o", "\u001b[?2004l\r\n"]
[255.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[255.002, "i", "sed -n '2175,2185p' pandas/core/arrays/categorical.py\r"]
[255.004, "o", "sed -n '2175,2185p' pandas/core/arrays/categorical.py\r\n"]
[255.418, "o", "\u001b[?2004l\r\n"]
[255.83, "o", "    def __contains__(self, key) -> bool:\r\n"]
[256.242, "o", "        \"\"\"\r\n"]
[256.654, "o", "        Returns True if `key` is in this Categorical.\r\n"]
[257.066, "o", "        \"\"\"\r\n"]
[257.478, "o", "        # if key is a NaN, check if any NaN is in self.\r\n"]
[257.89, "o", "        if is_valid_na_for_dtype(key, self.categories.dtype):\r\n"]
[258.302, "o", "            return bool(self.isna().any())\r\n"]
[258.714, "o", "\r\n"]
[259.126, "o", "        return contains(self, key, container=self._codes)\r\n"]
[259.538, "o", "\r\n"]
[260.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[260.002, "i", "cat > getitem_patch.py << 'EOF'\r"]
[260.004, "o", "cat > getitem_patch.py << 'EOF'\r\n"]
[260.044326, "o", "\u001b[?2004l\r\n"]
[260.082651, "o", "\u001b[?2004h> import sys\r\n"]
[260.120977, "o", "\u001b[?2004l\r\n"]
[260.159302, "o", "\u001b[?2004h> \r\n"]
[260.197628, "o", "\u001b[?2004l\r\n"]
[260.235953, "o", "\u001b[?2004h> # Read the file\r\n"]
[260.274279, "o", "\u001b[?2004l\r\n"]
[260.312605, "o", "\u001b[?2004h> with open('pandas/core/arrays/categorical.py', 'r') as f:\r\n"]
[260.35093, "o", "\u001b[?2004l\r\n"]
[260.389256, "o", "\u001b[?2004h>     lines = f.readlines()\r\n"]
[260.427581, "o", "\u001b[?2004l\r\n"]
[260.465907, "o", "\u001b[?2004h> \r\n"]
[260.504233, "o", "\u001b[?2004l\r\n"]
[260.542558, "o", "\u001b[?2004h> # Find the line after __contains__ method\r\n"]
[260.580884, "o", "\u001b[?2004l\r\n"]
[260.619209, "o", "\u001b[?2004h> insert_line = None\r\n"]
[260.657535, "o", "\u001b[?2004l\r\n"]
[260.69586, "o", "\u001b[?2004h> for i, line in enumerate(lines):\r\n"]
[260.734186, "o", "\u001b[?2004l\r\n"]
[260.772512, "o", "\u001b[?2004h>     if line.strip() == '# ------------------------------------------------------------------' and i > 2170:\r\n"]
[260.810837, "o", "\u001b[?2004l\r\n"]
[260.849163, "o", "\u001b[?2004h>         insert_line = i\r\n"]
[260.887488, "o", "\u001b[?2004l\r\n"]
[260.925814, "o", "\u001b[?2004h>         break\r\n"]
[260.96414, "o", "\u001b[?2004l\r\n"]
[261.002465, "o", "\u001b[?2004h> \r\n"]
[261.040791, "o", "\u001b[?2004l\r\n"]
[261.079116, "o", "\u001b[?2004h> if insert_line is None:\r\n"]
[261.117442, "o", "\u001b[?2004l\r\n"]
[261.155767, "o", "\u001b[?2004h>     print(\"Could not find insertion point\")\r\n"]
[261.194093, "o", "\u001b[?2004l\r\n"]
[261.232419, "o", "\u001b[?2004h>     sys.exit(1)\r\n"]
[261.270744, "o", "\u001b[?2004l\r\n"]
[261.30907, "o", "\u001b[?2004h> \r\n"]
[261.347395, "o", "\u001b[?2004l\r\n"]
[261.385721, "o", "\u001b[?2004h> # Create the new __getitem__ method\r\n"]
[261.424047, "o", "\u001b[?2004l\r\n"]
[261.462372, "o", "\u001b[?2004h> new_method = '''    def __getitem__(self, key):\r\n"]
[261.500698, "o", "\u001b[?2004l\r\n"]
[261.539023, "o", "\u001b[?2004h>         \"\"\"\r\n"]
[261.577349, "o", "\u001b[?2004l\r\n"]
[261.615674, "o", "\u001b[?2004h>         Optimized indexing for Categorical arrays.\r\n"]
[261.654, "o", "\u001b[?2004l\r\n"]
[261.692326, "o", "\u001b[?2004h>         \r\n"]
[261.730651, "o", "\u001b[?2004l\r\n"]
[261.768977, "o", "\u001b[?2004h>         Uses numpy.where for boolean array indexing to improve performance\r\n"]
[261.807302, "o", "\u001b[?2004l\r\n"]
[261.845628, "o", "\u001b[?2004h>         for non-monotonic data patterns.\r\n"]
[261.883953, "o", "\u001b[?2004l\r\n"]
[261.922279, "o", "\u001b[?2004h>         \"\"\"\r\n"]
[261.960605, "o", "\u001b[?2004l\r\n"]
[261.99893, "o", "\u001b[?2004h>         from pandas.core.dtypes.common import is_bool_dtype\r\n"]
[262.037256, "o", "\u001b[?2004l\r\n"]
[262.075581, "o", "\u001b[?2004h>         from pandas.core.indexers.utils import check_array_indexer\r\n"]
[262.113907, "o", "\u001b[?2004l\r\n"]
[262.152233, "o", "\u001b[?2004h>         from pandas._libs import lib\r\n"]
[262.190558, "o", "\u001b[?2004l\r\n"]
[262.228884, "o", "\u001b[?2004h>         from pandas.core.construction import extract_array\r\n"]
[262.267209, "o", "\u001b[?2004l\r\n"]
[262.305535, "o", "\u001b[?2004h>         \r\n"]
[262.34386, "o", "\u001b[?2004l\r\n"]
[262.382186, "o", "\u001b[?2004h>         if lib.is_integer(key):\r\n"]
[262.420512, "o", "\u001b[?2004l\r\n"]
[262.458837, "o", "\u001b[?2004h>             # fast-path for scalar indexing\r\n"]
[262.497163, "o", "\u001b[?2004l\r\n"]
[262.535488, "o", "\u001b[?2004h>             return super().__getitem__(key)\r\n"]
[262.573814, "o", "\u001b[?2004l\r\n"]
[262.61214, "o", "\u001b[?2004h>             \r\n"]
[262.650465, "o", "\u001b[?2004l\r\n"]
[262.688791, "o", "\u001b[?2004h>         # Handle array-like indexing\r\n"]
[262.727116, "o", "\u001b[?2004l\r\n"]
[262.765442, "o", "\u001b[?2004h>         if hasattr(key, '__len__') and len(key) > 0:\r\n"]
[262.803767, "o", "\u001b[?2004l\r\n"]
[262.842093, "o", "\u001b[?2004h>             key = extract_array(key, extract_numpy=True)\r\n"]
[262.880419, "o", "\u001b[?2004l\r\n"]
[262.918744, "o", "\u001b[?2004h>             key = check_array_indexer(self, key)\r\n"]
[262.95707, "o", "\u001b[?2004l\r\n"]
[262.995395, "o", "\u001b[?2004h>             \r\n"]
[263.033721, "o", "\u001b[?2004l\r\n"]
[263.072047, "o", "\u001b[?2004h>             # Optimization: use numpy.where for boolean array indexing\r\n"]
[263.110372, "o", "\u001b[?2004l\r\n"]
[263.148698, "o", "\u001b[?2004h>             if is_bool_dtype(key):\r\n"]
[263.187023, "o", "\u001b[?2004l\r\n"]
[263.225349, "o", "\u001b[?2004h>                 import numpy as np\r\n"]
[263.263674, "o", "\u001b[?2004l\r\n"]
[263.302, "o", "\u001b[?2004h>                 indices = np.where(key)[0]\r\n"]
[263.340326, "o", "\u001b[?2004l\r\n"]
[263.378651, "o", "\u001b[?2004h>                 if len(indices) > 0:\r\n"]
[263.416977, "o", "\u001b[?2004l\r\n"]
[263.455302, "o", "\u001b[?2004h>                     result_codes = self._codes[indices]\r\n"]
[263.493628, "o", "\u001b[?2004l\r\n"]
[263.531953, "o", "\u001b[?2004h>                     return self._from_backing_data(result_codes)\r\n"]
[263.570279, "o", "\u001b[?2004l\r\n"]
[263.608605, "o", "\u001b[?2004h>                 else:\r\n"]
[263.64693, "o", "\u001b[?2004l\r\n"]
[263.685256, "o", "\u001b[?2004h>                     # Empty result\r\n"]
[263.723581, "o", "\u001b[?2004l\r\n"]
[263.761907, "o", "\u001b[?2004h>                     return self._from_backing_data(np.array([], dtype=self._codes.dtype))\r\n"]
[263.800233, "o", "\u001b[?2004l\r\n"]
[263.838558, "o", "\u001b[?2004h>         \r\n"]
[263.876884, "o", "\u001b[?2004l\r\n"]
[263.915209, "o", "\u001b[?2004h>         # Fall back to parent implementation for other cases\r\n"]
[263.953535, "o", "\u001b[?2004l\r\n"]
[263.99186, "o", "\u001b[?2004h>         return super().__getitem__(key)\r\n"]
[264.030186, "o", "\u001b[?2004l\r\n"]
[264.068512, "o", "\u001b[?2004h> \r\n"]
[264.106837, "o", "\u001b[?2004l\r\n"]
[264.145163, "o", "\u001b[?2004h> '''\r\n"]
[264.183488, "o", "\u001b[?2004l\r\n"]
[264.221814, "o", "\u001b[?2004h> \r\n"]
[264.26014, "o", "\u001b[?2004l\r\n"]
[264.298465, "o", "\u001b[?2004h> # Insert the new method\r\n"]
[264.336791, "o", "\u001b[?2004l\r\n"]
[264.375116, "o", "\u001b[?2004h> lines.insert(insert_line, new_method)\r\n"]
[264.413442, "o", "\u001b[?2004l\r\n"]
[264.451767, "o", "\u001b[?2004h> \r\n"]
[264.490093, "o", "\u001b[?2004l\r\n"]
[264.528419, "o", "\u001b[?2004h> # Write back to file\r\n"]
[264.566744, "o", "\u001b[?2004l\r\n"]
[264.60507, "o", "\u001b[?2004h> with open('pandas/core/arrays/categorical.py', 'w') as f:\r\n"]
[264.643395, "o", "\u001b[?2004l\r\n"]
[264.681721, "o", "\u001b[?2004h>     f.writelines(lines)\r\n"]
[264.720047, "o", "\u001b[?2004l\r\n"]
[264.758372, "o", "\u001b[?2004h> \r\n"]
[264.796698, "o", "\u001b[?2004l\r\n"]
[264.835023, "o", "\u001b[?2004h> print(f\"Added __getitem__ method at line {insert_line}\")\r\n"]
[264.873349, "o", "\u001b[?2004l\r\n"]
[264.911674, "o", "\u001b[?2004h> EOF\r\n"]
[265.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[265.002, "i", "python getitem_patch.py\r"]
[265.004, "o", "python getitem_patch.py\r\n"]
[267.478, "o", "\u001b[?2004l\r\n"]
[270.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[270.002, "i", "python test_categorical_detailed.py\r"]
[270.004, "o", "python test_categorical_detailed.py\r\n"]
[270.266211, "o", "\u001b[?2004l\r\n"]
[270.526421, "o", "+ /opt/conda/envs/asv_3.10/bin/ninja\r\n"]
[270.786632, "o", "\r\n"]
[271.046842, "o", "[0/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[271.307053, "o", "[1/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[271.567263, "o", "Detailed performance analysis...\r\n"]
[271.827474, "o", "Data length: 3000000\r\n"]
[272.087684, "o", "\r\n"]
[272.347895, "o", "=== Comparison operation (==) ===\r\n"]
[272.608105, "o", "Non-monotonic comparison: 1.00 ms\r\n"]
[272.868316, "o", "Monotonic comparison: 0.87 ms\r\n"]
[273.128526, "o", "\r\n"]
[273.388737, "o", "=== Indexing operation ([]) ===\r\n"]
[273.648947, "o", "Non-monotonic indexing: 3.76 ms\r\n"]
[273.909158, "o", "Monotonic indexing: 3.41 ms\r\n"]
[274.169368, "o", "\r\n"]
[274.429579, "o", "=== Complete operation (== + []) ===\r\n"]
[274.689789, "o", "Non-monotonic total: 3.70 ms\r\n"]
[275.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[275.002, "i", "cd asv_bench\r"]
[275.004, "o", "cd asv_bench\r\n"]
[275.006, "o", "\u001b[?2004l\r\n"]
[280.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo/asv_bench# "]
[280.002, "i", "asv run --python=same --bench=\"categoricals.CategoricalSlicing.*\"\r"]
[280.004, "o", "asv run --python=same --bench=\"categoricals.CategoricalSlicing.*\"\r\n"]
[280.10488, "o", "\u001b[?2004l\r\n"]
[280.20376, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[280.30264, "o", "\u00b7 \u001b[0;32mRunning 5 total benchmarks (1 commits * 1 environments * 5 benchmarks)\u001b[0m\r\n"]
[280.40152, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.10_bin_python3.10\u001b[0m\r\n"]
[280.5004, "o", "[10.00%] \u00b7\u00b7\u00b7 \u001b[0;39mRunning (categoricals.CategoricalSlicing.time_getitem_bool_array--)\u001b[0m.....\r\n"]
[280.59928, "o", "[60.00%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.CategoricalSlicing.time_getitem_bool_array\u001b[0m                                                                                         ok\r\n"]
[280.69816, "o", "[60.00%] \u00b7\u00b7\u00b7 \u001b[0;39m================ =============\u001b[0m\r\n"]
[280.79704, "o", "                  index                    \r\n"]
[280.89592, "o", "             ---------------- -------------\r\n"]
[280.9948, "o", "              monotonic_incr   2.40\u00b10.01ms \r\n"]
[281.09368, "o", "              monotonic_decr   2.39\u00b10.02ms \r\n"]
[281.19256, "o", "              non_monotonic    2.80\u00b10.02ms \r\n"]
[281.29144, "o", "             ================ =============\r\n"]
[281.39032, "o", "\r\n"]
[281.4892, "o", "[70.00%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.CategoricalSlicing.time_getitem_list\u001b[0m                                                                                               ok\r\n"]
[281.58808, "o", "[70.00%] \u00b7\u00b7\u00b7 \u001b[0;39m================ =============\u001b[0m\r\n"]
[281.68696, "o", "                  index                    \r\n"]
[281.78584, "o", "             ---------------- -------------\r\n"]
[281.88472, "o", "              monotonic_incr   1.80\u00b10.01ms \r\n"]
[281.9836, "o", "              monotonic_decr   1.81\u00b10.01ms \r\n"]
[282.08248, "o", "              non_monotonic    1.81\u00b10.01ms \r\n"]
[282.18136, "o", "             ================ =============\r\n"]
[282.28024, "o", "\r\n"]
[282.37912, "o", "[80.00%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.CategoricalSlicing.time_getitem_list_like\u001b[0m                                                                                          ok\r\n"]
[282.478, "o", "[80.00%] \u00b7\u00b7\u00b7 \u001b[0;39m================ ============\u001b[0m\r\n"]
[282.57688, "o", "                  index                   \r\n"]
[282.67576, "o", "             ---------------- ------------\r\n"]
[282.77464, "o", "              monotonic_incr   53.8\u00b10.8\u03bcs \r\n"]
[282.87352, "o", "              monotonic_decr   52.5\u00b10.3\u03bcs \r\n"]
[282.9724, "o", "              non_monotonic    52.6\u00b10.1\u03bcs \r\n"]
[283.07128, "o", "             ================ ============\r\n"]
[283.17016, "o", "\r\n"]
[283.26904, "o", "[90.00%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.CategoricalSlicing.time_getitem_scalar\u001b[0m                                                                                             ok\r\n"]
[283.36792, "o", "[90.00%] \u00b7\u00b7\u00b7 \u001b[0;39m================ =============\u001b[0m\r\n"]
[283.4668, "o", "                  index                    \r\n"]
[283.56568, "o", "             ---------------- -------------\r\n"]
[283.66456, "o", "              monotonic_incr   4.36\u00b10.01\u03bcs \r\n"]
[283.76344, "o", "              monotonic_decr   4.36\u00b10.02\u03bcs \r\n"]
[283.86232, "o", "              non_monotonic    4.36\u00b10.02\u03bcs \r\n"]
[283.9612, "o", "             ================ =============\r\n"]
[284.06008, "o", "\r\n"]
[284.15896, "o", "[100.00%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.CategoricalSlicing.time_getitem_slice\u001b[0m                                                                                              ok\r\n"]
[284.25784, "o", "[100.00%] \u00b7\u00b7\u00b7 \u001b[0;39m================ =============\u001b[0m\r\n"]
[284.35672, "o", "                   index                    \r\n"]
[284.4556, "o", "              ---------------- -------------\r\n"]
[284.55448, "o", "               monotonic_incr   4.87\u00b10.01\u03bcs \r\n"]
[284.65336, "o", "               monotonic_decr   4.83\u00b10.01\u03bcs \r\n"]
[284.75224, "o", "               non_monotonic    4.85\u00b10.01\u03bcs \r\n"]
[284.85112, "o", "              ================ =============\r\n"]
[285.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo/asv_bench# "]
[285.002, "i", "asv run --python=same --bench=\"categoricals.*\"\r"]
[285.004, "o", "asv run --python=same --bench=\"categoricals.*\"\r\n"]
[285.05495, "o", "\u001b[?2004l\r\n"]
[285.103901, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[285.152851, "o", "\u00b7 \u001b[0;32mRunning 48 total benchmarks (1 commits * 1 environments * 48 benchmarks)\u001b[0m\r\n"]
[285.201802, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.10_bin_python3.10\u001b[0m\r\n"]
[285.250752, "o", "[ 1.04%] \u00b7\u00b7\u00b7 \u001b[0;39mRunning (categoricals.CategoricalSlicing.time_getitem_bool_array--)\u001b[0m..........................................\r\n"]
[285.299703, "o", "[44.79%] \u00b7\u00b7\u00b7 \u001b[0;39mRunning (categoricals.Repr.time_rendering--)\u001b[0m......\r\n"]
[285.348653, "o", "[51.04%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.CategoricalSlicing.time_getitem_bool_array\u001b[0m                                                                                         ok\r\n"]
[285.397604, "o", "[51.04%] \u00b7\u00b7\u00b7 \u001b[0;39m================ =============\u001b[0m\r\n"]
[285.446554, "o", "                  index                    \r\n"]
[285.495505, "o", "             ---------------- -------------\r\n"]
[285.544455, "o", "              monotonic_incr   2.45\u00b10.04ms \r\n"]
[285.593406, "o", "              monotonic_decr   2.52\u00b10.09ms \r\n"]
[285.642356, "o", "              non_monotonic    2.91\u00b10.06ms \r\n"]
[285.691307, "o", "             ================ =============\r\n"]
[285.740257, "o", "\r\n"]
[285.789208, "o", "[52.08%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.CategoricalSlicing.time_getitem_list\u001b[0m                                                                                               ok\r\n"]
[285.838158, "o", "[52.08%] \u00b7\u00b7\u00b7 \u001b[0;39m================ =============\u001b[0m\r\n"]
[285.887109, "o", "                  index                    \r\n"]
[285.936059, "o", "             ---------------- -------------\r\n"]
[285.98501, "o", "              monotonic_incr   1.82\u00b10.01ms \r\n"]
[286.03396, "o", "              monotonic_decr   1.81\u00b10.02ms \r\n"]
[286.082911, "o", "              non_monotonic    1.83\u00b10.02ms \r\n"]
[286.131861, "o", "             ================ =============\r\n"]
[286.180812, "o", "\r\n"]
[286.229762, "o", "[53.12%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.CategoricalSlicing.time_getitem_list_like\u001b[0m                                                                                          ok\r\n"]
[286.278713, "o", "[53.12%] \u00b7\u00b7\u00b7 \u001b[0;39m================ ============\u001b[0m\r\n"]
[286.327663, "o", "                  index                   \r\n"]
[286.376614, "o", "             ---------------- ------------\r\n"]
[286.425564, "o", "              monotonic_incr   52.5\u00b10.2\u03bcs \r\n"]
[286.474515, "o", "              monotonic_decr   52.9\u00b10.2\u03bcs \r\n"]
[286.523465, "o", "              non_monotonic    52.1\u00b10.6\u03bcs \r\n"]
[286.572416, "o", "             ================ ============\r\n"]
[286.621366, "o", "\r\n"]
[286.670317, "o", "[54.17%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.CategoricalSlicing.time_getitem_scalar\u001b[0m                                                                                             ok\r\n"]
[286.719267, "o", "[54.17%] \u00b7\u00b7\u00b7 \u001b[0;39m================ =============\u001b[0m\r\n"]
[286.768218, "o", "                  index                    \r\n"]
[286.817168, "o", "             ---------------- -------------\r\n"]
[286.866119, "o", "              monotonic_incr   4.40\u00b10.02\u03bcs \r\n"]
[286.915069, "o", "              monotonic_decr   4.39\u00b10.02\u03bcs \r\n"]
[286.96402, "o", "              non_monotonic    4.38\u00b10.01\u03bcs \r\n"]
[287.01297, "o", "             ================ =============\r\n"]
[287.061921, "o", "\r\n"]
[287.110871, "o", "[55.21%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.CategoricalSlicing.time_getitem_slice\u001b[0m                                                                                              ok\r\n"]
[287.159822, "o", "[55.21%] \u00b7\u00b7\u00b7 \u001b[0;39m================ =============\u001b[0m\r\n"]
[287.208772, "o", "                  index                    \r\n"]
[287.257723, "o", "             ---------------- -------------\r\n"]
[287.306673, "o", "              monotonic_incr   4.93\u00b10.02\u03bcs \r\n"]
[287.355624, "o", "              monotonic_decr   4.89\u00b10.04\u03bcs \r\n"]
[287.404574, "o", "              non_monotonic    4.88\u00b10.02\u03bcs \r\n"]
[287.453525, "o", "             ================ =============\r\n"]
[287.502475, "o", "\r\n"]
[287.551426, "o", "[56.25%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Concat.time_append_non_overlapping_index\u001b[0m                                                                                      607\u00b18\u03bcs\r\n"]
[287.600376, "o", "[57.29%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Concat.time_append_overlapping_index\u001b[0m                                                                                       72.2\u00b10.4\u03bcs\r\n"]
[287.649327, "o", "[58.33%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Concat.time_concat\u001b[0m                                                                                                           796\u00b120\u03bcs\r\n"]
[287.698277, "o", "[59.38%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Concat.time_concat_non_overlapping_index\u001b[0m                                                                                     833\u00b110\u03bcs\r\n"]
[287.747228, "o", "[60.42%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Concat.time_concat_overlapping_index\u001b[0m                                                                                          217\u00b12\u03bcs\r\n"]
[287.796178, "o", "[61.46%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Concat.time_union\u001b[0m                                                                                                         1.56\u00b10.02ms\r\n"]
[287.845129, "o", "[62.50%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Constructor.time_all_nan\u001b[0m                                                                                                   30.0\u00b10.2ms\r\n"]
[287.894079, "o", "[63.54%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Constructor.time_datetimes\u001b[0m                                                                                                    752\u00b13\u03bcs\r\n"]
[287.94303, "o", "[64.58%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Constructor.time_datetimes_with_nat\u001b[0m                                                                                           756\u00b12\u03bcs\r\n"]
[287.99198, "o", "[65.62%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Constructor.time_existing_categorical\u001b[0m                                                                                      32.2\u00b10.1\u03bcs\r\n"]
[288.040931, "o", "[66.67%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Constructor.time_existing_series\u001b[0m                                                                                           34.6\u00b10.3\u03bcs\r\n"]
[288.089881, "o", "[67.71%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Constructor.time_fastpath\u001b[0m                                                                                                   105\u00b10.6\u03bcs\r\n"]
[288.138832, "o", "[68.75%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Constructor.time_from_codes_all_int8\u001b[0m                                                                                       94.7\u00b10.4\u03bcs\r\n"]
[288.187782, "o", "[69.79%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Constructor.time_interval\u001b[0m                                                                                                   153\u00b10.5\u03bcs\r\n"]
[288.236733, "o", "[70.83%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Constructor.time_regular\u001b[0m                                                                                                   19.5\u00b10.2ms\r\n"]
[288.285683, "o", "[71.88%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Constructor.time_with_nan\u001b[0m                                                                                                    80.3\u00b11ms\r\n"]
[288.334634, "o", "[72.92%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Contains.time_categorical_contains\u001b[0m                                                                                         20.8\u00b10.2\u03bcs\r\n"]
[288.383584, "o", "[73.96%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Contains.time_categorical_index_contains\u001b[0m                                                                                   2.61\u00b10.5\u03bcs\r\n"]
[288.432535, "o", "[75.00%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Indexing.time_align\u001b[0m                                                                                                        2.06\u00b10.3ms\r\n"]
[288.481485, "o", "[76.04%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Indexing.time_get_loc\u001b[0m                                                                                                     1.79\u00b10.01\u03bcs\r\n"]
[288.530436, "o", "[77.08%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Indexing.time_intersection\u001b[0m                                                                                                    119\u00b12\u03bcs\r\n"]
[288.579386, "o", "[78.12%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Indexing.time_reindex\u001b[0m                                                                                                      58.7\u00b10.3\u03bcs\r\n"]
[288.628337, "o", "[79.17%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Indexing.time_reindex_missing\u001b[0m                                                                                              9.19\u00b10.1ms\r\n"]
[288.677287, "o", "[80.21%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Indexing.time_shallow_copy\u001b[0m                                                                                                1.19\u00b10.01\u03bcs\r\n"]
[288.726238, "o", "[81.25%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Indexing.time_sort_values\u001b[0m                                                                                                 3.07\u00b10.01ms\r\n"]
[288.775188, "o", "[82.29%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Indexing.time_unique\u001b[0m                                                                                                      1.34\u00b10.01\u03bcs\r\n"]
[288.824139, "o", "[83.33%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.IsMonotonic.time_categorical_index_is_monotonic_decreasing\u001b[0m                                                                    218\u00b12ns\r\n"]
[288.873089, "o", "[84.38%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.IsMonotonic.time_categorical_index_is_monotonic_increasing\u001b[0m                                                                    219\u00b12ns\r\n"]
[288.92204, "o", "[85.42%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.IsMonotonic.time_categorical_series_is_monotonic_decreasing\u001b[0m                                                                28.7\u00b10.3\u03bcs\r\n"]
[288.97099, "o", "[86.46%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.IsMonotonic.time_categorical_series_is_monotonic_increasing\u001b[0m                                                                28.7\u00b10.3\u03bcs\r\n"]
[289.019941, "o", "[87.50%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Rank.time_rank_int\u001b[0m                                                                                                        4.43\u00b10.05ms\r\n"]
[289.068891, "o", "[88.54%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Rank.time_rank_int_cat\u001b[0m                                                                                                     4.71\u00b10.1ms\r\n"]
[289.117842, "o", "[89.58%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Rank.time_rank_int_cat_ordered\u001b[0m                                                                                            1.31\u00b10.05ms\r\n"]
[289.166792, "o", "[90.62%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Rank.time_rank_string\u001b[0m                                                                                                      85.4\u00b10.3ms\r\n"]
[289.215743, "o", "[91.67%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Rank.time_rank_string_cat\u001b[0m                                                                                                 6.08\u00b10.06ms\r\n"]
[289.264693, "o", "[92.71%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Rank.time_rank_string_cat_ordered\u001b[0m                                                                                         1.31\u00b10.06ms\r\n"]
[289.313644, "o", "[93.75%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.RemoveCategories.time_remove_categories\u001b[0m                                                                                      38.3\u00b12ms\r\n"]
[289.362594, "o", "[94.79%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.Repr.time_rendering\u001b[0m                                                                                                           245\u00b12\u03bcs\r\n"]
[289.411545, "o", "[95.83%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.SearchSorted.time_categorical_contains\u001b[0m                                                                                    4.57\u00b10.04\u03bcs\r\n"]
[289.460495, "o", "[96.88%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.SearchSorted.time_categorical_index_contains\u001b[0m                                                                              4.94\u00b10.04\u03bcs\r\n"]
[289.509446, "o", "[97.92%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.SetCategories.time_set_categories\u001b[0m                                                                                          13.4\u00b10.9ms\r\n"]
[289.558396, "o", "[98.96%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.ValueCounts.time_value_counts\u001b[0m                                                                                                      ok\r\n"]
[289.607347, "o", "[98.96%] \u00b7\u00b7\u00b7 \u001b[0;39m======== =============\u001b[0m\r\n"]
[289.656297, "o", "              dropna               \r\n"]
[289.705248, "o", "             -------- -------------\r\n"]
[289.754198, "o", "               True    2.54\u00b10.05ms \r\n"]
[289.803149, "o", "              False     2.58\u00b10.1ms \r\n"]
[289.852099, "o", "             ======== =============\r\n"]
[289.90105, "o", "\r\n"]
[290.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo/asv_bench# "]
[290.002, "i", "cd ..\r"]
[290.004, "o", "cd ..\r\n"]
[290.006, "o", "\u001b[?2004l\r\n"]
[295.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[295.002, "i", "python -m pytest pandas/tests/indexing/test_categorical.py -v\r"]
[295.004, "o", "python -m pytest pandas/tests/indexing/test_categorical.py -v\r\n"]
[295.036519, "o", "\u001b[?2004l\r\n"]
[295.067037, "o", "+ /opt/conda/envs/asv_3.10/bin/ninja\r\n"]
[295.097556, "o", "\r\n"]
[295.128074, "o", "[0/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[295.158593, "o", "[1/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[295.189111, "o", "\u001b[1m===================================================================== test session starts ======================================================================\u001b[0m\r\n"]
[295.21963, "o", "platform linux -- Python 3.10.18, pytest-8.4.2, pluggy-1.6.0 -- /opt/conda/envs/asv_3.10/bin/python\r\n"]
[295.250148, "o", "cachedir: .pytest_cache\r\n"]
[295.280667, "o", "hypothesis profile 'ci' -> deadline=None, suppress_health_check=(HealthCheck.too_slow, HealthCheck.differing_executors)\r\n"]
[295.311185, "o", "rootdir: /workspace/repo\r\n"]
[295.341704, "o", "configfile: pyproject.toml\r\n"]
[295.372222, "o", "plugins: xdist-3.8.0, hypothesis-6.140.2, asyncio-1.2.0\r\n"]
[295.402741, "o", "asyncio: mode=strict, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\r\n"]
[295.433259, "o", "\u001b[1mcollecting ... \u001b[0m\u001b[1m\r\n"]
[295.463778, "o", "collected 114 items                                                                                                                                            \u001b[0m\r\n"]
[295.494296, "o", "\r\n"]
[295.524815, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_scalar \u001b[32mPASSED\u001b[0m\r\n"]
[295.555333, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_setitem_with_expansion_non_category \u001b[32mPASSED\u001b[0m\r\n"]
[295.585852, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_scalar_non_category \u001b[32mPASSED\u001b[0m\r\n"]
[295.61637, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_slicing \u001b[32mPASSED\u001b[0m\r\n"]
[295.646889, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_slicing_and_getting_ops \u001b[32mPASSED\u001b[0m\r\n"]
[295.677407, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_slicing_doc_examples \u001b[32mPASSED\u001b[0m\r\n"]
[295.707926, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_listlike_labels \u001b[32mPASSED\u001b[0m\r\n"]
[295.738444, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_listlike_unused_category \u001b[32mPASSED\u001b[0m\r\n"]
[295.768963, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_label_unused_category \u001b[32mPASSED\u001b[0m\r\n"]
[295.799481, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_non_category \u001b[32mPASSED\u001b[0m\r\n"]
[295.83, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_setitem_expansion_label_unused_category \u001b[32mPASSED\u001b[0m\r\n"]
[295.860519, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_listlike_dtypes \u001b[32mPASSED\u001b[0m\r\n"]
[295.891037, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_listlike_dtypes_duplicated_categories_and_codes \u001b[32mPASSED\u001b[0m\r\n"]
[295.921556, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_listlike_dtypes_unused_category \u001b[32mPASSED\u001b[0m\r\n"]
[295.952074, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_listlike_unused_category_raises_keyerror \u001b[32mPASSED\u001b[0m\r\n"]
[295.982593, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_ix_categorical_index \u001b[32mPASSED\u001b[0m\r\n"]
[296.013111, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_ix_categorical_index_non_unique[False] \u001b[32mPASSED\u001b[0m\r\n"]
[296.04363, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_ix_categorical_index_non_unique[True] \u001b[32mPASSED\u001b[0m\r\n"]
[296.074148, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_slice \u001b[32mPASSED\u001b[0m\r\n"]
[296.104667, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_and_at_with_categorical_index \u001b[32mPASSED\u001b[0m\r\n"]
[296.135185, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values0] \u001b[32mPASSED\u001b[0m\r\n"]
[296.165704, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values1] \u001b[32mPASSED\u001b[0m\r\n"]
[296.196222, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values2] \u001b[32mPASSED\u001b[0m\r\n"]
[296.226741, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values3] \u001b[32mPASSED\u001b[0m\r\n"]
[296.257259, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values4] \u001b[32mPASSED\u001b[0m\r\n"]
[296.287778, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values5] \u001b[32mPASSED\u001b[0m\r\n"]
[296.318296, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values6] \u001b[32mPASSED\u001b[0m\r\n"]
[296.348815, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values7] \u001b[32mPASSED\u001b[0m\r\n"]
[296.379333, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values8] \u001b[32mPASSED\u001b[0m\r\n"]
[296.409852, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values9] \u001b[32mPASSED\u001b[0m\r\n"]
[296.44037, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values10] \u001b[32mPASSED\u001b[0m\r\n"]
[296.470889, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values11] \u001b[32mPASSED\u001b[0m\r\n"]
[296.501407, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values12] \u001b[32mPASSED\u001b[0m\r\n"]
[296.531926, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values13] \u001b[32mPASSED\u001b[0m\r\n"]
[296.562444, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values14] \u001b[32mPASSED\u001b[0m\r\n"]
[296.592963, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values15] \u001b[32mPASSED\u001b[0m\r\n"]
[296.623481, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values16] \u001b[32mPASSED\u001b[0m\r\n"]
[296.654, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values17] \u001b[32mPASSED\u001b[0m\r\n"]
[296.684519, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values18] \u001b[32mPASSED\u001b[0m\r\n"]
[296.715037, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values19] \u001b[32mPASSED\u001b[0m\r\n"]
[296.745556, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values20] \u001b[32mPASSED\u001b[0m\r\n"]
[296.776074, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values21] \u001b[32mPASSED\u001b[0m\r\n"]
[296.806593, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values22] \u001b[32mPASSED\u001b[0m\r\n"]
[296.837111, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values23] \u001b[32mPASSED\u001b[0m\r\n"]
[296.86763, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values24] \u001b[32mPASSED\u001b[0m\r\n"]
[296.898148, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values25] \u001b[32mPASSED\u001b[0m\r\n"]
[296.928667, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values26] \u001b[32mPASSED\u001b[0m\r\n"]
[296.959185, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values27] \u001b[32mPASSED\u001b[0m\r\n"]
[296.989704, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values28] \u001b[32mPASSED\u001b[0m\r\n"]
[297.020222, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values29] \u001b[32mPASSED\u001b[0m\r\n"]
[297.050741, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values30] \u001b[32mPASSED\u001b[0m\r\n"]
[297.081259, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values0] \u001b[32mPASSED\u001b[0m\r\n"]
[297.111778, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values1] \u001b[32mPASSED\u001b[0m\r\n"]
[297.142296, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values2] \u001b[32mPASSED\u001b[0m\r\n"]
[297.172815, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values3] \u001b[32mPASSED\u001b[0m\r\n"]
[297.203333, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values4] \u001b[32mPASSED\u001b[0m\r\n"]
[297.233852, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values5] \u001b[32mPASSED\u001b[0m\r\n"]
[297.26437, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values6] \u001b[32mPASSED\u001b[0m\r\n"]
[297.294889, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values7] \u001b[32mPASSED\u001b[0m\r\n"]
[297.325407, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values8] \u001b[32mPASSED\u001b[0m\r\n"]
[297.355926, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values9] \u001b[32mPASSED\u001b[0m\r\n"]
[297.386444, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values10] \u001b[32mPASSED\u001b[0m\r\n"]
[297.416963, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values11] \u001b[32mPASSED\u001b[0m\r\n"]
[297.447481, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values12] \u001b[32mPASSED\u001b[0m\r\n"]
[297.478, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values13] \u001b[32mPASSED\u001b[0m\r\n"]
[297.508519, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values14] \u001b[32mPASSED\u001b[0m\r\n"]
[297.539037, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values15] \u001b[32mPASSED\u001b[0m\r\n"]
[297.569556, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values16] \u001b[32mPASSED\u001b[0m\r\n"]
[297.600074, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values17] \u001b[32mPASSED\u001b[0m\r\n"]
[297.630593, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values18] \u001b[32mPASSED\u001b[0m\r\n"]
[297.661111, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values19] \u001b[32mPASSED\u001b[0m\r\n"]
[297.69163, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values20] \u001b[32mPASSED\u001b[0m\r\n"]
[297.722148, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values21] \u001b[32mPASSED\u001b[0m\r\n"]
[297.752667, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values22] \u001b[32mPASSED\u001b[0m\r\n"]
[297.783185, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values23] \u001b[32mPASSED\u001b[0m\r\n"]
[297.813704, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values24] \u001b[32mPASSED\u001b[0m\r\n"]
[297.844222, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values25] \u001b[32mPASSED\u001b[0m\r\n"]
[297.874741, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values26] \u001b[32mPASSED\u001b[0m\r\n"]
[297.905259, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values27] \u001b[32mPASSED\u001b[0m\r\n"]
[297.935778, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values28] \u001b[32mPASSED\u001b[0m\r\n"]
[297.966296, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values29] \u001b[32mPASSED\u001b[0m\r\n"]
[297.996815, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values30] \u001b[32mPASSED\u001b[0m\r\n"]
[298.027333, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values0] \u001b[32mPASSED\u001b[0m\r\n"]
[298.057852, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values1] \u001b[32mPASSED\u001b[0m\r\n"]
[298.08837, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values2] \u001b[32mPASSED\u001b[0m\r\n"]
[298.118889, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values3] \u001b[32mPASSED\u001b[0m\r\n"]
[298.149407, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values4] \u001b[32mPASSED\u001b[0m\r\n"]
[298.179926, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values5] \u001b[32mPASSED\u001b[0m\r\n"]
[298.210444, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values6] \u001b[32mPASSED\u001b[0m\r\n"]
[298.240963, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values7] \u001b[32mPASSED\u001b[0m\r\n"]
[298.271481, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values8] \u001b[32mPASSED\u001b[0m\r\n"]
[298.302, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values9] \u001b[32mPASSED\u001b[0m\r\n"]
[298.332519, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values10] \u001b[32mPASSED\u001b[0m\r\n"]
[298.363037, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values11] \u001b[32mPASSED\u001b[0m\r\n"]
[298.393556, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values12] \u001b[32mPASSED\u001b[0m\r\n"]
[298.424074, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values13] \u001b[32mPASSED\u001b[0m\r\n"]
[298.454593, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values14] \u001b[32mPASSED\u001b[0m\r\n"]
[298.485111, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values15] \u001b[32mPASSED\u001b[0m\r\n"]
[298.51563, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values16] \u001b[32mPASSED\u001b[0m\r\n"]
[298.546148, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values17] \u001b[32mPASSED\u001b[0m\r\n"]
[298.576667, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values18] \u001b[32mPASSED\u001b[0m\r\n"]
[298.607185, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values19] \u001b[32mPASSED\u001b[0m\r\n"]
[298.637704, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values20] \u001b[32mPASSED\u001b[0m\r\n"]
[298.668222, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values21] \u001b[32mPASSED\u001b[0m\r\n"]
[298.698741, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values22] \u001b[32mPASSED\u001b[0m\r\n"]
[298.729259, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values23] \u001b[32mPASSED\u001b[0m\r\n"]
[298.759778, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values24] \u001b[32mPASSED\u001b[0m\r\n"]
[298.790296, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values25] \u001b[32mPASSED\u001b[0m\r\n"]
[298.820815, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values26] \u001b[32mPASSED\u001b[0m\r\n"]
[298.851333, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values27] \u001b[32mPASSED\u001b[0m\r\n"]
[298.881852, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values28] \u001b[32mPASSED\u001b[0m\r\n"]
[298.91237, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values29] \u001b[32mPASSED\u001b[0m\r\n"]
[298.942889, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values30] \u001b[32mPASSED\u001b[0m\r\n"]
[298.973407, "o", "pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_getitem_categorical_with_nan \u001b[32mPASSED\u001b[0m\r\n"]
[299.003926, "o", "\r\n"]
[299.034444, "o", "------------------------------------------------------ generated xml file: /workspace/repo/test-data.xml -------------------------------------------------------\r\n"]
[299.064963, "o", "===================================================================== slowest 30 durations =====================================================================\r\n"]
[299.095481, "o", "0.02s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_ix_categorical_index_non_unique[True]\r\n"]
[299.126, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_ix_categorical_index_non_unique[False]\r\n"]
[299.156519, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values17]\r\n"]
[299.187037, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_ix_categorical_index\r\n"]
[299.217556, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values17]\r\n"]
[299.248074, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values28]\r\n"]
[299.278593, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values17]\r\n"]
[299.309111, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values28]\r\n"]
[299.33963, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_slicing_and_getting_ops\r\n"]
[299.370148, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[None-idx_values28]\r\n"]
[299.400667, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values23]\r\n"]
[299.431185, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values22]\r\n"]
[299.461704, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values23]\r\n"]
[299.492222, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values29]\r\n"]
[299.522741, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values30]\r\n"]
[299.553259, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values24]\r\n"]
[299.583778, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values25]\r\n"]
[299.614296, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values27]\r\n"]
[299.644815, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values26]\r\n"]
[299.675333, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values22]\r\n"]
[299.705852, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values18]\r\n"]
[299.73637, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values27]\r\n"]
[299.766889, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[False-idx_values18]\r\n"]
[299.797407, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values0]\r\n"]
[299.827926, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values21]\r\n"]
[299.858444, "o", "0.01s call     pandas/tests/indexing/test_categorical.py::TestCategoricalIndex::test_loc_getitem_with_non_string_categories[True-idx_values20]\r\n"]
[299.888963, "o", "\r\n"]
[299.919481, "o", "(4 durations < 0.005s hidden.  Use -vv to show these durations.)\r\n"]
[300.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[300.002, "i", "python -m pytest pandas/tests/arrays/categorical/test_take.py -v\r"]
[300.004, "o", "python -m pytest pandas/tests/arrays/categorical/test_take.py -v\r\n"]
[300.136105, "o", "\u001b[?2004l\r\n"]
[300.266211, "o", "+ /opt/conda/envs/asv_3.10/bin/ninja\r\n"]
[300.396316, "o", "\r\n"]
[300.526421, "o", "[0/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[300.656526, "o", "[1/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[300.786632, "o", "\u001b[1m===================================================================== test session starts ======================================================================\u001b[0m\r\n"]
[300.916737, "o", "platform linux -- Python 3.10.18, pytest-8.4.2, pluggy-1.6.0 -- /opt/conda/envs/asv_3.10/bin/python\r\n"]
[301.046842, "o", "cachedir: .pytest_cache\r\n"]
[301.176947, "o", "hypothesis profile 'ci' -> deadline=None, suppress_health_check=(HealthCheck.too_slow, HealthCheck.differing_executors)\r\n"]
[301.307053, "o", "rootdir: /workspace/repo\r\n"]
[301.437158, "o", "configfile: pyproject.toml\r\n"]
[301.567263, "o", "plugins: xdist-3.8.0, hypothesis-6.140.2, asyncio-1.2.0\r\n"]
[301.697368, "o", "asyncio: mode=strict, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\r\n"]
[301.827474, "o", "\u001b[1mcollecting ... \u001b[0m\u001b[1m\r\n"]
[301.957579, "o", "collected 16 items                                                                                                                                             \u001b[0m\r\n"]
[302.087684, "o", "\r\n"]
[302.217789, "o", "pandas/tests/arrays/categorical/test_take.py::TestTake::test_take_default_allow_fill \u001b[32mPASSED\u001b[0m\r\n"]
[302.347895, "o", "pandas/tests/arrays/categorical/test_take.py::TestTake::test_take_positive_no_warning \u001b[32mPASSED\u001b[0m\r\n"]
[302.478, "o", "pandas/tests/arrays/categorical/test_take.py::TestTake::test_take_bounds[True] \u001b[32mPASSED\u001b[0m\r\n"]
[302.608105, "o", "pandas/tests/arrays/categorical/test_take.py::TestTake::test_take_bounds[False] \u001b[32mPASSED\u001b[0m\r\n"]
[302.738211, "o", "pandas/tests/arrays/categorical/test_take.py::TestTake::test_take_empty[True] \u001b[32mPASSED\u001b[0m\r\n"]
[302.868316, "o", "pandas/tests/arrays/categorical/test_take.py::TestTake::test_take_empty[False] \u001b[32mPASSED\u001b[0m\r\n"]
[302.998421, "o", "pandas/tests/arrays/categorical/test_take.py::TestTake::test_positional_take[True] \u001b[32mPASSED\u001b[0m\r\n"]
[303.128526, "o", "pandas/tests/arrays/categorical/test_take.py::TestTake::test_positional_take[False] \u001b[32mPASSED\u001b[0m\r\n"]
[303.258632, "o", "pandas/tests/arrays/categorical/test_take.py::TestTake::test_positional_take[None] \u001b[32mPASSED\u001b[0m\r\n"]
[303.388737, "o", "pandas/tests/arrays/categorical/test_take.py::TestTake::test_positional_take_unobserved[True] \u001b[32mPASSED\u001b[0m\r\n"]
[303.518842, "o", "pandas/tests/arrays/categorical/test_take.py::TestTake::test_positional_take_unobserved[False] \u001b[32mPASSED\u001b[0m\r\n"]
[303.648947, "o", "pandas/tests/arrays/categorical/test_take.py::TestTake::test_positional_take_unobserved[None] \u001b[32mPASSED\u001b[0m\r\n"]
[303.779053, "o", "pandas/tests/arrays/categorical/test_take.py::TestTake::test_take_allow_fill \u001b[32mPASSED\u001b[0m\r\n"]
[303.909158, "o", "pandas/tests/arrays/categorical/test_take.py::TestTake::test_take_fill_with_negative_one \u001b[32mPASSED\u001b[0m\r\n"]
[304.039263, "o", "pandas/tests/arrays/categorical/test_take.py::TestTake::test_take_fill_value \u001b[32mPASSED\u001b[0m\r\n"]
[304.169368, "o", "pandas/tests/arrays/categorical/test_take.py::TestTake::test_take_fill_value_new_raises \u001b[32mPASSED\u001b[0m\r\n"]
[304.299474, "o", "\r\n"]
[304.429579, "o", "------------------------------------------------------ generated xml file: /workspace/repo/test-data.xml -------------------------------------------------------\r\n"]
[304.559684, "o", "===================================================================== slowest 30 durations =====================================================================\r\n"]
[304.689789, "o", "\r\n"]
[304.819895, "o", "(30 durations < 0.005s hidden.  Use -vv to show these durations.)\r\n"]
[305.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[305.002, "i", "cat > test_optimization_correctness.py << 'EOF'\r"]
[305.004, "o", "cat > test_optimization_correctness.py << 'EOF'\r\n"]
[305.031096, "o", "\u001b[?2004l\r\n"]
[305.056193, "o", "\u001b[?2004h> import numpy as np\r\n"]
[305.081289, "o", "\u001b[?2004l\r\n"]
[305.106386, "o", "\u001b[?2004h> import pandas as pd\r\n"]
[305.131482, "o", "\u001b[?2004l\r\n"]
[305.156579, "o", "\u001b[?2004h> import warnings\r\n"]
[305.181675, "o", "\u001b[?2004l\r\n"]
[305.206772, "o", "\u001b[?2004h> \r\n"]
[305.231868, "o", "\u001b[?2004l\r\n"]
[305.256964, "o", "\u001b[?2004h> def test_correctness():\r\n"]
[305.282061, "o", "\u001b[?2004l\r\n"]
[305.307157, "o", "\u001b[?2004h>     \"\"\"Test that the optimization produces correct results.\"\"\"\r\n"]
[305.332254, "o", "\u001b[?2004l\r\n"]
[305.35735, "o", "\u001b[?2004h>     print(\"Testing optimization correctness...\")\r\n"]
[305.382447, "o", "\u001b[?2004l\r\n"]
[305.407543, "o", "\u001b[?2004h>     \r\n"]
[305.43264, "o", "\u001b[?2004l\r\n"]
[305.457736, "o", "\u001b[?2004h>     # Test various scenarios\r\n"]
[305.482832, "o", "\u001b[?2004l\r\n"]
[305.507929, "o", "\u001b[?2004h>     test_cases = [\r\n"]
[305.533025, "o", "\u001b[?2004l\r\n"]
[305.558122, "o", "\u001b[?2004h>         # Basic cases\r\n"]
[305.583218, "o", "\u001b[?2004l\r\n"]
[305.608315, "o", "\u001b[?2004h>         ([\"a\", \"b\", \"c\"] * 1000, \"b\"),\r\n"]
[305.633411, "o", "\u001b[?2004l\r\n"]
[305.658508, "o", "\u001b[?2004h>         ([\"x\", \"y\", \"z\"] * 500, \"x\"),\r\n"]
[305.683604, "o", "\u001b[?2004l\r\n"]
[305.708701, "o", "\u001b[?2004h>         ([\"p\", \"q\", \"r\"] * 2000, \"r\"),\r\n"]
[305.733797, "o", "\u001b[?2004l\r\n"]
[305.758893, "o", "\u001b[?2004h>         \r\n"]
[305.78399, "o", "\u001b[?2004l\r\n"]
[305.809086, "o", "\u001b[?2004h>         # Edge cases\r\n"]
[305.834183, "o", "\u001b[?2004l\r\n"]
[305.859279, "o", "\u001b[?2004h>         ([\"single\"], \"single\"),\r\n"]
[305.884376, "o", "\u001b[?2004l\r\n"]
[305.909472, "o", "\u001b[?2004h>         ([\"a\", \"b\"], \"c\"),  # No matches\r\n"]
[305.934569, "o", "\u001b[?2004l\r\n"]
[305.959665, "o", "\u001b[?2004h>         ([\"same\"] * 100, \"same\"),  # All matches\r\n"]
[305.984761, "o", "\u001b[?2004l\r\n"]
[306.009858, "o", "\u001b[?2004h>         \r\n"]
[306.034954, "o", "\u001b[?2004l\r\n"]
[306.060051, "o", "\u001b[?2004h>         # With NaN\r\n"]
[306.085147, "o", "\u001b[?2004l\r\n"]
[306.110244, "o", "\u001b[?2004h>         ([\"a\", \"b\", None] * 100, \"b\"),\r\n"]
[306.13534, "o", "\u001b[?2004l\r\n"]
[306.160437, "o", "\u001b[?2004h>     ]\r\n"]
[306.185533, "o", "\u001b[?2004l\r\n"]
[306.210629, "o", "\u001b[?2004h>     \r\n"]
[306.235726, "o", "\u001b[?2004l\r\n"]
[306.260822, "o", "\u001b[?2004h>     all_passed = True\r\n"]
[306.285919, "o", "\u001b[?2004l\r\n"]
[306.311015, "o", "\u001b[?2004h>     \r\n"]
[306.336112, "o", "\u001b[?2004l\r\n"]
[306.361208, "o", "\u001b[?2004h>     for i, (values, target) in enumerate(test_cases):\r\n"]
[306.386305, "o", "\u001b[?2004l\r\n"]
[306.411401, "o", "\u001b[?2004h>         try:\r\n"]
[306.436497, "o", "\u001b[?2004l\r\n"]
[306.461594, "o", "\u001b[?2004h>             # Create categorical\r\n"]
[306.48669, "o", "\u001b[?2004l\r\n"]
[306.511787, "o", "\u001b[?2004h>             cat = pd.Categorical(values)\r\n"]
[306.536883, "o", "\u001b[?2004l\r\n"]
[306.56198, "o", "\u001b[?2004h>             \r\n"]
[306.587076, "o", "\u001b[?2004l\r\n"]
[306.612173, "o", "\u001b[?2004h>             # Test boolean indexing\r\n"]
[306.637269, "o", "\u001b[?2004l\r\n"]
[306.662365, "o", "\u001b[?2004h>             mask = cat == target\r\n"]
[306.687462, "o", "\u001b[?2004l\r\n"]
[306.712558, "o", "\u001b[?2004h>             result = cat[mask]\r\n"]
[306.737655, "o", "\u001b[?2004l\r\n"]
[306.762751, "o", "\u001b[?2004h>             \r\n"]
[306.787848, "o", "\u001b[?2004l\r\n"]
[306.812944, "o", "\u001b[?2004h>             # Verify result\r\n"]
[306.838041, "o", "\u001b[?2004l\r\n"]
[306.863137, "o", "\u001b[?2004h>             expected_count = sum(1 for v in values if v == target)\r\n"]
[306.888234, "o", "\u001b[?2004l\r\n"]
[306.91333, "o", "\u001b[?2004h>             actual_count = len(result)\r\n"]
[306.938426, "o", "\u001b[?2004l\r\n"]
[306.963523, "o", "\u001b[?2004h>             \r\n"]
[306.988619, "o", "\u001b[?2004l\r\n"]
[307.013716, "o", "\u001b[?2004h>             if actual_count == expected_count:\r\n"]
[307.038812, "o", "\u001b[?2004l\r\n"]
[307.063909, "o", "\u001b[?2004h>                 print(f\"Test case {i+1}: PASS (found {actual_count} matches)\")\r\n"]
[307.089005, "o", "\u001b[?2004l\r\n"]
[307.114102, "o", "\u001b[?2004h>             else:\r\n"]
[307.139198, "o", "\u001b[?2004l\r\n"]
[307.164294, "o", "\u001b[?2004h>                 print(f\"Test case {i+1}: FAIL (expected {expected_count}, got {actual_count})\")\r\n"]
[307.189391, "o", "\u001b[?2004l\r\n"]
[307.214487, "o", "\u001b[?2004h>                 all_passed = False\r\n"]
[307.239584, "o", "\u001b[?2004l\r\n"]
[307.26468, "o", "\u001b[?2004h>                 \r\n"]
[307.289777, "o", "\u001b[?2004l\r\n"]
[307.314873, "o", "\u001b[?2004h>             # Verify all results are the target value (excluding NaN)\r\n"]
[307.33997, "o", "\u001b[?2004l\r\n"]
[307.365066, "o", "\u001b[?2004h>             non_na_results = result[result.notna()]\r\n"]
[307.390162, "o", "\u001b[?2004l\r\n"]
[307.415259, "o", "\u001b[?2004h>             if len(non_na_results) > 0 and not all(v == target for v in non_na_results):\r\n"]
[307.440355, "o", "\u001b[?2004l\r\n"]
[307.465452, "o", "\u001b[?2004h>                 print(f\"Test case {i+1}: FAIL (incorrect values in result)\")\r\n"]
[307.490548, "o", "\u001b[?2004l\r\n"]
[307.515645, "o", "\u001b[?2004h>                 all_passed = False\r\n"]
[307.540741, "o", "\u001b[?2004l\r\n"]
[307.565838, "o", "\u001b[?2004h>                 \r\n"]
[307.590934, "o", "\u001b[?2004l\r\n"]
[307.61603, "o", "\u001b[?2004h>         except Exception as e:\r\n"]
[307.641127, "o", "\u001b[?2004l\r\n"]
[307.666223, "o", "\u001b[?2004h>             print(f\"Test case {i+1}: ERROR - {e}\")\r\n"]
[307.69132, "o", "\u001b[?2004l\r\n"]
[307.716416, "o", "\u001b[?2004h>             all_passed = False\r\n"]
[307.741513, "o", "\u001b[?2004l\r\n"]
[307.766609, "o", "\u001b[?2004h>     \r\n"]
[307.791706, "o", "\u001b[?2004l\r\n"]
[307.816802, "o", "\u001b[?2004h>     return all_passed\r\n"]
[307.841898, "o", "\u001b[?2004l\r\n"]
[307.866995, "o", "\u001b[?2004h> \r\n"]
[307.892091, "o", "\u001b[?2004l\r\n"]
[307.917188, "o", "\u001b[?2004h> def test_performance_improvement():\r\n"]
[307.942284, "o", "\u001b[?2004l\r\n"]
[307.967381, "o", "\u001b[?2004h>     \"\"\"Test that the optimization actually improves performance.\"\"\"\r\n"]
[307.992477, "o", "\u001b[?2004l\r\n"]
[308.017574, "o", "\u001b[?2004h>     print(\"\\nTesting performance improvement...\")\r\n"]
[308.04267, "o", "\u001b[?2004l\r\n"]
[308.067766, "o", "\u001b[?2004h>     \r\n"]
[308.092863, "o", "\u001b[?2004l\r\n"]
[308.117959, "o", "\u001b[?2004h>     import time\r\n"]
[308.143056, "o", "\u001b[?2004l\r\n"]
[308.168152, "o", "\u001b[?2004h>     \r\n"]
[308.193249, "o", "\u001b[?2004l\r\n"]
[308.218345, "o", "\u001b[?2004h>     N = 10**6\r\n"]
[308.243442, "o", "\u001b[?2004l\r\n"]
[308.268538, "o", "\u001b[?2004h>     categories = [\"a\", \"b\", \"c\"]\r\n"]
[308.293635, "o", "\u001b[?2004l\r\n"]
[308.318731, "o", "\u001b[?2004h>     \r\n"]
[308.343827, "o", "\u001b[?2004l\r\n"]
[308.368924, "o", "\u001b[?2004h>     # Non-monotonic case (should benefit from optimization)\r\n"]
[308.39402, "o", "\u001b[?2004l\r\n"]
[308.419117, "o", "\u001b[?2004h>     codes_non_monotonic = np.tile([0, 1, 2], N)\r\n"]
[308.444213, "o", "\u001b[?2004l\r\n"]
[308.46931, "o", "\u001b[?2004h>     data_non_monotonic = pd.Categorical.from_codes(codes_non_monotonic, categories=categories)\r\n"]
[308.494406, "o", "\u001b[?2004l\r\n"]
[308.519503, "o", "\u001b[?2004h>     cat_scalar = \"b\"\r\n"]
[308.544599, "o", "\u001b[?2004l\r\n"]
[308.569695, "o", "\u001b[?2004h>     \r\n"]
[308.594792, "o", "\u001b[?2004l\r\n"]
[308.619888, "o", "\u001b[?2004h>     # Measure performance\r\n"]
[308.644985, "o", "\u001b[?2004l\r\n"]
[308.670081, "o", "\u001b[?2004h>     start = time.time()\r\n"]
[308.695178, "o", "\u001b[?2004l\r\n"]
[308.720274, "o", "\u001b[?2004h>     result = data_non_monotonic[data_non_monotonic == cat_scalar]\r\n"]
[308.745371, "o", "\u001b[?2004l\r\n"]
[308.770467, "o", "\u001b[?2004h>     end = time.time()\r\n"]
[308.795563, "o", "\u001b[?2004l\r\n"]
[308.82066, "o", "\u001b[?2004h>     \r\n"]
[308.845756, "o", "\u001b[?2004l\r\n"]
[308.870853, "o", "\u001b[?2004h>     elapsed_ms = (end - start) * 1000\r\n"]
[308.895949, "o", "\u001b[?2004l\r\n"]
[308.921046, "o", "\u001b[?2004h>     print(f\"Non-monotonic boolean indexing: {elapsed_ms:.2f} ms\")\r\n"]
[308.946142, "o", "\u001b[?2004l\r\n"]
[308.971239, "o", "\u001b[?2004h>     print(f\"Result length: {len(result)}\")\r\n"]
[308.996335, "o", "\u001b[?2004l\r\n"]
[309.021431, "o", "\u001b[?2004h>     \r\n"]
[309.046528, "o", "\u001b[?2004l\r\n"]
[309.071624, "o", "\u001b[?2004h>     # Should be significantly faster than the original ~10ms\r\n"]
[309.096721, "o", "\u001b[?2004l\r\n"]
[309.121817, "o", "\u001b[?2004h>     if elapsed_ms < 6.0:  # Allow some margin\r\n"]
[309.146914, "o", "\u001b[?2004l\r\n"]
[309.17201, "o", "\u001b[?2004h>         print(\"Performance improvement: PASS\")\r\n"]
[309.197107, "o", "\u001b[?2004l\r\n"]
[309.222203, "o", "\u001b[?2004h>         return True\r\n"]
[309.247299, "o", "\u001b[?2004l\r\n"]
[309.272396, "o", "\u001b[?2004h>     else:\r\n"]
[309.297492, "o", "\u001b[?2004l\r\n"]
[309.322589, "o", "\u001b[?2004h>         print(\"Performance improvement: FAIL (still too slow)\")\r\n"]
[309.347685, "o", "\u001b[?2004l\r\n"]
[309.372782, "o", "\u001b[?2004h>         return False\r\n"]
[309.397878, "o", "\u001b[?2004l\r\n"]
[309.422975, "o", "\u001b[?2004h> \r\n"]
[309.448071, "o", "\u001b[?2004l\r\n"]
[309.473168, "o", "\u001b[?2004h> if __name__ == \"__main__\":\r\n"]
[309.498264, "o", "\u001b[?2004l\r\n"]
[309.52336, "o", "\u001b[?2004h>     correctness_passed = test_correctness()\r\n"]
[309.548457, "o", "\u001b[?2004l\r\n"]
[309.573553, "o", "\u001b[?2004h>     performance_passed = test_performance_improvement()\r\n"]
[309.59865, "o", "\u001b[?2004l\r\n"]
[309.623746, "o", "\u001b[?2004h>     \r\n"]
[309.648843, "o", "\u001b[?2004l\r\n"]
[309.673939, "o", "\u001b[?2004h>     print(\"\\n\" + \"=\"*50)\r\n"]
[309.699036, "o", "\u001b[?2004l\r\n"]
[309.724132, "o", "\u001b[?2004h>     if correctness_passed and performance_passed:\r\n"]
[309.749228, "o", "\u001b[?2004l\r\n"]
[309.774325, "o", "\u001b[?2004h>         print(\"ALL TESTS PASSED - Optimization is working correctly!\")\r\n"]
[309.799421, "o", "\u001b[?2004l\r\n"]
[309.824518, "o", "\u001b[?2004h>     else:\r\n"]
[309.849614, "o", "\u001b[?2004l\r\n"]
[309.874711, "o", "\u001b[?2004h>         print(\"SOME TESTS FAILED - Need to investigate\")\r\n"]
[309.899807, "o", "\u001b[?2004l\r\n"]
[309.924904, "o", "\u001b[?2004h> EOF\r\n"]
[310.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[310.002, "i", "python test_optimization_correctness.py\r"]
[310.004, "o", "python test_optimization_correctness.py\r\n"]
[310.241429, "o", "\u001b[?2004l\r\n"]
[310.476857, "o", "+ /opt/conda/envs/asv_3.10/bin/ninja\r\n"]
[310.712286, "o", "\r\n"]
[310.947714, "o", "[0/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[311.183143, "o", "[1/1] Generating write_version_file with a custom command\u001b[K\r\n"]
[311.418571, "o", "Testing optimization correctness...\r\n"]
[311.654, "o", "Test case 1: PASS (found 1000 matches)\r\n"]
[311.889429, "o", "Test case 2: PASS (found 500 matches)\r\n"]
[312.124857, "o", "Test case 3: PASS (found 2000 matches)\r\n"]
[312.360286, "o", "Test case 4: PASS (found 1 matches)\r\n"]
[312.595714, "o", "Test case 5: PASS (found 0 matches)\r\n"]
[312.831143, "o", "Test case 6: PASS (found 100 matches)\r\n"]
[313.066571, "o", "Test case 7: PASS (found 100 matches)\r\n"]
[313.302, "o", "\r\n"]
[313.537429, "o", "Testing performance improvement...\r\n"]
[313.772857, "o", "Non-monotonic boolean indexing: 5.12 ms\r\n"]
[314.008286, "o", "Result length: 1000000\r\n"]
[314.243714, "o", "Performance improvement: PASS\r\n"]
[314.479143, "o", "\r\n"]
[314.714571, "o", "==================================================\r\n"]
[315.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo# "]
[315.002, "i", "cd asv_bench && asv run --python=same --bench=\"categoricals.CategoricalSlicing.time_getitem_bool_array\"\r"]
[315.004, "o", "cd asv_bench && asv run --python=same --bench=\"categoricals.CategoricalSlicing.time_getitem_bool_array\"\r\n"]
[315.359143, "o", "\u001b[?2004l\r\n"]
[315.712286, "o", "\u00b7 \u001b[0;32mDiscovering benchmarks\u001b[0m\r\n"]
[316.065429, "o", "\u00b7 \u001b[0;32mRunning 1 total benchmarks (1 commits * 1 environments * 1 benchmarks)\u001b[0m\r\n"]
[316.418571, "o", "[ 0.00%] \u00b7\u00b7 \u001b[0;34mBenchmarking existing-py_opt_conda_envs_asv_3.10_bin_python3.10\u001b[0m\r\n"]
[316.771714, "o", "[50.00%] \u00b7\u00b7\u00b7 \u001b[0;39mRunning (categoricals.CategoricalSlicing.time_getitem_bool_array--)\u001b[0m.\r\n"]
[317.124857, "o", "[100.00%] \u00b7\u00b7\u00b7 \u001b[0;39mcategoricals.CategoricalSlicing.time_getitem_bool_array\u001b[0m                                                                                         ok\r\n"]
[317.478, "o", "[100.00%] \u00b7\u00b7\u00b7 \u001b[0;39m================ =============\u001b[0m\r\n"]
[317.831143, "o", "                   index                    \r\n"]
[318.184286, "o", "              ---------------- -------------\r\n"]
[318.537429, "o", "               monotonic_incr   2.83\u00b10.03ms \r\n"]
[318.890571, "o", "               monotonic_decr   2.83\u00b10.03ms \r\n"]
[319.243714, "o", "               non_monotonic    3.14\u00b10.01ms \r\n"]
[319.596857, "o", "              ================ =============\r\n"]
[320.0, "o", "(asv_3.10) root@eda08f37ecd8:/workspace/repo/asv_bench# "]
[320.002, "i", "\u001b[?2004l\r"]
[320.004, "o", "\u001b[?2004l\r\n"]
[322.478, "o", "\r\n"]
