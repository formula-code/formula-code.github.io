import{a as oe}from"./BA1yty_9.js";import{c as M}from"./CBhUi2SX.js";import{a as ie,M as Y,A as te,m as ae,O as gt}from"./z10Dua7R.js";import{I as se}from"./B_hwC6zG.js";import{m as le,a as ue,b as ce,c as pe,d as fe,e as he,f as de,g as ye,h as ve,i as me,j as Me,k as _e,l as ge,n as xe,o as Oe,p as we,q as je,r as Se,s as Te,t as Ae,u as be,v as Ee,w as Le,x as De,T as Pe,O as ke}from"./BTPdDosb.js";import{M as xt}from"./fA7J4OfB.js";import{P as Ie}from"./CGTDZSBk.js";function He(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in n)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(n,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var q={},nt={},ot={},Ot={},K={},ee={};(function(n){var e=M&&M.__generator||function(p,l){var c={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},O,g,d,w;return w={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function b(_){return function(P){return A([_,P])}}function A(_){if(O)throw new TypeError("Generator is already executing.");for(;c;)try{if(O=1,g&&(d=_[0]&2?g.return:_[0]?g.throw||((d=g.return)&&d.call(g),0):g.next)&&!(d=d.call(g,_[1])).done)return d;switch(g=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return c.label++,{value:_[1],done:!1};case 5:c.label++,g=_[1],_=[0];continue;case 7:_=c.ops.pop(),c.trys.pop();continue;default:if(d=c.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){c=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){c.label=_[1];break}if(_[0]===6&&c.label<d[1]){c.label=d[1],d=_;break}if(d&&c.label<d[2]){c.label=d[2],c.ops.push(_);break}d[2]&&c.ops.pop(),c.trys.pop();continue}_=l.call(p,c)}catch(P){_=[6,P],g=0}finally{O=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},t=M&&M.__read||function(p,l){var c=typeof Symbol=="function"&&p[Symbol.iterator];if(!c)return p;var O=c.call(p),g,d=[],w;try{for(;(l===void 0||l-- >0)&&!(g=O.next()).done;)d.push(g.value)}catch(b){w={error:b}}finally{try{g&&!g.done&&(c=O.return)&&c.call(O)}finally{if(w)throw w.error}}return d},r=M&&M.__spreadArray||function(p,l,c){if(c||arguments.length===2)for(var O=0,g=l.length,d;O<g;O++)(d||!(O in l))&&(d||(d=Array.prototype.slice.call(l,0,O)),d[O]=l[O]);return p.concat(d||Array.prototype.slice.call(l))},o=M&&M.__values||function(p){var l=typeof Symbol=="function"&&Symbol.iterator,c=l&&p[l],O=0;if(c)return c.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&O>=p.length&&(p=void 0),{value:p&&p[O++],done:!p}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0}),n.LinkedList=n.ListItem=n.END=void 0,n.END=Symbol();var i=function(){function p(l){l===void 0&&(l=null),this.next=null,this.prev=null,this.data=l}return p}();n.ListItem=i;var m=function(){function p(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];this.list=new i(n.END),this.list.next=this.list.prev=this.list,this.push.apply(this,r([],t(l),!1))}return p.prototype.isBefore=function(l,c){return l<c},p.prototype.push=function(){for(var l,c,O=[],g=0;g<arguments.length;g++)O[g]=arguments[g];try{for(var d=o(O),w=d.next();!w.done;w=d.next()){var b=w.value,A=new i(b);A.next=this.list,A.prev=this.list.prev,this.list.prev=A,A.prev.next=A}}catch(_){l={error:_}}finally{try{w&&!w.done&&(c=d.return)&&c.call(d)}finally{if(l)throw l.error}}return this},p.prototype.pop=function(){var l=this.list.prev;return l.data===n.END?null:(this.list.prev=l.prev,l.prev.next=this.list,l.next=l.prev=null,l.data)},p.prototype.unshift=function(){for(var l,c,O=[],g=0;g<arguments.length;g++)O[g]=arguments[g];try{for(var d=o(O.slice(0).reverse()),w=d.next();!w.done;w=d.next()){var b=w.value,A=new i(b);A.next=this.list.next,A.prev=this.list,this.list.next=A,A.next.prev=A}}catch(_){l={error:_}}finally{try{w&&!w.done&&(c=d.return)&&c.call(d)}finally{if(l)throw l.error}}return this},p.prototype.shift=function(){var l=this.list.next;return l.data===n.END?null:(this.list.next=l.next,l.next.prev=this.list,l.next=l.prev=null,l.data)},p.prototype.remove=function(){for(var l,c,O=[],g=0;g<arguments.length;g++)O[g]=arguments[g];var d=new Map;try{for(var w=o(O),b=w.next();!b.done;b=w.next()){var A=b.value;d.set(A,!0)}}catch(H){l={error:H}}finally{try{b&&!b.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}for(var _=this.list.next;_.data!==n.END;){var P=_.next;d.has(_.data)&&(_.prev.next=_.next,_.next.prev=_.prev,_.next=_.prev=null),_=P}},p.prototype.clear=function(){return this.list.next.prev=this.list.prev.next=null,this.list.next=this.list.prev=this.list,this},p.prototype[Symbol.iterator]=function(){var l;return e(this,function(c){switch(c.label){case 0:l=this.list.next,c.label=1;case 1:return l.data===n.END?[3,3]:[4,l.data];case 2:return c.sent(),l=l.next,[3,1];case 3:return[2]}})},p.prototype.reversed=function(){var l;return e(this,function(c){switch(c.label){case 0:l=this.list.prev,c.label=1;case 1:return l.data===n.END?[3,3]:[4,l.data];case 2:return c.sent(),l=l.prev,[3,1];case 3:return[2]}})},p.prototype.insert=function(l,c){c===void 0&&(c=null),c===null&&(c=this.isBefore.bind(this));for(var O=new i(l),g=this.list.next;g.data!==n.END&&c(g.data,O.data);)g=g.next;return O.prev=g.prev,O.next=g,g.prev.next=g.prev=O,this},p.prototype.sort=function(l){var c,O;l===void 0&&(l=null),l===null&&(l=this.isBefore.bind(this));var g=[];try{for(var d=o(this),w=d.next();!w.done;w=d.next()){var b=w.value;g.push(new p(b))}}catch(P){c={error:P}}finally{try{w&&!w.done&&(O=d.return)&&O.call(d)}finally{if(c)throw c.error}}for(this.list.next=this.list.prev=this.list;g.length>1;){var A=g.shift(),_=g.shift();A.merge(_,l),g.push(A)}return g.length&&(this.list=g[0].list),this},p.prototype.merge=function(l,c){var O,g,d,w,b;c===void 0&&(c=null),c===null&&(c=this.isBefore.bind(this));for(var A=this.list.next,_=l.list.next;A.data!==n.END&&_.data!==n.END;)c(_.data,A.data)?(O=t([A,_],2),_.prev.next=O[0],A.prev.next=O[1],g=t([A.prev,_.prev],2),_.prev=g[0],A.prev=g[1],d=t([l.list,this.list],2),this.list.prev.next=d[0],l.list.prev.next=d[1],w=t([l.list.prev,this.list.prev],2),this.list.prev=w[0],l.list.prev=w[1],b=t([_.next,A],2),A=b[0],_=b[1]):A=A.next;return _.data!==n.END&&(this.list.prev.next=l.list.next,l.list.next.prev=this.list.prev,l.list.prev.next=this.list,this.list.prev=l.list.prev,l.list.next=l.list.prev=l.list),this},p}();n.LinkedList=m})(ee);var Ne=M&&M.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(K,"__esModule",{value:!0});K.AbstractMathList=void 0;var Ce=ee,Fe=function(n){Ne(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.isBefore=function(t,r){return t.start.i<r.start.i||t.start.i===r.start.i&&t.start.n<r.start.n},e}(Ce.LinkedList);K.AbstractMathList=Fe;var it={},at={},Je=M&&M.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(at,"__esModule",{value:!0});at.AbstractNodeFactory=void 0;var Re=ie,Be=function(n){Je(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.create=function(t,r,o){return r===void 0&&(r={}),o===void 0&&(o=[]),this.node[t](r,o)},e}(Re.AbstractFactory);at.AbstractNodeFactory=Be;var st={},lt={},$e=M&&M.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tt=M&&M.__assign||function(){return tt=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},tt.apply(this,arguments)};Object.defineProperty(lt,"__esModule",{value:!0});lt.MmlMstyle=void 0;var jt=Y,W=te,Xe=function(n){$e(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"mstyle"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"notParent",{get:function(){return this.childNodes[0]&&this.childNodes[0].childNodes.length===1},enumerable:!1,configurable:!0}),e.prototype.setChildInheritedAttributes=function(t,r,o,i){var m=this.attributes.getExplicit("scriptlevel");m!=null&&(m=m.toString(),m.match(/^\s*[-+]/)?o+=parseInt(m):o=parseInt(m),i=!1);var p=this.attributes.getExplicit("displaystyle");p!=null&&(r=p===!0,i=!1);var l=this.attributes.getExplicit("data-cramped");l!=null&&(i=l),t=this.addInheritedAttributes(t,this.attributes.getAllAttributes()),this.childNodes[0].setInheritedAttributes(t,r,o,i)},e.defaults=tt(tt({},jt.AbstractMmlLayoutNode.defaults),{scriptlevel:W.INHERIT,displaystyle:W.INHERIT,scriptsizemultiplier:1/Math.sqrt(2),scriptminsize:"8px",mathbackground:W.INHERIT,mathcolor:W.INHERIT,dir:W.INHERIT,infixlinebreakstyle:"before"}),e}(jt.AbstractMmlLayoutNode);lt.MmlMstyle=Xe;var ut={},We=M&&M.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),et=M&&M.__assign||function(){return et=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},et.apply(this,arguments)};Object.defineProperty(ut,"__esModule",{value:!0});ut.MmlMaligngroup=void 0;var St=Y,ze=te,qe=function(n){We(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"maligngroup"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSpacelike",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setChildInheritedAttributes=function(t,r,o,i){t=this.addInheritedAttributes(t,this.attributes.getAllAttributes()),n.prototype.setChildInheritedAttributes.call(this,t,r,o,i)},e.defaults=et(et({},St.AbstractMmlLayoutNode.defaults),{groupalign:ze.INHERIT}),e}(St.AbstractMmlLayoutNode);ut.MmlMaligngroup=qe;var ct={},Ye=M&&M.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rt=M&&M.__assign||function(){return rt=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},rt.apply(this,arguments)};Object.defineProperty(ct,"__esModule",{value:!0});ct.MmlMalignmark=void 0;var Tt=Y,Ke=function(n){Ye(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"malignmark"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSpacelike",{get:function(){return!0},enumerable:!1,configurable:!0}),e.defaults=rt(rt({},Tt.AbstractMmlNode.defaults),{edge:"left"}),e}(Tt.AbstractMmlNode);ct.MmlMalignmark=Ke;var pt={},Ue=M&&M.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_t=M&&M.__assign||function(){return _t=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},_t.apply(this,arguments)};Object.defineProperty(pt,"__esModule",{value:!0});pt.MathChoice=void 0;var At=Y,Ge=function(n){Ue(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"MathChoice"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"arity",{get:function(){return 4},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"notParent",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.setInheritedAttributes=function(t,r,o,i){var m=r?0:Math.max(0,Math.min(o,2))+1,p=this.childNodes[m]||this.factory.create("mrow");this.parent.replaceChild(p,this),p.setInheritedAttributes(t,r,o,i)},e.defaults=_t({},At.AbstractMmlBaseNode.defaults),e}(At.AbstractMmlBaseNode);pt.MathChoice=Ge;var j;Object.defineProperty(st,"__esModule",{value:!0});st.MML=void 0;var U=Y,bt=le,Et=ue,Lt=ce,Dt=ae,Pt=pe,kt=fe,It=he,G=de,Ht=ye,Nt=ve,Ct=me,Ft=lt,Jt=Me,Rt=_e,Bt=ge,$t=xe,Xt=Oe,Wt=we,C=je,F=Se,J=Te,zt=Ae,Q=be,qt=Ee,Yt=ut,Kt=ct,Ut=Le,R=De,Gt=Pe,Qt=pt;st.MML=(j={},j[bt.MmlMath.prototype.kind]=bt.MmlMath,j[Et.MmlMi.prototype.kind]=Et.MmlMi,j[Lt.MmlMn.prototype.kind]=Lt.MmlMn,j[Dt.MmlMo.prototype.kind]=Dt.MmlMo,j[Pt.MmlMtext.prototype.kind]=Pt.MmlMtext,j[kt.MmlMspace.prototype.kind]=kt.MmlMspace,j[It.MmlMs.prototype.kind]=It.MmlMs,j[G.MmlMrow.prototype.kind]=G.MmlMrow,j[G.MmlInferredMrow.prototype.kind]=G.MmlInferredMrow,j[Ht.MmlMfrac.prototype.kind]=Ht.MmlMfrac,j[Nt.MmlMsqrt.prototype.kind]=Nt.MmlMsqrt,j[Ct.MmlMroot.prototype.kind]=Ct.MmlMroot,j[Ft.MmlMstyle.prototype.kind]=Ft.MmlMstyle,j[Jt.MmlMerror.prototype.kind]=Jt.MmlMerror,j[Rt.MmlMpadded.prototype.kind]=Rt.MmlMpadded,j[Bt.MmlMphantom.prototype.kind]=Bt.MmlMphantom,j[$t.MmlMfenced.prototype.kind]=$t.MmlMfenced,j[Xt.MmlMenclose.prototype.kind]=Xt.MmlMenclose,j[Wt.MmlMaction.prototype.kind]=Wt.MmlMaction,j[C.MmlMsub.prototype.kind]=C.MmlMsub,j[C.MmlMsup.prototype.kind]=C.MmlMsup,j[C.MmlMsubsup.prototype.kind]=C.MmlMsubsup,j[F.MmlMunder.prototype.kind]=F.MmlMunder,j[F.MmlMover.prototype.kind]=F.MmlMover,j[F.MmlMunderover.prototype.kind]=F.MmlMunderover,j[J.MmlMmultiscripts.prototype.kind]=J.MmlMmultiscripts,j[J.MmlMprescripts.prototype.kind]=J.MmlMprescripts,j[J.MmlNone.prototype.kind]=J.MmlNone,j[zt.MmlMtable.prototype.kind]=zt.MmlMtable,j[Q.MmlMlabeledtr.prototype.kind]=Q.MmlMlabeledtr,j[Q.MmlMtr.prototype.kind]=Q.MmlMtr,j[qt.MmlMtd.prototype.kind]=qt.MmlMtd,j[Yt.MmlMaligngroup.prototype.kind]=Yt.MmlMaligngroup,j[Kt.MmlMalignmark.prototype.kind]=Kt.MmlMalignmark,j[Ut.MmlMglyph.prototype.kind]=Ut.MmlMglyph,j[R.MmlSemantics.prototype.kind]=R.MmlSemantics,j[R.MmlAnnotation.prototype.kind]=R.MmlAnnotation,j[R.MmlAnnotationXML.prototype.kind]=R.MmlAnnotationXML,j[Gt.TeXAtom.prototype.kind]=Gt.TeXAtom,j[Qt.MathChoice.prototype.kind]=Qt.MathChoice,j[U.TextNode.prototype.kind]=U.TextNode,j[U.XMLNode.prototype.kind]=U.XMLNode,j);var Qe=M&&M.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(it,"__esModule",{value:!0});it.MmlFactory=void 0;var Ve=at,Ze=st,tr=function(n){Qe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"MML",{get:function(){return this.node},enumerable:!1,configurable:!0}),e.defaultNodes=Ze.MML,e}(Ve.AbstractNodeFactory);it.MmlFactory=tr;var $={},er=M&&M.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rr=M&&M.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nr=M&&M.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),o,i=[],m;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(p){m={error:p}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(m)throw m.error}}return i},or=M&&M.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))};Object.defineProperty($,"__esModule",{value:!0});$.BitFieldClass=$.BitField=void 0;var re=function(){function n(){this.bits=0}return n.allocate=function(){for(var e,t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];try{for(var i=rr(r),m=i.next();!m.done;m=i.next()){var p=m.value;if(this.has(p))throw new Error("Bit already allocated for "+p);if(this.next===n.MAXBIT)throw new Error("Maximum number of bits already allocated");this.names.set(p,this.next),this.next<<=1}}catch(l){e={error:l}}finally{try{m&&!m.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},n.has=function(e){return this.names.has(e)},n.prototype.set=function(e){this.bits|=this.getBit(e)},n.prototype.clear=function(e){this.bits&=~this.getBit(e)},n.prototype.isSet=function(e){return!!(this.bits&this.getBit(e))},n.prototype.reset=function(){this.bits=0},n.prototype.getBit=function(e){var t=this.constructor.names.get(e);if(!t)throw new Error("Unknown bit-field name: "+e);return t},n.MAXBIT=1<<31,n.next=1,n.names=new Map,n}();$.BitField=re;function ir(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=function(r){er(o,r);function o(){return r!==null&&r.apply(this,arguments)||this}return o}(re);return t.allocate.apply(t,or([],nr(n),!1)),t}$.BitFieldClass=ir;(function(n){var e=M&&M.__extends||function(){var h=function(a,u){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,f){s.__proto__=f}||function(s,f){for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&(s[y]=f[y])},h(a,u)};return function(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");h(a,u);function s(){this.constructor=a}a.prototype=u===null?Object.create(u):(s.prototype=u.prototype,new s)}}(),t=M&&M.__values||function(h){var a=typeof Symbol=="function"&&Symbol.iterator,u=a&&h[a],s=0;if(u)return u.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&s>=h.length&&(h=void 0),{value:h&&h[s++],done:!h}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},r=M&&M.__read||function(h,a){var u=typeof Symbol=="function"&&h[Symbol.iterator];if(!u)return h;var s=u.call(h),f,y=[],v;try{for(;(a===void 0||a-- >0)&&!(f=s.next()).done;)y.push(f.value)}catch(x){v={error:x}}finally{try{f&&!f.done&&(u=s.return)&&u.call(s)}finally{if(v)throw v.error}}return y},o=M&&M.__spreadArray||function(h,a,u){if(u||arguments.length===2)for(var s=0,f=a.length,y;s<f;s++)(y||!(s in a))&&(y||(y=Array.prototype.slice.call(a,0,s)),y[s]=a[s]);return h.concat(y||Array.prototype.slice.call(a))};Object.defineProperty(n,"__esModule",{value:!0}),n.AbstractMathDocument=n.resetAllOptions=n.resetOptions=n.RenderList=void 0;var i=gt,m=se,p=ke,l=K,c=xt,O=it,g=$,d=Ie,w=function(h){e(a,h);function a(){return h!==null&&h.apply(this,arguments)||this}return a.create=function(u){var s,f,y=new this;try{for(var v=t(Object.keys(u)),x=v.next();!x.done;x=v.next()){var S=x.value,T=r(this.action(S,u[S]),2),E=T[0],D=T[1];D&&y.add(E,D)}}catch(L){s={error:L}}finally{try{x&&!x.done&&(f=v.return)&&f.call(v)}finally{if(s)throw s.error}}return y},a.action=function(u,s){var f,y,v,x,S,T,E=!0,D=s[0];if(s.length===1||typeof s[1]=="boolean")s.length===2&&(E=s[1]),f=r(this.methodActions(u),2),S=f[0],T=f[1];else if(typeof s[1]=="string")if(typeof s[2]=="string"){s.length===4&&(E=s[3]);var L=r(s.slice(1),2),I=L[0],k=L[1];y=r(this.methodActions(I,k),2),S=y[0],T=y[1]}else s.length===3&&(E=s[2]),v=r(this.methodActions(s[1]),2),S=v[0],T=v[1];else s.length===4&&(E=s[3]),x=r(s.slice(1),2),S=x[0],T=x[1];return[{id:u,renderDoc:S,renderMath:T,convert:E},D]},a.methodActions=function(u,s){return s===void 0&&(s=u),[function(f){return u&&f[u](),!1},function(f,y){return s&&f[s](y),!1}]},a.prototype.renderDoc=function(u,s){var f,y;s===void 0&&(s=c.STATE.UNPROCESSED);try{for(var v=t(this.items),x=v.next();!x.done;x=v.next()){var S=x.value;if(S.priority>=s&&S.item.renderDoc(u))return}}catch(T){f={error:T}}finally{try{x&&!x.done&&(y=v.return)&&y.call(v)}finally{if(f)throw f.error}}},a.prototype.renderMath=function(u,s,f){var y,v;f===void 0&&(f=c.STATE.UNPROCESSED);try{for(var x=t(this.items),S=x.next();!S.done;S=x.next()){var T=S.value;if(T.priority>=f&&T.item.renderMath(u,s))return}}catch(E){y={error:E}}finally{try{S&&!S.done&&(v=x.return)&&v.call(x)}finally{if(y)throw y.error}}},a.prototype.renderConvert=function(u,s,f){var y,v;f===void 0&&(f=c.STATE.LAST);try{for(var x=t(this.items),S=x.next();!S.done;S=x.next()){var T=S.value;if(T.priority>f||T.item.convert&&T.item.renderMath(u,s))return}}catch(E){y={error:E}}finally{try{S&&!S.done&&(v=x.return)&&v.call(x)}finally{if(y)throw y.error}}},a.prototype.findID=function(u){var s,f;try{for(var y=t(this.items),v=y.next();!v.done;v=y.next()){var x=v.value;if(x.item.id===u)return x.item}}catch(S){s={error:S}}finally{try{v&&!v.done&&(f=y.return)&&f.call(y)}finally{if(s)throw s.error}}return null},a}(d.PrioritizedList);n.RenderList=w,n.resetOptions={all:!1,processed:!1,inputJax:null,outputJax:null},n.resetAllOptions={all:!0,processed:!0,inputJax:[],outputJax:[]};var b=function(h){e(a,h);function a(){return h!==null&&h.apply(this,arguments)||this}return a.prototype.compile=function(u){return null},a}(m.AbstractInputJax),A=function(h){e(a,h);function a(){return h!==null&&h.apply(this,arguments)||this}return a.prototype.typeset=function(u,s){return null},a.prototype.escaped=function(u,s){return null},a}(p.AbstractOutputJax),_=function(h){e(a,h);function a(){return h!==null&&h.apply(this,arguments)||this}return a}(l.AbstractMathList),P=function(h){e(a,h);function a(){return h!==null&&h.apply(this,arguments)||this}return a}(c.AbstractMathItem),H=function(){function h(a,u,s){var f=this,y=this.constructor;this.document=a,this.options=(0,i.userOptions)((0,i.defaultOptions)({},y.OPTIONS),s),this.math=new(this.options.MathList||_),this.renderActions=w.create(this.options.renderActions),this.processed=new h.ProcessBits,this.outputJax=this.options.OutputJax||new A;var v=this.options.InputJax||[new b];Array.isArray(v)||(v=[v]),this.inputJax=v,this.adaptor=u,this.outputJax.setAdaptor(u),this.inputJax.map(function(x){return x.setAdaptor(u)}),this.mmlFactory=this.options.MmlFactory||new O.MmlFactory,this.inputJax.map(function(x){return x.setMmlFactory(f.mmlFactory)}),this.outputJax.initialize(),this.inputJax.map(function(x){return x.initialize()})}return Object.defineProperty(h.prototype,"kind",{get:function(){return this.constructor.KIND},enumerable:!1,configurable:!0}),h.prototype.addRenderAction=function(a){for(var u=[],s=1;s<arguments.length;s++)u[s-1]=arguments[s];var f=r(w.action(a,u),2),y=f[0],v=f[1];this.renderActions.add(y,v)},h.prototype.removeRenderAction=function(a){var u=this.renderActions.findID(a);u&&this.renderActions.remove(u)},h.prototype.render=function(){return this.renderActions.renderDoc(this),this},h.prototype.rerender=function(a){return a===void 0&&(a=c.STATE.RERENDER),this.state(a-1),this.render(),this},h.prototype.convert=function(a,u){u===void 0&&(u={});var s=(0,i.userOptions)({format:this.inputJax[0].name,display:!0,end:c.STATE.LAST,em:16,ex:8,containerWidth:null,lineWidth:1e6,scale:1,family:""},u),f=s.format,y=s.display,v=s.end,x=s.ex,S=s.em,T=s.containerWidth,E=s.lineWidth,D=s.scale,L=s.family;T===null&&(T=80*x);var I=this.inputJax.reduce(function(X,wt){return wt.name===f?wt:X},null),k=new this.options.MathItem(a,I,y);return k.start.node=this.adaptor.body(this.document),k.setMetrics(S,x,T,E,D),this.outputJax.options.mtextInheritFont&&(k.outputData.mtextFamily=L),this.outputJax.options.merrorInheritFont&&(k.outputData.merrorFamily=L),k.convert(this,v),k.typesetRoot||k.root},h.prototype.findMath=function(a){return this.processed.set("findMath"),this},h.prototype.compile=function(){var a,u,s,f;if(!this.processed.isSet("compile")){var y=[];try{for(var v=t(this.math),x=v.next();!x.done;x=v.next()){var S=x.value;this.compileMath(S),S.inputData.recompile!==void 0&&y.push(S)}}catch(L){a={error:L}}finally{try{x&&!x.done&&(u=v.return)&&u.call(v)}finally{if(a)throw a.error}}try{for(var T=t(y),E=T.next();!E.done;E=T.next()){var S=E.value,D=S.inputData.recompile;S.state(D.state),S.inputData.recompile=D,this.compileMath(S)}}catch(L){s={error:L}}finally{try{E&&!E.done&&(f=T.return)&&f.call(T)}finally{if(s)throw s.error}}this.processed.set("compile")}return this},h.prototype.compileMath=function(a){try{a.compile(this)}catch(u){if(u.retry||u.restart)throw u;this.options.compileError(this,a,u),a.inputData.error=u}},h.prototype.compileError=function(a,u){a.root=this.mmlFactory.create("math",null,[this.mmlFactory.create("merror",{"data-mjx-error":u.message,title:u.message},[this.mmlFactory.create("mtext",null,[this.mmlFactory.create("text").setText("Math input error")])])]),a.display&&a.root.attributes.set("display","block"),a.inputData.error=u.message},h.prototype.typeset=function(){var a,u;if(!this.processed.isSet("typeset")){try{for(var s=t(this.math),f=s.next();!f.done;f=s.next()){var y=f.value;try{y.typeset(this)}catch(v){if(v.retry||v.restart)throw v;this.options.typesetError(this,y,v),y.outputData.error=v}}}catch(v){a={error:v}}finally{try{f&&!f.done&&(u=s.return)&&u.call(s)}finally{if(a)throw a.error}}this.processed.set("typeset")}return this},h.prototype.typesetError=function(a,u){a.typesetRoot=this.adaptor.node("mjx-container",{class:"MathJax mjx-output-error",jax:this.outputJax.name},[this.adaptor.node("span",{"data-mjx-error":u.message,title:u.message,style:{color:"red","background-color":"yellow","line-height":"normal"}},[this.adaptor.text("Math output error")])]),a.display&&this.adaptor.setAttributes(a.typesetRoot,{style:{display:"block",margin:"1em 0","text-align":"center"}}),a.outputData.error=u.message},h.prototype.getMetrics=function(){return this.processed.isSet("getMetrics")||(this.outputJax.getMetrics(this),this.processed.set("getMetrics")),this},h.prototype.updateDocument=function(){var a,u;if(!this.processed.isSet("updateDocument")){try{for(var s=t(this.math.reversed()),f=s.next();!f.done;f=s.next()){var y=f.value;y.updateDocument(this)}}catch(v){a={error:v}}finally{try{f&&!f.done&&(u=s.return)&&u.call(s)}finally{if(a)throw a.error}}this.processed.set("updateDocument")}return this},h.prototype.removeFromDocument=function(a){return this},h.prototype.state=function(a,u){var s,f;u===void 0&&(u=!1);try{for(var y=t(this.math),v=y.next();!v.done;v=y.next()){var x=v.value;x.state(a,u)}}catch(S){s={error:S}}finally{try{v&&!v.done&&(f=y.return)&&f.call(y)}finally{if(s)throw s.error}}return a<c.STATE.INSERTED&&this.processed.clear("updateDocument"),a<c.STATE.TYPESET&&(this.processed.clear("typeset"),this.processed.clear("getMetrics")),a<c.STATE.COMPILED&&this.processed.clear("compile"),this},h.prototype.reset=function(a){var u;return a===void 0&&(a={processed:!0}),a=(0,i.userOptions)(Object.assign({},n.resetOptions),a),a.all&&Object.assign(a,n.resetAllOptions),a.processed&&this.processed.reset(),a.inputJax&&this.inputJax.forEach(function(s){return s.reset.apply(s,o([],r(a.inputJax),!1))}),a.outputJax&&(u=this.outputJax).reset.apply(u,o([],r(a.outputJax),!1)),this},h.prototype.clear=function(){return this.reset(),this.math.clear(),this},h.prototype.concat=function(a){return this.math.merge(a),this},h.prototype.clearMathItemsWithin=function(a){var u,s=this.getMathItemsWithin(a);return(u=this.math).remove.apply(u,o([],r(s),!1)),s},h.prototype.getMathItemsWithin=function(a){var u,s,f,y;Array.isArray(a)||(a=[a]);var v=this.adaptor,x=[],S=v.getElements(a,this.document);try{t:for(var T=t(this.math),E=T.next();!E.done;E=T.next()){var D=E.value;try{for(var L=(f=void 0,t(S)),I=L.next();!I.done;I=L.next()){var k=I.value;if(D.start.node&&v.contains(k,D.start.node)){x.push(D);continue t}}}catch(X){f={error:X}}finally{try{I&&!I.done&&(y=L.return)&&y.call(L)}finally{if(f)throw f.error}}}}catch(X){u={error:X}}finally{try{E&&!E.done&&(s=T.return)&&s.call(T)}finally{if(u)throw u.error}}return x},h.KIND="MathDocument",h.OPTIONS={OutputJax:null,InputJax:null,MmlFactory:null,MathList:_,MathItem:P,compileError:function(a,u,s){a.compileError(u,s)},typesetError:function(a,u,s){a.typesetError(u,s)},renderActions:(0,i.expandable)({find:[c.STATE.FINDMATH,"findMath","",!1],compile:[c.STATE.COMPILED],metrics:[c.STATE.METRICS,"getMetrics","",!1],typeset:[c.STATE.TYPESET],update:[c.STATE.INSERTED,"updateDocument",!1]})},h.ProcessBits=(0,g.BitFieldClass)("findMath","compile","getMetrics","typeset","updateDocument"),h}();n.AbstractMathDocument=H})(Ot);var ar=M&&M.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(ot,"__esModule",{value:!0});ot.AbstractHandler=void 0;var sr=Ot,lr=function(n){ar(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(sr.AbstractMathDocument),ur=function(){function n(e,t){t===void 0&&(t=5),this.documentClass=lr,this.adaptor=e,this.priority=t}return Object.defineProperty(n.prototype,"name",{get:function(){return this.constructor.NAME},enumerable:!1,configurable:!0}),n.prototype.handlesDocument=function(e){return!1},n.prototype.create=function(e,t){return new this.documentClass(e,this.adaptor,t)},n.NAME="generic",n}();ot.AbstractHandler=ur;var ft={},ht={},cr=M&&M.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(ht,"__esModule",{value:!0});ht.HTMLMathItem=void 0;var V=xt,pr=function(n){cr(e,n);function e(t,r,o,i,m){return o===void 0&&(o=!0),i===void 0&&(i={node:null,n:0,delim:""}),m===void 0&&(m={node:null,n:0,delim:""}),n.call(this,t,r,o,i,m)||this}return Object.defineProperty(e.prototype,"adaptor",{get:function(){return this.inputJax.adaptor},enumerable:!1,configurable:!0}),e.prototype.updateDocument=function(t){if(this.state()<V.STATE.INSERTED){if(this.inputJax.processStrings){var r=this.start.node;if(r===this.end.node)this.end.n&&this.end.n<this.adaptor.value(this.end.node).length&&this.adaptor.split(this.end.node,this.end.n),this.start.n&&(r=this.adaptor.split(this.start.node,this.start.n)),this.adaptor.replace(this.typesetRoot,r);else{for(this.start.n&&(r=this.adaptor.split(r,this.start.n));r!==this.end.node;){var o=this.adaptor.next(r);this.adaptor.remove(r),r=o}this.adaptor.insert(this.typesetRoot,r),this.end.n<this.adaptor.value(r).length&&this.adaptor.split(r,this.end.n),this.adaptor.remove(r)}}else this.adaptor.replace(this.typesetRoot,this.start.node);this.start.node=this.end.node=this.typesetRoot,this.start.n=this.end.n=0,this.state(V.STATE.INSERTED)}},e.prototype.updateStyleSheet=function(t){t.addStyleSheet()},e.prototype.removeFromDocument=function(t){if(t===void 0&&(t=!1),this.state()>=V.STATE.TYPESET){var r=this.adaptor,o=this.start.node,i=r.text("");if(t){var m=this.start.delim+this.math+this.end.delim;if(this.inputJax.processStrings)i=r.text(m);else{var p=r.parse(m,"text/html");i=r.firstChild(r.body(p))}}r.parent(o)&&r.replace(i,o),this.start.node=this.end.node=i,this.start.n=this.end.n=0}},e}(V.AbstractMathItem);ht.HTMLMathItem=pr;var dt={},fr=M&&M.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(dt,"__esModule",{value:!0});dt.HTMLMathList=void 0;var hr=K,dr=function(n){fr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(hr.AbstractMathList);dt.HTMLMathList=dr;var yt={},Vt=M&&M.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),o,i=[],m;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(p){m={error:p}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(m)throw m.error}}return i};Object.defineProperty(yt,"__esModule",{value:!0});yt.HTMLDomStrings=void 0;var z=gt,yr=function(){function n(e){e===void 0&&(e=null);var t=this.constructor;this.options=(0,z.userOptions)((0,z.defaultOptions)({},t.OPTIONS),e),this.init(),this.getPatterns()}return n.prototype.init=function(){this.strings=[],this.string="",this.snodes=[],this.nodes=[],this.stack=[]},n.prototype.getPatterns=function(){var e=(0,z.makeArray)(this.options.skipHtmlTags),t=(0,z.makeArray)(this.options.ignoreHtmlClass),r=(0,z.makeArray)(this.options.processHtmlClass);this.skipHtmlTags=new RegExp("^(?:"+e.join("|")+")$","i"),this.ignoreHtmlClass=new RegExp("(?:^| )(?:"+t.join("|")+")(?: |$)"),this.processHtmlClass=new RegExp("(?:^| )(?:"+r+")(?: |$)")},n.prototype.pushString=function(){this.string.match(/\S/)&&(this.strings.push(this.string),this.nodes.push(this.snodes)),this.string="",this.snodes=[]},n.prototype.extendString=function(e,t){this.snodes.push([e,t.length]),this.string+=t},n.prototype.handleText=function(e,t){return t||this.extendString(e,this.adaptor.value(e)),this.adaptor.next(e)},n.prototype.handleTag=function(e,t){if(!t){var r=this.options.includeHtmlTags[this.adaptor.kind(e)];this.extendString(e,r)}return this.adaptor.next(e)},n.prototype.handleContainer=function(e,t){this.pushString();var r=this.adaptor.getAttribute(e,"class")||"",o=this.adaptor.kind(e)||"",i=this.processHtmlClass.exec(r),m=e;return this.adaptor.firstChild(e)&&!this.adaptor.getAttribute(e,"data-MJX")&&(i||!this.skipHtmlTags.exec(o))?(this.adaptor.next(e)&&this.stack.push([this.adaptor.next(e),t]),m=this.adaptor.firstChild(e),t=(t||this.ignoreHtmlClass.exec(r))&&!i):m=this.adaptor.next(e),[m,t]},n.prototype.handleOther=function(e,t){return this.pushString(),this.adaptor.next(e)},n.prototype.find=function(e){var t,r;this.init();for(var o=this.adaptor.next(e),i=!1,m=this.options.includeHtmlTags;e&&e!==o;){var p=this.adaptor.kind(e);p==="#text"?e=this.handleText(e,i):m.hasOwnProperty(p)?e=this.handleTag(e,i):p?(t=Vt(this.handleContainer(e,i),2),e=t[0],i=t[1]):e=this.handleOther(e,i),!e&&this.stack.length&&(this.pushString(),r=Vt(this.stack.pop(),2),e=r[0],i=r[1])}this.pushString();var l=[this.strings,this.nodes];return this.init(),l},n.OPTIONS={skipHtmlTags:["script","noscript","style","textarea","pre","code","annotation","annotation-xml"],includeHtmlTags:{br:`
`,wbr:"","#comment":""},ignoreHtmlClass:"mathjax_ignore",processHtmlClass:"mathjax_process"},n}();yt.HTMLDomStrings=yr;var vr=M&&M.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),B=M&&M.__assign||function(){return B=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},B.apply(this,arguments)},Z=M&&M.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),o,i=[],m;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(p){m={error:p}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(m)throw m.error}}return i},N=M&&M.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ft,"__esModule",{value:!0});ft.HTMLDocument=void 0;var vt=Ot,mt=gt,mr=ht,Mr=dt,Zt=yt,Mt=xt,_r=function(n){vr(e,n);function e(t,r,o){var i=this,m=Z((0,mt.separateOptions)(o,Zt.HTMLDomStrings.OPTIONS),2),p=m[0],l=m[1];return i=n.call(this,t,r,p)||this,i.domStrings=i.options.DomStrings||new Zt.HTMLDomStrings(l),i.domStrings.adaptor=r,i.styles=[],i}return e.prototype.findPosition=function(t,r,o,i){var m,p,l=this.adaptor;try{for(var c=N(i[t]),O=c.next();!O.done;O=c.next()){var g=O.value,d=Z(g,2),w=d[0],b=d[1];if(r<=b&&l.kind(w)==="#text")return{node:w,n:Math.max(r,0),delim:o};r-=b}}catch(A){m={error:A}}finally{try{O&&!O.done&&(p=c.return)&&p.call(c)}finally{if(m)throw m.error}}return{node:null,n:0,delim:o}},e.prototype.mathItem=function(t,r,o){var i=t.math,m=this.findPosition(t.n,t.start.n,t.open,o),p=this.findPosition(t.n,t.end.n,t.close,o);return new this.options.MathItem(i,r,t.display,m,p)},e.prototype.findMath=function(t){var r,o,i,m,p,l,c,O,g;if(!this.processed.isSet("findMath")){this.adaptor.document=this.document,t=(0,mt.userOptions)({elements:this.options.elements||[this.adaptor.body(this.document)]},t);try{for(var d=N(this.adaptor.getElements(t.elements,this.document)),w=d.next();!w.done;w=d.next()){var b=w.value,A=Z([null,null],2),_=A[0],P=A[1];try{for(var H=(i=void 0,N(this.inputJax)),h=H.next();!h.done;h=H.next()){var a=h.value,u=new this.options.MathList;if(a.processStrings){_===null&&(p=Z(this.domStrings.find(b),2),_=p[0],P=p[1]);try{for(var s=(l=void 0,N(a.findMath(_))),f=s.next();!f.done;f=s.next()){var y=f.value;u.push(this.mathItem(y,a,P))}}catch(T){l={error:T}}finally{try{f&&!f.done&&(c=s.return)&&c.call(s)}finally{if(l)throw l.error}}}else try{for(var v=(O=void 0,N(a.findMath(b))),x=v.next();!x.done;x=v.next()){var y=x.value,S=new this.options.MathItem(y.math,a,y.display,y.start,y.end);u.push(S)}}catch(T){O={error:T}}finally{try{x&&!x.done&&(g=v.return)&&g.call(v)}finally{if(O)throw O.error}}this.math.merge(u)}}catch(T){i={error:T}}finally{try{h&&!h.done&&(m=H.return)&&m.call(H)}finally{if(i)throw i.error}}}}catch(T){r={error:T}}finally{try{w&&!w.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}this.processed.set("findMath")}return this},e.prototype.updateDocument=function(){return this.processed.isSet("updateDocument")||(this.addPageElements(),this.addStyleSheet(),n.prototype.updateDocument.call(this),this.processed.set("updateDocument")),this},e.prototype.addPageElements=function(){var t=this.adaptor.body(this.document),r=this.documentPageElements();r&&this.adaptor.append(t,r)},e.prototype.addStyleSheet=function(){var t=this.documentStyleSheet(),r=this.adaptor;if(t&&!r.parent(t)){var o=r.head(this.document),i=this.findSheet(o,r.getAttribute(t,"id"));i?r.replace(t,i):r.append(o,t)}},e.prototype.findSheet=function(t,r){var o,i;if(r)try{for(var m=N(this.adaptor.tags(t,"style")),p=m.next();!p.done;p=m.next()){var l=p.value;if(this.adaptor.getAttribute(l,"id")===r)return l}}catch(c){o={error:c}}finally{try{p&&!p.done&&(i=m.return)&&i.call(m)}finally{if(o)throw o.error}}return null},e.prototype.removeFromDocument=function(t){var r,o;if(t===void 0&&(t=!1),this.processed.isSet("updateDocument"))try{for(var i=N(this.math),m=i.next();!m.done;m=i.next()){var p=m.value;p.state()>=Mt.STATE.INSERTED&&p.state(Mt.STATE.TYPESET,t)}}catch(l){r={error:l}}finally{try{m&&!m.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return this.processed.clear("updateDocument"),this},e.prototype.documentStyleSheet=function(){return this.outputJax.styleSheet(this)},e.prototype.documentPageElements=function(){return this.outputJax.pageElements(this)},e.prototype.addStyles=function(t){this.styles.push(t)},e.prototype.getStyles=function(){return this.styles},e.KIND="HTML",e.OPTIONS=B(B({},vt.AbstractMathDocument.OPTIONS),{renderActions:(0,mt.expandable)(B(B({},vt.AbstractMathDocument.OPTIONS.renderActions),{styles:[Mt.STATE.INSERTED+1,"","updateStyleSheet",!1]})),MathList:Mr.HTMLMathList,MathItem:mr.HTMLMathItem,DomStrings:null}),e}(vt.AbstractMathDocument);ft.HTMLDocument=_r;var gr=M&&M.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(nt,"__esModule",{value:!0});nt.HTMLHandler=void 0;var xr=ot,Or=ft,wr=function(n){gr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.documentClass=Or.HTMLDocument,t}return e.prototype.handlesDocument=function(t){var r=this.adaptor;if(typeof t=="string")try{t=r.parse(t,"text/html")}catch{}return t instanceof r.window.Document||t instanceof r.window.HTMLElement||t instanceof r.window.DocumentFragment},e.prototype.create=function(t,r){var o=this.adaptor;if(typeof t=="string")t=o.parse(t,"text/html");else if(t instanceof o.window.HTMLElement||t instanceof o.window.DocumentFragment){var i=t;t=o.parse("","text/html"),o.append(o.body(t),i)}return n.prototype.create.call(this,t,r)},e}(xr.AbstractHandler);nt.HTMLHandler=wr;Object.defineProperty(q,"__esModule",{value:!0});var ne=q.RegisterHTMLHandler=void 0,jr=oe,Sr=nt;function Tr(n){var e=new Sr.HTMLHandler(n);return jr.mathjax.handlers.register(e),e}ne=q.RegisterHTMLHandler=Tr;const Ir=He({__proto__:null,get RegisterHTMLHandler(){return ne},default:q},[q]);export{Ir as h};
