import{r as nt,B as ot,S as I,C as B,b as $,N as K,T as R,c as Y,d as Pt,e as yt,_ as Qt,a as ue,f as fa,g as pr,h as ce,i as ma,P as ha,E as va}from"./C1GScrpu.js";import{c as v}from"./CBhUi2SX.js";import{M as vt,O as Kt}from"./z10Dua7R.js";import{l as on}from"./BY--hmdE.js";import{R as pa}from"./BA1yty_9.js";function ga(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const o=Object.getOwnPropertyDescriptor(r,a);o&&Object.defineProperty(t,a,o.get?o:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var $t={},_a={};(function(t){var e=v&&v.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionConfiguration=t.ActionMethods=void 0;var n=B,r=e(nt()),a=I,o=e(ot);t.ActionMethods={},t.ActionMethods.Macro=o.default.Macro,t.ActionMethods.Toggle=function(l,u){for(var d=[],h;(h=l.GetArgument(u))!=="\\endtoggle";)d.push(new r.default(h,l.stack.env,l.configuration).mml());l.Push(l.create("node","maction",d,{actiontype:"toggle"}))},t.ActionMethods.Mathtip=function(l,u){var d=l.ParseArg(u),h=l.ParseArg(u);l.Push(l.create("node","maction",[d,h],{actiontype:"tooltip"}))},new a.CommandMap("action-macros",{toggle:"Toggle",mathtip:"Mathtip",texttip:["Macro","\\mathtip{#1}{\\text{#2}}",2]},t.ActionMethods),t.ActionConfiguration=n.Configuration.create("action",{handler:{macro:["action-macros"]}})})(_a);var qt={},bt={},gr=v&&v.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ke=v&&v.__assign||function(){return Ke=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Ke.apply(this,arguments)},ln=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bt,"__esModule",{value:!0});bt.FlalignItem=bt.MultlineItem=void 0;var _r=Pt,ya=ln($()),et=ln(K),yr=ln(R),qe=Y,xa=function(t){gr(e,t);function e(n){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];var o=t.call(this,n)||this;return o.factory.configuration.tags.start("multline",!0,r[0]),o}return Object.defineProperty(e.prototype,"kind",{get:function(){return"multline"},enumerable:!1,configurable:!0}),e.prototype.EndEntry=function(){this.table.length&&ya.default.fixInitialMO(this.factory.configuration,this.nodes);var n=this.getProperty("shove"),r=this.create("node","mtd",this.nodes,n?{columnalign:n}:{});this.setProperty("shove",null),this.row.push(r),this.Clear()},e.prototype.EndRow=function(){if(this.row.length!==1)throw new yr.default("MultlineRowsOneCol","The rows within the %1 environment must have exactly one column","multline");var n=this.create("node","mtr",this.row);this.table.push(n),this.row=[]},e.prototype.EndTable=function(){if(t.prototype.EndTable.call(this),this.table.length){var n=this.table.length-1,r=-1;et.default.getAttribute(et.default.getChildren(this.table[0])[0],"columnalign")||et.default.setAttribute(et.default.getChildren(this.table[0])[0],"columnalign",qe.TexConstant.Align.LEFT),et.default.getAttribute(et.default.getChildren(this.table[n])[0],"columnalign")||et.default.setAttribute(et.default.getChildren(this.table[n])[0],"columnalign",qe.TexConstant.Align.RIGHT);var a=this.factory.configuration.tags.getTag();if(a){r=this.arraydef.side===qe.TexConstant.Align.LEFT?0:this.table.length-1;var o=this.table[r],l=this.create("node","mlabeledtr",[a].concat(et.default.getChildren(o)));et.default.copyAttributes(o,l),this.table[r]=l}}this.factory.configuration.tags.end()},e}(_r.ArrayItem);bt.MultlineItem=xa;var Ma=function(t){gr(e,t);function e(n,r,a,o,l){var u=t.call(this,n)||this;return u.name=r,u.numbered=a,u.padded=o,u.center=l,u.factory.configuration.tags.start(r,a,a),u}return Object.defineProperty(e.prototype,"kind",{get:function(){return"flalign"},enumerable:!1,configurable:!0}),e.prototype.EndEntry=function(){t.prototype.EndEntry.call(this);var n=this.getProperty("xalignat");if(n&&this.row.length>n)throw new yr.default("XalignOverflow","Extra %1 in row of %2","&",this.name)},e.prototype.EndRow=function(){for(var n,r=this.row,a=this.getProperty("xalignat");r.length<a;)r.push(this.create("node","mtd"));for(this.row=[],this.padded&&this.row.push(this.create("node","mtd"));n=r.shift();)this.row.push(n),n=r.shift(),n&&this.row.push(n),(r.length||this.padded)&&this.row.push(this.create("node","mtd"));this.row.length>this.maxrow&&(this.maxrow=this.row.length),t.prototype.EndRow.call(this);var o=this.table[this.table.length-1];if(this.getProperty("zeroWidthLabel")&&o.isKind("mlabeledtr")){var l=et.default.getChildren(o)[0],u=this.factory.configuration.options.tagSide,d=Ke({width:0},u==="right"?{lspace:"-1width"}:{}),h=this.create("node","mpadded",et.default.getChildren(l),d);l.setChildren([h])}},e.prototype.EndTable=function(){if(t.prototype.EndTable.call(this),this.center&&this.maxrow<=2){var n=this.arraydef;delete n.width,delete this.global.indentalign}},e}(_r.EqnArrayItem);bt.FlalignItem=Ma;var It={};(function(t){var e=v&&v.__assign||function(){return e=Object.assign||function(s){for(var _,i=1,f=arguments.length;i<f;i++){_=arguments[i];for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(s[x]=_[x])}return s},e.apply(this,arguments)},n=v&&v.__read||function(s,_){var i=typeof Symbol=="function"&&s[Symbol.iterator];if(!i)return s;var f=i.call(s),x,M=[],C;try{for(;(_===void 0||_-- >0)&&!(x=f.next()).done;)M.push(x.value)}catch(A){C={error:A}}finally{try{x&&!x.done&&(i=f.return)&&i.call(f)}finally{if(C)throw C.error}}return M},r=v&&v.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.NEW_OPS=t.AmsMethods=void 0;var a=r($()),o=r(yt),l=r(K),u=Y,d=r(nt()),h=r(R),p=Qt,g=r(ot),c=vt;t.AmsMethods={},t.AmsMethods.AmsEqnArray=function(s,_,i,f,x,M,C){var A=s.GetBrackets("\\begin{"+_.getName()+"}"),P=g.default.EqnArray(s,_,i,f,x,M,C);return a.default.setArrayAlign(P,A)},t.AmsMethods.AlignAt=function(s,_,i,f){var x=_.getName(),M,C,A="",P=[];if(f||(C=s.GetBrackets("\\begin{"+x+"}")),M=s.GetArgument("\\begin{"+x+"}"),M.match(/[^0-9]/))throw new h.default("PositiveIntegerArg","Argument to %1 must me a positive integer","\\begin{"+x+"}");for(var T=parseInt(M,10);T>0;)A+="rl",P.push("0em 0em"),T--;var E=P.join(" ");if(f)return t.AmsMethods.EqnArray(s,_,i,f,A,E);var N=t.AmsMethods.EqnArray(s,_,i,f,A,E);return a.default.setArrayAlign(N,C)},t.AmsMethods.Multline=function(s,_,i){s.Push(_),a.default.checkEqnEnv(s);var f=s.itemFactory.create("multline",i,s.stack);return f.arraydef={displaystyle:!0,rowspacing:".5em",columnspacing:"100%",width:s.options.ams.multlineWidth,side:s.options.tagSide,minlabelspacing:s.options.tagIndent,framespacing:s.options.ams.multlineIndent+" 0",frame:"","data-width-includes-label":!0},f},t.AmsMethods.XalignAt=function(s,_,i,f){var x=s.GetArgument("\\begin{"+_.getName()+"}");if(x.match(/[^0-9]/))throw new h.default("PositiveIntegerArg","Argument to %1 must me a positive integer","\\begin{"+_.getName()+"}");var M=f?"crl":"rlc",C=f?"fit auto auto":"auto auto fit",A=t.AmsMethods.FlalignArray(s,_,i,f,!1,M,C,!0);return A.setProperty("xalignat",2*parseInt(x)),A},t.AmsMethods.FlalignArray=function(s,_,i,f,x,M,C,A){A===void 0&&(A=!1),s.Push(_),a.default.checkEqnEnv(s),M=M.split("").join(" ").replace(/r/g,"right").replace(/l/g,"left").replace(/c/g,"center");var P=s.itemFactory.create("flalign",_.getName(),i,f,x,s.stack);return P.arraydef={width:"100%",displaystyle:!0,columnalign:M,columnspacing:"0em",columnwidth:C,rowspacing:"3pt",side:s.options.tagSide,minlabelspacing:A?"0":s.options.tagIndent,"data-width-includes-label":!0},P.setProperty("zeroWidthLabel",A),P},t.NEW_OPS="ams-declare-ops",t.AmsMethods.HandleDeclareOp=function(s,_){var i=s.GetStar()?"*":"",f=a.default.trimSpaces(s.GetArgument(_));f.charAt(0)==="\\"&&(f=f.substr(1));var x=s.GetArgument(_);s.configuration.handlers.retrieve(t.NEW_OPS).add(f,new p.Macro(f,t.AmsMethods.Macro,["\\operatorname".concat(i,"{").concat(x,"}")]))},t.AmsMethods.HandleOperatorName=function(s,_){var i=s.GetStar(),f=a.default.trimSpaces(s.GetArgument(_)),x=new d.default(f,e(e({},s.stack.env),{font:u.TexConstant.Variant.NORMAL,multiLetterIdentifiers:/^[-*a-z]+/i,operatorLetters:!0}),s.configuration).mml();if(x.isKind("mi")||(x=s.create("node","TeXAtom",[x])),l.default.setProperties(x,{movesupsub:i,movablelimits:!0,texClass:c.TEXCLASS.OP}),!i){var M=s.GetNext(),C=s.i;M==="\\"&&++s.i&&s.GetCS()!=="limits"&&(s.i=C)}s.Push(x)},t.AmsMethods.SideSet=function(s,_){var i=n(y(s.ParseArg(_)),2),f=i[0],x=i[1],M=n(y(s.ParseArg(_)),2),C=M[0],A=M[1],P=s.ParseArg(_),T=P;f&&(x?f.replaceChild(s.create("node","mphantom",[s.create("node","mpadded",[a.default.copyNode(P,s)],{width:0})]),l.default.getChildAt(f,0)):(T=s.create("node","mmultiscripts",[P]),C&&l.default.appendChildren(T,[l.default.getChildAt(C,1)||s.create("node","none"),l.default.getChildAt(C,2)||s.create("node","none")]),l.default.setProperty(T,"scriptalign","left"),l.default.appendChildren(T,[s.create("node","mprescripts"),l.default.getChildAt(f,1)||s.create("node","none"),l.default.getChildAt(f,2)||s.create("node","none")]))),C&&T===P&&(C.replaceChild(P,l.default.getChildAt(C,0)),T=C);var E=s.create("node","TeXAtom",[],{texClass:c.TEXCLASS.OP,movesupsub:!0,movablelimits:!0});x&&(f&&E.appendChild(f),E.appendChild(x)),E.appendChild(T),A&&E.appendChild(A),s.Push(E)};function y(s){if(!s||s.isInferred&&s.childNodes.length===0)return[null,null];if(s.isKind("msubsup")&&m(s))return[s,null];var _=l.default.getChildAt(s,0);return s.isInferred&&_&&m(_)?(s.childNodes.splice(0,1),[_,s]):[null,s]}function m(s){var _=s.childNodes[0];return _&&_.isKind("mi")&&_.getText()===""}t.AmsMethods.operatorLetter=function(s,_){return s.stack.env.operatorLetters?o.default.variable(s,_):!1},t.AmsMethods.MultiIntegral=function(s,_,i){var f=s.GetNext();if(f==="\\"){var x=s.i;f=s.GetArgument(_),s.i=x,f==="\\limits"&&(_==="\\idotsint"?i="\\!\\!\\mathop{\\,\\,"+i+"}":i="\\!\\!\\!\\mathop{\\,\\,\\,"+i+"}")}s.string=i+" "+s.string.slice(s.i),s.i=0},t.AmsMethods.xArrow=function(s,_,i,f,x){var M={width:"+"+a.default.Em((f+x)/18),lspace:a.default.Em(f/18)},C=s.GetBrackets(_),A=s.ParseArg(_),P=s.create("node","mspace",[],{depth:".25em"}),T=s.create("token","mo",{stretchy:!0,texClass:c.TEXCLASS.REL},String.fromCodePoint(i));T=s.create("node","mstyle",[T],{scriptlevel:0});var E=s.create("node","munderover",[T]),N=s.create("node","mpadded",[A,P],M);if(l.default.setAttribute(N,"voffset","-.2em"),l.default.setAttribute(N,"height","-.2em"),l.default.setChild(E,E.over,N),C){var z=new d.default(C,s.stack.env,s.configuration).mml(),L=s.create("node","mspace",[],{height:".75em"});N=s.create("node","mpadded",[z,L],M),l.default.setAttribute(N,"voffset",".15em"),l.default.setAttribute(N,"depth","-.15em"),l.default.setChild(E,E.under,N)}l.default.setProperty(E,"subsupOK",!0),s.Push(E)},t.AmsMethods.HandleShove=function(s,_,i){var f=s.stack.Top();if(f.kind!=="multline")throw new h.default("CommandOnlyAllowedInEnv","%1 only allowed in %2 environment",s.currentCS,"multline");if(f.Size())throw new h.default("CommandAtTheBeginingOfLine","%1 must come at the beginning of the line",s.currentCS);f.setProperty("shove",i)},t.AmsMethods.CFrac=function(s,_){var i=a.default.trimSpaces(s.GetBrackets(_,"")),f=s.GetArgument(_),x=s.GetArgument(_),M={l:u.TexConstant.Align.LEFT,r:u.TexConstant.Align.RIGHT,"":""},C=new d.default("\\strut\\textstyle{"+f+"}",s.stack.env,s.configuration).mml(),A=new d.default("\\strut\\textstyle{"+x+"}",s.stack.env,s.configuration).mml(),P=s.create("node","mfrac",[C,A]);if(i=M[i],i==null)throw new h.default("IllegalAlign","Illegal alignment specified in %1",s.currentCS);i&&l.default.setProperties(P,{numalign:i,denomalign:i}),s.Push(P)},t.AmsMethods.Genfrac=function(s,_,i,f,x,M){i==null&&(i=s.GetDelimiterArg(_)),f==null&&(f=s.GetDelimiterArg(_)),x==null&&(x=s.GetArgument(_)),M==null&&(M=a.default.trimSpaces(s.GetArgument(_)));var C=s.ParseArg(_),A=s.ParseArg(_),P=s.create("node","mfrac",[C,A]);if(x!==""&&l.default.setAttribute(P,"linethickness",x),(i||f)&&(l.default.setProperty(P,"withDelims",!0),P=a.default.fixedFence(s.configuration,i,P,f)),M!==""){var T=parseInt(M,10),E=["D","T","S","SS"][T];if(E==null)throw new h.default("BadMathStyleFor","Bad math style for %1",s.currentCS);P=s.create("node","mstyle",[P]),E==="D"?l.default.setProperties(P,{displaystyle:!0,scriptlevel:0}):l.default.setProperties(P,{displaystyle:!1,scriptlevel:T-1})}s.Push(P)},t.AmsMethods.HandleTag=function(s,_){if(!s.tags.currentTag.taggable&&s.tags.env)throw new h.default("CommandNotAllowedInEnv","%1 not allowed in %2 environment",s.currentCS,s.tags.env);if(s.tags.currentTag.tag)throw new h.default("MultipleCommand","Multiple %1",s.currentCS);var i=s.GetStar(),f=a.default.trimSpaces(s.GetArgument(_));s.tags.tag(f,i)},t.AmsMethods.HandleNoTag=g.default.HandleNoTag,t.AmsMethods.HandleRef=g.default.HandleRef,t.AmsMethods.Macro=g.default.Macro,t.AmsMethods.Accent=g.default.Accent,t.AmsMethods.Tilde=g.default.Tilde,t.AmsMethods.Array=g.default.Array,t.AmsMethods.Spacer=g.default.Spacer,t.AmsMethods.NamedOp=g.default.NamedOp,t.AmsMethods.EqnArray=g.default.EqnArray,t.AmsMethods.Equation=g.default.Equation})(It);var Ca=v&&v.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Aa=v&&v.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),wa=v&&v.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Ca(e,t,n);return Aa(e,t),e},xr=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},se=It,pt=wa(I),X=Y,Bt=xr(yt),xt=xr($()),Lt=vt,We=on;new pt.CharacterMap("AMSmath-mathchar0mo",Bt.default.mathchar0mo,{iiiint:["⨌",{texClass:Lt.TEXCLASS.OP}]});new pt.RegExpMap("AMSmath-operatorLetter",se.AmsMethods.operatorLetter,/[-*]/i);new pt.CommandMap("AMSmath-macros",{mathring:["Accent","02DA"],nobreakspace:"Tilde",negmedspace:["Spacer",We.MATHSPACE.negativemediummathspace],negthickspace:["Spacer",We.MATHSPACE.negativethickmathspace],idotsint:["MultiIntegral","\\int\\cdots\\int"],dddot:["Accent","20DB"],ddddot:["Accent","20DC"],sideset:"SideSet",boxed:["Macro","\\fbox{$\\displaystyle{#1}$}",1],tag:"HandleTag",notag:"HandleNoTag",eqref:["HandleRef",!0],substack:["Macro","\\begin{subarray}{c}#1\\end{subarray}",1],injlim:["NamedOp","inj&thinsp;lim"],projlim:["NamedOp","proj&thinsp;lim"],varliminf:["Macro","\\mathop{\\underline{\\mmlToken{mi}{lim}}}"],varlimsup:["Macro","\\mathop{\\overline{\\mmlToken{mi}{lim}}}"],varinjlim:["Macro","\\mathop{\\underrightarrow{\\mmlToken{mi}{lim}}}"],varprojlim:["Macro","\\mathop{\\underleftarrow{\\mmlToken{mi}{lim}}}"],DeclareMathOperator:"HandleDeclareOp",operatorname:"HandleOperatorName",genfrac:"Genfrac",frac:["Genfrac","","","",""],tfrac:["Genfrac","","","","1"],dfrac:["Genfrac","","","","0"],binom:["Genfrac","(",")","0",""],tbinom:["Genfrac","(",")","0","1"],dbinom:["Genfrac","(",")","0","0"],cfrac:"CFrac",shoveleft:["HandleShove",X.TexConstant.Align.LEFT],shoveright:["HandleShove",X.TexConstant.Align.RIGHT],xrightarrow:["xArrow",8594,5,10],xleftarrow:["xArrow",8592,10,5]},se.AmsMethods);new pt.EnvironmentMap("AMSmath-environment",Bt.default.environment,{"equation*":["Equation",null,!1],"eqnarray*":["EqnArray",null,!1,!0,"rcl",xt.default.cols(0,We.MATHSPACE.thickmathspace),".5em"],align:["EqnArray",null,!0,!0,"rl",xt.default.cols(0,2)],"align*":["EqnArray",null,!1,!0,"rl",xt.default.cols(0,2)],multline:["Multline",null,!0],"multline*":["Multline",null,!1],split:["EqnArray",null,!1,!1,"rl",xt.default.cols(0)],gather:["EqnArray",null,!0,!0,"c"],"gather*":["EqnArray",null,!1,!0,"c"],alignat:["AlignAt",null,!0,!0],"alignat*":["AlignAt",null,!1,!0],alignedat:["AlignAt",null,!1,!1],aligned:["AmsEqnArray",null,null,null,"rl",xt.default.cols(0,2),".5em","D"],gathered:["AmsEqnArray",null,null,null,"c",null,".5em","D"],xalignat:["XalignAt",null,!0,!0],"xalignat*":["XalignAt",null,!1,!0],xxalignat:["XalignAt",null,!1,!1],flalign:["FlalignArray",null,!0,!1,!0,"rlc","auto auto fit"],"flalign*":["FlalignArray",null,!1,!1,!0,"rlc","auto auto fit"],subarray:["Array",null,null,null,null,xt.default.cols(0),"0.1em","S",1],smallmatrix:["Array",null,null,null,"c",xt.default.cols(1/3),".2em","S",1],matrix:["Array",null,null,null,"c"],pmatrix:["Array",null,"(",")","c"],bmatrix:["Array",null,"[","]","c"],Bmatrix:["Array",null,"\\{","\\}","c"],vmatrix:["Array",null,"\\vert","\\vert","c"],Vmatrix:["Array",null,"\\Vert","\\Vert","c"],cases:["Array",null,"\\{",".","ll",null,".2em","T"]},se.AmsMethods);new pt.DelimiterMap("AMSmath-delimiter",Bt.default.delimiter,{"\\lvert":["|",{texClass:Lt.TEXCLASS.OPEN}],"\\rvert":["|",{texClass:Lt.TEXCLASS.CLOSE}],"\\lVert":["‖",{texClass:Lt.TEXCLASS.OPEN}],"\\rVert":["‖",{texClass:Lt.TEXCLASS.CLOSE}]});new pt.CharacterMap("AMSsymbols-mathchar0mi",Bt.default.mathchar0mi,{digamma:"ϝ",varkappa:"ϰ",varGamma:["Γ",{mathvariant:X.TexConstant.Variant.ITALIC}],varDelta:["Δ",{mathvariant:X.TexConstant.Variant.ITALIC}],varTheta:["Θ",{mathvariant:X.TexConstant.Variant.ITALIC}],varLambda:["Λ",{mathvariant:X.TexConstant.Variant.ITALIC}],varXi:["Ξ",{mathvariant:X.TexConstant.Variant.ITALIC}],varPi:["Π",{mathvariant:X.TexConstant.Variant.ITALIC}],varSigma:["Σ",{mathvariant:X.TexConstant.Variant.ITALIC}],varUpsilon:["Υ",{mathvariant:X.TexConstant.Variant.ITALIC}],varPhi:["Φ",{mathvariant:X.TexConstant.Variant.ITALIC}],varPsi:["Ψ",{mathvariant:X.TexConstant.Variant.ITALIC}],varOmega:["Ω",{mathvariant:X.TexConstant.Variant.ITALIC}],beth:"ℶ",gimel:"ℷ",daleth:"ℸ",backprime:["‵",{variantForm:!0}],hslash:"ℏ",varnothing:["∅",{variantForm:!0}],blacktriangle:"▴",triangledown:["▽",{variantForm:!0}],blacktriangledown:"▾",square:"◻",Box:"◻",blacksquare:"◼",lozenge:"◊",Diamond:"◊",blacklozenge:"⧫",circledS:["Ⓢ",{mathvariant:X.TexConstant.Variant.NORMAL}],bigstar:"★",sphericalangle:"∢",measuredangle:"∡",nexists:"∄",complement:"∁",mho:"℧",eth:["ð",{mathvariant:X.TexConstant.Variant.NORMAL}],Finv:"Ⅎ",diagup:"╱",Game:"⅁",diagdown:"╲",Bbbk:["k",{mathvariant:X.TexConstant.Variant.DOUBLESTRUCK}],yen:"¥",circledR:"®",checkmark:"✓",maltese:"✠"});new pt.CharacterMap("AMSsymbols-mathchar0mo",Bt.default.mathchar0mo,{dotplus:"∔",ltimes:"⋉",smallsetminus:["∖",{variantForm:!0}],rtimes:"⋊",Cap:"⋒",doublecap:"⋒",leftthreetimes:"⋋",Cup:"⋓",doublecup:"⋓",rightthreetimes:"⋌",barwedge:"⊼",curlywedge:"⋏",veebar:"⊻",curlyvee:"⋎",doublebarwedge:"⩞",boxminus:"⊟",circleddash:"⊝",boxtimes:"⊠",circledast:"⊛",boxdot:"⊡",circledcirc:"⊚",boxplus:"⊞",centerdot:["⋅",{variantForm:!0}],divideontimes:"⋇",intercal:"⊺",leqq:"≦",geqq:"≧",leqslant:"⩽",geqslant:"⩾",eqslantless:"⪕",eqslantgtr:"⪖",lesssim:"≲",gtrsim:"≳",lessapprox:"⪅",gtrapprox:"⪆",approxeq:"≊",lessdot:"⋖",gtrdot:"⋗",lll:"⋘",llless:"⋘",ggg:"⋙",gggtr:"⋙",lessgtr:"≶",gtrless:"≷",lesseqgtr:"⋚",gtreqless:"⋛",lesseqqgtr:"⪋",gtreqqless:"⪌",doteqdot:"≑",Doteq:"≑",eqcirc:"≖",risingdotseq:"≓",circeq:"≗",fallingdotseq:"≒",triangleq:"≜",backsim:"∽",thicksim:["∼",{variantForm:!0}],backsimeq:"⋍",thickapprox:["≈",{variantForm:!0}],subseteqq:"⫅",supseteqq:"⫆",Subset:"⋐",Supset:"⋑",sqsubset:"⊏",sqsupset:"⊐",preccurlyeq:"≼",succcurlyeq:"≽",curlyeqprec:"⋞",curlyeqsucc:"⋟",precsim:"≾",succsim:"≿",precapprox:"⪷",succapprox:"⪸",vartriangleleft:"⊲",lhd:"⊲",vartriangleright:"⊳",rhd:"⊳",trianglelefteq:"⊴",unlhd:"⊴",trianglerighteq:"⊵",unrhd:"⊵",vDash:["⊨",{variantForm:!0}],Vdash:"⊩",Vvdash:"⊪",smallsmile:["⌣",{variantForm:!0}],shortmid:["∣",{variantForm:!0}],smallfrown:["⌢",{variantForm:!0}],shortparallel:["∥",{variantForm:!0}],bumpeq:"≏",between:"≬",Bumpeq:"≎",pitchfork:"⋔",varpropto:["∝",{variantForm:!0}],backepsilon:"∍",blacktriangleleft:"◂",blacktriangleright:"▸",therefore:"∴",because:"∵",eqsim:"≂",vartriangle:["△",{variantForm:!0}],Join:"⋈",nless:"≮",ngtr:"≯",nleq:"≰",ngeq:"≱",nleqslant:["⪇",{variantForm:!0}],ngeqslant:["⪈",{variantForm:!0}],nleqq:["≰",{variantForm:!0}],ngeqq:["≱",{variantForm:!0}],lneq:"⪇",gneq:"⪈",lneqq:"≨",gneqq:"≩",lvertneqq:["≨",{variantForm:!0}],gvertneqq:["≩",{variantForm:!0}],lnsim:"⋦",gnsim:"⋧",lnapprox:"⪉",gnapprox:"⪊",nprec:"⊀",nsucc:"⊁",npreceq:["⋠",{variantForm:!0}],nsucceq:["⋡",{variantForm:!0}],precneqq:"⪵",succneqq:"⪶",precnsim:"⋨",succnsim:"⋩",precnapprox:"⪹",succnapprox:"⪺",nsim:"≁",ncong:"≇",nshortmid:["∤",{variantForm:!0}],nshortparallel:["∦",{variantForm:!0}],nmid:"∤",nparallel:"∦",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",ntriangleleft:"⋪",ntriangleright:"⋫",ntrianglelefteq:"⋬",ntrianglerighteq:"⋭",nsubseteq:"⊈",nsupseteq:"⊉",nsubseteqq:["⊈",{variantForm:!0}],nsupseteqq:["⊉",{variantForm:!0}],subsetneq:"⊊",supsetneq:"⊋",varsubsetneq:["⊊",{variantForm:!0}],varsupsetneq:["⊋",{variantForm:!0}],subsetneqq:"⫋",supsetneqq:"⫌",varsubsetneqq:["⫋",{variantForm:!0}],varsupsetneqq:["⫌",{variantForm:!0}],leftleftarrows:"⇇",rightrightarrows:"⇉",leftrightarrows:"⇆",rightleftarrows:"⇄",Lleftarrow:"⇚",Rrightarrow:"⇛",twoheadleftarrow:"↞",twoheadrightarrow:"↠",leftarrowtail:"↢",rightarrowtail:"↣",looparrowleft:"↫",looparrowright:"↬",leftrightharpoons:"⇋",rightleftharpoons:["⇌",{variantForm:!0}],curvearrowleft:"↶",curvearrowright:"↷",circlearrowleft:"↺",circlearrowright:"↻",Lsh:"↰",Rsh:"↱",upuparrows:"⇈",downdownarrows:"⇊",upharpoonleft:"↿",upharpoonright:"↾",downharpoonleft:"⇃",restriction:"↾",multimap:"⊸",downharpoonright:"⇂",leftrightsquigarrow:"↭",rightsquigarrow:"⇝",leadsto:"⇝",dashrightarrow:"⇢",dashleftarrow:"⇠",nleftarrow:"↚",nrightarrow:"↛",nLeftarrow:"⇍",nRightarrow:"⇏",nleftrightarrow:"↮",nLeftrightarrow:"⇎"});new pt.DelimiterMap("AMSsymbols-delimiter",Bt.default.delimiter,{"\\ulcorner":"⌜","\\urcorner":"⌝","\\llcorner":"⌞","\\lrcorner":"⌟"});new pt.CommandMap("AMSsymbols-macros",{implies:["Macro","\\;\\Longrightarrow\\;"],impliedby:["Macro","\\;\\Longleftarrow\\;"]},se.AmsMethods);var ba=v&&v.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),re;Object.defineProperty(qt,"__esModule",{value:!0});qt.AmsConfiguration=qt.AmsTags=void 0;var Mr=B,ae=bt,Pa=ue,Ln=It,Sa=I,Cr=function(t){ba(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Pa.AbstractTags);qt.AmsTags=Cr;var Ta=function(t){new Sa.CommandMap(Ln.NEW_OPS,{},{}),t.append(Mr.Configuration.local({handler:{macro:[Ln.NEW_OPS]},priority:-1}))};qt.AmsConfiguration=Mr.Configuration.create("ams",{handler:{character:["AMSmath-operatorLetter"],delimiter:["AMSsymbols-delimiter","AMSmath-delimiter"],macro:["AMSsymbols-mathchar0mi","AMSsymbols-mathchar0mo","AMSsymbols-delimiter","AMSsymbols-macros","AMSmath-mathchar0mo","AMSmath-macros","AMSmath-delimiter"],environment:["AMSmath-environment"]},items:(re={},re[ae.MultlineItem.prototype.kind]=ae.MultlineItem,re[ae.FlalignItem.prototype.kind]=ae.FlalignItem,re),tags:{ams:Cr},init:Ta,config:function(t,e){e.parseOptions.options.multlineWidth&&(e.parseOptions.options.ams.multlineWidth=e.parseOptions.options.multlineWidth),delete e.parseOptions.options.multlineWidth},options:{multlineWidth:"",ams:{multlineWidth:"100%",multlineIndent:"1em"}}});var un={},cn={},Ar=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cn,"__esModule",{value:!0});var oe=Ar(nt()),Oa=fa,Ea=vt,St=Ar(K),ft={};ft.CD=function(t,e){t.Push(e);var n=t.itemFactory.create("array"),r=t.configuration.options.amscd;return n.setProperties({minw:t.stack.env.CD_minw||r.harrowsize,minh:t.stack.env.CD_minh||r.varrowsize}),n.arraydef={columnalign:"center",columnspacing:r.colspace,rowspacing:r.rowspace,displaystyle:!0},n};ft.arrow=function(t,e){var n=t.string.charAt(t.i);if(n.match(/[><VA.|=]/))t.i++;else return(0,Oa.Other)(t,e);var r=t.stack.Top();(!r.isKind("array")||r.Size())&&(ft.cell(t,e),r=t.stack.Top());for(var a=r,o=a.table.length%2===1,l=(a.row.length+(o?0:1))%2;l;)ft.cell(t,e),l--;var u,d={minsize:a.getProperty("minw"),stretchy:!0},h={minsize:a.getProperty("minh"),stretchy:!0,symmetric:!0,lspace:0,rspace:0};if(n!==".")if(n==="|")u=t.create("token","mo",h,"∥");else if(n==="=")u=t.create("token","mo",d,"=");else{var p={">":"→","<":"←",V:"↓",A:"↑"}[n],g=t.GetUpTo(e+n,n),c=t.GetUpTo(e+n,n);if(n===">"||n==="<"){if(u=t.create("token","mo",d,p),g||(g="\\kern "+a.getProperty("minw")),g||c){var y={width:"+.67em",lspace:".33em"};if(u=t.create("node","munderover",[u]),g){var m=new oe.default(g,t.stack.env,t.configuration).mml(),s=t.create("node","mpadded",[m],y);St.default.setAttribute(s,"voffset",".1em"),St.default.setChild(u,u.over,s)}if(c){var _=new oe.default(c,t.stack.env,t.configuration).mml();St.default.setChild(u,u.under,t.create("node","mpadded",[_],y))}t.configuration.options.amscd.hideHorizontalLabels&&(u=t.create("node","mpadded",u,{depth:0,height:".67em"}))}}else{var i=t.create("token","mo",h,p);u=i,(g||c)&&(u=t.create("node","mrow"),g&&St.default.appendChildren(u,[new oe.default("\\scriptstyle\\llap{"+g+"}",t.stack.env,t.configuration).mml()]),i.texClass=Ea.TEXCLASS.ORD,St.default.appendChildren(u,[i]),c&&St.default.appendChildren(u,[new oe.default("\\scriptstyle\\rlap{"+c+"}",t.stack.env,t.configuration).mml()]))}}u&&t.Push(u),ft.cell(t,e)};ft.cell=function(t,e){var n=t.stack.Top();(n.table||[]).length%2===0&&(n.row||[]).length===0&&t.Push(t.create("node","mpadded",[],{height:"8.5pt",depth:"2pt"})),t.Push(t.itemFactory.create("cell").setProperties({isEntry:!0,name:e}))};ft.minCDarrowwidth=function(t,e){t.stack.env.CD_minw=t.GetDimen(e)};ft.minCDarrowheight=function(t,e){t.stack.env.CD_minh=t.GetDimen(e)};cn.default=ft;var ka=v&&v.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),qa=v&&v.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Da=v&&v.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&ka(e,t,n);return qa(e,t),e},wr=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},sn=Da(I),Ia=wr(yt),dn=wr(cn);new sn.EnvironmentMap("amscd_environment",Ia.default.environment,{CD:"CD"},dn.default);new sn.CommandMap("amscd_macros",{minCDarrowwidth:"minCDarrowwidth",minCDarrowheight:"minCDarrowheight"},dn.default);new sn.MacroMap("amscd_special",{"@":"arrow"},dn.default);Object.defineProperty(un,"__esModule",{value:!0});un.AmsCdConfiguration=void 0;var Ba=B;un.AmsCdConfiguration=Ba.Configuration.create("amscd",{handler:{character:["amscd_special"],macro:["amscd_macros"],environment:["amscd_environment"]},options:{amscd:{colspace:"5pt",rowspace:"5pt",harrowsize:"2.75em",varrowsize:"1.75em",hideHorizontalLabels:!1}}});var ja={};(function(t){var e=v&&v.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0}),t.BboxConfiguration=t.BboxMethods=void 0;var n=B,r=I,a=e(R);t.BboxMethods={},t.BboxMethods.BBox=function(u,d){for(var h=u.GetBrackets(d,""),p=u.ParseArg(d),g=h.split(/,/),c,y,m,s=0,_=g.length;s<_;s++){var i=g[s].trim(),f=i.match(/^(\.\d+|\d+(\.\d*)?)(pt|em|ex|mu|px|in|cm|mm)$/);if(f){if(c)throw new a.default("MultipleBBoxProperty","%1 specified twice in %2","Padding",d);var x=l(f[1]+f[3]);x&&(c={height:"+"+x,depth:"+"+x,lspace:x,width:"+"+2*parseInt(f[1],10)+f[3]})}else if(i.match(/^([a-z0-9]+|\#[0-9a-f]{6}|\#[0-9a-f]{3})$/i)){if(y)throw new a.default("MultipleBBoxProperty","%1 specified twice in %2","Background",d);y=i}else if(i.match(/^[-a-z]+:/i)){if(m)throw new a.default("MultipleBBoxProperty","%1 specified twice in %2","Style",d);m=o(i)}else if(i!=="")throw new a.default("InvalidBBoxProperty",`"%1" doesn't look like a color, a padding dimension, or a style`,i)}c&&(p=u.create("node","mpadded",[p],c)),(y||m)&&(c={},y&&Object.assign(c,{mathbackground:y}),m&&Object.assign(c,{style:m}),p=u.create("node","mstyle",[p],c)),u.Push(p)};var o=function(u){return u},l=function(u){return u};new r.CommandMap("bbox",{bbox:"BBox"},t.BboxMethods),t.BboxConfiguration=n.Configuration.create("bbox",{handler:{macro:["bbox"]}})})(ja);var Na={};(function(t){var e=v&&v.__values||function(g){var c=typeof Symbol=="function"&&Symbol.iterator,y=c&&g[c],m=0;if(y)return y.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&m>=g.length&&(g=void 0),{value:g&&g[m++],done:!g}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")},n=v&&v.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(t,"__esModule",{value:!0}),t.BoldsymbolConfiguration=t.rewriteBoldTokens=t.createBoldToken=t.BoldsymbolMethods=void 0;var r=B,a=n(K),o=Y,l=I,u=pr,d={};d[o.TexConstant.Variant.NORMAL]=o.TexConstant.Variant.BOLD,d[o.TexConstant.Variant.ITALIC]=o.TexConstant.Variant.BOLDITALIC,d[o.TexConstant.Variant.FRAKTUR]=o.TexConstant.Variant.BOLDFRAKTUR,d[o.TexConstant.Variant.SCRIPT]=o.TexConstant.Variant.BOLDSCRIPT,d[o.TexConstant.Variant.SANSSERIF]=o.TexConstant.Variant.BOLDSANSSERIF,d["-tex-calligraphic"]="-tex-bold-calligraphic",d["-tex-oldstyle"]="-tex-bold-oldstyle",d["-tex-mathit"]=o.TexConstant.Variant.BOLDITALIC,t.BoldsymbolMethods={},t.BoldsymbolMethods.Boldsymbol=function(g,c){var y=g.stack.env.boldsymbol;g.stack.env.boldsymbol=!0;var m=g.ParseArg(c);g.stack.env.boldsymbol=y,g.Push(m)},new l.CommandMap("boldsymbol",{boldsymbol:"Boldsymbol"},t.BoldsymbolMethods);function h(g,c,y,m){var s=u.NodeFactory.createToken(g,c,y,m);return c!=="mtext"&&g.configuration.parser.stack.env.boldsymbol&&(a.default.setProperty(s,"fixBold",!0),g.configuration.addNode("fixBold",s)),s}t.createBoldToken=h;function p(g){var c,y;try{for(var m=e(g.data.getList("fixBold")),s=m.next();!s.done;s=m.next()){var _=s.value;if(a.default.getProperty(_,"fixBold")){var i=a.default.getAttribute(_,"mathvariant");i==null?a.default.setAttribute(_,"mathvariant",o.TexConstant.Variant.BOLD):a.default.setAttribute(_,"mathvariant",d[i]||i),a.default.removeProperties(_,"fixBold")}}}catch(f){c={error:f}}finally{try{s&&!s.done&&(y=m.return)&&y.call(m)}finally{if(c)throw c.error}}}t.rewriteBoldTokens=p,t.BoldsymbolConfiguration=r.Configuration.create("boldsymbol",{handler:{macro:["boldsymbol"]},nodes:{token:h},postprocessors:[p]})})(Na);var fn={},de={},Ga=v&&v.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fa=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(de,"__esModule",{value:!0});de.BraketItem=void 0;var Rn=ce,De=vt,La=Fa($()),Ra=function(t){Ga(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"braket"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(n){return n.isKind("close")?[[this.factory.create("mml",this.toMml())],!0]:n.isKind("mml")?(this.Push(n.toMml()),this.getProperty("single")?[[this.toMml()],!0]:Rn.BaseItem.fail):t.prototype.checkItem.call(this,n)},e.prototype.toMml=function(){var n=t.prototype.toMml.call(this),r=this.getProperty("open"),a=this.getProperty("close");if(this.getProperty("stretchy"))return La.default.fenced(this.factory.configuration,r,n,a);var o={fence:!0,stretchy:!1,symmetric:!0,texClass:De.TEXCLASS.OPEN},l=this.create("token","mo",o,r);o.texClass=De.TEXCLASS.CLOSE;var u=this.create("token","mo",o,a),d=this.create("node","mrow",[l,n,u],{open:r,close:a,texClass:De.TEXCLASS.INNER});return d},e}(Rn.BaseItem);de.BraketItem=Ra;var mn={},br=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mn,"__esModule",{value:!0});var $a=br(ot),Ie=vt,Ua=br(R),fe={};fe.Macro=$a.default.Macro;fe.Braket=function(t,e,n,r,a,o){var l=t.GetNext();if(l==="")throw new Ua.default("MissingArgFor","Missing argument for %1",t.currentCS);var u=!0;l==="{"&&(t.i++,u=!1),t.Push(t.itemFactory.create("braket").setProperties({barmax:o,barcount:0,open:n,close:r,stretchy:a,single:u}))};fe.Bar=function(t,e){var n=e==="|"?"|":"∥",r=t.stack.Top();if(r.kind!=="braket"||r.getProperty("barcount")>=r.getProperty("barmax")){var a=t.create("token","mo",{texClass:Ie.TEXCLASS.ORD,stretchy:!1},n);t.Push(a);return}n==="|"&&t.GetNext()==="|"&&(t.i++,n="∥");var o=r.getProperty("stretchy");if(!o){var l=t.create("token","mo",{stretchy:!1,braketbar:!0},n);t.Push(l);return}var u=t.create("node","TeXAtom",[],{texClass:Ie.TEXCLASS.CLOSE});t.Push(u),r.setProperty("barcount",r.getProperty("barcount")+1),u=t.create("token","mo",{stretchy:!0,braketbar:!0},n),t.Push(u),u=t.create("node","TeXAtom",[],{texClass:Ie.TEXCLASS.OPEN}),t.Push(u)};mn.default=fe;var Va=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Pr=I,Sr=Va(mn);new Pr.CommandMap("Braket-macros",{bra:["Macro","{\\langle {#1} \\vert}",1],ket:["Macro","{\\vert {#1} \\rangle}",1],braket:["Braket","⟨","⟩",!1,1/0],set:["Braket","{","}",!1,1],Bra:["Macro","{\\left\\langle {#1} \\right\\vert}",1],Ket:["Macro","{\\left\\vert {#1} \\right\\rangle}",1],Braket:["Braket","⟨","⟩",!0,1/0],Set:["Braket","{","}",!0,1],ketbra:["Macro","{\\vert {#1} \\rangle\\langle {#2} \\vert}",2],Ketbra:["Macro","{\\left\\vert {#1} \\right\\rangle\\left\\langle {#2} \\right\\vert}",2],"|":"Bar"},Sr.default);new Pr.MacroMap("Braket-characters",{"|":"Bar"},Sr.default);var Be;Object.defineProperty(fn,"__esModule",{value:!0});fn.BraketConfiguration=void 0;var za=B,$n=de;fn.BraketConfiguration=za.Configuration.create("braket",{handler:{character:["Braket-characters"],macro:["Braket-macros"]},items:(Be={},Be[$n.BraketItem.prototype.kind]=$n.BraketItem,Be)});var hn={},me={},he={};(function(t){var e=v&&v.__read||function(w,S){var k=typeof Symbol=="function"&&w[Symbol.iterator];if(!k)return w;var O=k.call(w),q,j=[],D;try{for(;(S===void 0||S-- >0)&&!(q=O.next()).done;)j.push(q.value)}catch(U){D={error:U}}finally{try{q&&!q.done&&(k=O.return)&&k.call(O)}finally{if(D)throw D.error}}return j},n=v&&v.__values||function(w){var S=typeof Symbol=="function"&&Symbol.iterator,k=S&&w[S],O=0;if(k)return k.call(w);if(w&&typeof w.length=="number")return{next:function(){return w&&O>=w.length&&(w=void 0),{value:w&&w[O++],done:!w}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")},r=v&&v.__importDefault||function(w){return w&&w.__esModule?w:{default:w}},a;Object.defineProperty(t,"__esModule",{value:!0}),t.clearDocument=t.saveDocument=t.makeBsprAttributes=t.removeProperty=t.getProperty=t.setProperty=t.balanceRules=void 0;var o=r(K),l=r($()),u=null,d=null,h=function(w){d.root=w;var S=u.outputJax.getBBox(d,u).w;return S},p=function(w){for(var S=0;w&&!o.default.isType(w,"mtable");){if(o.default.isType(w,"text"))return null;if(o.default.isType(w,"mrow")){w=w.childNodes[0],S=0;continue}w=w.parent.childNodes[S],S++}return w},g=function(w,S){return w.childNodes[S==="up"?1:0].childNodes[0].childNodes[0].childNodes[0].childNodes[0]},c=function(w,S){return w.childNodes[S].childNodes[0].childNodes[0]},y=function(w){return c(w,0)},m=function(w){return c(w,w.childNodes.length-1)},s=function(w,S){return w.childNodes[S==="up"?0:1].childNodes[0].childNodes[0].childNodes[0]},_=function(w){for(;w&&!o.default.isType(w,"mtd");)w=w.parent;return w},i=function(w){return w.parent.childNodes[w.parent.childNodes.indexOf(w)+1]},f=function(w){for(;w&&(0,t.getProperty)(w,"inference")==null;)w=w.parent;return w},x=function(w,S,k){k===void 0&&(k=!1);var O=0;if(w===S)return O;if(w!==S.parent){var q=w.childNodes,j=k?q.length-1:0;o.default.isType(q[j],"mspace")&&(O+=h(q[j])),w=S.parent}if(w===S)return O;var D=w.childNodes,U=k?D.length-1:0;return D[U]!==S&&(O+=h(D[U])),O},M=function(w,S){S===void 0&&(S=!1);var k=p(w),O=s(k,(0,t.getProperty)(k,"inferenceRule")),q=x(w,k,S),j=h(k),D=h(O);return q+(j-D)/2},C=function(w,S,k,O){if(O===void 0&&(O=!1),(0,t.getProperty)(S,"inferenceRule")||(0,t.getProperty)(S,"labelledRule")){var q=w.nodeFactory.create("node","mrow");S.parent.replaceChild(q,S),q.setChildren([S]),A(S,q),S=q}var j=O?S.childNodes.length-1:0,D=S.childNodes[j];if(o.default.isType(D,"mspace")){o.default.setAttribute(D,"width",l.default.Em(l.default.dimen2em(o.default.getAttribute(D,"width"))+k));return}if(D=w.nodeFactory.create("node","mspace",[],{width:l.default.Em(k)}),O){S.appendChild(D);return}D.parent=S,S.childNodes.unshift(D)},A=function(w,S){var k=["inference","proof","maxAdjust","labelledRule"];k.forEach(function(O){var q=(0,t.getProperty)(w,O);q!=null&&((0,t.setProperty)(S,O,q),(0,t.removeProperty)(w,O))})},P=function(w){var S=w.nodeLists.sequent;if(S)for(var k=S.length-1,O=void 0;O=S[k];k--){if((0,t.getProperty)(O,"sequentProcessed")){(0,t.removeProperty)(O,"sequentProcessed");continue}var q=[],j=f(O);if((0,t.getProperty)(j,"inference")===1){for(q.push(O);(0,t.getProperty)(j,"inference")===1;){j=p(j);var D=y(g(j,(0,t.getProperty)(j,"inferenceRule"))),U=(0,t.getProperty)(D,"inferenceRule")?s(D,(0,t.getProperty)(D,"inferenceRule")):D;(0,t.getProperty)(U,"sequent")&&(O=U.childNodes[0],q.push(O),(0,t.setProperty)(O,"sequentProcessed",!0)),j=D}E(w,q)}}},T=function(w,S,k,O,q){var j=w.nodeFactory.create("node","mspace",[],{width:l.default.Em(q)});if(O==="left"){var D=S.childNodes[k].childNodes[0];j.parent=D,D.childNodes.unshift(j)}else S.childNodes[k].appendChild(j);(0,t.setProperty)(S.parent,"sequentAdjust_"+O,q)},E=function(w,S){for(var k=S.pop();S.length;){var O=S.pop(),q=e(N(k,O),2),j=q[0],D=q[1];(0,t.getProperty)(k.parent,"axiom")&&(T(w,j<0?k:O,0,"left",Math.abs(j)),T(w,D<0?k:O,2,"right",Math.abs(D))),k=O}},N=function(w,S){var k=h(w.childNodes[2]),O=h(S.childNodes[2]),q=h(w.childNodes[0]),j=h(S.childNodes[0]),D=q-j,U=k-O;return[D,U]},z=function(w){var S,k;d=new w.document.options.MathItem("",null,w.math.display);var O=w.data;P(O);var q=O.nodeLists.inference||[];try{for(var j=n(q),D=j.next();!D.done;D=j.next()){var U=D.value,ua=(0,t.getProperty)(U,"proof"),ee=p(U),jn=g(ee,(0,t.getProperty)(ee,"inferenceRule")),Te=y(jn);if((0,t.getProperty)(Te,"inference")){var Oe=M(Te);if(Oe){C(O,Te,-Oe);var ca=x(U,ee,!1);C(O,U,Oe-ca)}}var Ee=m(jn);if((0,t.getProperty)(Ee,"inference")!=null){var dt=M(Ee,!0);C(O,Ee,-dt,!0);var Nn=x(U,ee,!0),Gn=(0,t.getProperty)(U,"maxAdjust");Gn!=null&&(dt=Math.max(dt,Gn));var ke=void 0;if(ua||!(ke=_(U))){C(O,(0,t.getProperty)(U,"proof")?U:U.parent,dt-Nn,!0);continue}var Fn=i(ke);if(Fn){var sa=O.nodeFactory.create("node","mspace",[],{width:dt-Nn+"em"});Fn.appendChild(sa),U.removeProperty("maxAdjust");continue}var ne=f(ke);ne&&(dt=(0,t.getProperty)(ne,"maxAdjust")?Math.max((0,t.getProperty)(ne,"maxAdjust"),dt):dt,(0,t.setProperty)(ne,"maxAdjust",dt))}}}catch(da){S={error:da}}finally{try{D&&!D.done&&(k=j.return)&&k.call(j)}finally{if(S)throw S.error}}};t.balanceRules=z;var L="bspr_",J=(a={},a[L+"maxAdjust"]=!0,a),rt=function(w,S,k){o.default.setProperty(w,L+S,k)};t.setProperty=rt;var Q=function(w,S){return o.default.getProperty(w,L+S)};t.getProperty=Q;var lt=function(w,S){w.removeProperty(L+S)};t.removeProperty=lt;var Pe=function(w){w.data.root.walkTree(function(S,k){var O=[];S.getPropertyNames().forEach(function(q){!J[q]&&q.match(RegExp("^"+L))&&O.push(q+":"+S.getProperty(q))}),O.length&&o.default.setAttribute(S,"semantics",O.join(";"))})};t.makeBsprAttributes=Pe;var Se=function(w){if(u=w.document,!("getBBox"in u.outputJax))throw Error("The bussproofs extension requires an output jax with a getBBox() method")};t.saveDocument=Se;var la=function(w){u=null};t.clearDocument=la})(he);var Ha=v&&v.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xa=v&&v.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Qa=v&&v.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ka=v&&v.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Xa(e,t,n);return Qa(e,t),e},Tr=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(me,"__esModule",{value:!0});me.ProofTreeItem=void 0;var Wa=Tr(R),Un=ce,Za=Tr(ma),Ya=Ka(he),Ja=function(t){Ha(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.leftLabel=null,n.rigthLabel=null,n.innerStack=new Za.default(n.factory,{},!0),n}return Object.defineProperty(e.prototype,"kind",{get:function(){return"proofTree"},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(n){if(n.isKind("end")&&n.getName()==="prooftree"){var r=this.toMml();return Ya.setProperty(r,"proof",!0),[[this.factory.create("mml",r),n],!0]}if(n.isKind("stop"))throw new Wa.default("EnvMissingEnd","Missing \\end{%1}",this.getName());return this.innerStack.Push(n),Un.BaseItem.fail},e.prototype.toMml=function(){var n=t.prototype.toMml.call(this),r=this.innerStack.Top();if(r.isKind("start")&&!r.Size())return n;this.innerStack.Push(this.factory.create("stop"));var a=this.innerStack.Top().toMml();return this.create("node","mrow",[a,n],{})},e}(Un.BaseItem);me.ProofTreeItem=Ja;var vn={},to=v&&v.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),eo=v&&v.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),no=v&&v.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&to(e,t,n);return eo(e,t),e},Or=v&&v.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,o=[],l;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(u){l={error:u}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return o},Vn=v&&v.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,o;r<a;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},pn=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vn,"__esModule",{value:!0});var at=pn(R),je=pn(nt()),Ze=pn($()),mt=no(he),st={};st.Prooftree=function(t,e){t.Push(e);var n=t.itemFactory.create("proofTree").setProperties({name:e.getName(),line:"solid",currentLine:"solid",rootAtTop:!1});return n};st.Axiom=function(t,e){var n=t.stack.Top();if(n.kind!=="proofTree")throw new at.default("IllegalProofCommand","Proof commands only allowed in prooftree environment.");var r=Er(t,t.GetArgument(e));mt.setProperty(r,"axiom",!0),n.Push(r)};var Er=function(t,e){var n=Ze.default.internalMath(t,Ze.default.trimSpaces(e),0);if(!n[0].childNodes[0].childNodes.length)return t.create("node","mrow",[]);var r=t.create("node","mspace",[],{width:".5ex"}),a=t.create("node","mspace",[],{width:".5ex"});return t.create("node","mrow",Vn(Vn([r],Or(n),!1),[a],!1))};st.Inference=function(t,e,n){var r=t.stack.Top();if(r.kind!=="proofTree")throw new at.default("IllegalProofCommand","Proof commands only allowed in prooftree environment.");if(r.Size()<n)throw new at.default("BadProofTree","Proof tree badly specified.");var a=r.getProperty("rootAtTop"),o=n===1&&!r.Peek()[0].childNodes.length?0:n,l=[];do l.length&&l.unshift(t.create("node","mtd",[],{})),l.unshift(t.create("node","mtd",[r.Pop()],{rowalign:a?"top":"bottom"})),n--;while(n>0);var u=t.create("node","mtr",l,{}),d=t.create("node","mtable",[u],{framespacing:"0 0"}),h=Er(t,t.GetArgument(e)),p=r.getProperty("currentLine");p!==r.getProperty("line")&&r.setProperty("currentLine",r.getProperty("line"));var g=kr(t,d,[h],r.getProperty("left"),r.getProperty("right"),p,a);r.setProperty("left",null),r.setProperty("right",null),mt.setProperty(g,"inference",o),t.configuration.addNode("inference",g),r.Push(g)};function kr(t,e,n,r,a,o,l){var u=t.create("node","mtr",[t.create("node","mtd",[e],{})],{}),d=t.create("node","mtr",[t.create("node","mtd",n,{})],{}),h=t.create("node","mtable",l?[d,u]:[u,d],{align:"top 2",rowlines:o,framespacing:"0 0"});mt.setProperty(h,"inferenceRule",l?"up":"down");var p,g;r&&(p=t.create("node","mpadded",[r],{height:"+.5em",width:"+.5em",voffset:"-.15em"}),mt.setProperty(p,"prooflabel","left")),a&&(g=t.create("node","mpadded",[a],{height:"+.5em",width:"+.5em",voffset:"-.15em"}),mt.setProperty(g,"prooflabel","right"));var c,y;if(r&&a)c=[p,h,g],y="both";else if(r)c=[p,h],y="left";else if(a)c=[h,g],y="right";else return h;return h=t.create("node","mrow",c),mt.setProperty(h,"labelledRule",y),h}st.Label=function(t,e,n){var r=t.stack.Top();if(r.kind!=="proofTree")throw new at.default("IllegalProofCommand","Proof commands only allowed in prooftree environment.");var a=Ze.default.internalMath(t,t.GetArgument(e),0),o=a.length>1?t.create("node","mrow",a,{}):a[0];r.setProperty(n,o)};st.SetLine=function(t,e,n,r){var a=t.stack.Top();if(a.kind!=="proofTree")throw new at.default("IllegalProofCommand","Proof commands only allowed in prooftree environment.");a.setProperty("currentLine",n),r&&a.setProperty("line",n)};st.RootAtTop=function(t,e,n){var r=t.stack.Top();if(r.kind!=="proofTree")throw new at.default("IllegalProofCommand","Proof commands only allowed in prooftree environment.");r.setProperty("rootAtTop",n)};st.AxiomF=function(t,e){var n=t.stack.Top();if(n.kind!=="proofTree")throw new at.default("IllegalProofCommand","Proof commands only allowed in prooftree environment.");var r=qr(t,e);mt.setProperty(r,"axiom",!0),n.Push(r)};function qr(t,e){var n=t.GetNext();if(n!=="$")throw new at.default("IllegalUseOfCommand","Use of %1 does not match it's definition.",e);t.i++;var r=t.GetUpTo(e,"$");if(r.indexOf("\\fCenter")===-1)throw new at.default("IllegalUseOfCommand","Missing \\fCenter in %1.",e);var a=Or(r.split("\\fCenter"),2),o=a[0],l=a[1],u=new je.default(o,t.stack.env,t.configuration).mml(),d=new je.default(l,t.stack.env,t.configuration).mml(),h=new je.default("\\fCenter",t.stack.env,t.configuration).mml(),p=t.create("node","mtd",[u],{}),g=t.create("node","mtd",[h],{}),c=t.create("node","mtd",[d],{}),y=t.create("node","mtr",[p,g,c],{}),m=t.create("node","mtable",[y],{columnspacing:".5ex",columnalign:"center 2"});return mt.setProperty(m,"sequent",!0),t.configuration.addNode("sequent",y),m}st.FCenter=function(t,e){};st.InferenceF=function(t,e,n){var r=t.stack.Top();if(r.kind!=="proofTree")throw new at.default("IllegalProofCommand","Proof commands only allowed in prooftree environment.");if(r.Size()<n)throw new at.default("BadProofTree","Proof tree badly specified.");var a=r.getProperty("rootAtTop"),o=n===1&&!r.Peek()[0].childNodes.length?0:n,l=[];do l.length&&l.unshift(t.create("node","mtd",[],{})),l.unshift(t.create("node","mtd",[r.Pop()],{rowalign:a?"top":"bottom"})),n--;while(n>0);var u=t.create("node","mtr",l,{}),d=t.create("node","mtable",[u],{framespacing:"0 0"}),h=qr(t,e),p=r.getProperty("currentLine");p!==r.getProperty("line")&&r.setProperty("currentLine",r.getProperty("line"));var g=kr(t,d,[h],r.getProperty("left"),r.getProperty("right"),p,a);r.setProperty("left",null),r.setProperty("right",null),mt.setProperty(g,"inference",o),t.configuration.addNode("inference",g),r.Push(g)};vn.default=st;var Dr=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Ir=Dr(vn),ro=Dr(yt),Br=I;new Br.CommandMap("Bussproofs-macros",{AxiomC:"Axiom",UnaryInfC:["Inference",1],BinaryInfC:["Inference",2],TrinaryInfC:["Inference",3],QuaternaryInfC:["Inference",4],QuinaryInfC:["Inference",5],RightLabel:["Label","right"],LeftLabel:["Label","left"],AXC:"Axiom",UIC:["Inference",1],BIC:["Inference",2],TIC:["Inference",3],RL:["Label","right"],LL:["Label","left"],noLine:["SetLine","none",!1],singleLine:["SetLine","solid",!1],solidLine:["SetLine","solid",!1],dashedLine:["SetLine","dashed",!1],alwaysNoLine:["SetLine","none",!0],alwaysSingleLine:["SetLine","solid",!0],alwaysSolidLine:["SetLine","solid",!0],alwaysDashedLine:["SetLine","dashed",!0],rootAtTop:["RootAtTop",!0],alwaysRootAtTop:["RootAtTop",!0],rootAtBottom:["RootAtTop",!1],alwaysRootAtBottom:["RootAtTop",!1],fCenter:"FCenter",Axiom:"AxiomF",UnaryInf:["InferenceF",1],BinaryInf:["InferenceF",2],TrinaryInf:["InferenceF",3],QuaternaryInf:["InferenceF",4],QuinaryInf:["InferenceF",5]},Ir.default);new Br.EnvironmentMap("Bussproofs-environments",ro.default.environment,{prooftree:["Prooftree",null,!1]},Ir.default);var Ne;Object.defineProperty(hn,"__esModule",{value:!0});hn.BussproofsConfiguration=void 0;var ao=B,zn=me,ie=he;hn.BussproofsConfiguration=ao.Configuration.create("bussproofs",{handler:{macro:["Bussproofs-macros"],environment:["Bussproofs-environments"]},items:(Ne={},Ne[zn.ProofTreeItem.prototype.kind]=zn.ProofTreeItem,Ne),preprocessors:[[ie.saveDocument,1]],postprocessors:[[ie.clearDocument,3],[ie.makeBsprAttributes,2],[ie.balanceRules,1]]});var oo={},jr={};(function(t){var e=v&&v.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.EncloseConfiguration=t.EncloseMethods=t.ENCLOSE_OPTIONS=void 0;var n=B,r=I,a=e($());t.ENCLOSE_OPTIONS={"data-arrowhead":1,color:1,mathcolor:1,background:1,mathbackground:1,"data-padding":1,"data-thickness":1},t.EncloseMethods={},t.EncloseMethods.Enclose=function(o,l){var u=o.GetArgument(l).replace(/,/g," "),d=o.GetBrackets(l,""),h=o.ParseArg(l),p=a.default.keyvalOptions(d,t.ENCLOSE_OPTIONS);p.notation=u,o.Push(o.create("node","menclose",[h],p))},new r.CommandMap("enclose",{enclose:"Enclose"},t.EncloseMethods),t.EncloseConfiguration=n.Configuration.create("enclose",{handler:{macro:["enclose"]}})})(jr);(function(t){var e=v&&v.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0}),t.CancelConfiguration=t.CancelMethods=void 0;var n=B,r=Y,a=I,o=e($()),l=jr;t.CancelMethods={},t.CancelMethods.Cancel=function(u,d,h){var p=u.GetBrackets(d,""),g=u.ParseArg(d),c=o.default.keyvalOptions(p,l.ENCLOSE_OPTIONS);c.notation=h,u.Push(u.create("node","menclose",[g],c))},t.CancelMethods.CancelTo=function(u,d){var h=u.GetBrackets(d,""),p=u.ParseArg(d),g=u.ParseArg(d),c=o.default.keyvalOptions(h,l.ENCLOSE_OPTIONS);c.notation=[r.TexConstant.Notation.UPDIAGONALSTRIKE,r.TexConstant.Notation.UPDIAGONALARROW,r.TexConstant.Notation.NORTHEASTARROW].join(" "),p=u.create("node","mpadded",[p],{depth:"-.1em",height:"+.1em",voffset:".1em"}),u.Push(u.create("node","msup",[u.create("node","menclose",[g],c),p]))},new a.CommandMap("cancel",{cancel:["Cancel",r.TexConstant.Notation.UPDIAGONALSTRIKE],bcancel:["Cancel",r.TexConstant.Notation.DOWNDIAGONALSTRIKE],xcancel:["Cancel",r.TexConstant.Notation.UPDIAGONALSTRIKE+" "+r.TexConstant.Notation.DOWNDIAGONALSTRIKE],cancelto:"CancelTo"},t.CancelMethods),t.CancelConfiguration=n.Configuration.create("cancel",{handler:{macro:["cancel"]}})})(oo);var io={},gn={};(function(t){var e=v&&v.__read||function(u,d){var h=typeof Symbol=="function"&&u[Symbol.iterator];if(!h)return u;var p=h.call(u),g,c=[],y;try{for(;(d===void 0||d-- >0)&&!(g=p.next()).done;)c.push(g.value)}catch(m){y={error:m}}finally{try{g&&!g.done&&(h=p.return)&&h.call(p)}finally{if(y)throw y.error}}return c},n=v&&v.__spreadArray||function(u,d,h){if(h||arguments.length===2)for(var p=0,g=d.length,c;p<g;p++)(c||!(p in d))&&(c||(c=Array.prototype.slice.call(d,0,p)),c[p]=d[p]);return u.concat(c||Array.prototype.slice.call(d))},r=v&&v.__values||function(u){var d=typeof Symbol=="function"&&Symbol.iterator,h=d&&u[d],p=0;if(h)return h.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&p>=u.length&&(u=void 0),{value:u&&u[p++],done:!u}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},a=v&&v.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0}),t.EmpheqUtil=void 0;var o=a($()),l=a(nt());t.EmpheqUtil={environment:function(u,d,h,p){var g=p[0],c=u.itemFactory.create(g+"-begin").setProperties({name:d,end:g});u.Push(h.apply(void 0,n([u,c],e(p.slice(1)),!1)))},splitOptions:function(u,d){return d===void 0&&(d=null),o.default.keyvalOptions(u,d,!0)},columnCount:function(u){var d,h,p=0;try{for(var g=r(u.childNodes),c=g.next();!c.done;c=g.next()){var y=c.value,m=y.childNodes.length-(y.isKind("mlabeledtr")?1:0);m>p&&(p=m)}}catch(s){d={error:s}}finally{try{c&&!c.done&&(h=g.return)&&h.call(g)}finally{if(d)throw d.error}}return p},cellBlock:function(u,d,h,p){var g,c,y=h.create("node","mpadded",[],{height:0,depth:0,voffset:"-1height"}),m=new l.default(u,h.stack.env,h.configuration),s=m.mml();p&&m.configuration.tags.label&&(m.configuration.tags.currentTag.env=p,m.configuration.tags.getTag(!0));try{for(var _=r(s.isInferred?s.childNodes:[s]),i=_.next();!i.done;i=_.next()){var f=i.value;y.appendChild(f)}}catch(x){g={error:x}}finally{try{i&&!i.done&&(c=_.return)&&c.call(_)}finally{if(g)throw g.error}}return y.appendChild(h.create("node","mphantom",[h.create("node","mpadded",[d],{width:0})])),y},topRowTable:function(u,d){var h=o.default.copyNode(u,d);return h.setChildren(h.childNodes.slice(0,1)),h.attributes.set("align","baseline 1"),u.factory.create("mphantom",{},[d.create("node","mpadded",[h],{width:0})])},rowspanCell:function(u,d,h,p,g){u.appendChild(p.create("node","mpadded",[this.cellBlock(d,o.default.copyNode(h,p),p,g),this.topRowTable(h,p)],{height:0,depth:0,voffset:"height"}))},left:function(u,d,h,p,g){var c,y;g===void 0&&(g=""),u.attributes.set("columnalign","right "+(u.attributes.get("columnalign")||"")),u.attributes.set("columnspacing","0em "+(u.attributes.get("columnspacing")||""));var m;try{for(var s=r(u.childNodes.slice(0).reverse()),_=s.next();!_.done;_=s.next()){var i=_.value;m=p.create("node","mtd"),i.childNodes.unshift(m),m.parent=i,i.isKind("mlabeledtr")&&(i.childNodes[0]=i.childNodes[1],i.childNodes[1]=m)}}catch(f){c={error:f}}finally{try{_&&!_.done&&(y=s.return)&&y.call(s)}finally{if(c)throw c.error}}this.rowspanCell(m,h,d,p,g)},right:function(u,d,h,p,g){g===void 0&&(g=""),u.childNodes.length===0&&u.appendChild(p.create("node","mtr"));for(var c=t.EmpheqUtil.columnCount(u),y=u.childNodes[0];y.childNodes.length<c;)y.appendChild(p.create("node","mtd"));var m=y.appendChild(p.create("node","mtd"));t.EmpheqUtil.rowspanCell(m,h,d,p,g),u.attributes.set("columnalign",(u.attributes.get("columnalign")||"").split(/ /).slice(0,c).join(" ")+" left"),u.attributes.set("columnspacing",(u.attributes.get("columnspacing")||"").split(/ /).slice(0,c-1).join(" ")+" 0em")},adjustTable:function(u,d){var h=u.getProperty("left"),p=u.getProperty("right");if(h||p){var g=u.Last,c=o.default.copyNode(g,d);h&&this.left(g,c,h,d),p&&this.right(g,c,p,d)}},allowEnv:{equation:!0,align:!0,gather:!0,flalign:!0,alignat:!0,multline:!0},checkEnv:function(u){return this.allowEnv.hasOwnProperty(u.replace(/\*$/,""))||!1}}})(gn);(function(t){var e=v&&v.__extends||function(){var m=function(s,_){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,f){i.__proto__=f}||function(i,f){for(var x in f)Object.prototype.hasOwnProperty.call(f,x)&&(i[x]=f[x])},m(s,_)};return function(s,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");m(s,_);function i(){this.constructor=s}s.prototype=_===null?Object.create(_):(i.prototype=_.prototype,new i)}}(),n=v&&v.__importDefault||function(m){return m&&m.__esModule?m:{default:m}},r;Object.defineProperty(t,"__esModule",{value:!0}),t.CasesConfiguration=t.CasesMethods=t.CasesTags=t.CasesBeginItem=void 0;var a=B,o=I,l=n($()),u=n(ot),d=n(R),h=Pt,p=qt,g=gn,c=function(m){e(s,m);function s(){return m!==null&&m.apply(this,arguments)||this}return Object.defineProperty(s.prototype,"kind",{get:function(){return"cases-begin"},enumerable:!1,configurable:!0}),s.prototype.checkItem=function(_){return _.isKind("end")&&_.getName()===this.getName()&&this.getProperty("end")?(this.setProperty("end",!1),[[],!0]):m.prototype.checkItem.call(this,_)},s}(h.BeginItem);t.CasesBeginItem=c;var y=function(m){e(s,m);function s(){var _=m!==null&&m.apply(this,arguments)||this;return _.subcounter=0,_}return s.prototype.start=function(_,i,f){this.subcounter=0,m.prototype.start.call(this,_,i,f)},s.prototype.autoTag=function(){this.currentTag.tag==null&&(this.currentTag.env==="subnumcases"?(this.subcounter===0&&this.counter++,this.subcounter++,this.tag(this.formatNumber(this.counter,this.subcounter),!1)):((this.subcounter===0||this.currentTag.env!=="numcases-left")&&this.counter++,this.tag(this.formatNumber(this.counter),!1)))},s.prototype.formatNumber=function(_,i){return i===void 0&&(i=null),_.toString()+(i===null?"":String.fromCharCode(96+i))},s}(p.AmsTags);t.CasesTags=y,t.CasesMethods={NumCases:function(m,s){if(m.stack.env.closing===s.getName()){delete m.stack.env.closing,m.Push(m.itemFactory.create("end").setProperty("name",s.getName()));var _=m.stack.Top(),i=_.Last,f=l.default.copyNode(i,m),x=_.getProperty("left");return g.EmpheqUtil.left(i,f,x+"\\empheqlbrace\\,",m,"numcases-left"),m.Push(m.itemFactory.create("end").setProperty("name",s.getName())),null}else{var x=m.GetArgument("\\begin{"+s.getName()+"}");s.setProperty("left",x);var M=u.default.EqnArray(m,s,!0,!0,"ll");return M.arraydef.displaystyle=!1,M.arraydef.rowspacing=".2em",M.setProperty("numCases",!0),m.Push(s),M}},Entry:function(m,s){if(!m.stack.Top().getProperty("numCases"))return u.default.Entry(m,s);m.Push(m.itemFactory.create("cell").setProperties({isEntry:!0,name:s}));for(var _=m.string,i=0,f=m.i,x=_.length;f<x;){var M=_.charAt(f);if(M==="{")i++,f++;else if(M==="}"){if(i===0)break;i--,f++}else{if(M==="&"&&i===0)throw new d.default("ExtraCasesAlignTab","Extra alignment tab in text for numcase environment");if(M==="\\"&&i===0){var C=(_.slice(f+1).match(/^[a-z]+|./i)||[])[0];if(C==="\\"||C==="cr"||C==="end"||C==="label")break;f+=C.length}else f++}}var A=_.substr(m.i,f-m.i).replace(/^\s*/,"");m.PushAll(l.default.internalMath(m,A,0)),m.i=f}},new o.EnvironmentMap("cases-env",g.EmpheqUtil.environment,{numcases:["NumCases","cases"],subnumcases:["NumCases","cases"]},t.CasesMethods),new o.MacroMap("cases-macros",{"&":"Entry"},t.CasesMethods),t.CasesConfiguration=a.Configuration.create("cases",{handler:{environment:["cases-env"],character:["cases-macros"]},items:(r={},r[c.prototype.kind]=c,r),tags:{cases:y}})})(io);var Ut={},lo=v&&v.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_n=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.CenternotConfiguration=Ut.filterCenterOver=void 0;var uo=B,Hn=_n(nt()),Xn=_n(K),co=I,so=_n(ot);new co.CommandMap("centernot",{centerOver:"CenterOver",centernot:["Macro","\\centerOver{#1}{{⧸}}",1]},{CenterOver:function(t,e){var n="{"+t.GetArgument(e)+"}",r=t.ParseArg(e),a=new Hn.default(n,t.stack.env,t.configuration).mml(),o=t.create("node","TeXAtom",[new Hn.default(n,t.stack.env,t.configuration).mml(),t.create("node","mpadded",[t.create("node","mpadded",[r],{width:0,lspace:"-.5width"}),t.create("node","mphantom",[a])],{width:0,lspace:"-.5width"})]);t.configuration.addNode("centerOver",a),t.Push(o)},Macro:so.default.Macro});function Nr(t){var e,n,r=t.data;try{for(var a=lo(r.getList("centerOver")),o=a.next();!o.done;o=a.next()){var l=o.value,u=Xn.default.getTexClass(l.childNodes[0].childNodes[0]);u!==null&&Xn.default.setProperties(l.parent.parent.parent.parent.parent.parent,{texClass:u})}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}Ut.filterCenterOver=Nr;Ut.CenternotConfiguration=uo.Configuration.create("centernot",{handler:{macro:["centernot"]},postprocessors:[Nr]});var yn={},Gr={};(function(t){var e=v&&v.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorMethods=void 0;var n=e(K),r=e($());function a(o){var l="+".concat(o),u=o.replace(/^.*?([a-z]*)$/,"$1"),d=2*parseFloat(l);return{width:"+".concat(d).concat(u),height:l,depth:l,lspace:o}}t.ColorMethods={},t.ColorMethods.Color=function(o,l){var u=o.GetBrackets(l,""),d=o.GetArgument(l),h=o.configuration.packageData.get("color").model,p=h.getColor(u,d),g=o.itemFactory.create("style").setProperties({styles:{mathcolor:p}});o.stack.env.color=p,o.Push(g)},t.ColorMethods.TextColor=function(o,l){var u=o.GetBrackets(l,""),d=o.GetArgument(l),h=o.configuration.packageData.get("color").model,p=h.getColor(u,d),g=o.stack.env.color;o.stack.env.color=p;var c=o.ParseArg(l);g?o.stack.env.color=g:delete o.stack.env.color;var y=o.create("node","mstyle",[c],{mathcolor:p});o.Push(y)},t.ColorMethods.DefineColor=function(o,l){var u=o.GetArgument(l),d=o.GetArgument(l),h=o.GetArgument(l),p=o.configuration.packageData.get("color").model;p.defineColor(d,u,h)},t.ColorMethods.ColorBox=function(o,l){var u=o.GetArgument(l),d=r.default.internalMath(o,o.GetArgument(l)),h=o.configuration.packageData.get("color").model,p=o.create("node","mpadded",d,{mathbackground:h.getColor("named",u)});n.default.setProperties(p,a(o.options.color.padding)),o.Push(p)},t.ColorMethods.FColorBox=function(o,l){var u=o.GetArgument(l),d=o.GetArgument(l),h=r.default.internalMath(o,o.GetArgument(l)),p=o.options.color,g=o.configuration.packageData.get("color").model,c=o.create("node","mpadded",h,{mathbackground:g.getColor("named",d),style:"border: ".concat(p.borderWidth," solid ").concat(g.getColor("named",u))});n.default.setProperties(c,a(p.padding)),o.Push(c)}})(Gr);var ve={},pe={};Object.defineProperty(pe,"__esModule",{value:!0});pe.COLORS=void 0;pe.COLORS=new Map([["Apricot","#FBB982"],["Aquamarine","#00B5BE"],["Bittersweet","#C04F17"],["Black","#221E1F"],["Blue","#2D2F92"],["BlueGreen","#00B3B8"],["BlueViolet","#473992"],["BrickRed","#B6321C"],["Brown","#792500"],["BurntOrange","#F7921D"],["CadetBlue","#74729A"],["CarnationPink","#F282B4"],["Cerulean","#00A2E3"],["CornflowerBlue","#41B0E4"],["Cyan","#00AEEF"],["Dandelion","#FDBC42"],["DarkOrchid","#A4538A"],["Emerald","#00A99D"],["ForestGreen","#009B55"],["Fuchsia","#8C368C"],["Goldenrod","#FFDF42"],["Gray","#949698"],["Green","#00A64F"],["GreenYellow","#DFE674"],["JungleGreen","#00A99A"],["Lavender","#F49EC4"],["LimeGreen","#8DC73E"],["Magenta","#EC008C"],["Mahogany","#A9341F"],["Maroon","#AF3235"],["Melon","#F89E7B"],["MidnightBlue","#006795"],["Mulberry","#A93C93"],["NavyBlue","#006EB8"],["OliveGreen","#3C8031"],["Orange","#F58137"],["OrangeRed","#ED135A"],["Orchid","#AF72B0"],["Peach","#F7965A"],["Periwinkle","#7977B8"],["PineGreen","#008B72"],["Plum","#92268F"],["ProcessBlue","#00B0F0"],["Purple","#99479B"],["RawSienna","#974006"],["Red","#ED1B23"],["RedOrange","#F26035"],["RedViolet","#A1246B"],["Rhodamine","#EF559F"],["RoyalBlue","#0071BC"],["RoyalPurple","#613F99"],["RubineRed","#ED017D"],["Salmon","#F69289"],["SeaGreen","#3FBC9D"],["Sepia","#671800"],["SkyBlue","#46C5DD"],["SpringGreen","#C6DC67"],["Tan","#DA9D76"],["TealBlue","#00AEB3"],["Thistle","#D883B7"],["Turquoise","#00B4CE"],["Violet","#58429B"],["VioletRed","#EF58A0"],["White","#FFFFFF"],["WildStrawberry","#EE2967"],["Yellow","#FFF200"],["YellowGreen","#98CC70"],["YellowOrange","#FAA21A"]]);var Fr=v&&v.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fo=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ve,"__esModule",{value:!0});ve.ColorModel=void 0;var ht=fo(R),Qn=pe,Vt=new Map,mo=function(){function t(){this.userColors=new Map}return t.prototype.normalizeColor=function(e,n){if(!e||e==="named")return n;if(Vt.has(e)){var r=Vt.get(e);return r(n)}throw new ht.default("UndefinedColorModel","Color model '%1' not defined",e)},t.prototype.getColor=function(e,n){return!e||e==="named"?this.getColorByName(n):this.normalizeColor(e,n)},t.prototype.getColorByName=function(e){return this.userColors.has(e)?this.userColors.get(e):Qn.COLORS.has(e)?Qn.COLORS.get(e):e},t.prototype.defineColor=function(e,n,r){var a=this.normalizeColor(e,r);this.userColors.set(n,a)},t}();ve.ColorModel=mo;Vt.set("rgb",function(t){var e,n,r=t.trim().split(/\s*,\s*/),a="#";if(r.length!==3)throw new ht.default("ModelArg1","Color values for the %1 model require 3 numbers","rgb");try{for(var o=Fr(r),l=o.next();!l.done;l=o.next()){var u=l.value;if(!u.match(/^(\d+(\.\d*)?|\.\d+)$/))throw new ht.default("InvalidDecimalNumber","Invalid decimal number");var d=parseFloat(u);if(d<0||d>1)throw new ht.default("ModelArg2","Color values for the %1 model must be between %2 and %3","rgb","0","1");var h=Math.floor(d*255).toString(16);h.length<2&&(h="0"+h),a+=h}}catch(p){e={error:p}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return a});Vt.set("RGB",function(t){var e,n,r=t.trim().split(/\s*,\s*/),a="#";if(r.length!==3)throw new ht.default("ModelArg1","Color values for the %1 model require 3 numbers","RGB");try{for(var o=Fr(r),l=o.next();!l.done;l=o.next()){var u=l.value;if(!u.match(/^\d+$/))throw new ht.default("InvalidNumber","Invalid number");var d=parseInt(u);if(d>255)throw new ht.default("ModelArg2","Color values for the %1 model must be between %2 and %3","RGB","0","255");var h=d.toString(16);h.length<2&&(h="0"+h),a+=h}}catch(p){e={error:p}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return a});Vt.set("gray",function(t){if(!t.match(/^\s*(\d+(\.\d*)?|\.\d+)\s*$/))throw new ht.default("InvalidDecimalNumber","Invalid decimal number");var e=parseFloat(t);if(e<0||e>1)throw new ht.default("ModelArg2","Color values for the %1 model must be between %2 and %3","gray","0","1");var n=Math.floor(e*255).toString(16);return n.length<2&&(n="0"+n),"#".concat(n).concat(n).concat(n)});Object.defineProperty(yn,"__esModule",{value:!0});yn.ColorConfiguration=void 0;var ho=I,vo=B,po=Gr,go=ve;new ho.CommandMap("color",{color:"Color",textcolor:"TextColor",definecolor:"DefineColor",colorbox:"ColorBox",fcolorbox:"FColorBox"},po.ColorMethods);var _o=function(t,e){e.parseOptions.packageData.set("color",{model:new go.ColorModel})};yn.ColorConfiguration=vo.Configuration.create("color",{handler:{macro:["color"]},options:{color:{padding:"5px",borderWidth:"2px"}},config:_o});var yo={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConfiguration=t.ColorV2Methods=void 0;var e=I,n=B;t.ColorV2Methods={Color:function(r,a){var o=r.GetArgument(a),l=r.stack.env.color;r.stack.env.color=o;var u=r.ParseArg(a);l?r.stack.env.color=l:delete r.stack.env.color;var d=r.create("node","mstyle",[u],{mathcolor:o});r.Push(d)}},new e.CommandMap("colorv2",{color:"Color"},t.ColorV2Methods),t.ColorConfiguration=n.Configuration.create("colorv2",{handler:{macro:["colorv2"]}})})(yo);var zt={},xo=v&&v.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mo=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zt,"__esModule",{value:!0});zt.ColortblConfiguration=zt.ColorArrayItem=void 0;var Co=Pt,Lr=B,Ao=I,Ge=Mo(R),xn=function(t){xo(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.color={cell:"",row:"",col:[]},n.hasColor=!1,n}return e.prototype.EndEntry=function(){t.prototype.EndEntry.call(this);var n=this.row[this.row.length-1],r=this.color.cell||this.color.row||this.color.col[this.row.length-1];r&&(n.attributes.set("mathbackground",r),this.color.cell="",this.hasColor=!0)},e.prototype.EndRow=function(){t.prototype.EndRow.call(this),this.color.row=""},e.prototype.createMml=function(){var n=t.prototype.createMml.call(this),r=n.isKind("mrow")?n.childNodes[1]:n;return r.isKind("menclose")&&(r=r.childNodes[0].childNodes[0]),this.hasColor&&r.attributes.get("frame")==="none"&&r.attributes.set("frame",""),n},e}(Co.ArrayItem);zt.ColorArrayItem=xn;new Ao.CommandMap("colortbl",{cellcolor:["TableColor","cell"],rowcolor:["TableColor","row"],columncolor:["TableColor","col"]},{TableColor:function(t,e,n){var r=t.configuration.packageData.get("color").model,a=t.GetBrackets(e,""),o=r.getColor(a,t.GetArgument(e)),l=t.stack.Top();if(!(l instanceof xn))throw new Ge.default("UnsupportedTableColor","Unsupported use of %1",t.currentCS);if(n==="col"){if(l.table.length)throw new Ge.default("ColumnColorNotTop","%1 must be in the top row",e);l.color.col[l.row.length]=o,t.GetBrackets(e,"")&&t.GetBrackets(e,"")}else if(l.color[n]=o,n==="row"&&(l.Size()||l.row.length))throw new Ge.default("RowColorNotFirst","%1 must be at the beginning of a row",e)}});var wo=function(t,e){e.parseOptions.packageData.has("color")||Lr.ConfigurationHandler.get("color").config(t,e)};zt.ColortblConfiguration=Lr.Configuration.create("colortbl",{handler:{macro:["colortbl"]},items:{array:xn},priority:10,config:[wo,10]});var Mn={},Wt={},jt={},Rr=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jt,"__esModule",{value:!0});var Fe=Rr($()),Mt=Rr(R),le=Qt,Ye;(function(t){function e(c,y){var m=[c,y.char];if(y.attributes)for(var s in y.attributes)m.push(s),m.push(y.attributes[s]);return m}t.disassembleSymbol=e;function n(c){for(var y=c[0],m=c[1],s={},_=2;_<c.length;_=_+2)s[c[_]]=c[_+1];return new le.Symbol(y,m,s)}t.assembleSymbol=n;function r(c,y){var m=c.GetNext();if(m!=="\\")throw new Mt.default("MissingCS","%1 must be followed by a control sequence",y);var s=Fe.default.trimSpaces(c.GetArgument(y));return s.substr(1)}t.GetCSname=r;function a(c,y){var m=Fe.default.trimSpaces(c.GetArgument(y));if(m.charAt(0)==="\\"&&(m=m.substr(1)),!m.match(/^(.|[a-z]+)$/i))throw new Mt.default("IllegalControlSequenceName","Illegal control sequence name for %1",y);return m}t.GetCsNameArgument=a;function o(c,y){var m=c.GetBrackets(y);if(m&&(m=Fe.default.trimSpaces(m),!m.match(/^[0-9]+$/)))throw new Mt.default("IllegalParamNumber","Illegal number of parameters specified in %1",y);return m}t.GetArgCount=o;function l(c,y,m){for(var s=c.GetNext(),_=[],i=0,f=c.i;c.i<c.string.length;){if(s=c.GetNext(),s==="#"){if(f!==c.i&&(_[i]=c.string.substr(f,c.i-f)),s=c.string.charAt(++c.i),!s.match(/^[1-9]$/))throw new Mt.default("CantUseHash2","Illegal use of # in template for %1",m);if(parseInt(s)!==++i)throw new Mt.default("SequentialParam","Parameters for %1 must be numbered sequentially",m);f=c.i+1}else if(s==="{")return f!==c.i&&(_[i]=c.string.substr(f,c.i-f)),_.length>0?[i.toString()].concat(_):i;c.i++}throw new Mt.default("MissingReplacementString","Missing replacement string for definition of %1",y)}t.GetTemplate=l;function u(c,y,m){if(m==null)return c.GetArgument(y);for(var s=c.i,_=0,i=0;c.i<c.string.length;){var f=c.string.charAt(c.i);if(f==="{")c.i===s&&(i=1),c.GetArgument(y),_=c.i-s;else{if(d(c,m))return i&&(s++,_-=2),c.string.substr(s,_);if(f==="\\"){c.i++,_++,i=0;var x=c.string.substr(c.i).match(/[a-z]+|./i);x&&(c.i+=x[0].length,_=c.i-s)}else c.i++,_++,i=0}}throw new Mt.default("RunawayArgument","Runaway argument for %1?",y)}t.GetParameter=u;function d(c,y){return c.string.substr(c.i,y.length)!==y||y.match(/\\[a-z]+$/i)&&c.string.charAt(c.i+y.length).match(/[a-z]/i)?0:(c.i+=y.length,1)}t.MatchParam=d;function h(c,y,m,s){var _=c.configuration.handlers,i=_.retrieve(t.NEW_DELIMITER);i.add(y,new le.Symbol(y,m,s))}t.addDelimiter=h;function p(c,y,m,s,_){_===void 0&&(_="");var i=c.configuration.handlers,f=i.retrieve(t.NEW_COMMAND);f.add(y,new le.Macro(_||y,m,s))}t.addMacro=p;function g(c,y,m,s){var _=c.configuration.handlers,i=_.retrieve(t.NEW_ENVIRONMENT);i.add(y,new le.Macro(y,m,s))}t.addEnvironment=g,t.NEW_DELIMITER="new-Delimiter",t.NEW_COMMAND="new-Command",t.NEW_ENVIRONMENT="new-Environment"})(Ye||(Ye={}));jt.default=Ye;var bo=v&&v.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Po=v&&v.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),So=v&&v.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&bo(e,t,n);return Po(e,t),e},ge=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wt,"__esModule",{value:!0});var To=ge(R),Oo=So(I),Eo=ge(ot),wt=ge($()),V=ge(jt),Z={};Z.NewCommand=function(t,e){var n=V.default.GetCsNameArgument(t,e),r=V.default.GetArgCount(t,e),a=t.GetBrackets(e),o=t.GetArgument(e);V.default.addMacro(t,n,Z.Macro,[o,r,a])};Z.NewEnvironment=function(t,e){var n=wt.default.trimSpaces(t.GetArgument(e)),r=V.default.GetArgCount(t,e),a=t.GetBrackets(e),o=t.GetArgument(e),l=t.GetArgument(e);V.default.addEnvironment(t,n,Z.BeginEnv,[!0,o,l,r,a])};Z.MacroDef=function(t,e){var n=V.default.GetCSname(t,e),r=V.default.GetTemplate(t,e,"\\"+n),a=t.GetArgument(e);r instanceof Array?V.default.addMacro(t,n,Z.MacroWithTemplate,[a].concat(r)):V.default.addMacro(t,n,Z.Macro,[a,r])};Z.Let=function(t,e){var n=V.default.GetCSname(t,e),r=t.GetNext();r==="="&&(t.i++,r=t.GetNext());var a=t.configuration.handlers;if(r==="\\"){e=V.default.GetCSname(t,e);var o=a.get("delimiter").lookup("\\"+e);if(o){V.default.addDelimiter(t,"\\"+n,o.char,o.attributes);return}var l=a.get("macro").applicable(e);if(!l)return;if(l instanceof Oo.MacroMap){var u=l.lookup(e);V.default.addMacro(t,n,u.func,u.args,u.symbol);return}o=l.lookup(e);var d=V.default.disassembleSymbol(n,o),h=function(g,c){for(var y=[],m=2;m<arguments.length;m++)y[m-2]=arguments[m];var s=V.default.assembleSymbol(y);return l.parser(g,s)};V.default.addMacro(t,n,h,d);return}t.i++;var p=a.get("delimiter").lookup(r);if(p){V.default.addDelimiter(t,"\\"+n,p.char,p.attributes);return}V.default.addMacro(t,n,Z.Macro,[r])};Z.MacroWithTemplate=function(t,e,n,r){for(var a=[],o=4;o<arguments.length;o++)a[o-4]=arguments[o];var l=parseInt(r,10);if(l){var u=[];if(t.GetNext(),a[0]&&!V.default.MatchParam(t,a[0]))throw new To.default("MismatchUseDef","Use of %1 doesn't match its definition",e);for(var d=0;d<l;d++)u.push(V.default.GetParameter(t,e,a[d+1]));n=wt.default.substituteArgs(t,u,n)}t.string=wt.default.addArgs(t,n,t.string.slice(t.i)),t.i=0,wt.default.checkMaxMacros(t)};Z.BeginEnv=function(t,e,n,r,a,o){if(e.getProperty("end")&&t.stack.env.closing===e.getName()){delete t.stack.env.closing;var l=t.string.slice(t.i);return t.string=r,t.i=0,t.Parse(),t.string=l,t.i=0,t.itemFactory.create("end").setProperty("name",e.getName())}if(a){var u=[];if(o!=null){var d=t.GetBrackets("\\begin{"+e.getName()+"}");u.push(d??o)}for(var h=u.length;h<a;h++)u.push(t.GetArgument("\\begin{"+e.getName()+"}"));n=wt.default.substituteArgs(t,u,n),r=wt.default.substituteArgs(t,[],r)}return t.string=wt.default.addArgs(t,n,t.string.slice(t.i)),t.i=0,t.itemFactory.create("beginEnv").setProperty("name",e.getName())};Z.Macro=Eo.default.Macro;Wt.default=Z;var Zt={},ko=v&&v.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qo=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.BeginEnvItem=void 0;var Kn=qo(R),Do=ce,Io=function(t){ko(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"beginEnv"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.checkItem=function(n){if(n.isKind("end")){if(n.getName()!==this.getName())throw new Kn.default("EnvBadEnd","\\begin{%1} ended with \\end{%2}",this.getName(),n.getName());return[[this.factory.create("mml",this.toMml())],!0]}if(n.isKind("stop"))throw new Kn.default("EnvMissingEnd","Missing \\end{%1}",this.getName());return t.prototype.checkItem.call(this,n)},e}(Do.BaseItem);Zt.BeginEnvItem=Io;var $r=v&&v.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ur=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Le;Object.defineProperty(Mn,"__esModule",{value:!0});Mn.ConfigMacrosConfiguration=void 0;var Vr=B,Wn=Kt,Zn=I,Bo=Ur(yt),Je=Qt,tn=Ur(Wt),Yn=Zt,en="configmacros-map",nn="configmacros-env-map";function jo(t){new Zn.CommandMap(en,{},{}),new Zn.EnvironmentMap(nn,Bo.default.environment,{},{}),t.append(Vr.Configuration.local({handler:{macro:[en],environment:[nn]},priority:3}))}function No(t,e){Go(e),Fo(e)}function Go(t){var e,n,r=t.parseOptions.handlers.retrieve(en),a=t.parseOptions.options.macros;try{for(var o=$r(Object.keys(a)),l=o.next();!l.done;l=o.next()){var u=l.value,d=typeof a[u]=="string"?[a[u]]:a[u],h=Array.isArray(d[2])?new Je.Macro(u,tn.default.MacroWithTemplate,d.slice(0,2).concat(d[2])):new Je.Macro(u,tn.default.Macro,d);r.add(u,h)}}catch(p){e={error:p}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}function Fo(t){var e,n,r=t.parseOptions.handlers.retrieve(nn),a=t.parseOptions.options.environments;try{for(var o=$r(Object.keys(a)),l=o.next();!l.done;l=o.next()){var u=l.value;r.add(u,new Je.Macro(u,tn.default.BeginEnv,[!0].concat(a[u])))}}catch(d){e={error:d}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}Mn.ConfigMacrosConfiguration=Vr.Configuration.create("configmacros",{init:jo,config:No,items:(Le={},Le[Yn.BeginEnvItem.prototype.kind]=Yn.BeginEnvItem,Le),options:{macros:(0,Wn.expandable)({}),environments:(0,Wn.expandable)({})}});var Lo={};(function(t){var e=v&&v.__extends||function(){var c=function(y,m){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,_){s.__proto__=_}||function(s,_){for(var i in _)Object.prototype.hasOwnProperty.call(_,i)&&(s[i]=_[i])},c(y,m)};return function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");c(y,m);function s(){this.constructor=y}y.prototype=m===null?Object.create(m):(s.prototype=m.prototype,new s)}}(),n=v&&v.__read||function(c,y){var m=typeof Symbol=="function"&&c[Symbol.iterator];if(!m)return c;var s=m.call(c),_,i=[],f;try{for(;(y===void 0||y-- >0)&&!(_=s.next()).done;)i.push(_.value)}catch(x){f={error:x}}finally{try{_&&!_.done&&(m=s.return)&&m.call(s)}finally{if(f)throw f.error}}return i},r=v&&v.__importDefault||function(c){return c&&c.__esModule?c:{default:c}},a;Object.defineProperty(t,"__esModule",{value:!0}),t.EmpheqConfiguration=t.EmpheqMethods=t.EmpheqBeginItem=void 0;var o=B,l=I,u=r($()),d=r(R),h=Pt,p=gn,g=function(c){e(y,c);function y(){return c!==null&&c.apply(this,arguments)||this}return Object.defineProperty(y.prototype,"kind",{get:function(){return"empheq-begin"},enumerable:!1,configurable:!0}),y.prototype.checkItem=function(m){return m.isKind("end")&&m.getName()===this.getName()&&this.setProperty("end",!1),c.prototype.checkItem.call(this,m)},y}(h.BeginItem);t.EmpheqBeginItem=g,t.EmpheqMethods={Empheq:function(c,y){if(c.stack.env.closing===y.getName()){delete c.stack.env.closing,c.Push(c.itemFactory.create("end").setProperty("name",c.stack.global.empheq)),c.stack.global.empheq="";var m=c.stack.Top();p.EmpheqUtil.adjustTable(m,c),c.Push(c.itemFactory.create("end").setProperty("name","empheq"))}else{u.default.checkEqnEnv(c),delete c.stack.global.eqnenv;var s=c.GetBrackets("\\begin{"+y.getName()+"}")||"",_=n((c.GetArgument("\\begin{"+y.getName()+"}")||"").split(/=/),2),i=_[0],f=_[1];if(!p.EmpheqUtil.checkEnv(i))throw new d.default("UnknownEnv",'Unknown environment "%1"',i);s&&y.setProperties(p.EmpheqUtil.splitOptions(s,{left:1,right:1})),c.stack.global.empheq=i,c.string="\\begin{"+i+"}"+(f?"{"+f+"}":"")+c.string.slice(c.i),c.i=0,c.Push(y)}},EmpheqMO:function(c,y,m){c.Push(c.create("token","mo",{},m))},EmpheqDelim:function(c,y){var m=c.GetDelimiter(y);c.Push(c.create("token","mo",{stretchy:!0,symmetric:!0},m))}},new l.EnvironmentMap("empheq-env",p.EmpheqUtil.environment,{empheq:["Empheq","empheq"]},t.EmpheqMethods),new l.CommandMap("empheq-macros",{empheqlbrace:["EmpheqMO","{"],empheqrbrace:["EmpheqMO","}"],empheqlbrack:["EmpheqMO","["],empheqrbrack:["EmpheqMO","]"],empheqlangle:["EmpheqMO","⟨"],empheqrangle:["EmpheqMO","⟩"],empheqlparen:["EmpheqMO","("],empheqrparen:["EmpheqMO",")"],empheqlvert:["EmpheqMO","|"],empheqrvert:["EmpheqMO","|"],empheqlVert:["EmpheqMO","‖"],empheqrVert:["EmpheqMO","‖"],empheqlfloor:["EmpheqMO","⌊"],empheqrfloor:["EmpheqMO","⌋"],empheqlceil:["EmpheqMO","⌈"],empheqrceil:["EmpheqMO","⌉"],empheqbiglbrace:["EmpheqMO","{"],empheqbigrbrace:["EmpheqMO","}"],empheqbiglbrack:["EmpheqMO","["],empheqbigrbrack:["EmpheqMO","]"],empheqbiglangle:["EmpheqMO","⟨"],empheqbigrangle:["EmpheqMO","⟩"],empheqbiglparen:["EmpheqMO","("],empheqbigrparen:["EmpheqMO",")"],empheqbiglvert:["EmpheqMO","|"],empheqbigrvert:["EmpheqMO","|"],empheqbiglVert:["EmpheqMO","‖"],empheqbigrVert:["EmpheqMO","‖"],empheqbiglfloor:["EmpheqMO","⌊"],empheqbigrfloor:["EmpheqMO","⌋"],empheqbiglceil:["EmpheqMO","⌈"],empheqbigrceil:["EmpheqMO","⌉"],empheql:"EmpheqDelim",empheqr:"EmpheqDelim",empheqbigl:"EmpheqDelim",empheqbigr:"EmpheqDelim"},t.EmpheqMethods),t.EmpheqConfiguration=o.Configuration.create("empheq",{handler:{macro:["empheq-macros"],environment:["empheq-env"]},items:(a={},a[g.prototype.kind]=g,a)})})(Lo);var Ro={},_e={},$o=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Uo=$o(Wt),Vo=I;new Vo.CommandMap("Newcommand-macros",{newcommand:"NewCommand",renewcommand:"NewCommand",newenvironment:"NewEnvironment",renewenvironment:"NewEnvironment",def:"MacroDef",let:"Let"},Uo.default);var zo=v&&v.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Ho=v&&v.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Xo=v&&v.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&zo(e,t,n);return Ho(e,t),e},zr=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Re;Object.defineProperty(_e,"__esModule",{value:!0});_e.NewcommandConfiguration=void 0;var Hr=B,Jn=Zt,Ct=zr(jt),tr=zr(yt),$e=Xo(I),Qo=function(t){new $e.DelimiterMap(Ct.default.NEW_DELIMITER,tr.default.delimiter,{}),new $e.CommandMap(Ct.default.NEW_COMMAND,{},{}),new $e.EnvironmentMap(Ct.default.NEW_ENVIRONMENT,tr.default.environment,{},{}),t.append(Hr.Configuration.local({handler:{character:[],delimiter:[Ct.default.NEW_DELIMITER],macro:[Ct.default.NEW_DELIMITER,Ct.default.NEW_COMMAND],environment:[Ct.default.NEW_ENVIRONMENT]},priority:-1}))};_e.NewcommandConfiguration=Hr.Configuration.create("newcommand",{handler:{macro:["Newcommand-macros"]},items:(Re={},Re[Jn.BeginEnvItem.prototype.kind]=Jn.BeginEnvItem,Re),options:{maxMacros:1e3},init:Qo});(function(t){var e=v&&v.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtpfeilConfiguration=t.ExtpfeilMethods=void 0;var n=B,r=I,a=It,o=e(jt),l=_e,u=e(R);t.ExtpfeilMethods={},t.ExtpfeilMethods.xArrow=a.AmsMethods.xArrow,t.ExtpfeilMethods.NewExtArrow=function(h,p){var g=h.GetArgument(p),c=h.GetArgument(p),y=h.GetArgument(p);if(!g.match(/^\\([a-z]+|.)$/i))throw new u.default("NewextarrowArg1","First argument to %1 must be a control sequence name",p);if(!c.match(/^(\d+),(\d+)$/))throw new u.default("NewextarrowArg2","Second argument to %1 must be two integers separated by a comma",p);if(!y.match(/^(\d+|0x[0-9A-F]+)$/i))throw new u.default("NewextarrowArg3","Third argument to %1 must be a unicode character number",p);g=g.substr(1);var m=c.split(",");o.default.addMacro(h,g,t.ExtpfeilMethods.xArrow,[parseInt(y),parseInt(m[0]),parseInt(m[1])])},new r.CommandMap("extpfeil",{xtwoheadrightarrow:["xArrow",8608,12,16],xtwoheadleftarrow:["xArrow",8606,17,13],xmapsto:["xArrow",8614,6,7],xlongequal:["xArrow",61,7,7],xtofrom:["xArrow",8644,12,12],Newextarrow:"NewExtArrow"},t.ExtpfeilMethods);var d=function(h){l.NewcommandConfiguration.init(h)};t.ExtpfeilConfiguration=n.Configuration.create("extpfeil",{handler:{macro:["extpfeil"]},init:d})})(Ro);var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.GensymbConfiguration=void 0;var Ko=B,Wo=Y,Zo=I;function Yo(t,e){var n=e.attributes||{};n.mathvariant=Wo.TexConstant.Variant.NORMAL,n.class="MathML-Unit";var r=t.create("token","mi",n,e.char);t.Push(r)}new Zo.CharacterMap("gensymb-symbols",Yo,{ohm:"Ω",degree:"°",celsius:"℃",perthousand:"‰",micro:"µ"});Cn.GensymbConfiguration=Ko.Configuration.create("gensymb",{handler:{macro:["gensymb-symbols"]}});var An={},wn={},Jo=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wn,"__esModule",{value:!0});var ct=Jo(K),Yt={};Yt.Href=function(t,e){var n=t.GetArgument(e),r=ye(t,e);ct.default.setAttribute(r,"href",n),t.Push(r)};Yt.Class=function(t,e){var n=t.GetArgument(e),r=ye(t,e),a=ct.default.getAttribute(r,"class");a&&(n=a+" "+n),ct.default.setAttribute(r,"class",n),t.Push(r)};Yt.Style=function(t,e){var n=t.GetArgument(e),r=ye(t,e),a=ct.default.getAttribute(r,"style");a&&(n.charAt(n.length-1)!==";"&&(n+=";"),n=a+" "+n),ct.default.setAttribute(r,"style",n),t.Push(r)};Yt.Id=function(t,e){var n=t.GetArgument(e),r=ye(t,e);ct.default.setAttribute(r,"id",n),t.Push(r)};var ye=function(t,e){var n=t.ParseArg(e);if(!ct.default.isInferred(n))return n;var r=ct.default.getChildren(n);if(r.length===1)return r[0];var a=t.create("node","mrow");return ct.default.copyChildren(n,a),ct.default.copyAttributes(n,a),a};wn.default=Yt;var ti=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(An,"__esModule",{value:!0});An.HtmlConfiguration=void 0;var ei=B,ni=I,ri=ti(wn);new ni.CommandMap("html_macros",{href:"Href",class:"Class",style:"Style",cssId:"Id"},ri.default);An.HtmlConfiguration=ei.Configuration.create("html",{handler:{macro:["html_macros"]}});var Ue={},Ve={},ze={},Gt={},er;function Xr(){if(er)return Gt;er=1;var t=v&&v.__read||function(p,g){var c=typeof Symbol=="function"&&p[Symbol.iterator];if(!c)return p;var y=c.call(p),m,s=[],_;try{for(;(g===void 0||g-- >0)&&!(m=y.next()).done;)s.push(m.value)}catch(i){_={error:i}}finally{try{m&&!m.done&&(c=y.return)&&c.call(y)}finally{if(_)throw _.error}}return s},e=v&&v.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.MathtoolsUtil=void 0;var n=Pt,r=e($()),a=e(nt()),o=e(R),l=Qt,u=Kt,d=Qr(),h=Kr();return Gt.MathtoolsUtil={setDisplayLevel:function(p,g){if(g){var c=t((0,u.lookup)(g,{"\\displaystyle":[!0,0],"\\textstyle":[!1,0],"\\scriptstyle":[!1,1],"\\scriptscriptstyle":[!1,2]},[null,null]),2),y=c[0],m=c[1];y!==null&&(p.attributes.set("displaystyle",y),p.attributes.set("scriptlevel",m))}},checkAlignment:function(p,g){var c=p.stack.Top();if(c.kind!==n.EqnArrayItem.prototype.kind)throw new o.default("NotInAlignment","%1 can only be used in aligment environments",g);return c},addPairedDelims:function(p,g,c){var y=p.handlers.retrieve(h.PAIREDDELIMS);y.add(g,new l.Macro(g,d.MathtoolsMethods.PairedDelimiters,c))},spreadLines:function(p,g){if(p.isKind("mtable")){var c=p.attributes.get("rowspacing");if(c){var y=r.default.dimen2em(g);c=c.split(/ /).map(function(m){return r.default.Em(Math.max(0,r.default.dimen2em(m)+y))}).join(" ")}else c=g;p.attributes.set("rowspacing",c)}},plusOrMinus:function(p,g){if(g=g.trim(),!g.match(/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)$/))throw new o.default("NotANumber","Argument to %1 is not a number",p);return g.match(/^[-+]/)?g:"+"+g},getScript:function(p,g,c){var y=r.default.trimSpaces(p.GetArgument(g));if(y==="")return p.create("node","none");var m=p.options.mathtools["prescript-".concat(c,"-format")];return m&&(y="".concat(m,"{").concat(y,"}")),new a.default(y,p.stack.env,p.configuration).mml()}},Gt}var nr;function Qr(){return nr||(nr=1,function(t){var e=v&&v.__assign||function(){return e=Object.assign||function(i){for(var f,x=1,M=arguments.length;x<M;x++){f=arguments[x];for(var C in f)Object.prototype.hasOwnProperty.call(f,C)&&(i[C]=f[C])}return i},e.apply(this,arguments)},n=v&&v.__read||function(i,f){var x=typeof Symbol=="function"&&i[Symbol.iterator];if(!x)return i;var M=x.call(i),C,A=[],P;try{for(;(f===void 0||f-- >0)&&!(C=M.next()).done;)A.push(C.value)}catch(T){P={error:T}}finally{try{C&&!C.done&&(x=M.return)&&x.call(M)}finally{if(P)throw P.error}}return A},r=v&&v.__values||function(i){var f=typeof Symbol=="function"&&Symbol.iterator,x=f&&i[f],M=0;if(x)return x.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&M>=i.length&&(i=void 0),{value:i&&i[M++],done:!i}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")},a=v&&v.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(t,"__esModule",{value:!0}),t.MathtoolsMethods=void 0;var o=a($()),l=It,u=a(ot),d=a(nt()),h=a(R),p=a(K),g=vt,c=on,y=Kt,m=a(jt),s=a(Wt),_=Xr();t.MathtoolsMethods={MtMatrix:function(i,f,x,M){var C=i.GetBrackets("\\begin{".concat(f.getName(),"}"),"c");return t.MathtoolsMethods.Array(i,f,x,M,C)},MtSmallMatrix:function(i,f,x,M,C){return C||(C=i.GetBrackets("\\begin{".concat(f.getName(),"}"),i.options.mathtools["smallmatrix-align"])),t.MathtoolsMethods.Array(i,f,x,M,C,o.default.Em(1/3),".2em","S",1)},MtMultlined:function(i,f){var x,M="\\begin{".concat(f.getName(),"}"),C=i.GetBrackets(M,i.options.mathtools["multlined-pos"]||"c"),A=C?i.GetBrackets(M,""):"";C&&!C.match(/^[cbt]$/)&&(x=n([C,A],2),A=x[0],C=x[1]),i.Push(f);var P=i.itemFactory.create("multlined",i,f);return P.arraydef={displaystyle:!0,rowspacing:".5em",width:A||"auto",columnwidth:"100%"},o.default.setArrayAlign(P,C||"c")},HandleShove:function(i,f,x){var M=i.stack.Top();if(M.kind!=="multline"&&M.kind!=="multlined")throw new h.default("CommandInMultlined","%1 can only appear within the multline or multlined environments",f);if(M.Size())throw new h.default("CommandAtTheBeginingOfLine","%1 must come at the beginning of the line",f);M.setProperty("shove",x);var C=i.GetBrackets(f),A=i.ParseArg(f);if(C){var P=i.create("node","mrow",[]),T=i.create("node","mspace",[],{width:C});x==="left"?(P.appendChild(T),P.appendChild(A)):(P.appendChild(A),P.appendChild(T)),A=P}i.Push(A)},SpreadLines:function(i,f){var x,M;if(i.stack.env.closing===f.getName()){delete i.stack.env.closing;var C=i.stack.Pop(),A=C.toMml(),P=C.getProperty("spread");if(A.isInferred)try{for(var T=r(p.default.getChildren(A)),E=T.next();!E.done;E=T.next()){var N=E.value;_.MathtoolsUtil.spreadLines(N,P)}}catch(z){x={error:z}}finally{try{E&&!E.done&&(M=T.return)&&M.call(T)}finally{if(x)throw x.error}}else _.MathtoolsUtil.spreadLines(A,P);i.Push(A)}else{var P=i.GetDimen("\\begin{".concat(f.getName(),"}"));f.setProperty("spread",P),i.Push(f)}},Cases:function(i,f,x,M,C){var A=i.itemFactory.create("array").setProperty("casesEnv",f.getName());return A.arraydef={rowspacing:".2em",columnspacing:"1em",columnalign:"left"},C==="D"&&(A.arraydef.displaystyle=!0),A.setProperties({open:x,close:M}),i.Push(f),A},MathLap:function(i,f,x,M){var C=i.GetBrackets(f,"").trim(),A=i.create("node","mstyle",[i.create("node","mpadded",[i.ParseArg(f)],e({width:0},x==="r"?{}:{lspace:x==="l"?"-1width":"-.5width"}))],{"data-cramped":M});_.MathtoolsUtil.setDisplayLevel(A,C),i.Push(i.create("node","TeXAtom",[A]))},Cramped:function(i,f){var x=i.GetBrackets(f,"").trim(),M=i.ParseArg(f),C=i.create("node","mstyle",[M],{"data-cramped":!0});_.MathtoolsUtil.setDisplayLevel(C,x),i.Push(C)},MtLap:function(i,f,x){var M=o.default.internalMath(i,i.GetArgument(f),0),C=i.create("node","mpadded",M,{width:0});x!=="r"&&p.default.setAttribute(C,"lspace",x==="l"?"-1width":"-.5width"),i.Push(C)},MathMakeBox:function(i,f){var x=i.GetBrackets(f),M=i.GetBrackets(f,"c"),C=i.create("node","mpadded",[i.ParseArg(f)]);x&&p.default.setAttribute(C,"width",x);var A=(0,y.lookup)(M,{c:"center",r:"right"},"");A&&p.default.setAttribute(C,"data-align",A),i.Push(C)},MathMBox:function(i,f){i.Push(i.create("node","mrow",[i.ParseArg(f)]))},UnderOverBracket:function(i,f){var x=(0,c.length2em)(i.GetBrackets(f,".1em"),.1),M=i.GetBrackets(f,".2em"),C=i.GetArgument(f),A=n(f.charAt(1)==="o"?["over","accent","bottom"]:["under","accentunder","top"],3),P=A[0],T=A[1],E=A[2],N=(0,c.em)(x),z=new d.default(C,i.stack.env,i.configuration).mml(),L=new d.default(C,i.stack.env,i.configuration).mml(),J=i.create("node","mpadded",[i.create("node","mphantom",[L])],{style:"border: ".concat(N," solid; border-").concat(E,": none"),height:M,depth:0}),rt=o.default.underOver(i,z,J,P,!0),Q=p.default.getChildAt(p.default.getChildAt(rt,0),0);p.default.setAttribute(Q,T,!0),i.Push(rt)},Aboxed:function(i,f){var x=_.MathtoolsUtil.checkAlignment(i,f);x.row.length%2===1&&x.row.push(i.create("node","mtd",[]));var M=i.GetArgument(f),C=i.string.substr(i.i);i.string=M+"&&\\endAboxed",i.i=0;var A=i.GetUpTo(f,"&"),P=i.GetUpTo(f,"&");i.GetUpTo(f,"\\endAboxed");var T=o.default.substituteArgs(i,[A,P],"\\rlap{\\boxed{#1{}#2}}\\kern.267em\\phantom{#1}&\\phantom{{}#2}\\kern.267em");i.string=T+C,i.i=0},ArrowBetweenLines:function(i,f){var x=_.MathtoolsUtil.checkAlignment(i,f);if(x.Size()||x.row.length)throw new h.default("BetweenLines","%1 must be on a row by itself",f);var M=i.GetStar(),C=i.GetBrackets(f,"\\Updownarrow");M&&(x.EndEntry(),x.EndEntry());var A=M?"\\quad"+C:C+"\\quad",P=new d.default(A,i.stack.env,i.configuration).mml();i.Push(P),x.EndEntry(),x.EndRow()},VDotsWithin:function(i,f){var x=i.stack.Top(),M=x.getProperty("flushspaceabove")===x.table.length,C="\\mmlToken{mi}{}"+i.GetArgument(f)+"\\mmlToken{mi}{}",A=new d.default(C,i.stack.env,i.configuration).mml(),P=i.create("node","mpadded",[i.create("node","mpadded",[i.create("node","mo",[i.create("text","⋮")])],e({width:0,lspace:"-.5width"},M?{height:"-.6em",voffset:"-.18em"}:{})),i.create("node","mphantom",[A])],{lspace:".5width"});i.Push(P)},ShortVDotsWithin:function(i,f){var x=i.stack.Top(),M=i.GetStar();t.MathtoolsMethods.FlushSpaceAbove(i,"\\MTFlushSpaceAbove"),!M&&x.EndEntry(),t.MathtoolsMethods.VDotsWithin(i,"\\vdotswithin"),M&&x.EndEntry(),t.MathtoolsMethods.FlushSpaceBelow(i,"\\MTFlushSpaceBelow")},FlushSpaceAbove:function(i,f){var x=_.MathtoolsUtil.checkAlignment(i,f);x.setProperty("flushspaceabove",x.table.length),x.addRowSpacing("-"+i.options.mathtools.shortvdotsadjustabove)},FlushSpaceBelow:function(i,f){var x=_.MathtoolsUtil.checkAlignment(i,f);x.Size()&&x.EndEntry(),x.EndRow(),x.addRowSpacing("-"+i.options.mathtools.shortvdotsadjustbelow)},PairedDelimiters:function(i,f,x,M,C,A,P,T){C===void 0&&(C="#1"),A===void 0&&(A=1),P===void 0&&(P=""),T===void 0&&(T="");var E=i.GetStar(),N=E?"":i.GetBrackets(f),z=n(E?["\\left","\\right"]:N?[N+"l",N+"r"]:["",""],2),L=z[0],J=z[1],rt=E?"\\middle":N||"";if(A){for(var Q=[],lt=Q.length;lt<A;lt++)Q.push(i.GetArgument(f));P=o.default.substituteArgs(i,Q,P),C=o.default.substituteArgs(i,Q,C),T=o.default.substituteArgs(i,Q,T)}C=C.replace(/\\delimsize/g,rt),i.string=[P,L,x,C,J,M,T,i.string.substr(i.i)].reduce(function(Pe,Se){return o.default.addArgs(i,Pe,Se)},""),i.i=0,o.default.checkMaxMacros(i)},DeclarePairedDelimiter:function(i,f){var x=m.default.GetCsNameArgument(i,f),M=i.GetArgument(f),C=i.GetArgument(f);_.MathtoolsUtil.addPairedDelims(i.configuration,x,[M,C])},DeclarePairedDelimiterX:function(i,f){var x=m.default.GetCsNameArgument(i,f),M=m.default.GetArgCount(i,f),C=i.GetArgument(f),A=i.GetArgument(f),P=i.GetArgument(f);_.MathtoolsUtil.addPairedDelims(i.configuration,x,[C,A,P,M])},DeclarePairedDelimiterXPP:function(i,f){var x=m.default.GetCsNameArgument(i,f),M=m.default.GetArgCount(i,f),C=i.GetArgument(f),A=i.GetArgument(f),P=i.GetArgument(f),T=i.GetArgument(f),E=i.GetArgument(f);_.MathtoolsUtil.addPairedDelims(i.configuration,x,[A,P,E,M,C,T])},CenterColon:function(i,f,x,M,C){M===void 0&&(M=!1),C===void 0&&(C=!1);var A=i.options.mathtools,P=i.create("token","mo",{},":");if(x&&(A.centercolon||M)){var T=A["centercolon-offset"];P=i.create("node","mpadded",[P],e({voffset:T,height:"+".concat(T),depth:"-".concat(T)},C?{width:A["thincolon-dw"],lspace:A["thincolon-dx"]}:{}))}i.Push(P)},Relation:function(i,f,x,M){var C=i.options.mathtools;C["use-unicode"]&&M?i.Push(i.create("token","mo",{texClass:g.TEXCLASS.REL},M)):(x="\\mathrel{"+x.replace(/:/g,"\\MTThinColon").replace(/-/g,"\\mathrel{-}")+"}",i.string=o.default.addArgs(i,x,i.string.substr(i.i)),i.i=0)},NArrow:function(i,f,x,M){i.Push(i.create("node","TeXAtom",[i.create("token","mtext",{},x),i.create("node","mpadded",[i.create("node","mpadded",[i.create("node","menclose",[i.create("node","mspace",[],{height:".2em",depth:0,width:".4em"})],{notation:"updiagonalstrike","data-thickness":".05em","data-padding":0})],{width:0,lspace:"-.5width",voffset:M}),i.create("node","mphantom",[i.create("token","mtext",{},x)])],{width:0,lspace:"-.5width"})],{texClass:g.TEXCLASS.REL}))},SplitFrac:function(i,f,x){var M=i.ParseArg(f),C=i.ParseArg(f);i.Push(i.create("node","mstyle",[i.create("node","mfrac",[i.create("node","mstyle",[M,i.create("token","mi"),i.create("token","mspace",{width:"1em"})],{scriptlevel:0}),i.create("node","mstyle",[i.create("token","mspace",{width:"1em"}),i.create("token","mi"),C],{scriptlevel:0})],{linethickness:0,numalign:"left",denomalign:"right"})],{displaystyle:x,scriptlevel:0}))},XMathStrut:function(i,f){var x=i.GetBrackets(f),M=i.GetArgument(f);M=_.MathtoolsUtil.plusOrMinus(f,M),x=_.MathtoolsUtil.plusOrMinus(f,x||M),i.Push(i.create("node","TeXAtom",[i.create("node","mpadded",[i.create("node","mphantom",[i.create("token","mo",{stretchy:!1},"(")])],{width:0,height:M+"height",depth:x+"depth"})],{texClass:g.TEXCLASS.ORD}))},Prescript:function(i,f){var x=_.MathtoolsUtil.getScript(i,f,"sup"),M=_.MathtoolsUtil.getScript(i,f,"sub"),C=_.MathtoolsUtil.getScript(i,f,"arg");if(p.default.isType(x,"none")&&p.default.isType(M,"none")){i.Push(C);return}var A=i.create("node","mmultiscripts",[C]);p.default.getChildren(A).push(null,null),p.default.appendChildren(A,[i.create("node","mprescripts"),M,x]),A.setProperty("fixPrescript",!0),i.Push(A)},NewTagForm:function(i,f,x){x===void 0&&(x=!1);var M=i.tags;if(!("mtFormats"in M))throw new h.default("TagsNotMT","%1 can only be used with ams or mathtools tags",f);var C=i.GetArgument(f).trim();if(!C)throw new h.default("InvalidTagFormID","Tag form name can't be empty");var A=i.GetBrackets(f,""),P=i.GetArgument(f),T=i.GetArgument(f);if(!x&&M.mtFormats.has(C))throw new h.default("DuplicateTagForm","Duplicate tag form: %1",C);M.mtFormats.set(C,[P,T,A])},UseTagForm:function(i,f){var x=i.tags;if(!("mtFormats"in x))throw new h.default("TagsNotMT","%1 can only be used with ams or mathtools tags",f);var M=i.GetArgument(f).trim();if(!M){x.mtCurrent=null;return}if(!x.mtFormats.has(M))throw new h.default("UndefinedTagForm","Undefined tag form: %1",M);x.mtCurrent=x.mtFormats.get(M)},SetOptions:function(i,f){var x,M,C=i.options.mathtools;if(!C["allow-mathtoolsset"])throw new h.default("ForbiddenMathtoolsSet","%1 is disabled",f);var A={};Object.keys(C).forEach(function(L){L!=="pariedDelimiters"&&L!=="tagforms"&&L!=="allow-mathtoolsset"&&(A[L]=1)});var P=i.GetArgument(f),T=o.default.keyvalOptions(P,A,!0);try{for(var E=r(Object.keys(T)),N=E.next();!N.done;N=E.next()){var z=N.value;C[z]=T[z]}}catch(L){x={error:L}}finally{try{N&&!N.done&&(M=E.return)&&M.call(E)}finally{if(x)throw x.error}}},Array:u.default.Array,Macro:u.default.Macro,xArrow:l.AmsMethods.xArrow,HandleRef:l.AmsMethods.HandleRef,AmsEqnArray:l.AmsMethods.AmsEqnArray,MacroWithTemplate:s.default.MacroWithTemplate}}(ze)),ze}var rr;function ai(){if(rr)return Ve;rr=1;var t=v&&v.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ve,"__esModule",{value:!0});var e=t(yt),n=I,r=Y,a=Qr();return new n.CommandMap("mathtools-macros",{shoveleft:["HandleShove",r.TexConstant.Align.LEFT],shoveright:["HandleShove",r.TexConstant.Align.RIGHT],xleftrightarrow:["xArrow",8596,10,10],xLeftarrow:["xArrow",8656,12,7],xRightarrow:["xArrow",8658,7,12],xLeftrightarrow:["xArrow",8660,12,12],xhookleftarrow:["xArrow",8617,10,5],xhookrightarrow:["xArrow",8618,5,10],xmapsto:["xArrow",8614,10,10],xrightharpoondown:["xArrow",8641,5,10],xleftharpoondown:["xArrow",8637,10,5],xrightleftharpoons:["xArrow",8652,10,10],xrightharpoonup:["xArrow",8640,5,10],xleftharpoonup:["xArrow",8636,10,5],xleftrightharpoons:["xArrow",8651,10,10],mathllap:["MathLap","l",!1],mathrlap:["MathLap","r",!1],mathclap:["MathLap","c",!1],clap:["MtLap","c"],textllap:["MtLap","l"],textrlap:["MtLap","r"],textclap:["MtLap","c"],cramped:"Cramped",crampedllap:["MathLap","l",!0],crampedrlap:["MathLap","r",!0],crampedclap:["MathLap","c",!0],crampedsubstack:["Macro","\\begin{crampedsubarray}{c}#1\\end{crampedsubarray}",1],mathmbox:"MathMBox",mathmakebox:"MathMakeBox",overbracket:"UnderOverBracket",underbracket:"UnderOverBracket",refeq:"HandleRef",MoveEqLeft:["Macro","\\hspace{#1em}&\\hspace{-#1em}",1,"2"],Aboxed:"Aboxed",ArrowBetweenLines:"ArrowBetweenLines",vdotswithin:"VDotsWithin",shortvdotswithin:"ShortVDotsWithin",MTFlushSpaceAbove:"FlushSpaceAbove",MTFlushSpaceBelow:"FlushSpaceBelow",DeclarePairedDelimiter:"DeclarePairedDelimiter",DeclarePairedDelimiterX:"DeclarePairedDelimiterX",DeclarePairedDelimiterXPP:"DeclarePairedDelimiterXPP",DeclarePairedDelimiters:"DeclarePairedDelimiter",DeclarePairedDelimitersX:"DeclarePairedDelimiterX",DeclarePairedDelimitersXPP:"DeclarePairedDelimiterXPP",centercolon:["CenterColon",!0,!0],ordinarycolon:["CenterColon",!1],MTThinColon:["CenterColon",!0,!0,!0],coloneqq:["Relation",":=","≔"],Coloneqq:["Relation","::=","⩴"],coloneq:["Relation",":-"],Coloneq:["Relation","::-"],eqqcolon:["Relation","=:","≕"],Eqqcolon:["Relation","=::"],eqcolon:["Relation","-:","∹"],Eqcolon:["Relation","-::"],colonapprox:["Relation",":\\approx"],Colonapprox:["Relation","::\\approx"],colonsim:["Relation",":\\sim"],Colonsim:["Relation","::\\sim"],dblcolon:["Relation","::","∷"],nuparrow:["NArrow","↑",".06em"],ndownarrow:["NArrow","↓",".25em"],bigtimes:["Macro","\\mathop{\\Large\\kern-.1em\\boldsymbol{\\times}\\kern-.1em}"],splitfrac:["SplitFrac",!1],splitdfrac:["SplitFrac",!0],xmathstrut:"XMathStrut",prescript:"Prescript",newtagform:["NewTagForm",!1],renewtagform:["NewTagForm",!0],usetagform:"UseTagForm",adjustlimits:["MacroWithTemplate","\\mathop{{#1}\\vphantom{{#3}}}_{{#2}\\vphantom{{#4}}}\\mathop{{#3}\\vphantom{{#1}}}_{{#4}\\vphantom{{#2}}}",4,,"_",,"_"],mathtoolsset:"SetOptions"},a.MathtoolsMethods),new n.EnvironmentMap("mathtools-environments",e.default.environment,{dcases:["Array",null,"\\{","","ll",null,".2em","D"],rcases:["Array",null,"","\\}","ll",null,".2em"],drcases:["Array",null,"","\\}","ll",null,".2em","D"],"dcases*":["Cases",null,"{","","D"],"rcases*":["Cases",null,"","}"],"drcases*":["Cases",null,"","}","D"],"cases*":["Cases",null,"{",""],"matrix*":["MtMatrix",null,null,null],"pmatrix*":["MtMatrix",null,"(",")"],"bmatrix*":["MtMatrix",null,"[","]"],"Bmatrix*":["MtMatrix",null,"\\{","\\}"],"vmatrix*":["MtMatrix",null,"\\vert","\\vert"],"Vmatrix*":["MtMatrix",null,"\\Vert","\\Vert"],"smallmatrix*":["MtSmallMatrix",null,null,null],psmallmatrix:["MtSmallMatrix",null,"(",")","c"],"psmallmatrix*":["MtSmallMatrix",null,"(",")"],bsmallmatrix:["MtSmallMatrix",null,"[","]","c"],"bsmallmatrix*":["MtSmallMatrix",null,"[","]"],Bsmallmatrix:["MtSmallMatrix",null,"\\{","\\}","c"],"Bsmallmatrix*":["MtSmallMatrix",null,"\\{","\\}"],vsmallmatrix:["MtSmallMatrix",null,"\\vert","\\vert","c"],"vsmallmatrix*":["MtSmallMatrix",null,"\\vert","\\vert"],Vsmallmatrix:["MtSmallMatrix",null,"\\Vert","\\Vert","c"],"Vsmallmatrix*":["MtSmallMatrix",null,"\\Vert","\\Vert"],crampedsubarray:["Array",null,null,null,null,"0em","0.1em","S'",1],multlined:"MtMultlined",spreadlines:["SpreadLines",!0],lgathered:["AmsEqnArray",null,null,null,"l",null,".5em","D"],rgathered:["AmsEqnArray",null,null,null,"r",null,".5em","D"]},a.MathtoolsMethods),new n.DelimiterMap("mathtools-delimiters",e.default.delimiter,{"\\lparen":"(","\\rparen":")"}),new n.CommandMap("mathtools-characters",{":":["CenterColon",!0]},a.MathtoolsMethods),Ve}var xe={},oi=v&&v.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ii=v&&v.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},li=v&&v.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,o=[],l;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(u){l={error:u}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return o},ui=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xe,"__esModule",{value:!0});xe.MathtoolsTagFormat=void 0;var ci=ui(R),He=ue,ar=0;function si(t,e){var n=e.parseOptions.options.tags;n!=="base"&&t.tags.hasOwnProperty(n)&&He.TagsFactory.add(n,t.tags[n]);var r=He.TagsFactory.create(e.parseOptions.options.tags).constructor,a=function(l){oi(u,l);function u(){var d,h,p=l.call(this)||this;p.mtFormats=new Map,p.mtCurrent=null;var g=e.parseOptions.options.mathtools.tagforms;try{for(var c=ii(Object.keys(g)),y=c.next();!y.done;y=c.next()){var m=y.value;if(!Array.isArray(g[m])||g[m].length!==3)throw new ci.default("InvalidTagFormDef",'The tag form definition for "%1" should be an array fo three strings',m);p.mtFormats.set(m,g[m])}}catch(s){d={error:s}}finally{try{y&&!y.done&&(h=c.return)&&h.call(c)}finally{if(d)throw d.error}}return p}return u.prototype.formatTag=function(d){if(this.mtCurrent){var h=li(this.mtCurrent,3),p=h[0],g=h[1],c=h[2];return c?"".concat(p).concat(c,"{").concat(d,"}").concat(g):"".concat(p).concat(d).concat(g)}return l.prototype.formatTag.call(this,d)},u}(r);ar++;var o="MathtoolsTags-"+ar;He.TagsFactory.add(o,a),e.parseOptions.options.tags=o}xe.MathtoolsTagFormat=si;var Me={},di=v&&v.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fi=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Me,"__esModule",{value:!0});Me.MultlinedItem=void 0;var mi=bt,Tt=fi(K),or=Y,hi=function(t){di(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"kind",{get:function(){return"multlined"},enumerable:!1,configurable:!0}),e.prototype.EndTable=function(){if((this.Size()||this.row.length)&&(this.EndEntry(),this.EndRow()),this.table.length>1){var n=this.factory.configuration.options.mathtools,r=n.multlinegap,a=n["firstline-afterskip"]||r,o=n["lastline-preskip"]||r,l=Tt.default.getChildren(this.table[0])[0];Tt.default.getAttribute(l,"columnalign")!==or.TexConstant.Align.RIGHT&&l.appendChild(this.create("node","mspace",[],{width:a}));var u=Tt.default.getChildren(this.table[this.table.length-1])[0];if(Tt.default.getAttribute(u,"columnalign")!==or.TexConstant.Align.LEFT){var d=Tt.default.getChildren(u)[0];d.childNodes.unshift(null);var h=this.create("node","mspace",[],{width:o});Tt.default.setChild(d,0,h)}}t.prototype.EndTable.call(this)},e}(mi.MultlineItem);Me.MultlinedItem=hi;var ir;function Kr(){return ir||(ir=1,function(t){var e=v&&v.__values||function(m){var s=typeof Symbol=="function"&&Symbol.iterator,_=s&&m[s],i=0;if(_)return _.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&i>=m.length&&(m=void 0),{value:m&&m[i++],done:!m}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},n=v&&v.__importDefault||function(m){return m&&m.__esModule?m:{default:m}},r;Object.defineProperty(t,"__esModule",{value:!0}),t.MathtoolsConfiguration=t.fixPrescripts=t.PAIREDDELIMS=void 0;var a=B,o=I,l=n(K),u=Kt;ai();var d=Xr(),h=xe,p=Me;t.PAIREDDELIMS="mathtools-paired-delims";function g(m){new o.CommandMap(t.PAIREDDELIMS,{},{}),m.append(a.Configuration.local({handler:{macro:[t.PAIREDDELIMS]},priority:-5}))}function c(m,s){var _,i,f=s.parseOptions,x=f.options.mathtools.pairedDelimiters;try{for(var M=e(Object.keys(x)),C=M.next();!C.done;C=M.next()){var A=C.value;d.MathtoolsUtil.addPairedDelims(f,A,x[A])}}catch(P){_={error:P}}finally{try{C&&!C.done&&(i=M.return)&&i.call(M)}finally{if(_)throw _.error}}(0,h.MathtoolsTagFormat)(m,s)}function y(m){var s,_,i,f,x,M,C=m.data;try{for(var A=e(C.getList("mmultiscripts")),P=A.next();!P.done;P=A.next()){var T=P.value;if(T.getProperty("fixPrescript")){var E=l.default.getChildren(T),N=0;try{for(var z=(i=void 0,e([1,2])),L=z.next();!L.done;L=z.next()){var J=L.value;E[J]||(l.default.setChild(T,J,C.nodeFactory.create("node","none")),N++)}}catch(lt){i={error:lt}}finally{try{L&&!L.done&&(f=z.return)&&f.call(z)}finally{if(i)throw i.error}}try{for(var rt=(x=void 0,e([4,5])),Q=rt.next();!Q.done;Q=rt.next()){var J=Q.value;l.default.isType(E[J],"mrow")&&l.default.getChildren(E[J]).length===0&&l.default.setChild(T,J,C.nodeFactory.create("node","none"))}}catch(lt){x={error:lt}}finally{try{Q&&!Q.done&&(M=rt.return)&&M.call(rt)}finally{if(x)throw x.error}}N===2&&E.splice(1,2)}}}catch(lt){s={error:lt}}finally{try{P&&!P.done&&(_=A.return)&&_.call(A)}finally{if(s)throw s.error}}}t.fixPrescripts=y,t.MathtoolsConfiguration=a.Configuration.create("mathtools",{handler:{macro:["mathtools-macros","mathtools-delimiters"],environment:["mathtools-environments"],delimiter:["mathtools-delimiters"],character:["mathtools-characters"]},items:(r={},r[p.MultlinedItem.prototype.kind]=p.MultlinedItem,r),init:g,config:c,postprocessors:[[y,-6]],options:{mathtools:{multlinegap:"1em","multlined-pos":"c","firstline-afterskip":"","lastline-preskip":"","smallmatrix-align":"c",shortvdotsadjustabove:".2em",shortvdotsadjustbelow:".2em",centercolon:!1,"centercolon-offset":".04em","thincolon-dx":"-.04em","thincolon-dw":"-.08em","use-unicode":!1,"prescript-sub-format":"","prescript-sup-format":"","prescript-arg-format":"","allow-mathtoolsset":!0,pairedDelimiters:(0,u.expandable)({}),tagforms:(0,u.expandable)({})}}})}(Ue)),Ue}var bn={},Ce={};/*!
 *************************************************************************
 *
 *  mhchemParser.ts
 *  4.2.1
 *
 *  Parser for the \ce command and \pu command for MathJax and Co.
 *
 *  mhchem's \ce is a tool for writing beautiful chemical equations easily.
 *  mhchem's \pu is a tool for writing physical units easily.
 *
 *  ----------------------------------------------------------------------
 *
 *  Copyright (c) 2015-2023 Martin Hensel
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 *
 *  ----------------------------------------------------------------------
 *
 *  https://github.com/mhchem/mhchemParser
 *
 */Object.defineProperty(Ce,"__esModule",{value:!0});Ce.mhchemParser=void 0;var vi=function(){function t(){}return t.toTex=function(e,n){return F.go(b.go(e,n),n!=="tex")},t}();Ce.mhchemParser=vi;function W(t){var e,n,r={};for(e in t)for(n in t[e]){var a=n.split("|");t[e][n].stateArray=a;for(var o=0;o<a.length;o++)r[a[o]]=[]}for(e in t)for(n in t[e])for(var a=t[e][n].stateArray||[],o=0;o<a.length;o++){var l=t[e][n];l.action_=[].concat(l.action_);for(var u=0;u<l.action_.length;u++)typeof l.action_[u]=="string"&&(l.action_[u]={type_:l.action_[u]});for(var d=e.split("|"),h=0;h<d.length;h++)if(a[o]==="*"){var p=void 0;for(p in r)r[p].push({pattern:d[h],task:l})}else r[a[o]].push({pattern:d[h],task:l})}return r}var b={go:function(t,e){if(!t)return[];e===void 0&&(e="ce");var n="0",r={};r.parenthesisLevel=0,t=t.replace(/\n/g," "),t=t.replace(/[\u2212\u2013\u2014\u2010]/g,"-"),t=t.replace(/[\u2026]/g,"...");for(var a,o=10,l=[];;){a!==t?(o=10,a=t):o--;var u=b.stateMachines[e],d=u.transitions[n]||u.transitions["*"];t:for(var h=0;h<d.length;h++){var p=b.patterns.match_(d[h].pattern,t);if(p){for(var g=d[h].task,c=0;c<g.action_.length;c++){var y=void 0;if(u.actions[g.action_[c].type_])y=u.actions[g.action_[c].type_](r,p.match_,g.action_[c].option);else if(b.actions[g.action_[c].type_])y=b.actions[g.action_[c].type_](r,p.match_,g.action_[c].option);else throw["MhchemBugA","mhchem bug A. Please report. ("+g.action_[c].type_+")"];b.concatArray(l,y)}if(n=g.nextState||n,t.length>0){if(g.revisit||(t=p.remainder),!g.toContinue)break t}else return l}}if(o<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(t,e){if(e)if(Array.isArray(e))for(var n=0;n<e.length;n++)t.push(e[n]);else t.push(e)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(t){var e=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:(?:([eE])|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return e&&e[0]?{match_:e.slice(1),remainder:t.substr(e[0].length)}:null},"(-)(9)^(-9)":/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/,"state of aggregation $":function(t){var e=b.patterns.findObserveGroups(t,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(e&&e.remainder.match(/^($|[\s,;\)\]\}])/))return e;var n=t.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return n?{match_:n[0],remainder:t.substr(n[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". __* ":/^([.\u22C5\u00B7\u2022]|[*])\s*/,"...":/^\.\.\.(?=$|[^.])/,"^{(...)}":function(t){return b.patterns.findObserveGroups(t,"^{","","","}")},"^($...$)":function(t){return b.patterns.findObserveGroups(t,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(t){return b.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(t){return b.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(t){return b.patterns.findObserveGroups(t,"_{","","","}")},"_($...$)":function(t){return b.patterns.findObserveGroups(t,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(t){return b.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(t){return b.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}^":/^\{\}(?=\^)/,"{}":/^\{\}/,"{...}":function(t){return b.patterns.findObserveGroups(t,"","{","}","")},"{(...)}":function(t){return b.patterns.findObserveGroups(t,"{","","","}")},"$...$":function(t){return b.patterns.findObserveGroups(t,"","$","$","")},"${(...)}$__$(...)$":function(t){return b.patterns.findObserveGroups(t,"${","","","}$")||b.patterns.findObserveGroups(t,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(t){return b.patterns.findObserveGroups(t,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(t){return b.patterns.findObserveGroups(t,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(t){return b.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(t){return b.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(t){return b.patterns.findObserveGroups(t,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(t){return b.patterns.findObserveGroups(t,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(t){return b.patterns.findObserveGroups(t,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(t){return b.patterns.findObserveGroups(t,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}":function(t){return b.patterns.findObserveGroups(t,"\\color{","","","}")},"\\color{(...)}{(...)}":function(t){return b.patterns.findObserveGroups(t,"\\color{","","","}","{","","","}")||b.patterns.findObserveGroups(t,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(t){return b.patterns.findObserveGroups(t,"\\ce{","","","}")},"\\pu{(...)}":function(t){return b.patterns.findObserveGroups(t,"\\pu{","","","}")},oxidation$:/^(?:[+-][IVX]+|(?:\\pm|\$\\pm\$|\+-|\+\/-)\s*0)$/,"d-oxidation$":/^(?:[+-]?[IVX]+|(?:\\pm|\$\\pm\$|\+-|\+\/-)\s*0)$/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(t){var e;if(e=t.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/),e)return{match_:e[0],remainder:t.substr(e[0].length)};var n=b.patterns.findObserveGroups(t,"","$","$","");return n&&(e=n.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/),e)?{match_:e[0],remainder:t.substr(e[0].length)}:null},amount2:function(t){return this.amount(t)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(t){if(t.match(/^\([a-z]+\)$/))return null;var e=t.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return e?{match_:e[0],remainder:t.substr(e[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(t,e,n,r,a,o,l,u,d,h){var p=function(i,f){if(typeof f=="string")return i.indexOf(f)!==0?null:f;var x=i.match(f);return x?x[0]:null},g=function(i,f,x){for(var M=0;f<i.length;){var C=i.charAt(f),A=p(i.substr(f),x);if(A!==null&&M===0)return{endMatchBegin:f,endMatchEnd:f+A.length};if(C==="{")M++;else if(C==="}"){if(M===0)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];M--}f++}return M>0,null},c=p(t,e);if(c===null||(t=t.substr(c.length),c=p(t,n),c===null))return null;var y=g(t,c.length,r||a);if(y===null)return null;var m=t.substring(0,r?y.endMatchEnd:y.endMatchBegin);if(o||l){var s=this.findObserveGroups(t.substr(y.endMatchEnd),o,l,u,d);if(s===null)return null;var _=[m,s.match_];return{match_:h?_.join(""):_,remainder:s.remainder}}else return{match_:m,remainder:t.substr(y.endMatchEnd)}},match_:function(t,e){var n=b.patterns.patterns[t];if(n===void 0)throw["MhchemBugP","mhchem bug P. Please report. ("+t+")"];if(typeof n=="function")return b.patterns.patterns[t](e);var r=e.match(n);return r?r.length>2?{match_:r.slice(1),remainder:e.substr(r[0].length)}:{match_:r[1]||r[0],remainder:e.substr(r[0].length)}:null}},actions:{"a=":function(t,e){t.a=(t.a||"")+e},"b=":function(t,e){t.b=(t.b||"")+e},"p=":function(t,e){t.p=(t.p||"")+e},"o=":function(t,e){t.o=(t.o||"")+e},"o=+p1":function(t,e,n){t.o=(t.o||"")+n},"q=":function(t,e){t.q=(t.q||"")+e},"d=":function(t,e){t.d=(t.d||"")+e},"rm=":function(t,e){t.rm=(t.rm||"")+e},"text=":function(t,e){t.text_=(t.text_||"")+e},insert:function(t,e,n){return{type_:n}},"insert+p1":function(t,e,n){return{type_:n,p1:e}},"insert+p1+p2":function(t,e,n){return{type_:n,p1:e[0],p2:e[1]}},copy:function(t,e){return e},write:function(t,e,n){return n},rm:function(t,e){return{type_:"rm",p1:e}},text:function(t,e){return b.go(e,"text")},"tex-math":function(t,e){return b.go(e,"tex-math")},"tex-math tight":function(t,e){return b.go(e,"tex-math tight")},bond:function(t,e,n){return{type_:"bond",kind_:n||e}},"color0-output":function(t,e){return{type_:"color0",color:e}},ce:function(t,e){return b.go(e,"ce")},pu:function(t,e){return b.go(e,"pu")},"1/2":function(t,e){var n=[];e.match(/^[+\-]/)&&(n.push(e.substr(0,1)),e=e.substr(1));var r=e.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return r[1]=r[1].replace(/\$/g,""),n.push({type_:"frac",p1:r[1],p2:r[2]}),r[3]&&(r[3]=r[3].replace(/\$/g,""),n.push({type_:"tex-math",p1:r[3]})),n},"9,9":function(t,e){return b.go(e,"9,9")}},stateMachines:{tex:{transitions:W({empty:{0:{action_:"copy"}},"\\ce{(...)}":{0:{action_:[{type_:"write",option:"{"},"ce",{type_:"write",option:"}"}]}},"\\pu{(...)}":{0:{action_:[{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},else:{0:{action_:"copy"}}}),actions:{}},ce:{transitions:W({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{action_:[]}},space:{a:{action_:[],nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". __* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{action_:[]}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}^":{"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"tinySkip"}],nextState:"1"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\pu{(...)}":{"*":{action_:["output",{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}],nextState:"3"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(t,e){var n;if((t.d||"").match(/^[1-9][0-9]*$/)){var r=t.d;t.d=void 0,n=this.output(t),n.push({type_:"tinySkip"}),t.b=r}else n=this.output(t);return b.actions["o="](t,e),n},"d= kv":function(t,e){t.d=e,t.dType="kv"},"charge or bond":function(t,e){if(t.beginsWithBond){var n=[];return b.concatArray(n,this.output(t)),b.concatArray(n,b.actions.bond(t,e,"-")),n}else{t.d=e;return}},"- after o/d":function(t,e,n){var r=b.patterns.match_("orbital",t.o||""),a=b.patterns.match_("one lowercase greek letter $",t.o||""),o=b.patterns.match_("one lowercase latin letter $",t.o||""),l=b.patterns.match_("$one lowercase latin letter$ $",t.o||""),u=e==="-"&&(r&&r.remainder===""||a||o||l);u&&!t.a&&!t.b&&!t.p&&!t.d&&!t.q&&!r&&o&&(t.o="$"+t.o+"$");var d=[];return u?(b.concatArray(d,this.output(t)),d.push({type_:"hyphen"})):(r=b.patterns.match_("digits",t.d||""),n&&r&&r.remainder===""?(b.concatArray(d,b.actions["d="](t,e)),b.concatArray(d,this.output(t))):(b.concatArray(d,this.output(t)),b.concatArray(d,b.actions.bond(t,e,"-")))),d},"a to o":function(t){t.o=t.a,t.a=void 0},"sb=true":function(t){t.sb=!0},"sb=false":function(t){t.sb=!1},"beginsWithBond=true":function(t){t.beginsWithBond=!0},"beginsWithBond=false":function(t){t.beginsWithBond=!1},"parenthesisLevel++":function(t){t.parenthesisLevel++},"parenthesisLevel--":function(t){t.parenthesisLevel--},"state of aggregation":function(t,e){return{type_:"state of aggregation",p1:b.go(e,"o")}},comma:function(t,e){var n=e.replace(/\s*$/,""),r=n!==e;return r&&t.parenthesisLevel===0?{type_:"comma enumeration L",p1:n}:{type_:"comma enumeration M",p1:n}},output:function(t,e,n){var r;if(!t.r)r=[],!t.a&&!t.b&&!t.p&&!t.o&&!t.q&&!t.d&&!n||(t.sb&&r.push({type_:"entitySkip"}),!t.o&&!t.q&&!t.d&&!t.b&&!t.p&&n!==2?(t.o=t.a,t.a=void 0):!t.o&&!t.q&&!t.d&&(t.b||t.p)?(t.o=t.a,t.d=t.b,t.q=t.p,t.a=t.b=t.p=void 0):t.o&&t.dType==="kv"&&b.patterns.match_("d-oxidation$",t.d||"")?t.dType="oxidation":t.o&&t.dType==="kv"&&!t.q&&(t.dType=void 0),r.push({type_:"chemfive",a:b.go(t.a,"a"),b:b.go(t.b,"bd"),p:b.go(t.p,"pq"),o:b.go(t.o,"o"),q:b.go(t.q,"pq"),d:b.go(t.d,t.dType==="oxidation"?"oxidation":"bd"),dType:t.dType}));else{var a=void 0;t.rdt==="M"?a=b.go(t.rd,"tex-math"):t.rdt==="T"?a=[{type_:"text",p1:t.rd||""}]:a=b.go(t.rd,"ce");var o=void 0;t.rqt==="M"?o=b.go(t.rq,"tex-math"):t.rqt==="T"?o=[{type_:"text",p1:t.rq||""}]:o=b.go(t.rq,"ce"),r={type_:"arrow",r:t.r,rd:a,rq:o}}for(var l in t)l!=="parenthesisLevel"&&l!=="beginsWithBond"&&delete t[l];return r},"oxidation-output":function(t,e){var n=["{"];return b.concatArray(n,b.go(e,"oxidation")),n.push("}"),n},"frac-output":function(t,e){return{type_:"frac-ce",p1:b.go(e[0],"ce"),p2:b.go(e[1],"ce")}},"overset-output":function(t,e){return{type_:"overset",p1:b.go(e[0],"ce"),p2:b.go(e[1],"ce")}},"underset-output":function(t,e){return{type_:"underset",p1:b.go(e[0],"ce"),p2:b.go(e[1],"ce")}},"underbrace-output":function(t,e){return{type_:"underbrace",p1:b.go(e[0],"ce"),p2:b.go(e[1],"ce")}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:b.go(e[1],"ce")}},"r=":function(t,e){t.r=e},"rdt=":function(t,e){t.rdt=e},"rd=":function(t,e){t.rd=e},"rqt=":function(t,e){t.rqt=e},"rq=":function(t,e){t.rq=e},operator:function(t,e,n){return{type_:"operator",kind_:n||e}}}},a:{transitions:W({empty:{"*":{action_:[]}},"1/2$":{0:{action_:"1/2"}},else:{0:{action_:[],nextState:"1",revisit:!0}},"${(...)}$__$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:W({empty:{"*":{action_:[]}},"1/2$":{0:{action_:"1/2"}},else:{0:{action_:[],nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\pu{(...)}":{"*":{action_:[{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$__$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:[{type_:"write",option:"{"},"text",{type_:"write",option:"}"}]}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:W({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$__$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\pu{(...)}":{"*":{action_:["output",{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(t){if(t.text_){var e={type_:"text",p1:t.text_};for(var n in t)delete t[n];return e}}}},pq:{transitions:W({empty:{"*":{action_:[]}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{action_:[],nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{action_:[],nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{action_:[],nextState:"!f",revisit:!0}},"${(...)}$__$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}":{"*":{action_:"color-output"}},"\\color{(...)}":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\pu{(...)}":{"*":{action_:[{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(t,e){return{type_:"state of aggregation subscript",p1:b.go(e,"o")}},"color-output":function(t,e){return{type_:"color",color1:e[0],color2:b.go(e[1],"pq")}}}},bd:{transitions:W({empty:{"*":{action_:[]}},x$:{0:{action_:[],nextState:"!f",revisit:!0}},formula$:{0:{action_:[],nextState:"f",revisit:!0}},else:{0:{action_:[],nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$__$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}":{"*":{action_:"color-output"}},"\\color{(...)}":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\pu{(...)}":{"*":{action_:[{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(t,e){return{type_:"color",color1:e[0],color2:b.go(e[1],"bd")}}}},oxidation:{transitions:W({empty:{"*":{action_:"roman-numeral"}},"pm-operator":{"*":{action_:{type_:"o=+p1",option:"\\pm"}}},else:{"*":{action_:"o="}}}),actions:{"roman-numeral":function(t){return{type_:"roman numeral",p1:t.o||""}}}},"tex-math":{transitions:W({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"\\pu{(...)}":{"*":{action_:["output",{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var n in t)delete t[n];return e}}}},"tex-math tight":{transitions:W({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"\\pu{(...)}":{"*":{action_:["output",{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(t,e){t.o=(t.o||"")+"{"+e+"}"},output:function(t){if(t.o){var e={type_:"tex-math",p1:t.o};for(var n in t)delete t[n];return e}}}},"9,9":{transitions:W({empty:{"*":{action_:[]}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:W({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{action_:[]}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(t,e){var n=[];return e[0]==="+-"||e[0]==="+/-"?n.push("\\pm "):e[0]&&n.push(e[0]),e[1]&&(b.concatArray(n,b.go(e[1],"pu-9,9")),e[2]&&(e[2].match(/[,.]/)?b.concatArray(n,b.go(e[2],"pu-9,9")):n.push(e[2])),(e[3]||e[4])&&(e[3]==="e"||e[4]==="*"?n.push({type_:"cdot"}):n.push({type_:"times"}))),e[5]&&n.push("10^{"+e[5]+"}"),n},"number^":function(t,e){var n=[];return e[0]==="+-"||e[0]==="+/-"?n.push("\\pm "):e[0]&&n.push(e[0]),b.concatArray(n,b.go(e[1],"pu-9,9")),n.push("^{"+e[2]+"}"),n},operator:function(t,e,n){return{type_:"operator",kind_:n||e}},space:function(){return{type_:"pu-space-1"}},output:function(t){var e,n=b.patterns.match_("{(...)}",t.d||"");n&&n.remainder===""&&(t.d=n.match_);var r=b.patterns.match_("{(...)}",t.q||"");if(r&&r.remainder===""&&(t.q=r.match_),t.d&&(t.d=t.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.d=t.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),t.q){t.q=t.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.q=t.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var a={d:b.go(t.d,"pu"),q:b.go(t.q,"pu")};t.o==="//"?e={type_:"pu-frac",p1:a.d,p2:a.q}:(e=a.d,a.d.length>1||a.q.length>1?e.push({type_:" / "}):e.push({type_:"/"}),b.concatArray(e,a.q))}else e=b.go(t.d,"pu-2");for(var o in t)delete t[o];return e}}},"pu-2":{transitions:W({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(t,e){t.rm+="^{"+e+"}"},space:function(){return{type_:"pu-space-2"}},output:function(t){var e=[];if(t.rm){var n=b.patterns.match_("{(...)}",t.rm||"");n&&n.remainder===""?e=b.go(n.match_,"pu"):e={type_:"rm",p1:t.rm}}for(var r in t)delete t[r];return e}}},"pu-9,9":{transitions:W({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){var n=t.text_.length%3;n===0&&(n=3);for(var r=t.text_.length-3;r>0;r-=3)e.push(t.text_.substr(r,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(0,n)),e.reverse()}else e.push(t.text_);for(var a in t)delete t[a];return e},"output-o":function(t){var e=[];if(t.text_=t.text_||"",t.text_.length>4){var n=t.text_.length-3,r=void 0;for(r=0;r<n;r+=3)e.push(t.text_.substr(r,3)),e.push({type_:"1000 separator"});e.push(t.text_.substr(r))}else e.push(t.text_);for(var a in t)delete t[a];return e}}}}},F={go:function(t,e){if(!t)return"";for(var n="",r=!1,a=0;a<t.length;a++){var o=t[a];typeof o=="string"?n+=o:(n+=F._go2(o),o.type_==="1st-level escape"&&(r=!0))}return e&&!r&&n&&(n="{"+n+"}"),n},_goInner:function(t){return F.go(t,!1)},_go2:function(t){var e;switch(t.type_){case"chemfive":e="";var n={a:F._goInner(t.a),b:F._goInner(t.b),p:F._goInner(t.p),o:F._goInner(t.o),q:F._goInner(t.q),d:F._goInner(t.d)};n.a&&(n.a.match(/^[+\-]/)&&(n.a="{"+n.a+"}"),e+=n.a+"\\,"),(n.b||n.p)&&(e+="{\\vphantom{A}}",e+="^{\\hphantom{"+(n.b||"")+"}}_{\\hphantom{"+(n.p||"")+"}}",e+="\\mkern-1.5mu",e+="{\\vphantom{A}}",e+="^{\\smash[t]{\\vphantom{2}}\\llap{"+(n.b||"")+"}}",e+="_{\\vphantom{2}\\llap{\\smash[t]{"+(n.p||"")+"}}}"),n.o&&(n.o.match(/^[+\-]/)&&(n.o="{"+n.o+"}"),e+=n.o),t.dType==="kv"?((n.d||n.q)&&(e+="{\\vphantom{A}}"),n.d&&(e+="^{"+n.d+"}"),n.q&&(e+="_{\\smash[t]{"+n.q+"}}")):t.dType==="oxidation"?(n.d&&(e+="{\\vphantom{A}}",e+="^{"+n.d+"}"),n.q&&(e+="{\\vphantom{A}}",e+="_{\\smash[t]{"+n.q+"}}")):(n.q&&(e+="{\\vphantom{A}}",e+="_{\\smash[t]{"+n.q+"}}"),n.d&&(e+="{\\vphantom{A}}",e+="^{"+n.d+"}"));break;case"rm":e="\\mathrm{"+t.p1+"}";break;case"text":t.p1.match(/[\^_]/)?(t.p1=t.p1.replace(" ","~").replace("-","\\text{-}"),e="\\mathrm{"+t.p1+"}"):e="\\text{"+t.p1+"}";break;case"roman numeral":e="\\mathrm{"+t.p1+"}";break;case"state of aggregation":e="\\mskip2mu "+F._goInner(t.p1);break;case"state of aggregation subscript":e="\\mskip1mu "+F._goInner(t.p1);break;case"bond":if(e=F._getBond(t.kind_),!e)throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+t.kind_+")"];break;case"frac":var r="\\frac{"+t.p1+"}{"+t.p2+"}";e="\\mathchoice{\\textstyle"+r+"}{"+r+"}{"+r+"}{"+r+"}";break;case"pu-frac":var a="\\frac{"+F._goInner(t.p1)+"}{"+F._goInner(t.p2)+"}";e="\\mathchoice{\\textstyle"+a+"}{"+a+"}{"+a+"}{"+a+"}";break;case"tex-math":e=t.p1+" ";break;case"frac-ce":e="\\frac{"+F._goInner(t.p1)+"}{"+F._goInner(t.p2)+"}";break;case"overset":e="\\overset{"+F._goInner(t.p1)+"}{"+F._goInner(t.p2)+"}";break;case"underset":e="\\underset{"+F._goInner(t.p1)+"}{"+F._goInner(t.p2)+"}";break;case"underbrace":e="\\underbrace{"+F._goInner(t.p1)+"}_{"+F._goInner(t.p2)+"}";break;case"color":e="{\\color{"+t.color1+"}{"+F._goInner(t.color2)+"}}";break;case"color0":e="\\color{"+t.color+"}";break;case"arrow":var o={rd:F._goInner(t.rd),rq:F._goInner(t.rq)},l=F._getArrow(t.r);o.rd||o.rq?t.r==="<=>"||t.r==="<=>>"||t.r==="<<=>"||t.r==="<-->"?(l="\\long"+l,o.rd&&(l="\\overset{"+o.rd+"}{"+l+"}"),o.rq&&(t.r==="<-->"?l="\\underset{\\lower2mu{"+o.rq+"}}{"+l+"}":l="\\underset{\\lower6mu{"+o.rq+"}}{"+l+"}"),l=" {}\\mathrel{"+l+"}{} "):(o.rq&&(l+="[{"+o.rq+"}]"),l+="{"+o.rd+"}",l=" {}\\mathrel{\\x"+l+"}{} "):l=" {}\\mathrel{\\long"+l+"}{} ",e=l;break;case"operator":e=F._getOperator(t.kind_);break;case"1st-level escape":e=t.p1+" ";break;case"space":e=" ";break;case"tinySkip":e="\\mkern2mu";break;case"entitySkip":e="~";break;case"pu-space-1":e="~";break;case"pu-space-2":e="\\mkern3mu ";break;case"1000 separator":e="\\mkern2mu ";break;case"commaDecimal":e="{,}";break;case"comma enumeration L":e="{"+t.p1+"}\\mkern6mu ";break;case"comma enumeration M":e="{"+t.p1+"}\\mkern3mu ";break;case"comma enumeration S":e="{"+t.p1+"}\\mkern1mu ";break;case"hyphen":e="\\text{-}";break;case"addition compound":e="\\,{\\cdot}\\,";break;case"electron dot":e="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":e="{\\times}";break;case"prime":e="\\prime ";break;case"cdot":e="\\cdot ";break;case"tight cdot":e="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":e="\\times ";break;case"circa":e="{\\sim}";break;case"^":e="uparrow";break;case"v":e="downarrow";break;case"ellipsis":e="\\ldots ";break;case"/":e="/";break;case" / ":e="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return e},_getArrow:function(t){switch(t){case"->":return"rightarrow";case"→":return"rightarrow";case"⟶":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<-->":return"leftrightarrows";case"<=>":return"rightleftharpoons";case"⇌":return"rightleftharpoons";case"<=>>":return"Rightleftharpoons";case"<<=>":return"Leftrightharpoons";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(t){switch(t){case"-":return"{-}";case"1":return"{-}";case"=":return"{=}";case"2":return"{=}";case"#":return"{\\equiv}";case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\rlap{\\lower.1em{-}}\\raise.1em{\\tripledash}}";case"~=":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"~--":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"-~-":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{-}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(t){switch(t){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":return" {}\\approx{} ";case"$\\approx$":return" {}\\approx{} ";case"v":return" \\downarrow{} ";case"(v)":return" \\downarrow{} ";case"^":return" \\uparrow{} ";case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}},Wr=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bn,"__esModule",{value:!0});bn.MhchemConfiguration=void 0;var pi=B,gi=I,_i=Wr(R),yi=Wr(ot),xi=It,Mi=Ce,Ae={};Ae.Macro=yi.default.Macro;Ae.xArrow=xi.AmsMethods.xArrow;Ae.Machine=function(t,e,n){var r=t.GetArgument(e),a;try{a=Mi.mhchemParser.toTex(r,n)}catch(o){throw new _i.default(o[0],o[1])}t.string=a+t.string.substr(t.i),t.i=0};new gi.CommandMap("mhchem",{ce:["Machine","ce"],pu:["Machine","pu"],longrightleftharpoons:["Macro","\\stackrel{\\textstyle{-}\\!\\!{\\rightharpoonup}}{\\smash{{\\leftharpoondown}\\!\\!{-}}}"],longRightleftharpoons:["Macro","\\stackrel{\\textstyle{-}\\!\\!{\\rightharpoonup}}{\\smash{\\leftharpoondown}}"],longLeftrightharpoons:["Macro","\\stackrel{\\textstyle\\vphantom{{-}}{\\rightharpoonup}}{\\smash{{\\leftharpoondown}\\!\\!{-}}}"],longleftrightarrows:["Macro","\\stackrel{\\longrightarrow}{\\smash{\\longleftarrow}\\Rule{0px}{.25em}{0px}}"],tripledash:["Macro","\\vphantom{-}\\raise2mu{\\kern2mu\\tiny\\text{-}\\kern1mu\\text{-}\\kern1mu\\text{-}\\kern2mu}"],xleftrightarrow:["xArrow",8596,6,6],xrightleftharpoons:["xArrow",8652,5,7],xRightleftharpoons:["xArrow",8652,5,7],xLeftrightharpoons:["xArrow",8652,5,7]},Ae);bn.MhchemConfiguration=pi.Configuration.create("mhchem",{handler:{macro:["mhchem"]}});var Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.NoErrorsConfiguration=void 0;var Ci=B;function Ai(t,e,n,r){var a=t.create("token","mtext",{},r.replace(/\n/g," ")),o=t.create("node","merror",[a],{"data-mjx-error":e,title:e});return o}Pn.NoErrorsConfiguration=Ci.Configuration.create("noerrors",{nodes:{error:Ai}});var Sn={},wi=v&&v.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.NoUndefinedConfiguration=void 0;var bi=B;function Pi(t,e){var n,r,a=t.create("text","\\"+e),o=t.options.noundefined||{},l={};try{for(var u=wi(["color","background","size"]),d=u.next();!d.done;d=u.next()){var h=d.value;o[h]&&(l["math"+h]=o[h])}}catch(p){n={error:p}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}t.Push(t.create("node","mtext",[],l,a))}Sn.NoUndefinedConfiguration=bi.Configuration.create("noundefined",{fallback:{macro:Pi},options:{noundefined:{color:"red",background:"",size:""}},priority:3});var Tn={},we={},Si=v&&v.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),On=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(we,"__esModule",{value:!0});we.AutoOpen=void 0;var lr=ce,Ti=On($()),Oi=On(K),Ei=On(nt()),ki=function(t){Si(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.openCount=0,n}return Object.defineProperty(e.prototype,"kind",{get:function(){return"auto open"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.toMml=function(){var n=this.factory.configuration.parser,r=this.getProperty("right");if(this.getProperty("smash")){var a=t.prototype.toMml.call(this),o=n.create("node","mpadded",[a],{height:0,depth:0});this.Clear(),this.Push(n.create("node","TeXAtom",[o]))}r&&this.Push(new Ei.default(r,n.stack.env,n.configuration).mml());var l=Ti.default.fenced(this.factory.configuration,this.getProperty("open"),t.prototype.toMml.call(this),this.getProperty("close"),this.getProperty("big"));return Oi.default.removeProperties(l,"open","close","texClass"),l},e.prototype.checkItem=function(n){if(n.isKind("mml")&&n.Size()===1){var r=n.toMml();r.isKind("mo")&&r.getText()===this.getProperty("open")&&this.openCount++}var a=n.getProperty("autoclose");return a&&a===this.getProperty("close")&&!this.openCount--?this.getProperty("ignore")?(this.Clear(),[[],!0]):[[this.toMml()],!0]:t.prototype.checkItem.call(this,n)},e.errors=Object.assign(Object.create(lr.BaseItem.errors),{stop:["ExtraOrMissingDelims","Extra open or missing close delimiter"]}),e}(lr.BaseItem);we.AutoOpen=ki;var En={},qi=v&&v.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,o=[],l;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(u){l={error:u}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return o},Jt=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(En,"__esModule",{value:!0});var kn=Jt(ot),H=Jt(nt()),Dt=Jt(R),qn=vt,Rt=Jt($()),rn=Jt(K),Di=pr,G={},Zr={"(":")","[":"]","{":"}","|":"|"},Yr=/^(b|B)i(g{1,2})$/;G.Quantity=function(t,e,n,r,a,o,l){n===void 0&&(n="("),r===void 0&&(r=")"),a===void 0&&(a=!1),o===void 0&&(o=""),l===void 0&&(l="");var u=a?t.GetStar():!1,d=t.GetNext(),h=t.i,p=null;if(d==="\\"){if(t.i++,p=t.GetCS(),!p.match(Yr)){var g=t.create("node","mrow");t.Push(Rt.default.fenced(t.configuration,n,g,r)),t.i=h;return}d=t.GetNext()}var c=Zr[d];if(a&&d!=="{")throw new Dt.default("MissingArgFor","Missing argument for %1",t.currentCS);if(!c){var g=t.create("node","mrow");t.Push(Rt.default.fenced(t.configuration,n,g,r)),t.i=h;return}if(o){var y=t.create("token","mi",{texClass:qn.TEXCLASS.OP},o);l&&rn.default.setAttribute(y,"mathvariant",l),t.Push(t.itemFactory.create("fn",y))}if(d==="{"){var m=t.GetArgument(e);d=a?n:"\\{",c=a?r:"\\}",m=u?d+" "+m+" "+c:p?"\\"+p+"l"+d+" "+m+" \\"+p+"r"+c:"\\left"+d+" "+m+" \\right"+c,t.Push(new H.default(m,t.stack.env,t.configuration).mml());return}a&&(d=n,c=r),t.i++,t.Push(t.itemFactory.create("auto open").setProperties({open:d,close:c,big:p}))};G.Eval=function(t,e){var n=t.GetStar(),r=t.GetNext();if(r==="{"){var a=t.GetArgument(e),o="\\left. "+(n?"\\smash{"+a+"}":a)+" \\vphantom{\\int}\\right|";t.string=t.string.slice(0,t.i)+o+t.string.slice(t.i);return}if(r==="("||r==="["){t.i++,t.Push(t.itemFactory.create("auto open").setProperties({open:r,close:"|",smash:n,right:"\\vphantom{\\int}"}));return}throw new Dt.default("MissingArgFor","Missing argument for %1",t.currentCS)};G.Commutator=function(t,e,n,r){n===void 0&&(n="["),r===void 0&&(r="]");var a=t.GetStar(),o=t.GetNext(),l=null;if(o==="\\"){if(t.i++,l=t.GetCS(),!l.match(Yr))throw new Dt.default("MissingArgFor","Missing argument for %1",t.currentCS);o=t.GetNext()}if(o!=="{")throw new Dt.default("MissingArgFor","Missing argument for %1",t.currentCS);var u=t.GetArgument(e),d=t.GetArgument(e),h=u+","+d;h=a?n+" "+h+" "+r:l?"\\"+l+"l"+n+" "+h+" \\"+l+"r"+r:"\\left"+n+" "+h+" \\right"+r,t.Push(new H.default(h,t.stack.env,t.configuration).mml())};var Ii=[65,90],Bi=[97,122],ji=[913,937],Ni=[945,969],Gi=[48,57];function Ft(t,e){return t>=e[0]&&t<=e[1]}function Fi(t,e,n,r){var a=t.configuration.parser,o=Di.NodeFactory.createToken(t,e,n,r),l=r.codePointAt(0);return r.length===1&&!a.stack.env.font&&a.stack.env.vectorFont&&(Ft(l,Ii)||Ft(l,Bi)||Ft(l,ji)||Ft(l,Gi)||Ft(l,Ni)&&a.stack.env.vectorStar||rn.default.getAttribute(o,"accent"))&&rn.default.setAttribute(o,"mathvariant",a.stack.env.vectorFont),o}G.VectorBold=function(t,e){var n=t.GetStar(),r=t.GetArgument(e),a=t.configuration.nodeFactory.get("token"),o=t.stack.env.font;delete t.stack.env.font,t.configuration.nodeFactory.set("token",Fi),t.stack.env.vectorFont=n?"bold-italic":"bold",t.stack.env.vectorStar=n;var l=new H.default(r,t.stack.env,t.configuration).mml();o&&(t.stack.env.font=o),delete t.stack.env.vectorFont,delete t.stack.env.vectorStar,t.configuration.nodeFactory.set("token",a),t.Push(l)};G.StarMacro=function(t,e,n){for(var r=[],a=3;a<arguments.length;a++)r[a-3]=arguments[a];var o=t.GetStar(),l=[];if(n)for(var u=l.length;u<n;u++)l.push(t.GetArgument(e));var d=r.join(o?"*":"");d=Rt.default.substituteArgs(t,l,d),t.string=Rt.default.addArgs(t,d,t.string.slice(t.i)),t.i=0,Rt.default.checkMaxMacros(t)};var Jr=function(t,e,n,r,a){var o=new H.default(r,t.stack.env,t.configuration).mml();t.Push(t.itemFactory.create(e,o));var l=t.GetNext(),u=Zr[l];if(u){var d="",h="",p="",g=a.indexOf(l)!==-1;if(l==="{"){p=t.GetArgument(n),d=g?"\\left\\{":"",h=g?"\\right\\}":"";var c=d+" "+p+" "+h;t.string=c+t.string.slice(t.i),t.i=0;return}g&&(t.i++,t.Push(t.itemFactory.create("auto open").setProperties({open:l,close:u})))}};G.OperatorApplication=function(t,e,n){for(var r=[],a=3;a<arguments.length;a++)r[a-3]=arguments[a];Jr(t,"fn",e,n,r)};G.VectorOperator=function(t,e,n){for(var r=[],a=3;a<arguments.length;a++)r[a-3]=arguments[a];Jr(t,"mml",e,n,r)};G.Expression=function(t,e,n,r){n===void 0&&(n=!0),r===void 0&&(r=""),r=r||e.slice(1);var a=n?t.GetBrackets(e):null,o=t.create("token","mi",{texClass:qn.TEXCLASS.OP},r);if(a){var l=new H.default(a,t.stack.env,t.configuration).mml();o=t.create("node","msup",[o,l])}t.Push(t.itemFactory.create("fn",o)),t.GetNext()==="("&&(t.i++,t.Push(t.itemFactory.create("auto open").setProperties({open:"(",close:")"})))};G.Qqtext=function(t,e,n){var r=t.GetStar(),a=n||t.GetArgument(e),o=(r?"":"\\quad")+"\\text{"+a+"}\\quad ";t.string=t.string.slice(0,t.i)+o+t.string.slice(t.i)};G.Differential=function(t,e,n){var r=t.GetBrackets(e),a=r!=null?"^{"+r+"}":" ",o=t.GetNext()==="(",l=t.GetNext()==="{",u=n+a;if(!(o||l)){u+=t.GetArgument(e,!0)||"";var d=new H.default(u,t.stack.env,t.configuration).mml();t.Push(d);return}if(l){u+=t.GetArgument(e);var d=new H.default(u,t.stack.env,t.configuration).mml();t.Push(t.create("node","TeXAtom",[d],{texClass:qn.TEXCLASS.OP}));return}t.Push(new H.default(u,t.stack.env,t.configuration).mml()),t.i++,t.Push(t.itemFactory.create("auto open").setProperties({open:"(",close:")"}))};G.Derivative=function(t,e,n,r){var a=t.GetStar(),o=t.GetBrackets(e),l=1,u=[];for(u.push(t.GetArgument(e));t.GetNext()==="{"&&l<n;)u.push(t.GetArgument(e)),l++;var d=!1,h=" ",p=" ";n>2&&u.length>2?(h="^{"+(u.length-1)+"}",d=!0):o!=null&&(n>2&&u.length>1&&(d=!0),h="^{"+o+"}",p=h);for(var g=a?"\\flatfrac":"\\frac",c=u.length>1?u[0]:"",y=u.length>1?u[1]:u[0],m="",s=2,_=void 0;_=u[s];s++)m+=r+" "+_;var i=g+"{"+r+h+c+"}{"+r+" "+y+p+" "+m+"}";t.Push(new H.default(i,t.stack.env,t.configuration).mml()),t.GetNext()==="("&&(t.i++,t.Push(t.itemFactory.create("auto open").setProperties({open:"(",close:")",ignore:d})))};G.Bra=function(t,e){var n=t.GetStar(),r=t.GetArgument(e),a="",o=!1,l=!1;if(t.GetNext()==="\\"){var u=t.i;t.i++;var d=t.GetCS(),h=t.lookup("macro",d);h&&h.symbol==="ket"?(o=!0,u=t.i,l=t.GetStar(),t.GetNext()==="{"?a=t.GetArgument(d,!0):(t.i=u,l=!1)):t.i=u}var p="";o?p=n||l?"\\langle{".concat(r,"}\\vert{").concat(a,"}\\rangle"):"\\left\\langle{".concat(r,"}\\middle\\vert{").concat(a,"}\\right\\rangle"):p=n||l?"\\langle{".concat(r,"}\\vert"):"\\left\\langle{".concat(r,"}\\right\\vert{").concat(a,"}"),t.Push(new H.default(p,t.stack.env,t.configuration).mml())};G.Ket=function(t,e){var n=t.GetStar(),r=t.GetArgument(e),a=n?"\\vert{".concat(r,"}\\rangle"):"\\left\\vert{".concat(r,"}\\right\\rangle");t.Push(new H.default(a,t.stack.env,t.configuration).mml())};G.BraKet=function(t,e){var n=t.GetStar(),r=t.GetArgument(e),a=null;t.GetNext()==="{"&&(a=t.GetArgument(e,!0));var o="";a==null?o=n?"\\langle{".concat(r,"}\\vert{").concat(r,"}\\rangle"):"\\left\\langle{".concat(r,"}\\middle\\vert{").concat(r,"}\\right\\rangle"):o=n?"\\langle{".concat(r,"}\\vert{").concat(a,"}\\rangle"):"\\left\\langle{".concat(r,"}\\middle\\vert{").concat(a,"}\\right\\rangle"),t.Push(new H.default(o,t.stack.env,t.configuration).mml())};G.KetBra=function(t,e){var n=t.GetStar(),r=t.GetArgument(e),a=null;t.GetNext()==="{"&&(a=t.GetArgument(e,!0));var o="";a==null?o=n?"\\vert{".concat(r,"}\\rangle\\!\\langle{").concat(r,"}\\vert"):"\\left\\vert{".concat(r,"}\\middle\\rangle\\!\\middle\\langle{").concat(r,"}\\right\\vert"):o=n?"\\vert{".concat(r,"}\\rangle\\!\\langle{").concat(a,"}\\vert"):"\\left\\vert{".concat(r,"}\\middle\\rangle\\!\\middle\\langle{").concat(a,"}\\right\\vert"),t.Push(new H.default(o,t.stack.env,t.configuration).mml())};function ta(t,e,n){var r=qi(t,3),a=r[0],o=r[1],l=r[2];return e&&n?"\\left\\langle{".concat(a,"}\\middle\\vert{").concat(o,"}\\middle\\vert{").concat(l,"}\\right\\rangle"):e?"\\langle{".concat(a,"}\\vert{").concat(o,"}\\vert{").concat(l,"}\\rangle"):"\\left\\langle{".concat(a,"}\\right\\vert{").concat(o,"}\\left\\vert{").concat(l,"}\\right\\rangle")}G.Expectation=function(t,e){var n=t.GetStar(),r=n&&t.GetStar(),a=t.GetArgument(e),o=null;t.GetNext()==="{"&&(o=t.GetArgument(e,!0));var l=a&&o?ta([o,a,o],n,r):n?"\\langle {".concat(a,"} \\rangle"):"\\left\\langle {".concat(a,"} \\right\\rangle");t.Push(new H.default(l,t.stack.env,t.configuration).mml())};G.MatrixElement=function(t,e){var n=t.GetStar(),r=n&&t.GetStar(),a=t.GetArgument(e),o=t.GetArgument(e),l=t.GetArgument(e),u=ta([a,o,l],n,r);t.Push(new H.default(u,t.stack.env,t.configuration).mml())};G.MatrixQuantity=function(t,e,n){var r=t.GetStar(),a=t.GetNext(),o=n?"smallmatrix":"array",l="",u="",d="";switch(a){case"{":l=t.GetArgument(e);break;case"(":t.i++,u=r?"\\lgroup":"(",d=r?"\\rgroup":")",l=t.GetUpTo(e,")");break;case"[":t.i++,u="[",d="]",l=t.GetUpTo(e,"]");break;case"|":t.i++,u="|",d="|",l=t.GetUpTo(e,"|");break;default:u="(",d=")";break}var h=(u?"\\left":"")+u+"\\begin{"+o+"}{} "+l+"\\end{"+o+"}"+(u?"\\right":"")+d;t.Push(new H.default(h,t.stack.env,t.configuration).mml())};G.IdentityMatrix=function(t,e){var n=t.GetArgument(e),r=parseInt(n,10);if(isNaN(r))throw new Dt.default("InvalidNumber","Invalid number");if(r<=1){t.string="1"+t.string.slice(t.i),t.i=0;return}for(var a=Array(r).fill("0"),o=[],l=0;l<r;l++){var u=a.slice();u[l]="1",o.push(u.join(" & "))}t.string=o.join("\\\\ ")+t.string.slice(t.i),t.i=0};G.XMatrix=function(t,e){var n=t.GetStar(),r=t.GetArgument(e),a=t.GetArgument(e),o=t.GetArgument(e),l=parseInt(a,10),u=parseInt(o,10);if(isNaN(l)||isNaN(u)||u.toString()!==o||l.toString()!==a)throw new Dt.default("InvalidNumber","Invalid number");if(l=l<1?1:l,u=u<1?1:u,!n){var d=Array(u).fill(r).join(" & "),h=Array(l).fill(d).join("\\\\ ");t.string=h+t.string.slice(t.i),t.i=0;return}var p="";if(l===1&&u===1)p=r;else if(l===1){for(var d=[],g=1;g<=u;g++)d.push("".concat(r,"_{").concat(g,"}"));p=d.join(" & ")}else if(u===1){for(var d=[],g=1;g<=l;g++)d.push("".concat(r,"_{").concat(g,"}"));p=d.join("\\\\ ")}else{for(var c=[],g=1;g<=l;g++){for(var d=[],y=1;y<=u;y++)d.push("".concat(r,"_{{").concat(g,"}{").concat(y,"}}"));c.push(d.join(" & "))}p=c.join("\\\\ ")}t.string=p+t.string.slice(t.i),t.i=0};G.PauliMatrix=function(t,e){var n=t.GetArgument(e),r=n.slice(1);switch(n[0]){case"0":r+=" 1 & 0\\\\ 0 & 1";break;case"1":case"x":r+=" 0 & 1\\\\ 1 & 0";break;case"2":case"y":r+=" 0 & -i\\\\ i & 0";break;case"3":case"z":r+=" 1 & 0\\\\ 0 & -1";break}t.string=r+t.string.slice(t.i),t.i=0};G.DiagonalMatrix=function(t,e,n){if(t.GetNext()==="{"){var r=t.i;t.GetArgument(e);var a=t.i;t.i=r+1;for(var o=[],l="",u=t.i;u<a;){try{l=t.GetUpTo(e,",")}catch{t.i=a,o.push(t.string.slice(u,a-1));break}if(t.i>=a){o.push(t.string.slice(u,a));break}u=t.i,o.push(l)}t.string=Li(o,n)+t.string.slice(a),t.i=0}};function Li(t,e){for(var n=t.length,r=[],a=0;a<n;a++)r.push(Array(e?n-a:a+1).join("&")+"\\mqty{"+t[a]+"}");return r.join("\\\\ ")}G.AutoClose=function(t,e,n){var r=t.create("token","mo",{stretchy:!1},e),a=t.itemFactory.create("mml",r).setProperties({autoclose:e});t.Push(a)};G.Vnabla=function(t,e){var n=t.options.physics.arrowdel?"\\vec{\\gradientnabla}":"{\\gradientnabla}";return t.Push(new H.default(n,t.stack.env,t.configuration).mml())};G.DiffD=function(t,e){var n=t.options.physics.italicdiff?"d":"{\\rm d}";return t.Push(new H.default(n,t.stack.env,t.configuration).mml())};G.Macro=kn.default.Macro;G.NamedFn=kn.default.NamedFn;G.Array=kn.default.Array;En.default=G;var ea=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},it=I,gt=ea(En),kt=Y,Dn=ea(yt),Ri=vt;new it.CommandMap("Physics-automatic-bracing-macros",{quantity:"Quantity",qty:"Quantity",pqty:["Quantity","(",")",!0],bqty:["Quantity","[","]",!0],vqty:["Quantity","|","|",!0],Bqty:["Quantity","\\{","\\}",!0],absolutevalue:["Quantity","|","|",!0],abs:["Quantity","|","|",!0],norm:["Quantity","\\|","\\|",!0],evaluated:"Eval",eval:"Eval",order:["Quantity","(",")",!0,"O",kt.TexConstant.Variant.CALLIGRAPHIC],commutator:"Commutator",comm:"Commutator",anticommutator:["Commutator","\\{","\\}"],acomm:["Commutator","\\{","\\}"],poissonbracket:["Commutator","\\{","\\}"],pb:["Commutator","\\{","\\}"]},gt.default);new it.CharacterMap("Physics-vector-mo",Dn.default.mathchar0mo,{dotproduct:["⋅",{mathvariant:kt.TexConstant.Variant.BOLD}],vdot:["⋅",{mathvariant:kt.TexConstant.Variant.BOLD}],crossproduct:"×",cross:"×",cp:"×",gradientnabla:["∇",{mathvariant:kt.TexConstant.Variant.BOLD}]});new it.CharacterMap("Physics-vector-mi",Dn.default.mathchar0mi,{real:["ℜ",{mathvariant:kt.TexConstant.Variant.NORMAL}],imaginary:["ℑ",{mathvariant:kt.TexConstant.Variant.NORMAL}]});new it.CommandMap("Physics-vector-macros",{vnabla:"Vnabla",vectorbold:"VectorBold",vb:"VectorBold",vectorarrow:["StarMacro",1,"\\vec{\\vb","{#1}}"],va:["StarMacro",1,"\\vec{\\vb","{#1}}"],vectorunit:["StarMacro",1,"\\hat{\\vb","{#1}}"],vu:["StarMacro",1,"\\hat{\\vb","{#1}}"],gradient:["OperatorApplication","\\vnabla","(","["],grad:["OperatorApplication","\\vnabla","(","["],divergence:["VectorOperator","\\vnabla\\vdot","(","["],div:["VectorOperator","\\vnabla\\vdot","(","["],curl:["VectorOperator","\\vnabla\\crossproduct","(","["],laplacian:["OperatorApplication","\\nabla^2","(","["]},gt.default);new it.CommandMap("Physics-expressions-macros",{sin:"Expression",sinh:"Expression",arcsin:"Expression",asin:"Expression",cos:"Expression",cosh:"Expression",arccos:"Expression",acos:"Expression",tan:"Expression",tanh:"Expression",arctan:"Expression",atan:"Expression",csc:"Expression",csch:"Expression",arccsc:"Expression",acsc:"Expression",sec:"Expression",sech:"Expression",arcsec:"Expression",asec:"Expression",cot:"Expression",coth:"Expression",arccot:"Expression",acot:"Expression",exp:["Expression",!1],log:"Expression",ln:"Expression",det:["Expression",!1],Pr:["Expression",!1],tr:["Expression",!1],trace:["Expression",!1,"tr"],Tr:["Expression",!1],Trace:["Expression",!1,"Tr"],rank:"NamedFn",erf:["Expression",!1],Residue:["Macro","\\mathrm{Res}"],Res:["OperatorApplication","\\Residue","(","[","{"],principalvalue:["OperatorApplication","{\\cal P}"],pv:["OperatorApplication","{\\cal P}"],PV:["OperatorApplication","{\\rm P.V.}"],Re:["OperatorApplication","\\mathrm{Re}","{"],Im:["OperatorApplication","\\mathrm{Im}","{"],sine:["NamedFn","sin"],hypsine:["NamedFn","sinh"],arcsine:["NamedFn","arcsin"],asine:["NamedFn","asin"],cosine:["NamedFn","cos"],hypcosine:["NamedFn","cosh"],arccosine:["NamedFn","arccos"],acosine:["NamedFn","acos"],tangent:["NamedFn","tan"],hyptangent:["NamedFn","tanh"],arctangent:["NamedFn","arctan"],atangent:["NamedFn","atan"],cosecant:["NamedFn","csc"],hypcosecant:["NamedFn","csch"],arccosecant:["NamedFn","arccsc"],acosecant:["NamedFn","acsc"],secant:["NamedFn","sec"],hypsecant:["NamedFn","sech"],arcsecant:["NamedFn","arcsec"],asecant:["NamedFn","asec"],cotangent:["NamedFn","cot"],hypcotangent:["NamedFn","coth"],arccotangent:["NamedFn","arccot"],acotangent:["NamedFn","acot"],exponential:["NamedFn","exp"],logarithm:["NamedFn","log"],naturallogarithm:["NamedFn","ln"],determinant:["NamedFn","det"],Probability:["NamedFn","Pr"]},gt.default);new it.CommandMap("Physics-quick-quad-macros",{qqtext:"Qqtext",qq:"Qqtext",qcomma:["Macro","\\qqtext*{,}"],qc:["Macro","\\qqtext*{,}"],qcc:["Qqtext","c.c."],qif:["Qqtext","if"],qthen:["Qqtext","then"],qelse:["Qqtext","else"],qotherwise:["Qqtext","otherwise"],qunless:["Qqtext","unless"],qgiven:["Qqtext","given"],qusing:["Qqtext","using"],qassume:["Qqtext","assume"],qsince:["Qqtext","since"],qlet:["Qqtext","let"],qfor:["Qqtext","for"],qall:["Qqtext","all"],qeven:["Qqtext","even"],qodd:["Qqtext","odd"],qinteger:["Qqtext","integer"],qand:["Qqtext","and"],qor:["Qqtext","or"],qas:["Qqtext","as"],qin:["Qqtext","in"]},gt.default);new it.CommandMap("Physics-derivative-macros",{diffd:"DiffD",flatfrac:["Macro","\\left.#1\\middle/#2\\right.",2],differential:["Differential","\\diffd"],dd:["Differential","\\diffd"],variation:["Differential","\\delta"],var:["Differential","\\delta"],derivative:["Derivative",2,"\\diffd"],dv:["Derivative",2,"\\diffd"],partialderivative:["Derivative",3,"\\partial"],pderivative:["Derivative",3,"\\partial"],pdv:["Derivative",3,"\\partial"],functionalderivative:["Derivative",2,"\\delta"],fderivative:["Derivative",2,"\\delta"],fdv:["Derivative",2,"\\delta"]},gt.default);new it.CommandMap("Physics-bra-ket-macros",{bra:"Bra",ket:"Ket",innerproduct:"BraKet",ip:"BraKet",braket:"BraKet",outerproduct:"KetBra",dyad:"KetBra",ketbra:"KetBra",op:"KetBra",expectationvalue:"Expectation",expval:"Expectation",ev:"Expectation",matrixelement:"MatrixElement",matrixel:"MatrixElement",mel:"MatrixElement"},gt.default);new it.CommandMap("Physics-matrix-macros",{matrixquantity:"MatrixQuantity",mqty:"MatrixQuantity",pmqty:["Macro","\\mqty(#1)",1],Pmqty:["Macro","\\mqty*(#1)",1],bmqty:["Macro","\\mqty[#1]",1],vmqty:["Macro","\\mqty|#1|",1],smallmatrixquantity:["MatrixQuantity",!0],smqty:["MatrixQuantity",!0],spmqty:["Macro","\\smqty(#1)",1],sPmqty:["Macro","\\smqty*(#1)",1],sbmqty:["Macro","\\smqty[#1]",1],svmqty:["Macro","\\smqty|#1|",1],matrixdeterminant:["Macro","\\vmqty{#1}",1],mdet:["Macro","\\vmqty{#1}",1],smdet:["Macro","\\svmqty{#1}",1],identitymatrix:"IdentityMatrix",imat:"IdentityMatrix",xmatrix:"XMatrix",xmat:"XMatrix",zeromatrix:["Macro","\\xmat{0}{#1}{#2}",2],zmat:["Macro","\\xmat{0}{#1}{#2}",2],paulimatrix:"PauliMatrix",pmat:"PauliMatrix",diagonalmatrix:"DiagonalMatrix",dmat:"DiagonalMatrix",antidiagonalmatrix:["DiagonalMatrix",!0],admat:["DiagonalMatrix",!0]},gt.default);new it.EnvironmentMap("Physics-aux-envs",Dn.default.environment,{smallmatrix:["Array",null,null,null,"c","0.333em",".2em","S",1]},gt.default);new it.MacroMap("Physics-characters",{"|":["AutoClose",Ri.TEXCLASS.ORD],")":"AutoClose","]":"AutoClose"},gt.default);var Xe;Object.defineProperty(Tn,"__esModule",{value:!0});Tn.PhysicsConfiguration=void 0;var $i=B,ur=we;Tn.PhysicsConfiguration=$i.Configuration.create("physics",{handler:{macro:["Physics-automatic-bracing-macros","Physics-vector-macros","Physics-vector-mo","Physics-vector-mi","Physics-derivative-macros","Physics-expressions-macros","Physics-quick-quad-macros","Physics-bra-ket-macros","Physics-matrix-macros"],character:["Physics-characters"],environment:["Physics-aux-envs"]},items:(Xe={},Xe[ur.AutoOpen.prototype.kind]=ur.AutoOpen,Xe),options:{physics:{italicdiff:!1,arrowdel:!1}}});var Ui={};(function(t){var e=v&&v.__values||function(c){var y=typeof Symbol=="function"&&Symbol.iterator,m=y&&c[y],s=0;if(m)return m.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&s>=c.length&&(c=void 0),{value:c&&c[s++],done:!c}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")},n=v&&v.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0}),t.SetOptionsConfiguration=t.SetOptionsUtil=void 0;var r=B,a=I,o=n(R),l=n($()),u=Qt,d=n(ot),h=Kt;t.SetOptionsUtil={filterPackage:function(c,y){if(y!=="tex"&&!r.ConfigurationHandler.get(y))throw new o.default("NotAPackage","Not a defined package: %1",y);var m=c.options.setoptions,s=m.allowOptions[y];if(s===void 0&&!m.allowPackageDefault||s===!1)throw new o.default("PackageNotSettable",`Options can't be set for package "%1"`,y);return!0},filterOption:function(c,y,m){var s,_=c.options.setoptions,i=_.allowOptions[y]||{},f=i.hasOwnProperty(m)&&!(0,h.isObject)(i[m])?i[m]:null;if(f===!1||f===null&&!_.allowOptionsDefault)throw new o.default("OptionNotSettable",'Option "%1" is not allowed to be set',m);if(!(!((s=y==="tex"?c.options:c.options[y])===null||s===void 0)&&s.hasOwnProperty(m)))throw y==="tex"?new o.default("InvalidTexOption",'Invalid TeX option "%1"',m):new o.default("InvalidOptionKey",'Invalid option "%1" for package "%2"',m,y);return!0},filterValue:function(c,y,m,s){return s}};var p=new a.CommandMap("setoptions",{setOptions:"SetOptions"},{SetOptions:function(c,y){var m,s,_=c.GetBrackets(y)||"tex",i=l.default.keyvalOptions(c.GetArgument(y)),f=c.options.setoptions;if(f.filterPackage(c,_))try{for(var x=e(Object.keys(i)),M=x.next();!M.done;M=x.next()){var C=M.value;f.filterOption(c,_,C)&&((_==="tex"?c.options:c.options[_])[C]=f.filterValue(c,_,C,i[C]))}}catch(A){m={error:A}}finally{try{M&&!M.done&&(s=x.return)&&s.call(x)}finally{if(m)throw m.error}}}});function g(c,y){var m=y.parseOptions.handlers.get("macro").lookup("require");m&&(p.add("Require",new u.Macro("Require",m._func)),p.add("require",new u.Macro("require",d.default.Macro,["\\Require{#2}\\setOptions[#2]{#1}",2,""])))}t.SetOptionsConfiguration=r.Configuration.create("setoptions",{handler:{macro:["setoptions"]},config:g,priority:3,options:{setoptions:{filterPackage:t.SetOptionsUtil.filterPackage,filterOption:t.SetOptionsUtil.filterOption,filterValue:t.SetOptionsUtil.filterValue,allowPackageDefault:!0,allowOptionsDefault:!0,allowOptions:(0,h.expandable)({tex:{FindTeX:!1,formatError:!1,package:!1,baseURL:!1,tags:!1,maxBuffer:!1,maxMaxros:!1,macros:!1,environments:!1},setoptions:!1,autoload:!1,require:!1,configmacros:!1,tagformat:!1})}}})})(Ui);var Ht={},Vi=v&&v.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Ht,"__esModule",{value:!0});Ht.TagFormatConfiguration=Ht.tagformatConfig=void 0;var zi=B,Qe=ue,cr=0;function na(t,e){var n=e.parseOptions.options.tags;n!=="base"&&t.tags.hasOwnProperty(n)&&Qe.TagsFactory.add(n,t.tags[n]);var r=Qe.TagsFactory.create(e.parseOptions.options.tags).constructor,a=function(l){Vi(u,l);function u(){return l!==null&&l.apply(this,arguments)||this}return u.prototype.formatNumber=function(d){return e.parseOptions.options.tagformat.number(d)},u.prototype.formatTag=function(d){return e.parseOptions.options.tagformat.tag(d)},u.prototype.formatId=function(d){return e.parseOptions.options.tagformat.id(d)},u.prototype.formatUrl=function(d,h){return e.parseOptions.options.tagformat.url(d,h)},u}(r);cr++;var o="configTags-"+cr;Qe.TagsFactory.add(o,a),e.parseOptions.options.tags=o}Ht.tagformatConfig=na;Ht.TagFormatConfiguration=zi.Configuration.create("tagformat",{config:[na,10],options:{tagformat:{number:function(t){return t.toString()},tag:function(t){return"("+t+")"},id:function(t){return"mjx-eqn:"+t.replace(/\s/g,"_")},url:function(t,e){return e+"#"+encodeURIComponent(t)}}}});var In={},Nt={},ra=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.TextMacrosMethods=void 0;var Hi=ra(nt()),Xi=pa,Ot=ra(ot);Nt.TextMacrosMethods={Comment:function(t,e){for(;t.i<t.string.length&&t.string.charAt(t.i)!==`
`;)t.i++;t.i++},Math:function(t,e){t.saveText();for(var n=t.i,r,a,o=0;a=t.GetNext();)switch(r=t.i++,a){case"\\":var l=t.GetCS();l===")"&&(a="\\(");case"$":if(o===0&&e===a){var u=t.texParser.configuration,d=new Hi.default(t.string.substr(n,r-n),t.stack.env,u).mml();t.PushMath(d);return}break;case"{":o++;break;case"}":o===0&&t.Error("ExtraCloseMissingOpen","Extra close brace or missing open brace"),o--;break}t.Error("MathNotTerminated","Math-mode is not properly terminated")},MathModeOnly:function(t,e){t.Error("MathModeOnly","'%1' allowed only in math mode",e)},Misplaced:function(t,e){t.Error("Misplaced","'%1' can not be used here",e)},OpenBrace:function(t,e){var n=t.stack.env;t.envStack.push(n),t.stack.env=Object.assign({},n)},CloseBrace:function(t,e){t.envStack.length?(t.saveText(),t.stack.env=t.envStack.pop()):t.Error("ExtraCloseMissingOpen","Extra close brace or missing open brace")},OpenQuote:function(t,e){t.string.charAt(t.i)===e?(t.text+="“",t.i++):t.text+="‘"},CloseQuote:function(t,e){t.string.charAt(t.i)===e?(t.text+="”",t.i++):t.text+="’"},Tilde:function(t,e){t.text+=" "},Space:function(t,e){for(t.text+=" ";t.GetNext().match(/\s/);)t.i++},SelfQuote:function(t,e){t.text+=e.substr(1)},Insert:function(t,e,n){t.text+=n},Accent:function(t,e,n){var r=t.ParseArg(e),a=t.create("token","mo",{},n);t.addAttributes(a),t.Push(t.create("node","mover",[r,a]))},Emph:function(t,e){var n=t.stack.env.mathvariant==="-tex-mathit"?"normal":"-tex-mathit";t.Push(t.ParseTextArg(e,{mathvariant:n}))},SetFont:function(t,e,n){t.saveText(),t.stack.env.mathvariant=n},SetSize:function(t,e,n){t.saveText(),t.stack.env.mathsize=n},CheckAutoload:function(t,e){var n=t.configuration.packageData.get("autoload"),r=t.texParser;e=e.slice(1);var a=r.lookup("macro",e);if(!a||n&&a._func===n.Autoload){if(r.parse("macro",[r,e]),!a)return;(0,Xi.retryAfter)(Promise.resolve())}r.parse("macro",[t,e])},Macro:Ot.default.Macro,Spacer:Ot.default.Spacer,Hskip:Ot.default.Hskip,rule:Ot.default.rule,Rule:Ot.default.Rule,HandleRef:Ot.default.HandleRef};var te={},Qi=v&&v.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(r[o]=a[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sr=v&&v.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ki=v&&v.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,o=[],l;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(u){l={error:u}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return o},Wi=v&&v.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,o;r<a;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},be=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(te,"__esModule",{value:!0});te.TextParser=void 0;var Zi=be(nt()),dr=be(R),Yi=be($()),Ji=vt,fr=be(K),mr=Pt,tl=function(t){Qi(e,t);function e(n,r,a,o){var l=t.call(this,n,r,a)||this;return l.level=o,l}return Object.defineProperty(e.prototype,"texParser",{get:function(){return this.configuration.packageData.get("textmacros").texParser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tags",{get:function(){return this.texParser.tags},enumerable:!1,configurable:!0}),e.prototype.mml=function(){return this.level!=null?this.create("node","mstyle",this.nodes,{displaystyle:!1,scriptlevel:this.level}):this.nodes.length===1?this.nodes[0]:this.create("node","mrow",this.nodes)},e.prototype.Parse=function(){this.text="",this.nodes=[],this.envStack=[],t.prototype.Parse.call(this)},e.prototype.saveText=function(){if(this.text){var n=this.stack.env.mathvariant,r=Yi.default.internalText(this,this.text,n?{mathvariant:n}:{});this.text="",this.Push(r)}},e.prototype.Push=function(n){if(this.text&&this.saveText(),n instanceof mr.StopItem)return t.prototype.Push.call(this,n);if(n instanceof mr.StyleItem){this.stack.env.mathcolor=this.stack.env.color;return}n instanceof Ji.AbstractMmlNode&&(this.addAttributes(n),this.nodes.push(n))},e.prototype.PushMath=function(n){var r,a,o=this.stack.env;n.isKind("TeXAtom")||(n=this.create("node","TeXAtom",[n]));try{for(var l=sr(["mathsize","mathcolor"]),u=l.next();!u.done;u=l.next()){var d=u.value;o[d]&&!n.attributes.getExplicit(d)&&(!n.isToken&&!n.isKind("mstyle")&&(n=this.create("node","mstyle",[n])),fr.default.setAttribute(n,d,o[d]))}}catch(h){r={error:h}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}n.isInferred&&(n=this.create("node","mrow",n.childNodes)),this.nodes.push(n)},e.prototype.addAttributes=function(n){var r,a,o=this.stack.env;if(n.isToken)try{for(var l=sr(["mathsize","mathcolor","mathvariant"]),u=l.next();!u.done;u=l.next()){var d=u.value;o[d]&&!n.attributes.getExplicit(d)&&fr.default.setAttribute(n,d,o[d])}}catch(h){r={error:h}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}},e.prototype.ParseTextArg=function(n,r){var a=this.GetArgument(n);return r=Object.assign(Object.assign({},this.stack.env),r),new e(a,r,this.configuration).mml()},e.prototype.ParseArg=function(n){return new e(this.GetArgument(n),this.stack.env,this.configuration).mml()},e.prototype.Error=function(n,r){for(var a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];throw new(dr.default.bind.apply(dr.default,Wi([void 0,n,r],Ki(a),!1)))},e}(Zi.default);te.TextParser=tl;var el=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},nl=I,tt=Y,rl=Nt,al=el($()),ol=te;new nl.CommandMap("textcomp-macros",{textasciicircum:["Insert","^"],textasciitilde:["Insert","~"],textasteriskcentered:["Insert","*"],textbackslash:["Insert","\\"],textbar:["Insert","|"],textbraceleft:["Insert","{"],textbraceright:["Insert","}"],textbullet:["Insert","•"],textdagger:["Insert","†"],textdaggerdbl:["Insert","‡"],textellipsis:["Insert","…"],textemdash:["Insert","—"],textendash:["Insert","–"],textexclamdown:["Insert","¡"],textgreater:["Insert",">"],textless:["Insert","<"],textordfeminine:["Insert","ª"],textordmasculine:["Insert","º"],textparagraph:["Insert","¶"],textperiodcentered:["Insert","·"],textquestiondown:["Insert","¿"],textquotedblleft:["Insert","“"],textquotedblright:["Insert","”"],textquoteleft:["Insert","‘"],textquoteright:["Insert","’"],textsection:["Insert","§"],textunderscore:["Insert","_"],textvisiblespace:["Insert","␣"],textacutedbl:["Insert","˝"],textasciiacute:["Insert","´"],textasciibreve:["Insert","˘"],textasciicaron:["Insert","ˇ"],textasciidieresis:["Insert","¨"],textasciimacron:["Insert","¯"],textgravedbl:["Insert","˵"],texttildelow:["Insert","˷"],textbaht:["Insert","฿"],textcent:["Insert","¢"],textcolonmonetary:["Insert","₡"],textcurrency:["Insert","¤"],textdollar:["Insert","$"],textdong:["Insert","₫"],texteuro:["Insert","€"],textflorin:["Insert","ƒ"],textguarani:["Insert","₲"],textlira:["Insert","₤"],textnaira:["Insert","₦"],textpeso:["Insert","₱"],textsterling:["Insert","£"],textwon:["Insert","₩"],textyen:["Insert","¥"],textcircledP:["Insert","℗"],textcompwordmark:["Insert","‌"],textcopyleft:["Insert","🄯"],textcopyright:["Insert","©"],textregistered:["Insert","®"],textservicemark:["Insert","℠"],texttrademark:["Insert","™"],textbardbl:["Insert","‖"],textbigcircle:["Insert","◯"],textblank:["Insert","␢"],textbrokenbar:["Insert","¦"],textdiscount:["Insert","⁒"],textestimated:["Insert","℮"],textinterrobang:["Insert","‽"],textinterrobangdown:["Insert","⸘"],textmusicalnote:["Insert","♪"],textnumero:["Insert","№"],textopenbullet:["Insert","◦"],textpertenthousand:["Insert","‱"],textperthousand:["Insert","‰"],textrecipe:["Insert","℞"],textreferencemark:["Insert","※"],textlangle:["Insert","〈"],textrangle:["Insert","〉"],textlbrackdbl:["Insert","⟦"],textrbrackdbl:["Insert","⟧"],textlquill:["Insert","⁅"],textrquill:["Insert","⁆"],textcelsius:["Insert","℃"],textdegree:["Insert","°"],textdiv:["Insert","÷"],textdownarrow:["Insert","↓"],textfractionsolidus:["Insert","⁄"],textleftarrow:["Insert","←"],textlnot:["Insert","¬"],textmho:["Insert","℧"],textminus:["Insert","−"],textmu:["Insert","µ"],textohm:["Insert","Ω"],textonehalf:["Insert","½"],textonequarter:["Insert","¼"],textonesuperior:["Insert","¹"],textpm:["Insert","±"],textrightarrow:["Insert","→"],textsurd:["Insert","√"],textthreequarters:["Insert","¾"],textthreesuperior:["Insert","³"],texttimes:["Insert","×"],texttwosuperior:["Insert","²"],textuparrow:["Insert","↑"],textborn:["Insert","*"],textdied:["Insert","†"],textdivorced:["Insert","⚮"],textmarried:["Insert","⚭"],textcentoldstyle:["Insert","¢",tt.TexConstant.Variant.OLDSTYLE],textdollaroldstyle:["Insert","$",tt.TexConstant.Variant.OLDSTYLE],textzerooldstyle:["Insert","0",tt.TexConstant.Variant.OLDSTYLE],textoneoldstyle:["Insert","1",tt.TexConstant.Variant.OLDSTYLE],texttwooldstyle:["Insert","2",tt.TexConstant.Variant.OLDSTYLE],textthreeoldstyle:["Insert","3",tt.TexConstant.Variant.OLDSTYLE],textfouroldstyle:["Insert","4",tt.TexConstant.Variant.OLDSTYLE],textfiveoldstyle:["Insert","5",tt.TexConstant.Variant.OLDSTYLE],textsixoldstyle:["Insert","6",tt.TexConstant.Variant.OLDSTYLE],textsevenoldstyle:["Insert","7",tt.TexConstant.Variant.OLDSTYLE],texteightoldstyle:["Insert","8",tt.TexConstant.Variant.OLDSTYLE],textnineoldstyle:["Insert","9",tt.TexConstant.Variant.OLDSTYLE]},{Insert:function(t,e,n,r){if(t instanceof ol.TextParser){if(!r){rl.TextMacrosMethods.Insert(t,e,n);return}t.saveText()}t.Push(al.default.internalText(t,n,r?{mathvariant:r}:{}))}});Object.defineProperty(In,"__esModule",{value:!0});In.TextcompConfiguration=void 0;var il=B;In.TextcompConfiguration=il.Configuration.create("textcomp",{handler:{macro:["textcomp-macros"]}});var Xt={},aa=I,ut=Y,oa=Nt,At=on;new aa.MacroMap("text-special",{$:"Math","%":"Comment","^":"MathModeOnly",_:"MathModeOnly","&":"Misplaced","#":"Misplaced","~":"Tilde"," ":"Space","	":"Space","\r":"Space","\n":"Space"," ":"Tilde","{":"OpenBrace","}":"CloseBrace","`":"OpenQuote","'":"CloseQuote"},oa.TextMacrosMethods);new aa.CommandMap("text-macros",{"(":"Math",$:"SelfQuote",_:"SelfQuote","%":"SelfQuote","{":"SelfQuote","}":"SelfQuote"," ":"SelfQuote","&":"SelfQuote","#":"SelfQuote","\\":"SelfQuote","'":["Accent","´"],"’":["Accent","´"],"`":["Accent","`"],"‘":["Accent","`"],"^":["Accent","^"],'"':["Accent","¨"],"~":["Accent","~"],"=":["Accent","¯"],".":["Accent","˙"],u:["Accent","˘"],v:["Accent","ˇ"],emph:"Emph",rm:["SetFont",ut.TexConstant.Variant.NORMAL],mit:["SetFont",ut.TexConstant.Variant.ITALIC],oldstyle:["SetFont",ut.TexConstant.Variant.OLDSTYLE],cal:["SetFont",ut.TexConstant.Variant.CALLIGRAPHIC],it:["SetFont","-tex-mathit"],bf:["SetFont",ut.TexConstant.Variant.BOLD],bbFont:["SetFont",ut.TexConstant.Variant.DOUBLESTRUCK],scr:["SetFont",ut.TexConstant.Variant.SCRIPT],frak:["SetFont",ut.TexConstant.Variant.FRAKTUR],sf:["SetFont",ut.TexConstant.Variant.SANSSERIF],tt:["SetFont",ut.TexConstant.Variant.MONOSPACE],tiny:["SetSize",.5],Tiny:["SetSize",.6],scriptsize:["SetSize",.7],small:["SetSize",.85],normalsize:["SetSize",1],large:["SetSize",1.2],Large:["SetSize",1.44],LARGE:["SetSize",1.73],huge:["SetSize",2.07],Huge:["SetSize",2.49],Bbb:["Macro","{\\bbFont #1}",1],textnormal:["Macro","{\\rm #1}",1],textup:["Macro","{\\rm #1}",1],textrm:["Macro","{\\rm #1}",1],textit:["Macro","{\\it #1}",1],textbf:["Macro","{\\bf #1}",1],textsf:["Macro","{\\sf #1}",1],texttt:["Macro","{\\tt #1}",1],dagger:["Insert","†"],ddagger:["Insert","‡"],S:["Insert","§"],",":["Spacer",At.MATHSPACE.thinmathspace],":":["Spacer",At.MATHSPACE.mediummathspace],">":["Spacer",At.MATHSPACE.mediummathspace],";":["Spacer",At.MATHSPACE.thickmathspace],"!":["Spacer",At.MATHSPACE.negativethinmathspace],enspace:["Spacer",.5],quad:["Spacer",1],qquad:["Spacer",2],thinspace:["Spacer",At.MATHSPACE.thinmathspace],negthinspace:["Spacer",At.MATHSPACE.negativethinmathspace],hskip:"Hskip",hspace:"Hskip",kern:"Hskip",mskip:"Hskip",mspace:"Hskip",mkern:"Hskip",rule:"rule",Rule:["Rule"],Space:["Rule","blank"],color:"CheckAutoload",textcolor:"CheckAutoload",colorbox:"CheckAutoload",fcolorbox:"CheckAutoload",href:"CheckAutoload",style:"CheckAutoload",class:"CheckAutoload",cssId:"CheckAutoload",unicode:"CheckAutoload",ref:["HandleRef",!1],eqref:["HandleRef",!0]},oa.TextMacrosMethods);var ll=v&&v.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Et;Object.defineProperty(Xt,"__esModule",{value:!0});Xt.TextMacrosConfiguration=Xt.TextBaseConfiguration=void 0;var an=B,ul=ll(ha),hr=ue,_t=Pt,vr=te,cl=Nt;Xt.TextBaseConfiguration=an.Configuration.create("text-base",{parser:"text",handler:{character:["command","text-special"],macro:["text-macros"]},fallback:{character:function(t,e){t.text+=e},macro:function(t,e){var n=t.texParser,r=n.lookup("macro",e);r&&r._func!==cl.TextMacrosMethods.Macro&&t.Error("MathMacro","%1 is only supported in math mode","\\"+e),n.parse("macro",[t,e])}},items:(Et={},Et[_t.StartItem.prototype.kind]=_t.StartItem,Et[_t.StopItem.prototype.kind]=_t.StopItem,Et[_t.MmlItem.prototype.kind]=_t.MmlItem,Et[_t.StyleItem.prototype.kind]=_t.StyleItem,Et)});function sl(t,e,n,r){var a=t.configuration.packageData.get("textmacros");return t instanceof vr.TextParser||(a.texParser=t),[new vr.TextParser(e,r?{mathvariant:r}:{},a.parseOptions,n).mml()]}Xt.TextMacrosConfiguration=an.Configuration.create("textmacros",{config:function(t,e){var n=new an.ParserConfiguration(e.parseOptions.options.textmacros.packages,["tex","text"]);n.init();var r=new ul.default(n,[]);r.options=e.parseOptions.options,n.config(e),hr.TagsFactory.addTags(n.tags),r.tags=hr.TagsFactory.getDefault(),r.tags.configuration=r,r.packageData=e.parseOptions.packageData,r.packageData.set("textmacros",{parseOptions:r,jax:e,texParser:null}),r.options.internalMath=sl},preprocessors:[function(t){var e=t.data.packageData.get("textmacros");e.parseOptions.nodeFactory.setMmlFactory(e.jax.mmlFactory)}],options:{textmacros:{packages:["text-base"]}}});var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.UpgreekConfiguration=void 0;var dl=B,fl=I,ml=Y;function hl(t,e){var n=e.attributes||{};n.mathvariant=ml.TexConstant.Variant.NORMAL;var r=t.create("token","mi",n,e.char);t.Push(r)}new fl.CharacterMap("upgreek",hl,{upalpha:"α",upbeta:"β",upgamma:"γ",updelta:"δ",upepsilon:"ϵ",upzeta:"ζ",upeta:"η",uptheta:"θ",upiota:"ι",upkappa:"κ",uplambda:"λ",upmu:"μ",upnu:"ν",upxi:"ξ",upomicron:"ο",uppi:"π",uprho:"ρ",upsigma:"σ",uptau:"τ",upupsilon:"υ",upphi:"ϕ",upchi:"χ",uppsi:"ψ",upomega:"ω",upvarepsilon:"ε",upvartheta:"ϑ",upvarpi:"ϖ",upvarrho:"ϱ",upvarsigma:"ς",upvarphi:"φ",Upgamma:"Γ",Updelta:"Δ",Uptheta:"Θ",Uplambda:"Λ",Upxi:"Ξ",Uppi:"Π",Upsigma:"Σ",Upupsilon:"Υ",Upphi:"Φ",Uppsi:"Ψ",Upomega:"Ω"});Bn.UpgreekConfiguration=dl.Configuration.create("upgreek",{handler:{macro:["upgreek"]}});var vl={};(function(t){var e=v&&v.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeConfiguration=t.UnicodeMethods=void 0;var n=B,r=e(R),a=I,o=e($()),l=e(K),u=va;t.UnicodeMethods={};var d={};t.UnicodeMethods.Unicode=function(h,p){var g=h.GetBrackets(p),c=null,y=null;g&&(g.replace(/ /g,"").match(/^(\d+(\.\d*)?|\.\d+),(\d+(\.\d*)?|\.\d+)$/)?(c=g.replace(/ /g,"").split(/,/),y=h.GetBrackets(p)):y=g);var m=o.default.trimSpaces(h.GetArgument(p)).replace(/^0x/,"x");if(!m.match(/^(x[0-9A-Fa-f]+|[0-9]+)$/))throw new r.default("BadUnicode","Argument to \\unicode must be a number");var s=parseInt(m.match(/^x/)?"0"+m:m);d[s]?y||(y=d[s][2]):d[s]=[800,200,y,s],c&&(d[s][0]=Math.floor(parseFloat(c[0])*1e3),d[s][1]=Math.floor(parseFloat(c[1])*1e3));var _=h.stack.env.font,i={};y?(d[s][2]=i.fontfamily=y.replace(/'/g,"'"),_&&(_.match(/bold/)&&(i.fontweight="bold"),_.match(/italic|-mathit/)&&(i.fontstyle="italic"))):_&&(i.mathvariant=_);var f=h.create("token","mtext",i,(0,u.numeric)(m));l.default.setProperty(f,"unicode",!0),h.Push(f)},new a.CommandMap("unicode",{unicode:"Unicode"},t.UnicodeMethods),t.UnicodeConfiguration=n.Configuration.create("unicode",{handler:{macro:["unicode"]}})})(vl);var pl={};(function(t){var e=v&&v.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(t,"__esModule",{value:!0}),t.VerbConfiguration=t.VerbMethods=void 0;var n=B,r=Y,a=I,o=e(R);t.VerbMethods={},t.VerbMethods.Verb=function(l,u){var d=l.GetNext(),h=++l.i;if(d==="")throw new o.default("MissingArgFor","Missing argument for %1",u);for(;l.i<l.string.length&&l.string.charAt(l.i)!==d;)l.i++;if(l.i===l.string.length)throw new o.default("NoClosingDelim","Can't find closing delimiter for %1",l.currentCS);var p=l.string.slice(h,l.i).replace(/ /g," ");l.i++,l.Push(l.create("token","mtext",{mathvariant:r.TexConstant.Variant.MONOSPACE},p))},new a.CommandMap("verb",{verb:"Verb"},t.VerbMethods),t.VerbConfiguration=n.Configuration.create("verb",{handler:{macro:["verb"]}})})(pl);Object.defineProperty($t,"__esModule",{value:!0});var ia=$t.AllPackages=void 0;Kr();typeof MathJax<"u"&&MathJax.loader&&MathJax.loader.preLoad("[tex]/action","[tex]/ams","[tex]/amscd","[tex]/bbox","[tex]/boldsymbol","[tex]/braket","[tex]/bussproofs","[tex]/cancel","[tex]/cases","[tex]/centernot","[tex]/color","[tex]/colorv2","[tex]/colortbl","[tex]/empheq","[tex]/enclose","[tex]/extpfeil","[tex]/gensymb","[tex]/html","[tex]/mathtools","[tex]/mhchem","[tex]/newcommand","[tex]/noerrors","[tex]/noundefined","[tex]/physics","[tex]/upgreek","[tex]/unicode","[tex]/verb","[tex]/configmacros","[tex]/tagformat","[tex]/textcomp","[tex]/textmacros","[tex]/setoptions");ia=$t.AllPackages=["base","action","ams","amscd","bbox","boldsymbol","braket","bussproofs","cancel","cases","centernot","color","colortbl","empheq","enclose","extpfeil","gensymb","html","mathtools","mhchem","newcommand","noerrors","noundefined","upgreek","unicode","verb","configmacros","tagformat","textcomp","textmacros"];const Cl=ga({__proto__:null,get AllPackages(){return ia},default:$t},[$t]);export{Cl as A};
